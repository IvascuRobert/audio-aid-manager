(function(){var qt,yr,Ce,oi,gn,Bi,an,qn,Cn,Sn,Tn,Fn,wt,Ot,Jn,yn,Hn,Ar,ct,rr,et,tn,kr,qo,Qt,Lr,jt,Ve,Ir,De,Pe,oa,$t,Kr,ur,Mn,Z,j,Jr,Xn,Sa,vn,Fe,_t,Ee,Se,bt,dt,Ft=[].slice,Gr={}.hasOwnProperty,ao=function(rt,Be){function st(){this.constructor=rt}for(var lt in Be)Gr.call(Be,lt)&&(rt[lt]=Be[lt]);return st.prototype=Be.prototype,rt.prototype=new st,rt.__super__=Be.prototype,rt},Sr=[].indexOf||function(rt){for(var Be=0,st=this.length;st>Be;Be++)if(Be in this&&this[Be]===rt)return Be;return-1};for(et={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},Ir=function(){var rt;return null!=(rt=typeof performance<"u"&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?rt:+new Date},Pe=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,rr=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==Pe&&(Pe=function(rt){return setTimeout(rt,50)},rr=function(rt){return clearTimeout(rt)}),$t=function(rt){var Be,st;return Be=Ir(),(st=function(){var lt;return(lt=Ir()-Be)>=33?(Be=Ir(),rt(lt,function(){return Pe(st)})):setTimeout(st,33-lt)})()},oa=function(){var rt,Be,st;return st=arguments[0],Be=arguments[1],rt=3<=arguments.length?Ft.call(arguments,2):[],"function"==typeof st[Be]?st[Be].apply(st,rt):st[Be]},tn=function(){var rt,Be,st,lt,ht,We,An;for(Be=arguments[0],We=0,An=(lt=2<=arguments.length?Ft.call(arguments,1):[]).length;An>We;We++)if(st=lt[We])for(rt in st)Gr.call(st,rt)&&(ht=st[rt],null!=Be[rt]&&"object"==typeof Be[rt]&&null!=ht&&"object"==typeof ht?tn(Be[rt],ht):Be[rt]=ht);return Be},Hn=function(rt){var Be,st,ht,We;for(st=Be=0,ht=0,We=rt.length;We>ht;ht++)st+=Math.abs(rt[ht]),Be++;return st/Be},qo=function(rt,Be){var st,ht;if(null==rt&&(rt="options"),null==Be&&(Be=!0),ht=document.querySelector("[data-pace-"+rt+"]")){if(st=ht.getAttribute("data-pace-"+rt),!Be)return st;try{return JSON.parse(st)}catch(We){return typeof console<"u"&&null!==console?console.error("Error parsing inline pace options",We):void 0}}},an=function(){function rt(){}return rt.prototype.on=function(Be,st,lt,ht){var We;return null==ht&&(ht=!1),null==this.bindings&&(this.bindings={}),null==(We=this.bindings)[Be]&&(We[Be]=[]),this.bindings[Be].push({handler:st,ctx:lt,once:ht})},rt.prototype.once=function(Be,st,lt){return this.on(Be,st,lt,!0)},rt.prototype.off=function(Be,st){var lt,ht,We;if(null!=(null!=(ht=this.bindings)?ht[Be]:void 0)){if(null==st)return delete this.bindings[Be];for(lt=0,We=[];lt<this.bindings[Be].length;)We.push(this.bindings[Be][lt].handler===st?this.bindings[Be].splice(lt,1):lt++);return We}},rt.prototype.trigger=function(){var Be,lt,We,An,Wn,pr,bn;if(lt=arguments[0],Be=2<=arguments.length?Ft.call(arguments,1):[],null!=(Wn=this.bindings)?Wn[lt]:void 0){for(We=0,bn=[];We<this.bindings[lt].length;)An=(pr=this.bindings[lt][We]).once,pr.handler.apply(pr.ctx??this,Be),bn.push(An?this.bindings[lt].splice(We,1):We++);return bn}},rt}(),Sn=window.Pace||{},window.Pace=Sn,tn(Sn,an.prototype),De=Sn.options=tn({},et,window.paceOptions,qo()),Fe=0,Ee=(bt=["ajax","document","eventLag","elements"]).length;Ee>Fe;Fe++)!0===De[Z=bt[Fe]]&&(De[Z]=et[Z]);Cn=function(rt){function Be(){return Be.__super__.constructor.apply(this,arguments)}return ao(Be,rt),Be}(Error),yr=function(){function rt(){this.progress=0}return rt.prototype.getElement=function(){var Be;if(null==this.el){if(!(Be=document.querySelector(De.target)))throw new Cn;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=Be.firstChild?Be.insertBefore(this.el,Be.firstChild):Be.appendChild(this.el)}return this.el},rt.prototype.finish=function(){var Be;return(Be=this.getElement()).className=Be.className.replace("pace-active",""),Be.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},rt.prototype.update=function(Be){return this.progress=Be,this.render()},rt.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(Be){Cn=Be}return this.el=void 0},rt.prototype.render=function(){var Be,lt,ht,We,An,Wn;if(null==document.querySelector(De.target))return!1;for(Be=this.getElement(),ht="translate3d("+this.progress+"%, 0, 0)",We=0,An=(Wn=["webkitTransform","msTransform","transform"]).length;An>We;We++)Be.children[0].style[Wn[We]]=ht;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(Be.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?lt="99":(lt=this.progress<10?"0":"",lt+=0|this.progress),Be.children[0].setAttribute("data-progress",""+lt)),this.lastRenderedProgress=this.progress},rt.prototype.done=function(){return this.progress>=100},rt}(),qn=function(){function rt(){this.bindings={}}return rt.prototype.trigger=function(Be,st){var ht,We,An,Wn;if(null!=this.bindings[Be]){for(Wn=[],ht=0,We=(An=this.bindings[Be]).length;We>ht;ht++)Wn.push(An[ht].call(this,st));return Wn}},rt.prototype.on=function(Be,st){var lt;return null==(lt=this.bindings)[Be]&&(lt[Be]=[]),this.bindings[Be].push(st)},rt}(),vn=window.XMLHttpRequest,Sa=window.XDomainRequest,Xn=window.WebSocket,kr=function(rt,Be){var lt,ht;for(lt in ht=[],Be.prototype)try{ht.push(null==rt[lt]&&"function"!=typeof Be[lt]?"function"==typeof Object.defineProperty?Object.defineProperty(rt,lt,{get:function(){return Be.prototype[lt]},configurable:!0,enumerable:!0}):rt[lt]=Be.prototype[lt]:void 0)}catch(We){}return ht},jt=[],Sn.ignore=function(){var rt,Be,st;return Be=arguments[0],rt=2<=arguments.length?Ft.call(arguments,1):[],jt.unshift("ignore"),st=Be.apply(null,rt),jt.shift(),st},Sn.track=function(){var rt,Be,st;return Be=arguments[0],rt=2<=arguments.length?Ft.call(arguments,1):[],jt.unshift("track"),st=Be.apply(null,rt),jt.shift(),st},Mn=function(rt){var Be;return null==rt&&(rt="GET"),"track"===jt[0]?"force":!(jt.length||!De.ajax||!("socket"===rt&&De.ajax.trackWebSockets||(Be=rt.toUpperCase(),Sr.call(De.ajax.trackMethods,Be)>=0)))},Tn=function(rt){function Be(){var st,lt=this;Be.__super__.constructor.apply(this,arguments),st=function(ht){var We;return We=ht.open,ht.open=function(An,Wn,pr){return Mn(An)&&lt.trigger("request",{type:An,url:Wn,request:ht}),We.apply(ht,arguments)}},window.XMLHttpRequest=function(ht){var We;return We=new vn(ht),st(We),We};try{kr(window.XMLHttpRequest,vn)}catch{}if(null!=Sa){window.XDomainRequest=function(){var ht;return ht=new Sa,st(ht),ht};try{kr(window.XDomainRequest,Sa)}catch{}}if(null!=Xn&&De.ajax.trackWebSockets){window.WebSocket=function(ht,We){var An;return An=null!=We?new Xn(ht,We):new Xn(ht),Mn("socket")&&lt.trigger("request",{type:"socket",url:ht,protocols:We,request:An}),An};try{kr(window.WebSocket,Xn)}catch{}}}return ao(Be,rt),Be}(qn),_t=null,ur=function(rt){var Be,st,lt,ht;for(st=0,lt=(ht=De.ajax.ignoreURLs).length;lt>st;st++)if("string"==typeof(Be=ht[st])){if(-1!==rt.indexOf(Be))return!0}else if(Be.test(rt))return!0;return!1},(Qt=function(){return null==_t&&(_t=new Tn),_t})().on("request",function(rt){var Be,st,lt,ht;return ht=rt.type,lt=rt.request,ur(rt.url)||Sn.running||!1===De.restartOnRequestAfter&&"force"!==Mn(ht)?void 0:(st=arguments,"boolean"==typeof(Be=De.restartOnRequestAfter||0)&&(Be=0),setTimeout(function(){var Wn,pr,bn,Br,br;if("socket"===ht?lt.readyState<2:0<(bn=lt.readyState)&&4>bn){for(Sn.restart(),br=[],Wn=0,pr=(Br=Sn.sources).length;pr>Wn;Wn++){if((Z=Br[Wn])instanceof qt){Z.watch.apply(Z,st);break}br.push(void 0)}return br}},Be))}),qt=function(){function rt(){var Be=this;this.elements=[],Qt().on("request",function(){return Be.watch.apply(Be,arguments)})}return rt.prototype.watch=function(Be){var st,lt,ht;return ht=Be.type,st=Be.request,ur(Be.url)?void 0:(lt="socket"===ht?new Ot(st):new Jn(st),this.elements.push(lt))},rt}(),Jn=function rt(Be){var ht,We,An,Wn,pr=this;if(this.progress=0,null!=window.ProgressEvent)for(Be.addEventListener("progress",function(bn){return pr.progress=bn.lengthComputable?100*bn.loaded/bn.total:pr.progress+(100-pr.progress)/2},!1),ht=0,We=(Wn=["load","abort","timeout","error"]).length;We>ht;ht++)Be.addEventListener(Wn[ht],function(){return pr.progress=100},!1);else An=Be.onreadystatechange,Be.onreadystatechange=function(){var bn;return 0===(bn=Be.readyState)||4===bn?pr.progress=100:3===Be.readyState&&(pr.progress=50),"function"==typeof An?An.apply(null,arguments):void 0}},Ot=function rt(Be){var lt,ht,We,An=this;for(this.progress=0,lt=0,ht=(We=["error","open"]).length;ht>lt;lt++)Be.addEventListener(We[lt],function(){return An.progress=100},!1)},oi=function rt(Be){var lt,ht,We;for(null==Be&&(Be={}),this.elements=[],null==Be.selectors&&(Be.selectors=[]),lt=0,ht=(We=Be.selectors).length;ht>lt;lt++)this.elements.push(new gn(We[lt]))},gn=function(){function rt(Be){this.selector=Be,this.progress=0,this.check()}return rt.prototype.check=function(){var Be=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return Be.check()},De.elements.checkInterval)},rt.prototype.done=function(){return this.progress=100},rt}(),Ce=function(){function rt(){var Be,st,lt=this;this.progress=null!=(st=this.states[document.readyState])?st:100,Be=document.onreadystatechange,document.onreadystatechange=function(){return null!=lt.states[document.readyState]&&(lt.progress=lt.states[document.readyState]),"function"==typeof Be?Be.apply(null,arguments):void 0}}return rt.prototype.states={loading:0,interactive:50,complete:100},rt}(),Bi=function rt(){var Be,st,lt,ht,We,An=this;this.progress=0,Be=0,We=[],ht=0,lt=Ir(),st=setInterval(function(){var Wn;return Wn=Ir()-lt-50,lt=Ir(),We.push(Wn),We.length>De.eventLag.sampleCount&&We.shift(),Be=Hn(We),++ht>=De.eventLag.minSamples&&Be<De.eventLag.lagThreshold?(An.progress=100,clearInterval(st)):An.progress=3/(Be+3)*100},50)},wt=function(){function rt(Be){this.source=Be,this.last=this.sinceLastUpdate=0,this.rate=De.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=oa(this.source,"progress"))}return rt.prototype.tick=function(Be,st){var lt;return null==st&&(st=oa(this.source,"progress")),st>=100&&(this.done=!0),st===this.last?this.sinceLastUpdate+=Be:(this.sinceLastUpdate&&(this.rate=(st-this.last)/this.sinceLastUpdate),this.catchup=(st-this.progress)/De.catchupTime,this.sinceLastUpdate=0,this.last=st),st>this.progress&&(this.progress+=this.catchup*Be),lt=1-Math.pow(this.progress/100,De.easeFactor),this.progress+=lt*this.rate*Be,this.progress=Math.min(this.lastProgress+De.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},rt}(),j=null,Kr=null,Ar=null,Jr=null,yn=null,ct=null,Sn.running=!1,Lr=function(){return De.restartOnPushState?Sn.restart():void 0},null!=window.history.pushState&&(Se=window.history.pushState,window.history.pushState=function(){return Lr(),Se.apply(window.history,arguments)}),null!=window.history.replaceState&&(dt=window.history.replaceState,window.history.replaceState=function(){return Lr(),dt.apply(window.history,arguments)}),Fn={ajax:qt,elements:oi,document:Ce,eventLag:Bi},(Ve=function(){var rt,Be,st,lt,ht,We,An,Wn;for(Sn.sources=j=[],Be=0,lt=(We=["ajax","elements","document","eventLag"]).length;lt>Be;Be++)!1!==De[rt=We[Be]]&&j.push(new Fn[rt](De[rt]));for(st=0,ht=(Wn=null!=(An=De.extraSources)?An:[]).length;ht>st;st++)j.push(new(Z=Wn[st])(De));return Sn.bar=Ar=new yr,Kr=[],Jr=new wt})(),Sn.stop=function(){return Sn.trigger("stop"),Sn.running=!1,Ar.destroy(),ct=!0,null!=yn&&("function"==typeof rr&&rr(yn),yn=null),Ve()},Sn.restart=function(){return Sn.trigger("restart"),Sn.stop(),Sn.start()},Sn.go=function(){var rt;return Sn.running=!0,Ar.render(),rt=Ir(),ct=!1,yn=$t(function(Be,st){var ht,We,Wn,pr,bn,br,Zo,bi,so,Il,sr,Et,Vo;for(ht=bi=0,We=!0,pr=so=0,sr=j.length;sr>so;pr=++so)for(Z=j[pr],Zo=null!=Kr[pr]?Kr[pr]:Kr[pr]=[],bn=Il=0,Et=(Wn=null!=(Vo=Z.elements)?Vo:[Z]).length;Et>Il;bn=++Il)We&=(br=null!=Zo[bn]?Zo[bn]:Zo[bn]=new wt(Wn[bn])).done,br.done||(ht++,bi+=br.tick(Be));return Ar.update(Jr.tick(Be,bi/ht)),Ar.done()||We||ct?(Ar.update(100),Sn.trigger("done"),setTimeout(function(){return Ar.finish(),Sn.running=!1,Sn.trigger("hide")},Math.max(De.ghostTime,Math.max(De.minTime-(Ir()-rt),0)))):st()})},Sn.start=function(rt){tn(De,rt),Sn.running=!0;try{Ar.render()}catch(Be){Cn=Be}return document.querySelector(".pace")?(Sn.trigger("start"),Sn.go()):setTimeout(Sn.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return Sn}):"object"==typeof exports?module.exports=Sn:De.startOnPageLoad&&Sn.start()}).call(this),function(){"use strict";var qt=function(s){if(null===s)return"null";if(void 0===s)return"undefined";var u=typeof s;return"object"===u&&(Array.prototype.isPrototypeOf(s)||s.constructor&&"Array"===s.constructor.name)?"array":"object"===u&&(String.prototype.isPrototypeOf(s)||s.constructor&&"String"===s.constructor.name)?"string":u},yr=function(s){return{eq:s}},Ce=yr(function(s,u){return s===u}),oi=function(s){return yr(function(u,d){if(u.length!==d.length)return!1;for(var f=u.length,m=0;m<f;m++)if(!s.eq(u[m],d[m]))return!1;return!0})},gn=function(s){return yr(function(u,d){var T,D,E,f=Object.keys(u),m=Object.keys(d);if(!(T=Ce,D=oi(T),E=function(D){return Array.prototype.slice.call(D).sort(void 0)},yr(function(P,F){return D.eq(E(P),E(F))})).eq(f,m))return!1;for(var v=f.length,x=0;x<v;x++){var C=f[x];if(!s.eq(u[C],d[C]))return!1}return!0})},Bi=yr(function(s,u){if(s===u)return!0;var d=qt(s);return d===qt(u)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(d)?s===u:"array"===d?oi(Bi).eq(s,u):"object"===d&&gn(Bi).eq(s,u))});const an=Object.getPrototypeOf,qn=(s,u,d)=>{var f;return!!d(s,u.prototype)||(null===(f=s.constructor)||void 0===f?void 0:f.name)===u.name},Cn=s=>u=>(d=>{const f=typeof d;return null===d?"null":"object"===f&&Array.isArray(d)?"array":"object"===f&&qn(d,String,(m,v)=>v.isPrototypeOf(m))?"string":f})(u)===s,Sn=s=>u=>typeof u===s,Tn=s=>u=>s===u,Fn=(s,u)=>Ot(s)&&qn(s,u,(d,f)=>an(d)===f),wt=Cn("string"),Ot=Cn("object"),Jn=s=>Fn(s,Object),yn=Cn("array"),Hn=Tn(null),Ar=Sn("boolean"),ct=Tn(void 0),rr=s=>null==s,et=s=>!rr(s),tn=Sn("function"),kr=Sn("number"),qo=(s,u)=>{if(yn(s)){for(let d=0,f=s.length;d<f;++d)if(!u(s[d]))return!1;return!0}return!1},Qt=()=>{},Lr=(s,u)=>(...d)=>s(u.apply(null,d)),jt=(s,u)=>d=>s(u(d)),Ve=s=>()=>s,Ir=s=>s,De=(s,u)=>s===u;function Pe(s,...u){return(...d)=>{const f=u.concat(d);return s.apply(null,f)}}const oa=s=>u=>!s(u),$t=s=>()=>{throw new Error(s)},Kr=s=>s(),ur=s=>{s()},Mn=Ve(!1),Z=Ve(!0);class j{constructor(u,d){this.tag=u,this.value=d}static some(u){return new j(!0,u)}static none(){return j.singletonNone}fold(u,d){return this.tag?d(this.value):u()}isSome(){return this.tag}isNone(){return!this.tag}map(u){return this.tag?j.some(u(this.value)):j.none()}bind(u){return this.tag?u(this.value):j.none()}exists(u){return this.tag&&u(this.value)}forall(u){return!this.tag||u(this.value)}filter(u){return!this.tag||u(this.value)?this:j.none()}getOr(u){return this.tag?this.value:u}or(u){return this.tag?this:u}getOrThunk(u){return this.tag?this.value:u()}orThunk(u){return this.tag?this:u()}getOrDie(u){if(this.tag)return this.value;throw new Error(u??"Called getOrDie on None")}static from(u){return et(u)?j.some(u):j.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(u){this.tag&&u(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}j.singletonNone=new j(!1);const Jr=Array.prototype.slice,Xn=Array.prototype.indexOf,Sa=Array.prototype.push,vn=(s,u)=>Xn.call(s,u),Fe=(s,u)=>vn(s,u)>-1,_t=(s,u)=>{for(let d=0,f=s.length;d<f;d++)if(u(s[d],d))return!0;return!1},Ee=(s,u)=>{const d=s.length,f=new Array(d);for(let m=0;m<d;m++)f[m]=u(s[m],m);return f},Se=(s,u)=>{for(let d=0,f=s.length;d<f;d++)u(s[d],d)},bt=(s,u)=>{for(let d=s.length-1;d>=0;d--)u(s[d],d)},no=(s,u)=>{const d=[],f=[];for(let m=0,v=s.length;m<v;m++){const x=s[m];(u(x,m)?d:f).push(x)}return{pass:d,fail:f}},dt=(s,u)=>{const d=[];for(let f=0,m=s.length;f<m;f++){const v=s[f];u(v,f)&&d.push(v)}return d},Ft=(s,u,d)=>(bt(s,(f,m)=>{d=u(d,f,m)}),d),Gr=(s,u,d)=>(Se(s,(f,m)=>{d=u(d,f,m)}),d),ao=(s,u,d)=>{for(let f=0,m=s.length;f<m;f++){const v=s[f];if(u(v,f))return j.some(v);if(d(v,f))break}return j.none()},Sr=(s,u)=>ao(s,u,Mn),rt=(s,u)=>{for(let d=0,f=s.length;d<f;d++)if(u(s[d],d))return j.some(d);return j.none()},Be=s=>{const u=[];for(let d=0,f=s.length;d<f;++d){if(!yn(s[d]))throw new Error("Arr.flatten item "+d+" was not an array, input: "+s);Sa.apply(u,s[d])}return u},st=(s,u)=>Be(Ee(s,u)),lt=(s,u)=>{for(let d=0,f=s.length;d<f;++d)if(!0!==u(s[d],d))return!1;return!0},ht=s=>{const u=Jr.call(s,0);return u.reverse(),u},We=(s,u)=>dt(s,d=>!Fe(u,d)),An=(s,u)=>{const d={};for(let f=0,m=s.length;f<m;f++){const v=s[f];d[String(v)]=u(v,f)}return d},Wn=(s,u)=>{const d=Jr.call(s,0);return d.sort(u),d},pr=(s,u)=>u>=0&&u<s.length?j.some(s[u]):j.none(),bn=s=>pr(s,0),Br=s=>pr(s,s.length-1),br=tn(Array.from)?Array.from:s=>Jr.call(s),Zo=(s,u)=>{for(let d=0;d<s.length;d++){const f=u(s[d],d);if(f.isSome())return f}return j.none()},bi=(s,u)=>{const d=[],f=tn(u)?m=>_t(d,v=>u(v,m)):m=>Fe(d,m);for(let m=0,v=s.length;m<v;m++){const x=s[m];f(x)||d.push(x)}return d},so=Object.keys,Il=Object.hasOwnProperty,sr=(s,u)=>{const d=so(s);for(let f=0,m=d.length;f<m;f++){const v=d[f];u(s[v],v)}},Et=(s,u)=>Vo(s,(d,f)=>({k:f,v:u(d,f)})),Vo=(s,u)=>{const d={};return sr(s,(f,m)=>{const v=u(f,m);d[v.k]=v.v}),d},Ca=s=>(u,d)=>{s[d]=u},Iu=(s,u,d,f)=>{sr(s,(m,v)=>{(u(m,v)?d:f)(m,v)})},Lt=(s,u)=>{const d={};return Iu(s,u,Ca(d),Qt),d},zr=(s,u)=>{const d=[];return sr(s,(f,m)=>{d.push(u(f,m))}),d},Ts=s=>zr(s,Ir),cr=(s,u)=>Zt(s,u)?j.from(s[u]):j.none(),Zt=(s,u)=>Il.call(s,u),lo=(s,u)=>Zt(s,u)&&null!=s[u],zi=s=>{const u={};return Se(s,d=>{u[d]={}}),so(u)},Dl=s=>void 0!==s.length,As=Array.isArray,ks=(s,u,d)=>{if(!s)return!1;if(d=d||s,Dl(s)){for(let f=0,m=s.length;f<m;f++)if(!1===u.call(d,s[f],f,s))return!1}else for(const f in s)if(Zt(s,f)&&!1===u.call(d,s[f],f,s))return!1;return!0},Vi=(s,u)=>{const d=[];return ks(s,(f,m)=>{d.push(u(f,m,s))}),d},Fi=(s,u)=>{const d=[];return ks(s,(f,m)=>{u&&!u(f,m,s)||d.push(f)}),d},rl=(s,u,d,f)=>{let m=ct(d)?s[0]:d;for(let v=0;v<s.length;v++)m=u.call(f,m,s[v],v);return m},Nl=(s,u,d)=>{for(let f=0,m=s.length;f<m;f++)if(u.call(d,s[f],f,s))return f;return-1},ia=s=>s[s.length-1],$o=s=>{let u,d=!1;return(...f)=>(d||(d=!0,u=s.apply(null,f)),u)},ke=()=>Re(0,0),Re=(s,u)=>({major:s,minor:u}),Ae={nu:Re,detect:(s,u)=>{const d=String(u).toLowerCase();return 0===s.length?ke():((f,m)=>{const v=((C,T)=>{for(let k=0;k<C.length;k++){const D=C[k];if(D.test(T))return D}})(f,m);if(!v)return{major:0,minor:0};const x=C=>Number(m.replace(v,"$"+C));return Re(x(1),x(2))})(s,d)},unknown:ke},qe=(s,u)=>{const d=String(u).toLowerCase();return Sr(s,f=>f.search(d))},It=(s,u,d)=>""===u||s.length>=u.length&&s.substr(d,d+u.length)===u,ft=(s,u)=>xt(s,u)?s.substring(u.length):s,Ye=(s,u,d=0,f)=>{const m=s.indexOf(u,d);return-1!==m&&(!!ct(f)||m+u.length<=f)},xt=(s,u)=>It(s,u,0),rn=(s,u)=>It(s,u,s.length-u.length),Ln=s=>u=>u.replace(s,""),kn=Ln(/^\s+|\s+$/g),or=Ln(/^\s+/g),xn=Ln(/\s+$/g),Vr=s=>s.length>0,Qr=s=>!Vr(s),Yr=(s,u=10)=>{const d=parseInt(s,u);return isNaN(d)?j.none():j.some(d)},Ma=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ii=s=>u=>Ye(u,s),Is=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:s=>Ye(s,"edge/")&&Ye(s,"chrome")&&Ye(s,"safari")&&Ye(s,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ma],search:s=>Ye(s,"chrome")&&!Ye(s,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:s=>Ye(s,"msie")||Ye(s,"trident")},{name:"Opera",versionRegexes:[Ma,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ii("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ii("firefox")},{name:"Safari",versionRegexes:[Ma,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:s=>(Ye(s,"safari")||Ye(s,"mobile/"))&&Ye(s,"applewebkit")}],ol=[{name:"Windows",search:ii("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:s=>Ye(s,"iphone")||Ye(s,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ii("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ii("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ii("linux"),versionRegexes:[]},{name:"Solaris",search:ii("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ii("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ii("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Du={browsers:Ve(Is),oses:Ve(ol)},Co="Chromium",Tp="Firefox",Ap=s=>{const u=s.current,f=m=>()=>u===m;return{current:u,version:s.version,isEdge:f("Edge"),isChromium:f(Co),isIE:f("IE"),isOpera:f("Opera"),isFirefox:f(Tp),isSafari:f("Safari")}},Bg=()=>Ap({current:void 0,version:Ae.unknown()}),kp=Ap,Xr=(Ve("Edge"),Ve(Co),Ve("IE"),Ve("Opera"),Ve(Tp),Ve("Safari"),"Windows"),jd="Android",Ip="Solaris",Xd="FreeBSD",il="ChromeOS",Sv=s=>{const u=s.current,f=m=>()=>u===m;return{current:u,version:s.version,isWindows:f(Xr),isiOS:f("iOS"),isAndroid:f(jd),isMacOS:f("macOS"),isLinux:f("Linux"),isSolaris:f(Ip),isFreeBSD:f(Xd),isChromeOS:f(il)}},qd=()=>Sv({current:void 0,version:Ae.unknown()}),Ds=Sv,Ta=(Ve(Xr),Ve("iOS"),Ve(jd),Ve("Linux"),Ve("macOS"),Ve(Ip),Ve(Xd),Ve(il),s=>window.matchMedia(s).matches);let es=$o(()=>((s,u,d)=>{const f=Du.browsers(),m=Du.oses(),v=u.bind(T=>{return k=f,Zo(T.brands,E=>{const P=E.brand.toLowerCase();return Sr(k,F=>{var z;return P===(null===(z=F.brand)||void 0===z?void 0:z.toLowerCase())}).map(F=>({current:F.name,version:Ae.nu(parseInt(E.version,10),0)}))});var k}).orThunk(()=>{return qe(f,k=s).map(D=>{const E=Ae.detect(D.versionRegexes,k);return{current:D.name,version:E}});var k}).fold(Bg,kp),x=(T=m,k=s,qe(T,k).map(D=>{const E=Ae.detect(D.versionRegexes,k);return{current:D.name,version:E}})).fold(qd,Ds),C=((T,k,D,E)=>{const P=T.isiOS()&&!0===/ipad/i.test(D),F=T.isiOS()&&!P,z=T.isiOS()||T.isAndroid(),H=z||E("(pointer:coarse)"),V=P||!F&&z&&E("(min-device-width:768px)"),U=F||z&&!V,$=k.isSafari()&&T.isiOS()&&!1===/safari/i.test(D),K=!U&&!V&&!$;return{isiPad:Ve(P),isiPhone:Ve(F),isTablet:Ve(V),isPhone:Ve(U),isTouch:Ve(H),isAndroid:T.isAndroid,isiOS:T.isiOS,isWebView:Ve($),isDesktop:Ve(K)}})(x,v,s,d);var T,k;return{browser:v,os:x,deviceType:C}})(navigator.userAgent,j.from(navigator.userAgentData),Ta));const Eo=()=>es(),Dp=navigator.userAgent,Ns=Eo(),Aa=Ns.browser,ts=Ns.os,pn=Ns.deviceType,Zd=-1!==Dp.indexOf("Windows Phone"),On={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Aa.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Aa.isIE(),windowsPhone:Zd,browser:{current:Aa.current,version:Aa.version,isChromium:Aa.isChromium,isEdge:Aa.isEdge,isFirefox:Aa.isFirefox,isIE:Aa.isIE,isOpera:Aa.isOpera,isSafari:Aa.isSafari},os:{current:ts.current,version:ts.version,isAndroid:ts.isAndroid,isChromeOS:ts.isChromeOS,isFreeBSD:ts.isFreeBSD,isiOS:ts.isiOS,isLinux:ts.isLinux,isMacOS:ts.isMacOS,isSolaris:ts.isSolaris,isWindows:ts.isWindows},deviceType:{isDesktop:pn.isDesktop,isiPad:pn.isiPad,isiPhone:pn.isiPhone,isPhone:pn.isPhone,isTablet:pn.isTablet,isTouch:pn.isTouch,isWebView:pn.isWebView}},Nu=/^\s*|\s*$/g,El=s=>rr(s)?"":(""+s).replace(Nu,""),Ll=function(s,u,d,f){f=f||this,s&&(d&&(s=s[d]),ks(s,(m,v)=>!1!==u.call(f,m,v,d)&&(Ll(m,u,d,f),!0)))},Ke={trim:El,isArray:As,is:(s,u)=>u?!("array"!==u||!As(s))||typeof s===u:void 0!==s,toArray:s=>{if(As(s))return s;{const u=[];for(let d=0,f=s.length;d<f;d++)u[d]=s[d];return u}},makeMap:(s,u,d={})=>{const f=wt(s)?s.split(u||","):s||[];let m=f.length;for(;m--;)d[f[m]]={};return d},each:ks,map:Vi,grep:Fi,inArray:(s,u)=>{if(s)for(let d=0,f=s.length;d<f;d++)if(s[d]===u)return d;return-1},hasOwn:Zt,extend:(s,...u)=>{for(let d=0;d<u.length;d++){const f=u[d];for(const m in f)if(Zt(f,m)){const v=f[m];void 0!==v&&(s[m]=v)}}return s},walk:Ll,resolve:(s,u=window)=>{const d=s.split(".");for(let f=0,m=d.length;f<m&&(u=u[d[f]]);f++);return u},explode:(s,u)=>yn(s)?s:""===s?[]:Vi(s.split(u||","),El),_addCacheSuffix:s=>{const u=On.cacheSuffix;return u&&(s+=(-1===s.indexOf("?")?"?":"&")+u),s}},ns=(s,u,d=De)=>s.exists(f=>d(f,u)),Es=(s,u,d=De)=>Kt(s,u,d).getOr(s.isNone()&&u.isNone()),Kt=(s,u,d)=>s.isSome()&&u.isSome()?j.some(d(s.getOrDie(),u.getOrDie())):j.none(),Rl=(s,u)=>s?j.some(u):j.none(),Cv=typeof window<"u"?window:Function("return this;")(),Mv=(s,u)=>((d,f)=>{let m=f??Cv;for(let v=0;v<d.length&&null!=m;++v)m=m[d[v]];return m})(s.split("."),u),$d=Object.getPrototypeOf,Pn=s=>s.dom.nodeName.toLowerCase(),zg=s=>s.dom.nodeType,Np=s=>u=>zg(u)===s,Eu=s=>Ko(s)&&(s=>{const u=Mv("ownerDocument.defaultView",s);return Ot(s)&&((d=u,((f,m)=>{const v=Mv(f,m);if(null==v)throw new Error(f+" not available on this browser");return v})("HTMLElement",d)).prototype.isPrototypeOf(s)||/^HTML\w*Element$/.test($d(s).constructor.name));var d})(s.dom),Ko=Np(1),ai=Np(3),Ep=Np(9),Kd=Np(11),Lu=s=>u=>Ko(u)&&Pn(u)===s,Vg=(s,u,d)=>{if(!(wt(d)||Ar(d)||kr(d)))throw console.error("Invalid call to Attribute.set. Key ",u,":: Value ",d,":: Element ",s),new Error("Attribute value was not simple");s.setAttribute(u,d+"")},uo=(s,u,d)=>{Vg(s.dom,u,d)},ka=(s,u)=>{const d=s.dom;sr(u,(f,m)=>{Vg(d,m,f)})},si=(s,u)=>{const d=s.dom.getAttribute(u);return null===d?void 0:d},Ia=(s,u)=>j.from(si(s,u)),Jd=(s,u)=>{const d=s.dom;return!(!d||!d.hasAttribute)&&d.hasAttribute(u)},go=(s,u)=>{s.dom.removeAttribute(u)},Ru=s=>Gr(s.dom.attributes,(u,d)=>(u[d.name]=d.value,u),{}),Ol=(s,u)=>{const d=si(s,u);return void 0===d||""===d?[]:d.split(" ")},Gi=s=>void 0!==s.dom.classList,Fg=s=>Ol(s,"class"),Gg=(s,u)=>((d,f,m)=>{const v=Ol(d,f).concat([m]);return uo(d,f,v.join(" ")),!0})(s,"class",u),Lp=(s,u)=>((d,f,m)=>{const v=dt(Ol(d,f),x=>x!==m);return v.length>0?uo(d,f,v.join(" ")):go(d,f),!1})(s,"class",u),Ls=(s,u)=>{Gi(s)?s.dom.classList.add(u):Gg(s,u)},Da=s=>{0===(Gi(s)?s.dom.classList:Fg(s)).length&&go(s,"class")},Fo=(s,u)=>{Gi(s)?s.dom.classList.remove(u):Lp(s,u),Da(s)},Pl=(s,u)=>Gi(s)&&s.dom.classList.contains(u),Hi=s=>{if(null==s)throw new Error("Node cannot be null or undefined");return{dom:s}},Ou=(s,u)=>{const d=(u||document).createElement("div");if(d.innerHTML=s,!d.hasChildNodes()||d.childNodes.length>1){const f="HTML does not have a single root node";throw console.error(f,s),new Error(f)}return Hi(d.childNodes[0])},er=(s,u)=>{const d=(u||document).createElement(s);return Hi(d)},aa=(s,u)=>{const d=(u||document).createTextNode(s);return Hi(d)},ge=Hi,sa=(s,u)=>{const d=[],f=v=>(d.push(v),u(v));let m=u(s);do{m=m.bind(f)}while(m.isSome());return d},xi=(s,u)=>{const d=s.dom;if(1!==d.nodeType)return!1;{const f=d;if(void 0!==f.matches)return f.matches(u);if(void 0!==f.msMatchesSelector)return f.msMatchesSelector(u);if(void 0!==f.webkitMatchesSelector)return f.webkitMatchesSelector(u);if(void 0!==f.mozMatchesSelector)return f.mozMatchesSelector(u);throw new Error("Browser lacks native selectors")}},Hg=s=>1!==s.nodeType&&9!==s.nodeType&&11!==s.nodeType||0===s.childElementCount,_n=(s,u)=>s.dom===u.dom,Go=(s,u)=>{const d=s.dom,f=u.dom;return d!==f&&d.contains(f)},Rp=s=>ge(s.dom.ownerDocument),_i=s=>Ep(s)?s:Rp(s),Bl=s=>ge(_i(s).dom.defaultView),rs=s=>j.from(s.dom.parentNode).map(ge),Op=s=>j.from(s.dom.parentElement).map(ge),Pp=(s,u)=>{const d=tn(u)?u:Mn;let f=s.dom;const m=[];for(;null!=f.parentNode;){const v=f.parentNode,x=ge(v);if(m.push(x),!0===d(x))break;f=v}return m},zl=s=>j.from(s.dom.previousSibling).map(ge),Oc=s=>j.from(s.dom.nextSibling).map(ge),Bp=s=>ht(sa(s,zl)),Vl=s=>sa(s,Oc),Lo=s=>Ee(s.dom.childNodes,ge),li=(s,u)=>j.from(s.dom.childNodes[u]).map(ge),Pu=s=>li(s,0),Fl=s=>li(s,s.dom.childNodes.length-1),os=s=>s.dom.childNodes.length,Pc=s=>Kd(s)&&et(s.dom.host),Rs=tn(Element.prototype.attachShadow)&&tn(Node.prototype.getRootNode),Wi=Ve(Rs),Os=Rs?s=>ge(s.dom.getRootNode()):_i,zp=s=>Pc(s)?s:(u=>{const d=u.dom.head;if(null==d)throw new Error("Head is not available yet");return ge(d)})(_i(s)),Qd=s=>ge(s.dom.host),Bu=s=>{if(Wi()&&et(s.target)){const u=ge(s.target);if(Ko(u)&&wi(u)&&s.composed&&s.composedPath){const d=s.composedPath();if(d)return bn(d)}}return j.from(s.target)},wi=s=>et(s.dom.shadowRoot),Gl=s=>{const u=ai(s)?s.dom.parentNode:s.dom;if(null==u||null===u.ownerDocument)return!1;const d=u.ownerDocument;return(f=>{const m=Os(f);return Pc(m)?j.some(m):j.none()})(ge(u)).fold(()=>d.body.contains(u),jt(Gl,Qd))};var Bc=(s,u,d,f,m)=>s(d,f)?j.some(d):tn(m)&&m(d)?j.none():u(d,f,m);const la=(s,u,d)=>{let f=s.dom;const m=tn(d)?d:Mn;for(;f.parentNode;){f=f.parentNode;const v=ge(f);if(u(v))return j.some(v);if(m(v))break}return j.none()},zu=(s,u,d)=>Bc((f,m)=>m(f),la,s,u,d),Vp=(s,u)=>{const d=f=>{for(let m=0;m<f.childNodes.length;m++){const v=ge(f.childNodes[m]);if(u(v))return j.some(v);const x=d(f.childNodes[m]);if(x.isSome())return x}return j.none()};return d(s.dom)},zc=(s,u,d)=>la(s,f=>xi(f,u),d),al=(s,u)=>((d,f)=>{const m=void 0===f?document:f.dom;return Hg(m)?j.none():j.from(m.querySelector(d)).map(ge)})(u,s),is=(s,u,d)=>Bc((f,m)=>xi(f,m),zc,s,u,d),Jo=(s,u=!1)=>{return Gl(s)?s.dom.isContentEditable:(d=s,is(d,"[contenteditable]")).fold(Ve(u),f=>"true"===eh(f));var d},eh=s=>s.dom.contentEditable,Vc=s=>void 0!==s.style&&tn(s.style.getPropertyValue),th=(s,u,d)=>{if(!wt(d))throw console.error("Invalid call to CSS.set. Property ",u,":: Value ",d,":: Element ",s),new Error("CSS value must be a string: "+d);Vc(s)&&s.style.setProperty(u,d)},Tv=(s,u,d)=>{th(s.dom,u,d)},Vu=(s,u)=>{const d=s.dom;sr(u,(f,m)=>{th(d,m,f)})},Si=(s,u)=>{const d=s.dom,f=window.getComputedStyle(d).getPropertyValue(u);return""!==f||Gl(s)?f:Av(d,u)},Av=(s,u)=>Vc(s)?s.style.getPropertyValue(u):"",as=(s,u)=>{const f=Av(s.dom,u);return j.from(f).filter(m=>m.length>0)},Fu=s=>{const u={},d=s.dom;if(Vc(d))for(let f=0;f<d.style.length;f++){const m=d.style.item(f);u[m]=d.style[m]}return u},Gu=(s,u)=>{var d,f;f=u,Vc(d=s.dom)&&d.style.removeProperty(f),ns(Ia(s,"style").map(kn),"")&&go(s,"style")},Ho=(s,u)=>{rs(s).each(d=>{d.dom.insertBefore(u.dom,s.dom)})},ss=(s,u)=>{Oc(s).fold(()=>{rs(s).each(d=>{q(d,u)})},d=>{Ho(d,u)})},Hl=(s,u)=>{Pu(s).fold(()=>{q(s,u)},d=>{s.dom.insertBefore(u.dom,d.dom)})},q=(s,u)=>{s.dom.appendChild(u.dom)},Q=(s,u)=>{Ho(s,u),q(u,s)},ee=(s,u)=>{Se(u,d=>{q(s,d)})},ae=s=>{s.dom.textContent="",Se(Lo(s),u=>{be(u)})},be=s=>{const u=s.dom;null!==u.parentNode&&u.parentNode.removeChild(u)},Te=s=>{const u=Lo(s);var d,f;u.length>0&&(d=s,Se(f=u,(m,v)=>{ss(0===v?d:f[v-1],m)})),be(s)},Ue=s=>Ee(s,ge),it=s=>s.dom.innerHTML,$e=(s,u)=>{const d=Rp(s).dom,f=ge(d.createDocumentFragment()),m=((v,x)=>{const C=(x||document).createElement("div");return C.innerHTML=v,Lo(ge(C))})(u,d);ee(f,m),ae(s),q(s,f)},Nt=(s,u,d,f)=>{s.dom.removeEventListener(u,d,f)},Rt=(s,u)=>({left:s,top:u,translate:(d,f)=>Rt(s+d,u+f)}),Zn=Rt,nn=(s,u)=>void 0!==s?s:void 0!==u?u:0,fn=s=>{const u=s.dom,d=u.ownerDocument.body;return d===u?Zn(d.offsetLeft,d.offsetTop):Gl(s)?(f=>{const m=f.getBoundingClientRect();return Zn(m.left,m.top)})(u):Zn(0,0)},Bn=s=>{const u=void 0!==s?s.dom:document;return Zn(u.body.scrollLeft||u.documentElement.scrollLeft,u.body.scrollTop||u.documentElement.scrollTop)},Gt=(s,u,d)=>{const f=(void 0!==d?d.dom:document).defaultView;f&&f.scrollTo(s,u)},un=(s,u)=>{Eo().browser.isSafari()&&tn(s.dom.scrollIntoViewIfNeeded)?s.dom.scrollIntoViewIfNeeded(!1):s.dom.scrollIntoView(u)},Nn=(s,u,d,f)=>({x:s,y:u,width:d,height:f,right:s+d,bottom:u+f}),Un=s=>{const u=void 0===s?window:s,f=Bn(ge(u.document));return(m=>{const v=void 0===m?window:m;return Eo().browser.isFirefox()?j.none():j.from(v.visualViewport)})(u).fold(()=>{const m=u.document.documentElement;return Nn(f.left,f.top,m.clientWidth,m.clientHeight)},m=>Nn(Math.max(m.pageLeft,f.left),Math.max(m.pageTop,f.top),m.width,m.height))},jn=(s,u)=>{let d=[];return Se(Lo(s),f=>{u(f)&&(d=d.concat([f])),d=d.concat(jn(f,u))}),d},zn=(s,u)=>((d,f)=>{const m=void 0===f?document:f.dom;return Hg(m)?[]:Ee(m.querySelectorAll(d),ge)})(u,s),eo=(s,u,d)=>la(s,u,d).isSome(),Ui=(s,u)=>Vp(s,u).isSome();class fr{constructor(u,d){this.node=u,this.rootNode=d,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(u){return this.node=this.findSibling(this.node,"firstChild","nextSibling",u),this.node}prev(u){return this.node=this.findSibling(this.node,"lastChild","previousSibling",u),this.node}prev2(u){return this.node=this.findPreviousNode(this.node,u),this.node}findSibling(u,d,f,m){if(u){if(!m&&u[d])return u[d];if(u!==this.rootNode){let v=u[f];if(v)return v;for(let x=u.parentNode;x&&x!==this.rootNode;x=x.parentNode)if(v=x[f],v)return v}}}findPreviousNode(u,d){if(u){const f=u.previousSibling;if(this.rootNode&&f===this.rootNode)return;if(f){if(!d)for(let v=f.lastChild;v;v=v.lastChild)if(!v.lastChild)return v;return f}const m=u.parentNode;if(m&&m!==this.rootNode)return m}}}const Ro="\xa0",t_=s=>"\ufeff"===s,rA=/^[ \t\r\n]*$/,Fc=s=>rA.test(s),kv=s=>"\n"===s||"\r"===s,n_=(s,u=4,d=!0,f=!0)=>{const m=(T=u)<=0?"":new Array(T+1).join(" "),v=s.replace(/\t/g,m);var T;return Gr(v,(C,T)=>{return-1!==" \f\t\v".indexOf(T)||T===Ro?C.pcIsSpace||""===C.str&&d||C.str.length===v.length-1&&f||(D=C.str.length+1)<(k=v).length&&D>=0&&kv(k[D])?{pcIsSpace:!1,str:C.str+Ro}:{pcIsSpace:!0,str:C.str+" "}:{pcIsSpace:kv(T),str:C.str+T};var k,D},{pcIsSpace:!1,str:""}).str},nh=s=>u=>!!u&&u.nodeType===s,Ea=s=>!!s&&!Object.getPrototypeOf(s),Bt=nh(1),Hu=s=>Bt(s)&&Eu(ge(s)),Wg=s=>{const u=s.toLowerCase();return d=>et(d)&&d.nodeName.toLowerCase()===u},La=s=>{const u=s.map(d=>d.toLowerCase());return d=>{if(d&&d.nodeName){const f=d.nodeName.toLowerCase();return Fe(u,f)}return!1}},Fp=(s,u)=>{const d=u.toLowerCase().split(" ");return f=>{if(Bt(f)){const m=f.ownerDocument.defaultView;if(m)for(let v=0;v<d.length;v++){const x=m.getComputedStyle(f,null);if((x?x.getPropertyValue(s):null)===d[v])return!0}}return!1}},Gc=s=>Bt(s)&&s.hasAttribute("data-mce-bogus"),Wl=s=>Bt(s)&&"TABLE"===s.tagName,r_=s=>u=>!(!Hu(u)||u.contentEditable!==s&&u.getAttribute("data-mce-contenteditable")!==s),Gp=La(["textarea","input"]),Je=nh(3),o_=nh(4),oA=nh(7),Hc=nh(8),sl=nh(9),Wu=nh(11),Rr=Wg("br"),Iv=Wg("img"),Ra=r_("true"),dr=r_("false"),ls=La(["td","th"]),iA=La(["td","th","caption"]),ll=La(["video","audio","object","embed"]),us=Wg("li"),Dv=Wg("details"),Ug=Wg("summary"),Hp={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},cs=(s,u,d,f)=>{return tn(f.isContent)&&f.isContent(u)||(v=s,Bt(m=u)&&Zt(v.getNonEmptyElements(),m.nodeName))||(s=>Bt(s)&&s.hasAttribute("data-mce-bookmark"))(u)||(m=>Bt(m)&&"A"===m.nodeName&&!m.hasAttribute("href")&&(m.hasAttribute("name")||m.hasAttribute("id")))(u)||((s,u,d,f)=>{return Je(s)&&(v=u,x=d,!(Fc((m=s).data)&&!((C,T,k)=>{const D=ge(T),E=ge(C),P=k.getWhitespaceElements();return eo(E,F=>Zt(P,Pn(F)),Pe(_n,D))})(m,v,x)))&&(!f.includeZwsp||!(m=>{for(const v of m)if(!t_(v))return!1;return!0})(s.data));var m,v,x})(u,d,s,f)||dr(u)||Ra(u)&&(m=>Op(ge(m)).exists(v=>!Jo(v)))(u);var m,v},Ps=(s,u,d)=>{const f={...Hp,...d};if(f.checkRootAsContent&&cs(s,u,u,f))return!1;let m=u.firstChild,v=0;if(!m)return!0;const x=new fr(m,u);do{if(f.skipBogus&&Bt(m)){const C=m.getAttribute("data-mce-bogus");if(C){m=x.next("all"===C);continue}}if(Hc(m))m=x.next(!0);else if(Rr(m))v++,m=x.next();else{if(cs(s,m,u,f))return!1;m=x.next()}}while(m);return v<=1},Wo=(s,u,d)=>Ps(s,u.dom,{checkRootAsContent:!0,...d}),Ev=(s,u,d)=>cs(s,u,u,{includeZwsp:Hp.includeZwsp,...d}),Oo=s=>{let u=s;return{get:()=>u,set:d=>{u=d}}},Up=s=>{const u=Oo(j.none()),d=()=>u.get().each(f=>clearInterval(f));return{clear:()=>{d(),u.set(j.none())},isSet:()=>u.get().isSome(),get:()=>u.get(),set:f=>{d(),u.set(j.some(setInterval(f,s)))}}},Uu=()=>{const s=(u=>{const d=Oo(j.none()),f=()=>d.get().each(u);return{clear:()=>{f(),d.set(j.none())},isSet:()=>d.get().isSome(),get:()=>d.get(),set:m=>{f(),d.set(j.some(m))}}})(Qt);return{...s,on:u=>s.get().each(u)}},jg=s=>{const u=s.toLowerCase();return"svg"===u?"svg":"math"===u?"math":"html"},ju=s=>"html"!==jg(s),Yg=s=>ju(s.nodeName),aA=s=>jg(s.nodeName),sA=["svg","math"],on="data-mce-block",jp=s=>{return Ee((u=s,dt(so(u),d=>!/[A-Z]/.test(d))),u=>{const d=CSS.escape(u);return`${d}:`+Ee(sA,f=>`not(${f} ${d})`).join(":")}).join(",");var u},Wc=(s,u)=>et(u.querySelector(s))?(u.setAttribute(on,"true"),"inline-boundary"===u.getAttribute("data-mce-selected")&&u.removeAttribute("data-mce-selected"),!0):(u.removeAttribute(on),!1),Lv=(s,u)=>{const d=jp(s.getTransparentElements()),f=jp(s.getBlockElements());return dt(u.querySelectorAll(d),m=>Wc(f,m))},lA=(s,u,d)=>{var f;const m=d?"lastChild":"firstChild";for(let v=u[m];v;v=v[m])if(Ps(s,v,{checkRootAsContent:!0}))return void(null===(f=v.parentNode)||void 0===f||f.removeChild(v))},Rv=(s,u)=>{const d=Lv(s,u);var f,m,v;((s,u,d)=>{const f=s.getBlockElements(),m=ge(u),v=C=>Pn(C)in f,x=C=>_n(C,m);Se(Ue(d),C=>{la(C,v,x).each(T=>{const k=dt(Lo(C),P=>v(P)&&!s.isValidChild(Pn(T),Pn(P)));if(k.length>0){const D=Op(T);Se(k,E=>{la(E,v,x).each(P=>{((F,z,H)=>{const V=document.createRange(),U=z.parentNode;if(U){V.setStartBefore(z),V.setEndBefore(H);const $=V.extractContents();lA(F,$,!0),V.setStartAfter(H),V.setEndAfter(z);const K=V.extractContents();lA(F,K,!1),Ps(F,$,{checkRootAsContent:!0})||U.insertBefore($,z),Ps(F,H,{checkRootAsContent:!0})||U.insertBefore(H,z),Ps(F,K,{checkRootAsContent:!0})||U.insertBefore(K,z),U.removeChild(z)}})(s,P.dom,E.dom)})}),D.each(E=>Lv(s,E.dom))}})})})(s,u,d),f=s,m=u,v=d,Se([...v,...lr(f,m)?[m]:[]],x=>Se(zn(ge(x),x.nodeName.toLowerCase()),C=>{Ct(f,C.dom)&&Te(C)}))},uA=(s,u)=>{if(s_(s,u)){const d=jp(s.getBlockElements());Wc(d,u)}},Ov=s=>s.hasAttribute(on),a_=(s,u)=>Zt(s.getTransparentElements(),u),s_=(s,u)=>Bt(u)&&a_(s,u.nodeName),lr=(s,u)=>s_(s,u)&&Ov(u),Ct=(s,u)=>s_(s,u)&&!Ov(u),co=(s,u)=>1===u.type&&a_(s,u.name)&&wt(u.attr(on)),ds=Eo().browser,Bs=s=>Sr(s,Ko),l_=(s,u)=>s.children&&Fe(s.children,u),Pv=(s,u={})=>{let d=0;const f={},m=ge(s),v=_i(m),x=E=>{q(zp(m),E)},C=E=>{const P=zp(m);al(P,"#"+E).each(be)},T=E=>cr(f,E).getOrThunk(()=>({id:"mce-u"+d++,passed:[],failed:[],count:0})),k=E=>new Promise((P,F)=>{let z;const H=Ke._addCacheSuffix(E),V=T(H);f[H]=V,V.count++;const U=(re,ue)=>{Se(re,ur),V.status=ue,V.passed=[],V.failed=[],z&&(z.onload=null,z.onerror=null,z=null)},$=()=>U(V.passed,2),K=()=>U(V.failed,3);if(P&&V.passed.push(P),F&&V.failed.push(F),1===V.status)return;if(2===V.status)return void $();if(3===V.status)return void K();V.status=1;const te=er("link",v.dom);ka(te,{rel:"stylesheet",type:"text/css",id:V.id}),u.contentCssCors&&uo(te,"crossOrigin","anonymous"),u.referrerPolicy&&uo(te,"referrerpolicy",u.referrerPolicy),z=te.dom,z.onload=$,z.onerror=K,x(te),uo(te,"href",H)}),D=E=>{const P=Ke._addCacheSuffix(E);cr(f,P).each(F=>{0==--F.count&&(delete f[P],C(F.id))})};return{load:k,loadRawCss:(E,P)=>{const F=T(E);f[E]=F,F.count++;const z=er("style",v.dom);ka(z,{rel:"stylesheet",type:"text/css",id:F.id}),z.dom.innerHTML=P,x(z)},loadAll:E=>Promise.allSettled(Ee(E,P=>k(P).then(Ve(P)))).then(P=>{const F=no(P,z=>"fulfilled"===z.status);return F.fail.length>0?Promise.reject(Ee(F.fail,z=>z.reason)):Ee(F.pass,z=>z.value)}),unload:D,unloadRawCss:E=>{cr(f,E).each(P=>{0==--P.count&&(delete f[E],C(P.id))})},unloadAll:E=>{Se(E,P=>{D(P)})},_setReferrerPolicy:E=>{u.referrerPolicy=E},_setContentCssCors:E=>{u.contentCssCors=E}}},u_=(()=>{const s=new WeakMap;return{forElement:(u,d)=>{const f=Os(u).dom;return j.from(s.get(f)).getOrThunk(()=>{const m=Pv(f,d);return s.set(f,m),m})}}})(),cA=(s,u)=>et(s)&&(Ev(u,s)||u.isInline(s.nodeName.toLowerCase())),Bv=s=>"span"===s.nodeName.toLowerCase()&&"bookmark"===s.getAttribute("data-mce-type"),Xg=(s,u,d,f)=>{var m;const v=f||u;if(Bt(u)&&Bv(u))return u;const x=u.childNodes;for(let C=x.length-1;C>=0;C--)Xg(s,x[C],d,v);if(Bt(u)){const C=u.childNodes;1===C.length&&Bv(C[0])&&(null===(m=u.parentNode)||void 0===m||m.insertBefore(C[0],u))}return Wu(C=u)||sl(C)||Ev(d,u)||(C=>!!Bt(C)&&C.childNodes.length>0)(u)||((C,T,k)=>Je(C)&&C.data.length>0&&((D,E,P)=>{const F=new fr(D,E).prev(!1),z=new fr(D,E).next(!1),H=ct(F)||cA(F,P),V=ct(z)||cA(z,P);return H&&V})(C,T,k))(u,v,d)||s.remove(u),u;var C},Yp=Ke.makeMap,zv=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ji=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dA=/[<>&\"\']/g,Vv=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,c_={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Ul={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},d_={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ul=(s,u)=>{const d={};if(s){const f=s.split(",");u=u||10;for(let m=0;m<f.length;m+=2){const v=String.fromCharCode(parseInt(f[m],u));if(!Ul[v]){const x="&"+f[m+1]+";";d[v]=x,d[x]=v}}return d}},qg=ul("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),h_=(s,u)=>s.replace(u?zv:ji,d=>Ul[d]||d),p_=(s,u)=>s.replace(u?zv:ji,d=>d.length>1?"&#"+(1024*(d.charCodeAt(0)-55296)+(d.charCodeAt(1)-56320)+65536)+";":Ul[d]||"&#"+d.charCodeAt(0)+";"),Fv=(s,u,d)=>{const f=d||qg;return s.replace(u?zv:ji,m=>Ul[m]||f[m]||m)},Xp={encodeRaw:h_,encodeAllRaw:s=>(""+s).replace(dA,u=>Ul[u]||u),encodeNumeric:p_,encodeNamed:Fv,getEncodeFunc:(s,u)=>{const d=ul(u)||qg,f=Yp(s.replace(/\+/g,","));return f.named&&f.numeric?(m,v)=>m.replace(v?zv:ji,x=>void 0!==Ul[x]?Ul[x]:void 0!==d[x]?d[x]:x.length>1?"&#"+(1024*(x.charCodeAt(0)-55296)+(x.charCodeAt(1)-56320)+65536)+";":"&#"+x.charCodeAt(0)+";"):f.named?u?(m,v)=>Fv(m,v,d):Fv:f.numeric?p_:h_},decode:s=>s.replace(Vv,(u,d)=>d?(d="x"===d.charAt(0).toLowerCase()?parseInt(d.substr(1),16):parseInt(d,10))>65535?(d-=65536,String.fromCharCode(55296+(d>>10),56320+(1023&d))):c_[d]||String.fromCharCode(d):d_[u]||qg[u]||(f=>{const m=er("div").dom;return m.innerHTML=f,m.textContent||m.innerText||f})(u))},En=(s,u)=>(s=Ke.trim(s))?s.split(u||" "):[],f_=s=>new RegExp("^"+s.replace(/([?+*])/g,".$1")+"$"),g_=s=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==s?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==s?["xml:lang"]:[]]),m_=s=>{let u,d;u="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",d="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==s&&(u+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",d+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==s&&(d=[d,"acronym applet basefont big font strike tt"].join(" "),u=[u,"center dir isindex noframes"].join(" "));const f=[u,d].join(" ");return{blockContent:u,phrasingContent:d,flowContent:f}},Dr=s=>{const{blockContent:u,phrasingContent:d,flowContent:f}=m_(s),m=v=>Object.freeze(v.split(" "));return Object.freeze({blockContent:m(u),phrasingContent:m(d),flowContent:m(f)})},rh={html4:$o(()=>Dr("html4")),html5:$o(()=>Dr("html5")),"html5-strict":$o(()=>Dr("html5-strict"))},y_=(s,u)=>{const{blockContent:d,phrasingContent:f,flowContent:m}=rh[s]();return"blocks"===u?j.some(d):"phrasing"===u?j.some(f):"flow"===u?j.some(m):j.none()},Uc=s=>j.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(s)).map(u=>({preset:"@"===u[1],name:u[2]})),Gv={},qp=Ke.makeMap,zs=Ke.each,Zp=Ke.extend,Po=Ke.explode,Hv=(s,u={})=>{const d=qp(s," ",qp(s.toUpperCase()," "));return Zp(d,u)},$p=s=>Hv("td th li dt dd figcaption caption details summary",s.getTextBlockElements()),Yu=(s,u)=>{if(s){const d={};return wt(s)&&(s={"*":s}),zs(s,(f,m)=>{d[m]=d[m.toUpperCase()]="map"===u?qp(f,/[, ]/):Po(f,/[, ]/)}),d}},Gn=(s={})=>{var u;const d={},f={};let m=[];const v={},x={},C=(Tt,dn,In)=>{const hn=s[Tt];if(hn)return qp(hn,/[, ]/,qp(hn.toUpperCase(),/[, ]/));{let ir=Gv[Tt];return ir||(ir=Hv(dn,In),Gv[Tt]=ir),ir}},T=null!==(u=s.schema)&&void 0!==u?u:"html5",k=(Tt=>{const dn=g_(Tt),{phrasingContent:In,flowContent:hn}=m_(Tt),ir={},Nr=(mr,Er,wo)=>{ir[mr]={attributes:An(Er,Ve({})),attributesOrder:Er,children:An(wo,Ve({}))}},vt=(mr,Er="",wo="")=>{const Pi=En(wo),nl=En(mr);let ho=nl.length;const wa=[...dn,...En(Er)];for(;ho--;)Nr(nl[ho],wa.slice(),Pi)},Xt=(mr,Er)=>{const wo=En(mr),Pi=En(Er);let nl=wo.length;for(;nl--;){const ho=ir[wo[nl]];for(let wa=0,So=Pi.length;wa<So;wa++)ho.attributes[Pi[wa]]={},ho.attributesOrder.push(Pi[wa])}};return"html5-strict"!==Tt&&(Se(En("acronym applet basefont big font strike tt"),mr=>{vt(mr,"",In)}),Se(En("center dir isindex noframes"),mr=>{vt(mr,"",hn)})),vt("html","manifest","head body"),vt("head","","base command link meta noscript script style title"),vt("title hr noscript br"),vt("base","href target"),vt("link","href rel media hreflang type sizes hreflang"),vt("meta","name http-equiv content charset"),vt("style","media type scoped"),vt("script","src async defer type charset"),vt("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",hn),vt("dd div","",hn),vt("address dt caption","","html4"===Tt?In:hn),vt("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",In),vt("blockquote","cite",hn),vt("ol","reversed start type","li"),vt("ul","","li"),vt("li","value",hn),vt("dl","","dt dd"),vt("a","href target rel media hreflang type","html4"===Tt?In:hn),vt("q","cite",In),vt("ins del","cite datetime",hn),vt("img","src sizes srcset alt usemap ismap width height"),vt("iframe","src name width height",hn),vt("embed","src type width height"),vt("object","data type typemustmatch name usemap form width height",[hn,"param"].join(" ")),vt("param","name value"),vt("map","name",[hn,"area"].join(" ")),vt("area","alt coords shape href target rel media hreflang type"),vt("table","border","caption colgroup thead tfoot tbody tr"+("html4"===Tt?" col":"")),vt("colgroup","span","col"),vt("col","span"),vt("tbody thead tfoot","","tr"),vt("tr","","td th"),vt("td","colspan rowspan headers",hn),vt("th","colspan rowspan headers scope abbr",hn),vt("form","accept-charset action autocomplete enctype method name novalidate target",hn),vt("fieldset","disabled form name",[hn,"legend"].join(" ")),vt("label","form for",In),vt("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),vt("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===Tt?hn:In),vt("select","disabled form multiple name required size","option optgroup"),vt("optgroup","disabled label","option"),vt("option","disabled label selected value"),vt("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),vt("menu","type label",[hn,"li"].join(" ")),vt("noscript","",hn),"html4"!==Tt&&(vt("wbr"),vt("ruby","",[In,"rt rp"].join(" ")),vt("figcaption","",hn),vt("mark rt rp bdi","",In),vt("summary","",[In,"h1 h2 h3 h4 h5 h6"].join(" ")),vt("canvas","width height",hn),vt("data","value",In),vt("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[hn,"track source"].join(" ")),vt("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[hn,"track source"].join(" ")),vt("picture","","img source"),vt("source","src srcset type media sizes"),vt("track","kind src srclang label default"),vt("datalist","",[In,"option"].join(" ")),vt("article section nav aside main header footer","",hn),vt("hgroup","","h1 h2 h3 h4 h5 h6"),vt("figure","",[hn,"figcaption"].join(" ")),vt("time","datetime",In),vt("dialog","open",hn),vt("command","type label icon disabled checked radiogroup command"),vt("output","for form name",In),vt("progress","value max",In),vt("meter","value min max low high optimum",In),vt("details","open",[hn,"summary"].join(" ")),vt("keygen","autofocus challenge disabled form keytype name"),Nr("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==Tt&&(Xt("script","language xml:space"),Xt("style","xml:space"),Xt("object","declare classid code codebase codetype archive standby align border hspace vspace"),Xt("embed","align name hspace vspace"),Xt("param","valuetype type"),Xt("a","charset name rev shape coords"),Xt("br","clear"),Xt("applet","codebase archive code object alt name width height align hspace vspace"),Xt("img","name longdesc align border hspace vspace"),Xt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Xt("font basefont","size color face"),Xt("input","usemap align"),Xt("select"),Xt("textarea"),Xt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Xt("ul","type compact"),Xt("li","type"),Xt("ol dl menu dir","compact"),Xt("pre","width xml:space"),Xt("hr","align noshade size width"),Xt("isindex","prompt"),Xt("table","summary width frame rules cellspacing cellpadding align bgcolor"),Xt("col","width align char charoff valign"),Xt("colgroup","width align char charoff valign"),Xt("thead","align char charoff valign"),Xt("tr","align char charoff valign bgcolor"),Xt("th","axis align char charoff valign nowrap bgcolor width height"),Xt("form","accept"),Xt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Xt("tfoot","align char charoff valign"),Xt("tbody","align char charoff valign"),Xt("area","nohref"),Xt("body","background bgcolor text link vlink alink")),"html4"!==Tt&&(Xt("input button select textarea","autofocus"),Xt("input textarea","placeholder"),Xt("a","download"),Xt("link script img","crossorigin"),Xt("img","loading"),Xt("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==Tt&&Se([ir.video,ir.audio],mr=>{delete mr.children.audio,delete mr.children.video}),Se(En("a form meter progress dfn"),mr=>{ir[mr]&&delete ir[mr].children[mr]}),delete ir.caption.children.table,delete ir.script,ir})(T);!1===s.verify_html&&(s.valid_elements="*[*]");const D=Yu(s.valid_styles),E=Yu(s.invalid_styles,"map"),P=Yu(s.valid_classes,"map"),F=C("whitespace_elements","pre script noscript style textarea video audio iframe object code"),z=C("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),H=C("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),V=C("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),U="td th iframe video audio object script code",$=C("non_empty_elements",U+" pre svg textarea summary",H),K=C("move_caret_before_on_enter_elements",U+" table",H),te="h1 h2 h3 h4 h5 h6",re=C("text_block_elements",te+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ue=C("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",re),he=C("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),de=C("transparent_elements","a ins del canvas map"),_e=C("wrap_block_elements","pre "+te);zs("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Tt=>{x[Tt]=new RegExp("</"+Tt+"[^>]*>","gi")});const Ne=Tt=>{const dn=j.from(d["@"]),In=/[*?+]/;Se(((hn,ir)=>{const Nr=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return st(En(ir,","),vt=>{const Xt=Nr.exec(vt);if(Xt){const mr=Xt[1],Er=Xt[2],wo=Xt[3],Pi=Xt[4],nl=Xt[5],ho={attributes:{},attributesOrder:[]};if(hn.each(wa=>{return $a=ho,sr((So=wa).attributes,(Mu,kc)=>{$a.attributes[kc]=Mu}),void $a.attributesOrder.push(...So.attributesOrder);var So,$a}),"#"===mr?ho.paddEmpty=!0:"-"===mr&&(ho.removeEmpty=!0),"!"===Pi&&(ho.removeEmptyAttrs=!0),nl&&((wa,So)=>{const $a=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Mu=/[*?+]/,{attributes:kc,attributesOrder:Hd}=So;Se(En(wa,"|"),Wx=>{const Ss=$a.exec(Wx);if(Ss){const Ic={},No=Ss[1],mi=Ss[2].replace(/[\\:]:/g,":"),xp=Ss[3],Tl=Ss[4];if("!"===No&&(So.attributesRequired=So.attributesRequired||[],So.attributesRequired.push(mi),Ic.required=!0),"-"===No)return delete kc[mi],void Hd.splice(Ke.inArray(Hd,mi),1);if(xp&&("="===xp?(So.attributesDefault=So.attributesDefault||[],So.attributesDefault.push({name:mi,value:Tl}),Ic.defaultValue=Tl):"~"===xp?(So.attributesForced=So.attributesForced||[],So.attributesForced.push({name:mi,value:Tl}),Ic.forcedValue=Tl):"<"===xp&&(Ic.validValues=Ke.makeMap(Tl,"?"))),Mu.test(mi)){const Al=Ic;So.attributePatterns=So.attributePatterns||[],Al.pattern=f_(mi),So.attributePatterns.push(Al)}else kc[mi]||Hd.push(mi),kc[mi]=Ic}})})(nl,ho),wo&&(ho.outputName=Er),"@"===Er){if(!hn.isNone())return[];hn=j.some(ho)}return[wo?{name:Er,element:ho,aliasName:wo}:{name:Er,element:ho}]}return[]})})(dn,Tt??""),({name:hn,element:ir,aliasName:Nr})=>{if(Nr&&(d[Nr]=ir),In.test(hn)){const vt=ir;vt.pattern=f_(hn),m.push(vt)}else d[hn]=ir})},ce=Tt=>{m=[],Se(so(d),dn=>{delete d[dn]}),Ne(Tt)},fe=(Tt,dn)=>{var In,hn;delete Gv.text_block_elements,delete Gv.block_elements;const ir=!!dn.extends&&!xr(dn.extends),Nr=dn.extends;if(f[Tt]=Nr?f[Nr]:{},v[Tt]=Nr??Tt,$[Tt.toUpperCase()]={},$[Tt]={},ir||(ue[Tt.toUpperCase()]={},ue[Tt]={}),Nr&&!d[Tt]&&d[Nr]){const vt=(Xt=>{const mr=Er=>{return yn(Er)?Ee(Er,mr):Ot(wo=Er)&&wo.source&&"[object RegExp]"===Object.prototype.toString.call(wo)?new RegExp(Er.source,Er.flags):Ot(Er)?Et(Er,mr):Er;var wo};return mr(Xt)})(d[Nr]);delete vt.removeEmptyAttrs,delete vt.removeEmpty,d[Tt]=vt}else d[Tt]={attributesOrder:[],attributes:{}};if(yn(dn.attributes)){const vt=mr=>{Xt.attributesOrder.push(mr),Xt.attributes[mr]={}},Xt=null!==(In=d[Tt])&&void 0!==In?In:{};delete Xt.attributesDefault,delete Xt.attributesForced,delete Xt.attributePatterns,delete Xt.attributesRequired,Xt.attributesOrder=[],Xt.attributes={},Se(dn.attributes,mr=>{const Er=g_(T);Uc(mr).each(({preset:wo,name:Pi})=>{wo?"global"===Pi&&Se(Er,vt):vt(Pi)})}),d[Tt]=Xt}if(Ar(dn.padEmpty)){const vt=null!==(hn=d[Tt])&&void 0!==hn?hn:{};vt.paddEmpty=dn.padEmpty,d[Tt]=vt}if(yn(dn.children)){const vt={},Xt=Er=>{vt[Er]={}},mr=Er=>{y_(T,Er).each(wo=>{Se(wo,Xt)})};Se(dn.children,Er=>{Uc(Er).each(({preset:wo,name:Pi})=>{wo?mr(Pi):Xt(Pi)})}),f[Tt]=vt}Nr&&sr(f,(vt,Xt)=>{vt[Nr]&&(f[Xt]=vt=Zp({},f[Xt]),vt[Tt]=vt[Nr])})},we=Tt=>{Ot(Tt)?sr(Tt,(dn,In)=>fe(In,dn)):wt(Tt)&&Se((In=>{const hn=/^(~)?(.+)$/;return st(En(In,","),ir=>{const Nr=hn.exec(ir);return Nr?[{cloneName:"~"===Nr[1]?"span":"div",name:Nr[2]}]:[]})})(Tt??""),({name:In,cloneName:hn})=>{fe(In,{extends:hn})})},ze=Tt=>{Se((dn=>{const In=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return st(En(dn,","),hn=>{const ir=In.exec(hn);if(ir){const Nr=ir[1];return[{operation:Nr?(Xt=Nr,"-"===Xt?"remove":"add"):"replace",name:ir[2],validChildren:st(En(ir[3],"|"),Xt=>Uc(Xt).toArray())}]}var Xt;return[]})})(Tt??""),({operation:dn,name:In,validChildren:hn})=>{const ir="replace"===dn?{"#comment":{}}:f[In],Nr=vt=>{"remove"===dn?delete ir[vt]:ir[vt]={}};Se(hn,({preset:vt,name:Xt})=>{vt?y_(T,Xt).each(Er=>{Se(Er,Nr)}):Nr(Xt)}),f[In]=ir})},Qe=Tt=>{const dn=d[Tt];if(dn)return dn;let In=m.length;for(;In--;){const hn=m[In];if(hn.pattern.test(Tt))return hn}},Xe=Ve(D),Dt=Ve(E),zt=Ve(P),Ut=Ve(V),kt=Ve(ue),gt=Ve(re),Pt=Ve(he),ye=Ve(Object.seal(H)),xe=Ve(z),Le=Ve($),Ge=Ve(K),mt=Ve(F),at=Ve(de),Yt=Ve(_e),Jt=Ve(Object.seal(x)),sn=(Tt,dn)=>{const In=Qe(Tt);if(In){if(!dn)return!0;{if(In.attributes[dn])return!0;const hn=In.attributePatterns;if(hn){let ir=hn.length;for(;ir--;)if(hn[ir].pattern.test(dn))return!0}}}return!1},xr=Tt=>Zt(kt(),Tt),Zr=Tt=>!xt(Tt,"#")&&sn(Tt)&&!xr(Tt),Za=Ve(v);return s.valid_elements?(ce(s.valid_elements),zs(k,(Tt,dn)=>{f[dn]=Tt.children})):(zs(k,(Tt,dn)=>{d[dn]={attributes:Tt.attributes,attributesOrder:Tt.attributesOrder},f[dn]=Tt.children}),zs(En("strong/b em/i"),Tt=>{const dn=En(Tt,"/");d[dn[1]].outputName=dn[0]}),zs(he,(Tt,dn)=>{d[dn]&&(s.padd_empty_block_inline_children&&(d[dn].paddInEmptyBlock=!0),d[dn].removeEmpty=!0)}),zs(En("ol ul blockquote a table tbody"),Tt=>{d[Tt]&&(d[Tt].removeEmpty=!0)}),zs(En("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Tt=>{d[Tt]&&(d[Tt].paddEmpty=!0)}),zs(En("span"),Tt=>{d[Tt].removeEmptyAttrs=!0})),delete d.svg,we(s.custom_elements),ze(s.valid_children),Ne(s.extended_valid_elements),ze("+ol[ul|ol],+ul[ul|ol]"),zs({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Tt,dn)=>{d[dn]&&(d[dn].parentsRequired=En(Tt))}),s.invalid_elements&&zs(Po(s.invalid_elements),Tt=>{d[Tt]&&delete d[Tt]}),Qe("span")||Ne("span[!data-mce-type|*]"),{type:T,children:f,elements:d,getValidStyles:Xe,getValidClasses:zt,getBlockElements:kt,getInvalidStyles:Dt,getVoidElements:ye,getTextBlockElements:gt,getTextInlineElements:Pt,getBoolAttrs:Ut,getElementRule:Qe,getSelfClosingElements:xe,getNonEmptyElements:Le,getMoveCaretBeforeOnEnterElements:Ge,getWhitespaceElements:mt,getTransparentElements:at,getSpecialElements:Jt,isValidChild:(Tt,dn)=>{const In=f[Tt.toLowerCase()];return!(!In||!In[dn.toLowerCase()])},isValid:sn,isBlock:xr,isInline:Zr,isWrapper:Tt=>Zt(Yt(),Tt)||Zr(Tt),getCustomElements:Za,addValidElements:Ne,setValidElements:ce,addCustomElements:we,addValidChildren:ze}},v_=s=>{const u=s.toString(16);return(1===u.length?"0"+u:u).toUpperCase()},Zg=s=>{return{value:(d=v_(s.red)+v_(s.green)+v_(s.blue),ft(d,"#").toUpperCase())};var d},Wv=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Mo=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,hA=(s,u,d,f)=>({red:parseInt(s,10),green:parseInt(u,10),blue:parseInt(d,10),alpha:parseFloat(f)}),Kp=s=>{const u=Wv.exec(s);if(null!==u)return j.some(hA(u[1],u[2],u[3],"1"));const d=Mo.exec(s);return null!==d?j.some(hA(d[1],d[2],d[3],d[4])):j.none()},pA=s=>`rgba(${s.red},${s.green},${s.blue},${s.alpha})`,oh=s=>Kp(s).map(Zg).map(u=>"#"+u.value).getOr(s),Uv=(s={},u)=>{const d=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,m=/\s+$/,v={};let x,C;u&&(x=u.getValidStyles(),C=u.getInvalidStyles());const k="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let E=0;E<k.length;E++)v[k[E]]="\ufeff"+E,v["\ufeff"+E]=k[E];const D={parse:E=>{const P={};let F=!1;const z=s.url_converter,H=s.url_converter_scope||D,V=(ce,fe,we)=>{const ze=P[ce+"-top"+fe];if(!ze)return;const Qe=P[ce+"-right"+fe];if(!Qe)return;const Xe=P[ce+"-bottom"+fe];if(!Xe)return;const Dt=P[ce+"-left"+fe];if(!Dt)return;const zt=[ze,Qe,Xe,Dt];let Ut=zt.length-1;for(;Ut--&&zt[Ut]===zt[Ut+1];);Ut>-1&&we||(P[ce+fe]=-1===Ut?zt[0]:zt.join(" "),delete P[ce+"-top"+fe],delete P[ce+"-right"+fe],delete P[ce+"-bottom"+fe],delete P[ce+"-left"+fe])},U=ce=>{const fe=P[ce];if(!fe)return;const we=fe.indexOf(",")>-1?[fe]:fe.split(" ");let ze=we.length;for(;ze--;)if(we[ze]!==we[0])return!1;return P[ce]=we[0],!0},$=ce=>(F=!0,v[ce]),K=(ce,fe)=>(F&&(ce=ce.replace(/\uFEFF[0-9]/g,we=>v[we])),fe||(ce=ce.replace(/\\([\'\";:])/g,"$1")),ce),te=ce=>String.fromCharCode(parseInt(ce.slice(1),16)),re=ce=>ce.replace(/\\[0-9a-f]+/gi,te),ue=(ce,fe,we,ze,Qe,Xe)=>{if(Qe=Qe||Xe)return"'"+(Qe=K(Qe)).replace(/\'/g,"\\'")+"'";if(fe=K(fe||we||ze||""),!s.allow_script_urls){const Dt=fe.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Dt)||!s.allow_svg_data_urls&&/^data:image\/svg/i.test(Dt))return""}return z&&(fe=z.call(H,fe,"style")),"url('"+fe.replace(/\'/g,"\\'")+"')"};if(E){let ce;for(E=(E=E.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,$).replace(/\"[^\"]+\"|\'[^\']+\'/g,fe=>fe.replace(/[;:]/g,$));ce=f.exec(E);){f.lastIndex=ce.index+ce[0].length;let fe=ce[1].replace(m,"").toLowerCase(),we=ce[2].replace(m,"");if(fe&&we){if(fe=re(fe),we=re(we),-1!==fe.indexOf("\ufeff")||-1!==fe.indexOf('"')||!s.allow_script_urls&&("behavior"===fe||/expression\s*\(|\/\*|\*\//.test(we)))continue;"font-weight"===fe&&"700"===we?we="bold":"color"!==fe&&"background-color"!==fe||(we=we.toLowerCase()),"rgb"==(Wv.test(Ne=we)?"rgb":Mo.test(Ne)?"rgba":"other")&&Kp(we).each(ze=>{we=oh(pA(ze)).toLowerCase()}),we=we.replace(d,ue),P[fe]=F?K(we,!0):we}}V("border","",!0),V("border","-width"),V("border","-color"),V("border","-style"),V("padding",""),V("margin",""),de="border-style",_e="border-color",U(he="border-width")&&U(de)&&U(_e)&&(P.border=P[he]+" "+P[de]+" "+P[_e],delete P[he],delete P[de],delete P[_e]),"medium none"===P.border&&delete P.border,"none"===P["border-image"]&&delete P["border-image"]}var he,de,_e,Ne;return P},serialize:(E,P)=>{let F="";const z=(H,V)=>{const U=V[H];if(U)for(let $=0,K=U.length;$<K;$++){const te=U[$],re=E[te];re&&(F+=(F.length>0?" ":"")+te+": "+re+";")}};return P&&x?(z("*",x),z(P,x)):sr(E,(H,V)=>{H&&((U,$)=>{if(!C||!$)return!0;let K=C["*"];return!(K&&K[U]||(K=C[$],K&&K[U]))})(V,P)&&(F+=(F.length>0?" ":"")+V+": "+H+";")}),F}};return D},ih={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},b_=(s,u)=>{const d=u??{};for(const f in s)Zt(ih,f)||(d[f]=s[f]);return et(s.composedPath)&&(d.composedPath=()=>s.composedPath()),et(s.getModifierState)&&(d.getModifierState=f=>s.getModifierState(f)),et(s.getTargetRanges)&&(d.getTargetRanges=()=>s.getTargetRanges()),d},Vs=(s,u,d,f)=>{var m;const v=b_(u,f);return v.type=s,rr(v.target)&&(v.target=null!==(m=v.srcElement)&&void 0!==m?m:d),(rr((x=u).preventDefault)||(C=x)instanceof Event||tn(C.initEvent))&&(v.preventDefault=()=>{v.defaultPrevented=!0,v.isDefaultPrevented=Z,tn(u.preventDefault)&&u.preventDefault()},v.stopPropagation=()=>{v.cancelBubble=!0,v.isPropagationStopped=Z,tn(u.stopPropagation)&&u.stopPropagation()},v.stopImmediatePropagation=()=>{v.isImmediatePropagationStopped=Z,v.stopPropagation()},(x=>x.isDefaultPrevented===Z||x.isDefaultPrevented===Mn)(v)||(v.isDefaultPrevented=!0===v.defaultPrevented?Z:Mn,v.isPropagationStopped=!0===v.cancelBubble?Z:Mn,v.isImmediatePropagationStopped=Mn)),v;var x,C},x_=/^(?:mouse|contextmenu)|click/,jv=(s,u,d,f)=>{s.addEventListener(u,d,f||!1)},Yv=(s,u,d,f)=>{s.removeEventListener(u,d,f||!1)},$g=(s,u)=>{const d=Vs(s.type,s,document,u);if(et(f=s)&&x_.test(f.type)&&ct(s.pageX)&&!ct(s.clientX)){const f=d.target.ownerDocument||document,m=f.documentElement,v=f.body,x=d;x.pageX=s.clientX+(m&&m.scrollLeft||v&&v.scrollLeft||0)-(m&&m.clientLeft||v&&v.clientLeft||0),x.pageY=s.clientY+(m&&m.scrollTop||v&&v.scrollTop||0)-(m&&m.clientTop||v&&v.clientTop||0)}var f;return d},sE=(s,u,d)=>{const f=s.document,m={type:"ready"};if(d.domLoaded)return void u(m);const v=()=>{Yv(s,"DOMContentLoaded",v),Yv(s,"load",v),d.domLoaded||(d.domLoaded=!0,u(m)),s=null};"complete"===f.readyState||"interactive"===f.readyState&&f.body?v():jv(s,"DOMContentLoaded",v),d.domLoaded||jv(s,"load",v)};class jl{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(u,d,f,m){const v=this;let x;const C=window,T=P=>{v.executeHandlers($g(P||C.event),k)};if(!u||Je(u)||Hc(u))return f;let k;u[v.expando]?k=u[v.expando]:(k=v.count++,u[v.expando]=k,v.events[k]={}),m=m||u;const D=d.split(" ");let E=D.length;for(;E--;){let P=D[E],F=T,z=!1,H=!1;"DOMContentLoaded"===P&&(P="ready"),v.domLoaded&&"ready"===P&&"complete"===u.readyState?f.call(m,$g({type:P})):(v.hasFocusIn||"focusin"!==P&&"focusout"!==P||(z=!0,H="focusin"===P?"focus":"blur",F=V=>{const U=$g(V||C.event);U.type="focus"===U.type?"focusin":"focusout",v.executeHandlers(U,k)}),x=v.events[k][P],x?"ready"===P&&v.domLoaded?f($g({type:P})):x.push({func:f,scope:m}):(v.events[k][P]=x=[{func:f,scope:m}],x.fakeName=H,x.capture=z,x.nativeHandler=F,"ready"===P?sE(u,F,v):jv(u,H||P,F,z)))}return u=x=null,f}unbind(u,d,f){if(!u||Je(u)||Hc(u))return this;const m=u[this.expando];if(m){let v=this.events[m];if(d){const x=d.split(" ");let C=x.length;for(;C--;){const T=x[C],k=v[T];if(k){if(f){let D=k.length;for(;D--;)if(k[D].func===f){const E=k.nativeHandler,P=k.fakeName,F=k.capture,z=k.slice(0,D).concat(k.slice(D+1));z.nativeHandler=E,z.fakeName=P,z.capture=F,v[T]=z}}f&&0!==k.length||(delete v[T],Yv(u,k.fakeName||T,k.nativeHandler,k.capture))}}}else sr(v,(x,C)=>{Yv(u,x.fakeName||C,x.nativeHandler,x.capture)}),v={};for(const x in v)if(Zt(v,x))return this;delete this.events[m];try{delete u[this.expando]}catch{u[this.expando]=null}}return this}fire(u,d,f){return this.dispatch(u,d,f)}dispatch(u,d,f){if(!u||Je(u)||Hc(u))return this;const m=$g({type:d,target:u},f);do{const v=u[this.expando];v&&this.executeHandlers(m,v),u=u.parentNode||u.ownerDocument||u.defaultView||u.parentWindow}while(u&&!m.isPropagationStopped());return this}clean(u){if(!u||Je(u)||Hc(u))return this;if(u[this.expando]&&this.unbind(u),u.getElementsByTagName||(u=u.document),u&&u.getElementsByTagName){this.unbind(u);const d=u.getElementsByTagName("*");let f=d.length;for(;f--;)(u=d[f])[this.expando]&&this.unbind(u)}return this}destroy(){this.events={}}cancel(u){return u&&(u.preventDefault(),u.stopImmediatePropagation()),!1}executeHandlers(u,d){const f=this.events[d],m=f&&f[u.type];if(m)for(let v=0,x=m.length;v<x;v++){const C=m[v];if(C&&!1===C.func.call(C.scope,u)&&u.preventDefault(),u.isImmediatePropagationStopped())return}}}jl.Event=new jl;const Xu=Ke.each,lE=Ke.grep,__="data-mce-style",w_=Ke.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Kg=(s,u,d)=>{rr(d)||""===d?go(s,u):uo(s,u,d)},Xv=s=>s.replace(/[A-Z]/g,u=>"-"+u.toLowerCase()),ah=(s,u)=>{let d=0;if(s)for(let f=s.nodeType,m=s.previousSibling;m;m=m.previousSibling){const v=m.nodeType;(!u||!Je(m)||v!==f&&m.data.length)&&(d++,f=v)}return d},Jg=(s,u)=>{const d=si(u,"style"),f=s.serialize(s.parse(d),Pn(u));Kg(u,__,f)},qv=(s,u,d)=>{const f=Xv(u);var m,v;rr(d)||""===d?Gu(s,f):Tv(s,f,(v=f,kr(m=d)?Zt(w_,v)?m+"":m+"px":m))},Cr=(s,u={})=>{const d={},f=window,m={};let v=0;const x=u_.forElement(ge(s),{contentCssCors:u.contentCssCors,referrerPolicy:u.referrerPolicy}),C=[],T=u.schema?u.schema:Gn({}),k=Uv({url_converter:u.url_converter,url_converter_scope:u.url_converter_scope},u.schema),D=u.ownEvents?new jl:jl.Event,E=T.getBlockElements(),P=ye=>ye&&s&&wt(ye)?s.getElementById(ye):ye,F=ye=>{const xe=P(ye);return et(xe)?ge(xe):null},z=(ye,xe,Le="")=>{let Ge;const mt=F(ye);if(et(mt)&&Ko(mt)){const at=Pt[xe];Ge=at&&at.get?at.get(mt.dom,xe):si(mt,xe)}return et(Ge)?Ge:Le},H=ye=>{const xe=P(ye);return rr(xe)?[]:xe.attributes},V=(ye,xe,Le)=>{de(ye,Ge=>{if(Bt(Ge)){const mt=ge(Ge),at=""===Le?null:Le,Yt=si(mt,xe),Jt=Pt[xe];Jt&&Jt.set?Jt.set(mt.dom,at,xe):Kg(mt,xe,at),Yt!==at&&u.onSetAttrib&&u.onSetAttrib({attrElm:mt.dom,attrName:xe,attrValue:at})}})},U=()=>u.root_element||s.body,$=(ye,xe)=>((Le,Ge,mt)=>{let at=0,Yt=0;const Jt=Le.ownerDocument;if(mt=mt||Le,Ge){if(mt===Le&&Ge.getBoundingClientRect&&"static"===Si(ge(Le),"position")){const xr=Ge.getBoundingClientRect();return at=xr.left+(Jt.documentElement.scrollLeft||Le.scrollLeft)-Jt.documentElement.clientLeft,Yt=xr.top+(Jt.documentElement.scrollTop||Le.scrollTop)-Jt.documentElement.clientTop,{x:at,y:Yt}}let sn=Ge;for(;sn&&sn!==mt&&sn.nodeType&&!l_(sn,mt);)at+=sn.offsetLeft||0,Yt+=sn.offsetTop||0,sn=sn.offsetParent;for(sn=Ge.parentNode;sn&&sn!==mt&&sn.nodeType&&!l_(sn,mt);)at-=sn.scrollLeft||0,Yt-=sn.scrollTop||0,sn=sn.parentNode;Yt+=(xr=ge(Ge),ds.isFirefox()&&"table"===Pn(xr)?Bs(Lo(xr)).filter(Zr=>"caption"===Pn(Zr)).bind(Zr=>Bs(Vl(Zr)).map(Za=>Za.dom.offsetTop<=Zr.dom.offsetTop?-Zr.dom.offsetHeight:0)).getOr(0):0)}var xr;return{x:at,y:Yt}})(s.body,P(ye),xe),K=(ye,xe,Le)=>{const Ge=P(ye);var mt;if(!rr(Ge)&&(Hu(Ge)||Bt(mt=Ge)&&"http://www.w3.org/2000/svg"===mt.namespaceURI))return Le?Si(ge(Ge),Xv(xe)):("float"===(xe=xe.replace(/-(\D)/g,(at,Yt)=>Yt.toUpperCase()))&&(xe="cssFloat"),Ge.style?Ge.style[xe]:void 0)},te=ye=>{const xe=P(ye);if(!xe)return{w:0,h:0};let Le=K(xe,"width"),Ge=K(xe,"height");return Le&&-1!==Le.indexOf("px")||(Le="0"),Ge&&-1!==Ge.indexOf("px")||(Ge="0"),{w:parseInt(Le,10)||xe.offsetWidth||xe.clientWidth,h:parseInt(Ge,10)||xe.offsetHeight||xe.clientHeight}},re=(ye,xe)=>{if(!ye)return!1;const Le=yn(ye)?ye:[ye];return _t(Le,Ge=>xi(ge(Ge),xe))},ue=(ye,xe,Le,Ge)=>{const mt=[];let at=P(ye);Ge=void 0===Ge;const Yt=Le||("BODY"!==U().nodeName?U().parentNode:null);if(wt(xe))if("*"===xe)xe=Bt;else{const Jt=xe;xe=sn=>re(sn,Jt)}for(;at&&!(at===Yt||rr(at.nodeType)||sl(at)||Wu(at));){if(!xe||xe(at)){if(!Ge)return[at];mt.push(at)}at=at.parentNode}return Ge?mt:null},he=(ye,xe,Le)=>{let Ge=xe;if(ye){wt(xe)&&(Ge=mt=>re(mt,xe));for(let mt=ye[Le];mt;mt=mt[Le])if(tn(Ge)&&Ge(mt))return mt}return null},de=function(ye,xe,Le){const Ge=Le??this;if(yn(ye)){const mt=[];return Xu(ye,(at,Yt)=>{const Jt=P(at);Jt&&mt.push(xe.call(Ge,Jt,Yt))}),mt}{const mt=P(ye);return!!mt&&xe.call(Ge,mt)}},_e=(ye,xe)=>{de(ye,Le=>{sr(xe,(Ge,mt)=>{V(Le,mt,Ge)})})},Ne=(ye,xe)=>{de(ye,Le=>{const Ge=ge(Le);$e(Ge,xe)})},ce=(ye,xe,Le,Ge,mt)=>de(ye,at=>{const Yt=wt(xe)?s.createElement(xe):xe;return et(Le)&&_e(Yt,Le),Ge&&(!wt(Ge)&&Ge.nodeType?Yt.appendChild(Ge):wt(Ge)&&Ne(Yt,Ge)),mt?Yt:at.appendChild(Yt)}),fe=(ye,xe,Le)=>ce(s.createElement(ye),ye,xe,Le,!0),we=Xp.encodeAllRaw,ze=(ye,xe)=>de(ye,Le=>{const Ge=ge(Le);return xe&&Se(Lo(Ge),mt=>{ai(mt)&&0===mt.dom.length?be(mt):Ho(Ge,mt)}),be(Ge),Ge.dom}),Qe=(ye,xe,Le)=>{de(ye,Ge=>{if(Bt(Ge)){const mt=ge(Ge),at=xe.split(" ");Se(at,Yt=>{var Jt,sn,Zr,Za;et(Le)?(Le?Ls:Fo)(mt,Yt):(sn=Yt,Gi(Jt=mt)?Jt.dom.classList.toggle(sn):(Za=sn,Fe(Fg(Zr=Jt),Za)?Lp(Zr,Za):Gg(Zr,Za)),Da(Jt))})}})},Xe=(ye,xe,Le)=>de(xe,Ge=>{var mt;const at=yn(xe)?ye.cloneNode(!0):ye;return Le&&Xu(lE(Ge.childNodes),Yt=>{at.appendChild(Yt)}),null===(mt=Ge.parentNode)||void 0===mt||mt.replaceChild(at,Ge),Ge}),Dt=()=>s.createRange(),zt=(ye,xe,Le,Ge)=>{if(yn(ye)){let mt=ye.length;const at=[];for(;mt--;)at[mt]=zt(ye[mt],xe,Le,Ge);return at}return!u.collect||ye!==s&&ye!==f||C.push([ye,xe,Le,Ge]),D.bind(ye,xe,Le,Ge||gt)},Ut=(ye,xe,Le)=>{if(yn(ye)){let Ge=ye.length;const mt=[];for(;Ge--;)mt[Ge]=Ut(ye[Ge],xe,Le);return mt}if(C.length>0&&(ye===s||ye===f)){let Ge=C.length;for(;Ge--;){const[mt,at,Yt]=C[Ge];ye!==mt||xe&&xe!==at||Le&&Le!==Yt||D.unbind(mt,at,Yt)}}return D.unbind(ye,xe,Le)},kt=ye=>{if(ye&&Hu(ye)){const xe=ye.getAttribute("data-mce-contenteditable");return xe&&"inherit"!==xe?xe:"inherit"!==ye.contentEditable?ye.contentEditable:null}return null},gt={doc:s,settings:u,win:f,files:m,stdMode:!0,boxModel:!0,styleSheetLoader:x,boundEvents:C,styles:k,schema:T,events:D,isBlock:ye=>wt(ye)?Zt(E,ye):Bt(ye)&&(Zt(E,ye.nodeName)||lr(T,ye)),root:null,clone:(ye,xe)=>ye.cloneNode(xe),getRoot:U,getViewPort:ye=>{const xe=Un(ye);return{x:xe.x,y:xe.y,w:xe.width,h:xe.height}},getRect:ye=>{const xe=P(ye),Le=$(xe),Ge=te(xe);return{x:Le.x,y:Le.y,w:Ge.w,h:Ge.h}},getSize:te,getParent:(ye,xe,Le)=>{const Ge=ue(ye,xe,Le,!1);return Ge&&Ge.length>0?Ge[0]:null},getParents:ue,get:P,getNext:(ye,xe)=>he(ye,xe,"nextSibling"),getPrev:(ye,xe)=>he(ye,xe,"previousSibling"),select:(ye,xe)=>{var Le,Ge;const mt=null!==(Ge=null!==(Le=P(xe))&&void 0!==Le?Le:u.root_element)&&void 0!==Ge?Ge:s;return tn(mt.querySelectorAll)?br(mt.querySelectorAll(ye)):[]},is:re,add:ce,create:fe,createHTML:(ye,xe,Le="")=>{let Ge="<"+ye;for(const mt in xe)lo(xe,mt)&&(Ge+=" "+mt+'="'+we(xe[mt])+'"');return Qr(Le)&&Zt(T.getVoidElements(),ye)?Ge+" />":Ge+">"+Le+"</"+ye+">"},createFragment:ye=>{const xe=s.createElement("div"),Le=s.createDocumentFragment();let Ge;for(Le.appendChild(xe),ye&&(xe.innerHTML=ye);Ge=xe.firstChild;)Le.appendChild(Ge);return Le.removeChild(xe),Le},remove:ze,setStyle:(ye,xe,Le)=>{de(ye,Ge=>{const mt=ge(Ge);qv(mt,xe,Le),u.update_styles&&Jg(k,mt)})},getStyle:K,setStyles:(ye,xe)=>{de(ye,Le=>{const Ge=ge(Le);sr(xe,(mt,at)=>{qv(Ge,at,mt)}),u.update_styles&&Jg(k,Ge)})},removeAllAttribs:ye=>de(ye,xe=>{const Le=xe.attributes;for(let Ge=Le.length-1;Ge>=0;Ge--)xe.removeAttributeNode(Le.item(Ge))}),setAttrib:V,setAttribs:_e,getAttrib:z,getPos:$,parseStyle:ye=>k.parse(ye),serializeStyle:(ye,xe)=>k.serialize(ye,xe),addStyle:ye=>{if(gt!==Cr.DOM&&s===document){if(d[ye])return;d[ye]=!0}let xe=s.getElementById("mceDefaultStyles");if(!xe){xe=s.createElement("style"),xe.id="mceDefaultStyles",xe.type="text/css";const Le=s.head;Le.firstChild?Le.insertBefore(xe,Le.firstChild):Le.appendChild(xe)}xe.styleSheet?xe.styleSheet.cssText+=ye:xe.appendChild(s.createTextNode(ye))},loadCSS:ye=>{ye||(ye=""),Se(ye.split(","),xe=>{m[xe]=!0,x.load(xe).catch(Qt)})},addClass:(ye,xe)=>{Qe(ye,xe,!0)},removeClass:(ye,xe)=>{Qe(ye,xe,!1)},hasClass:(ye,xe)=>{const Le=F(ye),Ge=xe.split(" ");return et(Le)&&lt(Ge,mt=>Pl(Le,mt))},toggleClass:Qe,show:ye=>{de(ye,xe=>Gu(ge(xe),"display"))},hide:ye=>{de(ye,xe=>Tv(ge(xe),"display","none"))},isHidden:ye=>{const xe=F(ye);return et(xe)&&ns(as(xe,"display"),"none")},uniqueId:ye=>(ye||"mce_")+v++,setHTML:Ne,getOuterHTML:ye=>{const xe=F(ye);return et(xe)?Bt(xe.dom)?xe.dom.outerHTML:(Le=>{const Ge=er("div"),mt=ge(Le.dom.cloneNode(!0));return q(Ge,mt),it(Ge)})(xe):""},setOuterHTML:(ye,xe)=>{de(ye,Le=>{Bt(Le)&&(Le.outerHTML=xe)})},decode:Xp.decode,encode:we,insertAfter:(ye,xe)=>{const Le=P(xe);return de(ye,Ge=>{const mt=Le?.parentNode,at=Le?.nextSibling;return mt&&(at?mt.insertBefore(Ge,at):mt.appendChild(Ge)),Ge})},replace:Xe,rename:(ye,xe)=>{if(ye.nodeName!==xe.toUpperCase()){const Le=fe(xe);return Xu(H(ye),Ge=>{V(Le,Ge.nodeName,z(ye,Ge.nodeName))}),Xe(Le,ye,!0),Le}return ye},findCommonAncestor:(ye,xe)=>{let Le=ye;for(;Le;){let Ge=xe;for(;Ge&&Le!==Ge;)Ge=Ge.parentNode;if(Le===Ge)break;Le=Le.parentNode}return!Le&&ye.ownerDocument?ye.ownerDocument.documentElement:Le},run:de,getAttribs:H,isEmpty:(ye,xe,Le)=>Jn(xe)?Ps(T,ye,{...Le,isContent:mt=>{const at=mt.nodeName.toLowerCase();return Boolean(xe[at])}}):Ps(T,ye,Le),createRng:Dt,nodeIndex:ah,split:(ye,xe,Le)=>{let Ge,mt,at=Dt();if(ye&&xe&&ye.parentNode&&xe.parentNode){const Yt=ye.parentNode;return at.setStart(Yt,ah(ye)),at.setEnd(xe.parentNode,ah(xe)),Ge=at.extractContents(),at=Dt(),at.setStart(xe.parentNode,ah(xe)+1),at.setEnd(Yt,ah(ye)+1),mt=at.extractContents(),Yt.insertBefore(Xg(gt,Ge,T),ye),Yt.insertBefore(Le||xe,ye),Yt.insertBefore(Xg(gt,mt,T),ye),ze(ye),Le||xe}},bind:zt,unbind:Ut,fire:(ye,xe,Le)=>D.dispatch(ye,xe,Le),dispatch:(ye,xe,Le)=>D.dispatch(ye,xe,Le),getContentEditable:kt,getContentEditableParent:ye=>{const xe=U();let Le=null;for(let Ge=ye;Ge&&Ge!==xe&&(Le=kt(Ge),null===Le);Ge=Ge.parentNode);return Le},isEditable:ye=>{if(et(ye)){const xe=Bt(ye)?ye:ye.parentElement;return et(xe)&&Hu(xe)&&Jo(ge(xe))}return!1},destroy:()=>{if(C.length>0){let ye=C.length;for(;ye--;){const[xe,Le,Ge]=C[ye];D.unbind(xe,Le,Ge)}}sr(m,(ye,xe)=>{x.unload(xe),delete m[xe]})},isChildOf:(ye,xe)=>ye===xe||xe.contains(ye),dumpRng:ye=>"startContainer: "+ye.startContainer.nodeName+", startOffset: "+ye.startOffset+", endContainer: "+ye.endContainer.nodeName+", endOffset: "+ye.endOffset},Pt=((ye,xe,Le)=>{const Ge=xe.keep_values,at={style:{set:(Yt,Jt)=>{const sn=ge(Yt);Ge&&Kg(sn,__,Jt),go(sn,"style"),wt(Jt)&&Vu(sn,ye.parse(Jt))},get:Yt=>{const Jt=ge(Yt),sn=si(Jt,__)||si(Jt,"style");return ye.serialize(ye.parse(sn),Pn(Jt))}}};return Ge&&(at.href=at.src={set:(Yt,Jt,sn)=>{const xr=ge(Yt);tn(xe.url_converter)&&et(Jt)&&(Jt=xe.url_converter.call(xe.url_converter_scope||Le(),String(Jt),sn,Yt)),Kg(xr,"data-mce-"+sn,Jt),Kg(xr,sn,Jt)},get:(Yt,Jt)=>{const sn=ge(Yt);return si(sn,"data-mce-"+Jt)||si(sn,Jt)}}),at})(k,u,Ve(gt));return gt};Cr.DOM=Cr(document),Cr.nodeIndex=ah;const fA=Cr.DOM;class Yl{constructor(u={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=u}_setReferrerPolicy(u){this.settings.referrerPolicy=u}loadScript(u){return new Promise((d,f)=>{const m=fA;let v;const x=()=>{m.remove(C),v&&(v.onerror=v.onload=v=null)},C=m.uniqueId();v=document.createElement("script"),v.id=C,v.type="text/javascript",v.src=Ke._addCacheSuffix(u),this.settings.referrerPolicy&&m.setAttrib(v,"referrerpolicy",this.settings.referrerPolicy),v.onload=()=>{x(),d()},v.onerror=()=>{x(),f("Failed to load script: "+u)},(document.getElementsByTagName("head")[0]||document.body).appendChild(v)})}isDone(u){return 2===this.states[u]}markDone(u){this.states[u]=2}add(u){const d=this;return d.queue.push(u),void 0===d.states[u]&&(d.states[u]=0),new Promise((f,m)=>{d.scriptLoadedCallbacks[u]||(d.scriptLoadedCallbacks[u]=[]),d.scriptLoadedCallbacks[u].push({resolve:f,reject:m})})}load(u){return this.add(u)}remove(u){delete this.states[u],delete this.scriptLoadedCallbacks[u]}loadQueue(){const u=this.queue;return this.queue=[],this.loadScripts(u)}loadScripts(u){const d=this,f=(T,k)=>{cr(d.scriptLoadedCallbacks,k).each(D=>{Se(D,E=>E[T](k))}),delete d.scriptLoadedCallbacks[k]},m=T=>{const k=dt(T,D=>"rejected"===D.status);return k.length>0?Promise.reject(st(k,({reason:D})=>yn(D)?D:[D])):Promise.resolve()},v=T=>Promise.allSettled(Ee(T,k=>2===d.states[k]?(f("resolve",k),Promise.resolve()):3===d.states[k]?(f("reject",k),Promise.reject(k)):(d.states[k]=1,d.loadScript(k).then(()=>{d.states[k]=2,f("resolve",k);const D=d.queue;return D.length>0?(d.queue=[],v(D).then(m)):Promise.resolve()},()=>(d.states[k]=3,f("reject",k),Promise.reject(k)))))),x=T=>(d.loading=!0,v(T).then(k=>{d.loading=!1;const D=d.queueLoadedCallbacks.shift();return j.from(D).each(ur),m(k)})),C=zi(u);return d.loading?new Promise((T,k)=>{d.queueLoadedCallbacks.push(()=>{x(C).then(T,k)})}):x(C)}}Yl.ScriptLoader=new Yl;const Qg={},S_=Oo("en"),C_=()=>cr(Qg,S_.get()),cl={getData:()=>Et(Qg,s=>({...s})),setCode:s=>{s&&S_.set(s)},getCode:()=>S_.get(),add:(s,u)=>{let d=Qg[s];d||(Qg[s]=d={});const f=Ee(so(u),m=>m.toLowerCase());sr(u,(m,v)=>{const x=v.toLowerCase();x!==v&&((C,T)=>{const k=C.indexOf(T);return-1!==k&&C.indexOf(T,k+1)>k})(f,x)?(Zt(u,x)||(d[x]=m),d[v]=m):d[x]=m})},translate:s=>{const u=C_().getOr({}),d=C=>tn(C)?Object.prototype.toString.call(C):f(C)?"":""+C,f=C=>""===C||null==C,m=C=>{const T=d(C);return Zt(u,T)?d(u[T]):cr(u,T.toLowerCase()).map(d).getOr(T)},v=C=>C.replace(/{context:\w+}$/,"");if(f(s))return"";if(Ot(x=s)&&Zt(x,"raw"))return d(s.raw);var x,C;if(yn(C=s)&&C.length>1){const C=s.slice(1);return v(m(s[0]).replace(/\{([0-9]+)\}/g,(T,k)=>Zt(C,k)?d(C[k]):T))}return v(m(s))},isRtl:()=>C_().bind(s=>cr(s,"_dir")).exists(s=>"rtl"===s),hasCode:s=>Zt(Qg,s)},ei=()=>{const s=[],u={},d={},f=[],m=(T,k)=>{const D=dt(f,E=>E.name===T&&E.state===k);Se(D,E=>E.resolve())},v=T=>Zt(u,T),x=(T,k)=>{const D=cl.getCode();!D||k&&-1===(","+(k||"")+",").indexOf(","+D+",")||Yl.ScriptLoader.add(u[T]+"/langs/"+D+".js")},C=(T,k="added")=>"added"===k&&Zt(d,T)||"loaded"===k&&v(T)?Promise.resolve():new Promise(D=>{f.push({name:T,state:k,resolve:D})});return{items:s,urls:u,lookup:d,get:T=>{if(d[T])return d[T].instance},requireLangPack:(T,k)=>{!1!==ei.languageLoad&&(v(T)?x(T,k):C(T,"loaded").then(()=>x(T,k)))},add:(T,k)=>(s.push(k),d[T]={instance:k},m(T,"added"),k),remove:T=>{delete u[T],delete d[T]},createUrl:(T,k)=>wt(k)?wt(T)?{prefix:"",resource:k,suffix:""}:{prefix:T.prefix,resource:k,suffix:T.suffix}:k,load:(T,k)=>{if(u[T])return Promise.resolve();let D=wt(k)?k:k.prefix+k.resource+k.suffix;0!==D.indexOf("/")&&-1===D.indexOf("://")&&(D=ei.baseURL+"/"+D),u[T]=D.substring(0,D.lastIndexOf("/"));const E=()=>(m(T,"loaded"),Promise.resolve());return d[T]?E():Yl.ScriptLoader.add(D).then(E)},waitFor:C}};ei.languageLoad=!0,ei.baseURL="",ei.PluginManager=ei(),ei.ThemeManager=ei(),ei.ModelManager=ei();const Zv=(s,u)=>{let d=null;return{cancel:()=>{Hn(d)||(clearTimeout(d),d=null)},throttle:(...f)=>{Hn(d)&&(d=setTimeout(()=>{d=null,s.apply(null,f)},u))}}},M_=(s,u)=>{let d=null;const f=()=>{Hn(d)||(clearTimeout(d),d=null)};return{cancel:f,throttle:(...m)=>{f(),d=setTimeout(()=>{d=null,s.apply(null,m)},u)}}},Jp=Ve("mce-annotation"),qu=Ve("data-mce-annotation"),Fs=Ve("data-mce-annotation-uid"),jc=Ve("data-mce-annotation-active"),Qp=Ve("data-mce-annotation-classes"),em=Ve("data-mce-annotation-attrs"),hs=s=>u=>_n(u,s),$v=(s,u)=>{const d=s.selection.getRng(),f=ge(d.startContainer),m=ge(s.getBody()),v=u.fold(()=>"."+Jp(),C=>`[${qu()}="${C}"]`),x=li(f,d.startOffset).getOr(f);return is(x,v,hs(m)).bind(C=>Ia(C,`${Fs()}`).bind(T=>Ia(C,`${qu()}`).map(k=>{const D=ua(s,T);return{uid:T,name:k,elements:D}})))},Kv=(s,u)=>{return Jd(s,"data-mce-bogus")||(d=s,m=hs(u),zc(d,'[data-mce-bogus="all"]',m).isSome());var d,m},ua=(s,u)=>{const d=ge(s.getBody()),f=zn(d,`[${Fs()}="${u}"]`);return dt(f,m=>!Kv(m,d))},ca=(s,u)=>{const d=ge(s.getBody()),f=zn(d,`[${qu()}="${u}"]`),m={};return Se(f,v=>{if(!Kv(v,d)){const x=si(v,Fs()),C=cr(m,x).getOr([]);m[x]=C.concat([v])}}),m};let Jv=0;const sh=s=>{const u=(new Date).getTime(),d=Math.floor(1e9*Math.random());return Jv++,s+"_"+d+Jv+String(u)},Yc=(s,u)=>ge(s.dom.cloneNode(u)),Xl=s=>Yc(s,!1),tm=s=>Yc(s,!0),nm=(s,u,d=Mn)=>{const f=new fr(s,u),m=v=>{let x;do{x=f[v]()}while(x&&!Je(x)&&!d(x));return j.from(x).filter(Je)};return{current:()=>j.from(f.current()).filter(Je),next:()=>m("next"),prev:()=>m("prev"),prev2:()=>m("prev2")}},ql=(s,u)=>{const d=u||(m=>s.isBlock(m)||Rr(m)||dr(m)),f=(m,v,x,C)=>{if(Je(m)){const T=C(m,v,m.data);if(-1!==T)return j.some({container:m,offset:T})}return x().bind(T=>f(T.container,T.offset,x,C))};return{backwards:(m,v,x,C)=>{const T=nm(m,C??s.getRoot(),d);return f(m,v,()=>T.prev().map(k=>({container:k,offset:k.length})),x).getOrNull()},forwards:(m,v,x,C)=>{const T=nm(m,C??s.getRoot(),d);return f(m,v,()=>T.next().map(k=>({container:k,offset:0})),x).getOrNull()}}},Qv=((s,u)=>{const d=f=>s(f)?j.from(f.dom.nodeValue):j.none();return{get:f=>{if(!s(f))throw new Error("Can only get text value of a text node");return d(f).getOr("")},getOption:d,set:(f,m)=>{if(!s(f))throw new Error("Can only set raw text value of a text node");f.dom.nodeValue=m}}})(ai),rm=s=>Qv.get(s),lh=s=>{let u;return d=>(u=u||An(s,Z),Zt(u,Pn(d)))},uh=s=>Ko(s)&&"br"===Pn(s),gA=lh(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),T_=lh(["ul","ol","dl"]),Mr=lh(["li","dd","dt"]),ch=lh(["thead","tbody","tfoot"]),dl=lh(["td","th"]),ps=lh(["pre","script","textarea","style"]),fs=()=>{const s=er("br");return uo(s,"data-mce-bogus","1"),s},Ci=s=>{ae(s),q(s,fs())},Hr="\ufeff",ef=t_,Yi=s=>s.replace(/\uFEFF/g,""),dh=Bt,Gs=Je,Oa=s=>(Gs(s)&&(s=s.parentNode),dh(s)&&s.hasAttribute("data-mce-caret")),Zl=s=>Gs(s)&&ef(s.data),Uo=s=>Oa(s)||Zl(s),e0=s=>s.firstChild!==s.lastChild||!Rr(s.firstChild),hh=s=>{const u=s.container();return!!Je(u)&&(u.data.charAt(s.offset())===Hr||s.isAtStart()&&Zl(u.previousSibling))},om=s=>{const u=s.container();return!!Je(u)&&(u.data.charAt(s.offset()-1)===Hr||s.isAtEnd()&&Zl(u.nextSibling))},tf=s=>Gs(s)&&s.data[0]===Hr,gs=s=>Gs(s)&&s.data[s.data.length-1]===Hr,$l=s=>s&&s.hasAttribute("data-mce-caret")?((u=>{var d;const f=u.getElementsByTagName("br"),m=f[f.length-1];Gc(m)&&(null===(d=m.parentNode)||void 0===d||d.removeChild(m))})(s),s.removeAttribute("data-mce-caret"),s.removeAttribute("data-mce-bogus"),s.removeAttribute("style"),s.removeAttribute("data-mce-style"),s.removeAttribute("_moz_abspos"),s):null,mA=s=>Oa(s.startContainer),ph=Math.round,Xc=s=>s?{left:ph(s.left),top:ph(s.top),bottom:ph(s.bottom),right:ph(s.right),width:ph(s.width),height:ph(s.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Pa=(s,u)=>(s=Xc(s),u||(s.left=s.left+s.width),s.right=s.left,s.width=0,s),nf=(s,u,d)=>s>=0&&s<=Math.min(u.height,d.height)/2,im=(s,u)=>{const d=Math.min(u.height/2,s.height/2);return s.bottom-d<u.top||!(s.top>u.bottom)&&nf(u.top-s.bottom,s,u)},ms=(s,u)=>s.top>u.bottom||!(s.bottom<u.top)&&nf(u.bottom-s.top,s,u),Zu=(s,u,d)=>{const f=Math.max(Math.min(u,s.left+s.width),s.left),m=Math.max(Math.min(d,s.top+s.height),s.top);return Math.sqrt((u-f)*(u-f)+(d-m)*(d-m))},Kl=s=>{const u=s.startContainer,d=s.startOffset;return u===s.endContainer&&u.hasChildNodes()&&s.endOffset===d+1?u.childNodes[d]:null},To=(s,u)=>{if(Bt(s)&&s.hasChildNodes()){const d=s.childNodes;return d[(x=d.length-1,Math.min(Math.max(u,0),x))]}var x;return s},Hs=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),yA=s=>wt(s)&&s.charCodeAt(0)>=768&&Hs.test(s),vA=Ra,uE=dr,bA=Rr,t0=Je,cE=La(["script","style","textarea"]),n0=La(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Yn=La(["table"]),dE=Uo,Xi=s=>!dE(s)&&(t0(s)?!cE(s.parentNode):n0(s)||bA(s)||Yn(s)||A_(s)),A_=s=>{return!(Bt(u=s)&&"true"===u.getAttribute("unselectable"))&&uE(s);var u},xA=(s,u)=>Xi(s)&&((d,f)=>{for(let m=d.parentNode;m&&m!==f;m=m.parentNode){if(A_(m))return!1;if(vA(m))return!0}return!0})(s,u),jo=Bt,rf=Xi,k_=Fp("display","block table"),_A=Fp("float","left right"),hl=((...s)=>u=>{for(let d=0;d<s.length;d++)if(!s[d](u))return!1;return!0})(jo,rf,oa(_A)),hE=oa(Fp("white-space","pre pre-line pre-wrap")),am=Je,$n=Rr,I_=Cr.nodeIndex,r0=(s,u)=>u<0&&Bt(s)&&s.hasChildNodes()?void 0:To(s,u),Kn=s=>s?s.createRange():Cr.DOM.createRng(),D_=s=>wt(s)&&/[\r\n\t ]/.test(s),wA=s=>!!s.setStart&&!!s.setEnd,o0=s=>{const u=s.startContainer,d=s.startOffset;if(D_(s.toString())&&hE(u.parentNode)&&Je(u)){const f=u.data;if(D_(f[d-1])||D_(f[d+1]))return!0}return!1},N_=s=>0===s.left&&0===s.right&&0===s.top&&0===s.bottom,$u=s=>{var u;let d;const f=s.getClientRects();return d=Xc(f.length>0?f[0]:s.getBoundingClientRect()),!wA(s)&&$n(s)&&N_(d)?(m=>{const v=m.ownerDocument,x=Kn(v),C=v.createTextNode(Ro),T=m.parentNode;T.insertBefore(C,m),x.setStart(C,0),x.setEnd(C,1);const k=Xc(x.getBoundingClientRect());return T.removeChild(C),k})(s):N_(d)&&wA(s)&&null!==(u=(m=>{const x=m.endContainer,C=m.startOffset,T=m.endOffset;if(m.startContainer===x&&Je(x)&&0===C&&1===T){const k=m.cloneRange();return k.setEndAfter(x),$u(k)}return null})(s))&&void 0!==u?u:d},qc=(s,u)=>{const d=Pa(s,u);return d.width=1,d.right=d.left+1,d},Oe=(s,u,d)=>{const f=()=>(d||(d=(m=>{const v=[],x=D=>{var E,P;0!==D.height&&(v.length>0&&(E=D).left===(P=v[v.length-1]).left&&E.top===P.top&&E.bottom===P.bottom&&E.right===P.right||v.push(D))},C=(D,E)=>{const P=Kn(D.ownerDocument);if(E<D.data.length){if(yA(D.data[E]))return;if(yA(D.data[E-1])&&(P.setStart(D,E),P.setEnd(D,E+1),!o0(P)))return void x(qc($u(P),!1))}E>0&&(P.setStart(D,E-1),P.setEnd(D,E),o0(P)||x(qc($u(P),!1))),E<D.data.length&&(P.setStart(D,E),P.setEnd(D,E+1),o0(P)||x(qc($u(P),!0)))},T=m.container(),k=m.offset();if(am(T))return C(T,k),v;if(jo(T))if(m.isAtEnd()){const D=r0(T,k);am(D)&&C(D,D.data.length),hl(D)&&!$n(D)&&x(qc($u(D),!1))}else{const D=r0(T,k);if(am(D)&&C(D,0),hl(D)&&m.isAtEnd())return x(qc($u(D),!1)),v;const E=r0(m.container(),m.offset()-1);hl(E)&&!$n(E)&&(k_(E)||k_(D)||!hl(D))&&x(qc($u(E),!1)),hl(D)&&x(qc($u(D),!0))}return v})(Oe(s,u))),d);return{container:Ve(s),offset:Ve(u),toRange:()=>{const m=Kn(s.ownerDocument);return m.setStart(s,u),m.setEnd(s,u),m},getClientRects:f,isVisible:()=>f().length>0,isAtStart:()=>(am(s),0===u),isAtEnd:()=>am(s)?u>=s.data.length:u>=s.childNodes.length,isEqual:m=>m&&s===m.container()&&u===m.offset(),getNode:m=>r0(s,m?u-1:u)}};Oe.fromRangeStart=s=>Oe(s.startContainer,s.startOffset),Oe.fromRangeEnd=s=>Oe(s.endContainer,s.endOffset),Oe.after=s=>Oe(s.parentNode,I_(s)+1),Oe.before=s=>Oe(s.parentNode,I_(s)),Oe.isAbove=(s,u)=>Kt(bn(u.getClientRects()),Br(s.getClientRects()),im).getOr(!1),Oe.isBelow=(s,u)=>Kt(Br(u.getClientRects()),bn(s.getClientRects()),ms).getOr(!1),Oe.isAtStart=s=>!!s&&s.isAtStart(),Oe.isAtEnd=s=>!!s&&s.isAtEnd(),Oe.isTextPosition=s=>!!s&&Je(s.container()),Oe.isElementPosition=s=>!Oe.isTextPosition(s);const sm=(s,u)=>{Je(u)&&0===u.data.length&&s.remove(u)},i0=(s,u,d)=>{var f,v;Wu(d)?((f,m,v)=>{const x=j.from(v.firstChild),C=j.from(v.lastChild);m.insertNode(v),x.each(T=>sm(f,T.previousSibling)),C.each(T=>sm(f,T.nextSibling))})(s,u,d):(f=s,u.insertNode(v=d),sm(f,v.previousSibling),sm(f,v.nextSibling))},Ws=Je,E_=Gc,a0=Cr.nodeIndex,cn=s=>{const u=s.parentNode;return E_(u)?cn(u):u},lm=s=>s?rl(s.childNodes,(u,d)=>(E_(d)&&"BR"!==d.nodeName?u=u.concat(lm(d)):u.push(d),u),[]):[],L_=s=>u=>s===u,R_=s=>(Ws(s)?"text()":s.nodeName.toLowerCase())+"["+(u=>{let d,f;d=lm(cn(u)),f=Nl(d,L_(u),u),d=d.slice(0,f+1);const m=rl(d,(v,x,C)=>(Ws(x)&&Ws(d[C-1])&&v++,v),0);return d=Fi(d,La([u.nodeName])),f=Nl(d,L_(u),u),f-m})(s)+"]",O_=(s,u)=>{let d,f=[],m=u.container(),v=u.offset();if(Ws(m))d=((C,T)=>{let k=C;for(;(k=k.previousSibling)&&Ws(k);)T+=k.data.length;return T})(m,v);else{const C=m.childNodes;v>=C.length?(d="after",v=C.length-1):d="before",m=C[v]}f.push(R_(m));let x=((C,T,k)=>{const D=[];for(let E=T.parentNode;E&&E!==C;E=E.parentNode)D.push(E);return D})(s,m);return x=Fi(x,oa(Gc)),f=f.concat(Vi(x,C=>R_(C))),f.reverse().join("/")+","+d},s0=(s,u)=>{if(!u)return null;const d=u.split(","),f=d[0].split("/"),m=d.length>1?d[1]:"before",v=rl(f,(x,C)=>{const T=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(C);return T?("text()"===T[1]&&(T[1]="#text"),((k,D,E)=>{let P=lm(k);return P=Fi(P,(F,z)=>!Ws(F)||!Ws(P[z-1])),P=Fi(P,La([D])),P[E]})(x,T[1],parseInt(T[2],10))):null},s);if(!v)return null;if(!Ws(v)&&v.parentNode){let x;return x="after"===m?a0(v)+1:a0(v),Oe(v.parentNode,x)}return((x,C)=>{let T=x,k=0;for(;Ws(T);){const D=T.data.length;if(C>=k&&C<=k+D){x=T,C-=k;break}if(!Ws(T.nextSibling)){x=T,C=D;break}k+=D,T=T.nextSibling}return Ws(x)&&C>x.data.length&&(C=x.data.length),Oe(x,C)})(v,parseInt(m,10))},ui=dr,of=(s,u,d,f,m)=>{const v=m?f.startContainer:f.endContainer;let x=m?f.startOffset:f.endOffset;const C=[],T=s.getRoot();if(Je(v))C.push(d?((k,D,E)=>{let P=k(D.data.slice(0,E)).length;for(let F=D.previousSibling;F&&Je(F);F=F.previousSibling)P+=k(F.data).length;return P})(u,v,x):x);else{let k=0;const D=v.childNodes;x>=D.length&&D.length&&(k=1,x=Math.max(0,D.length-1)),C.push(s.nodeIndex(D[x],d)+k)}for(let k=v;k&&k!==T;k=k.parentNode)C.push(s.nodeIndex(k,d));return C},P_=(s,u,d)=>{let f=0;return Ke.each(s.select(u),m=>"all"===m.getAttribute("data-mce-bogus")?void 0:m!==d&&void f++),f},Zc=(s,u)=>{let d=u?s.startContainer:s.endContainer,f=u?s.startOffset:s.endOffset;if(Bt(d)&&"TR"===d.nodeName){const m=d.childNodes;d=m[Math.min(u?f:f-1,m.length-1)],d&&(f=u?0:d.childNodes.length,u?s.setStart(d,f):s.setEnd(d,f))}},um=s=>(Zc(s,!0),Zc(s,!1),s),af=(s,u)=>{if(Bt(s)&&(s=To(s,u),ui(s)))return s;if(Uo(s)){Je(s)&&Oa(s)&&(s=s.parentNode);let d=s.previousSibling;if(ui(d)||(d=s.nextSibling,ui(d)))return d}},cm=(s,u,d)=>{const f=d.getNode(),m=d.getRng();if("IMG"===f.nodeName||ui(f)){const x=f.nodeName;return{name:x,index:P_(d.dom,x,f)}}const v=af((x=m).startContainer,x.startOffset)||af(x.endContainer,x.endOffset);var x;if(v){const x=v.tagName;return{name:x,index:P_(d.dom,x,v)}}return((x,C,T,k)=>{const D=C.dom,E=of(D,x,T,k,!0),P=C.isForward(),F=mA(k)?{isFakeCaret:!0}:{};return C.isCollapsed()?{start:E,forward:P,...F}:{start:E,end:of(D,x,T,k,!1),forward:P,...F}})(s,d,u,m)},sf=(s,u,d)=>{const f={"data-mce-type":"bookmark",id:u,style:"overflow:hidden;line-height:0px"};return d?s.create("span",f,"&#xFEFF;"):s.create("span",f)},fh=(s,u)=>{const d=s.dom;let f=s.getRng();const m=d.uniqueId(),v=s.isCollapsed(),x=s.getNode(),C=x.nodeName,T=s.isForward();if("IMG"===C)return{name:C,index:P_(d,C,x)};const k=um(f.cloneRange());if(!v){k.collapse(!1);const E=sf(d,m+"_end",u);i0(d,k,E)}f=um(f),f.collapse(!0);const D=sf(d,m+"_start",u);return i0(d,f,D),s.moveToBookmark({id:m,keep:!0,forward:T}),{id:m,forward:T}},lf=Pe(cm,Ir,!0),B_=s=>{const u=v=>v(s),d=Ve(s),f=()=>m,m={tag:!0,inner:s,fold:(v,x)=>x(s),isValue:Z,isError:Mn,map:v=>ci.value(v(s)),mapError:f,bind:u,exists:u,forall:u,getOr:d,or:f,getOrThunk:d,orThunk:f,getOrDie:d,each:v=>{v(s)},toOptional:()=>j.some(s)};return m},z_=s=>{const u=()=>d,d={tag:!1,inner:s,fold:(f,m)=>f(s),isValue:Mn,isError:Z,map:u,mapError:f=>ci.error(f(s)),bind:u,exists:Mn,forall:Z,getOr:Ir,or:Ir,getOrThunk:Kr,orThunk:Kr,getOrDie:$t(String(s)),each:Qt,toOptional:j.none};return d},ci={value:B_,error:z_,fromOption:(s,u)=>s.fold(()=>z_(u),B_)},pl=s=>{if(!yn(s))throw new Error("cases must be an array");if(0===s.length)throw new Error("there must be at least one case");const u=[],d={};return Se(s,(f,m)=>{const v=so(f);if(1!==v.length)throw new Error("one and only one name per case");const x=v[0],C=f[x];if(void 0!==d[x])throw new Error("duplicate key detected:"+x);if("cata"===x)throw new Error("cannot have a case named cata (sorry)");if(!yn(C))throw new Error("case arguments must be an array");u.push(x),d[x]=(...T)=>{const k=T.length;if(k!==C.length)throw new Error("Wrong number of arguments to case "+x+". Expected "+C.length+" ("+C+"), got "+k);return{fold:(...D)=>{if(D.length!==s.length)throw new Error("Wrong number of arguments to fold. Expected "+s.length+", got "+D.length);return D[m].apply(null,T)},match:D=>{const E=so(D);if(u.length!==E.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+E.join(","));if(!lt(u,P=>Fe(E,P)))throw new Error("Not all branches were specified when using match. Specified: "+E.join(", ")+"\nRequired: "+u.join(", "));return D[x].apply(null,T)},log:D=>{console.log(D,{constructors:u,constructor:x,params:T})}}}}),d};pl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const pE=s=>"inline-command"===s.type||"inline-format"===s.type,fE=s=>"block-command"===s.type||"block-format"===s.type,SA=s=>{var u;const d=m=>ci.error({message:m,pattern:s}),f=(m,v,x)=>{if(void 0!==s.format){let C;if(yn(s.format)){if(!lt(s.format,wt))return d(m+" pattern has non-string items in the `format` array");C=s.format}else{if(!wt(s.format))return d(m+" pattern has non-string `format` parameter");C=[s.format]}return ci.value(v(C))}return void 0!==s.cmd?wt(s.cmd)?ci.value(x(s.cmd,s.value)):d(m+" pattern has non-string `cmd` parameter"):d(m+" pattern is missing both `format` and `cmd` parameters")};if(!Ot(s))return d("Raw pattern is not an object");if(!wt(s.start))return d("Raw pattern is missing `start` parameter");if(void 0!==s.end){if(!wt(s.end))return d("Inline pattern has non-string `end` parameter");if(0===s.start.length&&0===s.end.length)return d("Inline pattern has empty `start` and `end` parameters");let m=s.start,v=s.end;return 0===v.length&&(v=m,m=""),f("Inline",x=>({type:"inline-format",start:m,end:v,format:x}),(x,C)=>({type:"inline-command",start:m,end:v,cmd:x,value:C}))}if(void 0!==s.replacement)return wt(s.replacement)?0===s.start.length?d("Replacement pattern has empty `start` parameter"):ci.value({type:"inline-command",start:"",end:s.start,cmd:"mceInsertContent",value:s.replacement}):d("Replacement pattern has non-string `replacement` parameter");{const m=null!==(u=s.trigger)&&void 0!==u?u:"space";return 0===s.start.length?d("Block pattern has empty `start` parameter"):f("Block",v=>({type:"block-format",start:s.start,format:v[0],trigger:m}),(v,x)=>({type:"block-command",start:s.start,cmd:v,value:x,trigger:m}))}},Jl=s=>dt(s,fE),dm=s=>dt(s,pE),hm=(s,u)=>({...s,blockPatterns:dt(s.blockPatterns,d=>{return("block-command"===(f=d).type||"block-format"===f.type)&&f.trigger===u;var f})}),$c=s=>{const u=(d=>{const f=[],m=[];return Se(d,v=>{v.fold(x=>{f.push(x)},x=>{m.push(x)})}),{errors:f,values:m}})(Ee(s,SA));return Se(u.errors,d=>console.error(d.message,d.pattern)),u.values},l0=Eo().deviceType,CA=l0.isTouch(),Ku=Cr.DOM,Ql=s=>Fn(s,RegExp),At=s=>u=>u.options.get(s),uf=s=>wt(s)||Ot(s),V_=(s,u="")=>d=>{const f=wt(d);if(f){if(-1!==d.indexOf("=")){const m=(v=>{const x=v.indexOf("=")>0?v.split(/[;,](?![^=;,]*(?:[;,]|$))/):v.split(",");return Gr(x,(C,T)=>{const k=T.split("="),D=k[0],E=k.length>1?k[1]:D;return C[kn(D)]=kn(E),C},{})})(d);return{value:cr(m,s.id).getOr(u),valid:f}}return{value:d,valid:f}}return{valid:!1,message:"Must be a string."}},MA=At("iframe_attrs"),TA=At("doctype"),F_=At("document_base_url"),G_=At("body_id"),H_=At("body_class"),u0=At("content_security_policy"),AA=At("br_in_pre"),di=At("forced_root_block"),Us=At("forced_root_block_attrs"),mo=At("newline_behavior"),W_=At("br_newline_selector"),kA=At("no_newline_selector"),gE=At("keep_styles"),Mi=At("end_container_on_empty_block"),Kc=At("automatic_uploads"),cf=At("images_reuse_filename"),U_=At("images_replace_blob_uris"),j_=At("icons"),df=At("icons_url"),mE=At("images_upload_url"),IA=At("images_upload_base_path"),yE=At("images_upload_credentials"),DA=At("images_upload_handler"),Y_=At("content_css_cors"),hf=At("referrer_policy"),pm=At("language"),fm=At("language_url"),X_=At("indent_use_margin"),q_=At("indentation"),NA=At("content_css"),EA=At("content_style"),LA=At("font_css"),vE=At("directionality"),RA=At("inline_boundaries_selector"),Z_=At("object_resizing"),OA=At("resize_img_proportional"),PA=At("placeholder"),c0=At("event_root"),bE=At("service_message"),da=At("theme"),xE=At("theme_url"),gh=At("model"),BA=At("model_url"),mh=At("inline_boundaries"),yh=At("formats"),pf=At("preview_styles"),_E=At("format_empty_lines"),qi=At("format_noneditable_selector"),zA=At("custom_ui_selector"),vh=At("inline"),gm=At("hidden_input"),eu=At("submit_patch"),fl=At("add_form_submit_trigger"),d0=At("add_unload_trigger"),wE=At("custom_undo_redo_levels"),SE=At("disable_nodechange"),Ti=At("readonly"),CE=At("editable_root"),bh=At("content_css_cors"),mm=At("plugins"),ME=At("external_plugins"),Zi=At("block_unsupported_drop"),TE=At("visual"),$i=At("visual_table_class"),VA=At("visual_anchor_class"),FA=At("iframe_aria_text"),Yo=At("setup"),Ba=At("init_instance_callback"),AE=At("urlconverter_callback"),GA=At("auto_focus"),ff=At("browser_spellcheck"),kE=At("protect"),ym=At("paste_block_drop"),xh=At("paste_data_images"),HA=At("paste_preprocess"),gf=At("paste_postprocess"),$_=At("newdocument_content"),_h=At("paste_webkit_styles"),wh=At("paste_remove_styles_if_webkit"),h0=At("paste_merge_formats"),p0=At("smart_paste"),f0=At("paste_as_text"),IE=At("paste_tab_spaces"),WA=At("allow_html_data_urls"),UA=At("text_patterns"),mf=At("text_patterns_lookup"),g0=At("noneditable_class"),hr=At("editable_class"),to=At("noneditable_regexp"),yf=At("preserve_cdata"),Jc=At("highlight_on_focus"),K_=At("xss_sanitization"),vm=At("init_content_sync"),js=s=>Ke.explode(s.options.get("images_file_types")),m0=At("table_tab_navigation"),y0=At("details_initial_state"),J_=At("details_serialized_state"),Q_=At("sandbox_iframes"),ew=s=>s.options.get("sandbox_iframes_exclusions"),jA=At("convert_unsafe_embeds"),Ys=At("license_key"),v0=At("api_key"),bm=Bt,b0=Je,tw=s=>{const u=s.parentNode;u&&u.removeChild(s)},za=s=>{const u=Yi(s);return{count:s.length-u.length,text:u}},x0=s=>{let u;for(;-1!==(u=s.data.lastIndexOf(Hr));)s.deleteData(u,1)},Sh=(s,u)=>(Va(s),u),Va=s=>{bm(s)&&Uo(s)&&(e0(s)?s.removeAttribute("data-mce-caret"):tw(s)),b0(s)&&(x0(s),0===s.data.length&&tw(s))},gl=dr,w0=ll,YA=ls,vf=(s,u,d)=>{const f=Pa(u.getBoundingClientRect(),d);let m,v;if("BODY"===s.tagName){const C=s.ownerDocument.documentElement;m=s.scrollLeft||C.scrollLeft,v=s.scrollTop||C.scrollTop}else{const C=s.getBoundingClientRect();m=s.scrollLeft-C.left,v=s.scrollTop-C.top}f.left+=m,f.right+=m,f.top+=v,f.bottom+=v,f.width=1;let x=u.offsetWidth-u.clientWidth;return x>0&&(d&&(x*=-1),f.left+=x,f.right+=x),f},rw=()=>On.browser.isFirefox(),tu=s=>gl(s)||w0(s),Ju=s=>(tu(s)||Wl(s)&&rw())&&Op(ge(s)).exists(Jo),XA=Ra,xm=dr,bf=ll,ow=Fp("display","block table table-cell table-caption list-item"),Qu=Uo,Qc=Oa,S0=Bt,qA=Je,iw=Xi,Ao=s=>s>0,fo=s=>s<0,Or=(s,u)=>{let d;for(;d=s(u);)if(!Qc(d))return d;return null},ed=(s,u,d,f,m)=>{const v=new fr(s,f),x=xm(s)||Qc(s);let C;if(fo(u)){if(x&&(C=Or(v.prev.bind(v),!0),d(C)))return C;for(;C=Or(v.prev.bind(v),m);)if(d(C))return C}if(Ao(u)){if(x&&(C=Or(v.next.bind(v),!0),d(C)))return C;for(;C=Or(v.next.bind(v),m);)if(d(C))return C}return null},ec=(s,u)=>{for(;s&&s!==u;){if(ow(s))return s;s=s.parentNode}return null},ml=(s,u,d)=>ec(s.container(),d)===ec(u.container(),d),C0=(s,u)=>{if(!u)return j.none();const d=u.container(),f=u.offset();return S0(d)?j.from(d.childNodes[f+s]):j.none()},aw=(s,u)=>{var d;const f=(null!==(d=u.ownerDocument)&&void 0!==d?d:document).createRange();return s?(f.setStartBefore(u),f.setEndBefore(u)):(f.setStartAfter(u),f.setEndAfter(u)),f},sw=(s,u,d)=>ec(u,s)===ec(d,s),Ch=(s,u,d)=>{const f=s?"previousSibling":"nextSibling";let m=d;for(;m&&m!==u;){let v=m[f];if(v&&Qu(v)&&(v=v[f]),xm(v)||bf(v)){if(sw(u,v,m))return v;break}if(iw(v))break;m=m.parentNode}return null},xf=Pe(aw,!0),_f=Pe(aw,!1),_m=(s,u,d)=>{let f;const m=Pe(Ch,!0,u),v=Pe(Ch,!1,u),x=d.startContainer,C=d.startOffset;if(Oa(x)){const T=qA(x)?x.parentNode:x,k=T.getAttribute("data-mce-caret");if("before"===k&&(f=T.nextSibling,Ju(f)))return xf(f);if("after"===k&&(f=T.previousSibling,Ju(f)))return _f(f)}if(!d.collapsed)return d;if(Je(x)){if(Qu(x)){if(1===s){if(f=v(x),f)return xf(f);if(f=m(x),f)return _f(f)}if(-1===s){if(f=m(x),f)return _f(f);if(f=v(x),f)return xf(f)}return d}if(gs(x)&&C>=x.data.length-1)return 1===s&&(f=v(x),f)?xf(f):d;if(tf(x)&&C<=1)return-1===s&&(f=m(x),f)?_f(f):d;if(C===x.data.length)return f=v(x),f?xf(f):d;if(0===C)return f=m(x),f?_f(f):d}return d},M0=(s,u)=>C0(s?0:-1,u).filter(xm),wm=(s,u,d)=>{const f=_m(s,u,d);return-1===s?Oe.fromRangeStart(f):Oe.fromRangeEnd(f)},wf=s=>j.from(s.getNode()).map(ge),Sm=(s,u)=>{let d=u;for(;d=s(d);)if(d.isVisible())return d;return d},T0=(s,u)=>{const d=ml(s,u);return!(d||!Rr(s.getNode()))||d};var ko,s;(s=ko||(ko={}))[s.Backwards=-1]="Backwards",s[s.Forwards=1]="Forwards";const DE=dr,nu=Je,lw=Bt,uw=Rr,Sf=Xi,gr=s=>{return n0(s)||!!A_(u=s)&&!Gr(br(u.getElementsByTagName("*")),(d,f)=>d||vA(f),!1);var u},A0=xA,Mh=(s,u)=>s.hasChildNodes()&&u<s.childNodes.length?s.childNodes[u]:null,tc=(s,u)=>{if(Ao(s)){if(Sf(u.previousSibling)&&!nu(u.previousSibling))return Oe.before(u);if(nu(u))return Oe(u,0)}if(fo(s)){if(Sf(u.nextSibling)&&!nu(u.nextSibling))return Oe.after(u);if(nu(u))return Oe(u,u.data.length)}return fo(s)?uw(u)?Oe.before(u):Oe.after(u):Oe.before(u)},Cf=(s,u,d)=>{let f,m,v,x;if(!lw(d)||!u)return null;if(u.isEqual(Oe.after(d))&&d.lastChild){if(x=Oe.after(d.lastChild),fo(s)&&Sf(d.lastChild)&&lw(d.lastChild))return uw(d.lastChild)?Oe.before(d.lastChild):x}else x=u;const C=x.container();let T=x.offset();if(nu(C)){if(fo(s)&&T>0)return Oe(C,--T);if(Ao(s)&&T<C.length)return Oe(C,++T);f=C}else{if(fo(s)&&T>0&&(m=Mh(C,T-1),Sf(m)))return!gr(m)&&(v=ed(m,s,A0,m),v)?nu(v)?Oe(v,v.data.length):Oe.after(v):nu(m)?Oe(m,m.data.length):Oe.before(m);if(Ao(s)&&T<C.childNodes.length&&(m=Mh(C,T),Sf(m)))return uw(m)?((D,E)=>{const P=E.nextSibling;return P&&Sf(P)?nu(P)?Oe(P,0):Oe.before(P):Cf(ko.Forwards,Oe.after(E),D)})(d,m):!gr(m)&&(v=ed(m,s,A0,m),v)?nu(v)?Oe(v,0):Oe.before(v):nu(m)?Oe(m,0):Oe.after(m);f=m||x.getNode()}if(f&&(Ao(s)&&x.isAtEnd()||fo(s)&&x.isAtStart())&&(f=ed(f,s,Z,d,!0),A0(f,d)))return tc(s,f);m=f&&ed(f,s,A0,d);const k=ia(dt(((D,E)=>{const P=[];let F=D;for(;F&&F!==E;)P.push(F),F=F.parentNode;return P})(C,d),DE));return!k||m&&k.contains(m)?m?tc(s,m):null:(x=Ao(s)?Oe.after(k):Oe.before(k),x)},Xs=s=>({next:u=>Cf(ko.Forwards,u,s),prev:u=>Cf(ko.Backwards,u,s)}),Mf=s=>Oe.isTextPosition(s)?0===s.offset():Xi(s.getNode()),Cm=s=>{if(Oe.isTextPosition(s)){const u=s.container();return s.offset()===u.data.length}return Xi(s.getNode(!0))},k0=(s,u)=>!Oe.isTextPosition(s)&&!Oe.isTextPosition(u)&&s.getNode()===u.getNode(!0),Fa=(s,u,d)=>{const f=Xs(u);return j.from(s?f.next(d):f.prev(d))},td=(s,u,d)=>Fa(s,u,d).bind(f=>{return ml(d,f,u)&&(v=d,x=f,s?!k0(v,x)&&(Oe.isTextPosition(C=v)||!Rr(C.getNode()))&&Cm(v)&&Mf(x):!k0(x,v)&&Mf(v)&&Cm(x))?Fa(s,u,f):j.some(f);var v,x,C}),I0=(s,u,d,f)=>td(s,u,d).bind(m=>f(m)?I0(s,u,m,f):j.some(m)),Th=(s,u)=>{const d=s?u.firstChild:u.lastChild;return Je(d)?j.some(Oe(d,s?0:d.data.length)):d?Xi(d)?j.some(s?Oe.before(d):Rr(f=d)?Oe.before(f):Oe.after(f)):((m,v,x)=>{const C=m?Oe.before(x):Oe.after(x);return Fa(m,v,C)})(s,u,d):j.none();var f},Ai=Pe(Fa,!0),Ki=Pe(Fa,!1),Io=Pe(Th,!0),ys=Pe(Th,!1),Ah="_mce_caret",Ji=s=>Bt(s)&&s.id===Ah,nd=(s,u)=>{let d=u;for(;d&&d!==s;){if(Ji(d))return d;d=d.parentNode}return null},D0=s=>Zt(s,"name"),cw=s=>Ke.isArray(s.start),hi=s=>!(!D0(s)&&Ar(s.forward))||s.forward,kh=(s,u)=>(Bt(u)&&s.isBlock(u)&&!u.innerHTML&&(u.innerHTML='<br data-mce-bogus="1" />'),u),NE=(s,u)=>ys(s).fold(Mn,d=>(u.setStart(d.container(),d.offset()),u.setEnd(d.container(),d.offset()),!0)),Tf=(s,u,d)=>!(u.hasChildNodes()||!nd(s,u)||(((f,m)=>{var v;const x=(null!==(v=f.ownerDocument)&&void 0!==v?v:document).createTextNode(Hr);f.appendChild(x),m.setStart(x,0),m.setEnd(x,0)})(u,d),0)),dw=(s,u,d,f)=>{const m=d[u?"start":"end"],v=s.getRoot();if(m){let x=v,C=m[0];for(let T=m.length-1;x&&T>=1;T--){const k=x.childNodes;if(Tf(v,x,f))return!0;if(m[T]>k.length-1)return!!Tf(v,x,f)||NE(x,f);x=k[m[T]]}Je(x)&&(C=Math.min(m[0],x.data.length)),Bt(x)&&(C=Math.min(m[0],x.childNodes.length)),u?f.setStart(x,C):f.setEnd(x,C)}return!0},N0=s=>Je(s)&&s.data.length>0,E0=(s,u,d)=>{const f=s.get(d.id+"_"+u),m=f?.parentNode,v=d.keep;if(f&&m){let x,C;if("start"===u?v?f.hasChildNodes()?(x=f.firstChild,C=1):N0(f.nextSibling)?(x=f.nextSibling,C=0):N0(f.previousSibling)?(x=f.previousSibling,C=f.previousSibling.data.length):(x=m,C=s.nodeIndex(f)+1):(x=m,C=s.nodeIndex(f)):v?f.hasChildNodes()?(x=f.firstChild,C=1):N0(f.previousSibling)?(x=f.previousSibling,C=f.previousSibling.data.length):(x=m,C=s.nodeIndex(f)):(x=m,C=s.nodeIndex(f)),!v){const T=f.previousSibling,k=f.nextSibling;let D;for(Ke.each(Ke.grep(f.childNodes),E=>{Je(E)&&(E.data=E.data.replace(/\uFEFF/g,""))});D=s.get(d.id+"_"+u);)s.remove(D,!0);if(Je(k)&&Je(T)&&!On.browser.isOpera()){const E=T.data.length;T.appendData(k.data),s.remove(k),x=T,C=E}}return j.some(Oe(x,C))}return j.none()},Af=(s,u,d)=>((f,m,v=!1)=>{return 2===m?cm(Yi,v,f):3===m?(x=>{const C=x.getRng();return{start:O_(x.dom.getRoot(),Oe.fromRangeStart(C)),end:O_(x.dom.getRoot(),Oe.fromRangeEnd(C)),forward:x.isForward()}})(f):m?{rng:(x=f).getRng(),forward:x.isForward()}:fh(f,!1);var x})(s,u,d),L0=(s,u)=>{((d,f)=>{const m=d.dom;if(f){if(cw(f))return((v,x)=>{const C=v.createRng();return dw(v,!0,x,C)&&dw(v,!1,x,C)?j.some({range:C,forward:hi(x)}):j.none()})(m,f);if(wt(f.start))return((v,x)=>{const C=j.from(s0(v.getRoot(),x.start)),T=j.from(s0(v.getRoot(),x.end));return Kt(C,T,(k,D)=>{const E=v.createRng();return E.setStart(k.container(),k.offset()),E.setEnd(D.container(),D.offset()),{range:E,forward:hi(x)}})})(m,f);if(Zt(f,"id"))return((v,x)=>{const C=E0(v,"start",x),T=E0(v,"end",x);return Kt(C,T.or(C),(k,D)=>{const E=v.createRng();return E.setStart(kh(v,k.container()),k.offset()),E.setEnd(kh(v,D.container()),D.offset()),{range:E,forward:hi(x)}})})(m,f);if(D0(f))return((v,x)=>j.from(v.select(x.name)[x.index]).map(C=>{const T=v.createRng();return T.selectNode(C),{range:T,forward:!0}}))(m,f);if((v=>Zt(v,"rng"))(f))return j.some({range:f.rng,forward:hi(f)})}return j.none()})(s,u).each(({range:d,forward:f})=>{s.setRng(d,f)})},ki=s=>Bt(s)&&"SPAN"===s.tagName&&"bookmark"===s.getAttribute("data-mce-type"),Ih=(Mm=Ro,s=>Mm===s);var Mm;const nc=s=>""!==s&&-1!==" \f\n\r\t\v".indexOf(s),hw=s=>!nc(s)&&!Ih(s)&&!t_(s),R0=s=>{const u=[];if(s)for(let d=0;d<s.rangeCount;d++)u.push(s.getRangeAt(d));return u},pw=(s,u)=>{const d=zn(u,"td[data-mce-selected],th[data-mce-selected]");return d.length>0?d:dt(st(s,v=>{const x=Kl(v);return x?[ge(x)]:[]}),dl)},Dh=s=>pw(R0(s.selection.getSel()),ge(s.getBody())),kf=(s,u)=>zc(s,"table",u),fw=s=>Pu(s).fold(Ve([s]),u=>[s].concat(fw(u))),O0=s=>Fl(s).fold(Ve([s]),u=>"br"===Pn(u)?zl(u).map(d=>[s].concat(O0(d))).getOr([]):[s].concat(O0(u))),Tm=(s,u)=>Kt((d=>{const f=d.startContainer,m=d.startOffset;return Je(f)?0===m?j.some(ge(f)):j.none():j.from(f.childNodes[m]).map(ge)})(u),(d=>{const f=d.endContainer,m=d.endOffset;return Je(f)?m===f.data.length?j.some(ge(f)):j.none():j.from(f.childNodes[m-1]).map(ge)})(u),(d,f)=>{const m=Sr(fw(s),Pe(_n,d)),v=Sr(O0(s),Pe(_n,f));return m.isSome()&&v.isSome()}).getOr(!1),Am=(s,u,d,f)=>{const m=d,v=new fr(d,m),x=Lt(s.schema.getMoveCaretBeforeOnEnterElements(),(T,k)=>!Fe(["td","th","table"],k.toLowerCase()));let C=d;do{if(Je(C)&&0!==Ke.trim(C.data).length)return void(f?u.setStart(C,0):u.setEnd(C,C.data.length));if(x[C.nodeName])return void(f?u.setStartBefore(C):"BR"===C.nodeName?u.setEndBefore(C):u.setEndAfter(C))}while(C=f?v.next():v.prev());"BODY"===m.nodeName&&(f?u.setStart(m,0):u.setEnd(m,m.childNodes.length))},ru=s=>{const u=s.selection.getSel();return et(u)&&u.rangeCount>0},km=(s,u)=>{const d=Dh(s);d.length>0?Se(d,f=>{const m=f.dom,v=s.dom.createRng();v.setStartBefore(m),v.setEndAfter(m),u(v,!0)}):u(s.selection.getRng(),!1)},gw=(s,u,d)=>{const f=fh(s,u);d(f),s.moveToBookmark(f)},Nh=s=>kr(s?.nodeType),Im=s=>Bt(s)&&!ki(s)&&!Ji(s)&&!Gc(s),mw=(s,u,d)=>{const{selection:f,dom:m}=s,v=f.getNode(),x=dr(v);gw(f,!0,()=>{u()}),x&&dr(v)&&m.isChildOf(v,s.getBody())?s.selection.select(v):d(f.getStart())&&Eh(m,f)},Eh=(s,u)=>{var d,f;const m=u.getRng(),{startContainer:v,startOffset:x}=m;if(!((C,T)=>{if(Im(T)&&!/^(TD|TH)$/.test(T.nodeName)){const k=C.getAttrib(T,"data-mce-selected"),D=parseInt(k,10);return!isNaN(D)&&D>0}return!1})(s,u.getNode())&&Bt(v)){const C=v.childNodes,T=s.getRoot();let k;if(x<C.length){const D=C[x];k=new fr(D,null!==(d=s.getParent(D,s.isBlock))&&void 0!==d?d:T)}else{const D=C[C.length-1];k=new fr(D,null!==(f=s.getParent(D,s.isBlock))&&void 0!==f?f:T),k.next(!0)}for(let D=k.current();D;D=k.next()){if("false"===s.getContentEditable(D))return;if(Je(D)&&!rc(D))return m.setStart(D,0),void u.setRng(m)}}},Dm=(s,u,d)=>{if(s){const f=u?"nextSibling":"previousSibling";for(s=d?s:s[f];s;s=s[f])if(Bt(s)||!rc(s))return s}},If=(s,u)=>!!s.getTextBlockElements()[u.nodeName.toLowerCase()]||lr(s,u),Lh=(s,u,d)=>s.schema.isValidChild(u,d),rc=(s,u=!1)=>{if(et(s)&&Je(s)){const d=u?s.data.replace(/ /g,"\xa0"):s.data;return Fc(d)}return!1},P0=(s,u)=>{const d=s.dom;return Im(u)&&"false"===d.getContentEditable(u)&&((f,m)=>{const v="[data-mce-cef-wrappable]",x=qi(f),C=Qr(x)?v:`${v},${x}`;return xi(ge(m),C)})(s,u)&&0===d.select('[contenteditable="true"]',u).length},Ga=(s,u)=>tn(s)?s(u):(et(u)&&(s=s.replace(/%(\w+)/g,(d,f)=>u[f]||d)),s),xo=(s,u)=>(s=""+((s=s||"").nodeName||s),u=""+((u=u||"").nodeName||u),s.toLowerCase()===u.toLowerCase()),Df=(s,u)=>{if(rr(s))return null;{let d=String(s);return"color"!==u&&"backgroundColor"!==u||(d=oh(d)),"fontWeight"===u&&700===s&&(d="bold"),"fontFamily"===u&&(d=d.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),d}},rd=(s,u,d)=>{const f=s.getStyle(u,d);return Df(f,d)},oc=(s,u)=>{let d;return s.getParent(u,f=>!!Bt(f)&&(d=s.getStyle(f,"text-decoration"),!!d&&"none"!==d)),d},ic=(s,u,d)=>s.getParents(u,d,s.getRoot()),B0=(s,u,d)=>{const f=s.formatter.get(u);return et(f)&&_t(f,d)},ou=s=>lo(s,"block"),wn=s=>lo(s,"selector"),_o=s=>lo(s,"inline"),od=s=>wn(s)&&!1!==s.expand&&!_o(s),ZA=s=>(u=>{const d=[];let f=u;for(;f;){if(Je(f)&&f.data!==Hr||f.childNodes.length>1)return[];Bt(f)&&d.push(f),f=f.firstChild}return d})(s).length>0,z0=s=>Ji(s.dom)&&ZA(s.dom),Ii=ki,Di=ic,vs=rc,iu=If,ac=(s,u)=>{let d=u;for(;d;){if(Bt(d)&&s.getContentEditable(d))return"false"===s.getContentEditable(d)?d:u;d=d.parentNode}return u},yw=(s,u,d,f)=>{const m=u.data;if(s){for(let v=d;v>0;v--)if(f(m.charAt(v-1)))return v}else for(let v=d;v<m.length;v++)if(f(m.charAt(v)))return v;return-1},au=(s,u,d)=>yw(s,u,d,f=>Ih(f)||nc(f)),Nf=(s,u,d)=>yw(s,u,d,hw),Nm=(s,u,d,f,m,v)=>{let x;const C=s.getParent(d,s.isBlock)||u,T=(k,D,E)=>{const P=ql(s);return j.from((m?P.backwards:P.forwards)(k,D,(z,H)=>Ii(z.parentNode)?-1:(x=z,E(m,z,H)),C))};return T(d,f,au).bind(k=>v?T(k.container,k.offset+(m?-1:0),Nf):j.some(k)).orThunk(()=>x?j.some({container:x,offset:m?0:x.length}):j.none())},vw=(s,u,d,f,m)=>{const v=f[m];Je(f)&&Qr(f.data)&&v&&(f=v);const x=Di(s,f);for(let C=0;C<x.length;C++)for(let T=0;T<u.length;T++){const k=u[T];if((!et(k.collapsed)||k.collapsed===d.collapsed)&&wn(k)&&s.is(x[C],k.selector))return x[C]}return f},qs=(s,u,d,f)=>{var m;let v=d;const x=s.getRoot(),C=u[0];if(ou(C)&&(v=C.wrapper?null:s.getParent(d,C.block,x)),!v){const T=null!==(m=s.getParent(d,"LI,TD,TH,SUMMARY"))&&void 0!==m?m:x;v=s.getParent(Je(d)?d.parentNode:d,k=>k!==x&&iu(s.schema,k),T)}if(v&&ou(C)&&C.wrapper&&(v=Di(s,v,"ul,ol").reverse()[0]||v),!v)for(v=d;v&&v[f]&&!s.isBlock(v[f])&&(v=v[f],!xo(v,"br")););return v||d},bw=(s,u,d,f)=>{const m=d.parentNode;return!et(d[f])&&(!(m!==u&&!rr(m)&&!s.isBlock(m))||bw(s,u,m,f))},Em=(s,u,d,f,m)=>{let v=d;const x=m?"previousSibling":"nextSibling",C=s.getRoot();if(Je(d)&&!vs(d)&&(m?f>0:f<d.data.length))return d;for(;v;){if(!u[0].block_expand&&s.isBlock(v))return v;for(let k=v[x];k;k=k[x]){const D=Je(k)&&!bw(s,C,k,x);if(!Ii(k)&&(!Rr(T=k)||!T.getAttribute("data-mce-bogus")||T.nextSibling)&&!vs(k,D))return v}if(v===C||v.parentNode===C){d=v;break}v=v.parentNode}var T;return d},V0=s=>Ii(s.parentNode)||Ii(s),sc=(s,u,d,f=!1)=>{let{startContainer:m,startOffset:v,endContainer:x,endOffset:C}=u;const T=d[0];return Bt(m)&&m.hasChildNodes()&&(m=To(m,v),Je(m)&&(v=0)),Bt(x)&&x.hasChildNodes()&&(x=To(x,u.collapsed?C:C-1),Je(x)&&(C=x.data.length)),m=ac(s,m),x=ac(s,x),V0(m)&&(m=Ii(m)?m:m.parentNode,m=u.collapsed?m.previousSibling||m:m.nextSibling||m,Je(m)&&(v=u.collapsed?m.length:0)),V0(x)&&(x=Ii(x)?x:x.parentNode,x=u.collapsed?x.nextSibling||x:x.previousSibling||x,Je(x)&&(C=u.collapsed?0:x.length)),u.collapsed&&(Nm(s,s.getRoot(),m,v,!0,f).each(({container:k,offset:D})=>{m=k,v=D}),Nm(s,s.getRoot(),x,C,!1,f).each(({container:k,offset:D})=>{x=k,C=D})),(_o(T)||T.block_expand)&&(_o(T)&&Je(m)&&0!==v||(m=Em(s,d,m,v,!0)),_o(T)&&Je(x)&&C!==x.data.length||(x=Em(s,d,x,C,!1))),od(T)&&(m=vw(s,d,u,m,"previousSibling"),x=vw(s,d,u,x,"nextSibling")),(ou(T)||wn(T))&&(m=qs(s,d,m,"previousSibling"),x=qs(s,d,x,"nextSibling"),ou(T)&&(s.isBlock(m)||(m=Em(s,d,m,v,!0),Je(m)&&(v=0)),s.isBlock(x)||(x=Em(s,d,x,C,!1),Je(x)&&(C=x.data.length)))),Bt(m)&&m.parentNode&&(v=s.nodeIndex(m),m=m.parentNode),Bt(x)&&x.parentNode&&(C=s.nodeIndex(x)+1,x=x.parentNode),{startContainer:m,startOffset:v,endContainer:x,endOffset:C}},Ef=(s,u,d)=>{var f;const m=u.startOffset,v=To(u.startContainer,m),x=u.endOffset,C=To(u.endContainer,x-1),T=V=>{const U=V[0];Je(U)&&U===v&&m>=U.data.length&&V.splice(0,1);const $=V[V.length-1];return 0===x&&V.length>0&&$===C&&Je($)&&V.splice(V.length-1,1),V},k=(V,U,$)=>{const K=[];for(;V&&V!==$;V=V[U])K.push(V);return K},D=(V,U)=>s.getParent(V,$=>$.parentNode===U,U),E=(V,U,$)=>{const K=$?"nextSibling":"previousSibling";for(let te=V,re=te.parentNode;te&&te!==U;te=re){re=te.parentNode;const ue=k(te===V?te:te[K],K);ue.length&&($||ue.reverse(),d(T(ue)))}};if(v===C)return d(T([v]));const P=null!==(f=s.findCommonAncestor(v,C))&&void 0!==f?f:s.getRoot();if(s.isChildOf(v,C))return E(v,P,!0);if(s.isChildOf(C,v))return E(C,P);const F=D(v,P)||v,z=D(C,P)||C;E(v,F,!0);const H=k(F===v?F:F.nextSibling,"nextSibling",z===C?z.nextSibling:z);H.length&&d(T(H)),E(C,z)},$A=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],F0=(s,u,d,f,m,v)=>{const{uid:x=u,...C}=d;Ls(s,Jp()),uo(s,`${Fs()}`,x),uo(s,`${qu()}`,f);const{attributes:T={},classes:k=[]}=m(x,C);if(ka(s,T),D=s,Se(k,P=>{Ls(D,P)}),v){k.length>0&&uo(s,`${Qp()}`,k.join(","));const D=so(T);D.length>0&&uo(s,`${em()}`,D.join(","))}var D},Lm=(s,u,d,f,m)=>{const v=er("span",s);return F0(v,u,d,f,m,!1),v},xw=s=>{const u=(()=>{const v={};return{register:(x,C)=>{v[x]={name:x,settings:C}},lookup:x=>cr(v,x).map(C=>C.settings),getNames:()=>so(v)}})();((v,x)=>{const C=qu(),T=D=>j.from(D.attr(C)).bind(x.lookup),k=D=>{var E,P;D.attr(Fs(),null),D.attr(qu(),null),D.attr(jc(),null);const F=j.from(D.attr(em())).map(U=>U.split(",")).getOr([]),z=j.from(D.attr(Qp())).map(U=>U.split(",")).getOr([]);Se(F,U=>D.attr(U,null));const H=null!==(P=null===(E=D.attr("class"))||void 0===E?void 0:E.split(" "))&&void 0!==P?P:[],V=We(H,[Jp()].concat(z));D.attr("class",V.length>0?V.join(" "):null),D.attr(Qp(),null),D.attr(em(),null)};v.serializer.addTempAttr(jc()),v.serializer.addAttributeFilter(C,D=>{for(const E of D)T(E).each(P=>{!1===P.persistent&&("span"===E.name?E.unwrap():k(E))})})})(s,u);const d=((v,x)=>{const C=Oo({}),T=()=>({listeners:[],previous:Uu()}),k=(F,z)=>{D(F,H=>(z(H),H))},D=(F,z)=>{const H=C.get(),V=z(cr(H,F).getOrThunk(T));H[F]=V,C.set(H)},E=(F,z)=>{Se(ua(v,F),H=>{z?uo(H,jc(),"true"):go(H,jc())})},P=M_(()=>{const F=Wn(x.getNames());Se(F,z=>{D(z,H=>{const V=H.previous.get();return $v(v,j.some(z)).fold(()=>{V.each(U=>{var $;k($=z,K=>{Se(K.listeners,te=>te(!1,$))}),H.previous.clear(),E(U,!1)})},({uid:U,name:$,elements:K})=>{var te,re,ue;ns(V,U)||(V.each(te=>E(te,!1)),re=U,ue=K,k(te=$,he=>{Se(he.listeners,de=>de(!0,te,{uid:re,nodes:Ee(ue,_e=>_e.dom)}))}),H.previous.set(U),E(U,!0))}),{previous:H.previous,listeners:H.listeners}})})},30);return v.on("remove",()=>{P.cancel()}),v.on("NodeChange",()=>{P.throttle()}),{addListener:(F,z)=>{D(F,H=>({previous:H.previous,listeners:H.listeners.concat([z])}))}}})(s,u),f=Lu("span"),m=v=>{Se(v,x=>{f(x)?Te(x):(C=>{Fo(C,Jp()),go(C,`${Fs()}`),go(C,`${qu()}`),go(C,`${jc()}`);const T=Ia(C,`${em()}`).map(E=>E.split(",")).getOr([]),k=Ia(C,`${Qp()}`).map(E=>E.split(",")).getOr([]);var D;Se(T,E=>go(C,E)),D=C,Se(k,E=>{Fo(D,E)}),go(C,`${Qp()}`),go(C,`${em()}`)})(x)})};return{register:(v,x)=>{u.register(v,x)},annotate:(v,x)=>{u.lookup(v).each(C=>{var T,k,D,E;k=v,D=C,E=x,(T=s).undoManager.transact(()=>{const P=T.selection,F=P.getRng(),z=Dh(T).length>0,H=sh("mce-annotation");if(F.collapsed&&!z&&((V,U)=>{const $=sc(V.dom,U,[{inline:"span"}]);U.setStart($.startContainer,$.startOffset),U.setEnd($.endContainer,$.endOffset),V.selection.setRng(U)})(T,F),P.getRng().collapsed&&!z){const V=Lm(T.getDoc(),H,E,k,D.decorate);$e(V,Ro),P.getRng().insertNode(V.dom),P.select(V.dom)}else gw(P,!1,()=>{km(T,V=>{((s,u,d,f,m,v)=>{const x=[],C=Lm(s.getDoc(),d,v,f,m),T=Uu(),k=()=>{T.clear()},D=P=>{Se(P,E)},E=P=>{switch(F=s,z=P,H="span",V=Pn(P),rs(z).fold(()=>"skipping",U=>{return"br"===V||ai($=z)&&rm($)===Hr?"valid":($=>Ko($)&&Pl($,Jp()))(z)?"existing":Ji(z.dom)?"caret":_t($A,$=>xi(z,$))?"valid-block":Lh(F,H,V)&&Lh(F,Pn(U),H)?"valid":"invalid-child";var $})){case"invalid-child":{k();const F=Lo(P);D(F),k();break}case"valid-block":k(),F0(P,d,v,f,m,!0);break;case"valid":{const F=T.get().getOrThunk(()=>{const z=Xl(C);return x.push(z),T.set(z),z});Q(P,F);break}}var F,z,H,V};Ef(s.dom,u,P=>{k(),(F=>{const z=Ee(F,ge);D(z)})(P)})})(T,V,H,k,D.decorate,E)})})})})},annotationChanged:(v,x)=>{d.addListener(v,x)},remove:v=>{$v(s,j.some(v)).each(({elements:x})=>{const C=s.selection.getBookmark();m(x),s.selection.moveToBookmark(C)})},removeAll:v=>{const x=s.selection.getBookmark();sr(ca(s,v),(C,T)=>{m(C)}),s.selection.moveToBookmark(x)},getAll:v=>{const x=ca(s,v);return Et(x,C=>Ee(C,T=>T.dom))}}},Lf=s=>({getBookmark:Pe(Af,s),moveToBookmark:Pe(L0,s)});Lf.isBookmarkNode=ki;const KA=(s,u,d)=>!d.collapsed&&_t(d.getClientRects(),f=>{return x=u,(v=s)>=(m=f).left&&v<=m.right&&x>=m.top&&x<=m.bottom;var m,v,x}),G0=(s,u,d)=>{s.dispatch(u,d)},H0=(s,u,d,f)=>{s.dispatch("FormatApply",{format:u,node:d,vars:f})},_w=(s,u,d,f)=>{s.dispatch("FormatRemove",{format:u,node:d,vars:f})},ww=(s,u)=>s.dispatch("SetContent",u),W0=(s,u)=>s.dispatch("GetContent",u),U0=(s,u)=>{s.dispatch("AutocompleterUpdateActiveRange",u)},Sw=(s,u)=>s.dispatch("PastePlainTextToggle",{state:u}),Mt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:s=>s.shiftKey||s.ctrlKey||s.altKey||Mt.metaKeyPressed(s),metaKeyPressed:s=>On.os.isMacOS()||On.os.isiOS()?s.metaKey:s.ctrlKey&&!s.altKey},Rh="data-mce-selected",Cw=Math.abs,Rf=Math.round,id={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},JA=(s,u)=>{const d=u.dom,f=u.getDoc(),m=document,v=u.getBody();let x,C,T,k,D,E,P,F,z,H,V,U,$,K,te;const re=gt=>et(gt)&&(Iv(gt)||d.is(gt,"figure.image")),ue=gt=>ll(gt)||d.hasClass(gt,"mce-preview-object"),he=gt=>{const Pt=gt.target;((ye,xe)=>{if("longpress"===(Le=ye).type||0===Le.type.indexOf("touch")){const Le=ye.touches[0];return re(ye.target)&&!KA(Le.clientX,Le.clientY,xe)}var Le;return re(ye.target)&&!KA(ye.clientX,ye.clientY,xe)})(gt,u.selection.getRng())&&!gt.isDefaultPrevented()&&u.selection.select(Pt)},de=gt=>d.hasClass(gt,"mce-preview-object")&&et(gt.firstElementChild)?[gt,gt.firstElementChild]:d.is(gt,"figure.image")?[gt.querySelector("img")]:[gt],_e=gt=>{const Pt=Z_(u);return!!Pt&&"false"!==gt.getAttribute("data-mce-resize")&&gt!==u.getBody()&&(d.hasClass(gt,"mce-preview-object")&&et(gt.firstElementChild)?xi(ge(gt.firstElementChild),Pt):xi(ge(gt),Pt))},Ne=(gt,Pt,ye)=>{if(et(ye)){const xe=de(gt);Se(xe,Le=>{Le.style[Pt]||!u.schema.isValid(Le.nodeName.toLowerCase(),Pt)?d.setStyle(Le,Pt,ye):d.setAttrib(Le,Pt,""+ye)})}},ce=(gt,Pt,ye)=>{Ne(gt,"width",Pt),Ne(gt,"height",ye)},fe=gt=>{let Pt,ye,xe,Le,Ge;Pt=gt.screenX-E,ye=gt.screenY-P,U=Pt*k[2]+F,$=ye*k[3]+z,U=U<5?5:U,$=$<5?5:$,xe=(re(x)||ue(x))&&!1!==OA(u)?!Mt.modifierPressed(gt):Mt.modifierPressed(gt),xe&&(Cw(Pt)>Cw(ye)?($=Rf(U*H),U=Rf($/H)):(U=Rf($/H),$=Rf(U*H))),ce(C,U,$),Le=k.startPos.x+Pt,Ge=k.startPos.y+ye,Le=Le>0?Le:0,Ge=Ge>0?Ge:0,d.setStyles(T,{left:Le,top:Ge,display:"block"}),T.innerHTML=U+" &times; "+$,k[2]<0&&C.clientWidth<=U&&d.setStyle(C,"left",void 0+(F-U)),k[3]<0&&C.clientHeight<=$&&d.setStyle(C,"top",void 0+(z-$)),Pt=v.scrollWidth-K,ye=v.scrollHeight-te,Pt+ye!==0&&d.setStyles(T,{left:Le-Pt,top:Ge-ye}),V||(u.dispatch("ObjectResizeStart",{target:x,width:F,height:z,origin:"corner-"+k.name}),V=!0)},we=()=>{const gt=V;V=!1,gt&&(Ne(x,"width",U),Ne(x,"height",$)),d.unbind(f,"mousemove",fe),d.unbind(f,"mouseup",we),m!==f&&(d.unbind(m,"mousemove",fe),d.unbind(m,"mouseup",we)),d.remove(C),d.remove(T),d.remove(D),ze(x),gt&&(u.dispatch("ObjectResized",{target:x,width:U,height:$,origin:"corner-"+k.name}),d.setAttrib(x,"style",d.getAttrib(x,"style"))),u.nodeChanged()},ze=gt=>{Ut();const Pt=d.getPos(gt,v),ye=Pt.x,xe=Pt.y,Le=gt.getBoundingClientRect(),Ge=Le.width||Le.right-Le.left,mt=Le.height||Le.bottom-Le.top;x!==gt&&(Xe(),x=gt,U=$=0);const at=u.dispatch("ObjectSelected",{target:gt});_e(gt)&&!at.isDefaultPrevented()?sr(id,(Yt,Jt)=>{let sn=d.get("mceResizeHandle"+Jt);sn&&d.remove(sn),sn=d.add(v,"div",{id:"mceResizeHandle"+Jt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Jt+"-resize; margin:0; padding:0"}),d.bind(sn,"mousedown",xr=>{xr.stopImmediatePropagation(),xr.preventDefault(),(Zr=>{const Za=de(x)[0];E=Zr.screenX,P=Zr.screenY,F=Za.clientWidth,z=Za.clientHeight,H=z/F,k=Yt,k.name=Jt,k.startPos={x:Ge*Yt[0]+ye,y:mt*Yt[1]+xe},K=v.scrollWidth,te=v.scrollHeight,D=d.add(v,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),d.setStyles(D,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),C=((Tt,dn)=>{if(ue(dn))return Tt.create("img",{src:On.transparentSrc});if(Wl(dn)){const In=xt(k.name,"n")?bn:Br,hn=dn.cloneNode(!0);return In(Tt.select("tr",hn)).each(ir=>{const Nr=Tt.select("td,th",ir);Tt.setStyle(ir,"height",null),Se(Nr,vt=>Tt.setStyle(vt,"height",null))}),hn}return dn.cloneNode(!0)})(d,x),d.addClass(C,"mce-clonedresizable"),d.setAttrib(C,"data-mce-bogus","all"),C.contentEditable="false",d.setStyles(C,{left:ye,top:xe,margin:0}),ce(C,Ge,mt),C.removeAttribute(Rh),v.appendChild(C),d.bind(f,"mousemove",fe),d.bind(f,"mouseup",we),m!==f&&(d.bind(m,"mousemove",fe),d.bind(m,"mouseup",we)),T=d.add(v,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},F+" &times; "+z)})(xr)}),Yt.elm=sn,d.setStyles(sn,{left:Ge*Yt[0]+ye-sn.offsetWidth/2,top:mt*Yt[1]+xe-sn.offsetHeight/2})}):Xe(!1)},Qe=Zv(ze,0),Xe=(gt=!0)=>{Qe.cancel(),Ut(),x&&gt&&x.removeAttribute(Rh),sr(id,(Pt,ye)=>{const xe=d.get("mceResizeHandle"+ye);xe&&(d.unbind(xe),d.remove(xe))})},Dt=(gt,Pt)=>d.isChildOf(gt,Pt),zt=gt=>{if(V||u.removed||u.composing)return;const Pt="mousedown"===gt.type?gt.target:s.getNode(),ye=is(ge(Pt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(Le=>Le.dom).filter(Le=>d.isEditable(Le.parentElement)||"IMG"===Le.nodeName&&d.isEditable(Le)).getOrUndefined(),xe=et(ye)?d.getAttrib(ye,Rh,"1"):"1";if(Se(d.select(`img[${Rh}],hr[${Rh}]`),Le=>{Le.removeAttribute(Rh)}),et(ye)&&Dt(ye,v)&&u.hasFocus()){kt();const Le=s.getStart(!0);if(Dt(Le,ye)&&Dt(s.getEnd(!0),ye))return d.setAttrib(ye,Rh,xe),void Qe.throttle(ye)}Xe()},Ut=()=>{sr(id,gt=>{gt.elm&&(d.unbind(gt.elm),delete gt.elm)})},kt=()=>{try{u.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return u.on("init",()=>{kt(),u.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",zt),u.on("keyup compositionend",gt=>{x&&"TABLE"===x.nodeName&&zt(gt)}),u.on("hide blur",Xe),u.on("contextmenu longpress",he,!0)}),u.on("remove",Ut),{isResizable:_e,showResizeRect:ze,hideResizeRect:Xe,updateResizeRect:zt,destroy:()=>{Qe.cancel(),x=C=D=null}}},QA=(s,u,d)=>{const f=s.document.createRange();var m,v;return m=f,u.fold(v=>{m.setStartBefore(v.dom)},(v,x)=>{m.setStart(v.dom,x)},v=>{m.setStartAfter(v.dom)}),v=f,d.fold(C=>{v.setEndBefore(C.dom)},(C,T)=>{v.setEnd(C.dom,T)},C=>{v.setEndAfter(C.dom)}),f},Mw=(s,u,d,f,m)=>{const v=s.document.createRange();return v.setStart(u.dom,d),v.setEnd(f.dom,m),v},ha=pl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Of=(s,u,d)=>u(ge(d.startContainer),d.startOffset,ge(d.endContainer),d.endOffset),Tw=(s,u,d,f)=>({start:s,soffset:u,finish:d,foffset:f}),Aw=document.caretPositionFromPoint?(s,u,d)=>{var f,m;return j.from(null===(m=(f=s.dom).caretPositionFromPoint)||void 0===m?void 0:m.call(f,u,d)).bind(v=>{if(null===v.offsetNode)return j.none();const x=s.dom.createRange();return x.setStart(v.offsetNode,v.offset),x.collapse(),j.some(x)})}:document.caretRangeFromPoint?(s,u,d)=>{var f,m;return j.from(null===(m=(f=s.dom).caretRangeFromPoint)||void 0===m?void 0:m.call(f,u,d))}:j.none,pi=pl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),bs={before:pi.before,on:pi.on,after:pi.after,cata:(s,u,d,f)=>s.fold(u,d,f),getStart:s=>s.fold(Ir,Ir,Ir)},yo=pl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ni={domRange:yo.domRange,relative:yo.relative,exact:yo.exact,exactFromRange:s=>yo.exact(s.start,s.soffset,s.finish,s.foffset),getWin:s=>{const u=s.match({domRange:f=>ge(f.startContainer),relative:(f,m)=>bs.getStart(f),exact:(f,m,v,x)=>f});return Bl(u)},range:Tw},Zs=(s,u)=>{const d=Pn(s);return"input"===d?bs.after(s):Fe(["br","img"],d)?0===u?bs.before(s):bs.after(s):bs.on(s,u)},ek=(s,u)=>{const d=s.fold(bs.before,Zs,bs.after),f=u.fold(bs.before,Zs,bs.after);return Ni.relative(d,f)},tk=(s,u,d,f)=>{const m=Zs(s,u),v=Zs(d,f);return Ni.relative(m,v)},j0=(s,u)=>{const d=(u||document).createDocumentFragment();return Se(s,f=>{d.appendChild(f.dom)}),ge(d)},nk=(s,u,d)=>{return(f=Bl(ge(d)).dom,m=s,v=u,((x,C,T)=>{const k=ge(x.document);return Aw(k,C,T).map(D=>Tw(ge(D.startContainer),D.startOffset,ge(D.endContainer),D.endOffset))})(f,m,v)).map(f=>{const m=d.createRange();return m.setStart(f.start.dom,f.soffset),m.setEnd(f.finish.dom,f.foffset),m}).getOrUndefined();var f,m,v},Om=(s,u)=>et(s)&&et(u)&&s.startContainer===u.startContainer&&s.startOffset===u.startOffset&&s.endContainer===u.endContainer&&s.endOffset===u.endOffset,Pf=(s,u,d)=>null!==((f,m,v)=>{let x=f;for(;x&&x!==m;){if(v(x))return x;x=x.parentNode}return null})(s,u,d),rk=(s,u,d)=>Pf(s,u,f=>f.nodeName===d),ok=(s,u)=>Uo(s)&&!Pf(s,u,Ji),kw=(s,u,d)=>{const f=u.parentNode;if(f){const m=new fr(u,s.getParent(f,s.isBlock)||s.getRoot());let v;for(;v=m[d?"prev":"next"]();)if(Rr(v))return!0}return!1},Y0=(s,u,d,f,m)=>{const v=s.getRoot(),x=s.schema.getNonEmptyElements(),C=m.parentNode;let T,k;if(!C)return j.none();const D=s.getParent(C,s.isBlock)||v;if(f&&Rr(m)&&u&&s.isEmpty(D))return j.some(Oe(C,s.nodeIndex(m)));const E=new fr(m,D);for(;k=E[f?"prev":"next"]();){if("false"===s.getContentEditableParent(k)||ok(k,v))return j.none();if(Je(k)&&k.data.length>0)return rk(k,v,"A")?j.none():j.some(Oe(k,f?k.data.length:0));if(s.isBlock(k)||x[k.nodeName.toLowerCase()])return j.none();T=k}return Hc(T)?j.none():d&&T?j.some(Oe(T,0)):j.none()},ik=(s,u,d,f)=>{const m=s.getRoot();let v,x=!1,C=d?f.startContainer:f.endContainer,T=d?f.startOffset:f.endOffset;const k=Bt(C)&&T===C.childNodes.length,D=s.schema.getNonEmptyElements();let E=d;if(Uo(C))return j.none();if(Bt(C)&&T>C.childNodes.length-1&&(E=!1),sl(C)&&(C=m,T=0),C===m){if(E&&(v=C.childNodes[T>0?T-1:0],v)&&(Uo(v)||D[v.nodeName]||Wl(v)))return j.none();if(C.hasChildNodes()){if(T=Math.min(!E&&T>0?T-1:T,C.childNodes.length-1),C=C.childNodes[T],T=Je(C)&&k?C.data.length:0,!u&&C===m.lastChild&&Wl(C)||((P,F)=>{let z=F;for(;z&&z!==P;){if(dr(z))return!0;z=z.parentNode}return!1})(m,C)||Uo(C)||Dv(C))return j.none();if(C.hasChildNodes()&&!Wl(C)){v=C;const P=new fr(C,m);do{if(dr(v)||Uo(v)){x=!1;break}if(Je(v)&&v.data.length>0){T=E?0:v.data.length,C=v,x=!0;break}if(D[v.nodeName.toLowerCase()]&&!iA(v)){T=s.nodeIndex(v),C=v.parentNode,E||T++,x=!0;break}}while(v=E?P.next():P.prev())}}}return u&&(Je(C)&&0===T&&Y0(s,k,u,!0,C).each(P=>{C=P.container(),T=P.offset(),x=!0}),Bt(C)&&(v=C.childNodes[T],v||(v=C.childNodes[T-1]),!v||!Rr(v)||"A"===(null===(z=v.previousSibling)||void 0===z?void 0:z.nodeName)||kw(s,v,!1)||kw(s,v,!0)||Y0(s,k,u,!0,v).each(P=>{C=P.container(),T=P.offset(),x=!0}))),E&&!u&&Je(C)&&T===C.data.length&&Y0(s,k,u,!1,C).each(P=>{C=P.container(),T=P.offset(),x=!0}),x&&C?j.some(Oe(C,T)):j.none();var z},lc=(s,u)=>{const d=u.collapsed,f=u.cloneRange(),m=Oe.fromRangeStart(u);return ik(s,d,!0,f).each(v=>{d&&Oe.isAbove(m,v)||f.setStart(v.container(),v.offset())}),d||ik(s,d,!1,f).each(v=>{f.setEnd(v.container(),v.offset())}),d&&f.collapse(!0),Om(u,f)?j.none():j.some(f)},uc=(s,u)=>s.splitText(u),cc=s=>{let u=s.startContainer,d=s.startOffset,f=s.endContainer,m=s.endOffset;if(u===f&&Je(u)){if(d>0&&d<u.data.length)if(f=uc(u,d),u=f.previousSibling,m>d){m-=d;const v=uc(f,m).previousSibling;u=f=v,m=v.data.length,d=0}else m=0}else if(Je(u)&&d>0&&d<u.data.length&&(u=uc(u,d),d=0),Je(f)&&m>0&&m<f.data.length){const v=uc(f,m).previousSibling;f=v,m=v.data.length}return{startContainer:u,startOffset:d,endContainer:f,endOffset:m}},ad=s=>({walk:(u,d)=>Ef(s,u,d),split:cc,expand:(u,d={type:"word"})=>{if("word"===d.type){const f=sc(s,u,[{inline:"span"}]),m=s.createRng();return m.setStart(f.startContainer,f.startOffset),m.setEnd(f.endContainer,f.endOffset),m}return u},normalize:u=>lc(s,u).fold(Mn,d=>(u.setStart(d.startContainer,d.startOffset),u.setEnd(d.endContainer,d.endOffset),!0))});ad.compareRanges=Om,ad.getCaretRangeFromPoint=nk,ad.getSelectedNode=Kl,ad.getNode=To;const ak=((s,u)=>{const d=m=>{const v=(x=>{const C=x.dom;return Gl(x)?C.getBoundingClientRect().height:C.offsetHeight})(m);if(v<=0||null===v){const x=Si(m,s);return parseFloat(x)||0}return v},f=(m,v)=>Gr(v,(x,C)=>{const T=Si(m,C),k=void 0===T?0:parseInt(T,10);return isNaN(k)?x:x+k},0);return{set:(m,v)=>{if(!kr(v)&&!v.match(/^[0-9]+$/))throw new Error(s+".set accepts only positive integer values. Value was "+v);const x=m.dom;Vc(x)&&(x.style[s]=v+"px")},get:d,getOuter:d,aggregate:f,max:(m,v,x)=>{const C=f(m,x);return v>C?v-C:0}}})("height"),Pm=()=>ge(document),X0=(s,u)=>s.view(u).fold(Ve([]),d=>{const f=s.owner(d),m=X0(s,f);return[d].concat(m)});var Iw=Object.freeze({__proto__:null,view:s=>{var u;return(s.dom===document?j.none():j.from(null===(u=s.dom.defaultView)||void 0===u?void 0:u.frameElement)).map(ge)},owner:s=>_i(s)});const Bm=s=>"textarea"===Pn(s),Dw=(s,u)=>{const d=(m=>{const v=m.dom.ownerDocument,x=v.body,C=v.defaultView,T=v.documentElement;if(x===m.dom)return Zn(x.offsetLeft,x.offsetTop);const k=nn(C?.pageYOffset,T.scrollTop),D=nn(C?.pageXOffset,T.scrollLeft),E=nn(T.clientTop,x.clientTop),P=nn(T.clientLeft,x.clientLeft);return fn(m).translate(D-P,k-E)})(s),f=ak.get(s);return{element:s,bottom:d.top+f,height:f,pos:d,cleanup:u}},Nw=(s,u,d,f)=>{lk(s,(m,v)=>sk(s,u,d,f),d)},Ew=(s,u,d,f,m)=>{const v={elm:f.element.dom,alignToTop:m};s.dispatch("ScrollIntoView",v).isDefaultPrevented()||(d(s,u,Bn(u).top,f,m),s.dispatch("AfterScrollIntoView",v))},sk=(s,u,d,f)=>{ge(s.getBody());const v=ge(s.getDoc()),x=((C,T)=>{const k=((E,P)=>{const F=Lo(E);if(0===F.length||Bm(E))return{element:E,offset:P};if(P<F.length&&!Bm(F[P]))return{element:F[P],offset:0};{const z=F[F.length-1];return Bm(z)?{element:E,offset:P}:"img"===Pn(z)?{element:z,offset:1}:ai(z)?{element:z,offset:rm(z).length}:{element:z,offset:Lo(z).length}}})(C,T),D=Ou('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Ho(k.element,D),Dw(D,()=>be(D))})(ge(d.startContainer),d.startOffset);Ew(s,v,u,x,f),x.cleanup()},Lw=(s,u,d,f)=>{const m=ge(s.getDoc());Ew(s,m,d,Dw(ge(u),Qt),f)},lk=(s,u,d)=>{const f=d.startContainer,m=d.startOffset,v=d.endContainer,x=d.endOffset;u(ge(f),ge(v));const C=s.dom.createRng();C.setStart(f,m),C.setEnd(v,x),s.selection.setRng(d)},Rw=(s,u,d,f,m)=>{const v=u.pos;if(f)Gt(v.left,v.top,m);else{const x=v.top-d+u.height;Gt(-s.getBody().getBoundingClientRect().left,x,m)}},Ow=(s,u,d,f,m,v)=>{const x=f+d,C=m.pos.top,T=m.bottom,k=T-C>=f;C<d?Rw(s,m,f,!1!==v,u):C>x?Rw(s,m,f,k?!1!==v:!0===v,u):T>x&&!k&&Rw(s,m,f,!0===v,u)},Pw=(s,u,d,f,m)=>{const v=Bl(u).dom.innerHeight;Ow(s,u,d,v,f,m)},uk=(s,u,d,f,m)=>{const v=Bl(u).dom.innerHeight;Ow(s,u,d,v,f,m);const x=(T=>{const k=Pm(),D=Bn(k),E=((z,H)=>{const V=H.owner(z);return X0(H,V)})(T,Iw),P=fn(T),F=Ft(E,(z,H)=>{const V=fn(H);return{left:z.left+V.left,top:z.top+V.top}},{left:0,top:0});return Zn(F.left+P.left+D.left,F.top+P.top+D.top)})(f.element),C=Un(window);x.top<C.y?un(f.element,!1!==m):x.top>C.bottom&&un(f.element,!0===m)},ck=(s,u,d)=>Nw(s,Pw,u,d),Bw=(s,u,d)=>Lw(s,u,Pw,d),LE=(s,u,d)=>Nw(s,uk,u,d),dk=(s,u,d)=>Lw(s,u,uk,d),Oh=(s,u,d)=>{(s.inline?ck:LE)(s,u,d)},Ph=(s,u=!1)=>s.dom.focus({preventScroll:u}),hk=s=>{const u=Os(s).dom;return s.dom===u.activeElement},Bf=(s=Pm())=>j.from(s.dom.activeElement).map(ge),zw=(s,u)=>{const d=ai(u)?rm(u).length:Lo(u).length+1;return s>d?d:s<0?0:s},zm=s=>Ni.range(s.start,zw(s.soffset,s.start),s.finish,zw(s.foffset,s.finish)),pk=(s,u)=>!Ea(u.dom)&&(Go(s,u)||_n(s,u)),Vw=s=>u=>pk(s,u.start)&&pk(s,u.finish),sd=s=>Ni.range(ge(s.startContainer),s.startOffset,ge(s.endContainer),s.endOffset),RE=s=>{const u=document.createRange();try{return u.setStart(s.start.dom,s.soffset),u.setEnd(s.finish.dom,s.foffset),j.some(u)}catch{return j.none()}},Vm=s=>{const u=s.inline||On.browser.isFirefox()?(d=ge(s.getBody()),(f=>{const m=f.getSelection();return(m&&0!==m.rangeCount?j.from(m.getRangeAt(0)):j.none()).map(sd)})(Bl(d).dom).filter(Vw(d))):j.none();var d;s.bookmark=u.isSome()?u:s.bookmark},q0=s=>(s.bookmark?s.bookmark:j.none()).bind(u=>{return d=ge(s.getBody()),j.from(u).filter(Vw(d)).map(zm);var d}).bind(RE),fk={isEditorUIElement:s=>{const u=s.className.toString();return-1!==u.indexOf("tox-")||-1!==u.indexOf("mce-")}},Ha={setEditorTimeout:(s,u,d)=>{return kr(m=d)||(m=0),setTimeout(()=>{s.removed||u()},m);var m},setEditorInterval:(s,u,d)=>{const f=(kr(v=d)||(v=0),setInterval(()=>{s.removed?clearInterval(f):u()},v));var v;return f}};let zf;const Fw=Cr.DOM,Gw=s=>{const u=s.classList;return void 0!==u&&(u.contains("tox-edit-area")||u.contains("tox-edit-area__iframe")||u.contains("mce-content-body"))},Z0=(s,u)=>{const d=zA(s);return null!==Fw.getParent(u,m=>{return Bt(v=m)&&fk.isEditorUIElement(v)||!!d&&s.dom.is(m,d);var v})},Hw=s=>{try{const u=Os(ge(s.getElement()));return Bf(u).fold(()=>document.body,d=>d.dom)}catch{return document.body}},OE=(s,u)=>{const d=u.editor;(m=>{const v=Zv(()=>{Vm(m)},0);m.on("init",()=>{var x,k;m.inline&&((x,C)=>{const T=()=>{C.throttle()};Cr.DOM.bind(document,"mouseup",T),x.on("remove",()=>{Cr.DOM.unbind(document,"mouseup",T)})})(m,v),k=v,(x=m).on("mouseup touchend",D=>{k.throttle()}),x.on("keyup NodeChange AfterSetSelectionRange",T=>{(k=>"nodechange"===k.type&&k.selectionChange)(T)||Vm(x)})}),m.on("remove",()=>{v.cancel()})})(d);const f=(m,v)=>{Jc(m)&&!0!==m.inline&&v(ge(m.getContainer()),"tox-edit-focus")};d.on("focusin",()=>{const m=s.focusedEditor;Gw(Hw(d))&&f(d,Ls),m!==d&&(m&&m.dispatch("blur",{focusedEditor:d}),s.setActive(d),s.focusedEditor=d,d.dispatch("focus",{blurredEditor:m}),d.focus(!0))}),d.on("focusout",()=>{Ha.setEditorTimeout(d,()=>{const m=s.focusedEditor;Gw(Hw(d))&&m===d||f(d,Fo),Z0(d,Hw(d))||m!==d||(d.dispatch("blur",{focusedEditor:null}),s.focusedEditor=null)})}),zf||(zf=m=>{const v=s.activeEditor;v&&Bu(m).each(x=>{x.ownerDocument===document&&(x===document.body||Z0(v,x)||s.focusedEditor!==v||(v.dispatch("blur",{focusedEditor:null}),s.focusedEditor=null))})},Fw.bind(document,"focusin",zf))},PE=(s,u)=>{s.focusedEditor===u.editor&&(s.focusedEditor=null),!s.activeEditor&&zf&&(Fw.unbind(document,"focusin",zf),zf=null)},Ww=(s,u)=>{var d,f,m;(d=ge(s.getBody()),f=u,(m=f,m.collapsed?j.from(To(m.startContainer,m.startOffset)).map(ge):j.none()).bind(m=>ch(m)?j.some(m):Go(d,m)?j.none():j.some(d))).bind(d=>Io(d.dom)).fold(()=>{s.selection.normalize()},d=>s.selection.setRng(d.toRange()))},Uw=s=>{if(s.setActive)try{s.setActive()}catch{s.focus()}else s.focus()},ld=s=>{return s.inline?(u=>{const d=u.getBody();return d&&(f=ge(d),hk(f)||(m=f,Bf(Os(m)).filter(v=>m.dom.contains(v.dom))).isSome());var f,m})(s):et((u=s).iframeElement)&&hk(ge(u.iframeElement));var u},$0=s=>ld(s)||(u=>{const d=Os(ge(u.getElement()));return Bf(d).filter(f=>!Gw(f.dom)&&Z0(u,f.dom)).isSome()})(s),Vf=s=>s.editorManager.setActive(s),gk=(s,u)=>u.collapsed?s.isEditable(u.startContainer):s.isEditable(u.startContainer)&&s.isEditable(u.endContainer),mk=(s,u,d,f,m)=>{const x=d?u.startOffset:u.endOffset;return j.from(d?u.startContainer:u.endContainer).map(ge).map(C=>f&&u.collapsed?C:li(C,m(C,x)).getOr(C)).bind(C=>Ko(C)?j.some(C):rs(C).filter(Ko)).map(C=>C.dom).getOr(s)},jw=(s,u,d=!1)=>mk(s,u,!0,d,(f,m)=>Math.min(os(f),m)),Yw=(s,u,d=!1)=>mk(s,u,!1,d,(f,m)=>m>0?m-1:m),Xw=(s,u)=>{const d=s;for(;s&&Je(s)&&0===s.length;)s=u?s.nextSibling:s.previousSibling;return s||d},Bh=(s,u)=>Ee(u,d=>{const f=s.dispatch("GetSelectionRange",{range:d});return f.range!==d?f.range:d}),yk={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ff=(s,u,d)=>{const f=d?"lastChild":"firstChild",m=d?"prev":"next";if(s[f])return s[f];if(s!==u){let v=s[m];if(v)return v;for(let x=s.parent;x&&x!==u;x=x.parent)if(v=x[m],v)return v}},vk=s=>{var u;const d=null!==(u=s.value)&&void 0!==u?u:"";if(!Fc(d))return!1;const f=s.parent;return!f||"span"===f.name&&!f.attr("style")||!/^[ ]+$/.test(d)},qw=s=>{const u="a"===s.name&&!s.attr("href")&&s.attr("id");return s.attr("name")||s.attr("id")&&!s.firstChild||s.attr("data-mce-bookmark")||u};class Xo{static create(u,d){const f=new Xo(u,yk[u]||1);return d&&sr(d,(m,v)=>{f.attr(v,m)}),f}constructor(u,d){this.name=u,this.type=d,1===d&&(this.attributes=[],this.attributes.map={})}replace(u){const d=this;return u.parent&&u.remove(),d.insert(u,d),d.remove(),d}attr(u,d){const f=this;if(!wt(u))return et(u)&&sr(u,(v,x)=>{f.attr(x,v)}),f;const m=f.attributes;if(m){if(void 0!==d){if(null===d){if(u in m.map){delete m.map[u];let v=m.length;for(;v--;)if(m[v].name===u)return m.splice(v,1),f}return f}if(u in m.map){let v=m.length;for(;v--;)if(m[v].name===u){m[v].value=d;break}}else m.push({name:u,value:d});return m.map[u]=d,f}return m.map[u]}}clone(){const u=this,d=new Xo(u.name,u.type),f=u.attributes;if(f){const m=[];m.map={};for(let v=0,x=f.length;v<x;v++){const C=f[v];"id"!==C.name&&(m[m.length]={name:C.name,value:C.value},m.map[C.name]=C.value)}d.attributes=m}return d.value=u.value,d}wrap(u){const d=this;return d.parent&&(d.parent.insert(u,d),u.append(d)),d}unwrap(){const u=this;for(let d=u.firstChild;d;){const f=d.next;u.insert(d,u,!0),d=f}u.remove()}remove(){const u=this,d=u.parent,f=u.next,m=u.prev;return d&&(d.firstChild===u?(d.firstChild=f,f&&(f.prev=null)):m&&(m.next=f),d.lastChild===u?(d.lastChild=m,m&&(m.next=null)):f&&(f.prev=m),u.parent=u.next=u.prev=null),u}append(u){const d=this;u.parent&&u.remove();const f=d.lastChild;return f?(f.next=u,u.prev=f,d.lastChild=u):d.lastChild=d.firstChild=u,u.parent=d,u}insert(u,d,f){u.parent&&u.remove();const m=d.parent||this;return f?(d===m.firstChild?m.firstChild=u:d.prev&&(d.prev.next=u),u.prev=d.prev,u.next=d,d.prev=u):(d===m.lastChild?m.lastChild=u:d.next&&(d.next.prev=u),u.next=d.next,u.prev=d,d.next=u),u.parent=m,u}getAll(u){const d=this,f=[];for(let m=d.firstChild;m;m=Ff(m,d))m.name===u&&f.push(m);return f}children(){const u=[];for(let d=this.firstChild;d;d=d.next)u.push(d);return u}empty(){const u=this;if(u.firstChild){const d=[];for(let m=u.firstChild;m;m=Ff(m,u))d.push(m);let f=d.length;for(;f--;){const m=d[f];m.parent=m.firstChild=m.lastChild=m.next=m.prev=null}}return u.firstChild=u.lastChild=null,u}isEmpty(u,d={},f){var m;const v=this;let x=v.firstChild;if(qw(v))return!1;if(x)do{if(1===x.type){if(x.attr("data-mce-bogus"))continue;if(u[x.name]||qw(x))return!1}if(8===x.type||3===x.type&&!vk(x)||3===x.type&&x.parent&&d[x.parent.name]&&Fc(null!==(m=x.value)&&void 0!==m?m:"")||f&&f(x))return!1}while(x=Ff(x,v));return!0}walk(u){return Ff(this,null,u)}}const bk=Ke.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Zw=s=>wt(s.nodeValue)&&s.nodeValue.includes(Hr),$w=s=>(0===s.length?"":`${Ee(s,u=>`[${u}]`).join(",")},`)+'[data-mce-bogus="all"]',xk=s=>document.createTreeWalker(s,NodeFilter.SHOW_COMMENT,u=>Zw(u)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),_k=s=>document.createTreeWalker(s,NodeFilter.SHOW_TEXT,u=>{if(Zw(u)){const d=u.parentNode;return d&&Zt(bk,d.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),ti=s=>null!==xk(s).nextNode(),Kw=s=>null!==_k(s).nextNode(),wk=(s,u)=>null!==u.querySelector($w(s)),Sk=(s,u)=>{Se(u.querySelectorAll($w(s)),d=>{const f=ge(d);"all"===si(f,"data-mce-bogus")?be(f):Se(s,m=>{Jd(f,m)&&go(f,m)})})},Ck=s=>{let u=s.nextNode();for(;null!==u;)u.nodeValue=null,u=s.nextNode()},BE=Lr(Ck,xk),Mk=Lr(Ck,_k),K0=(s,u)=>{const d=[{condition:Pe(wk,u),action:Pe(Sk,u)},{condition:ti,action:BE},{condition:Kw,action:Mk}];let f=s,m=!1;return Se(d,({condition:v,action:x})=>{v(f)&&(m||(f=s.cloneNode(!0),m=!0),x(f))}),f},Jw=s=>{const u=zn(s,"[data-mce-bogus]");Se(u,d=>{"all"===si(d,"data-mce-bogus")?be(d):uh(d)?(Ho(d,aa("\ufeff")),be(d)):Te(d)})},Qw=s=>{const u=zn(s,"input");Se(u,d=>{go(d,"name")})},J0=Ke.makeMap,eS=s=>{const u=[],d=(s=s||{}).indent,f=J0(s.indent_before||""),m=J0(s.indent_after||""),v=Xp.getEncodeFunc(s.entity_encoding||"raw",s.entities),x="xhtml"!==s.element_format;return{start:(C,T,k)=>{if(d&&f[C]&&u.length>0){const D=u[u.length-1];D.length>0&&"\n"!==D&&u.push("\n")}if(u.push("<",C),T)for(let D=0,E=T.length;D<E;D++){const P=T[D];u.push(" ",P.name,'="',v(P.value,!0),'"')}if(u[u.length]=!k||x?">":" />",k&&d&&m[C]&&u.length>0){const D=u[u.length-1];D.length>0&&"\n"!==D&&u.push("\n")}},end:C=>{let T;u.push("</",C,">"),d&&m[C]&&u.length>0&&(T=u[u.length-1],T.length>0&&"\n"!==T&&u.push("\n"))},text:(C,T)=>{C.length>0&&(u[u.length]=T?C:v(C))},cdata:C=>{u.push("<![CDATA[",C,"]]>")},comment:C=>{u.push("\x3c!--",C,"--\x3e")},pi:(C,T)=>{T?u.push("<?",C," ",v(T),"?>"):u.push("<?",C,"?>"),d&&u.push("\n")},doctype:C=>{u.push("<!DOCTYPE",C,">",d?"\n":"")},reset:()=>{u.length=0},getContent:()=>u.join("").replace(/\n$/,"")}},pa=(s={},u=Gn())=>{const d=eS(s);return s.validate=!("validate"in s)||s.validate,{serialize:f=>{const m=s.validate,v={3:C=>{var T;d.text(null!==(T=C.value)&&void 0!==T?T:"",C.raw)},8:C=>{var T;d.comment(null!==(T=C.value)&&void 0!==T?T:"")},7:C=>{d.pi(C.name,C.value)},10:C=>{var T;d.doctype(null!==(T=C.value)&&void 0!==T?T:"")},4:C=>{var T;d.cdata(null!==(T=C.value)&&void 0!==T?T:"")},11:C=>{let T=C;if(T=T.firstChild)do{x(T)}while(T=T.next)}};d.reset();const x=C=>{var T;const k=v[C.type];if(k)k(C);else{const D=C.name,E=D in u.getVoidElements();let P=C.attributes;if(m&&P&&P.length>1){const F=[];F.map={};const z=u.getElementRule(C.name);if(z){for(let H=0,V=z.attributesOrder.length;H<V;H++){const U=z.attributesOrder[H];if(U in P.map){const $=P.map[U];F.map[U]=$,F.push({name:U,value:$})}}for(let H=0,V=P.length;H<V;H++){const U=P[H].name;if(!(U in F.map)){const $=P.map[U];F.map[U]=$,F.push({name:U,value:$})}}P=F}}if(d.start(D,P,E),ju(D))wt(C.value)&&d.text(C.value,!0),d.end(D);else if(!E){let F=C.firstChild;if(F){"pre"!==D&&"textarea"!==D||3!==F.type||"\n"!==(null===(T=F.value)||void 0===T?void 0:T[0])||d.text("\n",!0);do{x(F)}while(F=F.next)}d.end(D)}}};return 1!==f.type||s.inner?3===f.type?v[3](f):v[11](f):x(f),d.getContent()}}},Fm=new Set;Se(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],s=>{Fm.add(s)});const Gm=new Set;Se(["background-color"],s=>{Gm.add(s)});const Pr=["font","text-decoration","text-emphasis"],zh=(s,u)=>{return so((d=s).parseStyle(d.getAttrib(u,"style")));var d},Ak=(s,u)=>_t(zh(s,u),d=>Fm.has(d)),kk=(s,u,d)=>j.from(d.container()).filter(Je).exists(f=>{const m=s?0:-1;return u(f.data.charAt(d.offset()+m))}),tS=Pe(kk,!0,nc),Q0=Pe(kk,!1,nc),zE=s=>{const u=s.container();return Je(u)&&(0===u.data.length||ef(u.data)&&Lf.isBookmarkNode(u.parentNode))},su=(s,u)=>d=>C0(s?0:-1,d).filter(u).isSome(),Wr=s=>Iv(s)&&"block"===Si(ge(s),"display"),Vh=s=>{return dr(s)&&!(Bt(u=s)&&"all"===u.getAttribute("data-mce-bogus"));var u},Ik=su(!0,Wr),VE=su(!1,Wr),vr=su(!0,ll),Gf=su(!1,ll),nS=su(!0,Wl),rS=su(!1,Wl),ud=su(!0,Vh),cd=su(!1,Vh),Hm=(s,u)=>{return m=Mn,Go(f=u,d=s)?Pp(d,v=>m(v)||_n(v,f)).slice(0,-1):[];var d,f,m},lu=(s,u)=>[s].concat(Hm(s,u)),e1=(s,u,d)=>I0(s,u,d,zE),Wm=(s,u,d)=>{return Sr(lu(ge(u.container()),s),(f=d,m=>f.isBlock(Pn(m))));var f},Fh=(s,u,d,f)=>e1(s,u.dom,d).forall(m=>Wm(u,d,f).fold(()=>!ml(m,d,u.dom),v=>!ml(m,d,u.dom)&&Go(v,ge(m.container())))),Hf=(s,u,d,f)=>Wm(u,d,f).fold(()=>e1(s,u.dom,d).forall(m=>!ml(m,d,u.dom)),m=>e1(s,m.dom,d).isNone()),t1=Pe(Hf,!1),oS=Pe(Hf,!0),FE=Pe(Fh,!1),Dk=Pe(Fh,!0),Nk=s=>wf(s).exists(uh),n1=(s,u,d,f)=>{const m=dt(lu(ge(d.container()),u),x=>f.isBlock(Pn(x))),v=bn(m).getOr(u);return Fa(s,v.dom,d).filter(Nk)},Gh=(s,u,d)=>wf(u).exists(uh)||n1(!0,s,u,d).isSome(),r1=(s,u,d)=>{return(f=u,j.from(f.getNode(!0)).map(ge)).exists(uh)||n1(!1,s,u,d).isSome();var f},Ek=Pe(n1,!1),o1=Pe(n1,!0),iS=s=>Oe.isTextPosition(s)&&!s.isAtStart()&&!s.isAtEnd(),Lk=(s,u,d)=>{const f=dt(lu(ge(u.container()),s),m=>d.isBlock(Pn(m)));return bn(f).getOr(s)},Rk=(s,u,d)=>iS(u)?Q0(u):Q0(u)||Ki(Lk(s,u,d).dom,u).exists(Q0),Ok=(s,u,d)=>iS(u)?tS(u):tS(u)||Ai(Lk(s,u,d).dom,u).exists(tS),aS=s=>wf(s).bind(u=>zu(u,Ko)).exists(u=>{return d=Si(u,"white-space"),Fe(["pre","pre-wrap"],d);var d}),Pk=(s,u)=>d=>{return f=new fr(d,s)[u](),et(f)&&dr(f)&&ow(f);var f},Bk=(s,u,d)=>{return!aS(u)&&(v=d,Ki((f=s).dom,m=u).isNone()||Ai(f.dom,m).isNone()||t1(f,m,v)||oS(f,m,v)||r1(f,m,v)||Gh(f,m,v)||Rk(s,u,d)||Ok(s,u,d));var f,m,v},Um=(s,u,d)=>!aS(u)&&(t1(s,u,d)||FE(s,u,d)||r1(s,u,d)||Rk(s,u,d)||((f,m)=>{const v=Ki(f.dom,m).getOr(m),x=Pk(f.dom,"prev");return m.isAtStart()&&(x(m.container())||x(v.container()))})(s,u)),Wf=(s,u,d)=>!aS(u)&&(oS(s,u,d)||Dk(s,u,d)||Gh(s,u,d)||Ok(s,u,d)||((f,m)=>{const v=Ai(f.dom,m).getOr(m),x=Pk(f.dom,"next");return m.isAtEnd()&&(x(m.container())||x(v.container()))})(s,u)),sS=(s,u,d)=>Um(s,u,d)||Wf(s,(f=>{const m=f.container(),v=f.offset();return Je(m)&&v<m.data.length?Oe(m,v+1):f})(u),d),zk=(s,u)=>Ih(s.charAt(u)),jm=(s,u)=>nc(s.charAt(u)),Uf=(s,u,d,f)=>{const m=u.data,v=Oe(u,0);return d||!zk(m,0)||sS(s,v,f)?!!(d&&jm(m,0)&&Um(s,v,f))&&(u.data=Ro+m.slice(1),!0):(u.data=" "+m.slice(1),!0)},lS=(s,u,d,f)=>{const m=u.data,v=Oe(u,m.length-1);return d||!zk(m,m.length-1)||sS(s,v,f)?!!(d&&jm(m,m.length-1)&&Wf(s,v,f))&&(u.data=m.slice(0,-1)+Ro,!0):(u.data=m.slice(0,-1)+" ",!0)},uS=(s,u,d,f)=>{if(0===d)return;const m=ge(s),v=la(m,k=>f.isBlock(Pn(k))).getOr(m),x=s.data.slice(u,u+d),C=u+d>=s.data.length&&Wf(v,Oe(s,s.data.length),f),T=0===u&&Um(v,Oe(s,0),f);s.replaceData(u,d,n_(x,4,T,C))},i1=(s,u,d)=>{const f=s.data.slice(u),m=f.length-or(f).length;uS(s,u,m,d)},Ei=(s,u,d)=>{const f=s.data.slice(0,u),m=f.length-xn(f).length;uS(s,u-m,m,d)},a1=(s,u,d,f,m=!0)=>{const v=xn(s.data).length,x=m?s:u,C=m?u:s;return m?x.appendData(C.data):x.insertData(0,C.data),be(ge(C)),f&&i1(x,v,d),x},s1=(s,u)=>((d,f)=>{const m=d.container(),v=d.offset();return!Oe.isTextPosition(d)&&m===f.parentNode&&v>Oe.before(f).offset()})(u,s)?Oe(u.container(),u.offset()-1):u,cS=s=>{return Xi(s.previousSibling)?j.some(Je(u=s.previousSibling)?Oe(u,u.data.length):Oe.after(u)):s.previousSibling?ys(s.previousSibling):j.none();var u},dS=s=>{return Xi(s.nextSibling)?j.some(Je(u=s.nextSibling)?Oe(u,0):Oe.before(u)):s.nextSibling?Io(s.nextSibling):j.none();var u},l1=(s,u,d)=>{d.fold(()=>{s.focus()},f=>{s.selection.setRng(f.toRange(),u)})},Fk=(s,u)=>u&&Zt(s.schema.getBlockElements(),Pn(u)),Hh=(s,u,d,f=!0,m=!1)=>{const v=((s,u,d)=>{return(f=s,m=u,v=d,f?(x=m,dS(C=v).orThunk(()=>cS(C)).orThunk(()=>{return Ai(T=x,Oe.after(k=C)).orThunk(()=>Ki(T,Oe.before(k)));var T,k})):((x,C)=>cS(C).orThunk(()=>dS(C)).orThunk(()=>{return T=x,j.from((k=C).previousSibling?k.previousSibling:k.parentNode).bind(D=>Ki(T,Oe.before(D))).orThunk(()=>Ai(T,Oe.after(k)));var T,k}))(m,v)).map(Pe(s1,d));var f,m,v,x,C})(u,s.getBody(),d.dom),x=la(d,Pe(Fk,s),(C=s.getBody(),k=>k.dom===C));var C;const T=((k,D,E,P)=>{const F=zl(k).filter(ai),z=Oc(k).filter(ai);return be(k),(H=F,V=z,U=D,$=(K,te,re)=>{const ue=K.dom,he=te.dom,de=ue.data.length;return a1(ue,he,E,P),re.container()===he?Oe(ue,de):re},H.isSome()&&V.isSome()&&U.isSome()?j.some($(H.getOrDie(),V.getOrDie(),U.getOrDie())):j.none()).orThunk(()=>(P&&(F.each(K=>Ei(K.dom,K.dom.length,E)),z.each(K=>i1(K.dom,0,E))),D));var H,V,U,$})(d,v,s.schema,(D=d,Zt(s.schema.getTextInlineElements(),Pn(D))));var D;s.dom.isEmpty(s.getBody())?(s.setContent(""),s.selection.setCursorLocation()):x.bind(k=>((D,E,P)=>{if(Wo(D,E)){const F=Ou('<br data-mce-bogus="1">');return P?Se(Lo(E),z=>{z0(z)||be(z)}):ae(E),q(E,F),j.some(Oe.before(F.dom))}return j.none()})(s.schema,k,m)).fold(()=>{f&&l1(s,u,T)},k=>{f&&l1(s,u,j.some(k))})},HE=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,dc=(s,u)=>xi(ge(u),RA(s))&&!lr(s.schema,u)&&s.dom.isEditable(u),jf=s=>{var u,d;return"rtl"===Cr.DOM.getStyle(s,"direction",!0)||(d=null!==(u=s.textContent)&&void 0!==u?u:"",HE.test(d))},hc=(s,u,d)=>{const f=(m=s,v=u,dt(Cr.DOM.getParents(d.container(),"*",v),m));var m,v;return j.from(f[f.length-1])},Wa=(s,u)=>{const d=u.container(),f=u.offset();return s?Zl(d)?Je(d.nextSibling)?Oe(d.nextSibling,0):Oe.after(d):hh(u)?Oe(d,f+1):u:Zl(d)?Je(d.previousSibling)?Oe(d.previousSibling,d.previousSibling.data.length):Oe.before(d):om(u)?Oe(d,f-1):u},Wh=Pe(Wa,!0),dd=Pe(Wa,!1),Gk=(s,u)=>{const d=f=>f.stopImmediatePropagation();s.on("beforeinput input",d,!0),s.getDoc().execCommand(u),s.off("beforeinput input",d)},u1=s=>Gk(s,"Delete"),Hk=s=>Gk(s,"ForwardDelete"),WE=s=>gA(s)||Mr(s),c1=(s,u)=>{return Go(s,u)?zu(u,WE,(d=s,f=>ns(rs(f),d,_n))):j.none();var d},hS=(s,u=!0)=>{s.dom.isEmpty(s.getBody())&&s.setContent("",{no_selection:!u})},Wk=(s,u,d)=>Kt(Io(d),ys(d),(f,m)=>{const v=Wa(!0,f),x=Wa(!1,m),C=Wa(!1,u);return s?Ai(d,C).exists(T=>T.isEqual(x)&&u.isEqual(v)):Ki(d,C).exists(T=>T.isEqual(v)&&u.isEqual(x))}).getOr(!0),Uk=s=>{var u;return(8===zg(u=s)||"#comment"===Pn(u)?zl(s):Fl(s)).bind(Uk).orThunk(()=>j.some(s))},Ym=(s,u,d,f=!0)=>{var m;u.deleteContents();const v=Uk(d).getOr(d),x=ge(null!==(m=s.dom.getParent(v.dom,s.dom.isBlock))&&void 0!==m?m:d.dom);if(x.dom===s.getBody()?hS(s,f):Wo(s.schema,x,{checkRootAsContent:!1})&&(Ci(x),f&&s.selection.setCursorLocation(x.dom,0)),!_n(d,x)){const T=ns(rs(x),d)?[]:rs(C=x).map(Lo).map(k=>dt(k,D=>!_n(C,D))).getOr([]);Se(T.concat(Lo(d)),k=>{_n(k,x)||Go(k,x)||!Wo(s.schema,k)||be(k)})}var C},pS=s=>zn(s,"td,th"),jk=(s,u)=>kf(ge(s),u),vo=(s,u)=>({start:s,end:u}),uu=pl([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),cu=(s,u)=>is(ge(s),"td,th",u),hd=s=>!_n(s.start,s.end),d1=(s,u)=>kf(s.start,u).bind(d=>kf(s.end,u).bind(f=>Rl(_n(d,f),d))),Yf=s=>u=>d1(u,s).map(d=>({rng:u,table:d,cells:pS(d)})),Uh=(s,u,d,f)=>{if(d.collapsed||!s.forall(hd))return j.none();if(u.isSameTable){const m=s.bind(Yf(f));return j.some({start:m,end:m})}{const m=cu(d.startContainer,f),v=cu(d.endContainer,f),x=m.bind((T=f,k=>kf(k,T).bind(D=>Br(pS(D)).map(E=>vo(k,E))))).bind(Yf(f)),C=v.bind((T=>k=>kf(k,T).bind(D=>bn(pS(D)).map(E=>vo(E,k))))(f)).bind(Yf(f));return j.some({start:x,end:C})}var T},h1=(s,u)=>rt(s,d=>_n(d,u)),fS=s=>Kt(h1(s.cells,s.rng.start),h1(s.cells,s.rng.end),(u,d)=>s.cells.slice(u,d+1)),Xm=(s,u)=>{const{startTable:d,endTable:f}=u,m=s.cloneRange();return d.each(v=>m.setStartAfter(v.dom)),f.each(v=>m.setEndBefore(v.dom)),m},qm=s=>Se(s,u=>{go(u,"contenteditable"),Ci(u)}),p1=(s,u,d,f)=>{const m=d.cloneRange();f?(m.setStart(d.startContainer,d.startOffset),m.setEndAfter(u.dom.lastChild)):(m.setStartBefore(u.dom.firstChild),m.setEnd(d.endContainer,d.endOffset)),g1(s,m,u,!1).each(v=>v())},gS=s=>{const u=Dh(s),d=ge(s.selection.getNode());ls(d.dom)&&Wo(s.schema,d)?s.selection.setCursorLocation(d.dom,0):s.selection.collapse(!0),u.length>1&&_t(u,f=>_n(f,d))&&uo(d,"data-mce-selected","1")},f1=(s,u,d)=>j.some(()=>{const f=s.selection.getRng(),m=d.bind(({rng:v,isStartInTable:x})=>{const C=j.from((k=s).dom.getParent(x?v.endContainer:v.startContainer,k.dom.isBlock)).map(ge);var k;v.deleteContents(),((k,D,E)=>{E.each(P=>{D?be(P):(Ci(P),k.selection.setCursorLocation(P.dom,0))})})(s,x,C.filter(Pe(Wo,s.schema)));const T=x?u[0]:u[u.length-1];return p1(s,T,f,x),Wo(s.schema,T)?j.none():j.some(x?u.slice(1):u.slice(0,-1))}).getOr(u);qm(m),gS(s)}),Xk=(s,u,d,f)=>j.some(()=>{const m=s.selection.getRng(),v=u[0],x=d[d.length-1];p1(s,v,m,!0),p1(s,x,m,!1);const C=Wo(s.schema,v)?u:u.slice(1),T=Wo(s.schema,x)?d:d.slice(0,-1);qm(C.concat(T)),f.deleteContents(),gS(s)}),g1=(s,u,d,f=!0)=>j.some(()=>{Ym(s,u,d,f)}),qk=(s,u)=>j.some(()=>Hh(s,!1,u)),mS=(s,u)=>Sr(lu(u,s),dl),m1=(s,u)=>Sr(lu(u,s),Lu("caption")),Li=(s,u)=>j.some(()=>{Ci(u),s.selection.setCursorLocation(u.dom,0)}),Xf=(s,u)=>s?nS(u):rS(u),pc=(s,u)=>{const d=ge(s.selection.getStart(!0)),f=Dh(s);return s.selection.isCollapsed()&&0===f.length?((s,u,d)=>{const f=ge(s.getBody());return m1(f,d).fold(()=>((m,v,x,C)=>{const T=Oe.fromRangeStart(m.selection.getRng());return mS(x,C).bind(k=>{return Wo(m.schema,k,{checkRootAsContent:!1})?Li(m,k):(E=x,F=k,z=T,td(v,m.getBody(),z).bind(H=>mS(E,ge(H.getNode())).bind(V=>_n(V,F)?j.none():j.some(Qt))));var E,F,z})})(s,u,f,d).orThunk(()=>Rl(((m,v)=>{const x=Oe.fromRangeStart(m.selection.getRng());return Xf(v,x)||Fa(v,m.getBody(),x).exists(C=>Xf(v,C))})(s,u),Qt)),m=>((v,x,C,T)=>{const k=Oe.fromRangeStart(v.selection.getRng());return Wo(v.schema,T)?Li(v,T):(E=C,F=T,z=k,td(P=x,(D=v).getBody(),z).fold(()=>j.some(Qt),H=>{return U=P,$=z,K=H,Io((V=F).dom).bind(te=>ys(V.dom).map(re=>U?$.isEqual(te)&&K.isEqual(re):$.isEqual(re)&&K.isEqual(te))).getOr(!0)?((V,U)=>Li(V,U))(D,F):((V,U,$)=>m1(V,ge($.getNode())).fold(()=>j.some(Qt),K=>Rl(!_n(K,U),Qt)))(E,F,H);var V,U,$,K}));var D,E,P,F,z})(s,u,f,m))})(s,u,d):((m,v,x)=>{const C=ge(m.getBody()),T=m.selection.getRng();return 0!==x.length?f1(m,x,j.none()):(k=m,E=T,m1(D=C,v).fold(()=>{return F=k,((s,u)=>{const d=(v=s,x=>_n(v,x)),f=((v,x)=>{const C=cu(v.startContainer,x),T=cu(v.endContainer,x);return Kt(C,T,vo)})(u,d),m=((v,x)=>{const C=jk(v.startContainer,x),T=jk(v.endContainer,x),k=C.isSome(),D=T.isSome(),E=Kt(C,T,_n).getOr(!1);return Kt((P={startTable:C,endTable:T,isStartInTable:k,isEndInTable:D,isSameTable:E,isMultiTable:!E&&k&&D}).startTable,P.endTable,(F,z)=>{const H=Ui(F,U=>_n(U,z)),V=Ui(z,U=>_n(U,F));return H||V?{...P,startTable:H?j.none():P.startTable,endTable:V?j.none():P.endTable,isSameTable:!1,isMultiTable:!1}:P}).getOr(P);var P})(u,d);var v;return((v,x,C)=>v.exists(T=>{return D=C,!hd(k=T)&&d1(k,D).exists(E=>{const P=E.dom.rows;return 1===P.length&&1===P[0].cells.length})&&Tm(T.start,x);var k,D}))(f,u,d)?f.map(v=>uu.singleCellTable(u,v.start)):m.isMultiTable?((v,x,C,T)=>Uh(v,x,C,T).bind(({start:k,end:D})=>{const E=k.bind(fS).getOr([]),P=D.bind(fS).getOr([]);if(E.length>0&&P.length>0){const F=Xm(C,x);return j.some(uu.multiTable(E,P,F))}return j.none()}))(f,m,u,d):((v,x,C,T)=>Uh(v,x,C,T).bind(({start:k,end:D})=>k.or(D)).bind(k=>{const{isSameTable:D}=x,E=fS(k).getOr([]);if(D&&k.cells.length===E.length)return j.some(uu.fullTable(k.table));if(E.length>0){if(D)return j.some(uu.partialTable(E,j.none()));{const P=Xm(C,x);return j.some(uu.partialTable(E,j.some({...x,rng:P})))}}return j.none()}))(f,m,u,d)})(D,E).bind(V=>V.fold(Pe(g1,F),Pe(qk,F),Pe(f1,F),Pe(Xk,F)));var F},F=>Li(k,F)));var k,D,E})(s,d,f)},fc=(s,u)=>{let d=u;for(;d&&d!==s;){if(Ra(d)||dr(d))return d;d=d.parentNode}return null},Zk=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],$k=Ke.each,pd=s=>{const u=s.dom,d=new Set(s.serializer.getTempAttrs()),f=m=>_t(Zk,v=>xt(m,v))||d.has(m);return{compare:(m,v)=>{if(m.nodeName!==v.nodeName||m.nodeType!==v.nodeType)return!1;const x=T=>{const k={};return $k(u.getAttribs(T),D=>{const E=D.nodeName.toLowerCase();"style"===E||f(E)||(k[E]=u.getAttrib(T,E))}),k},C=(T,k)=>{for(const D in T)if(Zt(T,D)){const E=k[D];if(ct(E)||T[D]!==E)return!1;delete k[D]}for(const D in k)if(Zt(k,D))return!1;return!0};return!(Bt(m)&&Bt(v)&&(!C(x(m),x(v))||!C(u.parseStyle(u.getAttrib(m,"style")),u.parseStyle(u.getAttrib(v,"style"))))||ki(m)||ki(v))},isAttributeInternal:f}},vS=s=>["h1","h2","h3","h4","h5","h6"].includes(s.name),bS=(s,u,d,f)=>{const m=d.name;for(let v=0,x=s.length;v<x;v++){const C=s[v];if(C.name===m){const T=f.nodes[m];T?T.nodes.push(d):f.nodes[m]={filter:C,nodes:[d]}}}if(d.attributes)for(let v=0,x=u.length;v<x;v++){const C=u[v],T=C.name;if(T in d.attributes.map){const k=f.attributes[T];k?k.nodes.push(d):f.attributes[T]={filter:C,nodes:[d]}}}},xS=(s,u)=>{const d=(f,m)=>{sr(f,v=>{const x=br(v.nodes);Se(v.filter.callbacks,C=>{for(let T=x.length-1;T>=0;T--){const k=x[T];(m?void 0!==k.attr(v.filter.name):k.name===v.filter.name)&&!rr(k.parent)||x.splice(T,1)}x.length>0&&C(x,v.filter.name,u)})})};d(s.nodes,!1),d(s.attributes,!0)},$s=(s,u,d,f={})=>{const m=((v,x,C)=>{const T={nodes:{},attributes:{}};return C.firstChild&&((k,D)=>{let E=k;for(;E=E.walk();)bS(v,x,E,T)})(C),T})(s,u,d);xS(m,f)},y1=(s,u,d,f)=>{if((s.pad_empty_with_br||u.insert)&&d(f)){const m=new Xo("br",1);u.insert&&m.attr("data-mce-bogus","1"),f.empty().append(m)}else f.empty().append(new Xo("#text",3)).value=Ro},_S=(s,u)=>{const d=s?.firstChild;return et(d)&&d===s.lastChild&&d.name===u},jh=(s,u,d,f)=>f.isEmpty(u,d,m=>!0===s.getElementRule(m.name)?.paddEmpty),v1=s=>{let u;for(let d=s;d;d=d.parent){const f=d.attr("contenteditable");if("false"===f)break;"true"===f&&(u=d)}return j.from(u)},b1=(s,u,d=s.parent)=>{if(u.getSpecialElements()[s.name])s.empty().remove();else{const f=s.children();for(const m of f)d&&!u.isValidChild(d.name,m.name)&&b1(m,u,d);s.unwrap()}},fi=(s,u,d,f=Qt)=>{const m=u.getTextBlockElements(),v=u.getNonEmptyElements(),x=u.getWhitespaceElements(),C=Ke.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),T=new Set,k=D=>D!==d&&!C[D.name];for(let D=0;D<s.length;D++){const E=s[D];let P,F,z;if(!E.parent||T.has(E))continue;if(m[E.name]&&"li"===E.parent.name){let V=E.next;for(;V&&m[V.name];)V.name="li",T.add(V),E.parent.insert(V,E.parent),V=V.next;E.unwrap();continue}const H=[E];for(P=E.parent;P&&!u.isValidChild(P.name,E.name)&&k(P);P=P.parent)H.push(P);if(P&&H.length>1)if(Qi(u,E,P))b1(E,u);else{H.reverse(),F=H[0].clone(),f(F);let V=F;for(let U=0;U<H.length-1;U++){u.isValidChild(V.name,H[U].name)&&U>0?(z=H[U].clone(),f(z),V.append(z)):z=V;for(let $=H[U].firstChild;$&&$!==H[U+1];){const K=$.next;z.append($),$=K}V=z}jh(u,v,x,F)?P.insert(E,H[0],!0):(P.insert(F,H[0],!0),P.insert(E,F)),P=H[0],(jh(u,v,x,P)||_S(P,"br"))&&P.empty().remove()}else if(E.parent){if("li"===E.name){let V=E.prev;if(V&&("ul"===V.name||"ol"===V.name)){V.append(E);continue}if(V=E.next,V&&("ul"===V.name||"ol"===V.name)&&V.firstChild){V.insert(E,V.firstChild,!0);continue}const U=new Xo("ul",1);f(U),E.wrap(U);continue}if(u.isValidChild(E.parent.name,"div")&&u.isValidChild("div",E.name)){const V=new Xo("div",1);f(V),E.wrap(V)}else b1(E,u)}}},Qi=(s,u,d=u.parent)=>{return!(!d||(!s.children[u.name]||s.isValidChild(d.name,u.name))&&("a"!==u.name||!((f,m)=>{let v=f;for(;v;){if("a"===v.name)return!0;v=v.parent}return!1})(d))&&(f=d,"summary"!==f.name||!vS(u)||d?.firstChild===u&&d?.lastChild===u));var f},Zm=s=>s.collapsed?s:(u=>{const d=Oe.fromRangeStart(u),f=Oe.fromRangeEnd(u),m=u.commonAncestorContainer;return Fa(!1,m,f).map(v=>!ml(d,f,m)&&ml(d,v,m)?((x,C,T,k)=>{const D=document.createRange();return D.setStart(x,C),D.setEnd(T,k),D})(d.container(),d.offset(),v.container(),v.offset()):u).getOr(u)})(s),x1=(s,u)=>{const d=s.getParent(u,s.isBlock);return d&&"LI"===d.nodeName?d:null},SS=(s,u)=>{const d=Oe.after(s),f=Xs(u).prev(d);return f?f.toRange():null},qf=["pre"],$m=ls,_1=(s,u,d)=>{var f,m;const v=s.selection,x=s.dom,C=s.parser,T=d.merge,k=pa({validate:!0},s.schema),D='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';d.preserve_zwsp||(u=Yi(u)),-1===u.indexOf("{$caret}")&&(u+="{$caret}"),u=u.replace(/\{\$caret\}/,D);let E=v.getRng();const P=E.startContainer,F=s.getBody();var K,te;P===F&&v.isCollapsed()&&x.isBlock(F.firstChild)&&(K=s,et(te=F.firstChild)&&!K.schema.getVoidElements()[te.nodeName])&&x.isEmpty(F.firstChild)&&(E=x.createRng(),E.setStart(F.firstChild,0),E.setEnd(F.firstChild,0),v.setRng(E)),v.isCollapsed()||(K=>{const te=K.dom,re=Zm(K.selection.getRng());K.selection.setRng(re);const ue=te.getParent(re.startContainer,$m);var he,de,_e;he=te,de=re,et(_e=ue)&&_e===he.getParent(de.endContainer,$m)&&Tm(ge(_e),de)?g1(K,re,ge(ue)):re.startContainer===re.endContainer&&re.endOffset-re.startOffset==1&&Je(re.startContainer.childNodes[re.startOffset])?re.deleteContents():K.getDoc().execCommand("Delete",!1)})(s);const z=v.getNode(),H={context:z.nodeName.toLowerCase(),data:d.data,insert:!0},V=C.parse(u,H);if(!0===d.paste&&((s,u)=>{let d=u.firstChild,f=u.lastChild;return d&&"meta"===d.name&&(d=d.next),f&&"mce_marker"===f.attr("id")&&(f=f.prev),((m,v)=>{const x=m.getNonEmptyElements();return et(v)&&(v.isEmpty(x)||(T=v,m.getBlockElements()[T.name]&&et((k=T).firstChild)&&k.firstChild===k.lastChild&&(k=>"br"===k.name||k.value===Ro)(T.firstChild)));var T,k})(s,f)&&(f=f?.prev),!(!d||d!==f||"ul"!==d.name&&"ol"!==d.name)})(s.schema,V)&&((K,te)=>!!x1(K,te))(x,z))return E=((s,u,d,f)=>{const m=((E,P,F)=>{const z=P.serialize(F);return(H=>{var V,U;const $=H.firstChild,K=H.lastChild;return $&&"META"===$.nodeName&&(null===(V=$.parentNode)||void 0===V||V.removeChild($)),K&&"mce_marker"===K.id&&(null===(U=K.parentNode)||void 0===U||U.removeChild(K)),H})(E.createFragment(z))})(u,s,f),v=x1(u,d.startContainer),x=(s=>{return s.length>0&&(!(d=s[s.length-1]).firstChild||et(null==(u=d)?void 0:u.firstChild)&&u.firstChild===u.lastChild&&((f=u.firstChild).data===Ro||Rr(f)))?s.slice(0,-1):s;var f,u,d})(dt(null!==(T=m.firstChild?.childNodes)&&void 0!==T?T:[],E=>"LI"===E.nodeName));var T;const k=u.getRoot(),D=E=>{const P=Oe.fromRangeStart(d),F=Xs(u.getRoot()),H=(1===E?F.prev(P):F.next(P))?.getNode();return!H||x1(u,H)!==v};return v?D(1)?((E,P,F)=>{const z=E.parentNode;return z&&Ke.each(P,H=>{z.insertBefore(H,E)}),((H,V)=>{const U=Oe.before(H),$=Xs(V).next(U);return $?$.toRange():null})(E,F)})(v,x,k):D(2)?(E=v,F=k,u.insertAfter((P=x).reverse(),E),SS(P[0],F)):((E,P,F,z)=>{const H=((U,$)=>{const K=$.cloneRange(),te=$.cloneRange();return K.setStartBefore(U),te.setEndAfter(U),[K.cloneContents(),te.cloneContents()]})(E,z),V=E.parentNode;return V&&(V.insertBefore(H[0],E),Ke.each(P,U=>{V.insertBefore(U,E)}),V.insertBefore(H[1],E),V.removeChild(E)),SS(P[P.length-1],F)})(v,x,k,d):null;var E,P,F})(k,x,v.getRng(),V),E&&v.setRng(E),u;!0===d.paste&&((K,te,re,ue)=>{var he;const de=te.firstChild,_e=te.lastChild,Ne=de===("bookmark"===_e.attr("data-mce-type")?_e.prev:_e),ce=Fe(qf,de.name);if(Ne&&ce){const fe="false"!==de.attr("contenteditable"),we=(null===(he=K.getParent(re,K.isBlock))||void 0===he?void 0:he.nodeName.toLowerCase())===de.name,ze=j.from(fc(ue,re)).forall(Ra);return fe&&we&&ze}return!1})(x,V,z,s.getBody())&&(null===(f=V.firstChild)||void 0===f||f.unwrap()),(K=>{let te=K;for(;te=te.walk();)1===te.type&&te.attr("data-mce-fragment","1")})(V);let U=V.lastChild;if(U&&"mce_marker"===U.attr("id")){const K=U;for(U=U.prev;U;U=U.walk(!0))if(3===U.type||!x.isBlock(U.name)){U.parent&&s.schema.isValidChild(U.parent.name,"span")&&U.parent.insert(K,U,"br"===U.name);break}}if(s._selectionOverrides.showBlockCaretContainer(z),H.invalid||((K,te,re)=>{var ue;return _t(re.children(),vS)&&"SUMMARY"===(null===(ue=K.getParent(te,K.isBlock))||void 0===ue?void 0:ue.nodeName)})(x,z,V)){s.selection.setContent(D);let K,te=v.getNode();const re=s.getBody();for(sl(te)?te=K=re:K=te;K&&K!==re;)te=K,K=K.parentNode;u=te===re?re.innerHTML:x.getOuterHTML(te);const ue=C.parse(u),he=(fe=>{for(let we=fe;we;we=we.walk())if("mce_marker"===we.attr("id"))return j.some(we);return j.none()})(ue),de=he.bind(v1).getOr(ue);he.each(fe=>fe.replace(V));const _e=V.children(),Ne=null!==(m=V.parent)&&void 0!==m?m:ue;V.unwrap();const ce=dt(_e,fe=>Qi(s.schema,fe,Ne));fi(ce,s.schema,de),$s(C.getNodeFilters(),C.getAttributeFilters(),ue),u=k.serialize(ue),te===re?x.setHTML(re,u):x.setOuterHTML(te,u)}else u=k.serialize(V),((K,te,re)=>{var ue;if("all"===re.getAttribute("data-mce-bogus"))null===(ue=re.parentNode)||void 0===ue||ue.insertBefore(K.dom.createFragment(te),re);else{const he=re.firstChild;!he||he===re.lastChild&&"BR"===he.nodeName?K.dom.setHTML(re,te):K.selection.setContent(te,{no_events:!0})}})(s,u,z);var $;return((K,te)=>{const re=K.schema.getTextInlineElements(),ue=K.dom;if(te){const he=K.getBody(),de=pd(K),_e="*[data-mce-fragment]",Ne=ue.select(_e);Ke.each(Ne,ce=>{const fe=Qe=>et(re[Qe.nodeName.toLowerCase()]),we=Qe=>1===Qe.childNodes.length;if(!Ak(ue,ze=ce)&&(!Ak(Qe=ue,Xe=ze)||!_t(zh(Qe,Xe),Dt=>Gm.has(Dt)))&&fe(ce)&&we(ce)){const Qe=zh(ue,ce),Xe=(kt,gt)=>lt(kt,Pt=>Fe(gt,Pt)),Dt=kt=>we(ce)&&ue.is(kt,_e)&&fe(kt)&&(kt.nodeName===ce.nodeName&&Xe(Qe,zh(ue,kt))||Dt(kt.children[0])),zt=kt=>et(kt)&&kt!==he&&(de.compare(ce,kt)||zt(kt.parentElement)),Ut=kt=>et(kt)&&kt!==he&&ue.is(kt,_e)&&(((gt,Pt,ye)=>{const xe=zh(gt,Pt),Le=zh(gt,ye),Ge=mt=>{var at,Yt;const Jt=null!==(at=gt.getStyle(Pt,mt))&&void 0!==at?at:"",sn=null!==(Yt=gt.getStyle(ye,mt))&&void 0!==Yt?Yt:"";return Vr(Jt)&&Vr(sn)&&Jt!==sn};return _t(xe,mt=>{const at=Yt=>_t(Yt,Jt=>Jt===mt);if(!at(Le)&&at(Pr)){const Yt=dt(Le,Jt=>_t(Pr,sn=>xt(Jt,sn)));return _t(Yt,Ge)}return Ge(mt)})})(ue,ce,kt)||Ut(kt.parentElement));(Dt(ce.children[0])||zt(ce.parentElement)&&!Ut(ce.parentElement))&&ue.remove(ce,!0)}var Qe,Xe,ze})}})(s,T),((K,te)=>{var re,ue,he;let de;const _e=K.dom,Ne=K.selection;if(!te)return;Ne.scrollIntoView(te);const ce=fc(K.getBody(),te);if(ce&&"false"===_e.getContentEditable(ce))return _e.remove(te),void Ne.select(ce);let fe=_e.createRng();const we=te.previousSibling;if(Je(we)){fe.setStart(we,null!==(ue=null===(re=we.nodeValue)||void 0===re?void 0:re.length)&&void 0!==ue?ue:0);const Qe=te.nextSibling;Je(Qe)&&(we.appendData(Qe.data),null===(he=Qe.parentNode)||void 0===he||he.removeChild(Qe))}else fe.setStartBefore(te),fe.setEndBefore(te);const ze=_e.getParent(te,_e.isBlock);if(_e.remove(te),ze&&_e.isEmpty(ze)){const Qe=$m(ze);ae(ge(ze)),fe.setStart(ze,0),fe.setEnd(ze,0),Qe||ze.getAttribute("data-mce-fragment")||!(de=(Xe=>{let Dt=Oe.fromRangeStart(Xe);return Dt=Xs(K.getBody()).next(Dt),Dt?.toRange()})(fe))?_e.add(ze,_e.create("br",Qe?{}:{"data-mce-bogus":"1"})):(fe=de,_e.remove(ze))}Ne.setRng(fe)})(s,x.get("mce_marker")),$=s.getBody(),Ke.each($.getElementsByTagName("*"),K=>{K.removeAttribute("data-mce-fragment")}),((K,te,re)=>{j.from(K.getParent(te,"td,th")).map(ge).each(ue=>{return de=re,void Fl(he=ue).each(_e=>{zl(_e).each(Ne=>{de.isBlock(Pn(he))&&uh(_e)&&de.isBlock(Pn(Ne))&&be(_e)})});var he,de})})(x,v.getStart(),s.schema),((K,te,re)=>{const ue=Pp(ge(re),he=>_n(he,ge(te)));pr(ue,ue.length-2).filter(Ko).fold(()=>Rv(K,te),he=>Rv(K,he.dom))})(s.schema,s.getBody(),v.getStart()),u},yl=s=>s instanceof Xo,Km=(s,u,d)=>{var f;s.dom.setHTML(s.getBody(),u),!0!==d&&ld(f=s)&&Io(f.getBody()).each(m=>{const v=m.getNode(),x=Wl(v)?Io(v).getOr(m):m;f.selection.setRng(x.toRange())})},w1=s=>tn(s)?s:Mn,Jm=(s,u,d)=>{const f=u(s),m=w1(d);return f.orThunk(()=>m(s)?j.none():((v,x,C)=>{let T=v.dom;const k=w1(C);for(;T.parentNode;){T=T.parentNode;const D=ge(T),E=x(D);if(E.isSome())return E;if(k(D))break}return j.none()})(s,u,m))},Yh=xo,Zf=(s,u,d)=>{const f=s.formatter.get(d);if(f)for(let m=0;m<f.length;m++){const v=f[m];if(wn(v)&&!1===v.inherit&&s.dom.is(u,v.selector))return!0}return!1},S1=(s,u,d,f,m)=>{const v=s.dom.getRoot();if(u===v)return!1;const x=s.dom.getParent(u,C=>!!Zf(s,C,d)||C.parentNode===v||!!vl(s,C,d,f,!0));return!!vl(s,x,d,f,m)},Qm=(s,u,d)=>!(!_o(d)||!Yh(u,d.inline))||!(!ou(d)||!Yh(u,d.block))||!!wn(d)&&Bt(u)&&s.is(u,d.selector),C1=(s,u,d,f,m,v)=>{const x=d[f],C="attributes"===f;if(tn(d.onmatch))return d.onmatch(u,d,f);if(x)if(Dl(x)){for(let T=0;T<x.length;T++)if(C?s.getAttrib(u,x[T]):rd(s,u,x[T]))return!0}else for(const T in x)if(Zt(x,T)){const k=C?s.getAttrib(u,T):rd(s,u,T),D=Ga(x[T],v),E=rr(k)||Qr(k);if(E&&rr(D))continue;if(m&&E&&!d.exact||(!m||d.exact)&&!Yh(k,Df(D,T)))return!1}return!0},vl=(s,u,d,f,m)=>{const v=s.formatter.get(d),x=s.dom;if(v&&Bt(u))for(let C=0;C<v.length;C++){const T=v[C];if(Qm(s.dom,u,T)&&C1(x,u,T,"attributes",m,f)&&C1(x,u,T,"styles",m,f)){const k=T.classes;if(k)for(let D=0;D<k.length;D++)if(!s.dom.hasClass(u,Ga(k[D],f)))return;return T}}},$f=(s,u,d,f,m)=>{if(f)return S1(s,f,u,d,m);if(f=s.selection.getNode(),S1(s,f,u,d,m))return!0;const v=s.selection.getStart();return!(v===f||!S1(s,v,u,d,m))},Kf=Hr,CS=s=>{if(s){const u=new fr(s,s);for(let d=u.current();d;d=u.next())if(Je(d))return d}return null},Ua=s=>{const u=er("span");return ka(u,{id:Ah,"data-mce-bogus":"1","data-mce-type":"format-caret"}),s&&q(u,aa(Kf)),u},M1=(s,u,d)=>{const f=s.dom,m=s.selection;if(ZA(u))Hh(s,!1,ge(u),d,!0);else{const v=m.getRng(),x=f.getParent(u,f.isBlock),C=v.startContainer,T=v.startOffset,k=v.endContainer,D=v.endOffset,E=(P=>{const F=CS(P);return F&&F.data.charAt(0)===Kf&&F.deleteData(0,1),F})(u);f.remove(u,!0),C===E&&T>0&&v.setStart(E,T-1),k===E&&D>0&&v.setEnd(E,D-1),x&&f.isEmpty(x)&&Ci(ge(x)),m.setRng(v)}},T1=(s,u,d)=>{const f=s.dom,m=s.selection;if(u)M1(s,u,d);else if(!(u=nd(s.getBody(),m.getStart())))for(;u=f.get(Ah);)M1(s,u,d)},MS=(s,u)=>(s.appendChild(u),u),ey=(s,u)=>{var d;const f=Ft(s,(v,x)=>MS(v,x.cloneNode(!1)),u),m=null!==(d=f.ownerDocument)&&void 0!==d?d:document;return MS(f,m.createTextNode(Kf))},Qk=s=>{const u=Ua(!1),d=ey(s,u.dom);return{caretContainer:u,caretPosition:Oe(d,0)}},UE=(s,u)=>{const{caretContainer:d,caretPosition:f}=Qk(u);return Ho(ge(s),d),be(ge(s)),f},ty=(s,u)=>{if(Ji(u.dom))return!1;const d=s.schema.getTextInlineElements();return Zt(d,Pn(u))&&!Ji(u.dom)&&!Gc(u.dom)},gc={},A1=La(["pre"]);((s,u)=>{gc[s]||(gc[s]=[]),gc[s].push(d=>{if(!d.selection.getRng().collapsed){const f=d.selection.getSelectedBlocks(),m=dt(dt(f,A1),(v=f,x=>{const C=x.previousSibling;return A1(C)&&Fe(v,C)}));Se(m,v=>{((x,C)=>{const T=ge(C),k=_i(T).dom;be(T),ee(ge(x),[er("br",k),er("br",k),...Lo(T)])})(v.previousSibling,v)})}var v})})("pre");const k1=["fontWeight","fontStyle","color","fontSize","fontFamily"],ny=(s,u)=>{const d=s.get(u);return yn(d)?Sr(d,f=>{return _o(f)&&"span"===f.inline&&Ot((m=f).styles)&&_t(so(m.styles),v=>Fe(k1,v));var m}):j.none()},AS=(s,u)=>Ki(u,Oe.fromRangeStart(s)).isNone(),I1=(s,u)=>!1===Ai(u,Oe.fromRangeEnd(s)).exists(d=>!Rr(d.getNode())||Ai(u,d).isSome()),fd=s=>u=>us(u)&&s.isEditable(u),ry=s=>dt(s.getSelectedBlocks(),fd(s.dom)),kS=Ke.each,IS=s=>Bt(s)&&!ki(s)&&!Ji(s)&&!Gc(s),D1=(s,u)=>{for(let d=s;d;d=d[u]){if(Je(d)&&Vr(d.data))return s;if(Bt(d)&&!ki(d))return d}return s},DS=(s,u,d)=>{const f=pd(s),m=Hu(u)&&s.dom.isEditable(u),v=Hu(d)&&s.dom.isEditable(d);if(m&&v){const x=D1(u,"previousSibling"),C=D1(d,"nextSibling");if(f.compare(x,C)){for(let T=x.nextSibling;T&&T!==C;){const k=T;T=T.nextSibling,x.appendChild(k)}return s.dom.remove(C),Ke.each(Ke.grep(C.childNodes),T=>{x.appendChild(T)}),x}}return d},eI=(s,u,d,f)=>{var m;if(f&&!1!==u.merge_siblings){const v=null!==(m=DS(s,Dm(f),f))&&void 0!==m?m:f;DS(s,v,Dm(v,!0))}},oy=(s,u,d)=>{kS(s.childNodes,f=>{IS(f)&&(u(f)&&d(f),f.hasChildNodes()&&oy(f,u,d))})},N1=(s,u)=>d=>!(!d||!rd(s,d,u)),E1=(s,u,d)=>f=>{var m,v;s.setStyle(f,u,d),""===f.getAttribute("style")&&f.removeAttribute("style"),m=s,"SPAN"===(v=f).nodeName&&0===m.getAttribs(v).length&&m.remove(v,!0)},mc=pl([{keep:[]},{rename:["name"]},{removed:[]}]),tI=/^(src|href|style)$/,L1=Ke.each,Xh=xo,Ks=(s,u,d)=>s.isChildOf(u,d)&&u!==d&&!s.isBlock(d),NS=(s,u,d)=>{let f=u[d?"startContainer":"endContainer"],m=u[d?"startOffset":"endOffset"];if(Bt(f)){const v=f.childNodes.length-1;!d&&m&&m--,f=f.childNodes[m>v?v:m]}return Je(f)&&d&&m>=f.data.length&&(f=new fr(f,s.getBody()).next()||f),Je(f)&&!d&&0===m&&(f=new fr(f,s.getBody()).prev()||f),f},ES=(s,u)=>{const d=u?"firstChild":"lastChild",f=s[d];return/^(TR|TH|TD)$/.test(s.nodeName)&&f?"TR"===s.nodeName&&f[d]||f:s},du=(s,u,d,f)=>{var m;const v=s.create(d,f);return null===(m=u.parentNode)||void 0===m||m.insertBefore(v,u),v.appendChild(u),v},LS=(s,u,d,f,m)=>{const v=ge(u),x=ge(s.create(f,m)),C=d?Vl(v):Bp(v);return ee(x,C),d?(Ho(v,x),Hl(x,v)):(ss(v,x),q(x,v)),x.dom},R1=(s,u,d)=>{const f=u.parentNode;let m;const v=s.dom,x=di(s);var C;ou(d)&&f===v.getRoot()&&(d.list_block&&Xh(u,d.list_block)||Se(br(u.childNodes),C=>{Lh(s,x,C.nodeName.toLowerCase())?m?m.appendChild(C):(m=du(v,C,x),v.setAttribs(m,Us(s))):m=null})),wn(C=d)&&_o(C)&&ns(cr(C,"mixed"),!0)&&!Xh(d.inline,u)||v.remove(u,!0)},O1=(s,u,d)=>kr(s)?{name:u,value:null}:{name:s,value:Ga(u,d)},RS=(s,u)=>{""===s.getAttrib(u,"style")&&(u.removeAttribute("style"),u.removeAttribute("data-mce-style"))},OS=(s,u,d,f,m)=>{let v=!1;L1(d.styles,(x,C)=>{const{name:T,value:k}=O1(C,x,f),D=Df(k,T);(d.remove_similar||Hn(k)||!Bt(m)||Xh(rd(s,m,T),D))&&s.setStyle(u,T,""),v=!0}),v&&RS(s,u)},PS=(s,u,d,f,m)=>{const v=s.dom,x=pd(s),C=s.schema;if(_o(u)&&a_(C,u.inline)&&lr(C,f)&&f.parentElement===s.getBody())return R1(s,f,u),mc.removed();if(!u.ceFalseOverride&&f&&"false"===v.getContentEditableParent(f)||f&&!Qm(v,f,u)&&(!u.links||"A"!==f.nodeName))return mc.keep();const T=f,k=u.preserve_attributes;if(_o(u)&&"all"===u.remove&&yn(k)){const D=dt(v.getAttribs(T),E=>Fe(k,E.name.toLowerCase()));if(v.removeAllAttribs(T),Se(D,E=>v.setAttrib(T,E.name,E.value)),D.length>0)return mc.rename("span")}if("all"!==u.remove){OS(v,T,u,d,m),L1(u.attributes,(E,P)=>{const{name:F,value:z}=O1(P,E,d);if(u.remove_similar||Hn(z)||!Bt(m)||Xh(v.getAttrib(m,F),z)){if("class"===F){const H=v.getAttrib(T,F);if(H){let V="";if(Se(H.split(/\s+/),U=>{/mce\-\w+/.test(U)&&(V+=(V?" ":"")+U)}),V)return void v.setAttrib(T,F,V)}}if(tI.test(F)&&T.removeAttribute("data-mce-"+F),"style"===F&&La(["li"])(T)&&"none"===v.getStyle(T,"list-style-type"))return T.removeAttribute(F),void v.setStyle(T,"list-style-type","none");"class"===F&&T.removeAttribute("className"),T.removeAttribute(F)}}),L1(u.classes,E=>{E=Ga(E,d),Bt(m)&&!v.hasClass(m,E)||v.removeClass(T,E)});const D=v.getAttribs(T);for(let E=0;E<D.length;E++)if(!x.isAttributeInternal(D[E].nodeName))return mc.keep()}return"none"!==u.remove?(R1(s,T,u),mc.removed()):mc.keep()},jE=(s,u,d,f)=>PS(s,u,d,f,f).fold(Ve(f),m=>(s.dom.createFragment().appendChild(f),s.dom.rename(f,m)),Ve(null)),Rn=(s,u,d,f,m)=>{(f||s.selection.isEditable())&&((v,x,C,T,k)=>{const D=v.formatter.get(x),E=D[0],P=v.dom,F=v.selection,z=K=>{const te=((re,ue,he,de,_e)=>{let Ne;return ue.parentNode&&Se(ic(re.dom,ue.parentNode).reverse(),ce=>{if(!Ne&&Bt(ce)&&"_start"!==ce.id&&"_end"!==ce.id){const fe=vl(re,ce,he,de,_e);fe&&!1!==fe.split&&(Ne=ce)}}),Ne})(v,K,x,C,k);return((re,ue,he,de,_e,Ne,ce,fe)=>{var we,ze;let Qe,Xe;const Dt=re.dom;if(he){const zt=he.parentNode;for(let Ut=de.parentNode;Ut&&Ut!==zt;Ut=Ut.parentNode){let kt=Dt.clone(Ut,!1);for(let gt=0;gt<ue.length&&(kt=jE(re,ue[gt],fe,kt),null!==kt);gt++);kt&&(Qe&&kt.appendChild(Qe),Xe||(Xe=kt),Qe=kt)}ce.mixed&&Dt.isBlock(he)||(de=null!==(we=Dt.split(he,de))&&void 0!==we?we:de),Qe&&Xe&&(null===(ze=_e.parentNode)||void 0===ze||ze.insertBefore(Qe,_e),Xe.appendChild(_e),_o(ce)&&eI(re,ce,0,Qe))}return de})(v,D,te,K,K,0,E,C)},H=K=>_t(D,te=>yc(v,te,C,K,K)),V=K=>{const te=br(K.childNodes),re=H(K)||_t(D,he=>Qm(P,K,he)),ue=K.parentNode;if(!re&&et(ue)&&od(E)&&H(ue),E.deep&&te.length)for(let he=0;he<te.length;he++)V(te[he]);Se(["underline","line-through","overline"],he=>{Bt(K)&&v.dom.getStyle(K,"text-decoration")===he&&K.parentNode&&oc(P,K.parentNode)===he&&yc(v,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:he}},void 0,K)})},U=K=>{const te=P.get(K?"_start":"_end");if(te){let re=te[K?"firstChild":"lastChild"];return ki(ue=re)&&Bt(ue)&&("_start"===ue.id||"_end"===ue.id)&&(re=re[K?"firstChild":"lastChild"]),Je(re)&&0===re.data.length&&(re=K?te.previousSibling||te.nextSibling:te.nextSibling||te.previousSibling),P.remove(te,!0),re}var ue;return null},$=K=>{let te,re,ue=sc(P,K,D,K.collapsed);if(E.split){if(ue=cc(ue),te=NS(v,ue,!0),re=NS(v,ue),te!==re){if(te=ES(te,!0),re=ES(re,!1),Ks(P,te,re)){const de=j.from(te.firstChild).getOr(te);return z(LS(P,de,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void U(!0)}if(Ks(P,re,te)){const de=j.from(re.lastChild).getOr(re);return z(LS(P,de,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void U(!1)}te=du(P,te,"span",{id:"_start","data-mce-type":"bookmark"}),re=du(P,re,"span",{id:"_end","data-mce-type":"bookmark"});const he=P.createRng();he.setStartAfter(te),he.setEndBefore(re),Ef(P,he,de=>{Se(de,_e=>{ki(_e)||ki(_e.parentNode)||z(_e)})}),z(te),z(re),te=U(!0),re=U()}else te=re=z(te);ue.startContainer=te.parentNode?te.parentNode:te,ue.startOffset=P.nodeIndex(te),ue.endContainer=re.parentNode?re.parentNode:re,ue.endOffset=P.nodeIndex(re)+1}Ef(P,ue,he=>{Se(he,V)})};if(T){if(Nh(T)){const K=P.createRng();K.setStartBefore(T),K.setEndAfter(T),$(K)}else $(T);_w(v,x,T,C)}else F.isCollapsed()&&_o(E)&&!Dh(v).length?((s,u,d,f)=>{const m=s.dom,v=s.selection;let x=!1;const C=s.formatter.get(u);if(!C)return;const T=v.getRng(),k=T.startContainer,D=T.startOffset;let E=k;Je(k)&&(D!==k.data.length&&(x=!0),E=E.parentNode);const P=[];let F;for(;E;){if(vl(s,E,u,d,f)){F=E;break}E.nextSibling&&(x=!0),P.push(E),E=E.parentNode}if(F)if(x){const z=v.getBookmark();T.collapse(!0);let H=sc(m,T,C,!0);H=cc(H),s.formatter.remove(u,d,H,f),v.moveToBookmark(z)}else{const z=nd(s.getBody(),F),H=et(z)?m.getParents(F.parentNode,Z,z):[],V=Ua(!1).dom;((K,te,re)=>{var ue,he;const de=K.dom,_e=de.getParent(re,Pe(If,K.schema));_e&&de.isEmpty(_e)?null===(ue=re.parentNode)||void 0===ue||ue.replaceChild(te,re):((Ne=>{const ce=zn(Ne,"br"),fe=dt((we=>{const ze=[];let Qe=we.dom;for(;Qe;)ze.push(ge(Qe)),Qe=Qe.lastChild;return ze})(Ne).slice(-1),uh);ce.length===fe.length&&Se(fe,be)})(ge(re)),de.isEmpty(re)?null===(he=re.parentNode)||void 0===he||he.replaceChild(te,re):de.insertAfter(te,re))})(s,V,z??F);const U=((K,te,re,ue,he,de)=>{const _e=K.formatter,Ne=K.dom,ce=dt(so(_e.get()),we=>we!==ue&&!Ye(we,"removeformat")),fe=(we=K,ze=re,Gr(ce,(Xe,Dt)=>{const zt=B0(we,Dt,gt=>{const Pt=ye=>tn(ye)||ye.length>1&&"%"===ye.charAt(0);return _t(["styles","attributes"],ye=>cr(gt,ye).exists(xe=>{const Le=yn(xe)?xe:Ts(xe);return _t(Le,Pt)}))});return we.formatter.matchNode(ze,Dt,{},zt)?Xe.concat([Dt]):Xe},[]));var we,ze;if(dt(fe,we=>!((ze,Qe,Xe)=>{const Dt=["inline","block","selector","attributes","styles","classes"],zt=Ut=>Lt(Ut,(kt,gt)=>_t(Dt,Pt=>Pt===gt));return B0(ze,Qe,Ut=>{const kt=zt(Ut);return B0(ze,Xe,gt=>{const Pt=zt(gt);return((ye,xe,Le=Bi)=>gn(Le).eq(ye,xe))(kt,Pt)})})})(K,we,ue)).length>0){const we=re.cloneNode(!1);return Ne.add(te,we),_e.remove(ue,he,we,de),Ne.remove(we),j.some(we)}return j.none()})(s,V,F,u,d,f),$=ey([...P,...U.toArray(),...H],V);z&&M1(s,z,et(z)),v.setCursorLocation($,1),m.isEmpty(F)&&m.remove(F)}})(v,x,C,k):(mw(v,()=>km(v,$),K=>_o(E)&&$f(v,x,C,K)),v.nodeChanged()),K=v,re=C,"removeformat"===(te=x)?Se(ry(K.selection),ue=>{Se(k1,he=>K.dom.setStyle(ue,he,"")),RS(K.dom,ue)}):ny(K.formatter,te).each(ue=>{Se(ry(K.selection),he=>OS(K.dom,he,ue,re,null))}),_w(v,x,T,C);var K,te,re})(s,u,d,f,m)},yc=(s,u,d,f,m)=>PS(s,u,d,f,m).fold(Mn,v=>(s.dom.rename(f,v),!0),Z),BS=Ke.each,Js=Ke.each,nI=(s,u,d,f)=>{if(Js(d.styles,(m,v)=>{s.setStyle(u,v,Ga(m,f))}),d.styles){const m=s.getAttrib(u,"style");m&&s.setAttrib(u,"data-mce-style",m)}},zS=(s,u,d,f)=>{const m=s.formatter.get(u),v=m[0],x=!f&&s.selection.isCollapsed(),C=s.dom,T=s.selection,k=(z,H=v)=>{tn(H.onformat)&&H.onformat(z,H,d,f),nI(C,z,H,d),Js(H.attributes,(V,U)=>{C.setAttrib(z,U,Ga(V,d))}),Js(H.classes,V=>{const U=Ga(V,d);C.hasClass(z,U)||C.addClass(z,U)})},D=(z,H)=>{let V=!1;return Js(z,U=>!(!wn(U)||("false"!==C.getContentEditable(H)||U.ceFalseOverride)&&(!et(U.collapsed)||U.collapsed===x)&&C.is(H,U.selector)&&!Ji(H)&&(k(H,U),V=!0,1))),V},P=(z,H,V)=>{const U=[];let $=!0;const K=v.inline||v.block,te=(z=>{if(wt(z)){const H=C.create(z);return k(H),H}return null})(K);Ef(z,H,re=>{let ue;const he=de=>{let _e=!1,Ne=$,ce=!1;const fe=de.parentNode,we=fe.nodeName.toLowerCase(),ze=z.getContentEditable(de);et(ze)&&(Ne=$,$="true"===ze,_e=!0,ce=P0(s,de));const Qe=$&&!_e;if(Rr(de)&&!((Xe,Dt,zt,Ut)=>{if(_E(Xe)&&_o(Dt)&&zt.parentNode){const kt=$p(Xe.schema),gt=((s,u)=>((d,f)=>{const m=d.dom;return m.parentNode?(v=ge(m.parentNode),Sr(v.dom.childNodes,C=>(v=>!_n(d,v)&&f(v))(ge(C))).map(ge)):j.none();var v})(s,u).isSome())(ge(zt),Pt=>Ji(Pt.dom));return lo(kt,Ut)&&Ps(Xe.schema,zt.parentNode,{skipBogus:!1,includeZwsp:!0})&&!gt}return!1})(s,v,de,we))return ue=null,void(ou(v)&&z.remove(de));if(Xe=de,ou(Dt=v)&&!0===Dt.wrapper&&vl(s,Xe,u,d))ue=null;else{if(((Xe,Dt,zt)=>{const Ut=ou(kt=v)&&!0!==kt.wrapper&&If(s.schema,Xe)&&Lh(s,Dt,K);var kt;return zt&&Ut})(de,we,Qe)){const Xe=z.rename(de,K);return k(Xe),U.push(Xe),void(ue=null)}if(wn(v)){let Xe=D(m,de);if(!Xe&&et(fe)&&od(v)&&(Xe=D(m,fe)),!_o(v)||Xe)return void(ue=null)}et(te)&&((Xe,Dt,zt,Ut)=>{const kt=Xe.nodeName.toLowerCase(),gt=Lh(s,K,kt)&&Lh(s,Dt,K),Pt=!V&&Je(Xe)&&ef(Xe.data),ye=Ji(Xe),xe=!_o(v)||!z.isBlock(Xe);return(zt||Ut)&&gt&&!Pt&&!ye&&xe})(de,we,Qe,ce)?(ue||(ue=z.clone(te,!1),fe.insertBefore(ue,de),U.push(ue)),ce&&_e&&($=Ne),ue.appendChild(de)):(ue=null,Se(br(de.childNodes),he),_e&&($=Ne),ue=null)}var Xe,Dt};Se(re,he)}),!0===v.links&&Se(U,re=>{const ue=he=>{"A"===he.nodeName&&k(he,v),Se(br(he.childNodes),ue)};ue(re)}),Se(U,re=>{const ue=(he=>{let de=0;return Se(he.childNodes,_e=>{var Ne;et(Ne=_e)&&Je(Ne)&&0===Ne.length||ki(_e)||de++}),de})(re);var he;!(U.length>1)&&z.isBlock(re)||0!==ue?(_o(v)||ou(v)&&v.wrapper)&&(v.exact||1!==ue||(re=Sr((he=re).childNodes,Im).filter(_e=>"false"!==z.getContentEditable(_e)&&Qm(z,_e,v)).map(_e=>{const Ne=z.clone(_e,!1);return k(Ne),z.replace(Ne,he,!0),z.remove(_e,!0),Ne}).getOr(he)),((he,de,_e,Ne)=>{BS(de,ce=>{var fe,we,ze;_o(ce)&&BS(he.dom.select(ce.inline,Ne),fe=>{IS(fe)&&yc(he,ce,_e,fe,ce.exact?fe:null)}),fe=he.dom,ze=Ne,(we=ce).clear_child_styles&&kS(fe.select(we.links?"*:not(a)":"*",ze),Xe=>{IS(Xe)&&fe.isEditable(Xe)&&kS(we.styles,(Dt,zt)=>{fe.setStyle(Xe,zt,"")})})})})(s,m,d,re),((he,de,_e,Ne,ce)=>{const fe=ce.parentNode;vl(he,fe,_e,Ne)&&yc(he,de,Ne,ce)||de.merge_with_parents&&fe&&he.dom.getParent(fe,we=>!!vl(he,we,_e,Ne)&&(yc(he,de,Ne,ce),!0))})(s,v,u,d,re),((he,de,_e,Ne)=>{if(de.styles&&de.styles.backgroundColor){const ce=N1(he,"fontSize");oy(Ne,fe=>ce(fe)&&he.isEditable(fe),E1(he,"backgroundColor",Ga(de.styles.backgroundColor,_e)))}})(z,v,d,re),((he,de,_e,Ne)=>{const ce=fe=>{if(Hu(fe)&&Bt(fe.parentNode)&&he.isEditable(fe)){const we=oc(he,fe.parentNode);he.getStyle(fe,"color")&&we?he.setStyle(fe,"text-decoration",we):he.getStyle(fe,"text-decoration")===we&&he.setStyle(fe,"text-decoration",null)}};de.styles&&(de.styles.color||de.styles.textDecoration)&&(Ke.walk(Ne,ce,"childNodes"),ce(Ne))})(z,v,0,re),((he,de,_e,Ne)=>{if(_o(de)&&("sub"===de.inline||"sup"===de.inline)){const ce=N1(he,"fontSize");oy(Ne,we=>ce(we)&&he.isEditable(we),E1(he,"fontSize",""));const fe=dt(he.select("sup"===de.inline?"sub":"sup",Ne),he.isEditable);he.remove(fe,!0)}})(z,v,0,re),eI(s,v,0,re)):z.remove(re,!0)})},F=Nh(f)?f:T.getNode();if("false"===C.getContentEditable(F)&&!P0(s,F))return D(m,f=F),void H0(s,u,f,d);if(v){if(f)if(Nh(f)){if(!D(m,f)){const z=C.createRng();z.setStartBefore(f),z.setEndAfter(f),P(C,sc(C,z,m),!0)}}else P(C,f,!0);else x&&_o(v)&&!Dh(s).length?((z,H,V)=>{let U;const $=z.selection,K=z.formatter.get(H);if(!K)return;const te=$.getRng();let re=te.startOffset;const ue=te.startContainer.nodeValue;U=nd(z.getBody(),$.getStart());const he=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(ue&&re>0&&re<ue.length&&he.test(ue.charAt(re))&&he.test(ue.charAt(re-1))){const Ne=$.getBookmark();te.collapse(!0);let ce=sc(z.dom,te,K);ce=cc(ce),z.formatter.apply(H,V,ce),$.moveToBookmark(Ne)}else{let Ne=U?CS(U):null;U&&Ne?.data===Kf||(de=z.getDoc(),_e=Ua(!0).dom,U=de.importNode(_e,!0),Ne=U.firstChild,te.insertNode(U),re=1),z.formatter.apply(H,V,U),$.setCursorLocation(Ne,re)}var de,_e})(s,u,d):(T.setRng(Zm(T.getRng())),mw(s,()=>{km(s,(z,H)=>{const V=H?z:sc(C,z,m);P(C,V,!1)})},Z),s.nodeChanged()),ny(s.formatter,u).each(z=>{var H;Se(dt((V=>{const U=V.getSelectedBlocks(),$=V.getRng();if(V.isCollapsed())return[];if(1===U.length)return AS($,U[0])&&I1($,U[0])?U:[];{const K=bn(U).filter(ue=>AS($,ue)).toArray(),te=Br(U).filter(ue=>I1($,ue)).toArray(),re=U.slice(1,-1);return K.concat(re).concat(te)}})(H=s.selection),fd(H.dom)),H=>nI(C,H,z,d))});H=s,Zt(gc,z=u)&&Se(gc[z],V=>{V(H)})}var z,H;H0(s,u,f,d)},iy=(s,u,d,f)=>{(f||s.selection.isEditable())&&zS(s,u,d,f)},ay=s=>Zt(s,"vars"),rI=s=>s.selection.getStart(),oI=(s,u,d,f,m)=>ao(u,v=>{const x=s.formatter.matchNode(v,d,m??{},f);return!ct(x)},v=>!!Zf(s,v,d)||!f&&et(s.formatter.matchNode(v,d,m,!0))),VS=(s,u)=>{const d=u??rI(s);return dt(ic(s.dom,d),f=>Bt(f)&&!Gc(f))},FS=(s,u,d)=>{const f=VS(s,u);sr(d,(m,v)=>{const x=C=>{const T=oI(s,f,v,C.similar,ay(C)?C.vars:void 0),k=T.isSome();if(C.state.get()!==k){C.state.set(k);const D=T.getOr(u);ay(C)?C.callback(k,{node:D,format:v,parents:f}):Se(C.callbacks,E=>E(k,{node:D,format:v,parents:f}))}};Se([m.withSimilar,m.withoutSimilar],x),Se(m.withVars,x)})},GS=Ke.explode,HS=()=>{const s={};return{addFilter:(u,d)=>{Se(GS(u),f=>{Zt(s,f)||(s[f]={name:f,callbacks:[]}),s[f].callbacks.push(d)})},getFilters:()=>Ts(s),removeFilter:(u,d)=>{Se(GS(u),f=>{if(Zt(s,f))if(et(d)){const m=s[f],v=dt(m.callbacks,x=>x!==d);v.length>0?m.callbacks=v:delete s[f]}else delete s[f]})}}},P1=s=>{const[u,...d]=s.split(","),f=d.join(","),m=/data:([^/]+\/[^;]+)(;.+)?/.exec(u);if(m){const v=";base64"===m[2],x=v?(C=>{const T=/([a-z0-9+\/=\s]+)/i.exec(C);return T?T[1]:""})(f):decodeURIComponent(f);return j.some({type:m[1],data:x,base64Encoded:v})}return j.none()},sy=(s,u,d=!0)=>{let f=u;if(d)try{f=atob(u)}catch{return j.none()}const m=new Uint8Array(f.length);for(let v=0;v<m.length;v++)m[v]=f.charCodeAt(v);return j.some(new Blob([m],{type:s}))},Jf=s=>new Promise((u,d)=>{const f=new FileReader;f.onloadend=()=>{u(f.result)},f.onerror=()=>{var m;d(null===(m=f.error)||void 0===m?void 0:m.message)},f.readAsDataURL(s)});let ly=0;const B1=(s,u,d)=>P1(s).bind(({data:f,type:m,base64Encoded:v})=>{if(u&&!v)return j.none();{const x=v?f:btoa(f);return d(x,m)}}),uy=(s,u,d)=>{const f=s.create("blobid"+ly++,u,d);return s.add(f),f},z1=(s,u,d=!1)=>B1(u,d,(f,m)=>j.from(s.getByData(f,m)).orThunk(()=>sy(m,f).map(v=>uy(s,v,f)))),cy=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,gd=s=>j.from(s.match(cy)).bind(u=>pr(u,1)).map(u=>xt(u,"www.")?u.substring(4):u),aI=(s,u)=>{j.from(s.attr("src")).bind(gd).forall(d=>!Fe(u,d))&&s.attr("sandbox","")},WS=(s,u)=>xt(s,`${u}/`),{entries:sI,setPrototypeOf:Ri,isFrozen:Qf,getPrototypeOf:YE,getOwnPropertyDescriptor:XE}=Object;let{freeze:fa,seal:ea,create:lI}=Object,{apply:bl,construct:dy}=typeof Reflect<"u"&&Reflect;bl||(bl=function(s,u,d){return s.apply(u,d)}),fa||(fa=function(s){return s}),ea||(ea=function(s){return s}),dy||(dy=function(s,u){return new s(...u)});const hu=ga(Array.prototype.forEach),pu=ga(Array.prototype.pop),hy=ga(Array.prototype.push),eg=ga(String.prototype.toLowerCase),US=ga(String.prototype.toString),jS=ga(String.prototype.match),xl=ga(String.prototype.replace),YS=ga(String.prototype.indexOf),uI=ga(String.prototype.trim),ja=ga(RegExp.prototype.test),md=(py=TypeError,function(){for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return dy(py,u)});var py;function ga(s){return function(u){for(var d=arguments.length,f=new Array(d>1?d-1:0),m=1;m<d;m++)f[m-1]=arguments[m];return bl(s,u,f)}}function tr(s,u,d){var f;d=null!==(f=d)&&void 0!==f?f:eg,Ri&&Ri(s,null);let m=u.length;for(;m--;){let v=u[m];if("string"==typeof v){const x=d(v);x!==v&&(Qf(u)||(u[m]=x),v=x)}s[v]=!0}return s}function Qs(s){const u=lI(null);for(const[d,f]of sI(s))u[d]=f;return u}function el(s,u){for(;null!==s;){const d=XE(s,u);if(d){if(d.get)return ga(d.get);if("function"==typeof d.value)return ga(d.value)}s=YE(s)}return function(d){return console.warn("fallback value for",d),null}}const XS=fa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qS=fa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),tl=fa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ZS=fa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fy=fa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$S=fa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),KS=fa(["#text"]),JS=fa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),V1=fa(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),QS=fa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gy=fa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),cI=ea(/\{\{[\w\W]*|[\w\W]*\}\}/gm),dI=ea(/<%[\w\W]*|[\w\W]*%>/gm),eC=ea(/\${[\w\W]*}/gm),F1=ea(/^data-[\-\w.\u00B7-\uFFFF]/),qE=ea(/^aria-[\-\w]+$/),hI=ea(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ZE=ea(/^(?:\w+script|data):/i),pI=ea(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fI=ea(/^html$/i);var gI=Object.freeze({__proto__:null,MUSTACHE_EXPR:cI,ERB_EXPR:dI,TMPLIT_EXPR:eC,DATA_ATTR:F1,ARIA_ATTR:qE,IS_ALLOWED_URI:hI,IS_SCRIPT_OR_DATA:ZE,ATTR_WHITESPACE:pI,DOCTYPE_NAME:fI});const mI=()=>typeof window>"u"?null:window;var qh=function s(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mI();const d=Ie=>s(Ie);if(d.version="3.0.5",d.removed=[],!u||!u.document||9!==u.document.nodeType)return d.isSupported=!1,d;const f=u.document,m=f.currentScript;let{document:v}=u;const{DocumentFragment:x,HTMLTemplateElement:C,Node:T,Element:k,NodeFilter:D,NamedNodeMap:E=u.NamedNodeMap||u.MozNamedAttrMap,HTMLFormElement:P,DOMParser:F,trustedTypes:z}=u,H=k.prototype,V=el(H,"cloneNode"),U=el(H,"nextSibling"),$=el(H,"childNodes"),K=el(H,"parentNode");if("function"==typeof C){const Ie=v.createElement("template");Ie.content&&Ie.content.ownerDocument&&(v=Ie.content.ownerDocument)}let te,re="";const{implementation:ue,createNodeIterator:he,createDocumentFragment:de,getElementsByTagName:_e}=v,{importNode:Ne}=f;let ce={};d.isSupported="function"==typeof sI&&"function"==typeof K&&ue&&void 0!==ue.createHTMLDocument;const{MUSTACHE_EXPR:fe,ERB_EXPR:we,TMPLIT_EXPR:ze,DATA_ATTR:Qe,ARIA_ATTR:Xe,IS_SCRIPT_OR_DATA:Dt,ATTR_WHITESPACE:zt}=gI;let{IS_ALLOWED_URI:Ut}=gI,kt=null;const gt=tr({},[...XS,...qS,...tl,...fy,...KS]);let Pt=null;const ye=tr({},[...JS,...V1,...QS,...gy]);let xe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Le=null,Ge=null,mt=!0,at=!0,Yt=!1,Jt=!0,sn=!1,xr=!1,Zr=!1,Za=!1,Tt=!1,dn=!1,In=!1,hn=!0,ir=!1,Nr=!0,vt=!1,Xt={},mr=null;const Er=tr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let wo=null;const Pi=tr({},["audio","video","img","source","image","track"]);let nl=null;const ho=tr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wa="http://www.w3.org/1998/Math/MathML",So="http://www.w3.org/2000/svg",$a="http://www.w3.org/1999/xhtml";let Mu=$a,kc=!1,Hd=null;const Wx=tr({},[wa,So,$a],US);let Ss;const Ic=["application/xhtml+xml","text/html"];let No,mi=null;const xp=v.createElement("form"),Tl=function(Ie){return Ie instanceof RegExp||Ie instanceof Function},Al=function(Ie){if(!mi||mi!==Ie){if(Ie&&"object"==typeof Ie||(Ie={}),Ie=Qs(Ie),Ss=Ss=-1===Ic.indexOf(Ie.PARSER_MEDIA_TYPE)?"text/html":Ie.PARSER_MEDIA_TYPE,No="application/xhtml+xml"===Ss?US:eg,kt="ALLOWED_TAGS"in Ie?tr({},Ie.ALLOWED_TAGS,No):gt,Pt="ALLOWED_ATTR"in Ie?tr({},Ie.ALLOWED_ATTR,No):ye,Hd="ALLOWED_NAMESPACES"in Ie?tr({},Ie.ALLOWED_NAMESPACES,US):Wx,nl="ADD_URI_SAFE_ATTR"in Ie?tr(Qs(ho),Ie.ADD_URI_SAFE_ATTR,No):ho,wo="ADD_DATA_URI_TAGS"in Ie?tr(Qs(Pi),Ie.ADD_DATA_URI_TAGS,No):Pi,mr="FORBID_CONTENTS"in Ie?tr({},Ie.FORBID_CONTENTS,No):Er,Le="FORBID_TAGS"in Ie?tr({},Ie.FORBID_TAGS,No):{},Ge="FORBID_ATTR"in Ie?tr({},Ie.FORBID_ATTR,No):{},Xt="USE_PROFILES"in Ie&&Ie.USE_PROFILES,mt=!1!==Ie.ALLOW_ARIA_ATTR,at=!1!==Ie.ALLOW_DATA_ATTR,Yt=Ie.ALLOW_UNKNOWN_PROTOCOLS||!1,Jt=!1!==Ie.ALLOW_SELF_CLOSE_IN_ATTR,sn=Ie.SAFE_FOR_TEMPLATES||!1,xr=Ie.WHOLE_DOCUMENT||!1,Tt=Ie.RETURN_DOM||!1,dn=Ie.RETURN_DOM_FRAGMENT||!1,In=Ie.RETURN_TRUSTED_TYPE||!1,Za=Ie.FORCE_BODY||!1,hn=!1!==Ie.SANITIZE_DOM,ir=Ie.SANITIZE_NAMED_PROPS||!1,Nr=!1!==Ie.KEEP_CONTENT,vt=Ie.IN_PLACE||!1,Ut=Ie.ALLOWED_URI_REGEXP||hI,Mu=Ie.NAMESPACE||$a,xe=Ie.CUSTOM_ELEMENT_HANDLING||{},Ie.CUSTOM_ELEMENT_HANDLING&&Tl(Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xe.tagNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&Tl(Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xe.attributeNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(xe.allowCustomizedBuiltInElements=Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),sn&&(at=!1),dn&&(Tt=!0),Xt&&(kt=tr({},[...KS]),Pt=[],!0===Xt.html&&(tr(kt,XS),tr(Pt,JS)),!0===Xt.svg&&(tr(kt,qS),tr(Pt,V1),tr(Pt,gy)),!0===Xt.svgFilters&&(tr(kt,tl),tr(Pt,V1),tr(Pt,gy)),!0===Xt.mathMl&&(tr(kt,fy),tr(Pt,QS),tr(Pt,gy))),Ie.ADD_TAGS&&(kt===gt&&(kt=Qs(kt)),tr(kt,Ie.ADD_TAGS,No)),Ie.ADD_ATTR&&(Pt===ye&&(Pt=Qs(Pt)),tr(Pt,Ie.ADD_ATTR,No)),Ie.ADD_URI_SAFE_ATTR&&tr(nl,Ie.ADD_URI_SAFE_ATTR,No),Ie.FORBID_CONTENTS&&(mr===Er&&(mr=Qs(mr)),tr(mr,Ie.FORBID_CONTENTS,No)),Nr&&(kt["#text"]=!0),xr&&tr(kt,["html","head","body"]),kt.table&&(tr(kt,["tbody"]),delete Le.tbody),Ie.TRUSTED_TYPES_POLICY){if("function"!=typeof Ie.TRUSTED_TYPES_POLICY.createHTML)throw md('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof Ie.TRUSTED_TYPES_POLICY.createScriptURL)throw md('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');te=Ie.TRUSTED_TYPES_POLICY,re=te.createHTML("")}else void 0===te&&(te=function(Ht,en){if("object"!=typeof Ht||"function"!=typeof Ht.createPolicy)return null;let Qn=null;const Fr="data-tt-policy-suffix";en&&en.hasAttribute(Fr)&&(Qn=en.getAttribute(Fr));const Ur="dompurify"+(Qn?"#"+Qn:"");try{return Ht.createPolicy(Ur,{createHTML:$r=>$r,createScriptURL:$r=>$r})}catch{return console.warn("TrustedTypes policy "+Ur+" could not be created."),null}}(z,m)),null!==te&&"string"==typeof re&&(re=te.createHTML(""));fa&&fa(Ie),mi=Ie}},Ux=tr({},["mi","mo","mn","ms","mtext"]),fv=tr({},["foreignobject","desc","title","annotation-xml"]),RN=tr({},["title","style","font","a","script"]),_p=tr({},qS);tr(_p,tl),tr(_p,ZS);const Dc=tr({},fy);tr(Dc,$S);const ra=function(Ie){hy(d.removed,{element:Ie});try{Ie.parentNode.removeChild(Ie)}catch{Ie.remove()}},gv=function(Ie,Ht){try{hy(d.removed,{attribute:Ht.getAttributeNode(Ie),from:Ht})}catch{hy(d.removed,{attribute:null,from:Ht})}if(Ht.removeAttribute(Ie),"is"===Ie&&!Pt[Ie])if(Tt||dn)try{ra(Ht)}catch{}else try{Ht.setAttribute(Ie,"")}catch{}},ON=function(Ie){let Ht,en;if(Za)Ie="<remove></remove>"+Ie;else{const Ur=jS(Ie,/^[\r\n\t ]+/);en=Ur&&Ur[0]}"application/xhtml+xml"===Ss&&Mu===$a&&(Ie='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ie+"</body></html>");const Qn=te?te.createHTML(Ie):Ie;if(Mu===$a)try{Ht=(new F).parseFromString(Qn,Ss)}catch{}if(!Ht||!Ht.documentElement){Ht=ue.createDocument(Mu,"template",null);try{Ht.documentElement.innerHTML=kc?re:Qn}catch{}}const Fr=Ht.body||Ht.documentElement;return Ie&&en&&Fr.insertBefore(v.createTextNode(en),Fr.childNodes[0]||null),Mu===$a?_e.call(Ht,xr?"html":"body")[0]:xr?Ht.documentElement:Fr},HT=function(Ie){return he.call(Ie.ownerDocument||Ie,Ie,D.SHOW_ELEMENT|D.SHOW_COMMENT|D.SHOW_TEXT,null,!1)},mv=function(Ie){return"object"==typeof T?Ie instanceof T:Ie&&"object"==typeof Ie&&"number"==typeof Ie.nodeType&&"string"==typeof Ie.nodeName},Nc=function(Ie,Ht,en){ce[Ie]&&hu(ce[Ie],Qn=>{Qn.call(d,Ht,en,mi)})},WT=function(Ie){let Ht;if(Nc("beforeSanitizeElements",Ie,null),(en=Ie)instanceof P&&("string"!=typeof en.nodeName||"string"!=typeof en.textContent||"function"!=typeof en.removeChild||!(en.attributes instanceof E)||"function"!=typeof en.removeAttribute||"function"!=typeof en.setAttribute||"string"!=typeof en.namespaceURI||"function"!=typeof en.insertBefore||"function"!=typeof en.hasChildNodes))return ra(Ie),!0;var en;const Qn=No(Ie.nodeName);if(Nc("uponSanitizeElement",Ie,{tagName:Qn,allowedTags:kt}),Ie.hasChildNodes()&&!mv(Ie.firstElementChild)&&(!mv(Ie.content)||!mv(Ie.content.firstElementChild))&&ja(/<[/\w]/g,Ie.innerHTML)&&ja(/<[/\w]/g,Ie.textContent))return ra(Ie),!0;if(!kt[Qn]||Le[Qn]){if(!Le[Qn]&&UT(Qn)&&(xe.tagNameCheck instanceof RegExp&&ja(xe.tagNameCheck,Qn)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(Qn)))return!1;if(Nr&&!mr[Qn]){const Fr=K(Ie)||Ie.parentNode,Ur=$(Ie)||Ie.childNodes;if(Ur&&Fr)for(let $r=Ur.length-1;$r>=0;--$r)Fr.insertBefore(V(Ur[$r],!0),U(Ie))}return ra(Ie),!0}return Ie instanceof k&&!function(Fr){let Ur=K(Fr);Ur&&Ur.tagName||(Ur={namespaceURI:Mu,tagName:"template"});const $r=eg(Fr.tagName),_r=eg(Ur.tagName);return!!Hd[Fr.namespaceURI]&&(Fr.namespaceURI===So?Ur.namespaceURI===$a?"svg"===$r:Ur.namespaceURI===wa?"svg"===$r&&("annotation-xml"===_r||Ux[_r]):Boolean(_p[$r]):Fr.namespaceURI===wa?Ur.namespaceURI===$a?"math"===$r:Ur.namespaceURI===So?"math"===$r&&fv[_r]:Boolean(Dc[$r]):Fr.namespaceURI===$a?!(Ur.namespaceURI===So&&!fv[_r])&&!(Ur.namespaceURI===wa&&!Ux[_r])&&!Dc[$r]&&(RN[$r]||!_p[$r]):!("application/xhtml+xml"!==Ss||!Hd[Fr.namespaceURI]))}(Ie)?(ra(Ie),!0):"noscript"!==Qn&&"noembed"!==Qn&&"noframes"!==Qn||!ja(/<\/no(script|embed|frames)/i,Ie.innerHTML)?(sn&&3===Ie.nodeType&&(Ht=Ie.textContent,Ht=xl(Ht,fe," "),Ht=xl(Ht,we," "),Ht=xl(Ht,ze," "),Ie.textContent!==Ht&&(hy(d.removed,{element:Ie.cloneNode()}),Ie.textContent=Ht)),Nc("afterSanitizeElements",Ie,null),!1):(ra(Ie),!0)},PN=function(Ie,Ht,en){if(hn&&("id"===Ht||"name"===Ht)&&(en in v||en in xp))return!1;if((!at||Ge[Ht]||!ja(Qe,Ht))&&(!mt||!ja(Xe,Ht)))if(!Pt[Ht]||Ge[Ht]){if(!(UT(Ie)&&(xe.tagNameCheck instanceof RegExp&&ja(xe.tagNameCheck,Ie)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(Ie))&&(xe.attributeNameCheck instanceof RegExp&&ja(xe.attributeNameCheck,Ht)||xe.attributeNameCheck instanceof Function&&xe.attributeNameCheck(Ht))||"is"===Ht&&xe.allowCustomizedBuiltInElements&&(xe.tagNameCheck instanceof RegExp&&ja(xe.tagNameCheck,en)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(en))))return!1}else if(!nl[Ht]&&!ja(Ut,xl(en,zt,""))&&("src"!==Ht&&"xlink:href"!==Ht&&"href"!==Ht||"script"===Ie||0!==YS(en,"data:")||!wo[Ie])&&(!Yt||ja(Dt,xl(en,zt,"")))&&en)return!1;return!0},UT=function(Ie){return Ie.indexOf("-")>0},yv=function(Ie){let Ht,en,Qn,Fr;Nc("beforeSanitizeAttributes",Ie,null);const{attributes:Ur}=Ie;if(!Ur)return;const $r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Pt};for(Fr=Ur.length;Fr--;){Ht=Ur[Fr];const{name:_r,namespaceURI:Lg}=Ht;en="value"===_r?Ht.value:uI(Ht.value);const jT=en;if(Qn=No(_r),$r.attrName=Qn,$r.attrValue=en,$r.keepAttr=!0,$r.forceKeepAttr=void 0,Nc("uponSanitizeAttribute",Ie,$r),en=$r.attrValue,$r.forceKeepAttr)continue;if(!$r.keepAttr){gv(_r,Ie);continue}if(!Jt&&ja(/\/>/i,en)){gv(_r,Ie);continue}sn&&(en=xl(en,fe," "),en=xl(en,we," "),en=xl(en,ze," "));const jx=No(Ie.nodeName);if(PN(jx,Qn,en)){if(!ir||"id"!==Qn&&"name"!==Qn||(gv(_r,Ie),en="user-content-"+en),te&&"object"==typeof z&&"function"==typeof z.getAttributeType&&!Lg)switch(z.getAttributeType(jx,Qn)){case"TrustedHTML":en=te.createHTML(en);break;case"TrustedScriptURL":en=te.createScriptURL(en)}if(en!==jT)try{Lg?Ie.setAttributeNS(Lg,_r,en):Ie.setAttribute(_r,en)}catch{gv(_r,Ie)}}else gv(_r,Ie)}Nc("afterSanitizeAttributes",Ie,null)},Ec=function Ie(Ht){let en;const Qn=HT(Ht);for(Nc("beforeSanitizeShadowDOM",Ht,null);en=Qn.nextNode();)Nc("uponSanitizeShadowNode",en,null),WT(en)||(en.content instanceof x&&Ie(en.content),yv(en));Nc("afterSanitizeShadowDOM",Ht,null)};return d.sanitize=function(Ie){let Ht,en,Qn,Fr,Ur=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(kc=!Ie,kc&&(Ie="\x3c!--\x3e"),"string"!=typeof Ie&&!mv(Ie)){if("function"!=typeof Ie.toString)throw md("toString is not a function");if("string"!=typeof(Ie=Ie.toString()))throw md("dirty is not a string, aborting")}if(!d.isSupported)return Ie;if(Zr||Al(Ur),d.removed=[],"string"==typeof Ie&&(vt=!1),vt){if(Ie.nodeName){const Lg=No(Ie.nodeName);if(!kt[Lg]||Le[Lg])throw md("root node is forbidden and cannot be sanitized in-place")}}else if(Ie instanceof T)Ht=ON("\x3c!----\x3e"),en=Ht.ownerDocument.importNode(Ie,!0),1===en.nodeType&&"BODY"===en.nodeName||"HTML"===en.nodeName?Ht=en:Ht.appendChild(en);else{if(!Tt&&!sn&&!xr&&-1===Ie.indexOf("<"))return te&&In?te.createHTML(Ie):Ie;if(Ht=ON(Ie),!Ht)return Tt?null:In?re:""}Ht&&Za&&ra(Ht.firstChild);const $r=HT(vt?Ie:Ht);for(;Qn=$r.nextNode();)WT(Qn)||(Qn.content instanceof x&&Ec(Qn.content),yv(Qn));if(vt)return Ie;if(Tt){if(dn)for(Fr=de.call(Ht.ownerDocument);Ht.firstChild;)Fr.appendChild(Ht.firstChild);else Fr=Ht;return(Pt.shadowroot||Pt.shadowrootmode)&&(Fr=Ne.call(f,Fr,!0)),Fr}let _r=xr?Ht.outerHTML:Ht.innerHTML;return xr&&kt["!doctype"]&&Ht.ownerDocument&&Ht.ownerDocument.doctype&&Ht.ownerDocument.doctype.name&&ja(fI,Ht.ownerDocument.doctype.name)&&(_r="<!DOCTYPE "+Ht.ownerDocument.doctype.name+">\n"+_r),sn&&(_r=xl(_r,fe," "),_r=xl(_r,we," "),_r=xl(_r,ze," ")),te&&In?te.createHTML(_r):_r},d.setConfig=function(Ie){Al(Ie),Zr=!0},d.clearConfig=function(){mi=null,Zr=!1},d.isValidAttribute=function(Ie,Ht,en){mi||Al({});const Qn=No(Ie),Fr=No(Ht);return PN(Qn,Fr,en)},d.addHook=function(Ie,Ht){"function"==typeof Ht&&(ce[Ie]=ce[Ie]||[],hy(ce[Ie],Ht))},d.removeHook=function(Ie){if(ce[Ie])return pu(ce[Ie])},d.removeHooks=function(Ie){ce[Ie]&&(ce[Ie]=[])},d.removeAllHooks=function(){ce={}},d}();const yI=Ke.each,$E=Ke.trim,KE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],G1={ftp:21,http:80,https:443,mailto:25},_l=["img","video"],H1=(s,u,d)=>{const f=(m=>{try{return decodeURIComponent(m)}catch{return unescape(m)}})(u).replace(/\s/g,"");return!s.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(f)||!s.allow_html_data_urls&&(/^data:image\//i.test(f)?(v=d,(et(m=s.allow_svg_data_urls)?!m:!et(v)||!Fe(_l,v))&&/^data:image\/svg\+xml/i.test(f)):/^data:/i.test(f)));var m,v};class xs{static parseDataUri(u){let d;const f=decodeURIComponent(u).split(","),m=/data:([^;]+)/.exec(f[0]);return m&&(d=m[1]),{type:d,data:f[1]}}static isDomSafe(u,d,f={}){if(f.allow_script_urls)return!0;{const m=Xp.decode(u).replace(/[\s\u0000-\u001F]+/g,"");return!H1(f,m,d)}}static getDocumentBaseUrl(u){var d;let f;return f=0!==u.protocol.indexOf("http")&&"file:"!==u.protocol?null!==(d=u.href)&&void 0!==d?d:"":u.protocol+"//"+u.host+u.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(f)&&(f=f.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(f)||(f+="/")),f}constructor(u,d={}){this.path="",this.directory="",u=$E(u),this.settings=d;const f=d.base_uri,m=this;if(/^([\w\-]+):([^\/]{2})/i.test(u)||/^\s*#/.test(u))return void(m.source=u);const v=0===u.indexOf("//");if(0!==u.indexOf("/")||v||(u=(f&&f.protocol||"http")+"://mce_host"+u),!/^[\w\-]*:?\/\//.test(u)){const C=f?f.path:new xs(document.location.href).directory;if(""===f?.protocol)u="//mce_host"+m.toAbsPath(C,u);else{const T=/([^#?]*)([#?]?.*)/.exec(u);T&&(u=(f&&f.protocol||"http")+"://mce_host"+m.toAbsPath(C,T[1])+T[2])}}u=u.replace(/@@/g,"(mce_at)");const x=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(u);x&&yI(KE,(C,T)=>{let k=x[T];k&&(k=k.replace(/\(mce_at\)/g,"@@")),m[C]=k}),f&&(m.protocol||(m.protocol=f.protocol),m.userInfo||(m.userInfo=f.userInfo),m.port||"mce_host"!==m.host||(m.port=f.port),m.host&&"mce_host"!==m.host||(m.host=f.host),m.source=""),v&&(m.protocol="")}setPath(u){const d=/^(.*?)\/?(\w+)?$/.exec(u);d&&(this.path=d[0],this.directory=d[1],this.file=d[2]),this.source="",this.getURI()}toRelative(u){if("./"===u)return u;const d=new xs(u,{base_uri:this});if("mce_host"!==d.host&&this.host!==d.host&&d.host||this.port!==d.port||this.protocol!==d.protocol&&""!==d.protocol)return d.getURI();const f=this.getURI(),m=d.getURI();if(f===m||"/"===f.charAt(f.length-1)&&f.substr(0,f.length-1)===m)return f;let v=this.toRelPath(this.path,d.path);return d.query&&(v+="?"+d.query),d.anchor&&(v+="#"+d.anchor),v}toAbsolute(u,d){const f=new xs(u,{base_uri:this});return f.getURI(d&&this.isSameOrigin(f))}isSameOrigin(u){if(this.host==u.host&&this.protocol==u.protocol){if(this.port==u.port)return!0;const d=this.protocol?G1[this.protocol]:null;if(d&&(this.port||d)==(u.port||d))return!0}return!1}toRelPath(u,d){let f,m,v=0,x="";const C=u.substring(0,u.lastIndexOf("/")).split("/"),T=d.split("/");if(C.length>=T.length)for(f=0,m=C.length;f<m;f++)if(f>=T.length||C[f]!==T[f]){v=f+1;break}if(C.length<T.length)for(f=0,m=T.length;f<m;f++)if(f>=C.length||C[f]!==T[f]){v=f+1;break}if(1===v)return d;for(f=0,m=C.length-(v-1);f<m;f++)x+="../";for(f=v-1,m=T.length;f<m;f++)x+=f!==v-1?"/"+T[f]:T[f];return x}toAbsPath(u,d){let f=0;const m=/\/$/.test(d)?"/":"",v=u.split("/"),x=d.split("/"),C=[];yI(v,E=>{E&&C.push(E)});const T=[];for(let E=x.length-1;E>=0;E--)0!==x[E].length&&"."!==x[E]&&(".."!==x[E]?f>0?f--:T.push(x[E]):f++);const k=C.length-f;let D;return D=k<=0?ht(T).join("/"):C.slice(0,k).join("/")+"/"+ht(T).join("/"),0!==D.indexOf("/")&&(D="/"+D),m&&D.lastIndexOf("/")!==D.length-1&&(D+=m),D}getURI(u=!1){let d;return this.source&&!u||(d="",u||(d+=this.protocol?this.protocol+"://":"//",this.userInfo&&(d+=this.userInfo+"@"),this.host&&(d+=this.host),this.port&&(d+=":"+this.port)),this.path&&(d+=this.path),this.query&&(d+="?"+this.query),this.anchor&&(d+="#"+this.anchor),this.source=d),this.source}}const W1=Ke.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),tC="data-mce-type";let vI=0;const bI=(s,u,d,f,m)=>{var v,x,C,T;const k=u.validate,D=d.getSpecialElements();8===s.nodeType&&!u.allow_conditional_comments&&/^\[if/i.test(null!==(v=s.nodeValue)&&void 0!==v?v:"")&&(s.nodeValue=" "+s.nodeValue);const E=null!==(x=m?.tagName)&&void 0!==x?x:s.nodeName.toLowerCase();if("html"!==f&&d.isValid(f))return void(et(m)&&(m.allowedTags[E]=!0));if(1!==s.nodeType||"body"===E)return;const P=ge(s),F=Jd(P,tC),z=si(P,"data-mce-bogus");if(!F&&wt(z))return void("all"===z?be(P):Te(P));const H=d.getElementRule(E);if(!k||H){if(et(m)&&(m.allowedTags[E]=!0),k&&H&&!F){if(Se(null!==(C=H.attributesForced)&&void 0!==C?C:[],V=>{uo(P,V.name,"{$uid}"===V.value?"mce_"+vI++:V.value)}),Se(null!==(T=H.attributesDefault)&&void 0!==T?T:[],V=>{Jd(P,V.name)||uo(P,V.name,"{$uid}"===V.value?"mce_"+vI++:V.value)}),H.attributesRequired&&!_t(H.attributesRequired,V=>Jd(P,V))||H.removeEmptyAttrs&&(V=>{const U=V.dom.attributes;return null==U||0===U.length})(P))return void Te(P);H.outputName&&H.outputName!==E&&((V,U)=>{const $=((te,re)=>{const ue=er(re),he=Ru(te);return ka(ue,he),ue})(V,U);ss(V,$);const K=Lo(V);ee($,K),be(V)})(P,H.outputName)}}else Zt(D,E)?be(P):Te(P)},nC=(s,u,d,f,m,v)=>"html"!==d&&!ju(f)||!(m in W1&&H1(s,v,f))&&(!s.validate||u.isValid(f,m)||xt(m,"data-")||xt(m,"aria-")),my=(s,u)=>s.hasAttribute(tC)&&("id"===u||"class"===u||"style"===u),rC=(s,u)=>s in u.getBoolAttrs(),Zh=(s,u,d,f)=>{const{attributes:m}=s;for(let v=m.length-1;v>=0;v--){const x=m[v],C=x.name,T=x.value;nC(u,d,f,s.tagName.toLowerCase(),C,T)||my(s,C)?rC(C,d)&&s.setAttribute(C,C):s.removeAttribute(C)}},tg=s=>{const u=aA(s);if("svg"===u){const f={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(m=>`xlink:${m}`)};qh().sanitize(s,f)}else{if("math"!==u)throw new Error("Not a namespace element");{const d={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};qh().sanitize(s,d)}}},U1=Ke.makeMap,xI=Ke.extend,j1=(s,u,d,f)=>{const m=s.name,v=m in d&&"title"!==m&&"textarea"!==m&&"noscript"!==m,x=u.childNodes;for(let C=0,T=x.length;C<T;C++){const k=x[C],D=new Xo(k.nodeName.toLowerCase(),k.nodeType);if(Bt(k)){const E=k.attributes;for(let P=0,F=E.length;P<F;P++){const z=E[P];D.attr(z.name,z.value)}ju(D.name)&&(f(k),D.value=k.innerHTML)}else Je(k)?(D.value=k.data,v&&(D.raw=!0)):(Hc(k)||o_(k)||oA(k))&&(D.value=k.data);ju(D.name)||j1(D,k,d,f),s.append(D)}},$h=(s={},u=Gn())=>{const d=HS(),f=HS(),m={validate:!0,root_name:"body",sanitize:!0,...s},v=new DOMParser,x=((H,V)=>{const U=(()=>{const $=Uu(),K=()=>$.get().map(aA).getOr("html");return{track:te=>(Yg(te)?$.set(te):$.get().exists(re=>!re.contains(te))&&$.clear(),K()),current:K,reset:()=>{$.clear()}}})();if(H.sanitize){const $=((s,u,d)=>{const f=qh();return f.addHook("uponSanitizeElement",(m,v)=>{bI(m,s,u,d.track(m),v)}),f.addHook("uponSanitizeAttribute",(m,v)=>{((x,C,T,k,D)=>{const E=x.tagName.toLowerCase(),{attrName:P,attrValue:F}=D;D.keepAttr=nC(C,T,k,E,P,F),D.keepAttr?(D.allowedAttributes[P]=!0,rC(P,T)&&(D.attrValue=P),C.allow_svg_data_urls&&xt(F,"data:image/svg+xml")&&(D.forceKeepAttr=!0)):my(x,P)&&(D.forceKeepAttr=!0)})(m,s,u,d.current(),v)}),f})(H,V,U);return{sanitizeHtmlElement:(te,re)=>{$.sanitize(te,((ue,he)=>{const de={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return de.PARSER_MEDIA_TYPE=he,ue.allow_script_urls?de.ALLOWED_URI_REGEXP=/.*/:ue.allow_html_data_urls&&(de.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),de})(H,re)),$.removed=[],U.reset()},sanitizeNamespaceElement:tg}}return{sanitizeHtmlElement:($,K)=>{const te=document.createNodeIterator($,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let re;for(;re=te.nextNode();){const ue=U.track(re);bI(re,H,V,ue),Bt(re)&&Zh(re,H,V,ue)}U.reset()},sanitizeNamespaceElement:Qt}})(m,u),T=d.getFilters,E=f.getFilters,F=(H,V)=>{const U=wt(V.attr(tC)),$=1===V.type&&!Zt(H,V.name)&&!co(u,V)&&!ju(V.name);return 3===V.type||$&&!U},z={schema:u,addAttributeFilter:f.addFilter,getAttributeFilters:E,removeAttributeFilter:f.removeFilter,addNodeFilter:d.addFilter,getNodeFilters:T,removeNodeFilter:d.removeFilter,parse:(H,V={})=>{var U;const $=m.validate,K=null!==(U=V.context)&&void 0!==U?U:m.root_name,te=((we,ze,Qe="html")=>{const Xe="xhtml"===Qe?"application/xhtml+xml":"text/html",Dt=Zt(u.getSpecialElements(),ze.toLowerCase()),zt=Dt?`<${ze}>${we}</${ze}>`:we,kt=v.parseFromString("xhtml"===Qe?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${zt}</body></html>`:`<body>${zt}</body>`,Xe).body;return x.sanitizeHtmlElement(kt,Xe),Dt?kt.firstChild:kt})(H,K,V.format);Rv(u,te);const re=new Xo(K,11);j1(re,te,u.getSpecialElements(),x.sanitizeNamespaceElement),te.innerHTML="";const[ue,he]=((we,ze,Qe,Xe)=>{const Dt=Qe.validate,zt=ze.getNonEmptyElements(),Ut=ze.getWhitespaceElements(),kt=xI(U1("script,style,head,html,body,title,meta,param"),ze.getBlockElements()),gt=$p(ze),Pt=/[ \t\r\n]+/g,ye=/^[ \t\r\n]+/,xe=/[ \t\r\n]+$/,Le=at=>{let Yt=at.parent;for(;et(Yt);){if(Yt.name in Ut)return!0;Yt=Yt.parent}return!1},Ge=at=>at.name in kt||co(ze,at)||ju(at.name)&&at.parent===we,mt=(at,Yt)=>!et(Yt?at.prev:at.next)&&!rr(at.parent)&&Ge(at.parent)&&(at.parent!==we||!0===Xe.isRootContent);return[at=>{var Yt,sn,xr;if(3===at.type&&!Le(at)){let Jt=null!==(Yt=at.value)&&void 0!==Yt?Yt:"";Jt=Jt.replace(Pt," "),xr=Ge,(et(sn=at.prev)&&(xr(sn)||"br"===sn.name)||mt(at,!0))&&(Jt=Jt.replace(ye,"")),0===Jt.length?at.remove():at.value=Jt}},at=>{var Yt,xr,Zr;if(1===at.type){const Jt=ze.getElementRule(at.name);if(Dt&&Jt){const sn=jh(ze,zt,Ut,at);Jt.paddInEmptyBlock&&sn&&(xr=>{let Zr=xr;for(;et(Zr);){if(Zr.name in gt)return jh(ze,zt,Ut,Zr);Zr=Zr.parent}return!1})(at)?y1(Qe,Xe,Ge,at):Jt.removeEmpty&&sn?Ge(at)?at.remove():at.unwrap():Jt.paddEmpty&&(sn||_S(xr=at,"#text")&&(null===(Zr=xr?.firstChild)||void 0===Zr?void 0:Zr.value)===Ro)&&y1(Qe,Xe,Ge,at)}}else if(3===at.type&&!Le(at)){let Jt=null!==(Yt=at.value)&&void 0!==Yt?Yt:"";(at.next&&Ge(at.next)||mt(at,!1))&&(Jt=Jt.replace(xe,"")),0===Jt.length?at.remove():at.value=Jt}}]})(re,u,m,V),de=[],Ne={nodes:{},attributes:{}},ce=we=>bS(T(),E(),we,Ne);if(((we,ze,Qe)=>{const Xe=[];for(let Dt=we,zt=Dt;Dt;zt=Dt,Dt=Dt.walk()){const Ut=Dt;Se(ze,kt=>kt(Ut)),rr(Ut.parent)&&Ut!==we?Dt=zt:Xe.push(Ut)}for(let Dt=Xe.length-1;Dt>=0;Dt--){const zt=Xe[Dt];Se(Qe,Ut=>Ut(zt))}})(re,[ue,ce],[he,$?we=>{return Qe=de,void(Qi(u,ze=we)&&Qe.push(ze));var ze,Qe}:Qt]),de.reverse(),$&&de.length>0)if(V.context){const{pass:we,fail:ze}=no(de,Qe=>Qe.parent===re);fi(ze,u,re,ce),V.invalid=we.length>0}else fi(de,u,re,ce);const fe=((we,ze)=>{var Qe;const Xe=null!==(Qe=ze.forced_root_block)&&void 0!==Qe?Qe:we.forced_root_block;return!1===Xe?"":!0===Xe?"p":Xe})(m,V);return fe&&("body"===re.name||V.isRootContent)&&((we,ze)=>{const Qe=xI(U1("script,style,head,html,body,title,meta,param"),u.getBlockElements()),Xe=/^[ \t\r\n]+/,Dt=/[ \t\r\n]+$/;let zt=we.firstChild,Ut=null;const kt=gt=>{var Pt,ye;gt&&(zt=gt.firstChild,zt&&3===zt.type&&(zt.value=null===(Pt=zt.value)||void 0===Pt?void 0:Pt.replace(Xe,"")),zt=gt.lastChild,zt&&3===zt.type&&(zt.value=null===(ye=zt.value)||void 0===ye?void 0:ye.replace(Dt,"")))};if(u.isValidChild(we.name,ze.toLowerCase())){for(;zt;){const gt=zt.next;F(Qe,zt)?(Ut||(Ut=new Xo(ze,1),Ut.attr(m.forced_root_block_attrs),we.insert(Ut,zt)),Ut.append(zt)):(kt(Ut),Ut=null),zt=gt}kt(Ut)}})(re,fe),V.invalid||xS(Ne,V),re}};return((H,V)=>{var U,$;const K=H.schema;H.addAttributeFilter("href",he=>{let de=he.length;const _e=Ne=>{const ce=Ne?Ke.trim(Ne):"";return/\b(noopener)\b/g.test(ce)?ce:ce.split(" ").filter(we=>we.length>0).concat(["noopener"]).sort().join(" ")};if(!V.allow_unsafe_link_target)for(;de--;){const Ne=he[de];"a"===Ne.name&&"_blank"===Ne.attr("target")&&Ne.attr("rel",_e(Ne.attr("rel")))}}),V.allow_html_in_named_anchor||H.addAttributeFilter("id,name",he=>{let de,_e,Ne,ce,fe=he.length;for(;fe--;)if(ce=he[fe],"a"===ce.name&&ce.firstChild&&!ce.attr("href"))for(Ne=ce.parent,de=ce.lastChild;de&&Ne;)_e=de.prev,Ne.insert(de,ce),de=_e}),V.fix_list_elements&&H.addNodeFilter("ul,ol",he=>{let de,_e,Ne=he.length;for(;Ne--;)if(de=he[Ne],_e=de.parent,_e&&("ul"===_e.name||"ol"===_e.name))if(de.prev&&"li"===de.prev.name)de.prev.append(de);else{const ce=new Xo("li",1);ce.attr("style","list-style-type: none"),de.wrap(ce)}});const te=K.getValidClasses();V.validate&&te&&H.addAttributeFilter("class",he=>{var de;let _e=he.length;for(;_e--;){const Ne=he[_e],ce=null!==(de=Ne.attr("class"))&&void 0!==de?de:"",fe=Ke.explode(ce," ");let we="";for(let ze=0;ze<fe.length;ze++){const Qe=fe[ze];let Xe=!1,Dt=te["*"];Dt&&Dt[Qe]&&(Xe=!0),Dt=te[Ne.name],!Xe&&Dt&&Dt[Qe]&&(Xe=!0),Xe&&(we&&(we+=" "),we+=Qe)}we.length||(we=null),Ne.attr("class",we)}}),((he,de)=>{const{blob_cache:_e}=de;if(_e){const Ne=ce=>{const fe=ce.attr("src");var we;(we=ce).attr("src")===On.transparentSrc||et(we.attr("data-mce-placeholder"))||(we=>et(we.attr("data-mce-bogus")))(ce)||rr(fe)||z1(_e,fe,!0).each(we=>{ce.attr("src",we.blobUri())})};he.addAttributeFilter("src",ce=>Se(ce,Ne))}})(H,V);const re=null!==(U=V.sandbox_iframes)&&void 0!==U&&U,ue=bi(null!==($=V.sandbox_iframes_exclusions)&&void 0!==$?$:[]);V.convert_unsafe_embeds&&H.addNodeFilter("object,embed",he=>Se(he,de=>{de.replace((({type:_e,src:Ne,width:ce,height:fe}={},we,ze)=>{const Qe=ct(Dt=_e)?"iframe":WS(Dt,"image")?"img":WS(Dt,"video")?"video":WS(Dt,"audio")?"audio":"iframe",Xe=new Xo(Qe,1);var Dt;return Xe.attr("audio"===Qe?{src:Ne}:{src:Ne,width:ce,height:fe}),"audio"!==Qe&&"video"!==Qe||Xe.attr("controls",""),"iframe"===Qe&&we&&aI(Xe,ze),Xe})({type:de.attr("type"),src:de.attr("object"===de.name?"data":"src"),width:de.attr("width"),height:de.attr("height")},re,ue))})),re&&H.addNodeFilter("iframe",he=>Se(he,de=>aI(de,ue)))})(z,m),(V=m).inline_styles&&((s,u,d)=>{var f;const m=Uv();var v,x,C;u.convert_fonts_to_spans&&(v=s,x=m,C=Ke.explode(null!==(f=u.font_size_legacy_values)&&void 0!==f?f:""),v.addNodeFilter("font",T=>{Se(T,k=>{const D=x.parse(k.attr("style")),E=k.attr("color"),P=k.attr("face"),F=k.attr("size");var z;E&&(D.color=E),P&&(D["font-family"]=P),F&&Yr(F).each(z=>{D["font-size"]=C[z-1]}),k.name="span",k.attr("style",x.serialize(D)),z=k,Se(["color","face","size"],V=>{z.attr(V,null)})})})),((v,x,C)=>{v.addNodeFilter("strike",T=>{const k="html4"!==x.type;Se(T,D=>{if(k)D.name="s";else{const E=C.parse(D.attr("style"));E["text-decoration"]="line-through",D.name="span",D.attr("style",C.serialize(E))}})})})(s,d,m)})(z,V,u),z;var V},vy=(s,u,d)=>{const f=yl(v=s)?pa({validate:!1}).serialize(v):v,m=u(f);var v;if(m.isDefaultPrevented())return m;if(yl(s)){if(m.content!==f){const v=$h({validate:!1,forced_root_block:!1,...d}).parse(m.content,{context:s.name});return{...m,content:v}}return{...m,content:s}}return m},Kh=s=>({sanitize:K_(s),sandbox_iframes:Q_(s),sandbox_iframes_exclusions:ew(s)}),_I=(s,u)=>{if(u.no_events)return ci.value(u);{const d=s.dispatch("BeforeGetContent",u);return d.isDefaultPrevented()?ci.error(W0(s,{content:"",...d}).content):ci.value(d)}},wI=(s,u,d)=>d.no_events?u:vy(u,m=>W0(s,{...d,content:m}),Kh(s)).content,Y1=(s,u)=>{if(u.no_events)return ci.value(u);{const d=vy(u.content,f=>{return m=s,v={...u,content:f},m.dispatch("BeforeSetContent",v);var m,v},Kh(s));return d.isDefaultPrevented()?(ww(s,d),ci.error(void 0)):ci.value(d)}},vc=(s,u,d)=>{d.no_events||ww(s,{...d,content:u})},oC=(s,u,d)=>({element:s,width:u,rows:d}),X1=(s,u)=>({element:s,cells:u}),SI=(s,u)=>({x:s,y:u}),iC=(s,u)=>Ia(s,u).bind(Yr).getOr(1),CI=(s,u,d)=>{const f=s.rows;return!!(f[d]?f[d].cells:[])[u]},aC=s=>Gr(s,(u,d)=>d.cells.length>u?d.cells.length:u,0),sC=(s,u)=>{const d=s.rows;for(let f=0;f<d.length;f++){const m=d[f].cells;for(let v=0;v<m.length;v++)if(_n(m[v],u))return j.some(SI(v,f))}return j.none()},MI=(s,u,d,f,m)=>{const v=[],x=s.rows;for(let C=d;C<=m;C++){const T=x[C].cells,k=u<f?T.slice(u,f+1):T.slice(f,u+1);v.push(X1(x[C].element,k))}return v},TI=s=>((u,d)=>{const f=Xl(u.element),m=er("tbody");return ee(m,d),q(f,m),f})(s,Ee(s.rows,d=>{const f=Ee(d.cells,v=>{const x=tm(v);return go(x,"colspan"),go(x,"rowspan"),x}),m=Xl(d.element);return ee(m,f),m})),q1=()=>j0([]),Z1=(s,u)=>u>=0&&u<s.length&&nc(s.charAt(u)),kI=s=>Yi(s.innerText),II=s=>Bt(s)?s.outerHTML:Je(s)?Xp.encodeRaw(s.data,!1):Hc(s)?"\x3c!--"+s.data+"--\x3e":"",DI=$o(()=>document.implementation.createHTMLDocument("undo")),$1=s=>{const u=s.serializer.getTempAttrs(),d=K0(s.getBody(),u);return null!==d.querySelector("iframe")?{type:"fragmented",fragments:dt(Ee(br(d.childNodes),Lr(Yi,II)),f=>f.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Yi(d.innerHTML),bookmark:null,beforeBookmark:null}},lC=(s,u,d)=>{const f=d?u.beforeBookmark:u.bookmark;"fragmented"===u.type?((s,u)=>{((d,f)=>{let m=0;Se(d,v=>{var x,C;0===v[0]?m++:1===v[0]?(((x,C,T)=>{const k=(D=>{let E;const P=document.createElement("div"),F=document.createDocumentFragment();for(D&&(P.innerHTML=D);E=P.firstChild;)F.appendChild(E);return F})(C);x.hasChildNodes()&&T<x.childNodes.length?x.insertBefore(k,x.childNodes[T]):x.appendChild(k)})(f,v[1],m),m++):2===v[0]&&(C=m,(x=f).hasChildNodes()&&C<x.childNodes.length&&x.removeChild(x.childNodes[C]))})})(((d,f)=>{const m=d.length+f.length+2,v=new Array(m),x=new Array(m),C=(E,P,F,z,H)=>{const V=k(E,P,F,z);if(null===V||V.start===P&&V.diag===P-z||V.end===E&&V.diag===E-F){let U=E,$=F;for(;U<P||$<z;)U<P&&$<z&&d[U]===f[$]?(H.push([0,d[U]]),++U,++$):P-E>z-F?(H.push([2,d[U]]),++U):(H.push([1,f[$]]),++$)}else{C(E,V.start,F,V.start-V.diag,H);for(let U=V.start;U<V.end;++U)H.push([0,d[U]]);C(V.end,P,V.end-V.diag,z,H)}},T=(E,P,F,z)=>{let H=E;for(;H-P<z&&H<F&&d[H]===f[H-P];)++H;return{start:E,end:H,diag:P}},k=(E,P,F,z)=>{const H=P-E,V=z-F;if(0===H||0===V)return null;const U=H-V,$=V+H,K=($%2==0?$:$+1)/2;let te,re,ue,he,de;for(v[1+K]=E,x[1+K]=P+1,te=0;te<=K;++te){for(re=-te;re<=te;re+=2){for(ue=re+K,v[ue]=re===-te||re!==te&&v[ue-1]<v[ue+1]?v[ue+1]:v[ue-1]+1,he=v[ue],de=he-E+F-re;he<P&&de<z&&d[he]===f[de];)v[ue]=++he,++de;if(U%2!=0&&U-te<=re&&re<=U+te&&x[ue-U]<=v[ue])return T(x[ue-U],re+E-F,P,z)}for(re=U-te;re<=U+te;re+=2){for(ue=re+K-U,x[ue]=re===U-te||re!==U+te&&x[ue+1]<=x[ue-1]?x[ue+1]-1:x[ue-1],he=x[ue]-1,de=he-E+F-re;he>=E&&de>=F&&d[he]===f[de];)x[ue]=he--,de--;if(U%2==0&&-te<=re&&re<=te&&x[ue]<=v[ue+U])return T(x[ue],re+E-F,P,z)}}return null},D=[];return C(0,d.length,0,f.length,D),D})(Ee(br(u.childNodes),II),s),u)})(u.fragments,s.getBody()):s.setContent(u.content,{format:"raw",no_selection:!et(f)||!cw(f)||!f.isFakeCaret}),f&&(s.selection.moveToBookmark(f),s.selection.scrollIntoView())},K1=s=>"fragmented"===s.type?s.fragments.join(""):s.content,uC=s=>{const u=er("body",DI());return $e(u,K1(s)),Se(zn(u,"*[data-mce-bogus]"),Te),it(u)},J1=(s,u)=>{return!(!s||!u)&&(f=u,!(K1(s)!==K1(f))||((d,f)=>uC(d)===uC(f))(s,u));var f},Q1=s=>0===s.get(),xy=(s,u,d)=>{Q1(d)&&(s.typing=u)},cC=(s,u)=>{s.typing&&(xy(s,!1,u),s.add())},dC=s=>({init:{bindEvents:Qt},undoManager:{beforeChange:(u,d)=>{return f=s,v=d,void(Q1(u)&&v.set(lf(f.selection)));var f,v},add:(u,d,f,m,v,x)=>((C,T,k,D,E,P,F)=>{const z=$1(C),H=Ke.extend(P||{},z);if(!Q1(D)||C.removed)return null;const V=T.data[k.get()];if(C.dispatch("BeforeAddUndo",{level:H,lastLevel:V,originalEvent:F}).isDefaultPrevented()||V&&J1(V,H))return null;T.data[k.get()]&&E.get().each(K=>{T.data[k.get()].beforeBookmark=K});const U=wE(C);if(U&&T.data.length>U){for(let K=0;K<T.data.length-1;K++)T.data[K]=T.data[K+1];T.data.length--,k.set(T.data.length)}H.bookmark=lf(C.selection),k.get()<T.data.length-1&&(T.data.length=k.get()+1),T.data.push(H),k.set(T.data.length-1);const $={level:H,lastLevel:V,originalEvent:F};return k.get()>0?(C.setDirty(!0),C.dispatch("AddUndo",$),C.dispatch("change",$)):C.dispatch("AddUndo",$),H})(s,u,d,f,m,v,x),undo:(u,d,f)=>((m,v,x,C)=>{let T;return v.typing&&(v.add(),v.typing=!1,xy(v,!1,x)),C.get()>0&&(C.set(C.get()-1),T=v.data[C.get()],lC(m,T,!0),m.setDirty(!0),m.dispatch("Undo",{level:T})),T})(s,u,d,f),redo:(u,d)=>((f,m,v)=>{let x;return m.get()<v.length-1&&(m.set(m.get()+1),x=v[m.get()],lC(f,x,!1),f.setDirty(!0),f.dispatch("Redo",{level:x})),x})(s,u,d),clear:(u,d)=>{return f=s,v=d,(m=u).data=[],v.set(0),m.typing=!1,void f.dispatch("ClearUndos");var f,m,v},reset:u=>{return(d=u).clear(),void d.add();var d},hasUndo:(u,d)=>{return f=s,m=u,d.get()>0||m.typing&&m.data[0]&&!J1($1(f),m.data[0]);var f,m},hasRedo:(u,d)=>{return f=u,d.get()<f.data.length-1&&!f.typing;var f},transact:(u,d,f)=>{return x=f,cC(m=u,d),m.beforeChange(),m.ignore(x),m.add();var m,x},ignore:(u,d)=>((f,m)=>{try{f.set(f.get()+1),m()}finally{f.set(f.get()-1)}})(u,d),extra:(u,d,f,m)=>((v,x,C,T,k)=>{if(x.transact(T)){const D=x.data[C.get()].bookmark,E=x.data[C.get()-1];lC(v,E,!0),x.transact(k)&&(x.data[C.get()-1].beforeBookmark=D)}})(s,u,d,f,m)},formatter:{match:(u,d,f,m)=>$f(s,u,d,f,m),matchAll:(u,d)=>((f,m,v)=>{const x=[],C={},T=f.selection.getStart();return f.dom.getParent(T,k=>{for(let D=0;D<m.length;D++){const E=m[D];!C[E]&&vl(f,k,E,v)&&(C[E]=!0,x.push(E))}},f.dom.getRoot()),x})(s,u,d),matchNode:(u,d,f,m)=>vl(s,u,d,f,m),canApply:u=>((d,f)=>{const m=d.formatter.get(f),v=d.dom;if(m&&d.selection.isEditable()){const x=d.selection.getStart(),C=ic(v,x);for(let T=m.length-1;T>=0;T--){const k=m[T];if(!wn(k))return!0;for(let D=C.length-1;D>=0;D--)if(v.is(C[D],k.selector))return!0}}return!1})(s,u),closest:u=>((d,f)=>{const m=v=>_n(v,ge(d.getBody()));return j.from(d.selection.getStart(!0)).bind(v=>Jm(ge(v),x=>Zo(f,C=>{return vl(d,x.dom,k=C)?j.some(k):j.none();var k}),m)).getOrNull()})(s,u),apply:(u,d,f)=>iy(s,u,d,f),remove:(u,d,f,m)=>Rn(s,u,d,f,m),toggle:(u,d,f)=>((m,v,x,C)=>{const T=m.formatter.get(v);T&&(!$f(m,v,x,C)||"toggle"in T[0]&&!T[0].toggle?iy(m,v,x,C):Rn(m,v,x,C))})(s,u,d,f),formatChanged:(u,d,f,m,v)=>{return((P,F,z,H,V,U)=>{const $=F.get();Se(z.split(","),K=>{const te=cr($,K).getOrThunk(()=>{const ue={withSimilar:{state:Oo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Oo(!1),similar:!1,callbacks:[]},withVars:[]};return $[K]=ue,ue}),re=()=>{const ue=VS(P);return oI(P,ue,K,V,U).isSome()};if(ct(U)){const ue=V?te.withSimilar:te.withoutSimilar;ue.callbacks.push(H),1===ue.callbacks.length&&ue.state.set(re())}else te.withVars.push({state:Oo(re()),similar:V,vars:U,callback:H})}),F.set($)})(s,C=u,T=d,k=f,m,v),{unbind:()=>((P,F,z)=>{const H=P.get();Se(F.split(","),V=>cr(H,V).each(U=>{H[V]={withSimilar:{...U.withSimilar,callbacks:dt(U.withSimilar.callbacks,$=>$!==z)},withoutSimilar:{...U.withoutSimilar,callbacks:dt(U.withoutSimilar.callbacks,$=>$!==z)},withVars:dt(U.withVars,$=>$.callback!==z)}})),P.set(H)})(C,T,k)};var C,T,k}},editor:{getContent:u=>{return f=u,j.from((d=s).getBody()).fold(Ve("tree"===f.format?new Xo("body",11):""),m=>((s,u,d)=>{let f;return f="raw"===u.format?Ke.trim(Yi(K0(d,s.serializer.getTempAttrs()).innerHTML)):"text"===u.format?((m,v)=>{const x=m.getDoc(),C=Os(ge(m.getBody())),T=er("div",x);uo(T,"data-mce-bogus","all"),Vu(T,{position:"fixed",left:"-9999999px",top:"0"}),$e(T,v.innerHTML),Jw(T),Qw(T);const k=Pc(E=C)?E:ge(_i(E).dom.body);var E;q(k,T);const D=Yi(T.dom.innerText);return be(T),D})(s,d):"tree"===u.format?s.serializer.serialize(d,u):((m,v)=>{const x=di(m),C=new RegExp(`^(<${x}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${x}>[\r\n]*|<br \\/>[\r\n]*)$`);return v.replace(C,"")})(s,s.serializer.serialize(d,u)),"text"!==u.format&&!ps(ge(d))&&wt(f)?Ke.trim(f):f})(d,f,m));var d,f},setContent:(u,d)=>{return m=u,v=d,j.from((f=s).getBody()).map(x=>yl(m)?((C,T,k,D)=>{$s(C.parser.getNodeFilters(),C.parser.getAttributeFilters(),k);const E=pa({validate:!1},C.schema).serialize(k),P=Yi(ps(ge(T))?E:Ke.trim(E));return Km(C,P,D.no_selection),{content:k,html:P}})(f,x,m,v):((C,T,k,D)=>{if(0===(k=Yi(k)).length||/^\s+$/.test(k)){const E='<br data-mce-bogus="1">';"TABLE"===T.nodeName?k="<tr><td>"+E+"</td></tr>":/^(UL|OL)$/.test(T.nodeName)&&(k="<li>"+E+"</li>");const P=di(C);return C.schema.isValidChild(T.nodeName.toLowerCase(),P.toLowerCase())?(k=E,k=C.dom.createHTML(P,Us(C),k)):k||(k=E),Km(C,k,D.no_selection),{content:k,html:k}}{"raw"!==D.format&&(k=pa({validate:!1},C.schema).serialize(C.parser.parse(k,{isRootContent:!0,insert:!0})));const E=ps(ge(T))?k:Ke.trim(k);return Km(C,E,D.no_selection),{content:E,html:E}}})(f,x,m,v)).getOr({content:m,html:yl(v.content)?"":v.content});var f,m,v},insertContent:(u,d)=>_1(s,u,d),addVisual:u=>((d,f)=>{const m=d.dom,v=et(f)?f:d.getBody();Se(m.select("table,a",v),x=>{switch(x.nodeName){case"TABLE":const C=$i(d),T=m.getAttrib(x,"border");T&&"0"!==T||!d.hasVisual?m.removeClass(x,C):m.addClass(x,C);break;case"A":if(!m.getAttrib(x,"href")){const k=m.getAttrib(x,"name")||x.id,D=VA(d);k&&d.hasVisual?m.addClass(x,D):m.removeClass(x,D)}}}),d.dispatch("VisualAid",{element:f,hasVisual:d.hasVisual})})(s,u)},selection:{getContent:(u,d)=>((f,m,v={})=>{const x=(C=v,T=m,{...C,format:T,get:!0,selection:!0,getInner:!0});var C,T;return _I(f,x).fold(Ir,C=>{const T=((k,D)=>{if("text"===D.format)return j.from((E=k).selection.getRng()).map(P=>{var F;const z=j.from(E.dom.getParent(P.commonAncestorContainer,E.dom.isBlock)),H=E.getBody(),V=z.map(ue=>ue.nodeName).getOr("div").toLowerCase(),U=ge(P.cloneContents());Jw(U),Qw(U);const $=E.dom.add(H,V,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},U.dom),K=kI($),te=Yi(null!==(F=$.textContent)&&void 0!==F?F:"");if(E.dom.remove($),Z1(te,0)||Z1(te,te.length-1)){const re=z.getOr(H),ue=kI(re),he=ue.indexOf(K);return-1===he?K:(Z1(ue,he-1)?" ":"")+K+(Z1(ue,he+K.length)?" ":"")}return K}).getOr("");var E;{const E=((P,F)=>{const z=P.selection.getRng(),H=P.dom.create("body"),V=P.selection.getSel(),U=Bh(P,R0(V)),$=F.contextual?((s,u,d)=>{const f=pw(u,s);return f.length>0?((s,u)=>{return(d=s,f=u[0],zc(f,"table",Pe(_n,d))).bind(d=>{const f=u[0],m=u[u.length-1],v=(x=>{const C=oC(Xl(x),0,[]);return Se(zn(x,"tr"),(T,k)=>{Se(zn(T,"td,th"),(D,E)=>{((P,F,z,H,V)=>{const U=iC(V,"rowspan"),$=iC(V,"colspan"),K=P.rows;for(let te=z;te<z+U;te++){K[te]||(K[te]=X1(tm(H),[]));for(let re=F;re<F+$;re++)K[te].cells[re]=te===z&&re===F?V:Xl(V)}})(C,((P,F,z)=>{for(;CI(P,F,z);)F++;return F})(C,E,k),k,T,D)})}),oC(C.element,aC(C.rows),C.rows)})(d);return(x=v,C=f,T=m,sC(x,C).bind(k=>sC(x,T).map(D=>((E,P,F)=>{const z=P.x,H=P.y,V=F.x,U=F.y,$=H<U?MI(E,z,H,V,U):MI(E,z,U,V,H);return oC(E.element,aC($),$)})(x,k,D)))).map(x=>j0([TI(x)]));var x,C,T}).getOrThunk(q1);var d,f})(s,f):(m=s,x=d,(v=u).length>0&&v[0].collapsed?q1():(C=m,k=x,((D,E)=>{const P=Gr(E,(F,z)=>(q(z,F),z),D);return E.length>0?j0([P]):P})(ge((T=v[0]).cloneContents()),((s,u,d)=>{const f=ge(u.commonAncestorContainer),m=lu(f,s),v=dt(m,T=>d.isWrapper(Pn(T))),x=(k=u,Sr(T=m,D=>"li"===Pn(D)&&Tm(D,k)).fold(Ve([]),D=>{return(E=T,Sr(E,P=>"ul"===Pn(P)||"ol"===Pn(P))).map(E=>{const P=er(Pn(E)),F=Lt(Fu(E),(z,H)=>xt(H,"list-style"));return Vu(P,F),[er("li"),P]}).getOr([]);var E})),C=v.concat(x.length?x:(T=>Mr(T)?rs(T).filter(T_).fold(Ve([]),k=>[T,k]):T_(T)?[T]:[])(f));var T,k;return Ee(C,Xl)})(C,T,k))));var m,v,x,C,T,k})(ge(P.getBody()),U,P.schema).dom:z.cloneContents();return $&&H.appendChild($),P.selection.serializer.serialize(H,F)})(k,D);return"tree"===D.format?E:k.selection.isCollapsed()?"":E}})(f,C);return wI(f,T,C)})})(s,u,d)},autocompleter:{addDecoration:Qt,removeDecoration:Qt},raw:{getModel:()=>j.none()}}),Bo=s=>Zt(s.plugins,"rtc"),eb=s=>s.rtcInstance?s.rtcInstance:dC(s),ro=s=>{const u=s.rtcInstance;if(u)return u;throw new Error("Failed to get RTC instance not yet initialized.")},yd=s=>ro(s).init.bindEvents(),NI=s=>0===s.dom.length?(be(s),j.none()):j.some(s),EI=(s,u,d,f,m)=>{s.bind(v=>((f?Ei:i1)(v.dom,f?v.dom.length:0,m),u.filter(ai).map(x=>((C,T,k,D,E)=>{const P=C.dom,F=T.dom,z=D?P.length:F.length;D?(a1(P,F,E,!1,!D),k.setStart(F,z)):(a1(F,P,E,!1,!D),k.setEnd(F,z))})(v,x,d,f,m)))).orThunk(()=>{return(x=u,C=f,x.filter(T=>Lf.isBookmarkNode(T.dom)).bind(C?Oc:zl)).or(u).filter(ai).map(x=>((C,T,k)=>{rs(C).each(D=>{const E=C.dom;T&&Um(D,Oe(E,0),k)?i1(E,0,k):!T&&Wf(D,Oe(E,E.length),k)&&Ei(E,E.length,k)})})(x,f,m));var x,C})},LI=(s,u,d)=>{if(Zt(s,u)){const f=dt(s[u],m=>m!==d);0===f.length?delete s[u]:s[u]=f}},_y=s=>!(!s||!s.ownerDocument)&&Go(ge(s.ownerDocument),ge(s)),hC=(s,u,d,f)=>{let m,v;const{selectorChangedWithUnbind:x}=((V,U)=>{let $,K;const te=(ue,he)=>Sr(he,de=>V.is(de,ue)),re=ue=>V.getParents(ue,void 0,V.getRoot());return{selectorChangedWithUnbind:(ue,he)=>($||($={},K={},U.on("NodeChange",de=>{const _e=de.element,Ne=re(_e),ce={};sr($,(fe,we)=>{te(we,Ne).each(ze=>{K[we]||(Se(fe,Qe=>{Qe(!0,{node:ze,selector:we,parents:Ne})}),K[we]=fe),ce[we]=fe})}),sr(K,(fe,we)=>{ce[we]||(delete K[we],Se(fe,ze=>{ze(!1,{node:_e,selector:we,parents:Ne})}))})})),$[ue]||($[ue]=[]),$[ue].push(he),te(ue,re(U.selection.getStart())).each(()=>{K[ue]=$[ue]}),{unbind:()=>{LI($,ue,he),LI(K,ue,he)}})}})(s,f),C=(V,U)=>(($,K,te={})=>{const re=(ue=te,he=K,{format:"html",...ue,set:!0,selection:!0,content:he});var ue,he;Y1($,re).each(ue=>{const he=((_e,Ne)=>{if("raw"!==Ne.format){const ce=_e.selection.getRng(),fe=_e.dom.getParent(ce.commonAncestorContainer,_e.dom.isBlock),we=fe?{context:fe.nodeName.toLowerCase()}:{},ze=_e.parser.parse(Ne.content,{forced_root_block:!1,...we,...Ne});return pa({validate:!1},_e.schema).serialize(ze)}return Ne.content})($,ue),de=$.selection.getRng();((_e,Ne,ce)=>{const fe=j.from(Ne.firstChild).map(ge),we=j.from(Ne.lastChild).map(ge);_e.deleteContents(),_e.insertNode(Ne);const ze=fe.bind(zl).filter(ai).bind(NI),Qe=we.bind(Oc).filter(ai).bind(NI);EI(ze,fe,_e,!0,ce),EI(Qe,we,_e,!1,ce),_e.collapse(!1)})(de,de.createContextualFragment(he),$.schema),$.selection.setRng(de),Oh($,de),vc($,he,ue)})})(f,V,U),T=V=>{const U=D();U.collapse(!!V),E(U)},k=()=>u.getSelection?u.getSelection():u.document.selection,D=()=>{let V;const U=(K,te,re)=>{try{return te.compareBoundaryPoints(K,re)}catch{return-1}},$=u.document;if(et(f.bookmark)&&!ld(f)){const K=q0(f);if(K.isSome())return K.map(te=>Bh(f,[te])[0]).getOr($.createRange())}try{const K=k();K&&!Ea(K.anchorNode)&&(V=K.rangeCount>0?K.getRangeAt(0):$.createRange(),V=Bh(f,[V])[0])}catch{}if(V||(V=$.createRange()),sl(V.startContainer)&&V.collapsed){const K=s.getRoot();V.setStart(K,0),V.setEnd(K,0)}return m&&v&&(0===U(V.START_TO_START,V,m)&&0===U(V.END_TO_END,V,m)?V=v:(m=null,v=null)),V},E=(V,U)=>{if(!((K=V)&&_y(K.startContainer)&&_y(K.endContainer)))return;var K;const $=k();if(V=f.dispatch("SetSelectionRange",{range:V,forward:U}).range,$){v=V;try{$.removeAllRanges(),$.addRange(V)}catch{}!1===U&&$.extend&&($.collapse(V.endContainer,V.endOffset),$.extend(V.startContainer,V.startOffset)),m=$.rangeCount>0?$.getRangeAt(0):null}if(!V.collapsed&&V.startContainer===V.endContainer&&$?.setBaseAndExtent&&V.endOffset-V.startOffset<2&&V.startContainer.hasChildNodes()){const K=V.startContainer.childNodes[V.startOffset];K&&"IMG"===K.nodeName&&($.setBaseAndExtent(V.startContainer,V.startOffset,V.endContainer,V.endOffset),$.anchorNode===V.startContainer&&$.focusNode===V.endContainer||$.setBaseAndExtent(K,0,K,1))}f.dispatch("AfterSetSelectionRange",{range:V,forward:U})},P=()=>{const V=k(),U=V?.anchorNode,$=V?.focusNode;if(!V||!U||!$||Ea(U)||Ea($))return!0;const K=s.createRng(),te=s.createRng();try{K.setStart(U,V.anchorOffset),K.collapse(!0),te.setStart($,V.focusOffset),te.collapse(!0)}catch{return!0}return K.compareBoundaryPoints(K.START_TO_START,te)<=0},F={dom:s,win:u,serializer:d,editor:f,expand:(V={type:"word"})=>E(ad(s).expand(D(),V)),collapse:T,setCursorLocation:(V,U)=>{const $=s.createRng();et(V)&&et(U)?($.setStart(V,U),$.setEnd(V,U),E($),T(!1)):(Am(s,$,f.getBody(),!0),E($))},getContent:V=>((U,$={})=>{return te=$.format?$.format:"html",re=$,ro(U).selection.getContent(te,re);var te,re})(f,V),setContent:C,getBookmark:(V,U)=>z.getBookmark(V,U),moveToBookmark:V=>z.moveToBookmark(V),select:(V,U)=>{return($=s,K=V,te=U,j.from(K).bind(re=>j.from(re.parentNode).map(ue=>{const he=$.nodeIndex(re),de=$.createRng();return de.setStart(ue,he),de.setEnd(ue,he+1),te&&(Am($,de,re,!0),Am($,de,re,!1)),de}))).each(E),V;var $,K,te},isCollapsed:()=>{const V=D(),U=k();return!(!V||V.item)&&(V.compareEndPoints?0===V.compareEndPoints("StartToEnd",V):!U||V.collapsed)},isEditable:()=>{const V=D(),U=f.getBody().querySelectorAll('[data-mce-selected="1"]');return U.length>0?lt(U,$=>s.isEditable($.parentElement)):gk(s,V)},isForward:P,setNode:V=>(C(s.getOuterHTML(V)),V),getNode:()=>((V,U)=>{if(!U)return V;let $=U.startContainer,K=U.endContainer;const te=U.startOffset,re=U.endOffset;let ue=U.commonAncestorContainer;U.collapsed||($===K&&re-te<2&&$.hasChildNodes()&&(ue=$.childNodes[te]),Je($)&&Je(K)&&($=$.length===te?Xw($.nextSibling,!0):$.parentNode,K=0===re?Xw(K.previousSibling,!1):K.parentNode,$&&$===K&&(ue=$)));const he=Je(ue)?ue.parentNode:ue;return Hu(he)?he:V})(f.getBody(),D()),getSel:k,setRng:E,getRng:D,getStart:V=>jw(f.getBody(),D(),V),getEnd:V=>Yw(f.getBody(),D(),V),getSelectedBlocks:(V,U)=>(($,K,te,re)=>{const ue=[],he=$.getRoot(),de=$.getParent(te||jw(he,K,K.collapsed),$.isBlock),_e=$.getParent(re||Yw(he,K,K.collapsed),$.isBlock);if(de&&de!==he&&ue.push(de),de&&_e&&de!==_e){let Ne;const ce=new fr(de,he);for(;(Ne=ce.next())&&Ne!==_e;)$.isBlock(Ne)&&ue.push(Ne)}return _e&&de!==_e&&_e!==he&&ue.push(_e),ue})(s,D(),V,U),normalize:()=>{const V=D(),U=k();if(!(R0(U).length>1)&&ru(f)){const $=lc(s,V);return $.each(K=>{E(K,P())}),$.getOr(V)}return V},selectorChanged:(V,U)=>(x(V,U),F),selectorChangedWithUnbind:x,getScrollContainer:()=>{let V,U=s.getRoot();for(;U&&"BODY"!==U.nodeName;){if(U.scrollHeight>U.clientHeight){V=U;break}U=U.parentNode}return V},scrollIntoView:(V,U)=>{var $;et(V)?(($=f).inline?Bw:dk)($,V,U):Oh(f,D(),U)},placeCaretAt:(V,U)=>E(nk(V,U,f.getDoc())),getBoundingClientRect:()=>{const V=D();return V.collapsed?Oe.fromRangeStart(V).getClientRects()[0]:V.getBoundingClientRect()},destroy:()=>{u=m=v=null,H.destroy()}},z=Lf(F),H=JA(F,f);return F.bookmarkManager=z,F.controlSelection=H,F},wl=(s,u,d)=>{-1===Ke.inArray(u,d)&&(s.addAttributeFilter(d,(f,m)=>{let v=f.length;for(;v--;)f[v].attr(m,null)}),u.push(d))},RI=(s,u)=>{const d=((s,u)=>{const d=["data-mce-selected"],f={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...s},m=u&&u.dom?u.dom:Cr.DOM,v=u&&u.schema?u.schema:Gn(f),x=$h(f,v);return T=f,k=m,(C=x).addAttributeFilter("data-mce-tabindex",(D,E)=>{let P=D.length;for(;P--;){const F=D[P];F.attr("tabindex",F.attr("data-mce-tabindex")),F.attr(E,null)}}),C.addAttributeFilter("src,href,style",(D,E)=>{const P="data-mce-"+E,F=T.url_converter,z=T.url_converter_scope;let H=D.length;for(;H--;){const V=D[H];let U=V.attr(P);void 0!==U?(V.attr(E,U.length>0?U:null),V.attr(P,null)):(U=V.attr(E),"style"===E?U=k.serializeStyle(k.parseStyle(U),V.name):F&&(U=F.call(z,U,E,V.name)),V.attr(E,U.length>0?U:null))}}),C.addAttributeFilter("class",D=>{let E=D.length;for(;E--;){const P=D[E];let F=P.attr("class");F&&(F=F.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),P.attr("class",F.length>0?F:null))}}),C.addAttributeFilter("data-mce-type",(D,E,P)=>{let F=D.length;for(;F--;){const z=D[F];"bookmark"===z.attr("data-mce-type")&&!P.cleanup&&(j.from(z.firstChild).exists(V=>{var U;return!ef(null!==(U=V.value)&&void 0!==U?U:"")})?z.unwrap():z.remove())}}),C.addNodeFilter("script,style",(D,E)=>{var P;const F=H=>H.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let z=D.length;for(;z--;){const H=D[z],V=H.firstChild,U=null!==(P=V?.value)&&void 0!==P?P:"";if("script"===E){const $=H.attr("type");$&&H.attr("type","mce-no/type"===$?null:$.replace(/^mce\-/,"")),"xhtml"===T.element_format&&V&&U.length>0&&(V.value="// <![CDATA[\n"+F(U)+"\n// ]]>")}else"xhtml"===T.element_format&&V&&U.length>0&&(V.value="\x3c!--\n"+F(U)+"\n--\x3e")}}),C.addNodeFilter("#comment",D=>{let E=D.length;for(;E--;){const P=D[E],F=P.value;T.preserve_cdata&&0===F?.indexOf("[CDATA[")?(P.name="#cdata",P.type=4,P.value=k.decode(F.replace(/^\[CDATA\[|\]\]$/g,""))):0===F?.indexOf("mce:protected ")&&(P.name="#text",P.type=3,P.raw=!0,P.value=unescape(F).substr(14))}}),C.addNodeFilter("xml:namespace,input",(D,E)=>{let P=D.length;for(;P--;){const F=D[P];7===F.type?F.remove():1===F.type&&("input"!==E||F.attr("type")||F.attr("type","text"))}}),C.addAttributeFilter("data-mce-type",D=>{Se(D,E=>{"format-caret"===E.attr("data-mce-type")&&(E.isEmpty(C.schema.getNonEmptyElements())?E.remove():E.unwrap())})}),C.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(D,E)=>{let P=D.length;for(;P--;)D[P].attr(E,null)}),T.remove_trailing_brs&&(D=T,P=C.schema,C.addNodeFilter("br",(F,z,H)=>{const V=Ke.extend({},P.getBlockElements()),U=P.getNonEmptyElements(),$=P.getWhitespaceElements();V.body=1;const K=te=>te.name in V||co(P,te);for(let te=0,re=F.length;te<re;te++){let ue=F[te],he=ue.parent;if(he&&K(he)&&ue===he.lastChild){let de=ue.prev;for(;de;){const _e=de.name;if("span"!==_e||"bookmark"!==de.attr("data-mce-type")){"br"===_e&&(ue=null);break}de=de.prev}if(ue&&(ue.remove(),jh(P,U,$,he))){const _e=P.getElementRule(he.name);_e&&(_e.removeEmpty?he.remove():_e.paddEmpty&&y1(D,H,K,he))}}else{let de=ue;for(;he&&he.firstChild===de&&he.lastChild===de&&(de=he,!V[he.name]);)he=he.parent;if(de===he){const _e=new Xo("#text",3);_e.value=Ro,ue.replace(_e)}}}})),{schema:v,addNodeFilter:x.addNodeFilter,addAttributeFilter:x.addAttributeFilter,serialize:(C,T={})=>{const k={format:"html",...T},D=(z=C,U=H=k,et(V=F=u)&&V.hasEventListeners("PreProcess")&&!U.no_events?((V,U,$)=>{let K;const te=V.dom;let re=U.cloneNode(!0);const ue=document.implementation;if(ue.createHTMLDocument){const he=ue.createHTMLDocument("");Ke.each("BODY"===re.nodeName?re.childNodes:[re],de=>{he.body.appendChild(he.importNode(de,!0))}),re="BODY"!==re.nodeName?he.body.firstChild:he.body,K=te.doc,te.doc=he}return de={...$,node:re},V.dispatch("PreProcess",de),K&&(te.doc=K),re;var de})(F,z,H):z),E=((F,z,H)=>{const V=Yi(H.getInner?z.innerHTML:F.getOuterHTML(z));return H.selection||ps(ge(z))?V:Ke.trim(V)})(m,D,k),P=((F,z,H)=>{const V=H.selection?{forced_root_block:!1,...H}:H,U=F.parse(z,V);return($=>{const K=re=>"br"===re?.name,te=$.lastChild;if(K(te)){const re=te.prev;K(re)&&(te.remove(),re.remove())}})(U),U})(x,E,k);var F,z,H,V,U;return"tree"===k.format?P:((F,z,H,V,U)=>{var re;return((K,te,re)=>{return!te.no_events&&K?(he=K,de={...te,content:re},he.dispatch("PostProcess",de)).content:re;var he,de})(F,U,(re=V,pa(z,H).serialize(re)))})(u,f,v,P,k)},addRules:v.addValidElements,setRules:v.setValidElements,addTempAttr:Pe(wl,x,d),getTempAttrs:Ve(d),getNodeFilters:x.getNodeFilters,getAttributeFilters:x.getAttributeFilters,removeNodeFilter:x.removeNodeFilter,removeAttributeFilter:x.removeAttributeFilter};var C,T,k,D,P})(s,u);return{schema:d.schema,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:d.serialize,addRules:d.addRules,setRules:d.setRules,addTempAttr:d.addTempAttr,getTempAttrs:d.getTempAttrs,getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter}},_s=(s,u,d={})=>{const f=(m=d,v=u,{format:"html",...m,set:!0,content:v});var m,v;return Y1(s,f).map(m=>{const v=(C=m.content,T=m,eb(s).editor.setContent(C,T));var C,T;return vc(s,v.html,m),v.content}).getOr(u)},qr="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Do=[],fu="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),Sl=[],pC=(s,u)=>{const d=dt(u,f=>Zt(s,f));return Wn(d)},fC=(s,u)=>{const d=Ke.makeMap(s.plugins," "),f=dt(u,m=>Zt(d,m));return Wn(f)},nL=s=>Sr(Sl,u=>u.name===s).fold(()=>s,u=>u.replacedWith?`${s}, replaced by ${u.replacedWith}`:s),ng=Cr.DOM,rg=s=>j.from(s).each(u=>u.destroy()),wy=(()=>{const s={};return{add:(u,d)=>{s[u]=d},get:u=>s[u]?s[u]:{icons:{}},has:u=>Zt(s,u)}})(),Jh=ei.ModelManager,mC=(s,u)=>u.dom[s],yC=(s,u)=>parseInt(Si(u,s),10),rL=Pe(mC,"clientWidth"),oL=Pe(mC,"clientHeight"),OI=Pe(yC,"margin-top"),ya=Pe(yC,"margin-left"),nb=s=>{const u=[],d=()=>{const T=s.theme;return T&&T.getNotificationManagerImpl?T.getNotificationManagerImpl():(()=>{const k=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:k,close:k,getArgs:k}})()},f=()=>j.from(u[0]),m=()=>{f().each(T=>{T.reposition()})},v=T=>{rt(u,k=>k===T).each(k=>{u.splice(k,1)})},x=(T,k=!0)=>{return s.removed||!(E=(D=s).inline?D.getBody():D.getContentAreaContainer(),j.from(E).map(ge)).map(Gl).getOr(!1)?{}:(k&&s.dispatch("BeforeOpenNotification",{notification:T}),Sr(u,D=>{return!((E=d().getArgs(D)).type!==(P=T).type||E.text!==P.text||E.progressBar||E.timeout||P.progressBar||P.timeout);var E,P}).getOrThunk(()=>{s.editorManager.setActive(s);const D=d().open(T,()=>{v(D)},()=>$0(s));return(E=>{u.push(E)})(D),m(),s.dispatch("OpenNotification",{notification:{...D}}),D}));var D,E},C=Ve(u);return(T=s).on("SkinLoaded",()=>{const k=bE(T);k&&x({text:k,type:"warning",timeout:0},!1),m()}),T.on("show ResizeEditor NodeChange",()=>{requestAnimationFrame(m)}),T.on("remove",()=>{Se(u.slice(),k=>{d().close(k)})}),T.addShortcut("alt+F12","Focus to notification",()=>f().map(k=>ge(k.getEl())).each(k=>Ph(k))),{open:x,close:()=>{f().each(T=>{d().close(T),v(T),m()})},getNotifications:C};var T},og=ei.PluginManager,gu=ei.ThemeManager,Sy=s=>{let u=[];const d=()=>{const x=s.theme;return x&&x.getWindowManagerImpl?x.getWindowManagerImpl():(()=>{const C=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:C,openUrl:C,alert:C,confirm:C,close:C}})()},f=(x,C)=>(...T)=>C?C.apply(x,T):void 0,m=x=>{s.dispatch("CloseWindow",{dialog:x}),u=dt(u,C=>C!==x),0===u.length&&s.focus()},v=x=>{s.editorManager.setActive(s),Vm(s),s.ui.show();const C=x();return u.push(T=C),s.dispatch("OpenWindow",{dialog:T}),C;var T};return s.on("remove",()=>{Se(u,x=>{d().close(x)})}),{open:(x,C)=>v(()=>d().open(x,C,m)),openUrl:x=>v(()=>d().openUrl(x,m)),alert:(x,C,T)=>{const k=d();k.alert(x,f(T||k,C))},confirm:(x,C,T)=>{const k=d();k.confirm(x,f(T||k,C))},close:()=>{j.from(u[u.length-1]).each(x=>{d().close(x),m(x)})}}},PI=(s,u)=>{s.notificationManager.open({type:"error",text:u})},ig=(s,u)=>{s._skinLoaded?PI(s,u):s.on("SkinLoaded",()=>{PI(s,u)})},Qh=(s,u,d)=>{G0(s,u,{message:d}),console.error(d)},ep=(s,u,d)=>d?`Failed to load ${s}: ${d} from url ${u}`:`Failed to load ${s} url: ${u}`,Cy=(s,...u)=>{const d=window.console;d&&(d.error?d.error(s,...u):d.log(s,...u))},bc=s=>"content/"+s+"/content.css",BI=(s,u)=>{const d=s.editorManager.baseURL+"/skins/content",f=`content${s.editorManager.suffix}.css`;return Ee(u,m=>tinymce.Resource.has(bc(m))?m:/^[a-z0-9\-]+$/i.test(m)&&!s.inline?`${d}/${m}/${f}`:s.documentBaseURI.toAbsolute(m))},ag=()=>{let s={};const u=(f,m)=>({status:f,resultUri:m}),d=f=>f in s;return{hasBlobUri:d,getResultUri:f=>{const m=s[f];return m?m.resultUri:null},isPending:f=>!!d(f)&&1===s[f].status,isUploaded:f=>!!d(f)&&2===s[f].status,markPending:f=>{s[f]=u(1,null)},markUploaded:(f,m)=>{s[f]=u(2,m)},removeFailed:f=>{delete s[f]},destroy:()=>{s={}}}};let iL=0;const VI=s=>()=>s.notificationManager.open({text:s.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),FI=(s,u)=>((s,u)=>{const d={},f=(T,k)=>new Promise((D,E)=>{const P=new XMLHttpRequest;P.open("POST",u.url),P.withCredentials=u.credentials,P.upload.onprogress=z=>{k(z.loaded/z.total*100)},P.onerror=()=>{E("Image upload failed due to a XHR Transport error. Code: "+P.status)},P.onload=()=>{if(P.status<200||P.status>=300)return void E("HTTP Error: "+P.status);const z=JSON.parse(P.responseText);var H,V;z&&wt(z.location)?D((V=z.location,(H=u.basePath)?H.replace(/\/$/,"")+"/"+V.replace(/^\//,""):V)):E("Invalid JSON: "+P.responseText)};const F=new FormData;F.append("file",T.blob(),T.filename()),P.send(F)}),m=tn(u.handler)?u.handler:f,v=(T,k)=>({url:k,blobInfo:T,status:!0}),x=(T,k)=>({url:"",blobInfo:T,status:!1,error:k}),C=(T,k)=>{Ke.each(d[T],D=>{D(k)}),delete d[T]};return{upload:(T,k)=>{return u.url||m!==f?(E=k,D=Ke.grep(D=T,P=>!s.isUploaded(P.blobUri())),Promise.all(Ke.map(D,P=>{return s.isPending(P.blobUri())?(F=>{const z=F.blobUri();return new Promise(H=>{d[z]=d[z]||[],d[z].push(H)})})(P):(z=m,H=E,s.markPending((F=P).blobUri()),new Promise(V=>{let U,$;try{const K=()=>{U&&(U.close(),$=Qt)},te=ue=>{K(),s.markUploaded(F.blobUri(),ue),C(F.blobUri(),v(F,ue)),V(v(F,ue))},re=ue=>{K(),s.removeFailed(F.blobUri()),C(F.blobUri(),x(F,ue)),V(x(F,ue))};$=ue=>{ue<0||ue>100||j.from(U).orThunk(()=>j.from(H).map(Kr)).each(he=>{U=he,he.progressBar.value(ue)})},z(F,$).then(te,ue=>{re(wt(ue)?{message:ue}:ue)})}catch(K){V(x(F,K))}}));var F,z,H}))):new Promise(D=>{D([])});var D,E}}})(u,{url:mE(s),basePath:IA(s),credentials:yE(s),handler:DA(s)}),bC={remove_similar:!0,inherit:!1},tp={selector:"td,th",...bC},HI={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...tp},tablecellverticalalign:{styles:{"vertical-align":"%value"},...tp},tablecellbordercolor:{styles:{borderColor:"%value"},...tp},tablecellclass:{classes:["%value"],...tp},tableclass:{selector:"table",classes:["%value"],...bC},tablecellborderstyle:{styles:{borderStyle:"%value"},...tp},tablecellborderwidth:{styles:{borderWidth:"%value"},...tp}},ni=Ve(HI),sg=Ke.each,va=Cr.DOM,rb=s=>et(s)&&Ot(s),WI=(s,u)=>{const d=u&&u.schema||Gn({}),f=x=>{const C=wt(x)?{name:x,classes:[],attrs:{}}:x,T=va.create(C.name);return k=T,(D=C).classes.length>0&&va.addClass(k,D.classes.join(" ")),va.setAttribs(k,D.attrs),T;var k,D},m=(x,C,T)=>{let k;const D=C[0],E=rb(D)?D.name:void 0,P=((H,V)=>{const $=d.getElementRule(H.nodeName.toLowerCase())?.parentsRequired;return!(!$||!$.length)&&(V&&Fe($,V)?V:$[0])})(x,E);if(P)E===P?(k=D,C=C.slice(1)):k=P;else if(D)k=D,C=C.slice(1);else if(!T)return x;const F=k?f(k):va.create("div");F.appendChild(x),T&&Ke.each(T,H=>{const V=f(H);F.insertBefore(V,x)});const z=rb(k)?k.siblings:void 0;return m(F,C,z)},v=va.create("div");if(s.length>0){const x=s[0],C=f(x),T=rb(x)?x.siblings:void 0;v.appendChild(m(C,s.slice(1),T))}return v},UI=s=>{let u="div";const d={name:u,classes:[],attrs:{},selector:s=Ke.trim(s)};return"*"!==s&&(u=s.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(f,m,v,x,C)=>{switch(m){case"#":d.attrs.id=v;break;case".":d.classes.push(v);break;case":":-1!==Ke.inArray("checked disabled enabled read-only required".split(" "),v)&&(d.attrs[v]=v)}if("["===x){const T=C.match(/([\w\-]+)(?:\=\"([^\"]+))?/);T&&(d.attrs[T[1]]=T[2])}return""})),d.name=u||"div",d},jI=(s,u)=>{let d="",f=pf(s);if(""===f)return"";const m=F=>wt(F)?F.replace(/%(\w+)/g,""):"",v=(F,z)=>va.getStyle(z??s.getBody(),F,!0);if(wt(u)){const F=s.formatter.get(u);if(!F)return"";u=F[0]}if("preview"in u){const F=u.preview;if(!1===F)return"";f=F||f}let x,C=u.block||u.inline||"span";const T=wt(k=u.selector)?(k=(k=k.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ke.map(k.split(/(?:>|\s+(?![^\[\]]+\]))/),F=>{const z=Ke.map(F.split(/(?:~\+|~|\+)/),UI),H=z.pop();return z.length&&(H.siblings=z),H}).reverse()):[];var k;T.length>0?(T[0].name||(T[0].name=C),C=u.selector,x=WI(T,s)):x=WI([C],s);const D=va.select(C,x)[0]||x.firstChild;sg(u.styles,(F,z)=>{const H=m(F);H&&va.setStyle(D,z,H)}),sg(u.attributes,(F,z)=>{const H=m(F);H&&va.setAttrib(D,z,H)}),sg(u.classes,F=>{const z=m(F);va.hasClass(D,z)||va.addClass(D,z)}),s.dispatch("PreviewFormats"),va.setStyles(x,{position:"absolute",left:-65535}),s.getBody().appendChild(x);const E=v("fontSize"),P=/px$/.test(E)?parseInt(E,10):0;return sg(f.split(" "),F=>{let z=v(F,D);if(!("background-color"===F&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(z)&&(z=v(F),"#ffffff"===oh(z).toLowerCase())||"color"===F&&"#000000"===oh(z).toLowerCase())){if("font-size"===F&&/em|%$/.test(z)){if(0===P)return;z=parseFloat(z)/(/%$/.test(z)?100:1)*P+"px"}"border"===F&&z&&(d+="padding:0 2px;"),d+=F+":"+z+";"}}),s.dispatch("AfterPreviewFormats"),va.remove(x),d},vd=s=>{const u=(f=>{const m={},v=(x,C)=>{x&&(wt(x)?(yn(C)||(C=[C]),Se(C,T=>{ct(T.deep)&&(T.deep=!wn(T)),ct(T.split)&&(T.split=!wn(T)||_o(T)),ct(T.remove)&&wn(T)&&!_o(T)&&(T.remove="none"),wn(T)&&_o(T)&&(T.mixed=!0,T.block_expand=!0),wt(T.classes)&&(T.classes=T.classes.split(/\s+/))}),m[x]=C):sr(x,(T,k)=>{v(k,T)}))};return v((x=>{const C=x.dom,T=x.schema.type,k={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:D=>{C.setStyle(D,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:D=>{C.setStyle(D,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const D={inline:"span",styles:{textDecoration:"line-through"},exact:!0},E={inline:"strike",remove:"all",preserve_attributes:["class","style"]},P={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==T?[P,D,E]:[D,P,E]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(D,E,P)=>Bt(D)&&D.hasAttribute("href"),onformat:(D,E,P)=>{Ke.each(P,(F,z)=>{C.setAttrib(D,z,F)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":D=>{var E;return null!==(E=D?.customValue)&&void 0!==E?E:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ke.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),D=>{k[D]={block:D,remove:"all"}}),k})(f)),v(ni()),v(yh(f)),{get:x=>et(x)?m[x]:m,has:x=>Zt(m,x),register:v,unregister:x=>(x&&m[x]&&delete m[x],m)}})(s),d=Oo({});return(f=>{f.addShortcut("meta+b","","Bold"),f.addShortcut("meta+i","","Italic"),f.addShortcut("meta+u","","Underline");for(let m=1;m<=6;m++)f.addShortcut("access+"+m,"",["FormatBlock",!1,"h"+m]);f.addShortcut("access+7","",["FormatBlock",!1,"p"]),f.addShortcut("access+8","",["FormatBlock",!1,"div"]),f.addShortcut("access+9","",["FormatBlock",!1,"address"])})(s),(f=s).on("mouseup keydown",m=>{var v;((x,C,T)=>{const k=x.selection,D=x.getBody();T1(x,null,T),8!==C&&46!==C||!k.isCollapsed()||k.getStart().innerHTML!==Kf||T1(x,nd(D,k.getStart()),!0),37!==C&&39!==C||T1(x,nd(D,k.getStart()),!0)})(f,m.keyCode,(v=f.selection.getRng().endContainer,Je(v)&&rn(v.data,Ro)))}),Bo(s)||((f,m)=>{f.set({}),m.on("NodeChange",v=>{FS(m,v.element,f.get())}),m.on("FormatApply FormatRemove",v=>{const x=j.from(v.node).map(C=>Nh(C)?C:C.startContainer).bind(C=>Bt(C)?j.some(C):j.from(C.parentElement)).getOrThunk(()=>rI(m));FS(m,x,f.get())})})(d,s),{get:u.get,has:u.has,register:u.register,unregister:u.unregister,apply:(f,m,v)=>{var C,T,k;C=f,T=m,k=v,ro(s).formatter.apply(C,T,k)},remove:(f,m,v,x)=>{var T,k,D,E;T=f,k=m,D=v,E=x,ro(s).formatter.remove(T,k,D,E)},toggle:(f,m,v)=>{var C,T,k;C=f,T=m,k=v,ro(s).formatter.toggle(C,T,k)},match:(f,m,v,x)=>{return T=f,k=m,D=v,E=x,ro(s).formatter.match(T,k,D,E);var T,k,D,E},closest:f=>{return v=f,ro(s).formatter.closest(v);var v},matchAll:(f,m)=>{return x=f,C=m,ro(s).formatter.matchAll(x,C);var x,C},matchNode:(f,m,v,x)=>{return T=f,k=m,D=v,E=x,ro(s).formatter.matchNode(T,k,D,E);var T,k,D,E},canApply:f=>{return v=f,ro(s).formatter.canApply(v);var v},formatChanged:(f,m,v,x)=>{return T=d,k=f,D=m,E=v,P=x,ro(s).formatter.formatChanged(T,k,D,E,P);var T,k,D,E,P},getCssText:Pe(jI,s)};var f},YI=s=>{switch(s.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},XI=s=>{const u=Uu(),d=Oo(0),f=Oo(0),m={data:[],typing:!1,beforeChange:()=>{var x,C;x=d,C=u,ro(s).undoManager.beforeChange(x,C)},add:(v,x)=>{return T=m,k=f,D=d,E=u,P=v,F=x,ro(s).undoManager.add(T,k,D,E,P,F);var T,k,D,E,P,F},dispatchChange:()=>{s.setDirty(!0);const v=$1(s);v.bookmark=lf(s.selection),s.dispatch("change",{level:v,lastLevel:pr(m.data,f.get()).getOrUndefined()})},undo:()=>{return x=m,C=d,T=f,ro(s).undoManager.undo(x,C,T);var x,C,T},redo:()=>{return x=f,C=m.data,ro(s).undoManager.redo(x,C);var x,C},clear:()=>{var x,C;x=m,C=f,ro(s).undoManager.clear(x,C)},reset:()=>{var x;x=m,ro(s).undoManager.reset(x)},hasUndo:()=>{return x=m,C=f,ro(s).undoManager.hasUndo(x,C);var x,C},hasRedo:()=>{return x=m,C=f,ro(s).undoManager.hasRedo(x,C);var x,C},transact:v=>{return C=m,T=d,k=v,ro(s).undoManager.transact(C,T,k);var C,T,k},ignore:v=>{var C,T;C=d,T=v,ro(s).undoManager.ignore(C,T)},extra:(v,x)=>{var T,k,D,E;T=m,k=f,D=v,E=x,ro(s).undoManager.extra(T,k,D,E)}};return Bo(s)||((v,x,C)=>{const T=Oo(!1),k=D=>{xy(x,!1,C),x.add({},D)};v.on("init",()=>{x.add()}),v.on("BeforeExecCommand",D=>{YI(D.command)||(cC(x,C),x.beforeChange())}),v.on("ExecCommand",D=>{YI(D.command)||k(D)}),v.on("ObjectResizeStart cut",()=>{x.beforeChange()}),v.on("SaveContent ObjectResized blur",k),v.on("dragend",k),v.on("keyup",D=>{const E=D.keyCode;if(D.isDefaultPrevented())return;const P=On.os.isMacOS()&&"Meta"===D.key;(E>=33&&E<=36||E>=37&&E<=40||45===E||D.ctrlKey||P)&&(k(),v.nodeChanged()),46!==E&&8!==E||v.nodeChanged(),T.get()&&x.typing&&!J1($1(v),x.data[0])&&(v.isDirty()||v.setDirty(!0),v.dispatch("TypingUndo"),T.set(!1),v.nodeChanged())}),v.on("keydown",D=>{const E=D.keyCode;if(!D.isDefaultPrevented()){if(!(E>=33&&E<=36||E>=37&&E<=40||45===E))return!(E<16||E>20)||224===E||91===E||x.typing||D.ctrlKey&&!D.altKey||D.metaKey?void((On.os.isMacOS()?D.metaKey:D.ctrlKey&&!D.altKey)&&x.beforeChange()):(x.beforeChange(),xy(x,!0,C),x.add({},D),void T.set(!0));x.typing&&k(D)}}),v.on("mousedown",D=>{x.typing&&k(D)}),v.on("input",D=>{var E,P;D.inputType&&("insertReplacementText"===D.inputType||"insertText"===(E=D).inputType&&null===E.data||"insertFromPaste"===(P=D).inputType||"insertFromDrop"===P.inputType)&&k(D)}),v.on("AddUndo Undo Redo ClearUndos",D=>{D.isDefaultPrevented()||v.nodeChanged()})})(s,m,d),(v=s).addShortcut("meta+z","","Undo"),v.addShortcut("meta+y,meta+shift+z","","Redo"),m;var v},aL=[9,27,Mt.HOME,Mt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Mt.DOWN,Mt.UP,Mt.LEFT,Mt.RIGHT].concat(On.browser.isFirefox()?[224]:[]),xC="data-mce-placeholder",_C=s=>"keydown"===s.type||"keyup"===s.type,My=s=>{const u=s.keyCode;return u===Mt.BACKSPACE||u===Mt.DELETE},qI=(s,u)=>({from:s,to:u}),np=(s,u)=>{const d=ge(s),f=ge(u.container());return c1(d,f).map(m=>({block:m,position:u}))},wC=(s,u)=>zu(u,d=>dl(d)||Ra(d.dom),d=>_n(d,s)).filter(Ko).getOr(s),SC=(s,u,d)=>{const f=d?Bp(s).reverse():Vl(s),m=rt(f,v=>u.isBlock(Pn(v))).fold(Ve(f),v=>f.slice(0,v));return d?m.reverse():m},ob=(s,u,d,f,m)=>{const v=((x,C,T,k,D)=>{if(D&&Go(x,C))return SC(C,T,k);if(D&&Go(C,x))return SC(x,T,k);{const E=Lo(C);return rt(E,P=>T.isBlock(Pn(P))).fold(Ve(E),P=>E.slice(0,P))}})(s,u,d,f,m);return Se(v,be),v},ib=(s,u,d)=>{const f=lu(d,u);return Sr(f.reverse(),m=>Wo(s,m)).each(be)},ZI=(s,u,d,f,m,v)=>{if(Wo(f,d))return Ci(d),Io(d.dom);var C;C=f,0===dt(Bp(v),k=>!Wo(C,k)).length&&Wo(f,u)&&Ho(v,er("br"));const x=Ki(d.dom,Oe.before(v.dom));return Se(ob(d,u,f,m,!1),C=>{Ho(v,C)}),ib(f,s,u),x},CC=(s,u,d,f,m)=>{if(Wo(f,d)){if(Wo(f,u)){const C=Ft((T=>{const k=(D,E)=>Pu(D).fold(()=>E,P=>f.isInline(Pn(P))?k(P,E.concat(Xl(P))):E);return k(T,[])})(d),(T,k)=>(Q(T,k),k),fs());ae(u),q(u,C)}return be(d),Io(u.dom)}const v=ys(d.dom);return Se(ob(d,u,f,m,!0),x=>{m&&Go(u,d)?Hl(d,x):q(d,x)}),ib(f,s,u),v},MC=(s,u)=>{Th(s,u.dom).bind(d=>j.from(d.getNode())).map(ge).filter(uh).each(be)},Ty=(s,u,d,f,m)=>{return MC(!0,u),MC(!1,d),(v=u,x=d,Go(x,v)?((C,T)=>{const k=lu(T,C);return j.from(k[k.length-1])})(x,v):j.none()).fold(Pe(CC,s,u,d,f,m),Pe(ZI,s,u,d,f,m));var v,x},TC=(s,u,d,f,m,v=!1)=>{if(v){if(Go(f,d))return Ty(s,f,d,m,!u);if(Go(d,f))return Ty(s,d,f,m,u)}return u?Ty(s,f,d,m,u):Ty(s,d,f,m,!u)},Ay=(s,u)=>{const d=ge(s.getBody());return(m=s.schema,v=d.dom,x=u,C=s.selection.getRng(),C.collapsed?((T,k,D,E)=>{const P=np(k,Oe.fromRangeStart(E)),F=P.bind(z=>Fa(D,k,z.position).bind(H=>np(k,H).map(V=>{return U=T,$=k,K=D,Rr((te=V).position.getNode())&&!Wo(U,te.block)?Th(!1,te.block.dom).bind(re=>re.isEqual(te.position)?Fa(K,$,re).bind(ue=>np($,ue)):j.some(te)).getOr(te):te;var U,$,K,te})));return Kt(P,F,qI).filter(z=>{return!_n((H=z).from.block,H.to.block)&&((H,V)=>{const U=ge(H);return _n(wC(U,V.from.block),wC(U,V.to.block))})(k,z)&&(H=>!1===dr(H.from.block.dom)&&!1===dr(H.to.block.dom))(z)&&(H=>{const V=U=>gA(U)||Ov(U.dom)||Mr(U);return V(H.from.block)&&V(H.to.block)})(z)&&(H=>!(Go(H.to.block,H.from.block)||Go(H.from.block,H.to.block)))(z);var H})})(m,v,x,C):j.none()).map(m=>()=>{TC(d,u,m.from.block,m.to.block,s.schema,!0).each(v=>{s.selection.setRng(v.toRange())})});var m,v,x,C},$I=(s,u)=>{const d=ge(u),f=Pe(_n,s);return la(d,dl,f).isSome()},ab=(s,u)=>s.selection.isCollapsed()?j.none():(s=>{const u=ge(s.getBody());return((d,f)=>{const m=Ki(d.dom,Oe.fromRangeStart(f)).isNone(),v=Ai(d.dom,Oe.fromRangeEnd(f)).isNone();return!($I(x=d,(C=f).startContainer)||$I(x,C.endContainer))&&m&&v;var x,C})(u,s.selection.getRng())?(d=s,j.some(()=>{d.setContent(""),d.selection.setCursorLocation()})):((d,f,m)=>{const v=f.getRng();return Kt(c1(d,ge(v.startContainer)),c1(d,ge(v.endContainer)),(x,C)=>_n(x,C)?j.none():j.some(()=>{v.deleteContents(),TC(d,!0,x,C,m).each(T=>{f.setRng(T.toRange())})})).getOr(j.none())})(u,s.selection,s.schema);var d})(s),mu=(s,u,d,f,m)=>j.from(u._selectionOverrides.showCaret(s,d,f,m)),lg=(s,u)=>s.dispatch("BeforeObjectSelected",{target:u}).isDefaultPrevented()?j.none():j.some((d=>{const f=d.ownerDocument.createRange();return f.selectNode(d),f})(u)),AC=(s,u,d)=>u.collapsed?((f,m,v)=>{const x=_m(1,f.getBody(),m),C=Oe.fromRangeStart(x),T=C.getNode();if(tu(T))return mu(1,f,T,!C.isAtEnd(),!1);const k=C.getNode(!0);if(tu(k))return mu(1,f,k,!1,!1);const D=fc(f.dom.getRoot(),C.getNode());return tu(D)?mu(1,f,D,!1,v):j.none()})(s,u,d).getOr(u):u,JI=s=>ud(s)||vr(s),ug=s=>cd(s)||Gf(s),kC=(s,u,d,f,m,v)=>{var x,C;mu(f,s,v.getNode(!m),m,!0).each(x=>{if(u.collapsed){const C=u.cloneRange();m?C.setEnd(x.startContainer,x.startOffset):C.setStart(x.endContainer,x.endOffset),C.deleteContents()}else u.deleteContents();s.selection.setRng(x)}),x=s.dom,Je(C=d)&&0===C.data.length&&x.remove(C)},sb=(s,u)=>((d,f)=>{const m=d.selection.getRng();if(!Je(m.commonAncestorContainer))return j.none();const v=f?ko.Forwards:ko.Backwards,x=Xs(d.getBody()),C=Pe(Sm,f?x.next:x.prev),T=f?JI:ug,k=wm(v,d.getBody(),m),D=C(k),E=D&&Wa(f,D);if(!E||!T0(k,E))return j.none();if(T(E))return j.some(()=>kC(d,m,k.getNode(),v,f,E));const P=C(E);return P&&T(P)&&T0(E,P)?j.some(()=>kC(d,m,k.getNode(),v,f,P)):j.none()})(s,u),lb=(s,u)=>{const d=s.getBody();return u?Io(d).filter(ud):ys(d).filter(cd)},ub=s=>{const u=s.selection.getRng();return!u.collapsed&&(lb(s,!0).exists(d=>d.isEqual(Oe.fromRangeStart(u)))||lb(s,!1).exists(d=>d.isEqual(Oe.fromRangeEnd(u))))},ba=pl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),QI=(s,u,d,f)=>Fa(u,s,d).bind(m=>{return v=m.getNode(),et(v)&&(dl(ge(v))||Mr(ge(v)))||((x,C,T,k,D)=>{const E=P=>D.isInline(P.nodeName.toLowerCase())&&!ml(T,k,x);return M0(!C,T).fold(()=>M0(C,k).fold(Mn,E),E)})(s,u,d,m,f)?j.none():u&&dr(m.getNode())||!u&&dr(m.getNode(!0))?((x,C,T,k,D)=>{const E=D.getNode(!T);return c1(ge(C),ge(k.getNode())).map(P=>Wo(x,P)?ba.remove(P.dom):ba.moveToElement(E)).orThunk(()=>j.some(ba.moveToElement(E)))})(f,s,u,d,m):u&&cd(d)||!u&&ud(d)?j.some(ba.moveToPosition(m)):j.none();var v}),cb=(s,u)=>j.from(fc(s.getBody(),u)),eD=s=>{const u=s.dom,d=s.selection,f=fc(s.getBody(),d.getNode());if(Ra(f)&&u.isBlock(f)&&u.isEmpty(f)){const m=u.create("br",{"data-mce-bogus":"1"});u.setHTML(f,""),f.appendChild(m),d.setRng(Oe.before(m).toRange())}return!0},rp=(s,u)=>s.selection.isCollapsed()?((s,u)=>{const d=s.selection.getNode();return cb(s,d).filter(dr).fold(()=>((f,m,v,x)=>{const C=_m(m?1:-1,f,v),T=Oe.fromRangeStart(C),k=ge(f);return!m&&cd(T)?j.some(ba.remove(T.getNode(!0))):m&&ud(T)?j.some(ba.remove(T.getNode())):!m&&ud(T)&&r1(k,T,x)?Ek(k,T,x).map(D=>ba.remove(D.getNode())):m&&cd(T)&&Gh(k,T,x)?o1(k,T,x).map(D=>ba.remove(D.getNode())):(D=f,F=x,((z,H)=>{const V=H.getNode(!z),U=z?"after":"before";return Bt(V)&&V.getAttribute("data-mce-caret")===U})(E=m,P=T)?(z=E,H=P.getNode(!E),rr(H)?j.none():z&&dr(H.nextSibling)?j.some(ba.moveToElement(H.nextSibling)):!z&&dr(H.previousSibling)?j.some(ba.moveToElement(H.previousSibling)):j.none()).orThunk(()=>QI(D,E,P,F)):QI(D,E,P,F).bind(z=>((H,V,U)=>U.fold($=>j.some(ba.remove($)),$=>j.some(ba.moveToElement($)),$=>ml(V,$,H)?j.none():j.some(ba.moveToPosition($))))(D,P,z)));var D,E,P,F,z,H})(s.getBody(),u,s.selection.getRng(),s.schema).map(f=>()=>{return f.fold((m=s,v=u,x=>(m._selectionOverrides.hideFakeCaret(),Hh(m,v,ge(x)),!0)),((m,v)=>x=>{const C=v?Oe.before(x):Oe.after(x);return m.selection.setRng(C.toRange()),!0})(s,u),(m=>v=>(m.selection.setRng(v.toRange()),!0))(s));var m,v}),()=>j.some(Qt))})(s,u):((d,f)=>{const m=d.selection.getNode();return dr(m)&&!ls(m)?cb(d,m.parentNode).filter(dr).fold(()=>j.some(()=>{var v;v=ge(d.getBody()),Se(zn(v,".mce-offscreen-selection"),be),Hh(d,f,ge(d.selection.getNode())),hS(d)}),()=>j.some(Qt)):ub(d)?j.some(()=>{Ym(d,d.selection.getRng(),ge(d.getBody()))}):j.none()})(s,u),ky=s=>s.hasOwnProperty("text"),IC=s=>s.hasOwnProperty("marker"),Iy=(s,u)=>{const d=(m,v)=>{if(Je(m))return{text:m,offset:v};{const x=u(),C=m.childNodes;return v<C.length?(m.insertBefore(x,C[v]),{marker:x,before:!0}):(m.appendChild(x),{marker:x,before:!1})}},f=d(s.endContainer,s.endOffset);return{start:d(s.startContainer,s.startOffset),end:f}},db=s=>{var u,d;const{start:f,end:m}=s,v=new window.Range;return ky(f)?v.setStart(f.text,f.offset):IC(f)&&(f.before?v.setStartBefore(f.marker):v.setStartAfter(f.marker),null===(u=f.marker.parentNode)||void 0===u||u.removeChild(f.marker)),ky(m)?v.setEnd(m.text,m.offset):IC(m)&&(m.before?v.setEndBefore(m.marker):v.setEndAfter(m.marker),null===(d=m.marker.parentNode)||void 0===d||d.removeChild(m.marker)),v},bd=(s,u)=>{var d;const f=s.dom,m=f.getParent(s.selection.getStart(),f.isBlock),v=f.getParent(s.selection.getEnd(),f.isBlock),x=s.getBody();if("div"===(null===(d=m?.nodeName)||void 0===d?void 0:d.toLowerCase())&&m&&v&&m===x.firstChild&&v===x.lastChild&&!f.isEmpty(x)){const C=m.cloneNode(!1);return j.some(()=>{if(u?Hk(s):u1(s),x.firstChild!==m){const k=Iy(s.selection.getRng(),()=>document.createElement("span"));Array.from(x.childNodes).forEach(D=>C.appendChild(D)),x.appendChild(C),s.selection.setRng(db(k))}})}return j.none()},DC=(s,u)=>s.selection.isCollapsed()?((d,f)=>{const m=Oe.fromRangeStart(d.selection.getRng());return Fa(f,d.getBody(),m).filter(v=>f?Ik(v):VE(v)).bind(v=>C0(f?0:-1,v)).map(v=>()=>d.selection.select(v))})(s,u):j.none(),cg=Je,NC=s=>cg(s)&&s.data[0]===Hr,EC=s=>cg(s)&&s.data[s.data.length-1]===Hr,hb=s=>{var u;return(null!==(u=s.ownerDocument)&&void 0!==u?u:document).createTextNode(Hr)},Dy=(s,u)=>s?(d=>{var f;if(cg(d.previousSibling))return EC(d.previousSibling)||d.previousSibling.appendData(Hr),d.previousSibling;if(cg(d))return NC(d)||d.insertData(0,Hr),d;{const m=hb(d);return null===(f=d.parentNode)||void 0===f||f.insertBefore(m,d),m}})(u):(d=>{var f,m;if(cg(d.nextSibling))return NC(d.nextSibling)||d.nextSibling.insertData(0,Hr),d.nextSibling;if(cg(d))return EC(d)||d.appendData(Hr),d;{const v=hb(d);return d.nextSibling?null===(f=d.parentNode)||void 0===f||f.insertBefore(v,d.nextSibling):null===(m=d.parentNode)||void 0===m||m.appendChild(v),v}})(u),Ny=Pe(Dy,!0),pb=Pe(Dy,!1),tD=(s,u)=>Je(s.container())?Dy(u,s.container()):Dy(u,s.getNode()),nD=(s,u)=>{const d=u.get();return d&&s.container()===d&&Zl(d)},xd=(s,u)=>u.fold(d=>{Va(s.get());const f=Ny(d);return s.set(f),j.some(Oe(f,f.length-1))},d=>Io(d).map(f=>{if(nD(f,s)){const m=s.get();return Oe(m,1)}{Va(s.get());const m=tD(f,!0);return s.set(m),Oe(m,1)}}),d=>ys(d).map(f=>{if(nD(f,s)){const m=s.get();return Oe(m,m.length-1)}{Va(s.get());const m=tD(f,!1);return s.set(m),Oe(m,m.length-1)}}),d=>{Va(s.get());const f=pb(d);return s.set(f),j.some(Oe(f,1))}),LC=(s,u)=>{for(let d=0;d<s.length;d++){const f=s[d].apply(null,u);if(f.isSome())return f}return j.none()},zo=pl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),rD=(s,u)=>ec(u,s)||s,RC=(s,u,d)=>{const f=Wh(d),m=rD(u,f.container());return hc(s,m,f).fold(()=>Ai(m,f).bind(Pe(hc,s,m)).map(v=>zo.before(v)),j.none)},oD=(s,u)=>null===nd(s,u),OC=(s,u,d)=>hc(s,u,d).filter(Pe(oD,u)),Ey=(s,u,d)=>{const f=dd(d);return OC(s,u,f).bind(m=>Ki(m,f).isNone()?j.some(zo.start(m)):j.none())},iD=(s,u,d)=>{const f=Wh(d);return OC(s,u,f).bind(m=>Ai(m,f).isNone()?j.some(zo.end(m)):j.none())},aD=(s,u,d)=>{const f=dd(d),m=rD(u,f.container());return hc(s,m,f).fold(()=>Ki(m,f).bind(Pe(hc,s,m)).map(v=>zo.after(v)),j.none)},xc=s=>!jf(_c(s)),Oi=(s,u,d)=>LC([RC,Ey,iD,aD],[s,u,d]).filter(xc),_c=s=>s.fold(Ir,Ir,Ir,Ir),fb=s=>s.fold(Ve("before"),Ve("start"),Ve("end"),Ve("after")),Ly=s=>s.fold(zo.before,zo.before,zo.after,zo.after),PC=s=>s.fold(zo.start,zo.start,zo.end,zo.end),sL=(s,u,d,f,m,v)=>Kt(hc(u,d,f),hc(u,d,m),(x,C)=>x!==C&&((T,k,D)=>{const E=ec(k,T),P=ec(D,T);return et(E)&&E===P})(d,x,C)?zo.after(s?x:C):v).getOr(v),sD=(s,u)=>s.fold(Z,d=>{return m=u,!(fb(f=d)===fb(m)&&_c(f)===_c(m));var f,m}),lD=(s,u)=>s?u.fold(Lr(j.some,zo.start),j.none,Lr(j.some,zo.after),j.none):u.fold(j.none,Lr(j.some,zo.before),j.none,Lr(j.some,zo.end)),BC=(s,u,d)=>{const f=s?1:-1;return u.setRng(Oe(d.container(),d.offset()+f).toRange()),u.getSel().modify("move",s?"forward":"backward","word"),!0};var Ya;!function(s){s[s.Br=0]="Br",s[s.Block=1]="Block",s[s.Wrap=2]="Wrap",s[s.Eol=3]="Eol"}(Ya||(Ya={}));const vu=(s,u)=>s===ko.Backwards?ht(u):u,uD=(s,u,d)=>s===ko.Forwards?u.next(d):u.prev(d),cD=(s,u,d,f)=>Rr(f.getNode(u===ko.Forwards))?Ya.Br:!1===ml(d,f)?Ya.Block:Ya.Wrap,zC=(s,u,d,f)=>{const m=Xs(d);let v=f;const x=[];for(;v;){const C=uD(u,m,v);if(!C)break;if(Rr(C.getNode(!1)))return u===ko.Forwards?{positions:vu(u,x).concat([C]),breakType:Ya.Br,breakAt:j.some(C)}:{positions:vu(u,x),breakType:Ya.Br,breakAt:j.some(C)};if(C.isVisible()){if(s(v,C)){const T=cD(0,u,v,C);return{positions:vu(u,x),breakType:T,breakAt:j.some(C)}}x.push(C),v=C}else v=C}return{positions:vu(u,x),breakType:Ya.Eol,breakAt:j.none()}},VC=(s,u,d,f)=>u(d,f).breakAt.map(m=>{const v=u(d,m).positions;return s===ko.Backwards?v.concat(m):[m].concat(v)}).getOr([]),bu=(s,u)=>Gr(s,(d,f)=>d.fold(()=>j.some(f),m=>Kt(bn(m.getClientRects()),bn(f.getClientRects()),(v,x)=>{const C=Math.abs(u-v.left);return Math.abs(u-x.left)<=C?f:m}).or(d)),j.none()),gb=(s,u)=>bn(u.getClientRects()).bind(d=>bu(s,d.left)),Ry=Pe(zC,Oe.isAbove,-1),dg=Pe(zC,Oe.isBelow,1),FC=Pe(VC,-1,Ry),mb=Pe(VC,1,dg),dD=(s,u)=>Ry(s,u).breakAt.isNone(),hg=(s,u)=>dg(s,u).breakAt.isNone(),lL=(s,u)=>gb(FC(s,u),u),uL=(s,u)=>gb(mb(s,u),u),hD=dr,pg=(s,u)=>Math.abs(s.left-u),pD=(s,u)=>Math.abs(s.right-u),fD=(s,u)=>rl(s,(d,f)=>{const m=Math.min(pg(d,u),pD(d,u)),v=Math.min(pg(f,u),pD(f,u));return v===m&&lo(f,"node")&&hD(f.node)||v<m?f:d}),yb=s=>{const u=d=>Ee(d,f=>{const m=Xc(f);return m.node=s,m});if(Bt(s))return u(s.getClientRects());if(Je(s)){const d=s.ownerDocument.createRange();return d.setStart(s,0),d.setEnd(s,s.data.length),u(d.getClientRects())}return[]},Oy=s=>st(s,yb);var _d;!function(s){s[s.Up=-1]="Up",s[s.Down=1]="Down"}(_d||(_d={}));const wd=(s,u,d,f,m,v)=>{let x=0;const C=[],T=E=>{let P=Oy([E]);-1===s&&(P=P.reverse());for(let F=0;F<P.length;F++){const z=P[F];if(!d(z,k)){if(C.length>0&&u(z,ia(C))&&x++,z.line=x,m(z))return!0;C.push(z)}}return!1},k=ia(v.getClientRects());if(!k)return C;const D=v.getNode();return D&&(T(D),((E,P,F,z)=>{let H=z;for(;H=ed(H,E,xA,P);)if(F(H))return})(s,f,T,D)),C},GC=Pe(wd,_d.Up,im,ms),HC=Pe(wd,_d.Down,ms,im),gD=s=>ia(s.getClientRects()),WC=s=>u=>u.line>s,vb=s=>u=>u.line===s,xu=(s,u)=>{s.selection.setRng(u),Oh(s,s.selection.getRng())},bb=(s,u,d)=>j.some(AC(s,u,d)),mD=(s,u,d,f,m,v)=>{const x=u===ko.Forwards,C=Xs(s.getBody()),T=Pe(Sm,x?C.next:C.prev),k=x?f:m;if(!d.collapsed){const z=Kl(d);if(v(z))return mu(u,s,z,u===ko.Backwards,!1);if(ub(s)){const H=d.cloneRange();return H.collapse(u===ko.Backwards),j.from(H)}}const D=wm(u,s.getBody(),d);if(k(D))return lg(s,D.getNode(!x));let E=T(D);const P=mA(d);if(!E)return P?j.some(d):j.none();if(E=Wa(x,E),k(E))return mu(u,s,E.getNode(!x),x,!1);const F=T(E);return F&&k(F)&&T0(E,F)?mu(u,s,F.getNode(!x),x,!1):P?bb(s,E.toRange(),!1):j.none()},yD=(s,u,d,f,m,v)=>{const x=wm(u,s.getBody(),d),C=ia(x.getClientRects()),T=u===_d.Down,k=s.getBody();if(!C)return j.none();if(ub(s)){const H=T?Oe.fromRangeEnd(d):Oe.fromRangeStart(d);return(T?uL:lL)(k,H).orThunk(()=>j.from(H)).map(V=>V.toRange())}const D=(T?HC:GC)(k,WC(1),x),E=dt(D,vb(1)),P=C.left,F=fD(E,P);if(F&&v(F.node)){const H=Math.abs(P-F.left),V=Math.abs(P-F.right);return mu(u,s,F.node,H<V,!1)}let z;if(z=f(x)?x.getNode():m(x)?x.getNode(!0):Kl(d),z){const H=((U,$,K,te)=>{const re=Xs($);let ue,he,de,_e;const Ne=[];let ce=0;1===U?(ue=re.next,he=ms,de=im,_e=Oe.after(te)):(ue=re.prev,he=im,de=ms,_e=Oe.before(te));const fe=gD(_e);do{if(!_e.isVisible())continue;const we=gD(_e);if(de(we,fe))continue;Ne.length>0&&he(we,ia(Ne))&&ce++;const ze=Xc(we);if(ze.position=_e,ze.line=ce,K(ze))return Ne;Ne.push(ze)}while(_e=ue(_e));return Ne})(u,k,WC(1),z);let V=fD(dt(H,vb(1)),P);if(V||(V=ia(dt(H,vb(0))),V))return bb(s,V.position.toRange(),!1)}return 0===E.length?xb(s,T).filter(T?m:f).map(H=>AC(s,H.toRange(),!1)):j.none()},xb=(s,u)=>{const d=s.selection.getRng(),f=u?Oe.fromRangeEnd(d):Oe.fromRangeStart(d),m=(v=f.container(),x=s.getBody(),la(ge(v),C=>XA(C.dom),C=>C.dom===x).map(C=>C.dom).getOr(x));var v,x;if(u){const C=dg(m,f);return Br(C.positions)}{const C=Ry(m,f);return bn(C.positions)}},Py=(s,u,d)=>xb(s,u).filter(d).exists(f=>(s.selection.setRng(f.toRange()),!0)),By=(s,u)=>{const d=s.dom.createRng();d.setStart(u.container(),u.offset()),d.setEnd(u.container(),u.offset()),s.selection.setRng(d)},UC=(s,u)=>{s?u.setAttribute("data-mce-selected","inline-boundary"):u.removeAttribute("data-mce-selected")},vD=(s,u,d)=>xd(u,d).map(f=>(By(s,f),d)),jC=(s,u,d)=>!!mh(s)&&((s,u,d)=>{const f=s.getBody(),m=((v,x,C)=>{const T=Oe.fromRangeStart(v);if(v.collapsed)return T;{const k=Oe.fromRangeEnd(v);return C?Ki(x,k).getOr(k):Ai(x,T).getOr(T)}})(s.selection.getRng(),f,d);return((v,x,C,T)=>{const k=Wa(v,T),D=Oi(x,C,k);return Oi(x,C,k).bind(Pe(lD,v)).orThunk(()=>((E,P,F,z,H)=>{const V=Wa(E,H);return Fa(E,F,V).map(Pe(Wa,E)).fold(()=>z.map(Ly),U=>Oi(P,F,U).map(Pe(sL,E,P,F,V,U)).filter(Pe(sD,z))).filter(xc)})(v,x,C,D,T))})(d,Pe(dc,s),f,m).bind(v=>vD(s,u,v))})(s,u,d).isSome(),YC=(s,u,d)=>!!mh(u)&&((f,m)=>{const v=m.selection.getRng(),x=f?Oe.fromRangeEnd(v):Oe.fromRangeStart(v);return!!tn(m.selection.getSel().modify)&&(f&&hh(x)?BC(!0,m.selection,x):!(f||!om(x))&&BC(!1,m.selection,x))})(s,u),_D=Pe(YC,!0),_b=Pe(YC,!1),zy=(s,u,d)=>{if(mh(s)){const f=xb(s,u).getOrThunk(()=>{const m=s.selection.getRng();return u?Oe.fromRangeEnd(m):Oe.fromRangeStart(m)});return Oi(Pe(dc,s),s.getBody(),f).exists(m=>{const v=Ly(m);return xd(d,v).exists(x=>(By(s,x),!0))})}return!1},XC=(s,u)=>d=>xd(u,d).map(f=>()=>By(s,f)),wD=(s,u,d,f)=>{const m=s.getBody(),v=Pe(dc,s);s.undoManager.ignore(()=>{s.selection.setRng(((x,C)=>{const T=document.createRange();return T.setStart(x.container(),x.offset()),T.setEnd(C.container(),C.offset()),T})(d,f)),u1(s),Oi(v,m,Oe.fromRangeStart(s.selection.getRng())).map(PC).bind(XC(s,u)).each(ur)}),s.nodeChanged()},wb=(s,u,d)=>{if(s.selection.isCollapsed()&&mh(s)){const f=Oe.fromRangeStart(s.selection.getRng());return((m,v,x,C)=>{const T=(E=m.getBody(),P=C.container(),ec(P,E)||E),k=Pe(dc,m),D=Oi(k,T,C);var E,P;return D.bind(E=>x?E.fold(Ve(j.some(PC(E))),j.none,Ve(j.some(Ly(E))),j.none):E.fold(j.none,Ve(j.some(Ly(E))),j.none,Ve(j.some(PC(E))))).map(XC(m,v)).getOrThunk(()=>{const E=td(x,T,C),P=E.bind(F=>Oi(k,T,F));return Kt(D,P,()=>hc(k,T,C).bind(F=>{return Kt(Io(z=F),ys(z),(H,V)=>{const U=Wa(!0,H),$=Wa(!1,V);return Ai(z,U).forall(K=>K.isEqual($))}).getOr(!0)?j.some(()=>{Hh(m,x,ge(F))}):j.none();var z})).getOrThunk(()=>P.bind(()=>E.map(F=>()=>{x?wD(m,v,C,F):wD(m,v,F,C)})))})})(s,u,d,f)}return j.none()},fg=(s,u)=>{const d=ge(s.getBody()),f=ge(s.selection.getStart()),m=lu(f,d);return rt(m,u).fold(Ve(m),v=>m.slice(0,v))},cL=s=>1===os(s),qC=(s,u)=>{const d=Pe(ty,s);return st(u,f=>d(f)?[f.dom]:[])},ZC=s=>{const u=fg(d=s,f=>d.schema.isBlock(Pn(f)));var d;return qC(s,u)},SD=(s,u)=>{const d=s.selection.getStart(),f=((m,v)=>{const x=v.parentElement;return Rr(v)&&!Hn(x)&&m.dom.isEmpty(x)})(s,d)||z0(ge(d))?UE(d,u):((m,v)=>{const{caretContainer:x,caretPosition:C}=Qk(v);return m.insertNode(x.dom),C})(s.selection.getRng(),u);s.selection.setRng(f.toRange())},CD=s=>Je(s.startContainer),Sd=(s,u)=>s.selection.isCollapsed()?((s,u)=>{const d=dt(fg(f=s,m=>f.schema.isBlock(Pn(m))||os(m)>1),cL);var f;return Br(d).bind(f=>{const m=Oe.fromRangeStart(s.selection.getRng());return Wk(u,m,f.dom)&&!z0(f)?j.some(()=>((v,x,C,T)=>{const k=qC(x,T);if(0===k.length)Hh(x,v,C);else{const D=UE(C.dom,k);x.selection.setRng(D.toRange())}})(u,s,f,d)):j.none()})})(s,u):(d=>{if((s=>{const u=s.selection.getRng();return 0===(d=u).startOffset&&CD(d)&&((d,f)=>{const m=f.startContainer.parentElement;return!Hn(m)&&ty(d,ge(m))})(s,u)&&(d=>{return(m=>{const v=m.startContainer.parentNode,x=m.endContainer.parentNode;return!Hn(v)&&!Hn(x)&&v.isEqualNode(x)})(f=d)&&(m=>{const v=m.endContainer;return m.endOffset===(Je(v)?v.length:v.childNodes.length)})(f)||(f=>!f.endContainer.isEqualNode(f.commonAncestorContainer))(d);var f})(u);var d})(d)){const f=ZC(d);return j.some(()=>{u1(d),((m,v)=>{const x=We(v,ZC(m));x.length>0&&SD(m,x)})(d,f)})}return j.none()})(s),wc=s=>((u=>{const d=u.selection.getRng();return d.collapsed&&(CD(d)||u.dom.isEmpty(d.startContainer))&&(m=ge((f=u).selection.getStart()),v=f.schema,!eo(m,x=>Ji(x.dom),x=>v.isBlock(Pn(x))));var f,m,v})(s)&&SD(s,[]),!0),KC=(s,u,d)=>et(d)?j.some(()=>{s._selectionOverrides.hideFakeCaret(),Hh(s,u,ge(d))}):j.none(),JC=(s,u)=>s.selection.isCollapsed()?((d,f)=>{const m=f?vr:Gf,x=wm(f?ko.Forwards:ko.Backwards,d.getBody(),d.selection.getRng());return m(x)?KC(d,f,x.getNode(!f)):j.from(Wa(f,x)).filter(C=>m(C)&&T0(x,C)).bind(C=>KC(d,f,C.getNode(!f)))})(s,u):((d,f)=>{const m=d.selection.getNode();return ll(m)?KC(d,f,m):j.none()})(s,u),QC=s=>Yr(s??"").getOr(0),MD=(s,u)=>(s||"table"===Pn(u)?"margin":"padding")+("rtl"===Si(u,"direction")?"-right":"-left"),TD=s=>{const u=kD(s);return!s.mode.isReadOnly()&&(u.length>1||(d=s,lt(u,m=>{const v=MD(X_(d),m),x=as(m,v).map(QC).getOr(0);return"false"!==d.dom.getContentEditable(m.dom)&&x>0})));var d},AD=s=>T_(s)||Mr(s),kD=s=>dt(Ue(s.selection.getSelectedBlocks()),u=>!AD(u)&&!rs(u).exists(AD)&&zu(u,d=>Ra(d.dom)||dr(d.dom)).exists(d=>Ra(d.dom))),ID=(s,u)=>{var d,f;const{dom:m}=s,v=q_(s),x=null!==(f=null===(d=/[a-z%]+$/i.exec(v))||void 0===d?void 0:d[0])&&void 0!==f?f:"px",C=QC(v),T=X_(s);Se(kD(s),k=>{((D,E,P,F,z,H)=>{const V=MD(P,ge(H)),U=QC(D.getStyle(H,V));if("outdent"===E){const $=Math.max(0,U-F);D.setStyle(H,V,$?$+z:"")}else D.setStyle(H,V,U+F+z)})(m,u,T,C,x,k.dom)})},Sb=s=>ID(s,"outdent"),eM=s=>{if(s.selection.isCollapsed()&&TD(s)){const u=s.dom,d=s.selection.getRng(),f=Oe.fromRangeStart(d),m=u.getParent(d.startContainer,u.isBlock);if(null!==m&&t1(ge(m),f,s.schema))return j.some(()=>Sb(s))}return j.none()},DD=(s,u,d)=>Zo([eM,rp,sb,(f,m)=>wb(f,u,m),Ay,pc,DC,JC,ab,Sd,bd],f=>f(s,d)).filter(f=>s.selection.isEditable()),Cb=s=>void 0===s.touches||1!==s.touches.length?j.none():j.some(s.touches[0]),Mb=(s,u)=>Zt(s,u.nodeName),hL=(s,u)=>!!Je(u)||!!Bt(u)&&!(Mb(s.getBlockElements(),u)||ki(u)||lr(s,u)||Yg(u)),gg=(s,u)=>{if(Je(u)){if(0===u.data.length)return!0;if(/^\s+$/.test(u.data))return!u.nextSibling||Mb(s,u.nextSibling)||Yg(u.nextSibling)}return!1},Tb=s=>s.dom.create(di(s),Us(s)),ND=(s,u,d)=>{const f=ge(Tb(s)),m=fs();q(f,m),d(u,f);const v=document.createRange();return v.setStartBefore(m.dom),v.setEndBefore(m.dom),v},Ab=s=>u=>-1!==(" "+u.attr("class")+" ").indexOf(s),ED=(s,u,d)=>function(f){const m=arguments,v=m[m.length-2],x=v>0?u.charAt(v-1):"";if('"'===x)return f;if(">"===x){const C=u.lastIndexOf("<",v);if(-1!==C&&-1!==u.substring(C,v).indexOf('contenteditable="false"'))return f}return'<span class="'+d+'" data-mce-content="'+s.dom.encode(m[0])+'">'+s.dom.encode("string"==typeof m[1]?m[1]:m[0])+"</span>"},pL=(s,u)=>lt(s,d=>{const f=u.match(d);return null!==f&&f[0].length===u.length}),LD=(s,u)=>{u.hasAttribute("data-mce-caret")&&($l(u),s.selection.setRng(s.selection.getRng()),s.selection.scrollIntoView(u))},tM=(s,u)=>{const d=al(ge(s.getBody()),"*[data-mce-caret]").map(m=>m.dom).getOrNull();if(d)return"compositionstart"===u.type?(u.preventDefault(),u.stopPropagation(),void LD(s,d)):void(e0(d)&&(LD(s,d),s.undoManager.add()))},nM=dr,rM=(s,u,d)=>{const f=Xs(s.getBody()),m=Pe(Sm,1===u?f.next:f.prev);if(d.collapsed){const v=s.dom.getParent(d.startContainer,"PRE");if(!v)return;if(!m(Oe.fromRangeStart(d))){const x=ge((C=>{const T=C.dom.create(di(C));return T.innerHTML='<br data-mce-bogus="1">',T})(s));1===u?ss(ge(v),x):Ho(ge(v),x),s.selection.select(x.dom,!0),s.selection.collapse()}}},kb=(s,u)=>((d,f)=>{const m=f?ko.Forwards:ko.Backwards,v=d.selection.getRng();return(x=m,C=d,T=v,mD(C,x,T,ud,cd,nM)).orThunk(()=>(rM(d,m,v),j.none()));var x,C,T})(s,((d,f)=>{const m=f?d.getEnd(!0):d.getStart(!0);return jf(m)?!f:f})(s.selection,u)).exists(d=>(xu(s,d),!0)),oM=(s,u)=>((d,f)=>{const m=f?1:-1,v=d.selection.getRng();return(x=m,C=d,T=v,yD(C,x,T,k=>ud(k)||nS(k),k=>cd(k)||rS(k),nM)).orThunk(()=>(rM(d,m,v),j.none()));var x,C,T})(s,u).exists(d=>(xu(s,d),!0)),RD=(s,u)=>Py(s,u,u?cd:ud),mg=(s,u)=>lb(s,!u).map(d=>{const f=d.toRange(),m=s.selection.getRng();return u?f.setStart(m.startContainer,m.startOffset):f.setEnd(m.endContainer,m.endOffset),f}).exists(d=>(xu(s,d),!0)),OD=s=>Fe(["figcaption"],Pn(s)),iM=(s,u)=>!!s.selection.isCollapsed()&&((d,f)=>{const m=ge(d.getBody()),v=Oe.fromRangeStart(d.selection.getRng());return((x,C,T)=>{const k=Pe(_n,C);return zu(ge(x.container()),D=>T.isBlock(Pn(D)),k).filter(OD)})(v,m,d.schema).exists(()=>{if(x=m,T=v,f?hg(x.dom,T):dD(x.dom,T)){const x=ND(d,m,f?q:Hl);return d.selection.setRng(x),!0}var x,T;return!1})})(s,u),Sc=(s,u)=>{return d=s,u?j.from(d.dom.getParent(d.selection.getNode(),"details")).map(m=>((v,x)=>{const C=v.selection.getRng(),T=Oe.fromRangeStart(C);return!(v.getBody().lastChild!==x||!hg(x,T)||(v.execCommand("InsertNewBlockAfter"),0))})(d,m)).getOr(!1):j.from(d.dom.getParent(d.selection.getNode(),"summary")).bind(m=>j.from(d.dom.getParent(m,"details")).map(v=>((x,C,T)=>{const k=x.selection.getRng(),D=Oe.fromRangeStart(k);return!(x.getBody().firstChild!==C||!dD(T,D)||(x.execCommand("InsertNewBlockBefore"),0))})(d,v,m))).getOr(!1);var d},ta={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},aM=(s,u)=>u.keyCode===s.keyCode&&u.shiftKey===s.shiftKey&&u.altKey===s.altKey&&u.ctrlKey===s.ctrlKey&&u.metaKey===s.metaKey,Wt=(s,...u)=>()=>s.apply(null,u),yg=(s,u)=>{return Sr((f=u,st(Ee(s,v=>({...ta,...v})),m=>aM(m,f)?[m]:[])),d=>d.action());var f},sM=(s,u)=>{return Zo((f=u,st(Ee(s,v=>({...ta,...v})),m=>aM(m,f)?[m]:[])),d=>d.action());var f},lM=(s,u)=>{const d=u?ko.Forwards:ko.Backwards,f=s.selection.getRng();return mD(s,d,f,vr,Gf,ll).exists(m=>(xu(s,m),!0))},PD=(s,u)=>{const d=u?1:-1,f=s.selection.getRng();return yD(s,d,f,vr,Gf,ll).exists(m=>(xu(s,m),!0))},Ib=(s,u)=>Py(s,u,u?Gf:vr),BD=pl([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),op={...BD,none:s=>BD.none(s)},Db=(s,u,d)=>st(Lo(s),f=>xi(f,u)?d(f)?[f]:[]:Db(f,u,d)),vg=(s,u)=>is(s,"table",u),Nb=(s,u,d,f,m=Z)=>{const v=1===f;if(!v&&d<=0)return op.first(s[0]);if(v&&d>=s.length-1)return op.last(s[s.length-1]);{const x=d+f,C=s[x];return m(C)?op.middle(u,C):Nb(s,u,x,f,m)}},Cd=(s,u)=>vg(s,u).bind(d=>{const f=Db(d,"th,td",Z);return rt(f,m=>_n(s,m)).map(m=>({index:m,all:f}))}),uM=["img","br"],zD=s=>{return(u=s,Qv.getOption(u)).filter(d=>0!==d.trim().length||d.indexOf(Ro)>-1).isSome()||Fe(uM,Pn(s))||Eu(d=s)&&"false"===si(d,"contenteditable");var d,u},cM=(s,u,d,f,m)=>{const v=zn(ge(d),"td,th,caption").map(C=>C.dom);var C;return((C,T,k)=>Gr(C,(D,E)=>D.fold(()=>j.some(E),P=>{const F=Math.sqrt(Math.abs(P.x-T)+Math.abs(P.y-k)),z=Math.sqrt(Math.abs(E.x-T)+Math.abs(E.y-k));return j.some(z<F?E:P)}),j.none()))(dt((C=s,st(v,k=>{const D={left:(E=Xc(k.getBoundingClientRect())).left- -1,top:E.top- -1,right:E.right+-2,bottom:E.bottom+-2,width:E.width+-1,height:E.height+-1};var E;return[{x:D.left,y:C(D),cell:k},{x:D.right,y:C(D),cell:k}]})),C=>u(C,m)),f,m).map(C=>C.cell)},fL=Pe(cM,s=>s.bottom,(s,u)=>s.y<u),gL=Pe(cM,s=>s.top,(s,u)=>s.y>u),dM=(s,u,d)=>{const f=s(u,d);return(m=f).breakType===Ya.Wrap&&0===m.positions.length||!Rr(d.getNode())&&(m=>m.breakType===Ya.Br&&1===m.positions.length)(f)?!((m,v,x)=>x.breakAt.exists(C=>m(v,C).breakAt.isSome()))(s,u,f):f.breakAt.isNone();var m},mL=Pe(dM,Ry),VD=Pe(dM,dg),yL=(s,u,d,f)=>{const m=s.selection.getRng(),v=u?1:-1;return!(!rw()||!((x,C,T)=>{const k=Oe.fromRangeStart(C);return Th(!x,T).exists(D=>D.isEqual(k))})(u,m,d)||(mu(v,s,d,!u,!1).each(x=>{xu(s,x)}),0))},FD=(s,u,d)=>{const f=((v,x)=>{const C=x.getNode(v);return Wl(C)?j.some(C):j.none()})(!!u,d),m=!1===u;f.fold(()=>xu(s,d.toRange()),v=>Th(m,s.getBody()).filter(x=>x.isEqual(d)).fold(()=>xu(s,d.toRange()),x=>{return C=u,k=v,void(T=s).undoManager.transact(()=>{const D=C?ss:Ho,E=ND(T,ge(k),D);xu(T,E)});var C,T,k}))},GD=(s,u,d,f)=>{const m=s.selection.getRng(),v=Oe.fromRangeStart(m),x=s.getBody();if(!u&&mL(f,v)){const C=(T=x,(E=k=d,P=D=v,bn(P.getClientRects()).bind(F=>fL(E,F.left,F.top)).bind(F=>{return gb(ys(z=F).map(H=>Ry(z,H).positions.concat(H)).getOr([]),P);var z})).orThunk(()=>bn(D.getClientRects()).bind(E=>bu(FC(T,Oe.before(k)),E.left))).getOr(Oe.before(k)));return FD(s,u,C),!0}var T,k,D,E,P;if(u&&VD(f,v)){const C=((T,k,D)=>((E,P)=>Br(P.getClientRects()).bind(F=>gL(E,F.left,F.top)).bind(F=>{return gb(Io(z=F).map(H=>[H].concat(dg(z,H).positions)).getOr([]),P);var z}))(k,D).orThunk(()=>bn(D.getClientRects()).bind(E=>bu(mb(T,Oe.after(k)),E.left))).getOr(Oe.after(k)))(x,d,v);return FD(s,u,C),!0}return!1},hM=(s,u,d)=>j.from(s.dom.getParent(s.selection.getNode(),"td,th")).bind(f=>j.from(s.dom.getParent(f,"table")).map(m=>d(s,u,m,f))).getOr(!1),HD=(s,u)=>hM(s,u,yL),Eb=(s,u)=>hM(s,u,GD),pM=(s,u,d)=>d.fold(j.none,j.none,(f,m)=>{return(v=m,Vp(v,zD)).map(x=>{return(s=>{const u=Ni.getWin(s).dom,d=(m,v,x,C)=>Mw(u,m,v,x,C),f=s.match({domRange:v=>{const x=ge(v.startContainer),C=ge(v.endContainer);return tk(x,v.startOffset,C,v.endOffset)},relative:ek,exact:tk});return((m,v)=>{var C;return((C,T)=>{const k=T.ltr();return k.collapsed?T.rtl().filter(D=>!1===D.collapsed).map(D=>ha.rtl(ge(D.endContainer),D.endOffset,ge(D.startContainer),D.startOffset)).getOrThunk(()=>Of(0,ha.ltr,k)):Of(0,ha.ltr,k)})(0,(C=m,v.match({domRange:k=>({ltr:Ve(k),rtl:j.none}),relative:(k,D)=>({ltr:$o(()=>QA(C,k,D)),rtl:$o(()=>j.some(QA(C,D,k)))}),exact:(k,D,E,P)=>({ltr:$o(()=>Mw(C,k,D,E,P)),rtl:$o(()=>j.some(Mw(C,E,P,k,D)))})})))})(u,f).match({ltr:d,rtl:d})})(Ni.exact(C=x,0,C,0));var C});var v},f=>(s.execCommand("mceTableInsertRowAfter"),WD(s,u,f))),WD=(s,u,d)=>{return pM(s,u,(m=Jo,Cd(f=d,void 0).fold(()=>op.none(f),v=>Nb(v.all,f,v.index,1,m))));var f,m},vL=(s,u,d)=>{return pM(s,u,(m=Jo,Cd(f=d,void 0).fold(()=>op.none(),v=>Nb(v.all,f,v.index,-1,m))));var f,m},UD=(s,u)=>{const d=["table","li","dl"],f=ge(s.getBody()),m=x=>{const C=Pn(x);return _n(x,f)||Fe(d,C)},v=s.selection.getRng();return(x=ge(u?v.endContainer:v.startContainer),C=m,((T,k,D=Mn)=>D(k)?j.none():Fe(T,Pn(k))?j.some(k):zc(k,T.join(","),E=>xi(E,"table")||D(E)))(["td","th"],x,C)).map(x=>(vg(x,m).each(C=>{s.model.table.clearSelectedCells(C.dom)}),s.selection.collapse(!u),(u?WD:vL)(s,m,x).each(C=>{s.selection.setRng(C)}),!0)).getOr(!1);var x,C},xa=(s,u)=>({container:s,offset:u}),ip=Cr.DOM,Lb=s=>u=>s===u?-1:0,fM=(s,u,d)=>{if(Je(s)&&u>=0)return j.some(xa(s,u));{const f=ql(ip);return j.from(f.backwards(s,u,Lb(s),d)).map(m=>xa(m.container,m.container.data.length))}},gM=(s,u,d)=>{if(!Je(s))return j.none();if(u>=0&&u<=s.data.length)return j.some(xa(s,u));{const m=ql(ip);return j.from(m.backwards(s,u,Lb(s),d)).bind(v=>gM(v.container,u+v.container.data.length,d))}},jD=(s,u,d)=>{if(!Je(s))return j.none();const f=s.data;if(u<=f.length)return j.some(xa(s,u));{const m=ql(ip);return j.from(m.forwards(s,u,Lb(s),d)).bind(v=>jD(v.container,u-f.length,d))}},mM=(s,u,d,f,m)=>{const v=ql(s,(x=s,C=>x.isBlock(C)||Fe(["BR","IMG","HR","INPUT"],C.nodeName)||"false"===x.getContentEditable(C)));var x;return j.from(v.backwards(u,d,f,m))},YD=s=>""!==s&&-1!==" \xa0\f\n\r\t\v".indexOf(s),XD=(s,u)=>s.substring(u.length),Rb=(s,u,d,f=!1)=>{if(!(m=u).collapsed||!Je(m.startContainer))return j.none();var m;const v={text:"",offset:0},x=s.getParent(u.startContainer,s.isBlock)||s.getRoot();return mM(s,u.startContainer,u.startOffset,(C,T,k)=>(v.text=k+v.text,v.offset+=T,((D,E,P,F=!1)=>{let z;const H=P.charAt(0);for(z=E-1;z>=0;z--){const V=D.charAt(z);if(!F&&YD(V))return j.none();if(H===V&&Ye(D,P,z,E))break}return j.some(z)})(v.text,v.offset,d,f).getOr(T)),x).bind(C=>{const T=u.cloneRange();if(T.setStart(C.container,C.offset),T.setEnd(u.endContainer,u.endOffset),T.collapsed)return j.none();const k=Yi(T.toString().replace(/\u00A0/g," "));return 0!==k.lastIndexOf(d)?j.none():j.some({text:XD(k,d),range:T,trigger:d})})},Ob=s=>{if(3===s.nodeType)return xa(s,s.data.length);{const u=s.childNodes;return u.length>0?Ob(u[u.length-1]):xa(s,u.length)}},bg=(s,u)=>{const d=s.childNodes;return d.length>0&&u<d.length?bg(d[u],0):d.length>0&&1===s.nodeType&&d.length===u?Ob(d[d.length-1]):xa(s,u)},Pb=(s,u,d,f={})=>{var m;const v=u(),x=null!==(m=s.selection.getRng().startContainer.nodeValue)&&void 0!==m?m:"",C=dt(v.lookupByTrigger(d.trigger),k=>d.text.length>=k.minChars&&k.matches.getOrThunk(()=>{return D=s.dom,E=>{const P=bg(E.startContainer,E.startOffset);return!((F,z)=>{var H;const V=null!==(H=F.getParent(z.container,F.isBlock))&&void 0!==H?H:F.getRoot();return mM(F,z.container,z.offset,(U,$)=>0===$?-1:$,V).filter(U=>{const $=U.container.data.charAt(U.offset-1);return!YD($)}).isSome()})(D,P)};var D})(d.range,x,d.text));if(0===C.length)return j.none();const T=Promise.all(Ee(C,k=>k.fetch(d.text,k.maxResults,f).then(D=>({matchText:d.text,items:D,columns:k.columns,onAction:k.onAction,highlightOn:k.highlightOn}))));return j.some({lookupData:T,context:d})};var Cl;!function(s){s[s.Error=0]="Error",s[s.Value=1]="Value"}(Cl||(Cl={}));const xg=(s,u,d)=>s.stype===Cl.Error?u(s.serror):d(s.svalue),Md=s=>({stype:Cl.Value,svalue:s}),ap=s=>({stype:Cl.Error,serror:s}),yM=xg,vM=s=>Ot(s)&&so(s).length>100?" removed due to size":JSON.stringify(s,null,2),sp=(s,u)=>ap([{path:s,getErrorInfo:u}]),Vy=s=>(...u)=>{if(0===u.length)throw new Error("Can't merge zero objects");const d={};for(let f=0;f<u.length;f++){const m=u[f];for(const v in m)Zt(m,v)&&(d[v]=s(d[v],m[v]))}return d},Bb=Vy((s,u)=>Jn(s)&&Jn(u)?Bb(s,u):u),zb=Vy((s,u)=>u),bM=s=>({tag:"defaultedThunk",process:Ve(s)}),xM=(s,u,d)=>{switch(s.tag){case"field":return u(s.key,s.newKey,s.presence,s.prop);case"custom":return d(s.newKey,s.instantiator)}},Vb=s=>({extract:(u,d)=>{return(f=s(d)).stype===Cl.Error?sp(u,Ve(f.serror)):f;var f},toString:Ve("val")}),ZD=Vb(Md),ws=(s,u,d,f)=>f(cr(s,u).getOrThunk(()=>d(s))),$D=(s,u,d,f,m)=>{const v=C=>m.extract(u.concat([f]),C),x=C=>C.fold(()=>Md(j.none()),T=>{return(D=m.extract(u.concat([f]),T)).stype===Cl.Value?{stype:Cl.Value,svalue:(0,j.some)(D.svalue)}:D;var D});switch(s.tag){case"required":return C=u,D=v,cr(T=d,k=f).fold(()=>{return P=k,F=T,sp(C,()=>'Could not find valid *required* value for "'+P+'" in '+vM(F));var P,F},D);case"defaultedThunk":return ws(d,f,s.process,v);case"option":return((C,T,k)=>k(cr(C,T)))(d,f,x);case"defaultedOptionThunk":return((C,T,k,D)=>D(cr(C,T).map(E=>!0===E?k(C):E)))(d,f,s.process,x);case"mergeWithThunk":return ws(d,f,Ve({}),C=>{const T=Bb(s.process(d),C);return v(T)})}var C,T,k,D},_a=s=>({extract:(u,d)=>((f,m,v)=>{const x={},C=[];for(const T of v)xM(T,(k,D,E,P)=>{const F=$D(E,f,m,k,P);yM(F,z=>{C.push(...z)},z=>{x[D]=z})},(k,D)=>{x[k]=D(m)});return C.length>0?ap(C):Md(x)})(u,d,s),toString:()=>"obj{\n"+Ee(s,d=>xM(d,(f,m,v,x)=>f+" -> "+x.toString(),(f,m)=>"state("+f+")")).join("\n")+"}"}),KD=s=>({extract:(u,d)=>(s=>{const u=(f=>{const m=[],v=[];return Se(f,x=>{xg(x,C=>v.push(C),C=>m.push(C))}),{values:m,errors:v}})(s);return u.errors.length>0?(d=u.errors,Lr(ap,Be)(d)):Md(u.values);var d})(Ee(d,(m,v)=>s.extract(u.concat(["["+v+"]"]),m))),toString:()=>"array("+s.toString()+")"}),QD=(s,u)=>((s,u)=>({extract:(d,f)=>cr(f,s).fold(()=>{return v=s,sp(d,()=>'Choice schema did not contain choice key: "'+v+'"');var v},m=>{return v=d,x=f,cr(C=u,T=m).fold(()=>{return D=C,E=T,sp(v,()=>'The chosen schema: "'+E+'" did not exist in branches: '+vM(D));var D,E},k=>k.extract(v.concat(["branch: "+T]),x));var v,x,C,T}),toString:()=>"chooseOn("+s+"). Possible values: "+so(u)}))(s,Et(u,_a)),Fb=Ve(ZD),Gb=(s,u)=>Vb(d=>{const f=typeof d;return s(d)?Md(d):ap(`Expected type: ${u} but got: ${f}`)}),_M=Gb(kr,"number"),Fy=Gb(wt,"string"),e2=Gb(Ar,"boolean"),Hb=Gb(tn,"function"),Gy=(s,u,d,f)=>({tag:"field",key:s,newKey:u,presence:d,prop:f}),t2=(s,u)=>({tag:"custom",newKey:s,instantiator:u}),Wb=(s,u)=>Gy(s,s,{tag:"required",process:{}},u),wM=s=>Wb(s,Fy),Td=s=>Wb(s,Hb),Cc=(s,u)=>Gy(s,s,{tag:"option",process:{}},u),Mc=s=>Cc(s,Fy),_g=(s,u,d)=>Gy(s,s,bM(u),d),n2=(s,u)=>_g(s,u,_M),r2=(s,u,d)=>{return _g(s,u,(f=d,m=v=>Fe(f,v)?ci.value(v):ci.error(`Unsupported value: "${v}", choose one of "${f.join(", ")}".`),Vb(v=>m(v).fold(ap,Md))));var f,m},SM=(s,u)=>_g(s,u,e2),lp=(s,u)=>_g(s,u,Hb),xL=wM("type"),Ub=Td("fetch"),CM=Td("onAction"),MM=lp("onSetup",()=>Qt),TM=Mc("text"),_L=Mc("icon"),wL=Mc("tooltip"),SL=Mc("label"),o2=SM("active",!1),jb=SM("enabled",!0),AM=SM("primary",!1),wg=s=>_g("type",s,Fy),i2=_a([xL,wM("trigger"),n2("minChars",1),((s,u)=>Gy(s,s,bM(1),Fb()))("columns"),n2("maxResults",10),Cc("matches",Hb),Ub,CM,(kM=Fy,_g("highlightOn",[],KD(kM)))]);var kM;const Yb=[jb,wL,_L,TM,MM],IM=[o2].concat(Yb),a2=[lp("predicate",Mn),r2("scope","node",["node","editor"]),r2("position","selection",["node","selection","line"])],s2=Yb.concat([wg("contextformbutton"),AM,CM,t2("original",Ir)]),CL=IM.concat([wg("contextformbutton"),AM,CM,t2("original",Ir)]),ML=Yb.concat([wg("contextformbutton")]),TL=IM.concat([wg("contextformtogglebutton")]),AL=QD("type",{contextformbutton:s2,contextformtogglebutton:CL});_a([wg("contextform"),lp("initValue",Ve("")),SL,((s,u)=>Gy(s,s,{tag:"required",process:{}},KD(u)))("commands",AL),Cc("launch",QD("type",{contextformbutton:ML,contextformtogglebutton:TL}))].concat(a2));const Hy=s=>{const u=Uu(),d=Oo(!1),f=u.isSet,m=()=>{f()&&(s.dispatch("AutocompleterEnd"),d.set(!1),u.clear())},v=$o(()=>(s=>{const u=s.ui.registry.getAll().popups,d=Et(u,v=>{return(x=v,((s,u,d)=>{return f=(C=u.extract([s],x=d)).stype===Cl.Error?{stype:Cl.Error,serror:(C=>({input:x,errors:C}))(C.serror)}:C,xg(f,ci.error,ci.value);var x,C,f})("Autocompleter",i2,x)).fold(C=>{throw new Error("Errors: \n"+(k=>{const D=k.length>10?k.slice(0,10).concat([{path:[],getErrorInfo:Ve("... (only showing first ten failures)")}]):k;return Ee(D,E=>"Failed path: ("+E.path.join(" > ")+")\n"+E.getErrorInfo())})((T=C).errors).join("\n")+"\n\nInput object: "+vM(T.input));var T},Ir);var x}),f=zi(zr(d,v=>v.trigger)),m=Ts(d);return{dataset:d,triggers:f,lookupByTrigger:v=>dt(m,x=>x.trigger===v)}})(s)),x=T=>{var k;(k=T,u.get().map(D=>Rb(s.dom,s.selection.getRng(),D.trigger,!0).bind(E=>Pb(s,v,E,k))).getOrThunk(()=>((D,E)=>{const P=E(),F=D.selection.getRng();return(z=D.dom,H=F,V=P,Zo(V.triggers,U=>Rb(z,H,U))).bind(z=>Pb(D,E,z));var z,H,V})(s,v))).fold(m,k=>{var D;D=k.context,f()||u.set({trigger:D.trigger,matchLength:D.text.length}),k.lookupData.then(D=>{u.get().map(E=>{const P=k.context;E.trigger===P.trigger&&(u.set({...E,matchLength:P.text.length}),d.get()?(U0(s,{range:P.range}),s.dispatch("AutocompleterUpdate",{lookupData:D})):(d.set(!0),U0(s,{range:P.range}),s.dispatch("AutocompleterStart",{lookupData:D})))})})})},C=()=>u.get().bind(({trigger:T})=>{const k=s.selection.getRng();return Rb(s.dom,k,T,d.get()).filter(({range:D})=>((E,P)=>{const F=E.compareBoundaryPoints(window.Range.START_TO_START,P),z=E.compareBoundaryPoints(window.Range.END_TO_END,P);return F>=0&&z<=0})(k,D)).map(({range:D})=>D)});s.addCommand("mceAutocompleterReload",(T,k)=>{const D=Ot(k)?k.fetchOptions:{};x(D)}),s.addCommand("mceAutocompleterClose",m),s.addCommand("mceAutocompleterRefreshActiveRange",()=>{C().each(T=>{U0(s,{range:T})})}),s.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>C().isSome()),((T,k)=>{const D=M_(k.load,50);T.on("input",E=>{("insertCompositionText"!==E.inputType||T.composing)&&D.throttle()}),T.on("keydown",E=>{const P=E.which;8===P?D.throttle():27===P?(D.cancel(),k.cancelIfNecessary()):38!==P&&40!==P||D.cancel()},!0),T.on("remove",D.cancel)})(s,{cancelIfNecessary:m,load:x})},u2=Eo().browser.isSafari(),c2=s=>Ci(ge(s)),DM=(s,u)=>{var d;return 0===s.startOffset&&s.endOffset===(null===(d=u.textContent)||void 0===d?void 0:d.length)},Sg=(s,u)=>j.from(s.getParent(u.container(),"details")),NM=(s,u)=>Sg(s,u).isSome(),EM=(s,u)=>{const d=u.getNode();ct(d)||s.selection.setCursorLocation(d,u.offset())},d2=(s,u,d)=>{const f=s.dom.getParent(u.container(),"details");if(f&&!f.open){const m=s.dom.select("summary",f)[0];m&&(d?Io(m):ys(m)).each(v=>EM(s,v))}else EM(s,u)},LM=(s,u,d)=>{const{dom:f,selection:m}=s,v=s.getBody();if("character"===d){const x=Oe.fromRangeStart(m.getRng()),C=f.getParent(x.container(),f.isBlock),T=Sg(f,x),k=C&&f.isEmpty(C),D=Hn(C?.previousSibling),E=Hn(C?.nextSibling);return!!(k&&(u?E:D)&&td(!u,v,x).exists(P=>NM(f,P)&&!Es(T,Sg(f,P))))||td(u,v,x).fold(Mn,P=>{const F=Sg(f,P);if(NM(f,P)&&!Es(T,F)){if(u||d2(s,P,!1),C&&k){if(u&&D||!u&&E)return!0;d2(s,P,u),s.dom.remove(C)}return!0}return!1})}return!1},Ad=(s,u,d)=>{return m=u,v=d,((x,C)=>{const T=j.from(x.getParent(C.startContainer,"details")),k=j.from(x.getParent(C.endContainer,"details"));if(T.isSome()||k.isSome()){const D=T.bind(E=>j.from(x.select("summary",E)[0]));return j.some({startSummary:D,startDetails:T,endDetails:k})}return j.none()})((f=s).dom,f.selection.getRng()).fold(()=>LM(f,m,v),x=>((s,u,d,f)=>{const m=s.selection.getRng(),v=Oe.fromRangeStart(m),x=s.getBody();return"selection"===f?((C,T)=>{const k=T.startSummary.exists(P=>P.contains(C.startContainer)),D=T.startSummary.exists(P=>P.contains(C.endContainer)),E=T.startDetails.forall(P=>T.endDetails.forall(F=>P!==F));return(k||D)&&!(k&&D)||E})(m,u):d?(C=v,u.startSummary.exists(k=>{return D=C,ys(E=k).exists(P=>Rr(P.getNode())&&Ki(E,P).exists(F=>F.isEqual(D))||P.isEqual(D));var D,E})||((C,T,k)=>k.startDetails.exists(D=>Ai(C,T).forall(E=>!D.contains(E.container()))))(x,v,u)):((C,T)=>T.startSummary.exists(k=>{return D=C,Io(k).exists(P=>P.isEqual(D));var D}))(v,u)||((C,T)=>T.startDetails.exists(k=>Ki(k,C).forall(D=>T.startSummary.exists(E=>!E.contains(C.container())&&E.contains(D.container())))))(v,u);var C})(f,x,m,v)||LM(f,m,v))||u2&&((f,m,v)=>{const x=f.selection,C=x.getNode(),T=x.getRng(),k=Oe.fromRangeStart(T);return!!Ug(C)&&("selection"===v&&DM(T,C)||Wk(m,k,C)?c2(C):f.undoManager.transact(()=>{const D=x.getSel();let{anchorNode:E,anchorOffset:P,focusNode:F,focusOffset:z}=D??{};const H=()=>{et(E)&&et(P)&&et(F)&&et(z)&&D?.setBaseAndExtent(E,P,F,z)},V=($,K)=>{Se($.childNodes,te=>{Nh(te)&&K.appendChild(te)})},U=f.dom.create("span",{"data-mce-bogus":"1"});V(C,U),C.appendChild(U),H(),"word"!==v&&"line"!==v||null==D||D.modify("extend",m?"right":"left",v),!x.isCollapsed()&&DM(x.getRng(),U)?c2(C):(f.execCommand(m?"ForwardDelete":"Delete"),E=D?.anchorNode,P=D?.anchorOffset,F=D?.focusNode,z=D?.focusOffset,V(U,C),H()),f.dom.remove(U)}),!0)})(s,u,d)?j.some(Qt):j.none();var f,m,v},Xb=s=>(u,d,f={})=>{const m=u.getBody(),v={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:m,currentTarget:m,eventPhase:Event.AT_TARGET,originalTarget:m,explicitOriginalTarget:m,isTrusted:!1,srcElement:m,cancelable:!1,preventDefault:Qt,inputType:d},x=b_(new InputEvent(s));return u.dispatch(s,{...x,...v,...f})},Wy=Xb("input"),qb=Xb("beforeinput"),RM=Eo(),h2=RM.os,p2=h2.isMacOS()||h2.isiOS(),f2=RM.browser.isFirefox(),_u=(s,u)=>{const d=s.dom,f=s.schema.getMoveCaretBeforeOnEnterElements();if(!u)return;if(/^(LI|DT|DD)$/.test(u.nodeName)){const v=(x=>{for(;x;){if(Bt(x)||Je(x)&&x.data&&/[\r\n\s]/.test(x.data))return x;x=x.nextSibling}return null})(u.firstChild);v&&/^(UL|OL|DL)$/.test(v.nodeName)&&u.insertBefore(d.doc.createTextNode(Ro),u.firstChild)}const m=d.createRng();if(u.normalize(),u.hasChildNodes()){const v=new fr(u,u);let x,C=u;for(;x=v.current();){if(Je(x)){m.setStart(x,0),m.setEnd(x,0);break}if(f[x.nodeName.toLowerCase()]){m.setStartBefore(x),m.setEndBefore(x);break}C=x,x=v.next()}x||(m.setStart(C,0),m.setEnd(C,0))}else Rr(u)?u.nextSibling&&d.isBlock(u.nextSibling)?(m.setStartBefore(u),m.setEndBefore(u)):(m.setStartAfter(u),m.setEndAfter(u)):(m.setStart(u,0),m.setEnd(u,0));s.selection.setRng(m),Oh(s,m)},up=(s,u)=>{const d=s.getRoot();let f,m=u;for(;m!==d&&m&&"false"!==s.getContentEditable(m);){if("true"===s.getContentEditable(m)){f=m;break}m=m.parentNode}return m!==d?f:d},Uy=s=>j.from(s.dom.getParent(s.selection.getStart(!0),s.dom.isBlock)),OM=s=>{s.innerHTML='<br data-mce-bogus="1">'},jy=(s,u)=>{di(s).toLowerCase()===u.tagName.toLowerCase()&&((d,f,m)=>{const v=d.dom;j.from(m.style).map(v.parseStyle).each(D=>{const E={...Fu(ge(f)),...D};v.setStyles(f,E)});const x=j.from(m.class).map(D=>D.split(/\s+/)),C=j.from(f.className).map(D=>dt(D.split(/\s+/),E=>""!==E));Kt(x,C,(D,E)=>{const P=dt(E,z=>!Fe(D,z)),F=[...D,...P];v.setAttrib(f,"class",F.join(" "))});const T=["style","class"],k=Lt(m,(D,E)=>!Fe(T,E));v.setAttribs(f,k)})(s,u,Us(s))},g2=(s,u,d,f,m=!0,v,x)=>{const C=s.dom,T=s.schema,k=di(s),D=d?d.nodeName.toUpperCase():"";let E=u;const P=T.getTextInlineElements();let F;F=v||"TABLE"===D||"HR"===D?C.create(v||k,x||{}):d.cloneNode(!1);let z=F;if(m){do{if(P[E.nodeName]){if(Ji(E)||ki(E))continue;const H=E.cloneNode(!1);C.setAttrib(H,"id",""),F.hasChildNodes()?(H.appendChild(F.firstChild),F.appendChild(H)):(z=H,F.appendChild(H))}}while((E=E.parentNode)&&E!==f)}else C.setAttrib(F,"style",null),C.setAttrib(F,"class",null);return jy(s,F),OM(z),F},m2=(s,u)=>{const d=s?.parentNode;return et(d)&&d.nodeName===u},y2=s=>et(s)&&/^(OL|UL|LI)$/.test(s.nodeName),PM=s=>et(s)&&/^(LI|DT|DD)$/.test(s.nodeName),Yy=s=>{const u=s.parentNode;return PM(u)?u:s},Xy=(s,u,d)=>{let f=s[d?"firstChild":"lastChild"];for(;f&&!Bt(f);)f=f[d?"nextSibling":"previousSibling"];return f===u},BM=s=>Gr(zr(Fu(ge(s)),(u,d)=>`${d}: ${u};`),(u,d)=>u+d,""),v2=(s,u)=>u&&"A"===u.nodeName&&s.isEmpty(u),Zb=(s,u)=>s.nodeName===u||s.previousSibling&&s.previousSibling.nodeName===u,qy=(s,u)=>et(u)&&s.isBlock(u)&&!/^(TD|TH|CAPTION|FORM)$/.test(u.nodeName)&&!/^(fixed|absolute)/i.test(u.style.position)&&s.isEditable(u.parentNode)&&"false"!==s.getContentEditable(u),Xa=(s,u,d)=>Je(u)?s?1===d&&u.data.charAt(d-1)===Hr?0:d:d===u.data.length-1&&u.data.charAt(d)===Hr?u.data.length:d:d,zM={insert:(s,u)=>{let d,f,m,v,x=!1;const C=s.dom,T=s.schema.getNonEmptyElements(),k=s.selection.getRng(),D=di(s),E=ge(k.startContainer),P=li(E,k.startOffset),F=P.exists(_e=>Eu(_e)&&!Jo(_e)),z=k.collapsed&&F,H=(_e,Ne)=>g2(s,d,re,te,gE(s),_e,Ne),V=_e=>{const Ne=Xa(_e,d,f);if(Je(d)&&(_e?Ne>0:Ne<d.data.length))return!1;if((d.parentNode===re||d===re)&&x&&!_e||_e&&Bt(d)&&d===re.firstChild)return!0;if(Zb(d,"TABLE")||Zb(d,"HR"))return x&&!_e||!x&&_e;const ce=new fr(d,re);let fe;for(Je(d)&&(_e&&0===Ne?ce.prev():_e||Ne!==d.data.length||ce.next());fe=ce.current();){if(Bt(fe)){if(!fe.getAttribute("data-mce-bogus")){const we=fe.nodeName.toLowerCase();if(T[we]&&"br"!==we)return!1}}else if(Je(fe)&&!Fc(fe.data))return!1;_e?ce.prev():ce.next()}return!0},U=()=>{let _e;return _e=/^(H[1-6]|PRE|FIGURE)$/.test(m)&&"HGROUP"!==ue?H(D):H(),((Ne,ce)=>{const fe=Mi(Ne);return!rr(ce)&&(wt(fe)?Fe(Ke.explode(fe),ce.nodeName.toLowerCase()):fe)})(s,v)&&qy(C,v)&&C.isEmpty(re,void 0,{includeZwsp:!0})?_e=C.split(v,re):C.insertAfter(_e,re),_u(s,_e),_e};lc(C,k).each(_e=>{k.setStart(_e.startContainer,_e.startOffset),k.setEnd(_e.endContainer,_e.endOffset)}),d=k.startContainer,f=k.startOffset;const $=!(!u||!u.shiftKey),K=!(!u||!u.ctrlKey);Bt(d)&&d.hasChildNodes()&&!z&&(x=f>d.childNodes.length-1,d=d.childNodes[Math.min(f,d.childNodes.length-1)]||d,f=x&&Je(d)?d.data.length:0);const te=up(C,d);if(!te||((_e,Ne)=>{const ce=_e.dom.getParent(Ne,"ol,ul,dl");return null!==ce&&"false"===_e.dom.getContentEditableParent(ce)})(s,d))return;$||(d=((_e,Ne,ce,fe,we)=>{var ze,Qe;const Xe=_e.dom,Dt=null!==(ze=up(Xe,fe))&&void 0!==ze?ze:Xe.getRoot();let zt=Xe.getParent(fe,Xe.isBlock);if(!zt||!qy(Xe,zt)){if(zt=zt||Dt,!zt.hasChildNodes()){const Pt=Xe.create(Ne);return jy(_e,Pt),zt.appendChild(Pt),ce.setStart(Pt,0),ce.setEnd(Pt,0),Pt}let Ut,kt=fe;for(;kt&&kt.parentNode!==zt;)kt=kt.parentNode;for(;kt&&!Xe.isBlock(kt);)Ut=kt,kt=kt.previousSibling;const gt=null===(Qe=Ut?.parentElement)||void 0===Qe?void 0:Qe.nodeName;if(Ut&&gt&&_e.schema.isValidChild(gt,Ne.toLowerCase())){const Pt=Ut.parentNode,ye=Xe.create(Ne);for(jy(_e,ye),Pt.insertBefore(ye,Ut),kt=Ut;kt&&!Xe.isBlock(kt);){const xe=kt.nextSibling;ye.appendChild(kt),kt=xe}ce.setStart(fe,we),ce.setEnd(fe,we)}}return fe})(s,D,k,d,f));let re=C.getParent(d,C.isBlock)||C.getRoot();v=et(re?.parentNode)?C.getParent(re.parentNode,C.isBlock):null,m=re?re.nodeName.toUpperCase():"";const ue=v?v.nodeName.toUpperCase():"";if("LI"!==ue||K||(re=v,v=v.parentNode,m=ue),Bt(v)&&(_e=s,ce=re,!$&&ce.nodeName.toLowerCase()===di(_e)&&_e.dom.isEmpty(ce)&&((fe,we,ze)=>{let Qe=we;for(;Qe&&Qe!==fe&&Hn(Qe.nextSibling);){const Dt=Qe.parentElement;if(!Dt||(Xe=Dt,!Zt(_e.schema.getTextBlockElements(),Xe.nodeName.toLowerCase())))return Dv(Dt);Qe=Dt}var Xe;return!1})(_e.getBody(),ce)))return((_e,Ne,ce)=>{var fe,we,ze;const Qe=Ne(di(_e)),Xe=_e.dom.getParent(ce,Dv);Xe&&(_e.dom.insertAfter(Qe,Xe),_u(_e,Qe),(null!==(ze=null===(we=null===(fe=ce.parentElement)||void 0===fe?void 0:fe.childNodes)||void 0===we?void 0:we.length)&&void 0!==ze?ze:0)>1&&_e.dom.remove(ce))})(s,H,re);var _e,ce;if(/^(LI|DT|DD)$/.test(m)&&Bt(v)&&C.isEmpty(re))return void((_e,Ne,ce,fe,we)=>{const ze=_e.dom,Qe=_e.selection.getRng(),Xe=ce.parentNode;if(ce===_e.getBody()||!Xe)return;var Dt;y2(Dt=ce)&&y2(Dt.parentNode)&&(we="LI");const zt=PM(fe)?BM(fe):void 0;let Ut=PM(fe)&&zt?Ne(we,{style:BM(fe)}):Ne(we);if(Xy(ce,fe,!0)&&Xy(ce,fe,!1))if(m2(ce,"LI")){const kt=Yy(ce);ze.insertAfter(Ut,kt),(null===(Pt=(gt=ce).parentNode)||void 0===Pt?void 0:Pt.firstChild)===gt?ze.remove(kt):ze.remove(ce)}else ze.replace(Ut,ce);else if(Xy(ce,fe,!0))m2(ce,"LI")?(ze.insertAfter(Ut,Yy(ce)),Ut.appendChild(ze.doc.createTextNode(" ")),Ut.appendChild(ce)):Xe.insertBefore(Ut,ce),ze.remove(fe);else if(Xy(ce,fe,!1))ze.insertAfter(Ut,Yy(ce)),ze.remove(fe);else{ce=Yy(ce);const kt=Qe.cloneRange();kt.setStartAfter(fe),kt.setEndAfter(ce);const gt=kt.extractContents();if("LI"===we&&((Pt,ye)=>Pt.firstChild&&"LI"===Pt.firstChild.nodeName)(gt)){const Pt=dt(Ee(Ut.children,ge),oa(Lu("br")));Ut=gt.firstChild,ze.insertAfter(gt,ce),Se(Pt,ye=>Hl(ge(Ut),ye)),zt&&Ut.setAttribute("style",zt)}else ze.insertAfter(gt,ce),ze.insertAfter(Ut,ce);ze.remove(fe)}var gt,Pt;_u(_e,Ut)})(s,H,v,re,D);if(!(z||re!==s.getBody()&&qy(C,re)))return;const he=re.parentNode;let de;if(z)de=H(D),P.fold(()=>{q(E,ge(de))},_e=>{Ho(_e,ge(de))}),s.selection.setCursorLocation(de,0);else if(Oa(re))de=$l(re),C.isEmpty(re)&&OM(re),jy(s,de),_u(s,de);else if(V(!1))de=U();else if(V(!0)&&he){const _e=Oe.fromRangeStart(k),Ne=rS(_e),ce=ge(re),fe=r1(ce,_e,s.schema)?Ek(ce,_e,s.schema).bind(ze=>j.from(ze.getNode())):j.none();de=he.insertBefore(H(),re);const we=Zb(re,"HR")||Ne?de:fe.getOr(re);_u(s,we)}else{const _e=(ce=>{const fe=ce.cloneRange();return fe.setStart(ce.startContainer,Xa(!0,ce.startContainer,ce.startOffset)),fe.setEnd(ce.endContainer,Xa(!1,ce.endContainer,ce.endOffset)),fe})(k).cloneRange();_e.setEndAfter(re);const Ne=_e.extractContents();(ce=>{Se(jn(ge(ce),ai),fe=>{const we=fe.dom;we.nodeValue=Yi(we.data)})})(Ne),(ce=>{let fe=ce;do{Je(fe)&&(fe.data=fe.data.replace(/^[\r\n]+/,"")),fe=fe.firstChild}while(fe)})(Ne),de=Ne.firstChild,C.insertAfter(Ne,re),((ce,fe,we)=>{var ze;const Qe=[];if(!we)return;let Xe=we;for(;Xe=Xe.firstChild;){if(ce.isBlock(Xe))return;Bt(Xe)&&!fe[Xe.nodeName.toLowerCase()]&&Qe.push(Xe)}let Dt=Qe.length;for(;Dt--;)Xe=Qe[Dt],(!Xe.hasChildNodes()||Xe.firstChild===Xe.lastChild&&""===(null===(ze=Xe.firstChild)||void 0===ze?void 0:ze.nodeValue)||v2(ce,Xe))&&ce.remove(Xe)})(C,T,de),((ce,fe)=>{fe.normalize();const we=fe.lastChild;(!we||Bt(we)&&/^(left|right)$/gi.test(ce.getStyle(we,"float",!0)))&&ce.add(fe,"br")})(C,re),C.isEmpty(re)&&OM(re),de.normalize(),C.isEmpty(de)?(C.remove(de),U()):(jy(s,de),_u(s,de))}C.setAttrib(de,"id",""),s.dispatch("NewBlock",{newBlock:de})},fakeEventName:"insertParagraph"},b2=(s,u,d)=>{const f=s.dom.createRng();d?(f.setStartBefore(u),f.setEndBefore(u)):(f.setStartAfter(u),f.setEndAfter(u)),s.selection.setRng(f),Oh(s,f)},IL=(s,u)=>{const d=er("br");Ho(ge(u),d),s.undoManager.add()},DL=(s,u)=>{NL(s.getBody(),u)||ss(ge(u),er("br"));const d=er("br");ss(ge(u),d),b2(s,d.dom,!1),s.undoManager.add()},NL=(s,u)=>{return d=Oe.after(u),!!Rr(d.getNode())||Ai(s,Oe.after(u)).map(f=>Rr(f.getNode())).getOr(!1);var d},x2=s=>s&&"A"===s.nodeName&&"href"in s,_2=s=>s.fold(Mn,x2,x2,Mn),VM=(s,u)=>{u.fold(Qt,Pe(IL,s),Pe(DL,s),Qt)},w2={insert:(s,u)=>{const d=(f=>{const m=Pe(dc,f),v=Oe.fromRangeStart(f.selection.getRng());return Oi(m,f.getBody(),v).filter(_2)})(s);d.isSome()?d.each(Pe(VM,s)):((f,m)=>{const x=f.dom,C=f.selection.getRng();let T,k=!1;lc(x,C).each(V=>{C.setStart(V.startContainer,V.startOffset),C.setEnd(V.endContainer,V.endOffset)});let D=C.startOffset,E=C.startContainer;if(Bt(E)&&E.hasChildNodes()){const V=D>E.childNodes.length-1;E=E.childNodes[Math.min(D,E.childNodes.length-1)]||E,D=V&&Je(E)?E.data.length:0}let P=x.getParent(E,x.isBlock);const F=P&&P.parentNode?x.getParent(P.parentNode,x.isBlock):null;"LI"!==(F?F.nodeName.toUpperCase():"")||!(!m||!m.ctrlKey)||(P=F),Je(E)&&D>=E.data.length&&(((V,U,$)=>{const K=new fr(U,$);let te;const re=V.getNonEmptyElements();for(;te=K.next();)if(re[te.nodeName.toLowerCase()]||Je(te)&&te.length>0)return!0;return!1})(f.schema,E,P||x.getRoot())||(T=x.create("br"),C.insertNode(T),C.setStartAfter(T),C.setEndAfter(T),k=!0)),T=x.create("br"),i0(x,C,T),b2(f,T,k),f.undoManager.add()})(s,u)},fakeEventName:"insertLineBreak"},$b=(s,u)=>Uy(s).filter(d=>u.length>0&&xi(ge(d),u)).isSome(),gi=pl([{br:[]},{block:[]},{none:[]}]),S2=(s,u)=>{return $b(d=s,kA(d));var d},Kb=s=>(u,d)=>Uy(u).filter(m=>Mr(ge(m))).isSome()===s,Zy=(s,u)=>(d,f)=>Uy(d).fold(Ve(""),x=>x.nodeName.toUpperCase())===s.toUpperCase()===u,EL=s=>{const u=up(s.dom,s.selection.getStart());return rr(u)},Tc=s=>Zy("pre",s),Jb=s=>(u,d)=>AA(u)===s,LL=(s,u)=>{return $b(d=s,W_(d));var d},$y=(s,u)=>u,C2=s=>{const u=di(s),d=up(s.dom,s.selection.getStart());return et(d)&&s.schema.isValidChild(d.nodeName,u)},RL=s=>{const u=s.selection.getRng(),d=ge(u.startContainer),f=li(d,u.startOffset).map(m=>Eu(m)&&!Jo(m));return u.collapsed&&f.getOr(!0)},qa=(s,u)=>(d,f)=>Gr(s,(m,v)=>m&&v(d,f),!0)?j.some(u):j.none(),Qb=(s,u,d)=>{u.selection.isCollapsed()||u.execCommand("delete"),et(d)&&qb(u,s.fakeEventName).isDefaultPrevented()||(s.insert(u,d),et(d)&&Wy(u,s.fakeEventName))},M2=(s,u)=>{const d=()=>Qb(w2,s,u),f=()=>Qb(zM,s,u),m=(v=s,x=u,LC([qa([S2],gi.none()),qa([Tc(!0),EL],gi.none()),qa([Zy("summary",!0)],gi.br()),qa([Tc(!0),Jb(!1),$y],gi.br()),qa([Tc(!0),Jb(!1)],gi.block()),qa([Tc(!0),Jb(!0),$y],gi.block()),qa([Tc(!0),Jb(!0)],gi.br()),qa([Kb(!0),$y],gi.br()),qa([Kb(!0)],gi.block()),qa([LL],gi.br()),qa([$y],gi.br()),qa([C2],gi.block()),qa([RL],gi.block())],[v,!(!x||!x.shiftKey)]).getOr(gi.none()));var v,x;switch(mo(s)){case"linebreak":m.fold(d,d,Qt);break;case"block":m.fold(f,f,Qt);break;case"invert":m.fold(f,d,Qt);break;default:m.fold(d,f,Qt)}},T2=Eo(),OL=T2.os.isiOS()&&T2.browser.isSafari(),ex=(s,u)=>{var d;u.isDefaultPrevented()||(u.preventDefault(),(d=s.undoManager).typing&&(d.typing=!1,d.add()),s.undoManager.transact(()=>{M2(s,u)}))},A2=Eo(),FM=s=>s.stopImmediatePropagation(),GM=s=>s.keyCode===Mt.PAGE_UP||s.keyCode===Mt.PAGE_DOWN,kd=(s,u,d)=>{d&&!s.get()?u.on("NodeChange",FM,!0):!d&&s.get()&&u.off("NodeChange",FM),s.set(d)},HM=(s,u)=>{const d=u.container(),f=u.offset();return Je(d)?(d.insertData(f,s),j.some(Oe(d,f+s.length))):wf(u).map(m=>{const v=aa(s);return u.isAtEnd()?ss(m,v):Ho(m,v),Oe(v.dom,s.length)})},Ky=Pe(HM,Ro),k2=Pe(HM," "),Cg=s=>u=>{s.selection.setRng(u.toRange()),s.nodeChanged()},PL=s=>{const u=Oe.fromRangeStart(s.selection.getRng()),d=ge(s.getBody());if(s.selection.isCollapsed()){const f=Pe(dc,s),m=Oe.fromRangeStart(s.selection.getRng());return Oi(f,s.getBody(),m).bind((v=d,x=>x.fold(C=>Ki(v.dom,Oe.before(C)),C=>Io(C),C=>ys(C),C=>Ai(v.dom,Oe.after(C))))).map(v=>()=>{return(x=d,C=u,T=s.schema,k=>Bk(x,k,T)?Ky(C):k2(C))(v).each(Cg(s));var x,C,T})}var v;return j.none()},WM=s=>{return Rl(On.browser.isFirefox()&&s.selection.isEditable()&&(u=s.dom,d=s.selection.getRng().startContainer,u.isEditable(u.getParent(d,"summary"))),()=>{const f=ge(s.getBody());var m,v,x;s.selection.isCollapsed()||s.getDoc().execCommand("Delete"),(m=f,v=Oe.fromRangeStart(s.selection.getRng()),x=s.schema,Bk(m,v,x)?Ky(v):k2(v)).each(Cg(s))});var u,d},ri=s=>m0(s)?[{keyCode:Mt.TAB,action:Wt(UD,s,!0)},{keyCode:Mt.TAB,shiftKey:!0,action:Wt(UD,s,!1)}]:[],UM=s=>{if(s.addShortcut("Meta+P","","mcePrint"),Hy(s),Bo(s))return Oo(null);{const u=(s=>{const u=Oo(null),d=Pe(dc,s);return s.on("NodeChange",f=>{mh(s)&&(((m,v,x)=>{const C=Ee(zn(ge(v.getRoot()),'*[data-mce-selected="inline-boundary"]'),D=>D.dom),T=dt(C,m),k=dt(x,m);Se(We(T,k),Pe(UC,!1)),Se(We(k,T),Pe(UC,!0))})(d,s.dom,f.parents),((m,v)=>{const x=v.get();if(m.selection.isCollapsed()&&!m.composing&&x){const C=Oe.fromRangeStart(m.selection.getRng());Oe.isTextPosition(C)&&!hh(T=C)&&!om(T)&&(By(m,((s,u)=>{return Oe.isTextPosition(u)?(f=u,b0(d=s)&&f.container()===d?((m,v)=>{const x=za(m.data.substr(0,v.offset())),C=za(m.data.substr(v.offset()));return(x.text+C.text).length>0?(x0(m),Oe(m,v.offset()-x.count)):v})(d,f):Sh(d,f)):((d,f)=>f.container()===d.parentNode?((m,v)=>{const x=v.container(),C=((T,k)=>{const D=vn(T,k);return-1===D?j.none():j.some(D)})(br(x.childNodes),m).map(T=>T<v.offset()?Oe(x,v.offset()-1):v).getOr(v);return Va(m),C})(d,f):Sh(d,f))(s,u);var d,f})(x,C)),v.set(null))}var T})(s,u),((m,v,x,C)=>{if(v.selection.isCollapsed()){const T=dt(C,m);Se(T,k=>{const D=Oe.fromRangeStart(v.selection.getRng());Oi(m,v.getBody(),D).bind(E=>vD(v,x,E))})}})(d,s,u,f.parents))}),u})(s);return(d=s).on("beforeinput",f=>{d.selection.isEditable()&&!_t(f.getTargetRanges(),m=>!gk(d.dom,m))||f.preventDefault()}),(d=>{d.on("keyup compositionstart",Pe(tM,d))})(s),((d,f)=>{d.on("keydown",m=>{m.isDefaultPrevented()||((v,x,C)=>{const T=On.os.isMacOS()||On.os.isiOS();yg([{keyCode:Mt.RIGHT,action:Wt(kb,v,!0)},{keyCode:Mt.LEFT,action:Wt(kb,v,!1)},{keyCode:Mt.UP,action:Wt(oM,v,!1)},{keyCode:Mt.DOWN,action:Wt(oM,v,!0)},...T?[{keyCode:Mt.UP,action:Wt(mg,v,!1),metaKey:!0,shiftKey:!0},{keyCode:Mt.DOWN,action:Wt(mg,v,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Mt.RIGHT,action:Wt(HD,v,!0)},{keyCode:Mt.LEFT,action:Wt(HD,v,!1)},{keyCode:Mt.UP,action:Wt(Eb,v,!1)},{keyCode:Mt.DOWN,action:Wt(Eb,v,!0)},{keyCode:Mt.UP,action:Wt(Eb,v,!1)},{keyCode:Mt.UP,action:Wt(Sc,v,!1)},{keyCode:Mt.DOWN,action:Wt(Sc,v,!0)},{keyCode:Mt.RIGHT,action:Wt(lM,v,!0)},{keyCode:Mt.LEFT,action:Wt(lM,v,!1)},{keyCode:Mt.UP,action:Wt(PD,v,!1)},{keyCode:Mt.DOWN,action:Wt(PD,v,!0)},{keyCode:Mt.RIGHT,action:Wt(jC,v,x,!0)},{keyCode:Mt.LEFT,action:Wt(jC,v,x,!1)},{keyCode:Mt.RIGHT,ctrlKey:!T,altKey:T,action:Wt(_D,v,x)},{keyCode:Mt.LEFT,ctrlKey:!T,altKey:T,action:Wt(_b,v,x)},{keyCode:Mt.UP,action:Wt(iM,v,!1)},{keyCode:Mt.DOWN,action:Wt(iM,v,!0)}],C).each(k=>{C.preventDefault()})})(d,f,m)})})(s,u),((d,f)=>{let m=!1;d.on("keydown",v=>{m=v.keyCode===Mt.BACKSPACE,v.isDefaultPrevented()||((x,C,T)=>{const k=T.keyCode===Mt.BACKSPACE?"deleteContentBackward":"deleteContentForward",D=x.selection.isCollapsed(),E=D?"character":"selection",P=F=>D?F?"word":"line":"selection";sM([{keyCode:Mt.BACKSPACE,action:Wt(eM,x)},{keyCode:Mt.BACKSPACE,action:Wt(rp,x,!1)},{keyCode:Mt.DELETE,action:Wt(rp,x,!0)},{keyCode:Mt.BACKSPACE,action:Wt(sb,x,!1)},{keyCode:Mt.DELETE,action:Wt(sb,x,!0)},{keyCode:Mt.BACKSPACE,action:Wt(wb,x,C,!1)},{keyCode:Mt.DELETE,action:Wt(wb,x,C,!0)},{keyCode:Mt.BACKSPACE,action:Wt(pc,x,!1)},{keyCode:Mt.DELETE,action:Wt(pc,x,!0)},{keyCode:Mt.BACKSPACE,action:Wt(Ad,x,!1,E)},{keyCode:Mt.DELETE,action:Wt(Ad,x,!0,E)},...p2?[{keyCode:Mt.BACKSPACE,altKey:!0,action:Wt(Ad,x,!1,P(!0))},{keyCode:Mt.DELETE,altKey:!0,action:Wt(Ad,x,!0,P(!0))},{keyCode:Mt.BACKSPACE,metaKey:!0,action:Wt(Ad,x,!1,P(!1))}]:[{keyCode:Mt.BACKSPACE,ctrlKey:!0,action:Wt(Ad,x,!1,P(!0))},{keyCode:Mt.DELETE,ctrlKey:!0,action:Wt(Ad,x,!0,P(!0))}],{keyCode:Mt.BACKSPACE,action:Wt(DC,x,!1)},{keyCode:Mt.DELETE,action:Wt(DC,x,!0)},{keyCode:Mt.BACKSPACE,action:Wt(JC,x,!1)},{keyCode:Mt.DELETE,action:Wt(JC,x,!0)},{keyCode:Mt.BACKSPACE,action:Wt(ab,x,!1)},{keyCode:Mt.DELETE,action:Wt(ab,x,!0)},{keyCode:Mt.BACKSPACE,action:Wt(Ay,x,!1)},{keyCode:Mt.DELETE,action:Wt(Ay,x,!0)},{keyCode:Mt.BACKSPACE,action:Wt(Sd,x,!1)},{keyCode:Mt.DELETE,action:Wt(Sd,x,!0)},{keyCode:Mt.BACKSPACE,action:Wt(bd,x,!1)},{keyCode:Mt.DELETE,action:Wt(bd,x,!0)}],T).filter(F=>x.selection.isEditable()).each(F=>{T.preventDefault(),qb(x,k).isDefaultPrevented()||(F(),Wy(x,k))})})(d,f,v)}),d.on("keyup",v=>{var x,C,T;v.isDefaultPrevented()||(C=v,T=m,yg([{keyCode:Mt.BACKSPACE,action:Wt(eD,x=d)},{keyCode:Mt.DELETE,action:Wt(eD,x)},...p2?[{keyCode:Mt.BACKSPACE,altKey:!0,action:Wt(wc,x)},{keyCode:Mt.DELETE,altKey:!0,action:Wt(wc,x)},...T?[{keyCode:f2?224:91,action:Wt(wc,x)}]:[]]:[{keyCode:Mt.BACKSPACE,ctrlKey:!0,action:Wt(wc,x)},{keyCode:Mt.DELETE,ctrlKey:!0,action:Wt(wc,x)}]],C)),m=!1})})(s,u),(d=>{let f=j.none();d.on("keydown",m=>{var v;m.keyCode===Mt.ENTER&&(OL&&(v=>{if(!v.collapsed)return!1;const x=v.startContainer;if(Je(x)){const C=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,T=x.data.charAt(v.startOffset-1);return C.test(T)}return!1})(d.selection.getRng())?(f=j.some((v=d).selection.getBookmark()),v.undoManager.add()):ex(d,m))}),d.on("keyup",m=>{m.keyCode===Mt.ENTER&&f.each(()=>{return x=m,(v=d).undoManager.undo(),f.fold(Qt,C=>v.selection.moveToBookmark(C)),ex(v,x),void(f=j.none());var v,x})})})(s),(d=>{d.on("keydown",f=>{var m,v;f.isDefaultPrevented()||(v=f,sM([{keyCode:Mt.SPACEBAR,action:Wt(PL,m=d)},{keyCode:Mt.SPACEBAR,action:Wt(WM,m)}],v).each(x=>{v.preventDefault(),qb(m,"insertText",{data:" "}).isDefaultPrevented()||(x(),Wy(m,"insertText",{data:" "}))}))})})(s),(d=>{d.on("input",f=>{f.isComposing||(m=>{const v=ge(m.getBody());m.selection.isCollapsed()&&((s,u,d)=>{const f=u.container();if(!Je(f))return j.none();if((m=>{const v=m.container();return Je(v)&&Ye(v.data,Ro)})(u)){const m=Uf(s,f,!1,d)||(v=>{const x=v.data,C=(T=>{const k=T.split("");return Ee(k,(D,E)=>Ih(D)&&E>0&&E<k.length-1&&hw(k[E-1])&&hw(k[E+1])?" ":D).join("")})(x);return C!==x&&(v.data=C,!0)})(f)||lS(s,f,!1,d);return Rl(m,u)}if(sS(s,u,d)){const m=Uf(s,f,!0,d)||lS(s,f,!0,d);return Rl(m,u)}return j.none()})(v,Oe.fromRangeStart(m.selection.getRng()),m.schema).each(x=>{m.selection.setRng(x.toRange())})})(d)})})(s),(d=>{d.on("keydown",f=>{var v;f.isDefaultPrevented()||(v=f,yg([...ri(d)],v).each(x=>{v.preventDefault()}))})})(s),((d,f)=>{d.on("keydown",m=>{m.isDefaultPrevented()||((v,x,C)=>{const T=On.os.isMacOS()||On.os.isiOS();yg([{keyCode:Mt.END,action:Wt(RD,v,!0)},{keyCode:Mt.HOME,action:Wt(RD,v,!1)},...T?[]:[{keyCode:Mt.HOME,action:Wt(mg,v,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Mt.END,action:Wt(mg,v,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Mt.END,action:Wt(Ib,v,!0)},{keyCode:Mt.HOME,action:Wt(Ib,v,!1)},{keyCode:Mt.END,action:Wt(zy,v,!0,x)},{keyCode:Mt.HOME,action:Wt(zy,v,!1,x)}],C).each(k=>{C.preventDefault()})})(d,f,m)})})(s,u),((d,f)=>{if(A2.os.isMacOS())return;const m=Oo(!1);d.on("keydown",v=>{GM(v)&&kd(m,d,!0)}),d.on("keyup",v=>{var x,C,T;v.isDefaultPrevented()||(T=v,yg([{keyCode:Mt.PAGE_UP,action:Wt(zy,x=d,!1,C=f)},{keyCode:Mt.PAGE_DOWN,action:Wt(zy,x,!0,C)}],T)),GM(v)&&m.get()&&(kd(m,d,!1),d.nodeChanged())})})(s,u),u}var d};class tx{constructor(u){let d;this.lastPath=[],this.editor=u;const f=this;"onselectionchange"in u.getDoc()||u.on("NodeChange click mouseup keyup focus",m=>{const v=u.selection.getRng(),x={startContainer:v.startContainer,startOffset:v.startOffset,endContainer:v.endContainer,endOffset:v.endOffset};"nodechange"!==m.type&&Om(x,d)||u.dispatch("SelectionChange"),d=x}),u.on("contextmenu",()=>{Vm(u),u.dispatch("SelectionChange")}),u.on("SelectionChange",()=>{const m=u.selection.getStart(!0);m&&ru(u)&&!f.isSameElementPath(m)&&u.dom.isChildOf(m,u.getBody())&&u.nodeChanged({selectionChange:!0})}),u.on("mouseup",m=>{!m.isDefaultPrevented()&&ru(u)&&("IMG"===u.selection.getNode().nodeName?Ha.setEditorTimeout(u,()=>{u.nodeChanged()}):u.nodeChanged())})}nodeChanged(u={}){const d=this.editor.selection;let f;if(this.editor.initialized&&d&&!SE(this.editor)&&!this.editor.mode.isReadOnly()){const m=this.editor.getBody();f=d.getStart(!0)||m,f.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(f,m)||(f=m);const v=[];this.editor.dom.getParent(f,x=>x===m||(v.push(x),!1)),this.editor.dispatch("NodeChange",{...u,element:f,parents:v})}}isSameElementPath(u){let d;const f=this.editor,m=ht(f.dom.getParents(u,Z,f.getBody()));if(m.length===this.lastPath.length){for(d=m.length;d>=0&&m[d]===this.lastPath[d];d--);if(-1===d)return this.lastPath=m,!0}return this.lastPath=m,!1}}const jM=sh("image"),cp=sh("event"),Id=s=>u=>{u[cp]=s},Dd=Id(0),YM=Id(2),XM=Id(1),qM=sh("mode"),dp=s=>u=>{u[qM]=s},ZM=(s,u)=>dp(u)(s),D2=dp(0),nx=dp(2),N2=dp(1),rx=s=>u=>j.from(u[qM]).exists(f=>f===s),Nd=rx(0),Mg=rx(1),ox=["none","copy","link","move"],E2=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Jy=()=>{const s=new window.DataTransfer;let u="move",d="all";const f={get dropEffect(){return u},set dropEffect(m){Fe(ox,m)&&(u=m)},get effectAllowed(){return d},set effectAllowed(m){(s=>j.from(s[cp]).exists(d=>0===d))(f)&&Fe(E2,m)&&(d=m)},get items(){return m=f,v=s.items,{...v,get length(){return v.length},add:(x,C)=>{if(Nd(m)){if(!wt(x))return v.add(x);if(!ct(C))return v.add(x,C)}return null},remove:x=>{Nd(m)&&v.remove(x)},clear:()=>{Nd(m)&&v.clear()}};var m,v},get files(){return Mg(f)?Object.freeze({length:0,item:m=>null}):s.files},get types(){return s.types},setDragImage:(m,v,x)=>{Nd(f)&&(f[jM]={image:m,x:v,y:x},s.setDragImage(m,v,x))},getData:m=>Mg(f)?"":s.getData(m),setData:(m,v)=>{Nd(f)&&s.setData(m,v)},clearData:m=>{Nd(f)&&s.clearData(m)}};return D2(f),f},$M=(s,u)=>s.setData("text/html",u),L2="x-tinymce/html",ix=Ve(L2),KM="\x3c!-- "+L2+" --\x3e",BL=s=>KM+s,JM=s=>-1!==s.indexOf(KM),R2="%MCEPASTEBIN%",ax=s=>s.dom.get("mcepastebin"),O2=s=>et(s)&&"mcepastebin"===s.id,QM=s=>s===R2,P2=(s,u)=>(Ke.each(u,d=>{s=Fn(d,RegExp)?s.replace(d,""):s.replace(d[0],d[1])}),s),B2=s=>P2(s,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(u,d,f)=>d||f?Ro:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Qy=(s,u)=>({content:s,cancelled:u}),eT=(s,u)=>(s.insertContent(u,{merge:h0(s),paste:!0}),!0),ev=s=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(s),sx=(s,u,d)=>{return!(s.selection.isCollapsed()||!ev(u)||(f=s,m=u,v=d,f.undoManager.extra(()=>{v(f,m)},()=>{f.execCommand("mceInsertLink",!1,m)}),0));var f,m,v},z2=(s,u,d)=>{return f=s,!(!ev(m=u)||!_t(js(f),v=>rn(m.toLowerCase(),`.${v.toLowerCase()}`)))&&((f,m,v)=>(f.undoManager.extra(()=>{v(f,m)},()=>{f.insertContent('<img src="'+m+'">')}),!0))(s,u,d);var f,m},tv=(s=>{let u=0;return()=>"mceclip"+u++})(),V2=s=>{const u=Jy();return $M(u,s),nx(u),u},lx=(s,u,d,f,m)=>{const v=((k,D,E)=>{const P=k.dispatch("PastePreProcess",{content:D,internal:E}),F=((z,H)=>{const V=$h({sanitize:K_(z),sandbox_iframes:Q_(z),sandbox_iframes_exclusions:ew(z),convert_unsafe_embeds:jA(z)},z.schema);V.addNodeFilter("meta",$=>{Ke.each($,K=>{K.remove()})});const U=V.parse(H,{forced_root_block:!1,isRootContent:!0});return pa({validate:!0},z.schema).serialize(U)})(k,P.content);return k.hasEventListeners("PastePostProcess")&&!P.isDefaultPrevented()?((z,H,V)=>{const U=z.dom.create("div",{style:"display:none"},H),$=z.dispatch("PastePostProcess",{node:U,internal:V});return Qy($.node.innerHTML,$.isDefaultPrevented())})(k,F,E):Qy(F,P.isDefaultPrevented())})(s,u,d);if(!v.cancelled){const x=v.content,C=()=>{return T=s,k=x,void(f||!p0(T)?eT(T,k):(E=T,P=k,Ke.each([sx,z2,eT],F=>!F(E,P,eT))));var T,k,E,P};m?qb(s,"insertFromPaste",{dataTransfer:V2(x)}).isDefaultPrevented()||(C(),Wy(s,"insertFromPaste")):C()}},Tg=(s,u,d,f)=>{const m=d||JM(u);lx(s,u.replace(KM,""),m,!1,f)},ux=(s,u,d)=>{const f=s.dom.encode(u).replace(/\r\n/g,"\n"),m=((v,x,C)=>{const T=v.split(/\n\n/),k=((P,F)=>{let z="<"+P;const H=zr(F,(V,U)=>U+'="'+Xp.encodeAllRaw(V)+'"');return H.length&&(z+=" "+H.join(" ")),z+">"})(x,C),D="</"+x+">",E=Ee(T,P=>P.split(/\n/).join("<br />"));return 1===E.length?E[0]:Ee(E,P=>k+P+D).join("")})(n_(f,IE(s)),di(s),Us(s));lx(s,m,!1,!0,d)},cx=s=>{const u={};if(s&&s.types)for(let d=0;d<s.types.length;d++){const f=s.types[d];try{u[f]=s.getData(f)}catch{u[f]=""}}return u},Ed=(s,u)=>u in s&&s[u].length>0,Ag=s=>Ed(s,"text/html")||Ed(s,"text/plain"),kg=(s,u,d)=>{const f="paste"===u.type?u.clipboardData:u.dataTransfer;var m;if(xh(s)&&f){const v=((x,C)=>{const T=C.items?st(br(C.items),D=>"file"===D.kind?[D.getAsFile()]:[]):[],k=C.files?br(C.files):[];return dt(T.length>0?T:k,(D=>{const E=js(D);return P=>xt(P.type,"image/")&&_t(E,F=>(z=>{const H=z.toLowerCase(),V={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ke.hasOwn(V,H)?"image/"+V[H]:"image/"+H})(F)===P.type)})(x))})(s,f);if(v.length>0)return u.preventDefault(),(m=v,Promise.all(Ee(m,x=>Jf(x).then(C=>({file:x,uri:C}))))).then(x=>{d&&s.selection.setRng(d),Se(x,C=>{var T,k;T=s,P1((k=C).uri).each(({data:D,type:E,base64Encoded:P})=>{const F=P?D:btoa(D),z=k.file,H=T.editorUpload.blobCache,U=H.getByData(F,E)??(($,K,te,re)=>{const ue=tv(),he=cf($)&&et(te.name),de=he?((ce,fe)=>{const we=fe.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return et(we)?ce.dom.encode(we[1]):void 0})($,te.name):ue,Ne=K.create(ue,te,re,de,he?te.name:void 0);return K.add(Ne),Ne})(T,H,z,F);Tg(T,`<img src="${U.blobUri()}">`,!1,!0)})})}),!0}return!1},dx=(s,u,d,f,m)=>{let v=B2(d);const x=Ed(u,ix())||JM(d),C=!x&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(v),T=ev(v);(QM(v)||!v.length||C&&!T)&&(f=!0),(f||T)&&(v=Ed(u,"text/plain")&&C?u["text/plain"]:(k=>{const D=Gn(),E=$h({},D);let P="";const F=D.getVoidElements(),z=Ke.makeMap("script noscript style textarea video audio iframe object"," "),H=D.getBlockElements(),V=U=>{const $=U.name,K=U;if("br"!==$){if("wbr"!==$)if(F[$]&&(P+=" "),z[$])P+=" ";else{if(3===U.type&&(P+=U.value),!(U.name in D.getVoidElements())){let te=U.firstChild;if(te)do{V(te)}while(te=te.next)}H[$]&&K.next&&(P+="\n","p"===$&&(P+="\n"))}}else P+="\n"};return k=P2(k,[/<!\[[^\]]+\]>/g]),V(E.parse(k)),P})(v)),QM(v)||(f?ux(s,v,m):Tg(s,v,x,m))},hx=(s,u,d,f)=>{((m,v,x)=>{if(!m)return!1;try{return m.clearData(),m.setData("text/html",v),m.setData("text/plain",x),m.setData(ix(),v),!0}catch{return!1}})(s.clipboardData,u.html,u.text)?(s.preventDefault(),f()):d(u.html,f)},F2=s=>(u,d)=>{const{dom:f,selection:m}=s,v=f.create("div",{contenteditable:"false","data-mce-bogus":"all"}),x=f.create("div",{contenteditable:"true"},u);f.setStyles(v,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),v.appendChild(x),f.add(s.getBody(),v);const C=m.getRng();x.focus();const T=f.createRng();T.selectNodeContents(x),m.setRng(T),Ha.setEditorTimeout(s,()=>{m.setRng(C),f.remove(v),d()},0)},nT=s=>({html:BL(s.selection.getContent({contextual:!0})),text:s.selection.getContent({format:"text"})}),G2=s=>{return!s.selection.isCollapsed()||!!(u=s).dom.getParent(u.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",u.getBody());var u},hp=(s,u)=>{var d,f;return ad.getCaretRangeFromPoint(null!==(d=u.clientX)&&void 0!==d?d:0,null!==(f=u.clientY)&&void 0!==f?f:0,s.getDoc())},H2=(s,u)=>{s.focus(),u&&s.selection.setRng(u)},zL=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,rT=s=>Ke.trim(s).replace(zL,oh).toLowerCase(),oT=(s,u,d)=>{const f=_h(s);if(d||"all"===f||!wh(s))return u;const m=f?f.split(/[, ]/):[];if(m&&"none"!==f){const v=s.dom,x=s.selection.getNode();u=u.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(C,T,k,D)=>{const E=v.parseStyle(v.decode(k)),P={};for(let z=0;z<m.length;z++){const H=E[m[z]];let V=H,U=v.getStyle(x,m[z],!0);/color/.test(m[z])&&(V=rT(V),U=rT(U)),U!==V&&(P[m[z]]=H)}const F=v.serializeStyle(P,"span");return F?T+' style="'+F+'"'+D:T+D})}else u=u.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return u.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(v,x,C,T)=>x+' style="'+C+'"'+T)},iT=Rr,U2=Je,aT=s=>dr(s.dom),sT=s=>u=>_n(ge(s),u),lT=(s,u)=>zu(ge(s),aT,sT(u)),uT=(s,u,d)=>{const f=new fr(s,u),m=d?f.next.bind(f):f.prev.bind(f);let v=s;for(let x=d?s:m();x&&!iT(x);x=m())Xi(x)&&(v=x);return v};var Ld;!function(s){s.Before="before",s.After="after"}(Ld||(Ld={}));const dT=(s,u)=>Math.abs(s.left-u),j2=(s,u)=>Math.abs(s.right-u),hT=(s,u,d)=>u>s.left&&u<s.right?0:Math.min(Math.abs(s.left-u),Math.abs(s.right-u)),nv=(s,u,d,f)=>{const m=D=>Xi(D.node)?j.some(D):Bt(D.node)?nv(br(D.node.childNodes),u,d,!1):j.none(),v=(D,E)=>{const P=Wn(D,(F,z)=>E(F,u,d)-E(z,u,d));return Zo(P,m).map(F=>{return f&&!Je(F.node)&&P.length>1?(z=F,H=P[1],V=E,m(H).filter(U=>Math.abs(V(z,u,d)-V(U,u,d))<2&&Je(U.node))).getOr(F):F;var z,H,V})},[x,C]=((s,u)=>{return(d=dt(s,d=>{return(f=u)>=(m=d).top&&f<=m.bottom;var f,m}),Gr(d,(f,m)=>f.fold(()=>j.some(m),v=>{const x=Math.min(m.left,v.left),C=Math.min(m.top,v.top),T=Math.max(m.right,v.right),k=Math.max(m.bottom,v.bottom);return j.some({top:C,right:T,bottom:k,left:x,width:T-x,height:k-C})}),j.none())).fold(()=>[[],s],d=>{const{pass:f,fail:m}=no(s,v=>((x,C)=>{const T=(k=x,D=C,Math.max(0,Math.min(k.bottom,D.bottom)-Math.max(k.top,D.top))/Math.min(x.height,C.height));var k,D;return((k,D)=>k.top<D.bottom&&k.bottom>D.top)(x,C)&&T>.5})(v,d));return[f,m]});var d})(Oy(s),d),{pass:T,fail:k}=no(C,D=>D.top<d);return v(x,hT).orThunk(()=>v(k,Zu)).orThunk(()=>v(T,Zu))},px=(s,u,d)=>((f,m,v)=>{const x=ge(f),T=((s,u,d)=>j.from(s.dom.elementFromPoint(u,d)).map(Hi))(_i(x),m,v).filter(k=>Go(x,k)).getOr(x);return((k,D,E,P)=>{const F=(z,H)=>{const V=dt(z.dom.childNodes,oa(U=>Bt(U)&&U.classList.contains("mce-drag-container")));return H.fold(()=>nv(V,E,P,!0),U=>{const $=dt(V,K=>K!==U.dom);return nv($,E,P,!0)}).orThunk(()=>(_n(z,k)?j.none():Op(z)).bind(U=>F(U,j.some(z))))};return F(D,j.none())})(x,T,m,v)})(s,u,d).filter(f=>Ju(f.node)).map(f=>{return{node:(m=f).node,position:dT(m,v=u)<j2(m,v)?Ld.Before:Ld.After};var m,v}),fx=s=>{var u,d;const f=s.getBoundingClientRect(),m=s.ownerDocument,v=m.documentElement,x=m.defaultView;return{top:f.top+(null!==(u=x?.scrollY)&&void 0!==u?u:0)-v.clientTop,left:f.left+(null!==(d=x?.scrollX)&&void 0!==d?d:0)-v.clientLeft}},pp=s=>({target:s,srcElement:s}),fT=dr,X2=((...s)=>u=>{for(let d=0;d<s.length;d++)if(s[d](u))return!0;return!1})(fT,Ra),gT=(s,u,d,f)=>{const m=s.dom,v=u.cloneNode(!0);m.setStyles(v,{width:d,height:f}),m.setAttrib(v,"data-mce-selected",null);const x=m.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return m.setStyles(x,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:d,height:f}),m.setStyles(v,{margin:0,boxSizing:"border-box"}),x.appendChild(v),x},rv=(s,u)=>d=>()=>{d.scroll({[s]:("left"===s?d.scrollX:d.scrollY)+u,behavior:"smooth"})},q2=rv("left",-32),fp=rv("left",32),Z2=rv("top",-32),Rd=rv("top",32),mT=s=>{s&&s.parentNode&&s.parentNode.removeChild(s)},Ig=(s,u,d,f,m)=>{"dragstart"===u&&$M(f,s.dom.getOuterHTML(d));const v=((s,u,d,f)=>{const m=((v,x)=>{const C=(T=>{const k=Jy(),D=j.from(T[qM]);return nx(T),Dd(k),k.dropEffect=T.dropEffect,k.effectAllowed=T.effectAllowed,(E=T,j.from(E[jM])).each(E=>k.setDragImage(E.image,E.x,E.y)),Se(T.types,E=>{"Files"!==E&&k.setData(E,T.getData(E))}),Se(T.files,E=>k.items.add(E)),(E=>j.from(E[cp]))(T).each(E=>{var P;P=k,Id(E)(P)}),D.each(E=>{ZM(T,E),ZM(k,E)}),k;var E})(v);return"dragstart"===x?(Dd(C),D2(C)):"drop"===x?(YM(C),nx(C)):(XM(C),N2(C)),C})(d,s);return ct(f)?((v,x,C)=>{const T=$t("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:v,composedPath:T,initEvent:T,preventDefault:Qt,stopImmediatePropagation:Qt,stopPropagation:Qt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:T,initMouseEvent:T,getModifierState:T,dataTransfer:C,...pp(x)}})(s,u,m):(v=s,x=f,C=u,T=m,{...x,dataTransfer:T,type:v,...pp(C)});var v,x,C,T})(u,d,f,m);return s.dispatch(u,v)},K2=(s,u,d)=>{s.on(f=>{f.intervalId.clear(),f.dragging&&d.fold(()=>Ig(u,"dragend",f.element,f.dataTransfer),m=>Ig(u,"dragend",f.element,f.dataTransfer,m))}),J2(s)},J2=s=>{s.on(u=>{u.intervalId.clear(),mT(u.ghost)}),s.clear()},ov=dr,iv=(s,u)=>fc(s.getBody(),u),FL=s=>{const u=s.selection,d=s.dom,f=s.getBody(),m=((s,u,d,f)=>{const m=Uu();let v,x;const C=di(s),T=s.dom,k=()=>{(D=>{var E,P;const F=zn(ge(D),"*[contentEditable=false],video,audio,embed,object");for(let z=0;z<F.length;z++){const H=F[z].dom;let V=H.previousSibling;if(gs(V)){const U=V.data;1===U.length?null===(E=V.parentNode)||void 0===E||E.removeChild(V):V.deleteData(U.length-1,1)}V=H.nextSibling,tf(V)&&(1===V.data.length?null===(P=V.parentNode)||void 0===P||P.removeChild(V):V.deleteData(0,1))}})(u),x&&(Va(x),x=null),m.on(D=>{T.remove(D.caret),m.clear()}),v&&(clearInterval(v),v=void 0)};return{show:(D,E)=>{let P;if(k(),YA(E))return null;if(!d(E))return x=((F,z)=>{var H;const V=(null!==(H=F.ownerDocument)&&void 0!==H?H:document).createTextNode(Hr),U=F.parentNode;if(z){const $=F.previousSibling;if(Gs($)){if(Uo($))return $;if(gs($))return $.splitText($.data.length-1)}U?.insertBefore(V,F)}else{const $=F.nextSibling;if(Gs($)){if(Uo($))return $;if(tf($))return $.splitText(1),$}F.nextSibling?U?.insertBefore(V,F.nextSibling):U?.appendChild(V)}return V})(E,D),P=E.ownerDocument.createRange(),tu(x.nextSibling)?(P.setStart(x,0),P.setEnd(x,0)):(P.setStart(x,1),P.setEnd(x,1)),P;{const F=((V,U,$)=>{var K;const te=(null!==(K=U.ownerDocument)&&void 0!==K?K:document).createElement(V);te.setAttribute("data-mce-caret",$?"before":"after"),te.setAttribute("data-mce-bogus","all"),te.appendChild(fs().dom);const re=U.parentNode;return $?re?.insertBefore(te,U):U.nextSibling?re?.insertBefore(te,U.nextSibling):re?.appendChild(te),te})(C,E,D),z=vf(u,E,D);T.setStyle(F,"top",z.top),T.setStyle(F,"caret-color","transparent"),x=F;const H=T.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});T.setStyles(H,{...z}),T.add(u,H),m.set({caret:H,element:E,before:D}),D&&T.addClass(H,"mce-visual-caret-before"),v=setInterval(()=>{m.on(V=>{f()?T.toggleClass(V.caret,"mce-visual-caret-hidden"):T.addClass(V.caret,"mce-visual-caret-hidden")})},500),P=E.ownerDocument.createRange(),P.setStart(F,0),P.setEnd(F,0)}return P},hide:k,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{m.on(D=>{const E=vf(u,D.element,D.before);T.setStyles(D.caret,{...E})})},destroy:()=>clearInterval(v)}})(s,f,d.isBlock,()=>ld(s)),v="sel-"+d.uniqueId(),x="data-mce-selected";let C;const T=V=>V!==f&&(ov(V)||ll(V))&&d.isChildOf(V,f)&&d.isEditable(V.parentNode),k=(V,U,$,K=!0)=>s.dispatch("ShowCaret",{target:U,direction:V,before:$}).isDefaultPrevented()?null:(K&&u.scrollIntoView(U,-1===V),m.show($,U)),D=V=>Uo(V)||tf(V)||gs(V),E=V=>D(V.startContainer)||D(V.endContainer),F=(V,U)=>{if(!V)return null;if(V.collapsed){if(!E(V)){const re=U?1:-1,ue=wm(re,f,V),he=ue.getNode(!U);if(et(he)){if(Ju(he))return k(re,he,!!U&&!ue.isAtEnd(),!1);if(Zl(he)&&dr(he.nextSibling)){const _e=d.createRng();return _e.setStart(he,0),_e.setEnd(he,0),_e}}const de=ue.getNode(U);if(et(de)){if(Ju(de))return k(re,de,!U&&!ue.isAtEnd(),!1);if(Zl(de)&&dr(de.previousSibling)){const _e=d.createRng();return _e.setStart(de,1),_e.setEnd(de,1),_e}}}return null}let $=V.startContainer,K=V.startOffset;const te=V.endOffset;if(Je($)&&0===K&&ov($.parentNode)&&($=$.parentNode,K=d.nodeIndex($),$=$.parentNode),!Bt($))return null;if(te===K+1&&$===V.endContainer){const re=$.childNodes[K];if(T(re))return(ue=>{const he=ue.cloneNode(!0),de=s.dispatch("ObjectSelected",{target:ue,targetClone:he});if(de.isDefaultPrevented())return null;const _e=((ce,fe)=>{const we=ge(s.getBody()),ze=s.getDoc(),Qe=al(we,"#"+v).getOrThunk(()=>{const zt=Ou('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ze);return uo(zt,"id",v),q(we,zt),zt}),Xe=d.createRng();ae(Qe),ee(Qe,[aa(Ro,ze),ge(fe),aa(Ro,ze)]),Xe.setStart(Qe.dom.firstChild,1),Xe.setEnd(Qe.dom.lastChild,0),Vu(Qe,{top:d.getPos(ce,s.getBody()).y+"px"}),Ph(Qe);const Dt=u.getSel();return Dt&&(Dt.removeAllRanges(),Dt.addRange(Xe)),Xe})(ue,de.targetClone),Ne=ge(ue);return Se(zn(ge(s.getBody()),`*[${x}]`),ce=>{_n(Ne,ce)||go(ce,x)}),d.getAttrib(ue,x)||ue.setAttribute(x,"1"),C=ue,H(),_e})(re)}return null},z=()=>{C&&C.removeAttribute(x),al(ge(s.getBody()),"#"+v).each(be),C=null},H=()=>{m.hide()};return Bo(s)||(s.on("click",V=>{d.isEditable(V.target)||(V.preventDefault(),s.focus())}),s.on("blur NewBlock",z),s.on("ResizeWindow FullscreenStateChanged",m.reposition),s.on("tap",V=>{const U=V.target,$=iv(s,U);ov($)?(V.preventDefault(),lg(s,$).each(F)):T(U)&&lg(s,U).each(F)},!0),s.on("mousedown",V=>{const U=V.target;if(U!==f&&"HTML"!==U.nodeName&&!d.isChildOf(U,f)||!((K,te,re)=>{const ue=ge(K.getBody()),he=K.inline?ue:ge(_i(ue).dom.documentElement),de=((_e,Ne,ce,fe)=>{const we=Ne.dom.getBoundingClientRect();return{x:ce-(_e?we.left+Ne.dom.clientLeft+ya(Ne):0),y:fe-(_e?we.top+Ne.dom.clientTop+OI(Ne):0)}})(K.inline,he,te,re);return((_e,Ne,ce)=>{const fe=rL(_e),we=oL(_e);return Ne>=0&&ce>=0&&Ne<=fe&&ce<=we})(he,de.x,de.y)})(s,V.clientX,V.clientY))return;z(),H();const $=iv(s,U);ov($)?(V.preventDefault(),lg(s,$).each(F)):px(f,V.clientX,V.clientY).each(K=>{var te;V.preventDefault(),(te=k(1,K.node,K.position===Ld.Before,!1))&&u.setRng(te),Hu($)?$.focus():s.getBody().focus()})}),s.on("keypress",V=>{Mt.modifierPressed(V)||ov(u.getNode())&&V.preventDefault()}),s.on("GetSelectionRange",V=>{let U=V.range;if(C){if(!C.parentNode)return void(C=null);U=U.cloneRange(),U.selectNode(C),V.range=U}}),s.on("SetSelectionRange",V=>{V.range=(V=>{const U=s.schema.getVoidElements(),$=d.createRng(),K=V.startContainer,te=V.startOffset,re=V.endContainer,ue=V.endOffset;return Zt(U,K.nodeName.toLowerCase())?0===te?$.setStartBefore(K):$.setStartAfter(K):$.setStart(K,te),Zt(U,re.nodeName.toLowerCase())?0===ue?$.setEndBefore(re):$.setEndAfter(re):$.setEnd(re,ue),$})(V.range);const U=F(V.range,V.forward);U&&(V.range=U)}),s.on("AfterSetSelectionRange",V=>{const U=V.range,$=U.startContainer.parentElement;var K,te;E(U)||Bt(K=$)&&"mcepastebin"===K.id||H(),et(te=$)&&d.hasClass(te,"mce-offscreen-selection")||z()}),(s=>{const u=Uu(),d=Cr.DOM,f=document,m=(T=u,k=s,D=>{if(0===D.button){const E=Sr(k.dom.getParents(D.target),X2).getOr(null);if(et(E)&&(P=k.dom,F=k.getBody(),fT(z=E)&&z!==F&&P.isEditable(z.parentElement))){const P=k.dom.getPos(E),F=k.getBody(),z=k.getDoc().documentElement;T.set({element:E,dataTransfer:Jy(),dragging:!1,screenX:D.screenX,screenY:D.screenY,maxX:(k.inline?F.scrollWidth:z.offsetWidth)-2,maxY:(k.inline?F.scrollHeight:z.offsetHeight)-2,relX:D.pageX-P.x,relY:D.pageY-P.y,width:E.offsetWidth,height:E.offsetHeight,ghost:gT(k,E,E.offsetWidth,E.offsetHeight),intervalId:Up(100)})}}var P,F,z}),v=((s,u)=>{const d=Zv((m,v)=>{return C=m,T=v,(x=u)._selectionOverrides.hideFakeCaret(),void px(x.getBody(),C,T).fold(()=>x.selection.placeCaretAt(C,T),k=>{const D=x._selectionOverrides.showCaret(1,k.node,k.position===Ld.Before,!1);D?x.selection.setRng(D):x.selection.placeCaretAt(C,T)});var x,C,T},0);u.on("remove",d.cancel);const f=s;return m=>s.on(v=>{const x=Math.max(Math.abs(m.screenX-v.screenX),Math.abs(m.screenY-v.screenY));if(!v.dragging&&x>10){const k=Ig(u,"dragstart",v.element,v.dataTransfer,m);if(et(k.dataTransfer)&&(v.dataTransfer=k.dataTransfer),k.isDefaultPrevented())return;v.dragging=!0,u.focus()}if(v.dragging){const k=m.currentTarget===u.getDoc().documentElement,D=((E,P)=>({pageX:P.pageX-E.relX,pageY:P.pageY+5}))(v,(P=m,F=(V=E=u).inline?fx(V.getBody()):{left:0,top:0},z=(V=>{const U=V.getBody();return V.inline?{left:U.scrollLeft,top:U.scrollTop}:{left:0,top:0}})(E),H=((V,U)=>{if(U.target.ownerDocument!==V.getDoc()){const $=fx(V.getContentAreaContainer()),K=(te=>{const re=te.getBody(),ue=te.getDoc().documentElement;return te.inline?{left:re.scrollLeft,top:re.scrollTop}:{left:re.scrollLeft||ue.scrollLeft,top:re.scrollTop||ue.scrollTop}})(V);return{left:U.pageX-$.left+K.left,top:U.pageY-$.top+K.top}}return{left:U.pageX,top:U.pageY}})(E,P),{pageX:H.left-F.left+z.left,pageY:H.top-F.top+z.top}));C=v.ghost,T=u.getBody(),C.parentNode!==T&&T.appendChild(C),((E,P,F,z,H,V,U,$,K,te,re,ue)=>{let he=0,de=0;E.style.left=P.pageX+"px",E.style.top=P.pageY+"px",P.pageX+F>H&&(he=P.pageX+F-H),P.pageY+z>V&&(de=P.pageY+z-V),E.style.width=F-he+"px",E.style.height=z-de+"px";const _e=K.clientHeight,Ne=K.clientWidth,ce=U+K.getBoundingClientRect().top,fe=$+K.getBoundingClientRect().left;re.on(we=>{we.intervalId.clear(),we.dragging&&ue&&(U+8>=_e?we.intervalId.set(Rd(te)):U-8<=0?we.intervalId.set(Z2(te)):$+8>=Ne?we.intervalId.set(fp(te)):$-8<=0?we.intervalId.set(q2(te)):ce+16>=window.innerHeight?we.intervalId.set(Rd(window)):ce-16<=0?we.intervalId.set(Z2(window)):fe+16>=window.innerWidth?we.intervalId.set(fp(window)):fe-16<=0&&we.intervalId.set(q2(window)))})})(v.ghost,D,v.width,v.height,v.maxX,v.maxY,m.clientY,m.clientX,u.getContentAreaContainer(),u.getWin(),f,k),d.throttle(m.clientX,m.clientY)}var E,P,V,F,z,H,C,T})})(u,s),x=((T,k)=>D=>{T.on(E=>{var P,F,z,H;if(E.intervalId.clear(),E.dragging){if(F=k,z=(F=>{const z=F.getSel();if(et(z)){const H=z.getRangeAt(0).startContainer;return Je(H)?H.parentNode:H}return null})(k.selection),H=E.element,!rr(z)&&z!==H&&!F.dom.isChildOf(z,H)&&F.dom.isEditable(z)){const F=null!==(P=k.getDoc().elementFromPoint(D.clientX,D.clientY))&&void 0!==P?P:k.getBody();Ig(k,"drop",F,E.dataTransfer,D).isDefaultPrevented()||k.undoManager.transact(()=>{((z,H)=>{const V=z.getParent(H.parentNode,z.isBlock);mT(H),V&&V!==z.getRoot()&&z.isEmpty(V)&&Ci(ge(V))})(k.dom,E.element),(z=>{const H=z.getData("text/html");return""===H?j.none():j.some(H)})(E.dataTransfer).each(z=>k.insertContent(z)),k._selectionOverrides.hideFakeCaret()})}Ig(k,"dragend",k.getBody(),E.dataTransfer,D)}}),J2(T)})(u,s),C=((T,k)=>D=>K2(T,k,j.some(D)))(u,s);var T,k;s.on("mousedown",m),s.on("mousemove",v),s.on("mouseup",x),d.bind(f,"mousemove",v),d.bind(f,"mouseup",C),s.on("remove",()=>{d.unbind(f,"mousemove",v),d.unbind(f,"mouseup",C)}),s.on("keydown",T=>{T.keyCode===Mt.ESC&&K2(u,s,j.none())})})(V=s),Zi(V)&&(U=>{const $=re=>{if(!re.isDefaultPrevented()){const ue=re.dataTransfer;ue&&(Fe(ue.types,"Files")||ue.files.length>0)&&(re.preventDefault(),"drop"===re.type&&ig(U,"Dropped file type is not supported"))}},K=re=>{Z0(U,re.target)&&$(re)},te=()=>{const re=Cr.DOM,ue=U.dom,he=document,de=U.inline?U.getBody():U.getDoc(),_e=["drop","dragover"];Se(_e,Ne=>{re.bind(he,Ne,K),ue.bind(de,Ne,$)}),U.on("remove",()=>{Se(_e,Ne=>{re.unbind(he,Ne,K),ue.unbind(de,Ne,$)})})};U.on("init",()=>{Ha.setEditorTimeout(U,te,0)})})(V),(V=>{const U=Zv(()=>{if(!V.removed&&V.getBody().contains(document.activeElement)){const $=V.selection.getRng();if($.collapsed){const K=AC(V,$,!1);V.selection.setRng(K)}}},0);V.on("focus",()=>{U.throttle()}),V.on("blur",()=>{U.cancel()})})(s),(V=>{V.on("init",()=>{V.on("focusin",U=>{const $=U.target;if(ll($)){const K=fc(V.getBody(),$),te=dr(K)?K:$;V.selection.getNode()!==te&&lg(V,te).each(re=>V.selection.setRng(re))}})})})(s)),{showCaret:k,showBlockCaretContainer:V=>{V.hasAttribute("data-mce-caret")&&($l(V),u.scrollIntoView(V))},hideFakeCaret:H,destroy:()=>{m.destroy(),C=null}};var V},GL=(s,u)=>{let d=u;for(let f=s.previousSibling;Je(f);f=f.previousSibling)d+=f.data.length;return d},Q2=(s,u,d,f,m)=>{if(Je(d)&&(f<0||f>d.data.length))return[];const v=m&&Je(d)?[GL(d,f)]:[f];let x=d;for(;x!==u&&x.parentNode;)v.push(s.nodeIndex(x,m)),x=x.parentNode;return x===u?v.reverse():[]},yT=(s,u,d,f,m,v,x=!1)=>({start:Q2(s,u,d,f,x),end:Q2(s,u,m,v,x)}),eN=(s,u)=>{const d=u.slice(),f=d.pop();return kr(f)?Gr(d,(m,v)=>m.bind(x=>j.from(x.childNodes[v])),j.some(s)).bind(m=>Je(m)&&(f<0||f>m.data.length)?j.none():j.some({node:m,offset:f})):j.none()},tN=(s,u)=>eN(s,u.start).bind(({node:d,offset:f})=>eN(s,u.end).map(({node:m,offset:v})=>{const x=document.createRange();return x.setStart(d,f),x.setEnd(m,v),x})),Dg=(s,u,d)=>{if(u&&s.isEmpty(u)&&!d(u)){const f=u.parentNode;s.remove(u,Je(u.firstChild)&&Fc(u.firstChild.data)),Dg(s,f,d)}},gx=(s,u,d,f=!0)=>{const m=u.startContainer.parentNode,v=u.endContainer.parentNode;u.deleteContents(),f&&!d(u.startContainer)&&(Je(u.startContainer)&&0===u.startContainer.data.length&&s.remove(u.startContainer),Je(u.endContainer)&&0===u.endContainer.data.length&&s.remove(u.endContainer),Dg(s,m,d),m!==v&&Dg(s,v,d))},av=(s,u)=>j.from(s.dom.getParent(u.startContainer,s.dom.isBlock)),mx=(s,u,d)=>{const f=s.dynamicPatternsLookup({text:d,block:u});return{...s,blockPatterns:Jl(f).concat(s.blockPatterns),inlinePatterns:dm(f).concat(s.inlinePatterns)}},yx=(s,u,d,f)=>{const m=s.createRng();return m.setStart(u,0),m.setEnd(d,f),m.toString()},vx=(s,u)=>s.create("span",{"data-mce-type":"bookmark",id:u}),bx=(s,u)=>{const d=s.createRng();return d.setStartAfter(u.start),d.setEndBefore(u.end),d},nN=(s,u,d)=>{const f=tN(s.getRoot(),d).getOrDie("Unable to resolve path range"),m=f.startContainer,v=f.endContainer,x=0===f.endOffset?v:v.splitText(f.endOffset),C=0===f.startOffset?m:m.splitText(f.startOffset),T=C.parentNode;return{prefix:u,end:x.parentNode.insertBefore(vx(s,u+"-end"),x),start:T.insertBefore(vx(s,u+"-start"),C)}},rN=(s,u,d)=>{Dg(s,s.get(u.prefix+"-end"),d),Dg(s,s.get(u.prefix+"-start"),d)},vT=s=>0===s.start.length,oN=(s,u,d,f)=>{const m=u.start;var v;return mM(s,f.container,f.offset,(v=m,(x,C)=>{const T=x.data.substring(0,C),k=T.lastIndexOf(v.charAt(v.length-1)),D=T.lastIndexOf(v);return-1!==D?D+v.length:-1!==k?k+1:-1}),d).bind(x=>{var C,T;const k=null!==(T=null===(C=d.textContent)||void 0===C?void 0:C.indexOf(m))&&void 0!==T?T:-1;if(-1!==k&&x.offset>=k+m.length){const D=s.createRng();return D.setStart(x.container,x.offset-m.length),D.setEnd(x.container,x.offset),j.some(D)}return gM(x.container,x.offset-m.length,d).map(E=>{const P=s.createRng();return P.setStart(E.container,E.offset),P.setEnd(x.container,x.offset),P}).filter(E=>E.toString()===m).orThunk(()=>oN(s,u,d,xa(x.container,0)))})},HL=(s,u,d,f)=>{const m=s.dom,v=m.getRoot(),x=d.pattern,C=d.position.container,T=d.position.offset;return gM(C,T-d.pattern.end.length,u).bind(k=>{const D=yT(m,v,k.container,k.offset,C,T,f);if(vT(x))return j.some({matches:[{pattern:x,startRng:D,endRng:D}],position:k});{const E=xx(s,d.remainingPatterns,k.container,k.offset,u,f),P=E.getOr({matches:[],position:k}),F=P.position;return((H,V,U,$,K,te=!1)=>{if(0===V.start.length&&!te){const re=H.createRng();return re.setStart(U,$),re.setEnd(U,$),j.some(re)}return fM(U,$,K).bind(re=>oN(H,V,K,re).bind(ue=>{var he;return te&&(ue.endContainer===re.container&&ue.endOffset===re.offset||0===re.offset&&(null===(he=ue.endContainer.textContent)||void 0===he?void 0:he.length)===ue.endOffset)?j.none():j.some(ue)}))})(m,x,F.container,F.offset,u,E.isNone()).map(H=>{const V=((U,$,K,te=!1)=>yT(U,$,K.startContainer,K.startOffset,K.endContainer,K.endOffset,te))(m,v,H,f);return{matches:P.matches.concat([{pattern:x,startRng:V,endRng:D}]),position:xa(H.startContainer,H.startOffset)}})}})},xx=(s,u,d,f,m,v)=>{const x=s.dom;return fM(d,f,x.getRoot()).bind(C=>{const T=yx(x,m,d,f);for(let k=0;k<u.length;k++){const D=u[k];if(!rn(T,D.end))continue;const E=u.slice();E.splice(k,1);const P=HL(s,m,{pattern:D,remainingPatterns:E,position:C},v);if(P.isNone()&&f>0)return xx(s,u,d,f-1,m,v);if(P.isSome())return P}return j.none()})},_x=(s,u,d)=>{s.selection.setRng(d),"inline-format"===u.type?Se(u.format,f=>{s.formatter.apply(f)}):s.execCommand(u.cmd,!1,u.value)},iN=(s,u,d,f,m,v)=>{var x;return((C,T)=>{const k=lt(C,D=>_t(T,E=>D.pattern.start===E.pattern.start&&D.pattern.end===E.pattern.end));return C.length===T.length?k?C:T:C.length>T.length?C:T})(xx(s,m.inlinePatterns,d,f,u,v).fold(()=>[],C=>C.matches),xx(s,(x=m.inlinePatterns,Wn(x,(C,T)=>T.end.length-C.end.length)),d,f,u,v).fold(()=>[],C=>C.matches))},aN=(s,u)=>{if(0===u.length)return;const d=s.dom,f=s.selection.getBookmark(),m=((v,x)=>{const C=sh("mce_textpattern"),T=Ft(x,(k,D)=>{const E=nN(v,C+`_end${k.length}`,D.endRng);return k.concat([{...D,endMarker:E}])},[]);return Ft(T,(k,D)=>{const E=T.length-k.length-1,P=vT(D.pattern)?D.endMarker:nN(v,C+`_start${E}`,D.startRng);return k.concat([{...D,startMarker:P}])},[])})(d,u);Se(m,v=>{const x=d.getParent(v.startMarker.start,d.isBlock),C=T=>T===x;vT(v.pattern)?((T,k,D,E)=>{const P=bx(T.dom,D);gx(T.dom,P,E),_x(T,k,P)})(s,v.pattern,v.endMarker,C):((T,k,D,E,P)=>{const F=T.dom,z=bx(F,E),H=bx(F,D);gx(F,H,P),gx(F,z,P);const U=bx(F,{prefix:D.prefix,start:D.end,end:E.start});_x(T,k,U)})(s,v.pattern,v.startMarker,v.endMarker,C),rN(d,v.endMarker,C),rN(d,v.startMarker,C)}),s.selection.moveToBookmark(f)},Od=(s,u,d)=>((f,m,v)=>{if(Je(f)&&0>=f.length)return j.some(xa(f,0));{const x=ql(ip);return j.from(x.forwards(f,0,Lb(f),v)).map(C=>xa(C.container,0))}})(u,0,u).map(f=>{const m=f.container;return jD(m,d.start.length,u).each(v=>{const x=s.createRng();x.setStart(m,0),x.setEnd(v.container,v.offset),gx(s,x,C=>C===u)}),m}),Sx=s=>(u,d)=>{const m=d.pattern,v=tN(u.dom.getRoot(),d.range).getOrDie("Unable to resolve path range");return av(u,v).each(x=>{"block-format"===m.type?((C,T)=>{const k=T.get(C);return yn(k)&&bn(k).exists(D=>Zt(D,"block"))})(m.format,u.formatter)&&u.undoManager.transact(()=>{s(u.dom,x,m),u.formatter.apply(m.format)}):"block-command"===m.type&&u.undoManager.transact(()=>{s(u.dom,x,m),u.execCommand(m.cmd,!1,m.value)})}),!0},gp=s=>(u,d)=>{const f=Wn(u,(x,C)=>C.start.length-x.start.length),m=d.replace(Ro," ");return Sr(f,v=>s(v,d,m))},Cx=(s,u)=>(d,f,m,v,x)=>{var C;void 0===x&&(x=null!==(C=f.textContent)&&void 0!==C?C:"");const T=d.dom,k=di(d);return T.is(f,k)?s(m.blockPatterns,x).map(D=>u&&Ke.trim(x).length===D.start.length?[]:[{pattern:D,range:yT(T,T.getRoot(),f,0,f,0,v)}]).getOr([]):[]},sN=Sx((s,u,d)=>{Od(s,u,d).each(f=>{const m=ge(f),v=rm(m);var x,C;/^\s[^\s]/.test(v)&&(x=m,C=v.slice(1),Qv.set(x,C))})}),lN=gp((s,u,d)=>0===u.indexOf(s.start)||0===d.indexOf(s.start)),uN=Cx(lN,!0),WL=Sx(Od),cN=gp((s,u,d)=>u===s.start||d===s.start),UL=Cx(cN,!1),dN=(s,u,d)=>{for(let f=0;f<s.length;f++)if(d(s[f],u))return!0;return!1},bT=Cr.DOM,YL=s=>s.inline?s.getElement().nodeName.toLowerCase():void 0,sv=s=>Lt(s,u=>!1===ct(u)),Pd=s=>{const u=s.options.get,d=s.editorUpload.blobCache;return sv({allow_conditional_comments:u("allow_conditional_comments"),allow_html_data_urls:u("allow_html_data_urls"),allow_svg_data_urls:u("allow_svg_data_urls"),allow_html_in_named_anchor:u("allow_html_in_named_anchor"),allow_script_urls:u("allow_script_urls"),allow_unsafe_link_target:u("allow_unsafe_link_target"),convert_unsafe_embeds:u("convert_unsafe_embeds"),convert_fonts_to_spans:u("convert_fonts_to_spans"),fix_list_elements:u("fix_list_elements"),font_size_legacy_values:u("font_size_legacy_values"),forced_root_block:u("forced_root_block"),forced_root_block_attrs:u("forced_root_block_attrs"),preserve_cdata:u("preserve_cdata"),inline_styles:u("inline_styles"),root_name:YL(s),sandbox_iframes:u("sandbox_iframes"),sandbox_iframes_exclusions:ew(s),sanitize:u("xss_sanitization"),validate:!0,blob_cache:d,document:s.getDoc()})},Ng=s=>{const u=s.options.get;return sv({custom_elements:u("custom_elements"),extended_valid_elements:u("extended_valid_elements"),invalid_elements:u("invalid_elements"),invalid_styles:u("invalid_styles"),schema:u("schema"),valid_children:u("valid_children"),valid_classes:u("valid_classes"),valid_elements:u("valid_elements"),valid_styles:u("valid_styles"),verify_html:u("verify_html"),padd_empty_block_inline_children:u("format_empty_lines")})},Bd=s=>s.inline?s.ui.styleSheetLoader:s.dom.styleSheetLoader,hN=s=>{const u=Bd(s),d=LA(s),f=s.contentCSS,m=()=>{u.unloadAll(f),s.inline||s.ui.styleSheetLoader.unloadAll(d)},v=()=>{s.removed?m():s.on("remove",m)};if(s.contentStyles.length>0){let T="";Ke.each(s.contentStyles,k=>{T+=k+"\r\n"}),s.dom.addStyle(T)}const x=Promise.all(((T,k,D)=>{const{pass:E,fail:P}=no(k,H=>tinymce.Resource.has(bc(H))),z=[...E.map(H=>{const V=tinymce.Resource.get(bc(H));return wt(V)?Promise.resolve(Bd(T).loadRawCss(H,V)):Promise.resolve()}),Bd(T).loadAll(P)];return T.inline?z:z.concat([T.ui.styleSheetLoader.loadAll(D)])})(s,f,d)).then(v).catch(v),C=EA(s);return C&&((T,k)=>{const D=ge(T.getBody()),E=zp(Os(D)),P=er("style");uo(P,"type","text/css"),q(P,aa(k)),q(E,P),T.on("remove",()=>{be(P)})})(s,C),x},Tx=s=>{var u;!0!==s.removed&&(Bo(u=s)||u.load({initial:!0,format:"html"}),u.startContent=u.getContent({format:"raw"}),(u=>{u.bindPendingEventDelegates(),u.initialized=!0,u.dispatch("Init"),u.focus(!0),(f=>{const m=f.dom.getRoot();f.inline||ru(f)&&f.selection.getStart(!0)!==m||Io(m).each(v=>{const x=v.getNode(),C=Wl(x)?Io(x).getOr(v):v;f.selection.setRng(C.toRange())})})(u),u.nodeChanged({initial:!0});const d=Ba(u);tn(d)&&d.call(u,u),(f=>{const m=GA(f);m&&Ha.setEditorTimeout(f,()=>{let v;v=!0===m?f:f.editorManager.get(m),v&&!v.destroyed&&(v.focus(),v.selection.scrollIntoView())},100)})(u)})(s))},pN=s=>{const u=s.getElement();let d=s.getDoc();s.inline&&(bT.addClass(u,"mce-content-body"),s.contentDocument=d=document,s.contentWindow=window,s.bodyElement=u,s.contentAreaContainer=u);const f=s.getBody();var x,C;f.disabled=!0,s.readonly=Ti(s),s._editableRoot=CE(s),!s.readonly&&s.hasEditableRoot()&&(s.inline&&"static"===bT.getStyle(f,"position",!0)&&(f.style.position="relative"),f.contentEditable="true"),f.disabled=!1,s.editorUpload=(s=>{const u=(()=>{let H=[];const V=K=>{if(!K.blob||!K.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const te=K.id||"blobid"+iL+++(()=>{const de=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+de()+de()+de()})(),re=K.name||te,ue=K.blob;var he;return{id:Ve(te),name:Ve(re),filename:Ve(K.filename||re+"."+(he=ue.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[he.toLowerCase()]||"dat")),blob:Ve(ue),base64:Ve(K.base64),blobUri:Ve(K.blobUri||URL.createObjectURL(ue)),uri:Ve(K.uri)}},U=K=>Sr(H,K).getOrUndefined(),$=K=>U(te=>te.id()===K);return{create:(K,te,re,ue,he)=>{if(wt(K))return V({id:K,name:ue,filename:he,blob:te,base64:re});if(Ot(K))return V(K);throw new Error("Unknown input type")},add:K=>{$(K.id())||H.push(K)},get:$,getByUri:K=>U(te=>te.blobUri()===K),getByData:(K,te)=>U(re=>re.base64()===K&&re.blob().type===te),findFirst:U,removeByUri:K=>{H=dt(H,te=>te.blobUri()!==K||(URL.revokeObjectURL(te.blobUri()),!1))},destroy:()=>{Se(H,K=>{URL.revokeObjectURL(K.blobUri())}),H=[]}}})();let d,f;const m=ag(),v=[],x=H=>V=>s.selection?H(V):[],C=(H,V,U)=>{let $=0;do{$=H.indexOf(V,$),-1!==$&&(H=H.substring(0,$)+U+H.substr($+V.length),$+=U.length-V.length+1)}while(-1!==$);return H},T=(H,V,U)=>(H=C(H,`src="${V}"`,`src="${U}"${U===On.transparentSrc?' data-mce-placeholder="1"':""}`),C(H,'data-mce-src="'+V+'"','data-mce-src="'+U+'"')),k=(H,V)=>{Se(s.undoManager.data,U=>{"fragmented"===U.type?U.fragments=Ee(U.fragments,$=>T($,H,V)):U.content=T(U.content,H,V)})},D=()=>(d||(d=FI(s,m)),F().then(x(H=>{const V=Ee(H,U=>U.blobInfo);return d.upload(V,VI(s)).then(x(U=>{const $=[];let K=!1;const te=Ee(U,(re,ue)=>{const{blobInfo:he,image:de}=H[ue];let _e=!1;return re.status&&U_(s)?(re.url&&!Ye(de.src,re.url)&&(K=!0),u.removeByUri(de.src),Bo(s)||((Ne,ce)=>{const fe=s.convertURL(ce,"src");var we;k(Ne.src,ce),ka(ge(Ne),{src:cf(s)?(we=ce,we+(-1===we.indexOf("?")?"?":"&")+(new Date).getTime()):ce,"data-mce-src":fe})})(de,re.url)):re.error&&(re.error.remove&&(k(de.src,On.transparentSrc),$.push(de),_e=!0),ig(s,cl.translate(["Failed to upload image: {0}",re.error.message]))),{element:de,status:re.status,uploadUri:re.url,blobInfo:he,removed:_e}});return $.length>0&&!Bo(s)?s.undoManager.transact(()=>{Se(Ue($),re=>{const ue=rs(re);var he;be(re),ue.each((he=s,de=>{var _e,Ne;(_e=he).dom.isEmpty((Ne=de).dom)&&et(_e.schema.getTextBlockElements()[Pn(Ne)])&&q(de,Ou('<br data-mce-bogus="1" />'))})),u.removeByUri(re.dom.src)})}):K&&s.undoManager.dispatchChange(),te}))}))),E=()=>Kc(s)?D():Promise.resolve([]),P=H=>lt(v,V=>V(H)),F=()=>(f||(f=((s,u)=>{const d={};return{findAll:(f,m=Z)=>{const v=dt((C=f)?br(C.getElementsByTagName("img")):[],C=>{const T=C.src;return!C.hasAttribute("data-mce-bogus")&&!C.hasAttribute("data-mce-placeholder")&&!(!T||T===On.transparentSrc)&&(xt(T,"blob:")?!s.isUploaded(T)&&m(C):!!xt(T,"data:")&&m(C))}),x=Ee(v,C=>{const T=C.src;if(Zt(d,T))return d[T].then(k=>wt(k)?k:{image:C,blobInfo:k.blobInfo});{const k=((D,E)=>{const P=()=>Promise.reject("Invalid data URI");if(xt(E,"blob:")){const H=D.getByUri(E);return et(H)?Promise.resolve(H):(F=E,xt(F,"blob:")?(V=F,fetch(V).then(U=>U.ok?U.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${V} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):xt(F,"data:")?(z=F,new Promise((V,U)=>{P1(z).bind(({type:$,data:K,base64Encoded:te})=>sy($,K,te)).fold(()=>U("Invalid data URI"),V)})):Promise.reject("Unknown URI format")).then(V=>Jf(V).then(U=>B1(U,!1,$=>j.some(uy(D,V,$))).getOrThunk(P)))}var V,F,z;return xt(E,"data:")?z1(D,E).fold(P,H=>Promise.resolve(H)):Promise.reject("Unknown image data format")})(u,T).then(D=>(delete d[T],{image:C,blobInfo:D})).catch(D=>(delete d[T],D));return d[T]=k,k}});var C;return Promise.all(x)}}})(m,u)),f.findAll(s.getBody(),P).then(x(H=>{const V=dt(H,U=>wt(U)?(ig(s,U),!1):"blob"!==U.uriType);return Bo(s)||Se(V,U=>{k(U.image.src,U.blobInfo.blobUri()),U.image.src=U.blobInfo.blobUri(),U.image.removeAttribute("data-mce-src")}),V}))),z=H=>H.replace(/src="(blob:[^"]+)"/g,(V,U)=>{const $=m.getResultUri(U);if($)return'src="'+$+'"';let K=u.getByUri(U);return K||(K=Gr(s.editorManager.get(),(te,re)=>te||re.editorUpload&&re.editorUpload.blobCache.getByUri(U),void 0)),K?'src="data:'+K.blob().type+";base64,"+K.base64()+'"':V});return s.on("SetContent",()=>{Kc(s)?E():F()}),s.on("RawSaveContent",H=>{H.content=z(H.content)}),s.on("GetContent",H=>{H.source_view||"raw"===H.format||"tree"===H.format||(H.content=z(H.content))}),s.on("PostRender",()=>{s.parser.addNodeFilter("img",H=>{Se(H,V=>{const U=V.attr("src");if(!U||u.getByUri(U))return;const $=m.getResultUri(U);$&&V.attr("src",$)})})}),{blobCache:u,addFilter:H=>{v.push(H)},uploadImages:D,uploadImagesAuto:E,scanForImages:F,destroy:()=>{u.destroy(),m.destroy(),f=d=null}}})(s),s.schema=Gn(Ng(s)),s.dom=Cr(d,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,update_styles:!0,root_element:s.inline?s.getBody():null,collect:s.inline,schema:s.schema,contentCssCors:Y_(s),referrerPolicy:hf(s),onSetAttrib:x=>{s.dispatch("SetAttrib",x)}}),s.parser=(x=>{const C=$h(Pd(x),x.schema);return C.addAttributeFilter("src,href,style,tabindex",(T,k)=>{const D=x.dom,E="data-mce-"+k;let P=T.length;for(;P--;){const F=T[P];let z=F.attr(k);if(z&&!F.attr(E)){if(0===z.indexOf("data:")||0===z.indexOf("blob:"))continue;"style"===k?(z=D.serializeStyle(D.parseStyle(z),F.name),z.length||(z=null),F.attr(E,z),F.attr(k,z)):"tabindex"===k?(F.attr(E,z),F.attr(k,null)):F.attr(E,x.convertURL(z,k,F.name))}}}),C.addNodeFilter("script",T=>{let k=T.length;for(;k--;){const D=T[k],E=D.attr("type")||"no/type";0!==E.indexOf("mce-")&&D.attr("type","mce-"+E)}}),yf(x)&&C.addNodeFilter("#cdata",T=>{var k;let D=T.length;for(;D--;){const E=T[D];E.type=8,E.name="#comment",E.value="[CDATA["+x.dom.encode(null!==(k=E.value)&&void 0!==k?k:"")+"]]"}}),C.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",T=>{let k=T.length;const D=x.schema.getNonEmptyElements();for(;k--;){const E=T[k];E.isEmpty(D)&&0===E.getAll("br").length&&E.append(new Xo("br",1))}}),C})(s),s.serializer=RI((x=>{const C=x.options.get;return{...Pd(x),...Ng(x),...sv({remove_trailing_brs:C("remove_trailing_brs"),pad_empty_with_br:C("pad_empty_with_br"),url_converter:C("url_converter"),url_converter_scope:C("url_converter_scope"),element_format:C("element_format"),entities:C("entities"),entity_encoding:C("entity_encoding"),indent:C("indent"),indent_after:C("indent_after"),indent_before:C("indent_before")})}})(s),s),s.selection=hC(s.dom,s.getWin(),s.serializer,s),s.annotator=xw(s),s.formatter=vd(s),s.undoManager=XI(s),s._nodeChangeDispatcher=new tx(s),s._selectionOverrides=FL(s),(x=>{const C=Uu(),T=Oo(!1),k=M_(D=>{x.dispatch("longpress",{...D,type:"longpress"}),T.set(!0)},400);x.on("touchstart",D=>{Cb(D).each(E=>{k.cancel();const P={x:E.clientX,y:E.clientY,target:D.target};k.throttle(D),T.set(!1),C.set(P)})},!0),x.on("touchmove",D=>{k.cancel(),Cb(D).each(E=>{C.on(P=>{((F,z)=>{const H=Math.abs(F.clientX-z.x),V=Math.abs(F.clientY-z.y);return H>5||V>5})(E,P)&&(C.clear(),T.set(!1),x.dispatch("longpresscancel"))})})},!0),x.on("touchend touchcancel",D=>{k.cancel(),"touchcancel"!==D.type&&C.get().filter(E=>E.target.isEqualNode(D.target)).each(()=>{T.get()?D.preventDefault():x.dispatch("tap",{...D,type:"tap"})})},!0)})(s),(C=x=s).on("click",T=>{C.dom.getParent(T.target,"details")&&T.preventDefault()}),(C=>{C.parser.addNodeFilter("details",T=>{const k=y0(C);Se(T,D=>{"expanded"===k?D.attr("open","open"):"collapsed"===k&&D.attr("open",null)})}),C.serializer.addNodeFilter("details",T=>{const k=J_(C);Se(T,D=>{"expanded"===k?D.attr("open","open"):"collapsed"===k&&D.attr("open",null)})})})(x),(x=>{const C="contenteditable",T=" "+Ke.trim(hr(x))+" ",k=" "+Ke.trim(g0(x))+" ",D=Ab(T),E=Ab(k),P=to(x);P.length>0&&x.on("BeforeSetContent",F=>{((z,H,V)=>{let U=H.length,$=V.content;if("raw"!==V.format){for(;U--;)$=$.replace(H[U],ED(z,$,g0(z)));V.content=$}})(x,P,F)}),x.parser.addAttributeFilter("class",F=>{let z=F.length;for(;z--;){const H=F[z];D(H)?H.attr(C,"true"):E(H)&&H.attr(C,"false")}}),x.serializer.addAttributeFilter(C,F=>{let z=F.length;for(;z--;){const H=F[z];if(!D(H)&&!E(H))continue;const V=H.attr("data-mce-content");P.length>0&&V?pL(P,V)?(H.name="#text",H.type=3,H.raw=!0,H.value=V):H.remove():H.attr(C,null)}})})(s),Bo(s)||((x=>{x.on("mousedown",C=>{C.detail>=3&&(C.preventDefault(),(s=>{const u=((d,f,m)=>{const v=Oe.fromRangeStart(d).getNode(),x=(E=f,P=m,zu(ge(v),F=>Ra(F.dom)||P.isBlock(Pn(F)),sT(E)).getOr(ge(E)).dom),C=uT(v,x,!1),T=uT(v,x,!0),k=document.createRange();var E,P;return lT(C,x).fold(()=>{U2(C)?k.setStart(C,0):k.setStartBefore(C)},D=>k.setStartBefore(D.dom)),lT(T,x).fold(()=>{U2(T)?k.setEnd(T,T.data.length):k.setEndAfter(T)},D=>k.setEndAfter(D.dom)),k})(s.selection.getRng(),s.getBody(),s.schema);s.selection.setRng(Zm(u))})(x))})})(s),(x=>{(s=>{const u=[",",".",";",":","!","?"],d=[32],f=()=>{return x=UA(s),C=mf(s),{inlinePatterns:dm(x),blockPatterns:Jl(x),dynamicPatternsLookup:C};var x,C},m=()=>s.options.isSet("text_patterns_lookup");s.on("keydown",x=>{if(13===x.keyCode&&!Mt.modifierPressed(x)&&s.selection.isCollapsed()){const C=hm(f(),"enter");(C.inlinePatterns.length>0||C.blockPatterns.length>0||m())&&((D,E)=>{const P=D.selection.getRng();return av(D,P).map(F=>{var z;const H=Math.max(0,P.startOffset),V=mx(E,F,null!==(z=F.textContent)&&void 0!==z?z:"");return{inlineMatches:iN(D,F,P.startContainer,H,V,!0),blockMatches:uN(D,F,V,!0)}}).filter(({inlineMatches:F,blockMatches:z})=>z.length>0||F.length>0)})(T=s,C).fold(Mn,({inlineMatches:D,blockMatches:E})=>(T.undoManager.add(),T.undoManager.extra(()=>{T.execCommand("mceInsertNewLine")},()=>{T.insertContent(Hr,{preserve_zwsp:!0}),aN(T,D),((z,H)=>{if(0===H.length)return;const V=z.selection.getBookmark();Se(H,U=>sN(z,U)),z.selection.moveToBookmark(V)})(T,E);const P=T.selection.getRng(),F=fM(P.startContainer,P.startOffset,T.dom.getRoot());T.execCommand("mceInsertNewLine"),F.each(z=>{const H=z.container;"\ufeff"===H.data.charAt(z.offset-1)&&(H.deleteData(z.offset-1,1),Dg(T.dom,H.parentNode,V=>V===T.dom.getRoot()))})}),!0))&&x.preventDefault()}var T},!0),s.on("keydown",x=>{if(32===x.keyCode&&s.selection.isCollapsed()){const C=hm(f(),"space");(C.blockPatterns.length>0||m())&&((D,E)=>{const P=D.selection.getRng();return av(D,P).map(F=>{const z=Math.max(0,P.startOffset),H=yx(D.dom,F,P.startContainer,z),V=mx(E,F,H);return UL(D,F,V,!1,H)}).filter(F=>F.length>0)})(T=s,C).fold(Mn,D=>(T.undoManager.transact(()=>{var E;E=T,Se(D,F=>WL(E,F))}),!0))&&x.preventDefault()}var T},!0);const v=()=>{if(s.selection.isCollapsed()){const x=hm(f(),"space");(x.inlinePatterns.length>0||m())&&((C,T)=>{const k=C.selection.getRng();av(C,k).map(D=>{const E=Math.max(0,k.startOffset-1),P=yx(C.dom,D,k.startContainer,E),F=mx(T,D,P),z=iN(C,D,k.startContainer,E,F,!1);z.length>0&&C.undoManager.transact(()=>{aN(C,z)})})})(s,x)}};s.on("keyup",x=>{dN(d,x,(C,T)=>C===T.keyCode&&!Mt.modifierPressed(T))&&v()}),s.on("keypress",x=>{dN(u,x,(C,T)=>C.charCodeAt(0)===T.charCode)&&Ha.setEditorTimeout(s,v)})})(x)})(s));const m=UM(s);((x,C)=>{x.addCommand("delete",()=>{var T;DD(T=x,C,!1).fold(()=>{T.selection.isEditable()&&(u1(T),hS(T))},ur)}),x.addCommand("forwardDelete",()=>{var T;DD(T=x,C,!0).fold(()=>{T.selection.isEditable()&&Hk(T)},ur)})})(s,m),(x=>{x.on("NodeChange",()=>(C=>{const T=C.dom,k=C.selection,D=C.schema,E=D.getBlockElements(),P=k.getStart(),F=C.getBody();let z,H,V=null;const U=di(C);if(!P||!Bt(P))return;const $=F.nodeName.toLowerCase();if(!D.isValidChild($,U.toLowerCase())||(te=E,re=F,_t(Hm(ge(P),ge(re)),he=>Mb(te,he.dom))))return;var te,re;if(F.firstChild===F.lastChild&&Rr(F.firstChild))return z=Tb(C),z.appendChild(fs().dom),F.replaceChild(z,F.firstChild),C.selection.setCursorLocation(z,0),void C.nodeChanged();let K=F.firstChild;for(;K;)if(Bt(K)&&uA(D,K),hL(D,K)){if(gg(E,K)){H=K,K=K.nextSibling,T.remove(H);continue}if(!z){if(!V&&C.hasFocus()&&(V=Iy(C.selection.getRng(),()=>document.createElement("span"))),!K.parentNode){K=null;break}z=Tb(C),F.insertBefore(z,K)}H=K,K=K.nextSibling,z.appendChild(H)}else z=null,K=K.nextSibling;V&&(C.selection.setRng(db(V)),C.nodeChanged())})(x))})(s),(x=>{var C;const T=x.dom,k=di(x),D=null!==(C=PA(x))&&void 0!==C?C:"",E=(P,F)=>{if((V=>{if(_C(V)){const U=V.keyCode;return!My(V)&&(Mt.metaKeyPressed(V)||V.altKey||U>=112&&U<=123||Fe(aL,U))}return!1})(P))return;const z=x.getBody(),H=!(_C(V=P)&&!(My(V)||"keyup"===V.type&&229===V.keyCode))&&((V,U,$)=>{if(V.isEmpty(U,void 0,{skipBogus:!1,includeZwsp:!0})){const K=U.firstElementChild;return!K||!V.getStyle(U.firstElementChild,"padding-left")&&!V.getStyle(U.firstElementChild,"padding-right")&&$===K.nodeName.toLowerCase()}return!1})(T,z,k);var V;(""!==T.getAttrib(z,xC)!==H||F)&&(T.setAttrib(z,xC,H?D:null),((V,U)=>{V.dispatch("PlaceholderToggle",{state:U})})(x,H),x.on(H?"keydown":"keyup",E),x.off(H?"keyup":"keydown",E))};Vr(D)&&x.on("init",P=>{E(P,!0),x.on("change SetContent ExecCommand",E),x.on("paste",F=>Ha.setEditorTimeout(x,()=>E(F)))})})(s),(s=>{const u=Oo(!1),d=Oo(f0(s)?"text":"html"),f=(m=>{const v=Oo(null);return{create:()=>((x,C)=>{const{dom:T,selection:k}=x,D=x.getBody();C.set(k.getRng());const E=T.add(x.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},R2);On.browser.isFirefox()&&T.setStyle(E,"left","rtl"===T.getStyle(D,"direction",!0)?65535:-65535),T.bind(E,"beforedeactivate focusin focusout",P=>{P.stopPropagation()}),E.focus(),k.select(E,!0)})(m,v),remove:()=>((x,C)=>{const T=x.dom;if(ax(x)){let k;const D=C.get();for(;k=ax(x);)T.remove(k),T.unbind(k);D&&x.selection.setRng(D)}C.set(null)})(m,v),getEl:()=>ax(m),getHtml:()=>(x=>{const C=x.dom,T=(P,F)=>{P.appendChild(F),C.remove(F,!0)},[k,...D]=dt(x.getBody().childNodes,O2);Se(D,P=>{T(k,P)});const E=C.select("div[id=mcepastebin]",k);for(let P=E.length-1;P>=0;P--){const F=C.create("div");k.insertBefore(F,E[P]),T(F,E[P])}return k?k.innerHTML:""})(m),getLastRng:v.get}})(s);var m,v,x;m=s,(On.browser.isChromium()||On.browser.isSafari())&&(x=oT,(v=m).on("PastePreProcess",C=>{C.content=x(v,C.content,C.internal)})),((m,v)=>{m.addCommand("mceTogglePlainTextPaste",()=>{((x,C)=>{"text"===C.get()?(C.set("html"),Sw(x,!1)):(C.set("text"),Sw(x,!0)),x.focus()})(m,v)}),m.addCommand("mceInsertClipboardContent",(x,C)=>{C.html&&Tg(m,C.html,C.internal,!1),C.text&&ux(m,C.text,!1)})})(s,d),(m=>{const v=T=>k=>{T(m,k)},x=HA(m);tn(x)&&m.on("PastePreProcess",v(x));const C=gf(m);tn(C)&&m.on("PastePostProcess",v(C))})(s),s.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===d.get()),s.on("PreInit",()=>{(m=>{m.on("cut",(v=>x=>{!x.isDefaultPrevented()&&G2(v)&&v.selection.isEditable()&&hx(x,nT(v),F2(v),()=>{if(On.browser.isChromium()||On.browser.isFirefox()){const C=v.selection.getRng();Ha.setEditorTimeout(v,()=>{v.selection.setRng(C),v.execCommand("Delete")},0)}else v.execCommand("Delete")})})(m)),m.on("copy",(v=>x=>{!x.isDefaultPrevented()&&G2(v)&&hx(x,nT(v),F2(v),Qt)})(m))})(s),((m,v)=>{ym(m)&&m.on("dragend dragover draggesture dragdrop drop drag",x=>{x.preventDefault(),x.stopPropagation()}),xh(m)||m.on("drop",x=>{const C=x.dataTransfer;C&&_t(C.files,k=>/^image\//.test(k.type))&&x.preventDefault()}),m.on("drop",x=>{if(x.isDefaultPrevented())return;const C=hp(m,x);if(rr(C))return;const T=cx(x.dataTransfer),k=Ed(T,ix());if((!Ag(T)||(z=>{const H=z["text/plain"];return!!H&&0===H.indexOf("file://")})(T))&&kg(m,x,C))return;const D=T[ix()],E=D||T["text/html"]||T["text/plain"],P=((z,H,V,U)=>{const $=z.getParent(V,K=>lr(H,K));if(!Hn(z.getParent(V,"summary")))return!0;if($&&Zt(U,"text/html")){const K=(new DOMParser).parseFromString(U["text/html"],"text/html").body;return!Hn(K.querySelector($.nodeName.toLowerCase()))}return!1})(m.dom,m.schema,C.startContainer,T),F=v.get();F&&!P||E&&(x.preventDefault(),Ha.setEditorTimeout(m,()=>{m.undoManager.transact(()=>{(D||F&&P)&&m.execCommand("Delete"),H2(m,C);const z=B2(E);T["text/html"]?Tg(m,z,k,!0):ux(m,z,!0)})}))}),m.on("dragstart",x=>{v.set(!0)}),m.on("dragover dragend",x=>{xh(m)&&!v.get()&&(x.preventDefault(),H2(m,hp(m,x))),"dragend"===x.type&&v.set(!1)}),(x=>{x.on("input",C=>{const T=k=>Hn(k.querySelector("summary"));if("deleteByDrag"===C.inputType){const k=dt(x.dom.select("details"),T);Se(k,D=>{Rr(D.firstChild)&&D.firstChild.remove();const E=x.dom.create("summary");E.appendChild(fs().dom),D.prepend(E)})}})})(m)})(s,u),((s,u,d)=>{((f,m,v)=>{let x;f.on("keydown",C=>{var T;(Mt.metaKeyPressed(T=C)&&86===T.keyCode||T.shiftKey&&45===T.keyCode)&&!C.isDefaultPrevented()&&(x=C.shiftKey&&86===C.keyCode)}),f.on("paste",C=>{if(C.isDefaultPrevented()||(D=C,On.os.isAndroid()&&0===(null===(P=null===(E=D.clipboardData)||void 0===E?void 0:E.items)||void 0===P?void 0:P.length)))return;var D,E,P;const T="text"===v.get()||x;x=!1;const k=cx(C.clipboardData);!Ag(k)&&kg(f,C,m.getLastRng()||f.selection.getRng())||(Ed(k,"text/html")?(C.preventDefault(),dx(f,k,k["text/html"],T,!0)):Ed(k,"text/plain")&&Ed(k,"text/uri-list")?(C.preventDefault(),dx(f,k,k["text/plain"],T,!0)):(m.create(),Ha.setEditorTimeout(f,()=>{const D=m.getHtml();m.remove(),dx(f,k,D,T,!1)},0)))})})(s,u,d),(f=>{const m=x=>xt(x,"webkit-fake-url"),v=x=>xt(x,"data:");f.parser.addNodeFilter("img",(x,C,T)=>{if(!xh(f)&&!0===(null===(D=T.data)||void 0===D?void 0:D.paste))for(const k of x){const D=k.attr("src");wt(D)&&!k.attr("data-mce-object")&&D!==On.transparentSrc&&(m(D)||!WA(f)&&v(D))&&k.remove()}var D})})(s)})(s,f,d)})})(s);const v=(x=>{const C=x;return(T=x,cr(T.plugins,"rtc").bind(k=>j.from(k.setup))).fold(()=>(C.rtcInstance=dC(x),j.none()),T=>(C.rtcInstance=(()=>{const k=Ve(null),D=Ve("");return{init:{bindEvents:Qt},undoManager:{beforeChange:Qt,add:k,undo:k,redo:k,clear:Qt,reset:Qt,hasUndo:Mn,hasRedo:Mn,transact:k,ignore:Qt,extra:Qt},formatter:{match:Mn,matchAll:Ve([]),matchNode:Ve(void 0),canApply:Mn,closest:D,apply:Qt,remove:Qt,toggle:Qt,formatChanged:Ve({unbind:Qt})},editor:{getContent:D,setContent:Ve({content:"",html:""}),insertContent:Ve(""),addVisual:Qt},selection:{getContent:D},autocompleter:{addDecoration:Qt,removeDecoration:Qt},raw:{getModel:Ve(j.none())}}})(),j.some(()=>T().then(k=>(C.rtcInstance=(D=>{const E=K=>Ot(K)?K:{},{init:P,undoManager:F,formatter:z,editor:H,selection:V,autocompleter:U,raw:$}=D;return{init:{bindEvents:P.bindEvents},undoManager:{beforeChange:F.beforeChange,add:F.add,undo:F.undo,redo:F.redo,clear:F.clear,reset:F.reset,hasUndo:F.hasUndo,hasRedo:F.hasRedo,transact:(K,te,re)=>F.transact(re),ignore:(K,te)=>F.ignore(te),extra:(K,te,re,ue)=>F.extra(re,ue)},formatter:{match:(K,te,re,ue)=>z.match(K,E(te),ue),matchAll:z.matchAll,matchNode:z.matchNode,canApply:K=>z.canApply(K),closest:K=>z.closest(K),apply:(K,te,re)=>z.apply(K,E(te)),remove:(K,te,re,ue)=>z.remove(K,E(te)),toggle:(K,te,re)=>z.toggle(K,E(te)),formatChanged:(K,te,re,ue,he)=>z.formatChanged(te,re,ue,he)},editor:{getContent:K=>H.getContent(K),setContent:(K,te)=>({content:H.setContent(K,te),html:""}),insertContent:(K,te)=>(H.insertContent(K),""),addVisual:H.addVisual},selection:{getContent:(K,te)=>V.getContent(te)},autocompleter:{addDecoration:U.addDecoration,removeDecoration:U.removeDecoration},raw:{getModel:()=>j.some($.getRawModel())}}})(k),k.rtc.isRemote)))));var T})(s);(x=>{const C=x.getDoc(),T=x.getBody();x.dispatch("PreInit"),ff(x)||(C.body.spellcheck=!1,bT.setAttrib(T,"spellcheck","false")),x.quirks=(s=>{const u=Ke.each,d=Mt.BACKSPACE,f=Mt.DELETE,m=s.dom,v=s.selection,x=s.parser,C=On.browser,T=C.isFirefox(),k=C.isChromium()||C.isSafari(),D=On.deviceType.isiPhone()||On.deviceType.isiPad(),E=On.os.isMacOS()||On.os.isiOS(),P=(ce,fe)=>{try{s.getDoc().execCommand(ce,!1,String(fe))}catch{}},F=ce=>ce.isDefaultPrevented(),z=()=>{s.shortcuts.add("meta+a",null,"SelectAll")},H=()=>{s.inline||m.bind(s.getDoc(),"mousedown mouseup",ce=>{let fe;if(ce.target===s.getDoc().documentElement)if(fe=v.getRng(),s.getBody().focus(),"mousedown"===ce.type){if(Uo(fe.startContainer))return;v.placeCaretAt(ce.clientX,ce.clientY)}else v.setRng(fe)})},V=()=>{Range.prototype.getClientRects||s.on("mousedown",ce=>{if(!F(ce)&&"HTML"===ce.target.nodeName){const fe=s.getBody();fe.blur(),Ha.setEditorTimeout(s,()=>{fe.focus()})}})},U=()=>{const ce=VA(s);s.on("click",fe=>{const we=fe.target;/^(IMG|HR)$/.test(we.nodeName)&&m.isEditable(we)&&(fe.preventDefault(),s.selection.select(we),s.nodeChanged()),"A"===we.nodeName&&m.hasClass(we,ce)&&0===we.childNodes.length&&m.isEditable(we.parentNode)&&(fe.preventDefault(),v.select(we))})},$=()=>{s.on("keydown",ce=>{if(!F(ce)&&ce.keyCode===d&&v.isCollapsed()&&0===v.getRng().startOffset){const fe=v.getNode().previousSibling;if(fe&&fe.nodeName&&"table"===fe.nodeName.toLowerCase())return ce.preventDefault(),!1}return!0})},K=()=>{Ti(s)||s.on("BeforeExecCommand mousedown",()=>{P("StyleWithCSS",!1),P("enableInlineTableEditing",!1),Z_(s)||P("enableObjectResizing",!1)})},te=()=>{s.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},re=()=>{s.inline||s.on("keydown",()=>{document.activeElement===document.body&&s.getWin().focus()})},ue=()=>{s.inline||(s.contentStyles.push("body {min-height: 150px}"),s.on("click",ce=>{let fe;"HTML"===ce.target.nodeName&&(fe=s.selection.getRng(),s.getBody().focus(),s.selection.setRng(fe),s.selection.normalize(),s.nodeChanged())}))},he=()=>{E&&s.on("keydown",ce=>{!Mt.metaKeyPressed(ce)||ce.shiftKey||37!==ce.keyCode&&39!==ce.keyCode||(ce.preventDefault(),s.selection.getSel().modify("move",37===ce.keyCode?"backward":"forward","lineboundary"))})},de=()=>{s.on("click",ce=>{let fe=ce.target;do{if("A"===fe.tagName)return void ce.preventDefault()}while(fe=fe.parentNode)}),s.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},_e=()=>{s.on("init",()=>{s.dom.bind(s.getBody(),"submit",ce=>{ce.preventDefault()})})},Ne=Qt;return Bo(s)?(k&&(H(),U(),_e(),z(),D&&(re(),ue(),de())),T&&(V(),K(),te(),he())):(s.on("keydown",ce=>{if(F(ce)||ce.keyCode!==Mt.BACKSPACE)return;let fe=v.getRng();const we=fe.startContainer,ze=fe.startOffset,Qe=m.getRoot();let Xe=we;if(fe.collapsed&&0===ze){for(;Xe.parentNode&&Xe.parentNode.firstChild===Xe&&Xe.parentNode!==Qe;)Xe=Xe.parentNode;"BLOCKQUOTE"===Xe.nodeName&&(s.formatter.toggle("blockquote",void 0,Xe),fe=m.createRng(),fe.setStart(we,0),fe.setEnd(we,0),v.setRng(fe))}}),(()=>{const ce=fe=>{const we=m.create("body"),ze=fe.cloneContents();return we.appendChild(ze),v.serializer.serialize(we,{format:"html"})};s.on("keydown",fe=>{const we=fe.keyCode;if(!F(fe)&&(we===f||we===d)&&s.selection.isEditable()){const ze=s.selection.isCollapsed(),Qe=s.getBody();if(ze&&!Ps(s.schema,Qe)||!ze&&!(Xe=>{const Dt=ce(Xe),zt=m.createRng();return zt.selectNode(s.getBody()),Dt===ce(zt)})(s.selection.getRng()))return;fe.preventDefault(),s.setContent(""),Qe.firstChild&&m.isBlock(Qe.firstChild)?s.selection.setCursorLocation(Qe.firstChild,0):s.selection.setCursorLocation(Qe,0),s.nodeChanged()}})})(),On.windowsPhone||s.on("keyup focusin mouseup",ce=>{Mt.modifierPressed(ce)||(fe=>{const we=fe.getBody(),ze=fe.selection.getRng();return ze.startContainer===ze.endContainer&&ze.startContainer===we&&0===ze.startOffset&&ze.endOffset===we.childNodes.length})(s)||v.normalize()},!0),k&&(H(),U(),s.on("init",()=>{P("DefaultParagraphSeparator",di(s))}),_e(),$(),x.addNodeFilter("br",ce=>{let fe=ce.length;for(;fe--;)"Apple-interchange-newline"===ce[fe].attr("class")&&ce[fe].remove()}),D?(re(),ue(),de()):z()),T&&(s.on("keydown",ce=>{if(!F(ce)&&ce.keyCode===d){if(!s.getBody().getElementsByTagName("hr").length)return;if(v.isCollapsed()&&0===v.getRng().startOffset){const fe=v.getNode(),we=fe.previousSibling;if("HR"===fe.nodeName)return m.remove(fe),void ce.preventDefault();we&&we.nodeName&&"hr"===we.nodeName.toLowerCase()&&(m.remove(we),ce.preventDefault())}}}),V(),(()=>{const ce=()=>{const we=m.getAttribs(v.getStart().cloneNode(!1));return()=>{const ze=v.getStart();ze!==s.getBody()&&(m.setAttrib(ze,"style",null),u(we,Qe=>{ze.setAttributeNode(Qe.cloneNode(!0))}))}},fe=()=>!v.isCollapsed()&&m.getParent(v.getStart(),m.isBlock)!==m.getParent(v.getEnd(),m.isBlock);s.on("keypress",we=>{let ze;return!(!(F(we)||8!==we.keyCode&&46!==we.keyCode)&&fe()&&(ze=ce(),s.getDoc().execCommand("delete",!1),ze(),we.preventDefault(),1))}),m.bind(s.getDoc(),"cut",we=>{if(!F(we)&&fe()){const ze=ce();Ha.setEditorTimeout(s,()=>{ze()})}})})(),K(),s.on("SetContent ExecCommand",ce=>{"setcontent"!==ce.type&&"mceInsertLink"!==ce.command||u(m.select("a:not([data-mce-block])"),fe=>{var we;let ze=fe.parentNode;const Qe=m.getRoot();if(ze?.lastChild===fe){for(;ze&&!m.isBlock(ze);){if((null===(we=ze.parentNode)||void 0===we?void 0:we.lastChild)!==ze||ze===Qe)return;ze=ze.parentNode}m.add(ze,"br",{"data-mce-bogus":1})}})}),te(),he(),$())),{refreshContentEditable:Ne,isHidden:()=>{if(!T||s.removed)return!1;const ce=s.selection.getSel();return!ce||!ce.rangeCount||0===ce.rangeCount}}})(x),x.dispatch("PostRender");const k=vE(x);void 0!==k&&(T.dir=k);const D=kE(x);D&&x.on("BeforeSetContent",E=>{Ke.each(D,P=>{E.content=E.content.replace(P,F=>"\x3c!--mce:protected "+escape(F)+"--\x3e")})}),x.on("SetContent",()=>{x.addVisual(x.getBody())}),x.on("compositionstart compositionend",E=>{x.composing="compositionstart"===E.type})})(s),(x=>{const C=Ys(x);var k,T;wt(v0(x))||!ct(C)&&"INVALID"!=("gpl"===(T=C).toLowerCase()||(k=T).length>=64&&k.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(s),v.fold(()=>{const x=(C=>{let T=!1;const k=setTimeout(()=>{T||C.setProgressState(!0)},500);return()=>{clearTimeout(k),T=!0,C.setProgressState(!1)}})(s);hN(s).then(()=>{Tx(s),x()})},x=>{s.setProgressState(!0),hN(s).then(()=>{x().then(C=>{s.setProgressState(!1),Tx(s),yd(s)},C=>{s.notificationManager.open({type:"error",text:String(C)}),Tx(s),yd(s)})})})},XL=Z,Ax=Cr.DOM,fN=Cr.DOM,kx=(s,u)=>({editorContainer:s,iframeContainer:u,api:{}}),xT=s=>{const u=s.getElement();return s.inline?kx(null):(d=>{const f=fN.create("div");return fN.insertAfter(f,d),kx(f,f)})(u)},gN=async s=>{s.dispatch("ScriptsLoaded"),(d=>{const f=Ke.trim(j_(d)),m=d.ui.registry.getAll().icons,v={...wy.get("default").icons,...wy.get(f).icons};sr(v,(x,C)=>{Zt(m,C)||d.ui.registry.addIcon(C,x)})})(s),(d=>{const f=da(d);if(wt(f)){const m=gu.get(f);d.theme=m(d,gu.urls[f])||{},tn(d.theme.init)&&d.theme.init(d,gu.urls[f]||d.documentBaseUrl.replace(/\/$/,""))}else d.theme={}})(s),(d=>{const f=gh(d),m=Jh.get(f);d.model=m(d,Jh.urls[f])})(s),(d=>{const f=[];Se(mm(d),m=>{((v,x,C)=>{const T=og.get(C),k=og.urls[C]||v.documentBaseUrl.replace(/\/$/,"");if(C=Ke.trim(C),T&&-1===Ke.inArray(x,C)){if(v.plugins[C])return;try{const D=T(v,k)||{};v.plugins[C]=D,tn(D.init)&&(D.init(v,k),x.push(C))}catch(D){((E,P,F)=>{const z=cl.translate(["Failed to initialize plugin: {0}",P]);G0(E,"PluginLoadError",{message:z}),Cy(z,F),ig(E,z)})(v,C,D)}}})(d,f,m.replace(/^\-/,""))})})(s);const u=await(d=>{const f=d.getElement();return d.orgDisplay=f.style.display,wt(da(d))?(m=>{const v=m.theme.renderUI;return v?v():xT(m)})(d):tn(da(d))?(m=>{const v=m.getElement(),x=da(m)(m,v);return x.editorContainer.nodeType&&(x.editorContainer.id=x.editorContainer.id||m.id+"_parent"),x.iframeContainer&&x.iframeContainer.nodeType&&(x.iframeContainer.id=x.iframeContainer.id||m.id+"_iframecontainer"),x.height=x.iframeHeight?x.iframeHeight:v.offsetHeight,x})(d):xT(d)})(s);var d,f;((d,f)=>{const m={show:j.from(f.show).getOr(Qt),hide:j.from(f.hide).getOr(Qt),isEnabled:j.from(f.isEnabled).getOr(Z),setEnabled:v=>{d.mode.isReadOnly()||j.from(f.setEnabled).each(x=>x(v))}};d.ui={...d.ui,...m}})(s,j.from(u.api).getOr({})),s.editorContainer=u.editorContainer,(d=s).contentCSS=d.contentCSS.concat(BI(f=d,NA(f)),(f=>BI(f,LA(f)))(d)),s.inline?pN(s):((d,f)=>{((m,v)=>{const x=On.browser.isFirefox()?FA(m):"Rich Text Area",C=m.translate(x),T=Ia(ge(m.getElement()),"tabindex").bind(Yr),k=((D,E,P,F)=>{const z=er("iframe");return F.each(H=>uo(z,"tabindex",H)),ka(z,P),ka(z,{id:D+"_ifr",frameBorder:"0",allowTransparency:"true",title:E}),Ls(z,"tox-edit-area__iframe"),z})(m.id,C,MA(m),T).dom;k.onload=()=>{k.onload=null,m.dispatch("load")},m.contentAreaContainer=v.iframeContainer,m.iframeElement=k,m.iframeHTML=(D=>{let E=TA(D)+"<html><head>";F_(D)!==D.documentBaseUrl&&(E+='<base href="'+D.documentBaseURI.getURI()+'" />'),E+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const P=G_(D),F=H_(D),z=D.translate(FA(D));return u0(D)&&(E+='<meta http-equiv="Content-Security-Policy" content="'+u0(D)+'" />'),E+=`</head><body id="${P}" class="mce-content-body ${F}" data-id="${D.id}" aria-label="${z}"><br></body></html>`,E})(m),Ax.add(v.iframeContainer,k)})(d,f),f.editorContainer&&(f.editorContainer.style.display=d.orgDisplay,d.hidden=Ax.isHidden(f.editorContainer)),d.getElement().style.display="none",Ax.setAttrib(d.id,"aria-hidden","true"),d.getElement().style.visibility=d.orgVisibility,(m=>{const v=m.iframeElement,x=()=>{m.contentDocument=v.contentDocument,pN(m)};if(vm(m)||On.browser.isFirefox()){const T=m.getDoc();T.open(),T.write(m.iframeHTML),T.close(),x()}else{const T=((s,u,d,f)=>((m,v,x,C,T)=>{const k=(D=x,E=C,P=>{D(P)&&E((F=>{const z=ge(Bu(F).getOr(F.target)),H=()=>F.stopPropagation(),V=()=>F.preventDefault(),U=Lr(V,H);return{target:z,x:F.clientX,y:F.clientY,stop:H,prevent:V,kill:U,raw:F}})(P))});var D,E;return m.dom.addEventListener(v,k,!1),{unbind:Pe(Nt,m,v,k,!1)}})(s,"load",d,()=>{T.unbind(),x()}))(ge(v),0,XL);v.srcdoc=m.iframeHTML}})(d)})(s,{editorContainer:u.editorContainer,iframeContainer:u.iframeContainer})},zd=Cr.DOM,_T=s=>"-"===s.charAt(0),Ix=(s,u,d)=>j.from(u).filter(f=>Vr(f)&&!wy.has(f)).map(f=>({url:`${s.editorManager.baseURL}/icons/${f}/icons${d}.js`,name:j.some(f)})),Dx=Eo().deviceType,ST=Dx.isPhone(),CT=Dx.isTablet(),Ml=s=>{if(rr(s))return[];{const u=yn(s)?s:s.split(/[ ,]/),d=Ee(u,kn);return dt(d,Vr)}},Nx=(s,u)=>Zt(s.sections(),u),yN=(s,u)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:cr(s,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...u?{menubar:!1}:{}}),MT=(s,u)=>{var d;const f=null!==(d=u.external_plugins)&&void 0!==d?d:{};return s&&s.external_plugins?Ke.extend({},s.external_plugins,f):f},vN=(s,u)=>{const d=s.selection,f=s.dom;return/^ | $/.test(u)?((m,v,x,C)=>{const T=ge(m.getRoot());return x=Um(T,Oe.fromRangeStart(v),C)?x.replace(/^ /,"&nbsp;"):x.replace(/^&nbsp;/," "),Wf(T,Oe.fromRangeEnd(v),C)?x.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):x.replace(/&nbsp;(<br( \/)?>)?$/," ")})(f,d.getRng(),u,s.schema):u},Eg=(s,u)=>{if(s.selection.isEditable()){const{content:d,details:f}=(m=>{if("string"!=typeof m){const v=Ke.extend({paste:m.paste,data:{paste:m.paste}},m);return{content:m.content,details:v}}return{content:m,details:{}}})(u);Y1(s,{...f,content:vN(s,d),format:"html",set:!1,selection:!0}).each(m=>{const v=(C=m.content,T=f,eb(s).editor.insertContent(C,T));var C,T;vc(s,v,m),s.addVisual()})}},bN={"font-size":"size","font-family":"face"},qL=Lu("font"),AT=s=>(u,d)=>j.from(d).map(ge).filter(Ko).bind(f=>{return(m=s,v=u,x=f.dom,Jm(ge(x),C=>{return as(T=C,m).orThunk(()=>qL(T)?cr(bN,m).bind(k=>Ia(T,k)):j.none());var T},C=>_n(ge(v),C))).or(((m,v)=>j.from(Cr.DOM.getStyle(v,m,!0)))(s,f.dom));var m,v,x}).getOr(""),kT=AT("font-size"),IT=Lr(s=>s.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),AT("font-family")),DT=s=>Io(s.getBody()).bind(u=>{const d=u.container();return j.from(Je(d)?d.parentNode:d)}),Ex=(s,u)=>{return d=s,f=jt(j.some,u),(m=d,j.from(m.selection.getRng()).bind(v=>{const x=m.getBody();return v.startContainer===x&&0===v.startOffset?j.none():j.from(m.selection.getStart(!0))})).orThunk(Pe(DT,d)).map(ge).filter(Ko).bind(f);var d,f,m},NT=(s,u)=>{if(/^[0-9.]+$/.test(u)){const d=parseInt(u,10);if(d>=1&&d<=7){const f=Ke.explode(s.options.get("font_size_style_values")),m=Ke.explode(s.options.get("font_size_classes"));return m.length>0?m[d-1]||u:f[d-1]||u}return u}return u},ZL=s=>{const u=s.split(/\s*,\s*/);return Ee(u,d=>-1===d.indexOf(" ")||xt(d,'"')||xt(d,"'")?d:`'${d}'`).join(",")},ET=(s,u)=>{const d=s.dom,f=s.selection.getRng(),m=u?s.selection.getStart():s.selection.getEnd(),v=u?f.startContainer:f.endContainer,x=up(d,v);if(!x||!x.isContentEditable)return;const C=u?Ho:ss,T=di(s);((k,D,E,P)=>{const F=k.dom,z=V=>F.isBlock(V)&&V.parentElement===E,H=z(D)?D:F.getParent(P,z,E);return j.from(H).map(ge)})(s,m,x,v).each(k=>{const D=g2(s,v,k.dom,x,!1,T);C(k,ge(D)),s.selection.setCursorLocation(D,0),s.dispatch("NewBlock",{newBlock:D}),Wy(s,"insertParagraph")})},xN=["toggleview"],LT=s=>Fe(xN,s.toLowerCase());class RT{constructor(u){this.commands={state:{},exec:{},value:{}},this.editor=u}execCommand(u,d=!1,f,m){const v=this.editor,x=u.toLowerCase(),C=m?.skip_focus;if(v.removed||("mcefocus"!==x&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(x)||C?q0(k=v).each(D=>k.selection.setRng(D)):v.focus()),v.dispatch("BeforeExecCommand",{command:u,ui:d,value:f}).isDefaultPrevented()))return!1;var k;const T=this.commands.exec[x];return!!tn(T)&&(T(x,d,f),v.dispatch("ExecCommand",{command:u,ui:d,value:f}),!0)}queryCommandState(u){if(!LT(u)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const d=u.toLowerCase(),f=this.commands.state[d];return!!tn(f)&&f(d)}queryCommandValue(u){if(!LT(u)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const d=u.toLowerCase(),f=this.commands.value[d];return tn(f)?f(d):""}addCommands(u,d="exec"){const f=this.commands;sr(u,(m,v)=>{Se(v.toLowerCase().split(","),x=>{f[d][x]=m})})}addCommand(u,d,f){const m=u.toLowerCase();this.commands.exec[m]=(v,x,C)=>d.call(f??this.editor,x,C)}queryCommandSupported(u){const d=u.toLowerCase();return!!this.commands.exec[d]}addQueryStateHandler(u,d,f){this.commands.state[u.toLowerCase()]=()=>d.call(f??this.editor)}addQueryValueHandler(u,d,f){this.commands.value[u.toLowerCase()]=()=>d.call(f??this.editor)}}const Vd="data-mce-contenteditable",lv=(s,u,d)=>{try{s.getDoc().execCommand(u,!1,String(d))}catch{}},Rx=(s,u)=>{s.dom.contentEditable=u?"true":"false"},mp=s=>s.readonly,_N=s=>{s.parser.addAttributeFilter("contenteditable",u=>{mp(s)&&Se(u,d=>{d.attr(Vd,d.attr("contenteditable")),d.attr("contenteditable","false")})}),s.serializer.addAttributeFilter(Vd,u=>{mp(s)&&Se(u,d=>{d.attr("contenteditable",d.attr(Vd))})}),s.serializer.addTempAttr(Vd)},$L=["copy"],wN=Ke.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class OT{static isNative(u){return!!wN[u.toLowerCase()]}constructor(u){this.bindings={},this.settings=u||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Mn}fire(u,d){return this.dispatch(u,d)}dispatch(u,d){const f=u.toLowerCase(),m=Vs(f,d??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(m);const v=this.bindings[f];if(v)for(let x=0,C=v.length;x<C;x++){const T=v[x];if(!T.removed){if(T.once&&this.off(f,T.func),m.isImmediatePropagationStopped())return m;if(!1===T.func.call(this.scope,m))return m.preventDefault(),m}}return m}on(u,d,f,m){if(!1===d&&(d=Mn),d){const v={func:d,removed:!1};m&&Ke.extend(v,m);const x=u.toLowerCase().split(" ");let C=x.length;for(;C--;){const T=x[C];let k=this.bindings[T];k||(k=[],this.toggleEvent(T,!0)),k=f?[v,...k]:[...k,v],this.bindings[T]=k}}return this}off(u,d){if(u){const f=u.toLowerCase().split(" ");let m=f.length;for(;m--;){const v=f[m];let x=this.bindings[v];if(!v)return sr(this.bindings,(C,T)=>{this.toggleEvent(T,!1),delete this.bindings[T]}),this;if(x){if(d){const C=no(x,T=>T.func===d);x=C.fail,this.bindings[v]=x,Se(C.pass,T=>{T.removed=!0})}else x.length=0;x.length||(this.toggleEvent(u,!1),delete this.bindings[v])}}}else sr(this.bindings,(f,m)=>{this.toggleEvent(m,!1)}),this.bindings={};return this}once(u,d,f){return this.on(u,d,f,{once:!0})}has(u){u=u.toLowerCase();const d=this.bindings[u];return!(!d||0===d.length)}}const uv=s=>(s._eventDispatcher||(s._eventDispatcher=new OT({scope:s,toggleEvent:(u,d)=>{OT.isNative(u)&&s.toggleNativeEvent&&s.toggleNativeEvent(u,d)}})),s._eventDispatcher),PT={fire(s,u,d){return this.dispatch(s,u,d)},dispatch(s,u,d){const f=this;if(f.removed&&"remove"!==s&&"detach"!==s)return Vs(s.toLowerCase(),u??{},f);const m=uv(f).dispatch(s,u);if(!1!==d&&f.parent){let v=f.parent();for(;v&&!m.isPropagationStopped();)v.dispatch(s,m,!1),v=v.parent?v.parent():void 0}return m},on(s,u,d){return uv(this).on(s,u,d)},off(s,u){return uv(this).off(s,u)},once(s,u){return uv(this).once(s,u)},hasEventListeners(s){return uv(this).has(s)}},cv=Cr.DOM;let yp;const Ox=(s,u)=>{if("selectionchange"===u)return s.getDoc();if(!s.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(u))return s.getDoc().documentElement;const d=c0(s);return d?(s.eventRoot||(s.eventRoot=cv.select(d)[0]),s.eventRoot):s.getBody()},BT=(s,u,d)=>{var f;(f=s).hidden||mp(f)?mp(s)&&((f,m)=>{if("click"!==m.type||Mt.metaKeyPressed(m))Fe($L,m.type)&&f.dispatch(m.type,m);else{const v=ge(m.target);(x=f,C=v,is(C,"a",T=>_n(T,ge(x.getBody()))).bind(T=>Ia(T,"href"))).each(x=>{if(m.preventDefault(),/^#/.test(x)){const C=f.dom.select(`${x},[name="${ft(x,"#")}"]`);C.length&&f.selection.scrollIntoView(C[0],!0)}else window.open(x,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var x,C})(s,d):s.dispatch(u,d)},Px=(s,u)=>{if(s.delegates||(s.delegates={}),s.delegates[u]||s.removed)return;const d=Ox(s,u);if(c0(s)){if(yp||(yp={},s.editorManager.on("removeEditor",()=>{s.editorManager.activeEditor||yp&&(sr(yp,(m,v)=>{s.dom.unbind(Ox(s,v))}),yp=null)})),yp[u])return;const f=m=>{const v=m.target,x=s.editorManager.get();let C=x.length;for(;C--;){const T=x[C].getBody();(T===v||cv.isChildOf(v,T))&&BT(x[C],u,m)}};yp[u]=f,cv.bind(d,u,f)}else{const f=m=>{BT(s,u,m)};cv.bind(d,u,f),s.delegates[u]=f}},SN={...PT,bindPendingEventDelegates(){const s=this;Ke.each(s._pendingNativeEvents,u=>{Px(s,u)})},toggleNativeEvent(s,u){const d=this;"focus"!==s&&"blur"!==s&&(d.removed||(u?d.initialized?Px(d,s):d._pendingNativeEvents?d._pendingNativeEvents.push(s):d._pendingNativeEvents=[s]:d.initialized&&d.delegates&&(d.dom.unbind(Ox(d,s),s,d.delegates[s]),delete d.delegates[s])))},unbindAllNativeEvents(){const s=this,u=s.getBody(),d=s.dom;s.delegates&&(sr(s.delegates,(f,m)=>{s.dom.unbind(Ox(s,m),m,f)}),delete s.delegates),!s.inline&&u&&d&&(u.onload=null,d.unbind(s.getWin()),d.unbind(s.getDoc())),d&&(d.unbind(u),d.unbind(s.getContainer()))}},KL=s=>wt(s)?{value:s.split(/[ ,]/),valid:!0}:qo(s,wt)?{value:s,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},CN=(s,u)=>s+(Qr(u.message)?"":`. ${u.message}`),MN=s=>s.valid,zT=(s,u,d="")=>{const f=u(s);return Ar(f)?f?{value:s,valid:!0}:{valid:!1,message:d}:f},Fd=["design","readonly"],dv=(s,u,d,f)=>{const m=d[u.get()],v=d[f];try{v.activate()}catch(x){return void console.error(`problem while activating editor mode ${f}:`,x)}var x;m.deactivate(),m.editorReadOnly!==v.editorReadOnly&&((x,C)=>{const T=ge(x.getBody());var k,D,E;E=C,Pl(k=T,D="mce-content-readonly")&&!E?Fo(k,D):E&&Ls(k,D),C?(x.selection.controlSelection.hideResizeRect(),x._selectionOverrides.hideFakeCaret(),(k=>{j.from(k.selection.getNode()).each(D=>{D.removeAttribute("data-mce-selected")})})(x),x.readonly=!0,Rx(T,!1),Se(zn(T,'*[contenteditable="true"]'),k=>{uo(k,Vd,"true"),Rx(k,!1)})):(x.readonly=!1,x.hasEditableRoot()&&Rx(T,!0),Se(zn(T,`*[${Vd}="true"]`),k=>{go(k,Vd),Rx(k,!0)}),lv(x,"StyleWithCSS",!1),lv(x,"enableInlineTableEditing",!1),lv(x,"enableObjectResizing",!1),$0(x)&&x.focus(),(k=>{k.selection.setRng(k.selection.getRng())})(x),x.nodeChanged())})(s,v.editorReadOnly),u.set(f),(x=s).dispatch("SwitchMode",{mode:f})},wu=Ke.each,VT=Ke.explode,JL={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},FT=Ke.makeMap("alt,ctrl,shift,meta,access"),TN=s=>{const u={},d=On.os.isMacOS()||On.os.isiOS();wu(VT(s.toLowerCase(),"+"),v=>{v in FT?u[v]=!0:/^[0-9]{2,}$/.test(v)?u.keyCode=parseInt(v,10):(u.charCode=v.charCodeAt(0),u.keyCode=JL[v]||v.toUpperCase().charCodeAt(0))});const f=[u.keyCode];let m;for(m in FT)u[m]?f.push(m):u[m]=!1;return u.id=f.join(","),u.access&&(u.alt=!0,d?u.ctrl=!0:u.shift=!0),u.meta&&(d?u.meta=!0:(u.ctrl=!0,u.meta=!1)),u};class AN{constructor(u){this.shortcuts={},this.pendingPatterns=[],this.editor=u;const d=this;u.on("keyup keypress keydown",f=>{!d.hasModifier(f)&&!d.isFunctionKey(f)||f.isDefaultPrevented()||(wu(d.shortcuts,m=>{d.matchShortcut(f,m)&&(d.pendingPatterns=m.subpatterns.slice(0),"keydown"===f.type&&d.executeShortcutAction(m))}),d.matchShortcut(f,d.pendingPatterns[0])&&(1===d.pendingPatterns.length&&"keydown"===f.type&&d.executeShortcutAction(d.pendingPatterns[0]),d.pendingPatterns.shift()))})}add(u,d,f,m){const v=this,x=v.normalizeCommandFunc(f);return wu(VT(Ke.trim(u)),C=>{const T=v.createShortcut(C,d,x,m);v.shortcuts[T.id]=T}),!0}remove(u){const d=this.createShortcut(u);return!!this.shortcuts[d.id]&&(delete this.shortcuts[d.id],!0)}normalizeCommandFunc(u){const d=this,f=u;return"string"==typeof f?()=>{d.editor.execCommand(f,!1,null)}:Ke.isArray(f)?()=>{d.editor.execCommand(f[0],f[1],f[2])}:f}createShortcut(u,d,f,m){const v=Ke.map(VT(u,">"),TN);return v[v.length-1]=Ke.extend(v[v.length-1],{func:f,scope:m||this.editor}),Ke.extend(v[0],{desc:this.editor.translate(d),subpatterns:v.slice(1)})}hasModifier(u){return u.altKey||u.ctrlKey||u.metaKey}isFunctionKey(u){return"keydown"===u.type&&u.keyCode>=112&&u.keyCode<=123}matchShortcut(u,d){return!!d&&d.ctrl===u.ctrlKey&&d.meta===u.metaKey&&d.alt===u.altKey&&d.shift===u.shiftKey&&!!(u.keyCode===d.keyCode||u.charCode&&u.charCode===d.charCode)&&(u.preventDefault(),!0)}executeShortcutAction(u){return u.func?u.func.call(u.scope):null}}const QL=()=>{const s=(()=>{const u={},d={},f={},m={},v={},x={},C={},T={},k=(D,E)=>(P,F)=>{D[P.toLowerCase()]={...F,type:E}};return{addButton:k(u,"button"),addGroupToolbarButton:k(u,"grouptoolbarbutton"),addToggleButton:k(u,"togglebutton"),addMenuButton:k(u,"menubutton"),addSplitButton:k(u,"splitbutton"),addMenuItem:k(d,"menuitem"),addNestedMenuItem:k(d,"nestedmenuitem"),addToggleMenuItem:k(d,"togglemenuitem"),addAutocompleter:k(f,"autocompleter"),addContextMenu:k(v,"contextmenu"),addContextToolbar:k(x,"contexttoolbar"),addContextForm:k(x,"contextform"),addSidebar:k(C,"sidebar"),addView:k(T,"views"),addIcon:(D,E)=>m[D.toLowerCase()]=E,getAll:()=>({buttons:u,menuItems:d,icons:m,popups:f,contextMenus:v,contextToolbars:x,sidebars:C,views:T})}})();return{addAutocompleter:s.addAutocompleter,addButton:s.addButton,addContextForm:s.addContextForm,addContextMenu:s.addContextMenu,addContextToolbar:s.addContextToolbar,addIcon:s.addIcon,addMenuButton:s.addMenuButton,addMenuItem:s.addMenuItem,addNestedMenuItem:s.addNestedMenuItem,addSidebar:s.addSidebar,addSplitButton:s.addSplitButton,addToggleButton:s.addToggleButton,addGroupToolbarButton:s.addGroupToolbarButton,addToggleMenuItem:s.addToggleMenuItem,addView:s.addView,getAll:s.getAll}},vp=Cr.DOM,GT=Ke.extend,kN=Ke.each;class Bx{constructor(u,d,f){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=f,this.documentBaseUrl=f.documentBaseURL,GT(this,SN);const m=this;this.id=u,this.hidden=!1;const v=((F,z)=>{const H=zb(z);return((s,u,d,f,m)=>{var v;const x=s?{mobile:yN(null!==(v=m.mobile)&&void 0!==v?v:{},u)}:{},C=((s,u)=>{const d=((v,x)=>{const C={},T={};return Iu(v,(k,D)=>Fe(s,D),Ca(C),Ca(T)),{t:C,f:T}})(u);return m=d.f,{sections:Ve(d.t),options:Ve(m)};var m})(["mobile"],Bb(x,m)),T=Ke.extend(d,f,C.options(),s&&Nx(C,"mobile")?((k,D,E={})=>{const P=k.sections(),F=cr(P,D).getOr({});return Ke.extend({},E,F)})(C,"mobile"):{},{external_plugins:MT(f,C.options())});return((k,D,E,P)=>{const F=Ml(E.forced_plugins),z=Ml(P.plugins),H=Nx($=D,"mobile")?$.sections().mobile:{},V=(($,K,te,re)=>$&&Nx(K,"mobile")?re:te)(k,D,z,H.plugins?Ml(H.plugins):z),U=(($,K)=>[...Ml($),...Ml(K)])(F,V);var $;return Ke.extend(P,{forced_plugins:F,plugins:U})})(s,C,f,T)})(ST||CT,ST,H,F,H)})(f.defaultOptions,d);this.options=((F,z,H=z)=>{const V={},U={},$=(te,re,ue)=>{const he=zT(re,ue);return MN(he)?(U[te]=he.value,!0):(console.warn(CN(`Invalid value passed for the ${te} option`,he)),!1)},K=te=>Zt(V,te);return{register:(te,re)=>{const ue=wt(re.processor)?(de=>{const _e=(()=>{switch(de){case"array":return yn;case"boolean":return Ar;case"function":return tn;case"number":return kr;case"object":return Ot;case"string":return wt;case"string[]":return KL;case"object[]":return Ne=>qo(Ne,Ot);case"regexp":return Ne=>Fn(Ne,RegExp);default:return Z}})();return Ne=>zT(Ne,_e,`The value must be a ${de}.`)})(re.processor):re.processor,he=((de,_e,Ne)=>{if(!ct(_e)){const ce=zT(_e,Ne);if(MN(ce))return ce.value;console.error(CN(`Invalid default value passed for the "${de}" option`,ce))}})(te,re.default,ue);V[te]={...re,default:he,processor:ue},cr(U,te).orThunk(()=>cr(z,te)).each(de=>$(te,de,ue))},isRegistered:K,get:te=>cr(U,te).orThunk(()=>cr(V,te).map(re=>re.default)).getOrUndefined(),set:(te,re)=>{if(K(te)){const ue=V[te];return ue.immutable?(console.error(`"${te}" is an immutable option and cannot be updated`),!1):$(te,re,ue.processor)}return console.warn(`"${te}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:te=>{const re=K(te);return re&&delete U[te],re},isSet:te=>Zt(U,te),debug:()=>{try{console.log(JSON.parse(JSON.stringify(H,(te,re)=>Ar(re)||kr(re)||wt(re)||Hn(re)||yn(re)||Jn(re)?re:Object.prototype.toString.call(re))))}catch(te){console.error(te)}}}})(0,v,d),(F=>{const z=F.options.register;z("id",{processor:"string",default:F.id}),z("selector",{processor:"string"}),z("target",{processor:"object"}),z("suffix",{processor:"string"}),z("cache_suffix",{processor:"string"}),z("base_url",{processor:"string"}),z("referrer_policy",{processor:"string",default:""}),z("language_load",{processor:"boolean",default:!0}),z("inline",{processor:"boolean",default:!1}),z("iframe_attrs",{processor:"object",default:{}}),z("doctype",{processor:"string",default:"<!DOCTYPE html>"}),z("document_base_url",{processor:"string",default:F.documentBaseUrl}),z("body_id",{processor:V_(F,"tinymce"),default:"tinymce"}),z("body_class",{processor:V_(F),default:""}),z("content_security_policy",{processor:"string",default:""}),z("br_in_pre",{processor:"boolean",default:!0}),z("forced_root_block",{processor:H=>{const V=wt(H)&&Vr(H);return V?{value:H,valid:V}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),z("forced_root_block_attrs",{processor:"object",default:{}}),z("newline_behavior",{processor:H=>{const V=Fe(["block","linebreak","invert","default"],H);return V?{value:H,valid:V}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),z("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),z("no_newline_selector",{processor:"string",default:""}),z("keep_styles",{processor:"boolean",default:!0}),z("end_container_on_empty_block",{processor:H=>Ar(H)||wt(H)?{valid:!0,value:H}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),z("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),z("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),z("font_size_classes",{processor:"string",default:""}),z("automatic_uploads",{processor:"boolean",default:!0}),z("images_reuse_filename",{processor:"boolean",default:!1}),z("images_replace_blob_uris",{processor:"boolean",default:!0}),z("icons",{processor:"string",default:""}),z("icons_url",{processor:"string",default:""}),z("images_upload_url",{processor:"string",default:""}),z("images_upload_base_path",{processor:"string",default:""}),z("images_upload_credentials",{processor:"boolean",default:!1}),z("images_upload_handler",{processor:"function"}),z("language",{processor:"string",default:"en"}),z("language_url",{processor:"string",default:""}),z("entity_encoding",{processor:"string",default:"named"}),z("indent",{processor:"boolean",default:!0}),z("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),z("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),z("indent_use_margin",{processor:"boolean",default:!1}),z("indentation",{processor:"string",default:"40px"}),z("content_css",{processor:H=>{const V=!1===H||wt(H)||qo(H,wt);return V?wt(H)?{value:Ee(H.split(","),kn),valid:V}:yn(H)?{value:H,valid:V}:!1===H?{value:[],valid:V}:{value:H,valid:V}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:vh(F)?[]:["default"]}),z("content_style",{processor:"string"}),z("content_css_cors",{processor:"boolean",default:!1}),z("font_css",{processor:H=>{const V=wt(H)||qo(H,wt);return V?{value:yn(H)?H:Ee(H.split(","),kn),valid:V}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),z("inline_boundaries",{processor:"boolean",default:!0}),z("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),z("object_resizing",{processor:H=>{const V=Ar(H)||wt(H);return V?!1===H||l0.isiPhone()||l0.isiPad()?{value:"",valid:V}:{value:!0===H?"table,img,figure.image,div,video,iframe":H,valid:V}:{valid:!1,message:"Must be boolean or a string"}},default:!CA}),z("resize_img_proportional",{processor:"boolean",default:!0}),z("event_root",{processor:"string"}),z("service_message",{processor:"string"}),z("theme",{processor:H=>!1===H||wt(H)||tn(H),default:"silver"}),z("theme_url",{processor:"string"}),z("formats",{processor:"object"}),z("format_empty_lines",{processor:"boolean",default:!1}),z("format_noneditable_selector",{processor:"string",default:""}),z("preview_styles",{processor:H=>{const V=!1===H||wt(H);return V?{value:!1===H?"":H,valid:V}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),z("custom_ui_selector",{processor:"string",default:""}),z("hidden_input",{processor:"boolean",default:!0}),z("submit_patch",{processor:"boolean",default:!0}),z("encoding",{processor:"string"}),z("add_form_submit_trigger",{processor:"boolean",default:!0}),z("add_unload_trigger",{processor:"boolean",default:!0}),z("custom_undo_redo_levels",{processor:"number",default:0}),z("disable_nodechange",{processor:"boolean",default:!1}),z("readonly",{processor:"boolean",default:!1}),z("editable_root",{processor:"boolean",default:!0}),z("plugins",{processor:"string[]",default:[]}),z("external_plugins",{processor:"object"}),z("forced_plugins",{processor:"string[]"}),z("model",{processor:"string",default:F.hasPlugin("rtc")?"plugin":"dom"}),z("model_url",{processor:"string"}),z("block_unsupported_drop",{processor:"boolean",default:!0}),z("visual",{processor:"boolean",default:!0}),z("visual_table_class",{processor:"string",default:"mce-item-table"}),z("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),z("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),z("setup",{processor:"function"}),z("init_instance_callback",{processor:"function"}),z("url_converter",{processor:"function",default:F.convertURL}),z("url_converter_scope",{processor:"object",default:F}),z("urlconverter_callback",{processor:"function"}),z("allow_conditional_comments",{processor:"boolean",default:!1}),z("allow_html_data_urls",{processor:"boolean",default:!1}),z("allow_svg_data_urls",{processor:"boolean"}),z("allow_html_in_named_anchor",{processor:"boolean",default:!1}),z("allow_script_urls",{processor:"boolean",default:!1}),z("allow_unsafe_link_target",{processor:"boolean",default:!1}),z("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),z("fix_list_elements",{processor:"boolean",default:!1}),z("preserve_cdata",{processor:"boolean",default:!1}),z("remove_trailing_brs",{processor:"boolean",default:!0}),z("pad_empty_with_br",{processor:"boolean",default:!1}),z("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),z("element_format",{processor:"string",default:"html"}),z("entities",{processor:"string"}),z("schema",{processor:"string",default:"html5"}),z("convert_urls",{processor:"boolean",default:!0}),z("relative_urls",{processor:"boolean",default:!0}),z("remove_script_host",{processor:"boolean",default:!0}),z("custom_elements",{processor:uf}),z("extended_valid_elements",{processor:"string"}),z("invalid_elements",{processor:"string"}),z("invalid_styles",{processor:uf}),z("valid_children",{processor:"string"}),z("valid_classes",{processor:uf}),z("valid_elements",{processor:"string"}),z("valid_styles",{processor:uf}),z("verify_html",{processor:"boolean",default:!0}),z("auto_focus",{processor:H=>wt(H)||!0===H}),z("browser_spellcheck",{processor:"boolean",default:!1}),z("protect",{processor:"array"}),z("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),z("deprecation_warnings",{processor:"boolean",default:!0}),z("a11y_advanced_options",{processor:"boolean",default:!1}),z("api_key",{processor:"string"}),z("license_key",{processor:"string"}),z("paste_block_drop",{processor:"boolean",default:!1}),z("paste_data_images",{processor:"boolean",default:!0}),z("paste_preprocess",{processor:"function"}),z("paste_postprocess",{processor:"function"}),z("paste_webkit_styles",{processor:"string",default:"none"}),z("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),z("paste_merge_formats",{processor:"boolean",default:!0}),z("smart_paste",{processor:"boolean",default:!0}),z("paste_as_text",{processor:"boolean",default:!1}),z("paste_tab_spaces",{processor:"number",default:4}),z("text_patterns",{processor:H=>qo(H,Ot)||!1===H?{value:$c(!1===H?[]:H),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),z("text_patterns_lookup",{processor:H=>{return tn(H)?{value:(V=H,U=>{const $=V(U);return $c($)}),valid:!0}:{valid:!1,message:"Must be a single function"};var V},default:H=>[]}),z("noneditable_class",{processor:"string",default:"mceNonEditable"}),z("editable_class",{processor:"string",default:"mceEditable"}),z("noneditable_regexp",{processor:H=>qo(H,Ql)?{value:H,valid:!0}:Ql(H)?{value:[H],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),z("table_tab_navigation",{processor:"boolean",default:!0}),z("highlight_on_focus",{processor:"boolean",default:!0}),z("xss_sanitization",{processor:"boolean",default:!0}),z("details_initial_state",{processor:H=>{const V=Fe(["inherited","collapsed","expanded"],H);return V?{value:H,valid:V}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),z("details_serialized_state",{processor:H=>{const V=Fe(["inherited","collapsed","expanded"],H);return V?{value:H,valid:V}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),z("init_content_sync",{processor:"boolean",default:!1}),z("newdocument_content",{processor:"string",default:""}),z("sandbox_iframes",{processor:"boolean",default:!0}),z("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),z("convert_unsafe_embeds",{processor:"boolean",default:!0}),F.on("ScriptsLoaded",()=>{z("directionality",{processor:"string",default:cl.isRtl()?"rtl":void 0}),z("placeholder",{processor:"string",default:Ku.getAttrib(F.getElement(),"placeholder")})})})(m);const x=this.options.get;var F,z;x("deprecation_warnings")&&(((H,V)=>{const U=(s=>{const u=pC(s,qr),d=s.forced_root_block;return!1!==d&&""!==d||u.push("forced_root_block (false only)"),Wn(u)})(H),$=(s=>fC(s,fu))(V),K=$.length>0,te=U.length>0,re="mobile"===V.theme;if(K||te||re){const ue="\n- ",he=re?`\n\nThemes:${ue}mobile`:"",de=K?`\n\nPlugins:${ue}${$.join(ue)}`:"",_e=te?`\n\nOptions:${ue}${U.join(ue)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+he+de+_e)}})(F=d,z=v),((H,V)=>{const U=(s=>pC(s,Do))(H),$=(s=>fC(s,Sl.map(u=>u.name)))(V),K=$.length>0,te=U.length>0;if(K||te){const re="\n- ",ue=K?`\n\nPlugins:${re}${$.map(nL).join(re)}`:"",he=te?`\n\nOptions:${re}${U.join(re)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+ue+he)}})(F,z));const C=x("suffix");C&&(f.suffix=C),this.suffix=f.suffix;const T=x("base_url");T&&f._setBaseUrl(T),this.baseUri=f.baseURI;const k=hf(m);k&&(Yl.ScriptLoader._setReferrerPolicy(k),Cr.DOM.styleSheetLoader._setReferrerPolicy(k));const D=bh(m);et(D)&&Cr.DOM.styleSheetLoader._setContentCssCors(D),ei.languageLoad=x("language_load"),ei.baseURL=f.baseURL,this.setDirty(!1),this.documentBaseURI=new xs(F_(m),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=vh(m),this.hasVisual=TE(m),this.shortcuts=new AN(this),this.editorCommands=new RT(this),(s=>{var u;(s=>{(u=>{const d=f=>()=>{Se("left,center,right,justify".split(","),m=>{f!==m&&u.formatter.remove("align"+m)}),"none"!==f&&(u.formatter.toggle("align"+f,void 0),u.nodeChanged())};u.editorCommands.addCommands({JustifyLeft:d("left"),JustifyCenter:d("center"),JustifyRight:d("right"),JustifyFull:d("justify"),JustifyNone:d("none")})})(s),(u=>{const d=f=>()=>{const m=u.selection,v=m.isCollapsed()?[u.dom.getParent(m.getNode(),u.dom.isBlock)]:m.getSelectedBlocks();return _t(v,x=>et(u.formatter.matchNode(x,f)))};u.editorCommands.addCommands({JustifyLeft:d("alignleft"),JustifyCenter:d("aligncenter"),JustifyRight:d("alignright"),JustifyFull:d("alignjustify")},"state")})(s)})(s),(u=s).editorCommands.addCommands({"Cut,Copy,Paste":d=>{const f=u.getDoc();let m;try{f.execCommand(d)}catch{m=!0}if("paste"!==d||f.queryCommandEnabled(d)||(m=!0),m||!f.queryCommandSupported(d)){let v=u.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(On.os.isMacOS()||On.os.isiOS())&&(v=v.replace(/Ctrl\+/g,"\u2318+")),u.notificationManager.open({text:v,type:"error"})}}}),(u=>{u.editorCommands.addCommands({mceAddUndoLevel:()=>{u.undoManager.add()},mceEndUndoLevel:()=>{u.undoManager.add()},Undo:()=>{u.undoManager.undo()},Redo:()=>{u.undoManager.redo()}})})(s),(u=>{u.editorCommands.addCommands({mceSelectNodeDepth:(d,f,m)=>{let v=0;u.dom.getParent(u.selection.getNode(),x=>!Bt(x)||v++!==m||(u.selection.select(x),!1),u.getBody())},mceSelectNode:(d,f,m)=>{u.selection.select(m)},selectAll:()=>{const d=u.dom.getParent(u.selection.getStart(),Ra);if(d){const f=u.dom.createRng();f.selectNodeContents(d),u.selection.setRng(f)}}})})(s),(u=>{u.editorCommands.addCommands({mceCleanup:()=>{const d=u.selection.getBookmark();u.setContent(u.getContent()),u.selection.moveToBookmark(d)},insertImage:(d,f,m)=>{Eg(u,u.dom.createHTML("img",{src:m}))},insertHorizontalRule:()=>{u.execCommand("mceInsertContent",!1,"<hr>")},insertText:(d,f,m)=>{Eg(u,u.dom.encode(m))},insertHTML:(d,f,m)=>{Eg(u,m)},mceInsertContent:(d,f,m)=>{Eg(u,m)},mceSetContent:(d,f,m)=>{u.setContent(m)},mceReplaceContent:(d,f,m)=>{u.execCommand("mceInsertContent",!1,m.replace(/\{\$selection\}/g,u.selection.getContent({format:"text"})))},mceNewDocument:()=>{u.setContent($_(u))}})})(s),(u=>{const d=(f,m,v)=>{const x=wt(v)?{href:v}:v,C=u.dom.getParent(u.selection.getNode(),"a");Ot(x)&&wt(x.href)&&(x.href=x.href.replace(/ /g,"%20"),C&&x.href||u.formatter.remove("link"),x.href&&u.formatter.apply("link",x,C))};u.editorCommands.addCommands({unlink:()=>{if(u.selection.isEditable()){if(u.selection.isCollapsed()){const f=u.dom.getParent(u.selection.getStart(),"a");return void(f&&u.dom.remove(f,!0))}u.formatter.remove("link")}},mceInsertLink:d,createLink:d})})(s),(u=>{u.editorCommands.addCommands({Indent:()=>{ID(u,"indent")},Outdent:()=>{Sb(u)}}),u.editorCommands.addCommands({Outdent:()=>TD(u)},"state")})(s),(u=>{u.editorCommands.addCommands({InsertNewBlockBefore:()=>{ET(u,!0)},InsertNewBlockAfter:()=>{ET(u,!1)}})})(s),(u=>{u.editorCommands.addCommands({insertParagraph:()=>{Qb(zM,u)},mceInsertNewLine:(d,f,m)=>{M2(u,m)},InsertLineBreak:(d,f,m)=>{Qb(w2,u)}})})(s),(u=>{(d=>{const f=(m,v)=>{d.formatter.toggle(m,v),d.nodeChanged()};d.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":m=>{f(m)},"ForeColor,HiliteColor":(m,v,x)=>{f(m,{value:x})},BackColor:(m,v,x)=>{f("hilitecolor",{value:x})},FontName:(m,v,x)=>{((C,T)=>{const k=NT(C,T);C.formatter.toggle("fontname",{value:ZL(k)}),C.nodeChanged()})(d,x)},FontSize:(m,v,x)=>{var C;(C=d).formatter.toggle("fontsize",{value:NT(C,x)}),C.nodeChanged()},LineHeight:(m,v,x)=>{var C;(C=d).formatter.toggle("lineheight",{value:String(x)}),C.nodeChanged()},Lang:(m,v,x)=>{var C;f(m,{value:x.code,customValue:null!==(C=x.customCode)&&void 0!==C?C:null})},RemoveFormat:m=>{d.formatter.remove(m)},mceBlockQuote:()=>{f("blockquote")},FormatBlock:(m,v,x)=>{f(wt(x)?x:"p")},mceToggleFormat:(m,v,x)=>{f(x)}})})(u),(d=>{const f=m=>d.formatter.match(m);d.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":m=>f(m),mceBlockQuote:()=>f("blockquote")},"state"),d.editorCommands.addQueryValueHandler("FontName",()=>{return Ex(m=d,v=>IT(m.getBody(),v.dom)).getOr("");var m}),d.editorCommands.addQueryValueHandler("FontSize",()=>{return Ex(m=d,v=>kT(m.getBody(),v.dom)).getOr("");var m}),d.editorCommands.addQueryValueHandler("LineHeight",()=>{return Ex(m=d,v=>{const x=ge(m.getBody());return Jm(v,T=>as(T,"line-height"),Pe(_n,x)).getOrThunk(()=>{const T=parseFloat(Si(v,"line-height")),k=parseFloat(Si(v,"font-size"));return String(T/k)})}).getOr("");var m})})(u)})(s),(u=>{u.editorCommands.addCommands({mceRemoveNode:(d,f,m)=>{const v=m??u.selection.getNode();if(v!==u.getBody()){const x=u.selection.getBookmark();u.dom.remove(v,!0),u.selection.moveToBookmark(x)}},mcePrint:()=>{u.getWin().print()},mceFocus:(d,f,m)=>{var v;(v=u).removed||(!0===m?Vf(v):(C=>{const T=C.selection,k=C.getBody();let D=T.getRng();C.quirks.refreshContentEditable();const E=F=>{q0(F).each(z=>{F.selection.setRng(z),D=z})};!ld(C)&&C.hasEditableRoot()&&E(C);const P=(F=C,z=T.getNode(),F.dom.getParent(z,H=>"true"===F.dom.getContentEditable(H)));var F,z;if(P&&C.dom.isChildOf(P,k))return Uw(P),C.hasEditableRoot()||E(C),Ww(C,D),void Vf(C);C.inline||(On.browser.isOpera()||Uw(k),C.getWin().focus()),(On.browser.isFirefox()||C.inline)&&(Uw(k),Ww(C,D)),Vf(C)})(v))},mceToggleVisualAid:()=>{u.hasVisual=!u.hasVisual,u.addVisual()}})})(s)})(this);const E=x("cache_suffix");E&&(On.cacheSuffix=E.replace(/^[\?\&]+/,"")),this.ui={registry:QL(),styleSheetLoader:void 0,show:Qt,hide:Qt,setEnabled:Qt,isEnabled:Z},this.mode=(F=>{const z=Oo("design"),H=Oo({design:{activate:Qt,deactivate:Qt,editorReadOnly:!1},readonly:{activate:Qt,deactivate:Qt,editorReadOnly:!0}});return(V=F).serializer?_N(V):V.on("PreInit",()=>{_N(V)}),(V=>{V.on("ShowCaret",U=>{mp(V)&&U.preventDefault()}),V.on("ObjectSelected",U=>{mp(V)&&U.preventDefault()})})(F),{isReadOnly:()=>mp(F),set:V=>((U,$,K,te)=>{if(te!==K.get()){if(!Zt($,te))throw new Error(`Editor mode '${te}' is invalid`);U.initialized?dv(U,K,$,te):U.on("init",()=>dv(U,K,$,te))}})(F,H.get(),z,V),get:()=>z.get(),register:(V,U)=>{H.set((($,K,te)=>{if(Fe(Fd,K))throw new Error(`Cannot override default mode ${K}`);return{...$,[K]:{...te,deactivate:()=>{try{te.deactivate()}catch(re){console.error(`problem while deactivating editor mode ${K}:`,re)}}}}})(H.get(),V,U))}};var V})(m),f.dispatch("SetupEditor",{editor:this});const P=Yo(m);tn(P)&&P.call(m,m)}render(){(u=>{const d=u.id;cl.setCode(pm(u));const f=()=>{zd.unbind(window,"ready",f),u.render()};if(!jl.Event.domLoaded)return void zd.bind(window,"ready",f);if(!u.getElement())return;const m=ge(u.getElement()),v=Ru(m);var T;u.on("remove",()=>{bt(m.dom.attributes,C=>go(m,C.name)),ka(m,v)}),u.ui.styleSheetLoader=u_.forElement(m,{contentCssCors:bh(T=u),referrerPolicy:hf(T)}),vh(u)?u.inline=!0:(u.orgVisibility=u.getElement().style.visibility,u.getElement().style.visibility="hidden");const x=u.getElement().form||zd.getParent(d,"form");x&&(u.formElement=x,gm(u)&&!Gp(u.getElement())&&(zd.insertAfter(zd.create("input",{type:"hidden",name:d}),d),u.hasHiddenInput=!0),u.formEventDelegate=C=>{u.dispatch(C.type,C)},zd.bind(x,"submit reset",u.formEventDelegate),u.on("reset",()=>{u.resetContent()}),!eu(u)||x.submit.nodeType||x.submit.length||x._mceOldSubmit||(x._mceOldSubmit=x.submit,x.submit=()=>(u.editorManager.triggerSave(),u.setDirty(!1),x._mceOldSubmit(x)))),u.windowManager=Sy(u),u.notificationManager=nb(u),"xml"===u.options.get("encoding")&&u.on("GetContent",C=>{C.save&&(C.content=zd.encode(C.content))}),fl(u)&&u.on("submit",()=>{u.initialized&&u.save()}),d0(u)&&(u._beforeUnload=()=>{!u.initialized||u.destroyed||u.isHidden()||u.save({format:"raw",no_events:!0,set_dirty:!1})},u.editorManager.on("BeforeUnload",u._beforeUnload)),u.editorManager.add(u),((s,u)=>{const d=Yl.ScriptLoader,f=()=>{!s.removed&&(m=>{const v=da(m);return!wt(v)||et(gu.get(v))})(s)&&(m=>{const v=gh(m);return et(Jh.get(v))})(s)&&gN(s)};((m,v)=>{const x=da(m);if(wt(x)&&!_T(x)&&!Zt(gu.urls,x)){const C=xE(m),T=C?m.documentBaseURI.toAbsolute(C):`themes/${x}/theme${v}.js`;gu.load(x,T).catch(()=>{Qh(m,"ThemeLoadError",ep("theme",T,x))})}})(s,u),((m,v)=>{const x=gh(m);if("plugin"!==x&&!Zt(Jh.urls,x)){const C=BA(m),T=wt(C)?m.documentBaseURI.toAbsolute(C):`models/${x}/model${v}.js`;Jh.load(x,T).catch(()=>{Qh(m,"ModelLoadError",ep("model",T,x))})}})(s,u),((m,v)=>{const x=pm(v),C=fm(v);if(!cl.hasCode(x)&&"en"!==x){const T=Vr(C)?C:`${v.editorManager.baseURL}/langs/${x}.js`;m.add(T).catch(()=>{Qh(v,"LanguageLoadError",ep("language",T,x))})}})(d,s),((m,v,x)=>{const C=Ix(v,"default",x),T=(k=v,j.from(df(k)).filter(Vr).map(D=>({url:D,name:j.none()}))).orThunk(()=>Ix(v,j_(v),""));var k;Se((k=>{const D=[],E=P=>{D.push(P)};for(let P=0;P<k.length;P++)k[P].each(E);return D})([C,T]),k=>{m.add(k.url).catch(()=>{var D,E,P;D=v,E=k.url,P=k.name.getOrUndefined(),Qh(D,"IconsLoadError",ep("icons",E,P))})})})(d,s,u),((m,v)=>{const x=(C,T)=>{og.load(C,T).catch(()=>{Qh(m,"PluginLoadError",ep("plugin",T,C))})};sr(ME(m),(C,T)=>{x(T,C),m.options.set("plugins",mm(m).concat(T))}),Se(mm(m),C=>{!(C=Ke.trim(C))||og.urls[C]||_T(C)||x(C,`plugins/${C}/plugin${v}.js`)})})(s,u),d.loadQueue().then(f,f)})(u,u.suffix)})(this)}focus(u){this.execCommand("mceFocus",!1,u)}hasFocus(){return ld(this)}translate(u){return cl.translate(u)}getParam(u,d,f){const m=this.options;return m.isRegistered(u)||(et(f)?m.register(u,{processor:f,default:d}):m.register(u,{processor:Z,default:d})),m.isSet(u)||ct(d)?m.get(u):d}hasPlugin(u,d){return!(!Fe(mm(this),u)||d&&void 0===og.get(u))}nodeChanged(u){this._nodeChangeDispatcher.nodeChanged(u)}addCommand(u,d,f){this.editorCommands.addCommand(u,d,f)}addQueryStateHandler(u,d,f){this.editorCommands.addQueryStateHandler(u,d,f)}addQueryValueHandler(u,d,f){this.editorCommands.addQueryValueHandler(u,d,f)}addShortcut(u,d,f,m){this.shortcuts.add(u,d,f,m)}execCommand(u,d,f,m){return this.editorCommands.execCommand(u,d,f,m)}queryCommandState(u){return this.editorCommands.queryCommandState(u)}queryCommandValue(u){return this.editorCommands.queryCommandValue(u)}queryCommandSupported(u){return this.editorCommands.queryCommandSupported(u)}show(){const u=this;u.hidden&&(u.hidden=!1,u.inline?u.getBody().contentEditable="true":(vp.show(u.getContainer()),vp.hide(u.id)),u.load(),u.dispatch("show"))}hide(){const u=this;u.hidden||(u.save(),u.inline?(u.getBody().contentEditable="false",u===u.editorManager.focusedEditor&&(u.editorManager.focusedEditor=null)):(vp.hide(u.getContainer()),vp.setStyle(u.id,"display",u.orgDisplay)),u.hidden=!0,u.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(u,d){this.dispatch("ProgressState",{state:u,time:d})}load(u={}){const d=this,f=d.getElement();if(d.removed)return"";if(f){const m={...u,load:!0},v=Gp(f)?f.value:f.innerHTML,x=d.setContent(v,m);return m.no_events||d.dispatch("LoadContent",{...m,element:f}),x}return""}save(u={}){const d=this;let f=d.getElement();if(!f||!d.initialized||d.removed)return"";const m={...u,save:!0,element:f};let v=d.getContent(m);const x={...m,content:v};if(x.no_events||d.dispatch("SaveContent",x),"raw"===x.format&&d.dispatch("RawSaveContent",x),v=x.content,Gp(f))f.value=v;else{!u.is_removing&&d.inline||(f.innerHTML=v);const C=vp.getParent(d.id,"form");C&&kN(C.elements,T=>T.name!==d.id||(T.value=v,!1))}return x.element=m.element=f=null,!1!==x.set_dirty&&d.setDirty(!1),v}setContent(u,d){return _s(this,u,d)}getContent(u){return((d,f={})=>{const m=(v=f,x=f.format?f.format:"html",{...v,format:x,get:!0,getInner:!0});var v,x;return _I(d,m).fold(Ir,v=>{const x=(T=v,eb(d).editor.getContent(T));var T;return wI(d,x,v)})})(this,u)}insertContent(u,d){d&&(u=GT({content:u},d)),this.execCommand("mceInsertContent",!1,u)}resetContent(u){void 0===u?_s(this,this.startContent,{format:"raw"}):_s(this,u),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(u){const d=!this.isNotDirty;this.isNotDirty=!u,u&&u!==d&&this.dispatch("dirty")}getContainer(){const u=this;return u.container||(u.container=u.editorContainer||vp.get(u.id+"_parent")),u.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=vp.get(this.id)),this.targetElm}getWin(){const u=this;if(!u.contentWindow){const d=u.iframeElement;d&&(u.contentWindow=d.contentWindow)}return u.contentWindow}getDoc(){const u=this;if(!u.contentDocument){const d=u.getWin();d&&(u.contentDocument=d.document)}return u.contentDocument}getBody(){var u,d;const f=this.getDoc();return null!==(d=null!==(u=this.bodyElement)&&void 0!==u?u:f?.body)&&void 0!==d?d:null}convertURL(u,d,f){const m=this,v=m.options.get,x=AE(m);if(tn(x))return x.call(m,u,f,!0,d);if(!v("convert_urls")||"link"===f||Ot(f)&&"LINK"===f.nodeName||0===u.indexOf("file:")||0===u.length)return u;const C=new xs(u);return"http"!==C.protocol&&"https"!==C.protocol&&""!==C.protocol?u:v("relative_urls")?m.documentBaseURI.toRelative(u):u=m.documentBaseURI.toAbsolute(u,v("remove_script_host"))}addVisual(u){((d,f)=>{var v;v=f,ro(this).editor.addVisual(v)})(0,u)}setEditableRoot(u){var d,f;(d=this)._editableRoot!==(f=u)&&(d._editableRoot=f,d.readonly||(d.getBody().contentEditable=String(d.hasEditableRoot()),d.nodeChanged()),d.dispatch("EditableRootStateChange",{state:f}))}hasEditableRoot(){return this._editableRoot}remove(){(u=>{if(!u.removed){const{_selectionOverrides:d,editorUpload:f}=u,m=u.getBody(),v=u.getElement();m&&u.save({is_removing:!0}),u.removed=!0,u.unbindAllNativeEvents(),u.hasHiddenInput&&et(v?.nextSibling)&&ng.remove(v.nextSibling),u.dispatch("remove"),u.editorManager.remove(u),!u.inline&&m&&ng.setStyle((x=u).id,"display",x.orgDisplay),(x=>{x.dispatch("detach")})(u),ng.remove(u.getContainer()),rg(d),rg(f),u.destroy()}var x})(this)}destroy(u){((d,f)=>{const{selection:m,dom:v}=d;d.destroyed||(f||d.removed?(f||(d.editorManager.off("beforeunload",d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),rg(m),rg(v)),(x=>{const C=x.formElement;C&&(C._mceOldSubmit&&(C.submit=C._mceOldSubmit,delete C._mceOldSubmit),ng.unbind(C,"submit reset",x.formEventDelegate))})(d),(x=>{const C=x;C.contentAreaContainer=C.formElement=C.container=C.editorContainer=null,C.bodyElement=C.contentDocument=C.contentWindow=null,C.iframeElement=C.targetElm=null;const T=x.selection;T&&(C.selection=T.win=T.dom=T.dom.doc=null)})(d),d.destroyed=!0):d.remove())})(this,u)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Su=Cr.DOM,zx=Ke.each;let Vx,IN=!1,na=[];const Fx=s=>{const u=s.type;zx(Cu.get(),d=>{switch(u){case"scroll":d.dispatch("ScrollWindow",s);break;case"resize":d.dispatch("ResizeWindow",s)}})},DN=s=>{if(s!==IN){const u=Cr.DOM;s?(u.bind(window,"resize",Fx),u.bind(window,"scroll",Fx)):(u.unbind(window,"resize",Fx),u.unbind(window,"scroll",Fx)),IN=s}},Gx=s=>{const u=na;return na=dt(na,d=>s!==d),Cu.activeEditor===s&&(Cu.activeEditor=na.length>0?na[0]:null),Cu.focusedEditor===s&&(Cu.focusedEditor=null),u.length!==na.length},NN="CSS1Compat"!==document.compatMode,Cu={...PT,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"2.1",releaseDate:"2024-07-03",i18n:cl,activeEditor:null,focusedEditor:null,setup(){const s=this;let u="",d="",f=xs.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(f)&&(f=f.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(f)||(f+="/"));const m=window.tinymce||window.tinyMCEPreInit;if(m)u=m.base||m.baseURL,d=m.suffix;else{const x=document.getElementsByTagName("script");for(let C=0;C<x.length;C++){const T=x[C].src||"";if(""===T)continue;const k=T.substring(T.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(T)){-1!==k.indexOf(".min")&&(d=".min"),u=T.substring(0,T.lastIndexOf("/"));break}}if(!u&&document.currentScript){const C=document.currentScript.src;-1!==C.indexOf(".min")&&(d=".min"),u=C.substring(0,C.lastIndexOf("/"))}}var v;s.baseURL=new xs(f).toAbsolute(u),s.documentBaseURL=f,s.baseURI=new xs(s.baseURL),s.suffix=d,(v=s).on("AddEditor",Pe(OE,v)),v.on("RemoveEditor",Pe(PE,v))},overrideDefaults(s){const u=s.base_url;u&&this._setBaseUrl(u);const d=s.suffix;d&&(this.suffix=d),this.defaultOptions=s;const f=s.plugin_base_urls;void 0!==f&&sr(f,(m,v)=>{ei.PluginManager.urls[v]=m})},init(s){const u=this;let d;const f=Ke.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let m=x=>{d=x};const v=()=>{let x=0;const C=[];let T;var k;Su.unbind(window,"ready",v),(k=>{const D=s.onpageload;D&&D.apply(u,[])})(),T=bi((k=s,On.browser.isIE()||On.browser.isEdge()?(Cy("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):NN?(Cy("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):wt(k.selector)?Su.select(k.selector):et(k.target)?[k.target]:[])),Ke.each(T,k=>{var D;(D=u.get(k.id))&&D.initialized&&!(D.getContainer()||D.getBody()).parentNode&&(Gx(D),D.unbindAllNativeEvents(),D.destroy(!0),D.removed=!0)}),T=Ke.grep(T,k=>!u.get(k.id)),0===T.length?m([]):zx(T,k=>{s.inline&&k.tagName.toLowerCase()in f?Cy("Could not initialize inline editor on invalid inline target element",k):((D,E,P)=>{const F=new Bx(D,E,u);C.push(F),F.on("init",()=>{++x===T.length&&m(C)}),F.targetElm=F.targetElm||P,F.render()})((D=>{let E=D.id;return E||(E=cr(D,"name").filter(P=>!Su.get(P)).getOrThunk(Su.uniqueId),D.setAttribute("id",E)),E})(k),s,k)})};return Su.bind(window,"ready",v),new Promise(x=>{d?x(d):m=C=>{x(C)}})},get(s){return 0===arguments.length?na.slice(0):wt(s)?Sr(na,u=>u.id===s).getOr(null):kr(s)&&na[s]?na[s]:null},add(s){const u=this,d=u.get(s.id);return d===s||(null===d&&na.push(s),DN(!0),u.activeEditor=s,u.dispatch("AddEditor",{editor:s}),Vx||(Vx=f=>{const m=u.dispatch("BeforeUnload");if(m.returnValue)return f.preventDefault(),f.returnValue=m.returnValue,m.returnValue},window.addEventListener("beforeunload",Vx))),s},createEditor(s,u){return this.add(new Bx(s,u,this))},remove(s){const u=this;let d;if(s){if(!wt(s))return d=s,Hn(u.get(d.id))?null:(Gx(d)&&u.dispatch("RemoveEditor",{editor:d}),0===na.length&&window.removeEventListener("beforeunload",Vx),d.remove(),DN(na.length>0),d);zx(Su.select(s),f=>{d=u.get(f.id),d&&u.remove(d)})}else for(let f=na.length-1;f>=0;f--)u.remove(na[f])},execCommand(s,u,d){var f;const m=this,v=Ot(d)?null!==(f=d.id)&&void 0!==f?f:d.index:d;switch(s){case"mceAddEditor":return m.get(v)||new Bx(v,d.options,m).render(),!0;case"mceRemoveEditor":{const x=m.get(v);return x&&x.remove(),!0}case"mceToggleEditor":{const x=m.get(v);return x?(x.isHidden()?x.show():x.hide(),!0):(m.execCommand("mceAddEditor",!1,d),!0)}}return!!m.activeEditor&&m.activeEditor.execCommand(s,u,d)},triggerSave:()=>{zx(na,s=>{s.save()})},addI18n:(s,u)=>{cl.add(s,u)},translate:s=>cl.translate(s),setActive(s){const u=this.activeEditor;this.activeEditor!==s&&(u&&u.dispatch("deactivate",{relatedTarget:s}),s.dispatch("activate",{relatedTarget:u})),this.activeEditor=s},_setBaseUrl(s){this.baseURL=new xs(this.documentBaseURL).toAbsolute(s.replace(/\/+$/,"")),this.baseURI=new xs(this.baseURL)}};Cu.setup();const eR=(()=>{const s=Uu();return{FakeClipboardItem:u=>({items:u,types:so(u),getType:d=>cr(u,d).getOrUndefined()}),write:u=>{s.set(u)},read:()=>s.get().getOrUndefined(),clear:s.clear}})(),EN=Math.min,Gd=Math.max,hv=Math.round,Hx=(s,u,d)=>{let f=u.x,m=u.y;const v=s.w,x=s.h,C=u.w,T=u.h,k=(d||"").split("");return"b"===k[0]&&(m+=T),"r"===k[1]&&(f+=C),"c"===k[0]&&(m+=hv(T/2)),"c"===k[1]&&(f+=hv(C/2)),"b"===k[3]&&(m-=x),"r"===k[4]&&(f-=v),"c"===k[3]&&(m-=hv(x/2)),"c"===k[4]&&(f-=hv(v/2)),bp(f,m,v,x)},bp=(s,u,d,f)=>({x:s,y:u,w:d,h:f}),tR={inflate:(s,u,d)=>bp(s.x-u,s.y-d,s.w+2*u,s.h+2*d),relativePosition:Hx,findBestRelativePosition:(s,u,d,f)=>{for(let m=0;m<f.length;m++){const v=Hx(s,u,f[m]);if(v.x>=d.x&&v.x+v.w<=d.w+d.x&&v.y>=d.y&&v.y+v.h<=d.h+d.y)return f[m]}return null},intersect:(s,u)=>{const d=Gd(s.x,u.x),f=Gd(s.y,u.y),m=EN(s.x+s.w,u.x+u.w),v=EN(s.y+s.h,u.y+u.h);return m-d<0||v-f<0?null:bp(d,f,m-d,v-f)},clamp:(s,u,d)=>{let f=s.x,m=s.y,v=s.x+s.w,x=s.y+s.h;const C=u.x+u.w,T=u.y+u.h,k=Gd(0,u.x-f),D=Gd(0,u.y-m),E=Gd(0,v-C),P=Gd(0,x-T);return f+=k,m+=D,d&&(v+=k,x+=D,f-=E,m-=P),v-=E,x-=P,bp(f,m,v-f,x-m)},create:bp,fromClientRect:s=>bp(s.left,s.top,s.width,s.height)},nR=(()=>{const s={},u={},d={};return{load:(f,m)=>{const v=`Script at URL "${m}" failed to load`,x=`Script at URL "${m}" did not call \`tinymce.Resource.add('${f}', data)\` within 1 second`;if(void 0!==s[f])return s[f];{const C=new Promise((T,k)=>{const D=((E,P,F=1e3)=>{let z=!1,H=null;const V=K=>(...te)=>{z||(z=!0,null!==H&&(clearTimeout(H),H=null),K.apply(null,te))},U=V(E),$=V(P);return{start:(...K)=>{z||null!==H||(H=setTimeout(()=>$.apply(null,K),F))},resolve:U,reject:$}})(T,k);u[f]=D.resolve,Yl.ScriptLoader.loadScript(m).then(()=>D.start(x),()=>D.reject(v))});return s[f]=C,C}},add:(f,m)=>{void 0!==u[f]&&(u[f](m),delete u[f]),s[f]=Promise.resolve(m),d[f]=m},has:f=>f in d,get:f=>d[f],unload:f=>{delete s[f],delete d[f]}}})();let pv;try{const s="__storage_test__";pv=window.localStorage,pv.setItem(s,s),pv.removeItem(s)}catch{pv=(()=>{let u={},d=[];const f={getItem:m=>u[m]||null,setItem:(m,v)=>{d.push(m),u[m]=String(v)},key:m=>d[m],removeItem:m=>{d=d.filter(v=>v===m),delete u[m]},clear:()=>{d=[],u={}},length:0};return Object.defineProperty(f,"length",{get:()=>d.length,configurable:!1,enumerable:!1}),f})()}const rR={geom:{Rect:tR},util:{Delay:Ha,Tools:Ke,VK:Mt,URI:xs,EventDispatcher:OT,Observable:PT,I18n:cl,LocalStorage:pv,ImageUploader:s=>{const u=ag(),d=FI(s,u);return{upload:(f,m=!0)=>d.upload(f,m?VI(s):void 0)}}},dom:{EventUtils:jl,TreeWalker:fr,TextSeeker:ql,DOMUtils:Cr,ScriptLoader:Yl,RangeUtils:ad,Serializer:RI,StyleSheetLoader:Pv,ControlSelection:JA,BookmarkManager:Lf,Selection:hC,Event:jl.Event},html:{Styles:Uv,Entities:Xp,Node:Xo,Schema:Gn,DomParser:$h,Writer:eS,Serializer:pa},Env:On,AddOnManager:ei,Annotator:xw,Formatter:vd,UndoManager:XI,EditorCommands:RT,WindowManager:Sy,NotificationManager:nb,EditorObservable:SN,Shortcuts:AN,Editor:Bx,FocusManager:fk,EditorManager:Cu,DOM:Cr.DOM,ScriptLoader:Yl.ScriptLoader,PluginManager:og,ThemeManager:gu,ModelManager:Jh,IconManager:wy,Resource:nR,FakeClipboard:eR,trim:Ke.trim,isArray:Ke.isArray,is:Ke.is,toArray:Ke.toArray,makeMap:Ke.makeMap,each:Ke.each,map:Ke.map,grep:Ke.grep,inArray:Ke.inArray,extend:Ke.extend,walk:Ke.walk,resolve:Ke.resolve,explode:Ke.explode,_addCacheSuffix:Ke._addCacheSuffix},LN=Ke.extend(Cu,rR);(s=>{window.tinymce=s,window.tinyMCE=s})(LN),(s=>{if("object"==typeof module)try{module.exports=s}catch{}})(LN)}(),function(){"use strict";var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const yr=ke=>Re=>(Ae=>{const qe=typeof Ae;return null===Ae?"null":"object"===qe&&Array.isArray(Ae)?"array":"object"===qe&&(It=ft=Ae,(Ye=String).prototype.isPrototypeOf(It)||(null===(xt=ft.constructor)||void 0===xt?void 0:xt.name)===Ye.name)?"string":qe;var It,ft,Ye,xt})(Re)===ke,Ce=ke=>Re=>typeof Re===ke,oi=yr("string"),gn=yr("object"),Bi=yr("array"),qn=Ce("boolean"),Cn=ke=>!(null==ke),Sn=Ce("function"),Tn=(ke,Re)=>{if(Bi(ke)){for(let Ae=0,qe=ke.length;Ae<qe;++Ae)if(!Re(ke[Ae]))return!1;return!0}return!1},Fn=()=>{},wt=(ke,Re)=>ke===Re;class Ot{constructor(Re,Ae){this.tag=Re,this.value=Ae}static some(Re){return new Ot(!0,Re)}static none(){return Ot.singletonNone}fold(Re,Ae){return this.tag?Ae(this.value):Re()}isSome(){return this.tag}isNone(){return!this.tag}map(Re){return this.tag?Ot.some(Re(this.value)):Ot.none()}bind(Re){return this.tag?Re(this.value):Ot.none()}exists(Re){return this.tag&&Re(this.value)}forall(Re){return!this.tag||Re(this.value)}filter(Re){return!this.tag||Re(this.value)?this:Ot.none()}getOr(Re){return this.tag?this.value:Re}or(Re){return this.tag?this:Re}getOrThunk(Re){return this.tag?this.value:Re()}orThunk(Re){return this.tag?this:Re()}getOrDie(Re){if(this.tag)return this.value;throw new Error(Re??"Called getOrDie on None")}static from(Re){return Cn(Re)?Ot.some(Re):Ot.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Re){this.tag&&Re(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ot.singletonNone=new Ot(!1);const Jn=Array.prototype.indexOf,yn=Array.prototype.push,Hn=ke=>{const Re=[];for(let Ae=0,qe=ke.length;Ae<qe;++Ae){if(!Bi(ke[Ae]))throw new Error("Arr.flatten item "+Ae+" was not an array, input: "+ke);yn.apply(Re,ke[Ae])}return Re},Ar=(ke,Re)=>{for(let Ae=0;Ae<ke.length;Ae++){const qe=Re(ke[Ae],Ae);if(qe.isSome())return qe}return Ot.none()},ct=(ke,Re,Ae=wt)=>ke.exists(qe=>Ae(qe,Re)),rr=ke=>{const Re=[],Ae=qe=>{Re.push(qe)};for(let qe=0;qe<ke.length;qe++)ke[qe].each(Ae);return Re},et=(ke,Re)=>ke?Ot.some(Re):Ot.none(),tn=ke=>Re=>Re.options.get(ke),kr=tn("link_assume_external_targets"),qo=tn("link_context_toolbar"),Qt=tn("link_list"),Lr=tn("link_default_target"),jt=tn("link_default_protocol"),Ve=tn("link_target_list"),Ir=tn("link_rel_list"),De=tn("link_class_list"),Pe=tn("link_title"),oa=tn("allow_unsafe_link_target"),$t=tn("link_quicklink"),Kr=Object.keys,ur=Object.hasOwnProperty,Mn=(ke,Re)=>ur.call(ke,Re);var Z=tinymce.util.Tools.resolve("tinymce.util.URI"),j=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Jr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Xn=ke=>Cn(ke)&&"a"===ke.nodeName.toLowerCase(),Sa=ke=>Xn(ke)&&!!_t(ke),vn=(ke,Re)=>{if(ke.collapsed)return[];{const Ae=ke.cloneContents(),qe=Ae.firstChild,It=new j(qe,Ae),ft=[];let Ye=qe;do{Re(Ye)&&ft.push(Ye)}while(Ye=It.next());return ft}},Fe=ke=>/^\w+:/i.test(ke),_t=ke=>{var Re,Ae;return null!==(Ae=null!==(Re=ke.getAttribute("data-mce-href"))&&void 0!==Re?Re:ke.getAttribute("href"))&&void 0!==Ae?Ae:""},Ee=(ke,Re)=>{const Ae=["noopener"],qe=ke?ke.split(/\s+/):[],It=Ye=>Ye.filter(xt=>-1===Jr.inArray(Ae,xt)),ft=Re?(Ye=It(Ye=qe)).length>0?Ye.concat(Ae):Ae:It(qe);var Ye;return ft.length>0?(Ye=>Jr.trim(Ye.sort().join(" ")))(ft):""},Se=(ke,Re)=>(Re=Re||dt(ke.selection.getRng())[0]||ke.selection.getNode(),Sr(Re)?Ot.from(ke.dom.select("a[href]",Re)[0]):Ot.from(ke.dom.getParent(Re,"a[href]"))),bt=(ke,Re)=>Se(ke,Re).isSome(),no=(ke,Re)=>Re.fold(()=>ke.getContent({format:"text"}),Ae=>Ae.innerText||Ae.textContent||"").replace(/\uFEFF/g,""),dt=ke=>vn(ke,Sa),Ft=ke=>Jr.grep(ke,Sa),Gr=ke=>Ft(ke).length>0,ao=ke=>{const Re=ke.schema.getTextInlineElements();if(Se(ke).exists(qe=>qe.hasAttribute("data-mce-block")))return!1;const Ae=ke.selection.getRng();return!!Ae.collapsed||0===vn(Ae,qe=>1===qe.nodeType&&!Xn(qe)&&!Mn(Re,qe.nodeName.toLowerCase())).length},Sr=ke=>Cn(ke)&&"FIGURE"===ke.nodeName&&/\bimage\b/i.test(ke.className),st=(ke,Re,Ae)=>{const qe=((It,ft)=>{const Ye=It.options.get,xt={allow_html_data_urls:Ye("allow_html_data_urls"),allow_script_urls:Ye("allow_script_urls"),allow_svg_data_urls:Ye("allow_svg_data_urls")},rn=ft.href;return{...ft,href:Z.isDomSafe(rn,"a",xt)?rn:""}})(ke,Ae);ke.hasPlugin("rtc",!0)?ke.execCommand("createlink",!1,(ke=>{const{class:Re,href:Ae,rel:qe,target:It,text:ft,title:Ye}=ke;return((xt,rn)=>{const Ln={};var kn,Vr,Qr;return kn=Ln,Vr=(or,xn)=>{kn[xn]=or},Qr=Fn,((Yr,Ma)=>{const ii=Kr(Yr);for(let Is=0,ol=ii.length;Is<ol;Is++){const Du=ii[Is];Ma(Yr[Du],Du)}})(xt,(Yr,Ma)=>{(!1===(ke=>null===ke)(Yr)?Vr:Qr)(Yr,Ma)}),Ln})({class:Re.getOrNull(),href:Ae,rel:qe.getOrNull(),target:It.getOrNull(),text:ft.getOrNull(),title:Ye.getOrNull()})})(qe)):((ke,Re,Ae)=>{const qe=ke.selection.getNode(),It=Se(ke,qe),ft=((Ye,xt)=>{const rn={...xt};if(0===Ir(Ye).length&&!oa(Ye)){const Ln=Ee(rn.rel,"_blank"===rn.target);rn.rel=Ln||null}return Ot.from(rn.target).isNone()&&!1===Ve(Ye)&&(rn.target=Lr(Ye)),rn.href=(Ln=rn.href,"http"!==(kn=kr(Ye))&&"https"!==kn||Fe(Ln)?Ln:kn+"://"+Ln),rn;var Ln,kn})(ke,(rn=(kn,or)=>(Ye[or].each(xn=>{kn[or]=xn.length>0?xn:null}),kn),Ln={href:(Ye=Ae).href},((kn,or)=>{for(let xn=0,Vr=kn.length;xn<Vr;xn++)or(kn[xn])})(["title","rel","class","target"],(kn,or)=>{Ln=rn(Ln,kn)}),Ln));var Ye,rn,Ln;ke.undoManager.transact(()=>{Ae.href===Re.href&&Re.attach(),It.fold(()=>{((Ye,xt,rn,Ln)=>{const kn=Ye.dom;Sr(xt)?We(kn,xt,Ln):rn.fold(()=>{Ye.execCommand("mceInsertLink",!1,Ln)},or=>{Ye.insertContent(kn.createHTML("a",Ln,kn.encode(or)))})})(ke,qe,Ae.text,ft)},Ye=>{ke.focus(),((xt,rn,Ln,kn)=>{Ln.each(or=>{Mn(rn,"innerText")?rn.innerText=or:rn.textContent=or}),xt.dom.setAttribs(rn,kn),xt.selection.select(rn)})(ke,Ye,Ae.text,ft)})})})(ke,Re,qe)},lt=ke=>{var Re;ke.hasPlugin("rtc",!0)?ke.execCommand("unlink"):(Re=ke).undoManager.transact(()=>{const Ae=Re.selection.getNode();Sr(Ae)?ht(Re,Ae):(qe=>{const It=qe.dom,ft=qe.selection,Ye=ft.getBookmark(),xt=ft.getRng().cloneRange(),rn=It.getParent(xt.startContainer,"a[href]",qe.getBody()),Ln=It.getParent(xt.endContainer,"a[href]",qe.getBody());rn&&xt.setStartBefore(rn),Ln&&xt.setEndAfter(Ln),ft.setRng(xt),qe.execCommand("unlink"),ft.moveToBookmark(Ye)})(Re),Re.focus()})},ht=(ke,Re)=>{var Ae;const qe=ke.dom.select("img",Re)[0];if(qe){const It=ke.dom.getParents(qe,"a[href]",Re)[0];It&&(null===(Ae=It.parentNode)||void 0===Ae||Ae.insertBefore(qe,It),ke.dom.remove(It))}},We=(ke,Re,Ae)=>{var qe;const It=ke.select("img",Re)[0];if(It){const ft=ke.create("a",Ae);null===(qe=It.parentNode)||void 0===qe||qe.insertBefore(ft,It),ft.appendChild(It)}},An=ke=>oi(ke.value)?ke.value:"",Wn=(ke,Re)=>{const Ae=[];return Jr.each(ke,qe=>{const It=oi((ft=qe).text)?ft.text:oi(ft.title)?ft.title:"";var ft;if(void 0!==qe.menu){const ft=Wn(qe.menu,Re);Ae.push({text:It,items:ft})}else{const ft=Re(qe);Ae.push({text:It,value:ft})}}),Ae},pr=(ke=An)=>Re=>Ot.from(Re).map(Ae=>Wn(Ae,ke)),bn=ke=>pr(An)(ke),Br=pr,br=(ke,Re)=>Ae=>({name:ke,type:"listbox",label:Re,items:Ae}),Zo=An,bi=(ke,Re)=>Ar(Re,Ae=>{return Mn(It=Ae,"items")&&null!=It.items?bi(ke,Ae.items):et(Ae.value===ke,Ae);var It});var Il=tinymce.util.Tools.resolve("tinymce.util.Delay");const sr=ke=>{const Re=ke.href;return Re.indexOf("@")>0&&-1===Re.indexOf("/")&&-1===Re.indexOf("mailto:")?Ot.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ae=>({...Ae,href:"mailto:"+Re})}):Ot.none()},Et=(ke,Re)=>Ae=>{const qe=Ae.href;return 1===ke&&!Fe(qe)||0===ke&&/^\s*www(\.|\d\.)/i.test(qe)?Ot.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Re}:// prefix?`,preprocess:It=>({...It,href:Re+"://"+qe})}):Ot.none()},Vo=ke=>{const Re=ke.dom.select("a:not([href])"),Ae=Hn(((qe,It)=>{const ft=qe.length,Ye=new Array(ft);for(let xt=0;xt<ft;xt++)Ye[xt]=It(qe[xt]);return Ye})(Re,qe=>{const It=qe.name||qe.id;return It?[{text:It,value:"#"+It}]:[]}));return Ae.length>0?Ot.some([{text:"None",value:""}].concat(Ae)):Ot.none()},Ca=ke=>{const Re=De(ke);return Re.length>0?bn(Re):Ot.none()},Iu=ke=>{try{return Ot.some(JSON.parse(ke))}catch{return Ot.none()}},Lt=(ke,Re)=>{const Ae=Ir(ke);if(Ae.length>0){const qe=ct(Re,"_blank"),It=ft=>Ee(Zo(ft),qe);return(!1===oa(ke)?Br(It):bn)(Ae)}return Ot.none()},zr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ts=ke=>{const Re=Ve(ke);return Bi(Re)?bn(Re).orThunk(()=>Ot.some(zr)):!1===Re?Ot.none():Ot.some(zr)},cr=(ke,Re,Ae)=>{const qe=ke.getAttrib(Re,Ae);return null!==qe&&qe.length>0?Ot.some(qe):Ot.none()},lo=ke=>{var Ae;(Ae=ke,((ke,Re)=>(Ae=>{const qe=ft=>Ae.convertURL(ft.value||ft.url||"","href"),It=Qt(Ae);return new Promise(ft=>{oi(It)?fetch(It).then(Ye=>Ye.ok?Ye.text().then(Iu):Promise.reject()).then(ft,()=>ft(Ot.none())):Sn(It)?It(Ye=>ft(Ot.some(Ye))):ft(Ot.from(It))}).then(ft=>ft.bind(Br(qe)).map(Ye=>Ye.length>0?[{text:"None",value:""}].concat(Ye):Ye))})(ke).then(Ae=>{const qe=((It,ft)=>{const Ye=It.dom,xt=ao(It)?Ot.some(no(It.selection,ft)):Ot.none(),rn=ft.bind(xn=>Ot.from(Ye.getAttrib(xn,"href"))),Ln=ft.bind(xn=>Ot.from(Ye.getAttrib(xn,"target"))),kn=ft.bind(xn=>cr(Ye,xn,"rel")),or=ft.bind(xn=>cr(Ye,xn,"class"));return{url:rn,text:xt,title:ft.bind(xn=>cr(Ye,xn,"title")),target:Ln,rel:kn,linkClass:or}})(ke,Re);return{anchor:qe,catalogs:{targets:Ts(ke),rels:Lt(ke,qe.target),classes:Ca(ke),anchor:Vo(ke),link:Ae},optNode:Re,flags:{titleEnabled:Pe(ke)}}}))(Ae,Se(Ae))).then(Ae=>{var It,ft;return((It,ft,Ye)=>{const xt=It.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),rn=It.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Ln=((xn,Vr)=>{const Qr=xn.anchor,Yr=Qr.url.getOr("");return{url:{value:Yr,meta:{original:{value:Yr}}},text:Qr.text.getOr(""),title:Qr.title.getOr(""),anchor:Yr,link:Yr,rel:Qr.rel.getOr(""),target:Qr.target.or(Vr).getOr(""),linkClass:Qr.linkClass.getOr("")}})(It,Ot.from(Lr(Ye))),kn=It.catalogs,or=((ke,Re)=>{const Ae={text:ke.text,title:ke.title};return{onChange:(It,ft)=>{const Ye=ft.name;return"url"===Ye?(xt=>{const rn=et(Ae.text.length<=0,Ot.from(null===(kn=(Ln=xt.url).meta)||void 0===kn?void 0:kn.text).getOr(Ln.value));var Ln,kn;const or=et(Ae.title.length<=0,Ot.from(null===(Vr=xt.url.meta)||void 0===Vr?void 0:Vr.title).getOr(""));var Vr;return rn.isSome()||or.isSome()?Ot.some({...rn.map(xn=>({text:xn})).getOr({}),...or.map(xn=>({title:xn})).getOr({})}):Ot.none()})(It()):Jn.call(["anchor","link"],Ye)>-1?((It,ft)=>{const Ye=(xt=Re,rn=ft,"link"===rn?xt.link:"anchor"===rn?xt.anchor:Ot.none()).getOr([]);var xt,rn;return((Ln,kn,or,xn)=>{const Vr=xn[kn],Qr=Ln.length>0;return void 0!==Vr?bi(Vr,or).map(Yr=>({url:{value:Yr.value,meta:{text:Qr?Ln:Yr.text,attach:Fn}},text:Qr?Ln:Yr.text})):Ot.none()})(Ae.text,ft,Ye,It)})(It(),Ye):(("text"===Ye||"title"===Ye)&&(Ae[Ye]=It()[Ye]),Ot.none())}}})(Ln,kn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Hn([[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],xt,rn,rr([kn.anchor.map(br("anchor","Anchors")),kn.rels.map(br("rel","Rel")),kn.targets.map(br("target","Open link in...")),kn.link.map(br("link","Link list")),kn.classes.map(br("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ln,onChange:(xn,{name:Vr})=>{or.onChange(xn.getData,{name:Vr}).each(Qr=>{xn.setData(Qr)})},onSubmit:ft}})(Ae,(It=ke,ft=Ae,Ye=>{const xt=Ye.getData();if(!xt.url.value)return lt(It),void Ye.close();const rn=or=>Ot.from(xt[or]).filter(xn=>!ct(ft.anchor[or],xn)),Ln={href:xt.url.value,text:rn("text"),target:rn("target"),rel:rn("rel"),class:rn("linkClass"),title:rn("title")},kn={href:xt.url.value,attach:void 0!==xt.url.meta&&xt.url.meta.attach?xt.url.meta.attach:Fn};var or,xn;(or=It,xn=Ln,Ar([sr,Et(kr(or),jt(or))],Vr=>Vr(xn)).fold(()=>Promise.resolve(xn),Vr=>new Promise(Qr=>{((Yr,Ma,ii)=>{const Is=Yr.selection.getRng();Il.setEditorTimeout(Yr,()=>{Yr.windowManager.confirm(Ma,ol=>{Yr.selection.setRng(Is),(Yr=>{Qr(Yr?Vr.preprocess(xn):xn)})(ol)})})})(or,Vr.message)}))).then(or=>{st(It,kn,or)}),Ye.close()}),ke)}).then(Ae=>{ke.windowManager.open(Ae)})};var zi=tinymce.util.Tools.resolve("tinymce.util.VK");const Dl=(ke,Re)=>{if(Re){const Ae=_t(Re);if(/^#/.test(Ae)){const qe=ke.dom.select(Ae);qe.length&&ke.selection.scrollIntoView(qe[0],!0)}else(qe=>{const It=document.createElement("a");It.target="_blank",It.href=qe,It.rel="noreferrer noopener";const ft=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});var Ye,xt;document.dispatchEvent(ft),Ye=It,xt=ft,document.body.appendChild(Ye),Ye.dispatchEvent(xt),document.body.removeChild(Ye)})(Re.href)}},As=(ke,Re)=>{const Ae=Ft(ke.dom.getParents(Re));return et(1===Ae.length,Ae[0])},ks=ke=>ke.selection.isCollapsed()||(Re=>{const Ae=Re.selection.getRng(),qe=Ae.startContainer;return Sa(qe)&&Ae.startContainer===Ae.endContainer&&1===Re.dom.select("img",qe).length})(ke)?As(ke,ke.selection.getStart()):(Re=>{const Ae=dt(Re.selection.getRng());return et(Ae.length>0,Ae[0]).or(As(Re,Re.selection.getNode()))})(ke),Vi=ke=>()=>{ke.execCommand("mceLink",!1,{dialog:!0})},Fi=(ke,Re)=>(ke.on("NodeChange",Re),()=>ke.off("NodeChange",Re)),rl=ke=>Re=>{const Ae=()=>{Re.setActive(!ke.mode.isReadOnly()&&bt(ke,ke.selection.getNode())),Re.setEnabled(ke.selection.isEditable())};return Ae(),Fi(ke,Ae)},Nl=ke=>Re=>{const Ae=()=>{Re.setEnabled(ke.selection.isEditable())};return Ae(),Fi(ke,Ae)},ia=ke=>Re=>{const Ae=ke.dom.getParents(ke.selection.getStart()),qe=It=>{var Ye;Re.setEnabled((Gr(It)||(Ye=ke.selection.getRng(),dt(Ye).length>0))&&ke.selection.isEditable())};return qe(Ae),Fi(ke,It=>qe(It.parents))};qt.add("link",ke=>{var Re;(Re=>{const Ae=Re.options.register;Ae("link_assume_external_targets",{processor:qe=>{const It=oi(qe)||qn(qe);return It?!0===qe?{value:1,valid:It}:"http"===qe||"https"===qe?{value:qe,valid:It}:{value:0,valid:It}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Ae("link_context_toolbar",{processor:"boolean",default:!1}),Ae("link_list",{processor:qe=>oi(qe)||Sn(qe)||Tn(qe,gn)}),Ae("link_default_target",{processor:"string"}),Ae("link_default_protocol",{processor:"string",default:"https"}),Ae("link_target_list",{processor:qe=>qn(qe)||Tn(qe,gn),default:!0}),Ae("link_rel_list",{processor:"object[]",default:[]}),Ae("link_class_list",{processor:"object[]",default:[]}),Ae("link_title",{processor:"boolean",default:!0}),Ae("allow_unsafe_link_target",{processor:"boolean",default:!1}),Ae("link_quicklink",{processor:"boolean",default:!1})})(ke),(Re=ke).addCommand("mceLink",(Ae,qe)=>{!0!==qe?.dialog&&$t(Re)?Re.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):lo(Re)}),(ke=>{const Re=(Ae=>{const qe=(()=>{const ft=(Ye=>{const xt=(Ln=>{let kn=Ln;return{get:()=>kn,set:or=>{kn=or}}})(Ot.none()),rn=()=>xt.get().each(Ye);return{clear:()=>{rn(),xt.set(Ot.none())},isSet:()=>xt.get().isSome(),get:()=>xt.get(),set:Ln=>{rn(),xt.set(Ot.some(Ln))}}})(Fn);return{...ft,on:Ye=>ft.get().each(Ye)}})(),It=()=>qe.get().or(ks(Ae));return Ae.on("contextmenu",ft=>{As(Ae,ft.target).each(qe.set)}),Ae.on("SelectionChange",()=>{qe.isSet()||ks(Ae).each(qe.set)}),Ae.on("click",ft=>{qe.clear();const Ye=Ft(Ae.dom.getParents(ft.target));1===Ye.length&&zi.metaKeyPressed(ft)&&(ft.preventDefault(),Dl(Ae,Ye[0]))}),Ae.on("keydown",ft=>{var Ye;qe.clear(),!ft.isDefaultPrevented()&&13===ft.keyCode&&!0===(Ye=ft).altKey&&!1===Ye.shiftKey&&!1===Ye.ctrlKey&&!1===Ye.metaKey&&It().each(Ye=>{ft.preventDefault(),Dl(Ae,Ye)})}),{gotoSelectedLink:()=>It().each(ft=>Dl(Ae,ft))}})(ke);var Ae,qe;qe=Re,(Ae=ke).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Vi(Ae),onSetup:rl(Ae)}),Ae.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:qe.gotoSelectedLink,onSetup:ia(Ae)}),Ae.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>lt(Ae),onSetup:ia(Ae)}),((Ae,qe)=>{Ae.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:qe.gotoSelectedLink,onSetup:ia(Ae)}),Ae.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Vi(Ae),onSetup:Nl(Ae)}),Ae.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>lt(Ae),onSetup:ia(Ae)})})(ke,Re),(Ae=>{Ae.ui.registry.addContextMenu("link",{update:qe=>Ae.dom.isEditable(qe)?Gr(Ae.dom.getParents(qe,"a"))?"link unlink openlink":"link":""})})(ke),((Ae,qe)=>{const It=ft=>{const Ye=Ae.selection.getNode();return ft.setEnabled(bt(Ae,Ye)),Fn};Ae.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:rl(Ae)},label:"Link",predicate:ft=>qo(Ae)&&bt(Ae,ft),initValue:()=>Se(Ae).fold(()=>"",_t),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:ft=>{const Ye=Ae.selection.getNode();return ft.setActive(bt(Ae,Ye)),rl(Ae)(ft)},onAction:ft=>{const Ye=ft.getValue(),xt=(rn=>{const Ln=Se(Ae),kn=ao(Ae);if(Ln.isNone()&&kn){const or=no(Ae.selection,Ln);return et(0===or.length,rn)}return Ot.none()})(Ye);st(Ae,{href:Ye,attach:Fn},{href:Ye,text:xt,title:Ot.none(),rel:Ot.none(),target:Ot.from(Lr(Ae)),class:Ot.none()}),Ae.selection.collapse(!1),ft.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:It,onAction:ft=>{lt(Ae),ft.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:It,onAction:ft=>{qe.gotoSelectedLink(),ft.hide()}}]})})(ke,Re)})(ke),(Re=>{Re.addShortcut("Meta+K","",()=>{Re.execCommand("mceLink")})})(ke)})}(),function(){"use strict";var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const yr=q=>Q=>(ee=>{const ae=typeof ee;return null===ee?"null":"object"===ae&&Array.isArray(ee)?"array":"object"===ae&&(be=Te=ee,(Ue=String).prototype.isPrototypeOf(be)||(null===(it=Te.constructor)||void 0===it?void 0:it.name)===Ue.name)?"string":ae;var be,Te,Ue,it})(Q)===q,Ce=q=>Q=>typeof Q===q,oi=yr("string"),gn=yr("array"),Bi=Ce("boolean"),an=q=>void 0===q,qn=q=>!(null==q),Cn=Ce("function"),Sn=Ce("number"),Tn=()=>{},Fn=q=>()=>q,wt=q=>q,Ot=(q,Q)=>q===Q;function Jn(q,...Q){return(...ee)=>{const ae=Q.concat(ee);return q.apply(null,ae)}}const yn=q=>{q()},Hn=Fn(!1),Ar=Fn(!0);class ct{constructor(Q,ee){this.tag=Q,this.value=ee}static some(Q){return new ct(!0,Q)}static none(){return ct.singletonNone}fold(Q,ee){return this.tag?ee(this.value):Q()}isSome(){return this.tag}isNone(){return!this.tag}map(Q){return this.tag?ct.some(Q(this.value)):ct.none()}bind(Q){return this.tag?Q(this.value):ct.none()}exists(Q){return this.tag&&Q(this.value)}forall(Q){return!this.tag||Q(this.value)}filter(Q){return!this.tag||Q(this.value)?this:ct.none()}getOr(Q){return this.tag?this.value:Q}or(Q){return this.tag?this:Q}getOrThunk(Q){return this.tag?this.value:Q()}orThunk(Q){return this.tag?this:Q()}getOrDie(Q){if(this.tag)return this.value;throw new Error(Q??"Called getOrDie on None")}static from(Q){return qn(Q)?ct.some(Q):ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Q){this.tag&&Q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ct.singletonNone=new ct(!1);const rr=Object.keys,et=Object.hasOwnProperty,tn=(q,Q)=>{const ee=rr(q);for(let ae=0,be=ee.length;ae<be;ae++){const Te=ee[ae];Q(q[Te],Te)}},kr=(q,Q)=>{const ee={};var ae,Te,Ue,it;return Te=Q,ae=ee,Ue=(be,Te)=>{ae[Te]=be},it=Tn,tn(q,($e,ot)=>{(Te($e,ot)?Ue:it)($e,ot)}),ee},qo=q=>rr(q).length,Qt=(q,Q)=>Lr(q,Q)?ct.from(q[Q]):ct.none(),Lr=(q,Q)=>et.call(q,Q),jt=(q,Q)=>Lr(q,Q)&&null!=q[Q],Ve=Array.prototype.indexOf,Ir=Array.prototype.push,De=(q,Q)=>Ve.call(q,Q)>-1,Pe=(q,Q)=>{for(let ee=0,ae=q.length;ee<ae;ee++)if(Q(q[ee],ee))return!0;return!1},oa=(q,Q)=>{const ee=[];for(let ae=0;ae<q;ae++)ee.push(Q(ae));return ee},$t=(q,Q)=>{const ee=q.length,ae=new Array(ee);for(let be=0;be<ee;be++)ae[be]=Q(q[be],be);return ae},Kr=(q,Q)=>{for(let ee=0,ae=q.length;ee<ae;ee++)Q(q[ee],ee)},ur=(q,Q)=>{const ee=[];for(let ae=0,be=q.length;ae<be;ae++){const Te=q[ae];Q(Te,ae)&&ee.push(Te)}return ee},Mn=(q,Q,ee)=>(Kr(q,(ae,be)=>{ee=Q(ee,ae,be)}),ee),Z=(q,Q)=>((ee,ae,be)=>{for(let Te=0,Ue=ee.length;Te<Ue;Te++){const it=ee[Te];if(ae(it,Te))return ct.some(it);if(be(it,Te))break}return ct.none()})(q,Q,Hn),j=(q,Q)=>(ee=>{const ae=[];for(let be=0,Te=ee.length;be<Te;++be){if(!gn(ee[be]))throw new Error("Arr.flatten item "+be+" was not an array, input: "+ee);Ir.apply(ae,ee[be])}return ae})($t(q,Q)),Jr=(q,Q)=>{for(let ee=0,ae=q.length;ee<ae;++ee)if(!0!==Q(q[ee],ee))return!1;return!0},Xn=(q,Q)=>Q>=0&&Q<q.length?ct.some(q[Q]):ct.none(),Sa=(q,Q)=>{for(let ee=0;ee<q.length;ee++){const ae=Q(q[ee],ee);if(ae.isSome())return ae}return ct.none()},vn=q=>{if(null==q)throw new Error("Node cannot be null or undefined");return{dom:q}},Fe={fromHtml:(q,Q)=>{const ee=(Q||document).createElement("div");if(ee.innerHTML=q,!ee.hasChildNodes()||ee.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,q),new Error(ae)}return vn(ee.childNodes[0])},fromTag:(q,Q)=>{const ee=(Q||document).createElement(q);return vn(ee)},fromText:(q,Q)=>{const ee=(Q||document).createTextNode(q);return vn(ee)},fromDom:vn,fromPoint:(q,Q,ee)=>ct.from(q.dom.elementFromPoint(Q,ee)).map(vn)},_t=(q,Q)=>{const ee=q.dom;if(1!==ee.nodeType)return!1;{const ae=ee;if(void 0!==ae.matches)return ae.matches(Q);if(void 0!==ae.msMatchesSelector)return ae.msMatchesSelector(Q);if(void 0!==ae.webkitMatchesSelector)return ae.webkitMatchesSelector(Q);if(void 0!==ae.mozMatchesSelector)return ae.mozMatchesSelector(Q);throw new Error("Browser lacks native selectors")}},Ee=q=>1!==q.nodeType&&9!==q.nodeType&&11!==q.nodeType||0===q.childElementCount,Se=(q,Q)=>q.dom===Q.dom,bt=_t;typeof window<"u"||Function("return this;")();const no=q=>q.dom.nodeName.toLowerCase(),dt=q=>q.dom.nodeType,Ft=q=>Q=>dt(Q)===q,Gr=Ft(1),ao=Ft(3),Sr=Ft(9),rt=Ft(11),Be=q=>Q=>Gr(Q)&&no(Q)===q,st=q=>Sr(q)?q:Fe.fromDom(q.dom.ownerDocument),lt=q=>ct.from(q.dom.parentNode).map(Fe.fromDom),ht=q=>ct.from(q.dom.nextSibling).map(Fe.fromDom),We=q=>$t(q.dom.childNodes,Fe.fromDom),An=Cn(Element.prototype.attachShadow)&&Cn(Node.prototype.getRootNode)?q=>Fe.fromDom(q.dom.getRootNode()):st,Wn=q=>Fe.fromDom(q.dom.host),pr=q=>{const Q=ao(q)?q.dom.parentNode:q.dom;if(null==Q||null===Q.ownerDocument)return!1;const ee=Q.ownerDocument;return(Te=>{const Ue=An(Te);return rt(it=Ue)&&qn(it.dom.host)?ct.some(Ue):ct.none();var it})(Fe.fromDom(Q)).fold(()=>ee.body.contains(Q),(ae=pr,be=Wn,Te=>ae(be(Te))));var ae,be};var bn=(q,Q,ee,ae,be)=>q(ee,ae)?ct.some(ee):Cn(be)&&be(ee)?ct.none():Q(ee,ae,be);const Br=(q,Q,ee)=>{let ae=q.dom;const be=Cn(ee)?ee:Hn;for(;ae.parentNode;){ae=ae.parentNode;const Te=Fe.fromDom(ae);if(Q(Te))return ct.some(Te);if(be(Te))break}return ct.none()},br=(q,Q,ee)=>Br(q,ae=>_t(ae,Q),ee),bi=(q,Q)=>((ee,ae)=>{const be=void 0===ae?document:ae.dom;return Ee(be)?ct.none():ct.from(be.querySelector(ee)).map(Fe.fromDom)})(Q,q),so=(q,Q,ee)=>bn((ae,be)=>_t(ae,be),br,q,Q,ee),Il=(q,Q=!1)=>{return pr(q)?q.dom.isContentEditable:(ee=q,so(ee,"[contenteditable]")).fold(Fn(Q),ae=>"true"===sr(ae));var ee},sr=q=>q.dom.contentEditable,Et=q=>Q=>Se(Q,Fe.fromDom(q.getBody())),Vo=q=>/^\d+(\.\d+)?$/.test(q)?q+"px":q,Ca=q=>Fe.fromDom(q.selection.getStart()),Iu=(q,Q)=>{let ee=[];return Kr(We(q),ae=>{Q(ae)&&(ee=ee.concat([ae])),ee=ee.concat(Iu(ae,Q))}),ee},Lt=(q,Q)=>ur(We(q),be=>_t(be,Q)),zr=(q,Q)=>((ee,ae)=>{const be=void 0===ae?document:ae.dom;return Ee(be)?[]:$t(be.querySelectorAll(ee),Fe.fromDom)})(Q,q),Ts=(q,Q,ee)=>{if(!(oi(ee)||Bi(ee)||Sn(ee)))throw console.error("Invalid call to Attribute.set. Key ",Q,":: Value ",ee,":: Element ",q),new Error("Attribute value was not simple");q.setAttribute(Q,ee+"")},cr=(q,Q)=>{const ee=q.dom.getAttribute(Q);return null===ee?void 0:ee},Zt=(q,Q)=>ct.from(cr(q,Q)),lo=(q,Q)=>{q.dom.removeAttribute(Q)},zi=(q,Q,ee=Ot)=>q.exists(ae=>ee(ae,Q)),Dl=(q,Q,ee)=>q.isSome()&&Q.isSome()?ct.some(ee(q.getOrDie(),Q.getOrDie())):ct.none(),As=(q,Q)=>{return ee=q,""===(ae=Q)||ee.length>=ae.length&&ee.substr(0,0+ae.length)===ae;var ee,ae},ks=(Vi=/^\s+|\s+$/g,q=>q.replace(Vi,""));var Vi;const Fi=q=>q.length>0,rl=(q,Q=10)=>{const ee=parseInt(q,Q);return isNaN(ee)?ct.none():ct.some(ee)},Nl=q=>void 0!==q.style&&Cn(q.style.getPropertyValue),ia=(q,Q)=>{const ee=q.dom,ae=window.getComputedStyle(ee).getPropertyValue(Q);return""!==ae||pr(q)?ae:$o(ee,Q)},$o=(q,Q)=>Nl(q)?q.style.getPropertyValue(Q):"",ke=(q,Q)=>{const ae=$o(q.dom,Q);return ct.from(ae).filter(be=>be.length>0)},Re=(q,Q,ee=0)=>Zt(q,Q).map(ae=>parseInt(ae,10)).getOr(ee),Ae=(q,Q)=>qe(q,Q,Ar),qe=(q,Q,ee)=>j(We(q),ae=>_t(ae,Q)?ee(ae)?[ae]:[]:qe(ae,Q,ee)),It=["tfoot","thead","tbody","colgroup"],ft=(q,Q,ee)=>({element:q,rowspan:Q,colspan:ee}),Ye=(q,Q,ee)=>({element:q,cells:Q,section:ee}),xt=(q,Q)=>so(q,"table",Q),rn=q=>Ae(q,"tr"),Ln=q=>xt(q).fold(Fn([]),Q=>Lt(Q,"colgroup")),kn=q=>lt(q).map(Q=>{const ee=no(Q);return De(It,ee)?ee:"tbody"}).getOr("tbody"),or=q=>Zt(q,"data-snooker-locked-cols").bind(Q=>ct.from(Q.match(/\d+/g))).map(Q=>((ee,ae)=>{const be={};for(let Te=0,Ue=ee.length;Te<Ue;Te++){const it=ee[Te];be[String(it)]=ae(it,Te)}return be})(Q,Ar)),xn=(q,Q)=>q+","+Q,Qr=q=>(q=>{const Q={},ee=[];var ae;const be=(ae=q,Xn(ae,0)).map(nn=>nn.element).bind(xt).bind(or).getOr({});let Te=0,Ue=0,it=0;const{pass:$e,fail:ot}=((nn,fn)=>{const Bn=[],Gt=[];for(let Nn=0,Un=nn.length;Nn<Un;Nn++){const jn=nn[Nn];(un=jn,"colgroup"===un.section?Bn:Gt).push(jn)}var un;return{pass:Bn,fail:Gt}})(q);Kr(ot,nn=>{const fn=[];Kr(nn.cells,Bn=>{let Gt=0;for(;void 0!==Q[xn(it,Gt)];)Gt++;const un=jt(be,Gt.toString()),Nn={element:Bn.element,rowspan:Bn.rowspan,colspan:Bn.colspan,row:it,column:Gt,isLocked:un};for(let Un=0;Un<Bn.colspan;Un++)for(let jn=0;jn<Bn.rowspan;jn++){const zn=Gt+Un,eo=xn(it+jn,zn);Q[eo]=Nn,Ue=Math.max(Ue,zn+1)}fn.push(Nn)}),Te++,ee.push(Ye(nn.element,fn,nn.section)),it++});const{columns:Nt,colgroups:Rt}=(nn=$e,Xn(nn,nn.length-1)).map(nn=>{const fn=(Gt=>{const un={};let Nn=0;return Kr(Gt.cells,Un=>{const jn=Un.colspan;oa(jn,zn=>{const eo=Nn+zn;un[eo]={element:Un.element,colspan:jn,column:eo}}),Nn+=jn}),un})(nn);return{colgroups:[(Gt=nn.element,un=((Gt,un)=>{const Nn=[];return tn(Gt,(Un,jn)=>{Nn.push(un(Un,jn))}),Nn})(fn,wt),{element:Gt,columns:un})],columns:fn};var Gt,un}).getOrThunk(()=>({colgroups:[],columns:{}}));var nn;return{grid:((nn,fn)=>({rows:nn,columns:fn}))(Te,Ue),access:Q,all:ee,columns:Nt,colgroups:Rt}})((ee=>{const ae=rn(ee);return be=[...Ln(ee),...ae],Te=kn,$t(be,Ue=>{if("colgroup"===no(Ue)){const it=$t(_t($e=Ue,"colgroup")?Lt($e,"col"):j(Ln($e),ot=>Lt(ot,"col")),$e=>{const ot=Re($e,"span",1);return ft($e,1,ot)});return Ye(Ue,it,"colgroup")}var $e;{const it=$t(($e=>Ae($e,"th,td"))(Ue),$e=>{const ot=Re($e,"rowspan",1),Nt=Re($e,"colspan",1);return ft($e,ot,Nt)});return Ye(Ue,it,Te(Ue))}});var be,Te})(q)),Yr=(q,Q,ee)=>ct.from(q.access[xn(Q,ee)]),Ma=(q,Q,ee)=>{const ae=((be,Te)=>{const Ue=j(be.all,it=>it.cells);return ur(Ue,be=>ee(Q,be.element))})(q);return ae.length>0?ct.some(ae[0]):ct.none()},ii=(q,Q)=>ct.from(q.columns[Q]);var Is=tinymce.util.Tools.resolve("tinymce.util.Tools");const ol=(q,Q,ee)=>{const ae=q.select("td,th",Q);let be;for(let Te=0;Te<ae.length;Te++){const Ue=q.getStyle(ae[Te],ee);if(an(be)&&(be=Ue),be!==Ue)return""}return be},Du=(q,Q,ee)=>{Is.each("left center right".split(" "),ae=>{ae!==ee&&q.formatter.remove("align"+ae,{},Q)}),ee&&q.formatter.apply("align"+ee,{},Q)},Mp=(q,Q,ee)=>{q.dispatch("TableModified",{...ee,table:Q})},Co=(q,Q,ee)=>{return be=ee,(Te=>{const Ue=parseFloat(Te);return isNaN(Ue)?ct.none():ct.some(Ue)})(ia(q,Q)).getOr(be);var be};var Tp=tinymce.util.Tools.resolve("tinymce.Env");const wv=oa(5,q=>{const Q=`${q+1}px`;return{title:Q,value:Q}}),Ap=$t(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],q=>({title:q,value:q.toLowerCase()})),kp=q=>{var Q;const ee=q.dom,ae=null!==(Q=ee.getParent(q.selection.getStart(),ee.isBlock))&&void 0!==Q?Q:q.getBody();return(q=>((Q,ee)=>{const ae=Q.dom;return(ae.getBoundingClientRect().width||ae.offsetWidth)-Co(Te=Q,"padding-left",0)-Co(Te,"padding-right",0)-Co(Te,"border-left-width",0)-Co(Te,"border-right-width",0);var Te})(q))(Fe.fromDom(ae))+"px"},Xr=q=>Q=>Q.options.get(q),jd=Xr("table_sizing_mode"),Qa=Xr("table_border_widths"),Yd=Xr("table_border_styles"),Ip=Xr("table_cell_advtab"),Xd=Xr("table_row_advtab"),il=Xr("table_advtab"),Sv=Xr("table_appearance_options"),qd=Xr("table_grid"),Ds=Xr("table_style_by_css"),Ta=Xr("table_cell_class_list"),es=Xr("table_row_class_list"),Eo=Xr("table_class_list"),Dp=Xr("table_toolbar"),Ns=Xr("table_background_color_map"),Aa=Xr("table_border_color_map"),ts=q=>"fixed"===jd(q),pn=q=>"responsive"===jd(q),Zd=q=>{const Q=q.options,ee=Q.get("table_default_styles");return Q.isSet("table_default_styles")?ee:(be=ee,pn(ae=q)||!Ds(ae)?be:ts(ae)?{...be,width:kp(ae)}:{...be,width:"100%"});var ae,be},On=q=>{const Q=q.options,ee=Q.get("table_default_attributes");return Q.isSet("table_default_attributes")?ee:(be=ee,pn(ae=q)||Ds(ae)?be:ts(ae)?{...be,width:kp(ae)}:{...be,width:"100%"});var ae,be},Nu=(q,Q)=>Q.column>=q.startCol&&Q.column+Q.colspan-1<=q.finishCol&&Q.row>=q.startRow&&Q.row+Q.rowspan-1<=q.finishRow,Ll=Qr,Ke=(q,Q)=>{lt(q).each(ee=>{ee.dom.insertBefore(Q.dom,q.dom)})},ns=(q,Q)=>{ht(q).fold(()=>{lt(q).each(ee=>{Es(ee,Q)})},ee=>{Ke(ee,Q)})},Es=(q,Q)=>{q.dom.appendChild(Q.dom)},Kt=(q,Q)=>{Kr(Q,(ee,ae)=>{ns(0===ae?q:Q[ae-1],ee)})},Rl=q=>{const Q=q.dom;null!==Q.parentNode&&Q.parentNode.removeChild(Q)},Cv=((q,Q)=>{const ee=ae=>q(ae)?ct.from(ae.dom.nodeValue):ct.none();return{get:ae=>{if(!q(ae))throw new Error("Can only get text value of a text node");return ee(ae).getOr("")},getOption:ee,set:(ae,be)=>{if(!q(ae))throw new Error("Can only set raw text value of a text node");ae.dom.nodeValue=be}}})(ao);var Mv=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const e_=(q,Q,ee)=>Q.bind(ae=>ee.filter(Jn(q.eq,ae))),Pn={up:Fn({selector:br,closest:so,predicate:Br,all:(q,Q)=>{const ee=Cn(Q)?Q:Hn;let ae=q.dom;const be=[];for(;null!=ae.parentNode;){const Te=ae.parentNode,Ue=Fe.fromDom(Te);if(be.push(Ue),!0===ee(Ue))break;ae=Te}return be}}),down:Fn({selector:zr,predicate:Iu}),styles:Fn({get:ia,getRaw:ke,set:(q,Q,ee)=>{((ae,be,Te)=>{if(!oi(Te))throw console.error("Invalid call to CSS.set. Property ",be,":: Value ",Te,":: Element ",ae),new Error("CSS value must be a string: "+Te);Nl(ae)&&ae.style.setProperty(be,Te)})(q.dom,Q,ee)},remove:(q,Q)=>{var ee,ae;ae=Q,Nl(ee=q.dom)&&ee.style.removeProperty(ae),zi(Zt(q,"style").map(ks),"")&&lo(q,"style")}}),attrs:Fn({get:cr,set:(q,Q,ee)=>{Ts(q.dom,Q,ee)},remove:lo,copyTo:(q,Q)=>{((ee,ae)=>{const be=ee.dom;tn(ae,(Te,Ue)=>{Ts(be,Ue,Te)})})(Q,Mn(q.dom.attributes,(ee,ae)=>(ee[ae.name]=ae.value,ee),{}))}}),insert:Fn({before:Ke,after:ns,afterAll:Kt,append:Es,appendAll:(q,Q)=>{Kr(Q,ee=>{Es(q,ee)})},prepend:(q,Q)=>{var ee;(ee=q,ct.from(ee.dom.childNodes[0]).map(Fe.fromDom)).fold(()=>{Es(q,Q)},ee=>{q.dom.insertBefore(Q.dom,ee.dom)})},wrap:(q,Q)=>{Ke(q,Q),Es(Q,q)}}),remove:Fn({unwrap:q=>{const Q=We(q);Q.length>0&&Kt(q,Q),Rl(q)},remove:Rl}),create:Fn({nu:Fe.fromTag,clone:q=>Fe.fromDom(q.dom.cloneNode(!1)),text:Fe.fromText}),query:Fn({comparePosition:(q,Q)=>q.dom.compareDocumentPosition(Q.dom),prevSibling:q=>ct.from(q.dom.previousSibling).map(Fe.fromDom),nextSibling:ht}),property:Fn({children:We,name:no,parent:lt,document:q=>st(q).dom,isText:ao,isComment:q=>8===dt(q)||"#comment"===no(q),isElement:Gr,isSpecial:q=>{const Q=no(q);return De(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Q)},getLanguage:q=>Gr(q)?Zt(q,"lang"):ct.none(),getText:q=>Cv.get(q),setText:(q,Q)=>Cv.set(q,Q),isBoundary:q=>!!Gr(q)&&("body"===no(q)||De(Mv,no(q))),isEmptyTag:q=>!!Gr(q)&&De(["br","img","hr","input"],no(q)),isNonEditable:q=>Gr(q)&&"false"===cr(q,"contenteditable")}),eq:Se,is:bt},zg=q=>br(q,"table"),Np=(q,Q,ee)=>bi(q,Q).bind(ae=>bi(q,ee).bind(be=>{return(Te=zg,Ue=[ae,be],it=Pn,ot=Ue,ot.length>0?(Rt=(it,$e)=>Te($e),((q,Q,ee,ae)=>{const be=Q(q,ee);return Te=(it,$e)=>{const ot=Q(q,$e);return e_(q,it,ot)},Ue=be,((it,$e)=>{for(let ot=it.length-1;ot>=0;ot--)$e(it[ot])})(ae,(it,$e)=>{Ue=Te(Ue,it)}),Ue;var Te,Ue})(it,Rt,(Zn=ot)[0],Zn.slice(1))):ct.none()).map(it=>({first:ae,last:be,table:it}));var it,ot,Rt,Zn,Te,Ue})),Eu=q=>$t(q,Fe.fromDom),Ko="data-mce-selected",ai="data-mce-first-selected",Ep="data-mce-last-selected",Kd={selected:Ko,selectedSelector:"td["+Ko+"],th["+Ko+"]",firstSelected:ai,firstSelectedSelector:"td["+ai+"],th["+ai+"]",lastSelected:Ep,lastSelectedSelector:"td["+Ep+"],th["+Ep+"]"},Lu=q=>(Q,ee)=>{const ae=no(Q),be="col"===ae||"colgroup"===ae?xt(Te=Q).bind(Ue=>((ot,Nt)=>{const Rt=zr(ot,Nt);return Rt.length>0?ct.some(Rt):ct.none()})(Ue,Kd.firstSelectedSelector)).fold(Fn(Te),Ue=>Ue[0]):Q;var Te;return so(be,q,ee)},Vg=Lu("th,td,caption"),uo=Lu("th,td"),ka=q=>Eu(q.model.table.getSelectedCells()),Ia=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Jd=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,go=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Ru=q=>{return(Q=q,As(Q,"#")?(ee=Q,ee.substring(1)):Q).toUpperCase();var ee,Q},Ol=q=>{const Q=q.toString(16);return(1===Q.length?"0"+Q:Q).toUpperCase()},Gi=q=>{return Q=Ol(q.red)+Ol(q.green)+Ol(q.blue),{value:Ru(Q)};var Q},Fg=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Gg=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Lp=(q,Q,ee,ae)=>({red:q,green:Q,blue:ee,alpha:ae}),Ls=(q,Q,ee,ae)=>{const be=parseInt(q,10),Te=parseInt(Q,10),Ue=parseInt(ee,10),it=parseFloat(ae);return Lp(be,Te,Ue,it)},Da=q=>{const Q=Fg.exec(q);if(null!==Q)return ct.some(Ls(Q[1],Q[2],Q[3],"1"));const ee=Gg.exec(q);return null!==ee?ct.some(Ls(ee[1],ee[2],ee[3],ee[4])):ct.none()},Fo=q=>{let Q=q;return{get:()=>Q,set:ee=>{Q=ee}}},Pl=(q,Q,ee)=>ae=>{const be=(it=>{const $e=Fo(ct.none()),ot=()=>$e.get().each(it);return{clear:()=>{ot(),$e.set(ct.none())},isSet:()=>$e.get().isSome(),get:()=>$e.get(),set:Nt=>{ot(),$e.set(ct.some(Nt))}}})(it=>it.unbind()),Te=!Fi(ee),Ue=()=>{const it=ka(q),$e=ot=>q.formatter.match(Q,{value:ee},ot.dom,Te);Te?(ae.setActive(!Pe(it,$e)),be.set(q.formatter.formatChanged(Q,ot=>ae.setActive(!ot),!0))):(ae.setActive(Jr(it,$e)),be.set(q.formatter.formatChanged(Q,ae.setActive,!1,{value:ee})))};return q.initialized?Ue():q.on("init",Ue),be.clear},Hi=q=>jt(q,"menu"),Ou=q=>$t(q,Q=>{const ee=Q.text||Q.title||"";return Hi(Q)?{text:ee,items:Ou(Q.menu)}:{text:ee,value:Q.value}}),er=q=>q.length?ct.some(Ou([{text:"Select...",value:"mce-no-match"},...q])):ct.none(),aa=(q,Q,ee,ae)=>$t(Q,be=>{const Te=be.text||be.title;return Hi(be)?{type:"nestedmenuitem",text:Te,getSubmenuItems:()=>aa(q,be.menu,ee,ae)}:{text:Te,type:"togglemenuitem",onAction:()=>ae(be.value),onSetup:Pl(q,ee,be.value)}}),ge=(q,Q)=>ee=>{q.execCommand("mceTableApplyCellStyle",!1,{[Q]:ee})},Rc=q=>j(q,Q=>Hi(Q)?[{...Q,menu:Rc(Q.menu)}]:Fi(Q.value)?[Q]:[]),sa=(q,Q,ee,ae)=>be=>be(aa(q,Q,ee,ae)),xi=(q,Q,ee)=>{const ae=$t(Q,be=>{return{text:be.title,value:"#"+(Ue=be.value,(Te=Ue,it=Te,Jd.test(it)||go.test(it)?ct.some({value:Ru(Te)}):ct.none()).orThunk(()=>Da(Ue).map(Gi)).getOrThunk(()=>{const it=document.createElement("canvas");it.height=1,it.width=1;const $e=it.getContext("2d");$e.clearRect(0,0,it.width,it.height),$e.fillStyle="#FFFFFF",$e.fillStyle=Ue,$e.fillRect(0,0,1,1);const ot=$e.getImageData(0,0,1,1).data;return Gi(Lp(ot[0],ot[1],ot[2],ot[3]))})).value,type:"choiceitem"};var it,Te,Ue});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:ae.length>0?ae:void 0,allowCustomColors:!1},onAction:be=>{q.execCommand("mceTableApplyCellStyle",!1,{[ee]:"remove"===be.value?"":be.value})}}]},Hg=q=>()=>{const Q="header"===q.queryCommandValue("mceTableRowType")?"body":"header";q.execCommand("mceTableRowType",!1,{type:Q})},_n=q=>()=>{const Q="th"===q.queryCommandValue("mceTableColType")?"td":"th";q.execCommand("mceTableColType",!1,{type:Q})},Go=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Ia}],Rp=q=>{return Go.concat((Q=q,er(Ta(Q)).map(ee=>({name:"class",type:"listbox",label:"Class",items:ee}))).toArray());var Q},_i=(q,Q)=>{const ee=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Ou(Yd(q)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===Q?[{name:"borderwidth",type:"input",label:"Border width"}].concat(ee):ee}},Bl=(q,Q)=>{const ee=q.dom;return{setAttrib:(ae,be)=>{ee.setAttrib(Q,ae,be)},setStyle:(ae,be)=>{ee.setStyle(Q,ae,be)},setFormat:(ae,be)=>{""===be?q.formatter.remove(ae,{value:null},Q,!0):q.formatter.apply(ae,{value:be},Q)}}},rs=Be("th"),Op=(q,Q)=>q&&Q?"sectionCells":q?"section":"cells",zl=(q,Q)=>Sa(q.all,ee=>Z(ee.cells,ae=>Se(Q,ae.element))),Bp=(q,Q)=>((q,Q,ee)=>{const ae=(Te=>{const Ue=[],it=$e=>{Ue.push($e)};for(let $e=0;$e<Te.length;$e++)Te[$e].each(it);return Ue})($t(Q.selection,Te=>{return(Ue=Te,(($e,ot,Nt=Hn)=>Nt(ot)?ct.none():De($e,no(ot))?ct.some(ot):br(ot,$e.join(","),Rt=>_t(Rt,"table")||Nt(Rt)))(["td","th"],Ue,void 0)).bind($e=>zl(q,$e)).filter(ee);var Ue}));return ae.length>0?ct.some(ae):ct.none()})(q,Q,Ar),Vl=(q,Q)=>Jr(Q,ee=>zl(q,ee).exists(Te=>!Te.isLocked)),Lo=(q,Q)=>{return(ae=Q,ae.mergable).filter(ee=>Vl(q,ee.cells));var ae},li=(q,Q)=>{return(ae=Q,ae.unmergable).filter(ee=>Vl(q,ee));var ae},Pu=((q=>{if(!gn(q))throw new Error("cases must be an array");if(0===q.length)throw new Error("there must be at least one case");const Q=[],ee={};Kr(q,(ae,be)=>{const Te=rr(ae);if(1!==Te.length)throw new Error("one and only one name per case");const Ue=Te[0],it=ae[Ue];if(void 0!==ee[Ue])throw new Error("duplicate key detected:"+Ue);if("cata"===Ue)throw new Error("cannot have a case named cata (sorry)");if(!gn(it))throw new Error("case arguments must be an array");Q.push(Ue),ee[Ue]=(...$e)=>{const ot=$e.length;if(ot!==it.length)throw new Error("Wrong number of arguments to case "+Ue+". Expected "+it.length+" ("+it+"), got "+ot);return{fold:(...Nt)=>{if(Nt.length!==q.length)throw new Error("Wrong number of arguments to fold. Expected "+q.length+", got "+Nt.length);return Nt[be].apply(null,$e)},match:Nt=>{const Rt=rr(Nt);if(Q.length!==Rt.length)throw new Error("Wrong number of arguments to match. Expected: "+Q.join(",")+"\nActual: "+Rt.join(","));if(!Jr(Q,Zn=>De(Rt,Zn)))throw new Error("Not all branches were specified when using match. Specified: "+Rt.join(", ")+"\nRequired: "+Q.join(", "));return Nt[Ue].apply(null,$e)},log:Nt=>{console.log(Nt,{constructors:Q,constructor:Ue,params:$e})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(q,Q)=>{const ee=Qr(q);return Bp(ee,Q).bind(ae=>{const be=ae[ae.length-1];return(q=>{const Q=$t(q,be=>(Te=>{const Ue="thead"===Te.section,it=zi(($e=>{const ot=ur($e,Nt=>rs(Nt.element));return 0===ot.length?ct.some("td"):ot.length===$e.length?ct.some("th"):ct.none()})(Te.cells),"th");return"tfoot"===Te.section?{type:"footer"}:Ue||it?{type:"header",subType:Op(Ue,it)}:{type:"body"}})(be).type),ee=De(Q,"header"),ae=De(Q,"footer");if(ee||ae){const be=De(Q,"body");return!ee||be||ae?ee||be||!ae?ct.none():ct.some("footer"):ct.some("header")}return ct.some("body")})(ee.all.slice(ae[0].row,be.row+be.rowspan))}).getOr("")}),Fl=q=>{return As(q,"rgb")?Da(Q=q).map(Gi).map(ee=>"#"+ee.value).getOr(Q):q;var Q},os=q=>{const Q=Fe.fromDom(q);return{borderwidth:ke(Q,"border-width").getOr(""),borderstyle:ke(Q,"border-style").getOr(""),bordercolor:ke(Q,"border-color").map(Fl).getOr(""),backgroundcolor:ke(Q,"background-color").map(Fl).getOr("")}},Pc=q=>{const Q=q[0],ee=q.slice(1);return Kr(ee,ae=>{Kr(rr(Q),be=>{tn(ae,(Te,Ue)=>{const it=Q[be];""!==it&&be===Ue&&it!==Te&&(Q[be]="class"===be?"mce-no-match":"")})})}),Q},Rs=(q,Q,ee,ae)=>Z(q,be=>!an(ee.formatter.matchNode(ae,Q+be))).getOr(""),Wi=Jn(Rs,["left","center","right"],"align"),Os=Jn(Rs,["top","middle","bottom"],"valign"),zp=q=>xt(Fe.fromDom(q)).map(Q=>{const ee={selection:Eu(q.cells)};return Pu(Q,ee)}).getOr(""),Qd=(q,Q)=>{const ee=Qr(q),ae=j(ee.all,Ue=>Ue.cells),be=ur(ae,Te=>Pe(Q,Ue=>Se(Te.element,Ue)));return $t(be,Te=>({element:Te.element.dom,column:ii(ee,Te.column).map(Ue=>Ue.element.dom)}))},Bu=(q,Q,ee,ae)=>{const be=ae.getData();ae.close(),q.undoManager.transact(()=>{((Te,Ue,it,$e)=>{const ot=kr($e,(Nt,Rt)=>it[Rt]!==Nt);qo(ot)>0&&Ue.length>=1&&xt(Ue[0]).each(Nt=>{const Rt=Qd(Nt,Ue),Zn=qo(kr(ot,(fn,Bn)=>"scope"!==Bn&&"celltype"!==Bn))>0,nn=Lr(ot,"celltype");(Zn||Lr(ot,"scope"))&&((fn,Bn,Gt,un)=>{const Nn=1===Bn.length;Kr(Bn,Un=>{const jn=Un.element,zn=Nn?Ar:un,eo=Bl(fn,jn);var Qo,Ui,fr,Na;Qo=eo,Ui=Un.column.map(Qo=>Bl(fn,Qo)).getOr(eo),fr=Gt,(Na=zn)("scope")&&Qo.setAttrib("scope",fr.scope),Na("class")&&"mce-no-match"!==fr.class&&Qo.setAttrib("class",fr.class),Na("width")&&Ui.setStyle("width",Vo(fr.width)),Ip(fn)&&((Qo,Ui,fr)=>{fr("backgroundcolor")&&Qo.setFormat("tablecellbackgroundcolor",Ui.backgroundcolor),fr("bordercolor")&&Qo.setFormat("tablecellbordercolor",Ui.bordercolor),fr("borderstyle")&&Qo.setFormat("tablecellborderstyle",Ui.borderstyle),fr("borderwidth")&&Qo.setFormat("tablecellborderwidth",Vo(Ui.borderwidth))})(eo,Gt,zn),un("halign")&&Du(fn,jn,Gt.halign),un("valign")&&((Qo,Ui,fr)=>{Is.each("top middle bottom".split(" "),Na=>{Na!==fr&&Qo.formatter.remove("valign"+Na,{},Ui)}),fr&&Qo.formatter.apply("valign"+fr,{},Ui)})(fn,jn,Gt.valign)})})(Te,Rt,$e,Jn(Lr,ot)),nn&&Te.execCommand("mceTableCellType",!1,{type:$e.celltype,no_events:!0}),Mp(Te,Nt.dom,{structure:nn,style:Zn})})})(q,Q,ee,be),q.focus()})},wi=q=>{const Q=ka(q);if(0===Q.length)return;const ee=((Te,Ue)=>{const it=xt(Ue[0]).map($e=>$t(Qd($e,Ue),ot=>((Nt,Rt,Zn,nn)=>{const fn=Nt.dom;return{width:(Gt=nn.getOr(Rt),fn.getStyle(Gt,"width")||fn.getAttrib(Gt,"width")),scope:fn.getAttrib(Rt,"scope"),celltype:(Bn=Rt,Bn.nodeName.toLowerCase()),class:fn.getAttrib(Rt,"class",""),halign:Wi(Nt,Rt),valign:Os(Nt,Rt),...Zn?os(Rt):{}};var Bn,Gt})(Te,ot.element,Ip(Te),ot.column)));return Pc(it.getOrDie())})(q,Q),ae={type:"tabpanel",tabs:[{title:"General",name:"general",items:Rp(q)},_i(q,"cell")]},be={type:"panel",items:[{type:"grid",columns:2,items:Rp(q)}]};q.windowManager.open({title:"Cell Properties",size:"normal",body:Ip(q)?ae:be,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ee,onSubmit:Jn(Bu,q,Q,ee)})},Gl=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Bc=q=>{return Gl.concat((Q=q,er(es(Q)).map(ee=>({name:"class",type:"listbox",label:"Class",items:ee}))).toArray());var Q},la=(q,Q,ee,ae)=>{const be=ae.getData();ae.close(),q.undoManager.transact(()=>{((Te,Ue,it,$e)=>{const ot=kr($e,(Nt,Rt)=>it[Rt]!==Nt);if(qo(ot)>0){const Nt=Lr(ot,"type"),Rt=!Nt||qo(ot)>1;Rt&&((Zn,nn,fn,Bn)=>{const Gt=1===nn.length?Ar:Bn;Kr(nn,un=>{const Nn=Lt(Fe.fromDom(un),"td,th"),Un=Bl(Zn,un);var jn,zn,eo;jn=Un,zn=fn,(eo=Gt)("class")&&"mce-no-match"!==zn.class&&jn.setAttrib("class",zn.class),eo("height")&&jn.setStyle("height",Vo(zn.height)),Xd(Zn)&&((jn,zn,eo)=>{eo("backgroundcolor")&&jn.setStyle("background-color",zn.backgroundcolor),eo("bordercolor")&&jn.setStyle("border-color",zn.bordercolor),eo("borderstyle")&&jn.setStyle("border-style",zn.borderstyle)})(Un,fn,Gt),Bn("height")&&Kr(Nn,jn=>{Zn.dom.setStyle(jn.dom,"height",null)}),Bn("align")&&Du(Zn,un,fn.align)})})(Te,Ue,$e,Jn(Lr,ot)),Nt&&Te.execCommand("mceTableRowType",!1,{type:$e.type,no_events:!0}),xt(Fe.fromDom(Ue[0])).each(Zn=>Mp(Te,Zn.dom,{structure:Nt,style:Rt}))}})(q,Q,ee,be),q.focus()})},zu=q=>{const Q=((q,Q)=>{const ee=uo(q),ae=ee.bind(be=>xt(be)).map(be=>rn(be));return Dl(ee,ae,(be,Te)=>ur(Te,Ue=>Pe(Eu(Ue.dom.cells),it=>"1"===cr(it,Q)||Se(it,be)))).getOr([])})(Ca(q),Kd.selected);if(0===Q.length)return;const ee=$t(Q,Ue=>((it,$e,ot)=>{const Nt=it.dom;return{height:Nt.getStyle($e,"height")||Nt.getAttrib($e,"height"),class:Nt.getAttrib($e,"class",""),type:zp($e),align:Wi(it,$e),...ot?os($e):{}}})(q,Ue.dom,Xd(q))),ae=Pc(ee),be={type:"tabpanel",tabs:[{title:"General",name:"general",items:Bc(q)},_i(q,"row")]},Te={type:"panel",items:[{type:"grid",columns:2,items:Bc(q)}]};q.windowManager.open({title:"Row Properties",size:"normal",body:Xd(q)?be:Te,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ae,onSubmit:Jn(la,q,$t(Q,Ue=>Ue.dom),ae)})},Vp=(q,Q,ee)=>{const ae=ee?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],be=Sv(q)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Te=Q.length>0?[{name:"class",type:"listbox",label:"Class",items:Q}]:[];return ae.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(be).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(Te)},zc=(q,Q,ee,ae)=>{if("TD"===Q.tagName||"TH"===Q.tagName)oi(ee)&&qn(ae)?q.setStyle(Q,ee,ae):q.setStyles(Q,ee);else if(Q.children)for(let be=0;be<Q.children.length;be++)zc(q,Q.children[be],ee,ae)},al=(q,Q,ee,ae)=>{const be=q.dom,Te=ae.getData(),Ue=kr(Te,(it,$e)=>ee[$e]!==it);ae.close(),q.undoManager.transact(()=>{if(!Q){const it=rl(Te.cols).getOr(1),$e=rl(Te.rows).getOr(1);q.execCommand("mceInsertTable",!1,{rows:$e,columns:it}),Q=uo(Ca(q),Et(q)).bind(ot=>xt(ot,Et(q))).map(ot=>ot.dom).getOrDie()}if(qo(Ue)>0){const it={border:Lr(Ue,"border"),bordercolor:Lr(Ue,"bordercolor"),cellpadding:Lr(Ue,"cellpadding")};((ot,Nt,Rt,Zn)=>{const nn=ot.dom,fn={},Bn={},Gt=Ds(ot),un=il(ot),Nn=0===parseFloat(Rt.border);if(an(Rt.class)||"mce-no-match"===Rt.class||(fn.class=Rt.class),Bn.height=Vo(Rt.height),Gt?Bn.width=Vo(Rt.width):nn.getAttrib(Nt,"width")&&(fn.width=(Un=Rt.width)?Un.replace(/px$/,""):""),Gt?(Nn?(fn.border=0,Bn["border-width"]=""):(Bn["border-width"]=Vo(Rt.border),fn.border=1),Bn["border-spacing"]=Vo(Rt.cellspacing)):(fn.border=Nn?0:Rt.border,fn.cellpadding=Rt.cellpadding,fn.cellspacing=Rt.cellspacing),Gt&&Nt.children){const Un={};if(Nn?Un["border-width"]="":Zn.border&&(Un["border-width"]=Vo(Rt.border)),Zn.cellpadding&&(Un.padding=Vo(Rt.cellpadding)),un&&Zn.bordercolor&&(Un["border-color"]=Rt.bordercolor),!(jn=>{for(const zn in jn)if(et.call(jn,zn))return!1;return!0})(Un))for(let jn=0;jn<Nt.children.length;jn++)zc(nn,Nt.children[jn],Un)}var Un;if(un){const Un=Rt;Bn["background-color"]=Un.backgroundcolor,Bn["border-color"]=Un.bordercolor,Bn["border-style"]=Un.borderstyle}nn.setStyles(Nt,{...Zd(ot),...Bn}),nn.setAttribs(Nt,{...On(ot),...fn})})(q,Q,Te,it);const $e=be.select("caption",Q)[0];($e&&!Te.caption||!$e&&Te.caption)&&q.execCommand("mceTableToggleCaption"),Du(q,Q,Te.align)}if(q.focus(),q.addVisual(),qo(Ue)>0){const it=Lr(Ue,"caption"),$e=!it||qo(Ue)>1;Mp(q,Q,{structure:it,style:$e})}})},is=(q,Q)=>{const ee=q.dom;let ae,be=(($e,ot)=>{const Nt=Zd($e),Rt=On($e),Zn=ot?{borderstyle:Qt(Nt,"border-style").getOr(""),bordercolor:Fl(Qt(Nt,"border-color").getOr("")),backgroundcolor:Fl(Qt(Nt,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...Nt,...Rt,...Zn,...(()=>{const nn=Nt["border-width"];return Ds($e)&&nn?{border:nn}:Qt(Rt,"border").fold(()=>({}),fn=>({border:fn}))})(),...Qt(Nt,"border-spacing").or(Qt(Rt,"cellspacing")).fold(()=>({}),nn=>({cellspacing:nn})),...Qt(Nt,"border-padding").or(Qt(Rt,"cellpadding")).fold(()=>({}),nn=>({cellpadding:nn}))}})(q,il(q));Q?(be.cols="1",be.rows="1",il(q)&&(be.borderstyle="",be.bordercolor="",be.backgroundcolor="")):(ae=ee.getParent(q.selection.getStart(),"table",q.getBody()),ae?be=(($e,ot,Nt)=>{const Rt=$e.dom,Zn=Ds($e)?Rt.getStyle(ot,"border-spacing")||Rt.getAttrib(ot,"cellspacing"):Rt.getAttrib(ot,"cellspacing")||Rt.getStyle(ot,"border-spacing"),nn=Ds($e)?ol(Rt,ot,"padding")||Rt.getAttrib(ot,"cellpadding"):Rt.getAttrib(ot,"cellpadding")||ol(Rt,ot,"padding");return{width:Rt.getStyle(ot,"width")||Rt.getAttrib(ot,"width"),height:Rt.getStyle(ot,"height")||Rt.getAttrib(ot,"height"),cellspacing:Zn??"",cellpadding:nn??"",border:((fn,Bn)=>{const Gt=ke(Fe.fromDom(Bn),"border-width");return Ds($e)&&Gt.isSome()?Gt.getOr(""):fn.getAttrib(Bn,"border")||ol($e.dom,Bn,"border-width")||ol($e.dom,Bn,"border")||""})(Rt,ot),caption:!!Rt.select("caption",ot)[0],class:Rt.getAttrib(ot,"class",""),align:Wi($e,ot),...Nt?os(ot):{}}})(q,ae,il(q)):il(q)&&(be.borderstyle="",be.bordercolor="",be.backgroundcolor=""));const Te=er(Eo(q));Te.isSome()&&be.class&&(be.class=be.class.replace(/\s*mce\-item\-table\s*/g,""));const Ue={type:"grid",columns:2,items:Vp(q,Te.getOr([]),Q)},it=il(q)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[Ue]},_i(q,"table")]}:{type:"panel",items:[Ue]};q.windowManager.open({title:"Table Properties",size:"normal",body:it,onSubmit:Jn(al,q,ae,be),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:be})},eh=wt,Vc=q=>{const Q=(ee,ae)=>Zt(ee,ae).exists(be=>parseInt(be,10)>1);return q.length>0&&Jr(q,ee=>Q(ee,"rowspan")||Q(ee,"colspan"))?ct.some(q):ct.none()},th=(q,Q,ee)=>{return Q.length<=1?ct.none():(ae=q,be=ee.firstSelectedSelector,Te=ee.lastSelectedSelector,Np(ae,be,Te).bind(Ue=>{const it=Rt=>Se(ae,Rt),$e="thead,tfoot,tbody,table",ot=br(Ue.first,$e,it),Nt=br(Ue.last,$e,it);return ot.bind(Rt=>Nt.bind(Zn=>{return Se(Rt,Zn)?(fn=Ue.first,Bn=Ue.last,((q,Q,ee)=>((ae,be,Te)=>{const Ue=Ma(ae,be,Se),it=Ma(ae,Te,Se);return Ue.bind($e=>it.map(ot=>{return Nt=$e,Rt=ot,{startRow:Math.min(Nt.row,Rt.row),startCol:Math.min(Nt.column,Rt.column),finishRow:Math.max(Nt.row+Nt.rowspan-1,Rt.row+Rt.rowspan-1),finishCol:Math.max(Nt.column+Nt.colspan-1,Rt.column+Rt.colspan-1)};var Nt,Rt}))})(q,Q,ee).bind(ae=>((be,Te)=>{let Ue=!0;const it=Jn(Nu,Te);for(let $e=Te.startRow;$e<=Te.finishRow;$e++)for(let ot=Te.startCol;ot<=Te.finishCol;ot++)Ue=Ue&&Yr(be,$e,ot).exists(it);return Ue?ct.some(Te):ct.none()})(q,ae)))(Ll(Ue.table),fn,Bn)):ct.none();var fn,Bn}))})).map(Ue=>({bounds:Ue,cells:Q}));var ae,be,Te};var Vu=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Si="x-tinymce/dom-table-",Av=Si+"rows",as=Si+"columns",Fu=q=>{var Q;const ee=null!==(Q=Vu.read())&&void 0!==Q?Q:[];return Sa(ee,ae=>ct.from(ae.getType(q)))},Gu=()=>Fu(Av),Ho=()=>Fu(as),ss=q=>Q=>{const ee=()=>{Q.setEnabled(q.selection.isEditable())};return q.on("NodeChange",ee),ee(),()=>{q.off("NodeChange",ee)}},Hl=q=>Q=>{const ee=()=>{Q.setEnabled(q.selection.isEditable())};return q.on("NodeChange",ee),ee(),()=>{q.off("NodeChange",ee)}};qt.add("table",q=>{const Q=(q=>{const Q=Fo(ct.none()),ee=Fo([]);let ae=ct.none();const be=Be("caption"),Te=Gt=>ae.forall(un=>!un[Gt]),Ue=()=>Vg(Ca(q),Et(q)).bind(Gt=>{return Dl(xt(Gt),Vg((Nn=q,Fe.fromDom(Nn.selection.getEnd())),Et(q)).bind(xt),(Nn,Un)=>{return Se(Nn,Un)?be(Gt)?ct.some({element:jn=Gt,mergable:ct.none(),unmergable:ct.none(),selection:[jn]}):ct.some(((jn,zn,eo)=>({element:eo,mergable:th(zn,jn,Kd),unmergable:Vc(jn),selection:eh(jn)}))(ka(q),Nn,Gt)):ct.none();var jn}).bind(wt);var Nn}),it=Gt=>xt(Gt.element).map(un=>{const Nn=Qr(un),Un=Bp(Nn,Gt).getOr([]),jn=Mn(Un,(zn,eo)=>(eo.isLocked&&(zn.onAny=!0,0===eo.column?zn.onFirst=!0:eo.column+eo.colspan>=Nn.grid.columns&&(zn.onLast=!0)),zn),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Lo(Nn,Gt).isSome(),unmergeable:li(Nn,Gt).isSome(),locked:jn}}),$e=()=>{Q.set((Gt=>{let un,Nn=!1;return(...Un)=>(Nn||(Nn=!0,un=Gt.apply(null,Un)),un)})(Ue)()),ae=Q.get().bind(it),Kr(ee.get(),yn)},ot=Gt=>(Gt(),ee.set(ee.get().concat([Gt])),()=>{ee.set(ur(ee.get(),un=>un!==Gt))}),Nt=(Gt,un)=>ot(()=>Q.get().fold(()=>{Gt.setEnabled(!1)},Nn=>{Gt.setEnabled(!un(Nn)&&q.selection.isEditable())})),Rt=(Gt,un,Nn)=>ot(()=>Q.get().fold(()=>{Gt.setEnabled(!1),Gt.setActive(!1)},Un=>{Gt.setEnabled(!un(Un)&&q.selection.isEditable()),Gt.setActive(Nn(Un))})),Zn=Gt=>ae.exists(un=>un.locked[Gt]),nn=(Gt,un)=>Nn=>Rt(Nn,Un=>be(Un.element),()=>q.queryCommandValue(Gt)===un),fn=nn("mceTableRowType","header"),Bn=nn("mceTableColType","th");return q.on("NodeChange ExecCommand TableSelectorChange",$e),{onSetupTable:Gt=>Nt(Gt,un=>!1),onSetupCellOrRow:Gt=>Nt(Gt,un=>be(un.element)),onSetupColumn:Gt=>un=>Nt(un,Nn=>be(Nn.element)||Zn(Gt)),onSetupPasteable:Gt=>un=>Nt(un,Nn=>be(Nn.element)||Gt().isNone()),onSetupPasteableColumn:(Gt,un)=>Nn=>Nt(Nn,Un=>be(Un.element)||Gt().isNone()||Zn(un)),onSetupMergeable:Gt=>Nt(Gt,un=>Te("mergeable")),onSetupUnmergeable:Gt=>Nt(Gt,un=>Te("unmergeable")),resetTargets:$e,onSetupTableWithCaption:Gt=>Rt(Gt,Hn,un=>xt(un.element,Et(q)).exists(Nn=>((q,Q)=>Z(q.dom.childNodes,be=>{return Te=Fe.fromDom(be),_t(Te,"caption");var Te}).map(Fe.fromDom))(Nn).isSome())),onSetupTableRowHeaders:fn,onSetupTableColumnHeaders:Bn,targets:Q.get}})(q);(ee=>{const ae=ee.options.register;ae("table_border_widths",{processor:"object[]",default:wv}),ae("table_border_styles",{processor:"object[]",default:Ap}),ae("table_cell_advtab",{processor:"boolean",default:!0}),ae("table_row_advtab",{processor:"boolean",default:!0}),ae("table_advtab",{processor:"boolean",default:!0}),ae("table_appearance_options",{processor:"boolean",default:!0}),ae("table_grid",{processor:"boolean",default:!Tp.deviceType.isTouch()}),ae("table_cell_class_list",{processor:"object[]",default:[]}),ae("table_row_class_list",{processor:"object[]",default:[]}),ae("table_class_list",{processor:"object[]",default:[]}),ae("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),ae("table_background_color_map",{processor:"object[]",default:[]}),ae("table_border_color_map",{processor:"object[]",default:[]})})(q),(q=>{tn({mceTableProps:Jn(is,q,!1),mceTableRowProps:Jn(zu,q),mceTableCellProps:Jn(wi,q),mceInsertTableDialog:Jn(is,q,!0)},(Q,ee)=>q.addCommand(ee,()=>{return ae=Q,void((Te=Ca(q),Ue=Be("table"),bn((it,$e)=>$e(it),Br,Te,Ue,void 0)).forall(Il)&&ae());var Te,Ue,ae}))})(q),((ee,ae)=>{const be=nn=>()=>ee.execCommand(nn),Te=(nn,fn)=>!!ee.queryCommandSupported(fn.command)&&(ee.ui.registry.addMenuItem(nn,{...fn,onAction:Cn(fn.onAction)?fn.onAction:be(fn.command)}),!0),Ue=(nn,fn)=>{ee.queryCommandSupported(fn.command)&&ee.ui.registry.addToggleMenuItem(nn,{...fn,onAction:Cn(fn.onAction)?fn.onAction:be(fn.command)})},it=nn=>{ee.execCommand("mceInsertTable",!1,{rows:nn.numRows,columns:nn.numColumns})},$e=[Te("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:ae.onSetupCellOrRow}),Te("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:ae.onSetupCellOrRow}),Te("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:ae.onSetupCellOrRow}),Te("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:ae.onSetupCellOrRow}),Te("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:ae.onSetupCellOrRow}),Te("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:ae.onSetupCellOrRow}),Te("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:ae.onSetupPasteable(Gu)}),Te("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:ae.onSetupPasteable(Gu)})],ot=[Te("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:ae.onSetupColumn("onFirst")}),Te("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:ae.onSetupColumn("onLast")}),Te("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:ae.onSetupColumn("onAny")}),Te("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:ae.onSetupColumn("onAny")}),Te("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:ae.onSetupColumn("onAny")}),Te("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:ae.onSetupPasteableColumn(Ho,"onFirst")}),Te("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:ae.onSetupPasteableColumn(Ho,"onLast")})],Nt=[Te("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:ae.onSetupCellOrRow}),Te("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:ae.onSetupMergeable}),Te("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:ae.onSetupUnmergeable})];qd(ee)?ee.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:it}],onSetup:Hl(ee)}):ee.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:be("mceInsertTableDialog"),onSetup:Hl(ee)}),ee.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:be("mceInsertTableDialog"),onSetup:Hl(ee)}),Te("tableprops",{text:"Table properties",onSetup:ae.onSetupTable,command:"mceTableProps"}),Te("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:ae.onSetupTable,command:"mceTableDelete"}),De($e,!0)&&ee.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Fn("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),De(ot,!0)&&ee.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Fn("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),De(Nt,!0)&&ee.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Fn("tablecellprops tablemergecells tablesplitcells")}),ee.ui.registry.addContextMenu("table",{update:()=>(ae.resetTargets(),ae.targets().fold(Fn(""),nn=>"caption"===no(nn.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Rt=Rc(Eo(ee));0!==Rt.length&&ee.queryCommandSupported("mceTableToggleClass")&&ee.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>aa(ee,Rt,"tableclass",nn=>ee.execCommand("mceTableToggleClass",!1,nn)),onSetup:ae.onSetupTable});const Zn=Rc(Ta(ee));0!==Zn.length&&ee.queryCommandSupported("mceTableCellToggleClass")&&ee.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>aa(ee,Zn,"tablecellclass",nn=>ee.execCommand("mceTableCellToggleClass",!1,nn)),onSetup:ae.onSetupCellOrRow}),ee.queryCommandSupported("mceTableApplyCellStyle")&&(ee.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>aa(ee,Ia,"tablecellverticalalign",ge(ee,"vertical-align")),onSetup:ae.onSetupCellOrRow}),ee.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>aa(ee,Qa(ee),"tablecellborderwidth",ge(ee,"border-width")),onSetup:ae.onSetupCellOrRow}),ee.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>aa(ee,Yd(ee),"tablecellborderstyle",ge(ee,"border-style")),onSetup:ae.onSetupCellOrRow}),ee.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>xi(ee,Ns(ee),"background-color"),onSetup:ae.onSetupCellOrRow}),ee.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>xi(ee,Aa(ee),"border-color"),onSetup:ae.onSetupCellOrRow})),Ue("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:ae.onSetupTableWithCaption}),Ue("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Hg(ee),onSetup:ae.onSetupTableRowHeaders}),Ue("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:_n(ee),onSetup:ae.onSetupTableRowHeaders})})(q,Q),((ee,ae)=>{ee.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:ss(ee),fetch:ot=>ot("inserttable | cell row column | advtablesort | tableprops deletetable")});const be=ot=>()=>ee.execCommand(ot),Te=(ot,Nt)=>{ee.queryCommandSupported(Nt.command)&&ee.ui.registry.addButton(ot,{...Nt,onAction:Cn(Nt.onAction)?Nt.onAction:be(Nt.command)})},Ue=(ot,Nt)=>{ee.queryCommandSupported(Nt.command)&&ee.ui.registry.addToggleButton(ot,{...Nt,onAction:Cn(Nt.onAction)?Nt.onAction:be(Nt.command)})};Te("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:ae.onSetupTable}),Te("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:ae.onSetupTable}),Te("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:ae.onSetupCellOrRow}),Te("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:ae.onSetupMergeable}),Te("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:ae.onSetupUnmergeable}),Te("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:ae.onSetupCellOrRow}),Te("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:ae.onSetupCellOrRow}),Te("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:ae.onSetupCellOrRow}),Te("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:ae.onSetupCellOrRow}),Te("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:ae.onSetupColumn("onFirst")}),Te("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:ae.onSetupColumn("onLast")}),Te("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:ae.onSetupColumn("onAny")}),Te("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:ae.onSetupCellOrRow}),Te("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:ae.onSetupCellOrRow}),Te("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:ae.onSetupPasteable(Gu)}),Te("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:ae.onSetupPasteable(Gu)}),Te("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:ae.onSetupColumn("onAny")}),Te("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:ae.onSetupColumn("onAny")}),Te("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:ae.onSetupPasteableColumn(Ho,"onFirst")}),Te("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:ae.onSetupPasteableColumn(Ho,"onLast")}),Te("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:ss(ee)});const it=Rc(Eo(ee));0!==it.length&&ee.queryCommandSupported("mceTableToggleClass")&&ee.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:sa(ee,it,"tableclass",ot=>ee.execCommand("mceTableToggleClass",!1,ot)),onSetup:ae.onSetupTable});const $e=Rc(Ta(ee));0!==$e.length&&ee.queryCommandSupported("mceTableCellToggleClass")&&ee.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:sa(ee,$e,"tablecellclass",ot=>ee.execCommand("mceTableCellToggleClass",!1,ot)),onSetup:ae.onSetupCellOrRow}),ee.queryCommandSupported("mceTableApplyCellStyle")&&(ee.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:sa(ee,Ia,"tablecellverticalalign",ge(ee,"vertical-align")),onSetup:ae.onSetupCellOrRow}),ee.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:sa(ee,Qa(ee),"tablecellborderwidth",ge(ee,"border-width")),onSetup:ae.onSetupCellOrRow}),ee.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:sa(ee,Yd(ee),"tablecellborderstyle",ge(ee,"border-style")),onSetup:ae.onSetupCellOrRow}),ee.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:ot=>ot(xi(ee,Ns(ee),"background-color")),onSetup:ae.onSetupCellOrRow}),ee.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:ot=>ot(xi(ee,Aa(ee),"border-color")),onSetup:ae.onSetupCellOrRow})),Ue("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:ae.onSetupTableWithCaption}),Ue("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Hg(ee),onSetup:ae.onSetupTableRowHeaders}),Ue("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:_n(ee),onSetup:ae.onSetupTableColumnHeaders})})(q,Q),(ee=>{const ae=Dp(ee);ae.length>0&&ee.ui.registry.addContextToolbar("table",{predicate:be=>ee.dom.is(be,"table")&&ee.getBody().contains(be)&&ee.dom.isEditable(be.parentNode),items:ae,scope:"node",position:"node"})})(q)})}(),function(qt,yr){"object"==typeof exports&&typeof module<"u"?yr(exports):"function"==typeof define&&define.amd?define(["exports"],yr):yr((qt=typeof globalThis<"u"?globalThis:qt||self).echarts={})}(this,function(qt){"use strict";var yr=function(n,t){return(yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};function Ce(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}yr(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var oi=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},gn=new function(){this.browser=new oi,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(gn.wxa=!0,gn.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?gn.worker=!0:typeof navigator>"u"||0===navigator.userAgent.indexOf("Node.js")?(gn.node=!0,gn.svgSupported=!0):function(n,t){var e=t.browser,r=n.match(/Firefox\/([\d.]+)/),o=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),i=n.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(n);r&&(e.firefox=!0,e.version=r[1]),o&&(e.ie=!0,e.version=o[1]),i&&(e.edge=!0,e.version=i[1],e.newEdge=+i[1].split(".")[0]>18),a&&(e.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!e.ie&&!e.edge,t.pointerEventsSupported="onpointerdown"in window&&(e.edge||e.ie&&+e.version>=11),t.domSupported=typeof document<"u";var l=document.documentElement.style;t.transform3dSupported=(e.ie&&"transition"in l||e.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in l)&&!("OTransition"in l),t.transformSupported=t.transform3dSupported||e.ie&&+e.version>=9}(navigator.userAgent,gn);var qn,Cn,Bi="sans-serif",an="12px "+Bi,Sn=function(n){var t={};if(typeof JSON>"u")return t;for(var e=0;e<n.length;e++){var r=String.fromCharCode(e+32),o=(n.charCodeAt(e)-20)/100;t[r]=o}return t}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),Tn={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(n,t){if(!qn){var e=Tn.createCanvas();qn=e&&e.getContext("2d")}if(qn)return Cn!==t&&(Cn=qn.font=t||an),qn.measureText(n);n=n||"";var r=/((?:\d+)?\.?\d*)px/.exec(t=t||an),o=r&&+r[1]||12,i=0;if(t.indexOf("mono")>=0)i=o*n.length;else for(var a=0;a<n.length;a++){var l=Sn[n[a]];i+=null==l?o:l*o}return{width:i}},loadImage:function(n,t,e){var r=new Image;return r.onload=t,r.onerror=e,r.src=n,r}};function Fn(n){for(var t in Tn)n[t]&&(Tn[t]=n[t])}var wt=Jr(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,t){return n["[object "+t+"]"]=!0,n},{}),Ot=Jr(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,t){return n["[object "+t+"Array]"]=!0,n},{}),Jn=Object.prototype.toString,yn=Array.prototype,Hn=yn.forEach,Ar=yn.filter,ct=yn.slice,rr=yn.map,et=function(){}.constructor,tn=et?et.prototype:null,kr="__proto__",qo=2311;function Qt(){return qo++}function Lr(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];typeof console<"u"&&console.error.apply(console,n)}function jt(n){if(null==n||"object"!=typeof n)return n;var t=n,e=Jn.call(n);if("[object Array]"===e){if(!bi(n)){t=[];for(var r=0,o=n.length;r<o;r++)t[r]=jt(n[r])}}else if(Ot[e]){if(!bi(n)){var i=n.constructor;if(i.from)t=i.from(n);else for(t=new i(n.length),r=0,o=n.length;r<o;r++)t[r]=n[r]}}else if(!wt[e]&&!bi(n)&&!Sr(n))for(var a in t={},n)n.hasOwnProperty(a)&&a!==kr&&(t[a]=jt(n[a]));return t}function Ve(n,t,e){if(!Ft(t)||!Ft(n))return e?jt(t):n;for(var r in t)if(t.hasOwnProperty(r)&&r!==kr){var o=n[r],i=t[r];!Ft(i)||!Ft(o)||Ee(i)||Ee(o)||Sr(i)||Sr(o)||Gr(i)||Gr(o)||bi(i)||bi(o)?!e&&r in n||(n[r]=jt(t[r])):Ve(o,i,e)}return n}function Ir(n,t){for(var e=n[0],r=1,o=n.length;r<o;r++)e=Ve(e,n[r],t);return e}function De(n,t){if(Object.assign)Object.assign(n,t);else for(var e in t)t.hasOwnProperty(e)&&e!==kr&&(n[e]=t[e]);return n}function Pe(n,t,e){for(var r=vn(t),o=0;o<r.length;o++){var i=r[o];(e?null!=t[i]:null==n[i])&&(n[i]=t[i])}return n}var oa=Tn.createCanvas;function $t(n,t){if(n){if(n.indexOf)return n.indexOf(t);for(var e=0,r=n.length;e<r;e++)if(n[e]===t)return e}return-1}function Kr(n,t){var e=n.prototype;function r(){}for(var o in r.prototype=t.prototype,n.prototype=new r,e)e.hasOwnProperty(o)&&(n.prototype[o]=e[o]);n.prototype.constructor=n,n.superClass=t}function ur(n,t,e){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var i=r[o];"constructor"!==i&&(e?null!=t[i]:null==n[i])&&(n[i]=t[i])}else Pe(n,t,e)}function Mn(n){return!!n&&"string"!=typeof n&&"number"==typeof n.length}function Z(n,t,e){if(n&&t)if(n.forEach&&n.forEach===Hn)n.forEach(t,e);else if(n.length===+n.length)for(var r=0,o=n.length;r<o;r++)t.call(e,n[r],r,n);else for(var i in n)n.hasOwnProperty(i)&&t.call(e,n[i],i,n)}function j(n,t,e){if(!n)return[];if(!t)return Wn(n);if(n.map&&n.map===rr)return n.map(t,e);for(var r=[],o=0,i=n.length;o<i;o++)r.push(t.call(e,n[o],o,n));return r}function Jr(n,t,e,r){if(n&&t){for(var o=0,i=n.length;o<i;o++)e=t.call(r,e,n[o],o,n);return e}}function Xn(n,t,e){if(!n)return[];if(!t)return Wn(n);if(n.filter&&n.filter===Ar)return n.filter(t,e);for(var r=[],o=0,i=n.length;o<i;o++)t.call(e,n[o],o,n)&&r.push(n[o]);return r}function Sa(n,t,e){if(n&&t)for(var r=0,o=n.length;r<o;r++)if(t.call(e,n[r],r,n))return n[r]}function vn(n){if(!n)return[];if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t}var Fe=tn&&Se(tn.bind)?tn.call.bind(tn.bind):function(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return function(){return n.apply(t,e.concat(ct.call(arguments)))}};function _t(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){return n.apply(this,t.concat(ct.call(arguments)))}}function Ee(n){return Array.isArray?Array.isArray(n):"[object Array]"===Jn.call(n)}function Se(n){return"function"==typeof n}function bt(n){return"string"==typeof n}function no(n){return"[object String]"===Jn.call(n)}function dt(n){return"number"==typeof n}function Ft(n){var t=typeof n;return"function"===t||!!n&&"object"===t}function Gr(n){return!!wt[Jn.call(n)]}function ao(n){return!!Ot[Jn.call(n)]}function Sr(n){return"object"==typeof n&&"number"==typeof n.nodeType&&"object"==typeof n.ownerDocument}function rt(n){return null!=n.colorStops}function Be(n){return null!=n.image}function st(n){return"[object RegExp]"===Jn.call(n)}function lt(n){return n!=n}function ht(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=0,r=n.length;e<r;e++)if(null!=n[e])return n[e]}function We(n,t){return n??t}function An(n,t,e){return n??t??e}function Wn(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return ct.apply(n,t)}function pr(n){if("number"==typeof n)return[n,n,n,n];var t=n.length;return 2===t?[n[0],n[1],n[0],n[1]]:3===t?[n[0],n[1],n[2],n[1]]:n}function bn(n,t){if(!n)throw new Error(t)}function Br(n){return null==n?null:"function"==typeof n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var br="__ec_primitive__";function Zo(n){n[br]=!0}function bi(n){return n[br]}var so=function(){function n(){this.data={}}return n.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},n.prototype.has=function(t){return this.data.hasOwnProperty(t)},n.prototype.get=function(t){return this.data[t]},n.prototype.set=function(t,e){return this.data[t]=e,this},n.prototype.keys=function(){return vn(this.data)},n.prototype.forEach=function(t){var e=this.data;for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},n}(),Il="function"==typeof Map,sr=function(){function n(t){var e=Ee(t);this.data=Il?new Map:new so;var r=this;function o(i,a){e?r.set(i,a):r.set(a,i)}t instanceof n?t.each(o):t&&Z(t,o)}return n.prototype.hasKey=function(t){return this.data.has(t)},n.prototype.get=function(t){return this.data.get(t)},n.prototype.set=function(t,e){return this.data.set(t,e),e},n.prototype.each=function(t,e){this.data.forEach(function(r,o){t.call(e,r,o)})},n.prototype.keys=function(){var t=this.data.keys();return Il?Array.from(t):t},n.prototype.removeKey=function(t){this.data.delete(t)},n}();function Et(n){return new sr(n)}function Vo(n,t){for(var e=new n.constructor(n.length+t.length),r=0;r<n.length;r++)e[r]=n[r];var o=n.length;for(r=0;r<t.length;r++)e[r+o]=t[r];return e}function Ca(n,t){var e;if(Object.create)e=Object.create(n);else{var r=function(){};r.prototype=n,e=new r}return t&&De(e,t),e}function Iu(n){var t=n.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function Lt(n,t){return n.hasOwnProperty(t)}function zr(){}var Ts=180/Math.PI,cr=Object.freeze({__proto__:null,guid:Qt,logError:Lr,clone:jt,merge:Ve,mergeAll:Ir,extend:De,defaults:Pe,createCanvas:oa,indexOf:$t,inherits:Kr,mixin:ur,isArrayLike:Mn,each:Z,map:j,reduce:Jr,filter:Xn,find:Sa,keys:vn,bind:Fe,curry:_t,isArray:Ee,isFunction:Se,isString:bt,isStringSafe:no,isNumber:dt,isObject:Ft,isBuiltInObject:Gr,isTypedArray:ao,isDom:Sr,isGradientObject:rt,isImagePatternObject:Be,isRegExp:st,eqNaN:lt,retrieve:ht,retrieve2:We,retrieve3:An,slice:Wn,normalizeCssArray:pr,assert:bn,trim:Br,setAsPrimitive:Zo,isPrimitive:bi,HashMap:sr,createHashMap:Et,concatArray:Vo,createObject:Ca,disableUserSelect:Iu,hasOwn:Lt,noop:zr,RADIAN_TO_DEGREE:Ts});function Zt(n,t){return null==n&&(n=0),null==t&&(t=0),[n,t]}function lo(n,t){return n[0]=t[0],n[1]=t[1],n}function zi(n){return[n[0],n[1]]}function Dl(n,t,e){return n[0]=t,n[1]=e,n}function As(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}function ks(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n}function Vi(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}function Fi(n){return Math.sqrt(Nl(n))}function Nl(n){return n[0]*n[0]+n[1]*n[1]}function $o(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n}function ke(n,t){var e=Fi(t);return 0===e?(n[0]=0,n[1]=0):(n[0]=t[0]/e,n[1]=t[1]/e),n}function Re(n,t){return Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1]))}var Ae=Re;function qe(n,t){return(n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])}var It=qe;function ft(n,t,e,r){return n[0]=t[0]+r*(e[0]-t[0]),n[1]=t[1]+r*(e[1]-t[1]),n}function Ye(n,t,e){var r=t[0],o=t[1];return n[0]=e[0]*r+e[2]*o+e[4],n[1]=e[1]*r+e[3]*o+e[5],n}function xt(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n}function rn(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n}var Ln=Object.freeze({__proto__:null,create:Zt,copy:lo,clone:zi,set:Dl,add:As,scaleAndAdd:ks,sub:Vi,len:Fi,length:Fi,lenSquare:Nl,lengthSquare:Nl,mul:function(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n},div:function(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n},dot:function(n,t){return n[0]*t[0]+n[1]*t[1]},scale:$o,normalize:ke,distance:Re,dist:Ae,distanceSquare:qe,distSquare:It,negate:function(n,t){return n[0]=-t[0],n[1]=-t[1],n},lerp:ft,applyTransform:Ye,min:xt,max:rn}),kn=function(n,t){this.target=n,this.topTarget=t&&t.topTarget},or=function(){function n(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new kn(e,t),"dragstart",t.event))},n.prototype._drag=function(t){var e=this._draggingTarget;if(e){var r=t.offsetX,o=t.offsetY,i=r-this._x,a=o-this._y;this._x=r,this._y=o,e.drift(i,a,t),this.handler.dispatchToElement(new kn(e,t),"drag",t.event);var l=this.handler.findHover(r,o,e).target,c=this._dropTarget;this._dropTarget=l,e!==l&&(c&&l!==c&&this.handler.dispatchToElement(new kn(c,t),"dragleave",t.event),l&&l!==c&&this.handler.dispatchToElement(new kn(l,t),"dragenter",t.event))}},n.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new kn(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new kn(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},n}(),xn=function(){function n(t){t&&(this._$eventProcessor=t)}return n.prototype.on=function(t,e,r,o){this._$handlers||(this._$handlers={});var i=this._$handlers;if("function"==typeof e&&(o=r,r=e,e=null),!r||!t)return this;var a=this._$eventProcessor;null!=e&&a&&a.normalizeQuery&&(e=a.normalizeQuery(e)),i[t]||(i[t]=[]);for(var l=0;l<i[t].length;l++)if(i[t][l].h===r)return this;var c={h:r,query:e,ctx:o||this,callAtLast:r.zrEventfulCallAtLast},h=i[t].length-1,p=i[t][h];return p&&p.callAtLast?i[t].splice(h,0,c):i[t].push(c),this},n.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},n.prototype.off=function(t,e){var r=this._$handlers;if(!r)return this;if(!t)return this._$handlers={},this;if(e){if(r[t]){for(var o=[],i=0,a=r[t].length;i<a;i++)r[t][i].h!==e&&o.push(r[t][i]);r[t]=o}r[t]&&0===r[t].length&&delete r[t]}else delete r[t];return this},n.prototype.trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!this._$handlers)return this;var o=this._$handlers[t],i=this._$eventProcessor;if(o)for(var a=e.length,l=o.length,c=0;c<l;c++){var h=o[c];if(!i||!i.filter||null==h.query||i.filter(t,h.query))switch(a){case 0:h.h.call(h.ctx);break;case 1:h.h.call(h.ctx,e[0]);break;case 2:h.h.call(h.ctx,e[0],e[1]);break;default:h.h.apply(h.ctx,e)}}return i&&i.afterTrigger&&i.afterTrigger(t),this},n.prototype.triggerWithContext=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!this._$handlers)return this;var o=this._$handlers[t],i=this._$eventProcessor;if(o)for(var a=e.length,l=e[a-1],c=o.length,h=0;h<c;h++){var p=o[h];if(!i||!i.filter||null==p.query||i.filter(t,p.query))switch(a){case 0:p.h.call(l);break;case 1:p.h.call(l,e[0]);break;case 2:p.h.call(l,e[0],e[1]);break;default:p.h.apply(l,e.slice(1,a-1))}}return i&&i.afterTrigger&&i.afterTrigger(t),this},n}(),Vr=Math.log(2);function Qr(n,t,e,r,o,i){var a=r+"-"+o,l=n.length;if(i.hasOwnProperty(a))return i[a];if(1===t){var c=Math.round(Math.log((1<<l)-1&~o)/Vr);return n[e][c]}for(var h=r|1<<e,p=e+1;r&1<<p;)p++;for(var g=0,y=0,b=0;y<l;y++){var _=1<<y;_&o||(g+=(b%2?-1:1)*n[e][y]*Qr(n,t-1,p,h,o|_,i),b++)}return i[a]=g,g}function Yr(n,t){var e=[[n[0],n[1],1,0,0,0,-t[0]*n[0],-t[0]*n[1]],[0,0,0,n[0],n[1],1,-t[1]*n[0],-t[1]*n[1]],[n[2],n[3],1,0,0,0,-t[2]*n[2],-t[2]*n[3]],[0,0,0,n[2],n[3],1,-t[3]*n[2],-t[3]*n[3]],[n[4],n[5],1,0,0,0,-t[4]*n[4],-t[4]*n[5]],[0,0,0,n[4],n[5],1,-t[5]*n[4],-t[5]*n[5]],[n[6],n[7],1,0,0,0,-t[6]*n[6],-t[6]*n[7]],[0,0,0,n[6],n[7],1,-t[7]*n[6],-t[7]*n[7]]],r={},o=Qr(e,8,0,0,0,r);if(0!==o){for(var i=[],a=0;a<8;a++)for(var l=0;l<8;l++)null==i[l]&&(i[l]=0),i[l]+=((a+l)%2?-1:1)*Qr(e,7,0===a?1:0,1<<a,1<<l,r)/o*t[a];return function(c,h,p){var g=h*i[6]+p*i[7]+1;c[0]=(h*i[0]+p*i[1]+i[2])/g,c[1]=(h*i[3]+p*i[4]+i[5])/g}}}var Ma="___zrEVENTSAVED",ii=[];function Is(n,t,e,r,o){if(t.getBoundingClientRect&&gn.domSupported&&!ol(t)){var i=t[Ma]||(t[Ma]={}),l=function(c,h,p){for(var g=p?"invTrans":"trans",y=h[g],b=h.srcCoords,_=[],w=[],S=!0,M=0;M<4;M++){var A=c[M].getBoundingClientRect(),I=2*M,N=A.left,L=A.top;_.push(N,L),S=S&&b&&N===b[I]&&L===b[I+1],w.push(c[M].offsetLeft,c[M].offsetTop)}return S&&y?y:(h.srcCoords=_,h[g]=p?Yr(w,_):Yr(_,w))}(function(c,h){var p=h.markers;if(p)return p;p=h.markers=[];for(var g=["left","right"],y=["top","bottom"],b=0;b<4;b++){var _=document.createElement("div"),w=b%2,S=(b>>1)%2;_.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",g[w]+":0",y[S]+":0",g[1-w]+":auto",y[1-S]+":auto",""].join("!important;"),c.appendChild(_),p.push(_)}return p}(t,i),i,o);if(l)return l(n,e,r),!0}return!1}function ol(n){return"CANVAS"===n.nodeName.toUpperCase()}var Du=/([&<>"'])/g,Mp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Co(n){return null==n?"":(n+"").replace(Du,function(t,e){return Mp[e]})}var _v=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Tp=[],wv=gn.browser.firefox&&+gn.browser.version.split(".")[0]<39;function Ap(n,t,e,r){return e=e||{},r?Bg(n,t,e):wv&&null!=t.layerX&&t.layerX!==t.offsetX?(e.zrX=t.layerX,e.zrY=t.layerY):null!=t.offsetX?(e.zrX=t.offsetX,e.zrY=t.offsetY):Bg(n,t,e),e}function Bg(n,t,e){if(gn.domSupported&&n.getBoundingClientRect){var r=t.clientX,o=t.clientY;if(ol(n)){var i=n.getBoundingClientRect();return e.zrX=r-i.left,void(e.zrY=o-i.top)}if(Is(Tp,n,r,o))return e.zrX=Tp[0],void(e.zrY=Tp[1])}e.zrX=e.zrY=0}function kp(n){return n||window.event}function Xr(n,t,e){if(null!=(t=kp(t)).zrX)return t;var r=t.type;if(r&&r.indexOf("touch")>=0){var o="touchend"!==r?t.targetTouches[0]:t.changedTouches[0];o&&Ap(n,o,t,e)}else{Ap(n,t,t,e);var i=function(l){var c=l.wheelDelta;if(c)return c;var h=l.deltaX,p=l.deltaY;return null==h||null==p?c:3*Math.abs(0!==p?p:h)*(p>0?-1:p<0?1:h>0?-1:1)}(t);t.zrDelta=i?i/120:-(t.detail||0)/3}var a=t.button;return null==t.which&&void 0!==a&&_v.test(t.type)&&(t.which=1&a?1:2&a?3:4&a?2:0),t}function jd(n,t,e,r){n.addEventListener(t,e,r)}var Qa=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function Yd(n){return 2===n.which||3===n.which}var Ip=function(){function n(){this._track=[]}return n.prototype.recognize=function(t,e,r){return this._doTrack(t,e,r),this._recognize(t)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(t,e,r){var o=t.touches;if(o){for(var i={points:[],touches:[],target:e,event:t},a=0,l=o.length;a<l;a++){var c=o[a],h=Ap(r,c,{});i.points.push([h.zrX,h.zrY]),i.touches.push(c)}this._track.push(i)}},n.prototype._recognize=function(t){for(var e in il)if(il.hasOwnProperty(e)){var r=il[e](this._track,t);if(r)return r}},n}();function Xd(n){var t=n[1][0]-n[0][0],e=n[1][1]-n[0][1];return Math.sqrt(t*t+e*e)}var il={pinch:function(n,t){var e=n.length;if(e){var r,o=(n[e-1]||{}).points,i=(n[e-2]||{}).points||o;if(i&&i.length>1&&o&&o.length>1){var a=Xd(o)/Xd(i);!isFinite(a)&&(a=1),t.pinchScale=a;var l=[((r=o)[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2];return t.pinchX=l[0],t.pinchY=l[1],{type:"pinch",target:n[0].target,event:t}}}}};function qd(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function Ds(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function Ta(n,t,e){var o=t[1]*e[0]+t[3]*e[1],i=t[0]*e[2]+t[2]*e[3],a=t[1]*e[2]+t[3]*e[3],l=t[0]*e[4]+t[2]*e[5]+t[4],c=t[1]*e[4]+t[3]*e[5]+t[5];return n[0]=t[0]*e[0]+t[2]*e[1],n[1]=o,n[2]=i,n[3]=a,n[4]=l,n[5]=c,n}function es(n,t,e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4]+e[0],n[5]=t[5]+e[1],n}function Eo(n,t,e,r){void 0===r&&(r=[0,0]);var o=t[0],i=t[2],a=t[4],l=t[1],c=t[3],h=t[5],p=Math.sin(e),g=Math.cos(e);return n[0]=o*g+l*p,n[1]=-o*p+l*g,n[2]=i*g+c*p,n[3]=-i*p+g*c,n[4]=g*(a-r[0])+p*(h-r[1])+r[0],n[5]=g*(h-r[1])-p*(a-r[0])+r[1],n}function Dp(n,t,e){var r=e[0],o=e[1];return n[0]=t[0]*r,n[1]=t[1]*o,n[2]=t[2]*r,n[3]=t[3]*o,n[4]=t[4]*r,n[5]=t[5]*o,n}function Ns(n,t){var e=t[0],r=t[2],o=t[4],i=t[1],a=t[3],l=t[5],c=e*a-i*r;return c?(n[0]=a*(c=1/c),n[1]=-i*c,n[2]=-r*c,n[3]=e*c,n[4]=(r*l-a*o)*c,n[5]=(i*o-e*l)*c,n):null}function Aa(n){var t=[1,0,0,1,0,0];return Ds(t,n),t}var ts=Object.freeze({__proto__:null,create:function Sv(){return[1,0,0,1,0,0]},identity:qd,copy:Ds,mul:Ta,translate:es,rotate:Eo,scale:Dp,invert:Ns,clone:Aa}),pn=function(){function n(t,e){this.x=t||0,this.y=e||0}return n.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(t,e){return this.x=t,this.y=e,this},n.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.scale=function(t){this.x*=t,this.y*=t},n.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},n.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},n.prototype.distance=function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},n.prototype.distanceSquare=function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(t){if(t){var e=this.x,r=this.y;return this.x=t[0]*e+t[2]*r+t[4],this.y=t[1]*e+t[3]*r+t[5],this}},n.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},n.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},n.set=function(t,e,r){t.x=e,t.y=r},n.copy=function(t,e){t.x=e.x,t.y=e.y},n.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.lenSquare=function(t){return t.x*t.x+t.y*t.y},n.dot=function(t,e){return t.x*e.x+t.y*e.y},n.add=function(t,e,r){t.x=e.x+r.x,t.y=e.y+r.y},n.sub=function(t,e,r){t.x=e.x-r.x,t.y=e.y-r.y},n.scale=function(t,e,r){t.x=e.x*r,t.y=e.y*r},n.scaleAndAdd=function(t,e,r,o){t.x=e.x+r.x*o,t.y=e.y+r.y*o},n.lerp=function(t,e,r,o){var i=1-o;t.x=i*e.x+o*r.x,t.y=i*e.y+o*r.y},n}(),Zd=Math.min,On=Math.max,Nu=new pn,El=new pn,Ll=new pn,Ke=new pn,ns=new pn,Es=new pn,Kt=function(){function n(t,e,r,o){r<0&&(t+=r,r=-r),o<0&&(e+=o,o=-o),this.x=t,this.y=e,this.width=r,this.height=o}return n.prototype.union=function(t){var e=Zd(t.x,this.x),r=Zd(t.y,this.y);this.width=isFinite(this.x)&&isFinite(this.width)?On(t.x+t.width,this.x+this.width)-e:t.width,this.height=isFinite(this.y)&&isFinite(this.height)?On(t.y+t.height,this.y+this.height)-r:t.height,this.x=e,this.y=r},n.prototype.applyTransform=function(t){n.applyTransform(this,this,t)},n.prototype.calculateTransform=function(t){var e=this,r=t.width/e.width,o=t.height/e.height,i=[1,0,0,1,0,0];return es(i,i,[-e.x,-e.y]),Dp(i,i,[r,o]),es(i,i,[t.x,t.y]),i},n.prototype.intersect=function(t,e){if(!t)return!1;t instanceof n||(t=n.create(t));var r=this,o=r.x,i=r.x+r.width,a=r.y,l=r.y+r.height,c=t.x,h=t.x+t.width,p=t.y,g=t.y+t.height,y=!(i<c||h<o||l<p||g<a);if(e){var b=1/0,_=0,w=Math.abs(i-c),S=Math.abs(h-o),M=Math.abs(l-p),A=Math.abs(g-a),I=Math.min(w,S),N=Math.min(M,A);i<c||h<o?I>_&&(_=I,pn.set(Es,w<S?-w:S,0)):I<b&&(b=I,pn.set(ns,w<S?w:-S,0)),l<p||g<a?N>_&&(_=N,pn.set(Es,0,M<A?-M:A)):I<b&&(b=I,pn.set(ns,0,M<A?M:-A))}return e&&pn.copy(e,y?ns:Es),y},n.prototype.contain=function(t,e){var r=this;return t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(t){n.copy(this,t)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return 0===this.width||0===this.height},n.create=function(t){return new n(t.x,t.y,t.width,t.height)},n.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},n.applyTransform=function(t,e,r){if(r){if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var o=r[0],i=r[3],l=r[5];return t.x=e.x*o+r[4],t.y=e.y*i+l,t.width=e.width*o,t.height=e.height*i,t.width<0&&(t.x+=t.width,t.width=-t.width),void(t.height<0&&(t.y+=t.height,t.height=-t.height))}Nu.x=Ll.x=e.x,Nu.y=Ke.y=e.y,El.x=Ke.x=e.x+e.width,El.y=Ll.y=e.y+e.height,Nu.transform(r),Ke.transform(r),El.transform(r),Ll.transform(r),t.x=Zd(Nu.x,El.x,Ll.x,Ke.x),t.y=Zd(Nu.y,El.y,Ll.y,Ke.y);var c=On(Nu.x,El.x,Ll.x,Ke.x),h=On(Nu.y,El.y,Ll.y,Ke.y);t.width=c-t.x,t.height=h-t.y}else t!==e&&n.copy(t,e)},n}(),Rl="silent";function Cv(){Qa(this.event)}var Mv=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.handler=null,e}return Ce(t,n),t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(xn),$d=function(n,t){this.x=n,this.y=t},e_=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Pn=new Kt(0,0,0,0),zg=function(n){function t(e,r,o,i,a){var l=n.call(this)||this;return l._hovered=new $d(0,0),l.storage=e,l.painter=r,l.painterRoot=i,l._pointerSize=a,o=o||new Mv,l.proxy=null,l.setHandlerProxy(o),l._draggingMgr=new or(l),l}return Ce(t,n),t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(Z(e_,function(r){e.on&&e.on(r,this[r],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var r=e.zrX,o=e.zrY,i=Ko(this,r,o),a=this._hovered,l=a.target;l&&!l.__zr&&(l=(a=this.findHover(a.x,a.y)).target);var c=this._hovered=i?new $d(r,o):this.findHover(r,o),h=c.target,p=this.proxy;p.setCursor&&p.setCursor(h?h.cursor:"default"),l&&h!==l&&this.dispatchToElement(a,"mouseout",e),this.dispatchToElement(c,"mousemove",e),h&&h!==l&&this.dispatchToElement(c,"mouseover",e)},t.prototype.mouseout=function(e){var r=e.zrEventControl;"only_globalout"!==r&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==r&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new $d(0,0)},t.prototype.dispatch=function(e,r){var o=this[e];o&&o.call(this,r)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var r=this.proxy;r.setCursor&&r.setCursor(e)},t.prototype.dispatchToElement=function(e,r,o){var h,p,i=(e=e||{}).target;if(!i||!i.silent){for(var a="on"+r,l={type:r,event:p=o,target:(h=e).target,topTarget:h.topTarget,cancelBubble:!1,offsetX:p.zrX,offsetY:p.zrY,gestureEvent:p.gestureEvent,pinchX:p.pinchX,pinchY:p.pinchY,pinchScale:p.pinchScale,wheelDelta:p.zrDelta,zrByTouch:p.zrByTouch,which:p.which,stop:Cv};i&&(i[a]&&(l.cancelBubble=!!i[a].call(i,l)),i.trigger(r,l),i=i.__hostTarget?i.__hostTarget:i.parent,!l.cancelBubble););l.cancelBubble||(this.trigger(r,l),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(c){"function"==typeof c[a]&&c[a].call(c,l),c.trigger&&c.trigger(r,l)}))}},t.prototype.findHover=function(e,r,o){var i=this.storage.getDisplayList(),a=new $d(e,r);if(Eu(i,a,e,r,o),this._pointerSize&&!a.target){for(var l=[],c=this._pointerSize,h=c/2,p=new Kt(e-h,r-h,c,c),g=i.length-1;g>=0;g--){var y=i[g];y===o||y.ignore||y.ignoreCoarsePointer||y.parent&&y.parent.ignoreCoarsePointer||(Pn.copy(y.getBoundingRect()),y.transform&&Pn.applyTransform(y.transform),Pn.intersect(p)&&l.push(y))}if(l.length)for(var b=Math.PI/12,_=2*Math.PI,w=0;w<h;w+=4)for(var S=0;S<_;S+=b)if(Eu(l,a,e+w*Math.cos(S),r+w*Math.sin(S),o),a.target)return a}return a},t.prototype.processGesture=function(e,r){this._gestureMgr||(this._gestureMgr=new Ip);var o=this._gestureMgr;"start"===r&&o.clear();var i=o.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===r&&o.clear(),i){var a=i.type;e.gestureEvent=a;var l=new $d;l.target=i.target,this.dispatchToElement(l,a,i.event)}},t}(xn);function Np(n,t,e){if(n[n.rectHover?"rectContain":"contain"](t,e)){for(var r=n,o=void 0,i=!1;r;){if(r.ignoreClip&&(i=!0),!i){var a=r.getClipPath();if(a&&!a.contain(t,e))return!1}r.silent&&(o=!0),r=r.__hostTarget||r.parent}return!o||Rl}return!1}function Eu(n,t,e,r,o){for(var i=n.length-1;i>=0;i--){var a=n[i],l=void 0;if(a!==o&&!a.ignore&&(l=Np(a,e,r))&&(!t.topTarget&&(t.topTarget=a),l!==Rl)){t.target=a;break}}}function Ko(n,t,e){var r=n.painter;return t<0||t>r.getWidth()||e<0||e>r.getHeight()}function ai(n,t,e,r){var o=t+1;if(o===e)return 1;if(r(n[o++],n[t])<0){for(;o<e&&r(n[o],n[o-1])<0;)o++;!function(i,a,l){for(l--;a<l;){var c=i[a];i[a++]=i[l],i[l--]=c}}(n,t,o)}else for(;o<e&&r(n[o],n[o-1])>=0;)o++;return o-t}function Ep(n,t,e,r,o){for(r===t&&r++;r<e;r++){for(var i,a=n[r],l=t,c=r;l<c;)o(a,n[i=l+c>>>1])<0?c=i:l=i+1;var h=r-l;switch(h){case 3:n[l+3]=n[l+2];case 2:n[l+2]=n[l+1];case 1:n[l+1]=n[l];break;default:for(;h>0;)n[l+h]=n[l+h-1],h--}n[l]=a}}function Kd(n,t,e,r,o,i){var a=0,l=0,c=1;if(i(n,t[e+o])>0){for(l=r-o;c<l&&i(n,t[e+o+c])>0;)a=c,(c=1+(c<<1))<=0&&(c=l);c>l&&(c=l),a+=o,c+=o}else{for(l=o+1;c<l&&i(n,t[e+o-c])<=0;)a=c,(c=1+(c<<1))<=0&&(c=l);c>l&&(c=l);var h=a;a=o-c,c=o-h}for(a++;a<c;){var p=a+(c-a>>>1);i(n,t[e+p])>0?a=p+1:c=p}return c}function Lu(n,t,e,r,o,i){var a=0,l=0,c=1;if(i(n,t[e+o])<0){for(l=o+1;c<l&&i(n,t[e+o-c])<0;)a=c,(c=1+(c<<1))<=0&&(c=l);c>l&&(c=l);var h=a;a=o-c,c=o-h}else{for(l=r-o;c<l&&i(n,t[e+o+c])>=0;)a=c,(c=1+(c<<1))<=0&&(c=l);c>l&&(c=l),a+=o,c+=o}for(a++;a<c;){var p=a+(c-a>>>1);i(n,t[e+p])<0?c=p:a=p+1}return c}function uo(n,t,e,r){e||(e=0),r||(r=n.length);var o=r-e;if(!(o<2)){var i=0;if(o<32)Ep(n,e,r,e+(i=ai(n,e,r,t)),t);else{var a=function Vg(n,t){var e,r,o=7,i=0,a=[];function l(c){var h=e[c],p=r[c],g=e[c+1],y=r[c+1];r[c]=p+y,c===i-3&&(e[c+1]=e[c+2],r[c+1]=r[c+2]),i--;var b=Lu(n[g],n,h,p,0,t);h+=b,0!=(p-=b)&&0!==(y=Kd(n[h+p-1],n,g,y,y-1,t))&&(p<=y?function(_,w,S,M){var A=0;for(A=0;A<w;A++)a[A]=n[_+A];var I=0,N=S,L=_;if(n[L++]=n[N++],0!=--M)if(1!==w){for(var R,O,B,G=o;;){R=0,O=0,B=!1;do{if(t(n[N],a[I])<0){if(n[L++]=n[N++],O++,R=0,0==--M){B=!0;break}}else if(n[L++]=a[I++],R++,O=0,1==--w){B=!0;break}}while((R|O)<G);if(B)break;do{if(0!==(R=Lu(n[N],a,I,w,0,t))){for(A=0;A<R;A++)n[L+A]=a[I+A];if(L+=R,I+=R,(w-=R)<=1){B=!0;break}}if(n[L++]=n[N++],0==--M){B=!0;break}if(0!==(O=Kd(a[I],n,N,M,0,t))){for(A=0;A<O;A++)n[L+A]=n[N+A];if(L+=O,N+=O,0==(M-=O)){B=!0;break}}if(n[L++]=a[I++],1==--w){B=!0;break}G--}while(R>=7||O>=7);if(B)break;G<0&&(G=0),G+=2}if((o=G)<1&&(o=1),1===w){for(A=0;A<M;A++)n[L+A]=n[N+A];n[L+M]=a[I]}else{if(0===w)throw new Error;for(A=0;A<w;A++)n[L+A]=a[I+A]}}else{for(A=0;A<M;A++)n[L+A]=n[N+A];n[L+M]=a[I]}else for(A=0;A<w;A++)n[L+A]=a[I+A]}(h,p,g,y):function(_,w,S,M){var A=0;for(A=0;A<M;A++)a[A]=n[S+A];var I=_+w-1,N=M-1,L=S+M-1,R=0,O=0;if(n[L--]=n[I--],0!=--w)if(1!==M){for(var B=o;;){var G=0,W=0,Y=!1;do{if(t(a[N],n[I])<0){if(n[L--]=n[I--],G++,W=0,0==--w){Y=!0;break}}else if(n[L--]=a[N--],W++,G=0,1==--M){Y=!0;break}}while((G|W)<B);if(Y)break;do{if(0!=(G=w-Lu(a[N],n,_,w,w-1,t))){for(w-=G,O=1+(L-=G),R=1+(I-=G),A=G-1;A>=0;A--)n[O+A]=n[R+A];if(0===w){Y=!0;break}}if(n[L--]=a[N--],1==--M){Y=!0;break}if(0!=(W=M-Kd(n[I],a,0,M,M-1,t))){for(M-=W,O=1+(L-=W),R=1+(N-=W),A=0;A<W;A++)n[O+A]=a[R+A];if(M<=1){Y=!0;break}}if(n[L--]=n[I--],0==--w){Y=!0;break}B--}while(G>=7||W>=7);if(Y)break;B<0&&(B=0),B+=2}if((o=B)<1&&(o=1),1===M){for(O=1+(L-=w),R=1+(I-=w),A=w-1;A>=0;A--)n[O+A]=n[R+A];n[L]=a[N]}else{if(0===M)throw new Error;for(R=L-(M-1),A=0;A<M;A++)n[R+A]=a[A]}}else{for(O=1+(L-=w),R=1+(I-=w),A=w-1;A>=0;A--)n[O+A]=n[R+A];n[L]=a[N]}else for(R=L-(M-1),A=0;A<M;A++)n[R+A]=a[A]}(h,p,g,y))}return e=[],r=[],{mergeRuns:function(){for(;i>1;){var c=i-2;if(c>=1&&r[c-1]<=r[c]+r[c+1]||c>=2&&r[c-2]<=r[c]+r[c-1])r[c-1]<r[c+1]&&c--;else if(r[c]>r[c+1])break;l(c)}},forceMergeRuns:function(){for(;i>1;){var c=i-2;c>0&&r[c-1]<r[c+1]&&c--,l(c)}},pushRun:function(c,h){e[i]=c,r[i]=h,i+=1}}}(n,t),l=function(h){for(var p=0;h>=32;)p|=1&h,h>>=1;return h+p}(o);do{if((i=ai(n,e,r,t))<l){var c=o;c>l&&(c=l),Ep(n,e,e+c,e+i,t),i=c}a.pushRun(e,i),a.mergeRuns(),o-=i,e+=i}while(0!==o);a.forceMergeRuns()}}}Z(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){zg.prototype[n]=function(t){var e,r,o=t.zrX,i=t.zrY,a=Ko(this,o,i);if("mouseup"===n&&a||(r=(e=this.findHover(o,i)).target),"mousedown"===n)this._downEl=r,this._downPoint=[t.zrX,t.zrY],this._upEl=r;else if("mouseup"===n)this._upEl=r;else if("click"===n){if(this._downEl!==this._upEl||!this._downPoint||Ae(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(e,n,t)}});var ka=!1;function si(){ka||(ka=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function Ia(n,t){return n.zlevel===t.zlevel?n.z===t.z?n.z2-t.z2:n.z-t.z:n.zlevel-t.zlevel}var Jd=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=Ia}return n.prototype.traverse=function(t,e){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(t,e)},n.prototype.getDisplayList=function(t,e){e=e||!1;var r=this._displayList;return!t&&r.length||this.updateDisplayList(e),r},n.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,r=this._displayList,o=0,i=e.length;o<i;o++)this._updateAndAddDisplayable(e[o],null,t);r.length=this._displayListLen,uo(r,Ia)},n.prototype._updateAndAddDisplayable=function(t,e,r){if(!t.ignore||r){t.beforeUpdate(),t.update(),t.afterUpdate();var o=t.getClipPath();if(t.ignoreClip)e=null;else if(o){e=e?e.slice():[];for(var i=o,a=t;i;)i.parent=a,i.updateTransform(),e.push(i),a=i,i=i.getClipPath()}if(t.childrenRef){for(var l=t.childrenRef(),c=0;c<l.length;c++){var h=l[c];t.__dirty&&(h.__dirty|=1),this._updateAndAddDisplayable(h,e,r)}t.__dirty=0}else{var p=t;e&&e.length?p.__clipPaths=e:p.__clipPaths&&p.__clipPaths.length>0&&(p.__clipPaths=[]),isNaN(p.z)&&(si(),p.z=0),isNaN(p.z2)&&(si(),p.z2=0),isNaN(p.zlevel)&&(si(),p.zlevel=0),this._displayList[this._displayListLen++]=p}var g=t.getDecalElement&&t.getDecalElement();g&&this._updateAndAddDisplayable(g,e,r);var y=t.getTextGuideLine();y&&this._updateAndAddDisplayable(y,e,r);var b=t.getTextContent();b&&this._updateAndAddDisplayable(b,e,r)}},n.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},n.prototype.delRoot=function(t){if(t instanceof Array)for(var e=0,r=t.length;e<r;e++)this.delRoot(t[e]);else{var o=$t(this._roots,t);o>=0&&this._roots.splice(o,1)}},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}(),go=gn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)},Ru={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return.5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return 0===n?0:Math.pow(1024,n-1)},exponentialOut:function(n){return 1===n?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(2-Math.pow(2,-10*(n-1)))},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var t,e=.1;return 0===n?0:1===n?1:(!e||e<1?(e=1,t=.1):t=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/.4))},elasticOut:function(n){var t,e=.1;return 0===n?0:1===n?1:(!e||e<1?(e=1,t=.1):t=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*n)*Math.sin((n-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(n){var t,e=.1;return 0===n?0:1===n?1:(!e||e<1?(e=1,t=.1):t=.4*Math.asin(1/e)/(2*Math.PI),(n*=2)<1?e*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/.4)*-.5:e*Math.pow(2,-10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(n){var t=1.70158;return n*n*((t+1)*n-t)},backOut:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},backInOut:function(n){var t=2.5949095;return(n*=2)<1?n*n*((t+1)*n-t)*.5:.5*((n-=2)*n*((t+1)*n+t)+2)},bounceIn:function(n){return 1-Ru.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?.5*Ru.bounceIn(2*n):.5*Ru.bounceOut(2*n-1)+.5}},Ol=Math.pow,Gi=Math.sqrt,Fg=1e-8,Gg=1e-4,Lp=Gi(3),Ls=1/3,Da=Zt(),Fo=Zt(),Pl=Zt();function Hi(n){return n>-1e-8&&n<Fg}function Ou(n){return n>Fg||n<-1e-8}function er(n,t,e,r,o){var i=1-o;return i*i*(i*n+3*o*t)+o*o*(o*r+3*i*e)}function aa(n,t,e,r,o){var i=1-o;return 3*(((t-n)*i+2*(e-t)*o)*i+(r-e)*o*o)}function ge(n,t,e,r,o,i){var a=r+3*(t-e)-n,l=3*(e-2*t+n),c=3*(t-n),h=n-o,p=l*l-3*a*c,g=l*c-9*a*h,y=c*c-3*l*h,b=0;if(Hi(p)&&Hi(g))Hi(l)?i[0]=0:(B=-c/l)>=0&&B<=1&&(i[b++]=B);else{var _=g*g-4*p*y;if(Hi(_)){var w=g/p,S=-w/2;(B=-l/a+w)>=0&&B<=1&&(i[b++]=B),S>=0&&S<=1&&(i[b++]=S)}else if(_>0){var M=Gi(_),A=p*l+1.5*a*(-g+M),I=p*l+1.5*a*(-g-M);(B=(-l-((A=A<0?-Ol(-A,Ls):Ol(A,Ls))+(I=I<0?-Ol(-I,Ls):Ol(I,Ls))))/(3*a))>=0&&B<=1&&(i[b++]=B)}else{var N=(2*p*l-3*a*g)/(2*Gi(p*p*p)),L=Math.acos(N)/3,R=Gi(p),O=Math.cos(L),B=(-l-2*R*O)/(3*a),G=(S=(-l+R*(O+Lp*Math.sin(L)))/(3*a),(-l+R*(O-Lp*Math.sin(L)))/(3*a));B>=0&&B<=1&&(i[b++]=B),S>=0&&S<=1&&(i[b++]=S),G>=0&&G<=1&&(i[b++]=G)}}return b}function Rc(n,t,e,r,o){var i=6*e-12*t+6*n,a=9*t+3*r-3*n-9*e,l=3*t-3*n,c=0;if(Hi(a))Ou(i)&&(p=-l/i)>=0&&p<=1&&(o[c++]=p);else{var h=i*i-4*a*l;if(Hi(h))o[0]=-i/(2*a);else if(h>0){var p,g=Gi(h),y=(-i-g)/(2*a);(p=(-i+g)/(2*a))>=0&&p<=1&&(o[c++]=p),y>=0&&y<=1&&(o[c++]=y)}}return c}function sa(n,t,e,r,o,i){var a=(t-n)*o+n,l=(e-t)*o+t,c=(r-e)*o+e,h=(l-a)*o+a,p=(c-l)*o+l,g=(p-h)*o+h;i[0]=n,i[1]=a,i[2]=h,i[3]=g,i[4]=g,i[5]=p,i[6]=c,i[7]=r}function xi(n,t,e,r,o,i,a,l,c,h,p){var g,y,b,_,w,S=.005,M=1/0;Da[0]=c,Da[1]=h;for(var A=0;A<1;A+=.05)Fo[0]=er(n,e,o,a,A),Fo[1]=er(t,r,i,l,A),(_=It(Da,Fo))<M&&(g=A,M=_);M=1/0;for(var I=0;I<32&&!(S<Gg);I++)b=g+S,Fo[0]=er(n,e,o,a,y=g-S),Fo[1]=er(t,r,i,l,y),_=It(Fo,Da),y>=0&&_<M?(g=y,M=_):(Pl[0]=er(n,e,o,a,b),Pl[1]=er(t,r,i,l,b),w=It(Pl,Da),b<=1&&w<M?(g=b,M=w):S*=.5);return p&&(p[0]=er(n,e,o,a,g),p[1]=er(t,r,i,l,g)),Gi(M)}function Hg(n,t,e,r,o,i,a,l,c){for(var h=n,p=t,g=0,y=1/c,b=1;b<=c;b++){var _=b*y,w=er(n,e,o,a,_),S=er(t,r,i,l,_),M=w-h,A=S-p;g+=Math.sqrt(M*M+A*A),h=w,p=S}return g}function _n(n,t,e,r){var o=1-r;return o*(o*n+2*r*t)+r*r*e}function Go(n,t,e,r){return 2*((1-r)*(t-n)+r*(e-t))}function Rp(n,t,e){var r=n+e-2*t;return 0===r?.5:(n-t)/r}function _i(n,t,e,r,o){var i=(t-n)*r+n,a=(e-t)*r+t,l=(a-i)*r+i;o[0]=n,o[1]=i,o[2]=l,o[3]=l,o[4]=a,o[5]=e}function Bl(n,t,e,r,o,i,a,l,c){var h,p=.005,g=1/0;Da[0]=a,Da[1]=l;for(var y=0;y<1;y+=.05)Fo[0]=_n(n,e,o,y),Fo[1]=_n(t,r,i,y),(S=It(Da,Fo))<g&&(h=y,g=S);g=1/0;for(var b=0;b<32&&!(p<Gg);b++){var _=h-p,w=h+p;Fo[0]=_n(n,e,o,_),Fo[1]=_n(t,r,i,_);var S=It(Fo,Da);if(_>=0&&S<g)h=_,g=S;else{Pl[0]=_n(n,e,o,w),Pl[1]=_n(t,r,i,w);var M=It(Pl,Da);w<=1&&M<g?(h=w,g=M):p*=.5}}return c&&(c[0]=_n(n,e,o,h),c[1]=_n(t,r,i,h)),Gi(g)}function rs(n,t,e,r,o,i,a){for(var l=n,c=t,h=0,p=1/a,g=1;g<=a;g++){var y=g*p,b=_n(n,e,o,y),_=_n(t,r,i,y),w=b-l,S=_-c;h+=Math.sqrt(w*w+S*S),l=b,c=_}return h}var Op=/cubic-bezier\(([0-9,\.e ]+)\)/;function Pp(n){var t=n&&Op.exec(n);if(t){var e=t[1].split(","),r=+Br(e[0]),o=+Br(e[1]),i=+Br(e[2]),a=+Br(e[3]);if(isNaN(r+o+i+a))return;var l=[];return function(c){return c<=0?0:c>=1?1:ge(0,r,i,1,c,l)&&er(0,o,a,1,l[0])}}}var zl=function(){function n(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||zr,this.ondestroy=t.ondestroy||zr,this.onrestart=t.onrestart||zr,t.easing&&this.setEasing(t.easing)}return n.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),!this._paused){var r=this._life,o=t-this._startTime-this._pausedTime,i=o/r;i<0&&(i=0),i=Math.min(i,1);var a=this.easingFunc,l=a?a(i):i;if(this.onframe(l),1===i){if(!this.loop)return!0;this._startTime=t-o%r,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=e},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Se(t)?t:Ru[t]||Pp(t)},n}(),Oc=function(n){this.value=n},Bp=function(){function n(){this._len=0}return n.prototype.insert=function(t){var e=new Oc(t);return this.insertEntry(e),e},n.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},n.prototype.remove=function(t){var e=t.prev,r=t.next;e?e.next=r:this.head=r,r?r.prev=e:this.tail=e,t.next=t.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),Vl=function(){function n(t){this._list=new Bp,this._maxSize=10,this._map={},this._maxSize=t}return n.prototype.put=function(t,e){var r=this._list,o=this._map,i=null;if(null==o[t]){var a=r.len(),l=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var c=r.head;r.remove(c),delete o[c.key],i=c.value,this._lastRemovedEntry=c}l?l.value=e:l=new Oc(e),l.key=t,r.insertEntry(l),o[t]=l}return i},n.prototype.get=function(t){var e=this._map[t],r=this._list;if(null!=e)return e!==r.tail&&(r.remove(e),r.insertEntry(e)),e.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}(),Lo={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function li(n){return(n=Math.round(n))<0?0:n>255?255:n}function Pu(n){return n<0?0:n>1?1:n}function Fl(n){var t=n;return t.length&&"%"===t.charAt(t.length-1)?li(parseFloat(t)/100*255):li(parseInt(t,10))}function os(n){var t=n;return t.length&&"%"===t.charAt(t.length-1)?Pu(parseFloat(t)/100):Pu(parseFloat(t))}function Pc(n,t,e){return e<0?e+=1:e>1&&(e-=1),6*e<1?n+(t-n)*e*6:2*e<1?t:3*e<2?n+(t-n)*(2/3-e)*6:n}function Rs(n,t,e){return n+(t-n)*e}function Wi(n,t,e,r,o){return n[0]=t,n[1]=e,n[2]=r,n[3]=o,n}function Os(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}var zp=new Vl(20),Qd=null;function Bu(n,t){Qd&&Os(Qd,t),Qd=zp.put(n,Qd||t.slice())}function wi(n,t){if(n){t=t||[];var e=zp.get(n);if(e)return Os(t,e);var r=(n+="").replace(/ /g,"").toLowerCase();if(r in Lo)return Os(t,Lo[r]),Bu(n,t),t;var o,i=r.length;if("#"===r.charAt(0))return 4===i||5===i?(o=parseInt(r.slice(1,4),16))>=0&&o<=4095?(Wi(t,(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,5===i?parseInt(r.slice(4),16)/15:1),Bu(n,t),t):void Wi(t,0,0,0,1):7===i||9===i?(o=parseInt(r.slice(1,7),16))>=0&&o<=16777215?(Wi(t,(16711680&o)>>16,(65280&o)>>8,255&o,9===i?parseInt(r.slice(7),16)/255:1),Bu(n,t),t):void Wi(t,0,0,0,1):void 0;var a=r.indexOf("("),l=r.indexOf(")");if(-1!==a&&l+1===i){var c=r.substr(0,a),h=r.substr(a+1,l-(a+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return 3===h.length?Wi(t,+h[0],+h[1],+h[2],1):Wi(t,0,0,0,1);p=os(h.pop());case"rgb":return h.length>=3?(Wi(t,Fl(h[0]),Fl(h[1]),Fl(h[2]),3===h.length?p:os(h[3])),Bu(n,t),t):void Wi(t,0,0,0,1);case"hsla":return 4!==h.length?void Wi(t,0,0,0,1):(h[3]=os(h[3]),Gl(h,t),Bu(n,t),t);case"hsl":return 3!==h.length?void Wi(t,0,0,0,1):(Gl(h,t),Bu(n,t),t);default:return}}Wi(t,0,0,0,1)}}function Gl(n,t){var e=(parseFloat(n[0])%360+360)%360/360,r=os(n[1]),o=os(n[2]),i=o<=.5?o*(r+1):o+r-o*r,a=2*o-i;return Wi(t=t||[],li(255*Pc(a,i,e+1/3)),li(255*Pc(a,i,e)),li(255*Pc(a,i,e-1/3)),1),4===n.length&&(t[3]=n[3]),t}function Bc(n,t){var e=wi(n);if(e){for(var r=0;r<3;r++)e[r]=t<0?e[r]*(1-t)|0:(255-e[r])*t+e[r]|0,e[r]>255?e[r]=255:e[r]<0&&(e[r]=0);return Jo(e,4===e.length?"rgba":"rgb")}}function la(n,t,e){if(t&&t.length&&n>=0&&n<=1){e=e||[];var r=n*(t.length-1),o=Math.floor(r),i=Math.ceil(r),a=t[o],l=t[i],c=r-o;return e[0]=li(Rs(a[0],l[0],c)),e[1]=li(Rs(a[1],l[1],c)),e[2]=li(Rs(a[2],l[2],c)),e[3]=Pu(Rs(a[3],l[3],c)),e}}var zu=la;function Vp(n,t,e){if(t&&t.length&&n>=0&&n<=1){var r=n*(t.length-1),o=Math.floor(r),i=Math.ceil(r),a=wi(t[o]),l=wi(t[i]),c=r-o,h=Jo([li(Rs(a[0],l[0],c)),li(Rs(a[1],l[1],c)),li(Rs(a[2],l[2],c)),Pu(Rs(a[3],l[3],c))],"rgba");return e?{color:h,leftIndex:o,rightIndex:i,value:r}:h}}var zc=Vp;function al(n,t,e,r){var i,o=wi(n);if(n)return o=function(i){if(i){var a,l,c=i[0]/255,h=i[1]/255,p=i[2]/255,g=Math.min(c,h,p),y=Math.max(c,h,p),b=y-g,_=(y+g)/2;if(0===b)a=0,l=0;else{l=_<.5?b/(y+g):b/(2-y-g);var w=((y-c)/6+b/2)/b,S=((y-h)/6+b/2)/b,M=((y-p)/6+b/2)/b;c===y?a=M-S:h===y?a=1/3+w-M:p===y&&(a=2/3+S-w),a<0&&(a+=1),a>1&&(a-=1)}var A=[360*a,l,_];return null!=i[3]&&A.push(i[3]),A}}(o),null!=t&&(o[0]=(i=t,(i=Math.round(i))<0?0:i>360?360:i)),null!=e&&(o[1]=os(e)),null!=r&&(o[2]=os(r)),Jo(Gl(o),"rgba")}function is(n,t){var e=wi(n);if(e&&null!=t)return e[3]=Pu(t),Jo(e,"rgba")}function Jo(n,t){if(n&&n.length){var e=n[0]+","+n[1]+","+n[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(e+=","+n[3]),t+"("+e+")"}}function eh(n,t){var e=wi(n);return e?(.299*e[0]+.587*e[1]+.114*e[2])*e[3]/255+(1-e[3])*t:0}var Vc=new Vl(100);function th(n){if(bt(n)){var t=Vc.get(n);return t||(t=Bc(n,-.1),Vc.put(n,t)),t}if(rt(n)){var e=De({},n);return e.colorStops=j(n.colorStops,function(r){return{offset:r.offset,color:Bc(r.color,-.1)}}),e}return n}var Tv=Object.freeze({__proto__:null,parse:wi,lift:Bc,toHex:function(n){var t=wi(n);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)},fastLerp:la,fastMapToColor:zu,lerp:Vp,mapToColor:zc,modifyHSL:al,modifyAlpha:is,stringify:Jo,lum:eh,random:function(){return Jo([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")},liftColor:th}),Vu=Math.round;function Si(n){var t;if(n&&"transparent"!==n){if("string"==typeof n&&n.indexOf("rgba")>-1){var e=wi(n);e&&(n="rgb("+e[0]+","+e[1]+","+e[2]+")",t=e[3])}}else n="none";return{color:n,opacity:t??1}}var Av=1e-4;function as(n){return n<Av&&n>-1e-4}function Fu(n){return Vu(1e3*n)/1e3}function Gu(n){return Vu(1e4*n)/1e4}var Ho={left:"start",right:"end",center:"middle",middle:"middle"};function ss(n){return n&&!!n.image}function Hl(n){return ss(n)||(t=n)&&!!t.svgElement;var t}function q(n){return"linear"===n.type}function Q(n){return"radial"===n.type}function ee(n){return n&&("linear"===n.type||"radial"===n.type)}function ae(n){return"url(#"+n+")"}function be(n){var t=n.getGlobalScale(),e=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(e)/Math.log(10)),1)}function Te(n){var t=n.x||0,e=n.y||0,r=(n.rotation||0)*Ts,o=We(n.scaleX,1),i=We(n.scaleY,1),a=n.skewX||0,l=n.skewY||0,c=[];return(t||e)&&c.push("translate("+t+"px,"+e+"px)"),r&&c.push("rotate("+r+")"),1===o&&1===i||c.push("scale("+o+","+i+")"),(a||l)&&c.push("skew("+Vu(a*Ts)+"deg, "+Vu(l*Ts)+"deg)"),c.join(" ")}var Ue=gn.hasGlobalWindow&&Se(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null},it=Array.prototype.slice;function $e(n,t,e){return(t-n)*e+n}function ot(n,t,e,r){for(var o=t.length,i=0;i<o;i++)n[i]=$e(t[i],e[i],r);return n}function Nt(n,t,e,r){for(var o=t.length,i=0;i<o;i++)n[i]=t[i]+e[i]*r;return n}function Rt(n,t,e,r){for(var o=t.length,i=o&&t[0].length,a=0;a<o;a++){n[a]||(n[a]=[]);for(var l=0;l<i;l++)n[a][l]=t[a][l]+e[a][l]*r}return n}function Zn(n,t){for(var e=n.length,r=t.length,o=e>r?t:n,i=Math.min(e,r),a=o[i-1]||{color:[0,0,0,0],offset:0},l=i;l<Math.max(e,r);l++)o.push({offset:a.offset,color:a.color.slice()})}function nn(n,t,e){var r=n,o=t;if(r.push&&o.push){var i=r.length,a=o.length;if(i!==a)if(i>a)r.length=a;else for(var l=i;l<a;l++)r.push(1===e?o[l]:it.call(o[l]));var c=r[0]&&r[0].length;for(l=0;l<r.length;l++)if(1===e)isNaN(r[l])&&(r[l]=o[l]);else for(var h=0;h<c;h++)isNaN(r[l][h])&&(r[l][h]=o[l][h])}}function fn(n){if(Mn(n)){var t=n.length;if(Mn(n[0])){for(var e=[],r=0;r<t;r++)e.push(it.call(n[r]));return e}return it.call(n)}return n}function Bn(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=null==n[3]?1:n[3],"rgba("+n.join(",")+")"}function Gt(n){return 4===n||5===n}function un(n){return 1===n||2===n}var Nn=[0,0,0,0],Un=function(){function n(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(t,e,r){this._needsSort=!0;var b,o=this.keyframes,i=o.length,a=!1,l=6,c=e;if(Mn(e)){var h=Mn((b=e)&&b[0])?2:1;l=h,(1===h&&!dt(e[0])||2===h&&!dt(e[0][0]))&&(a=!0)}else if(dt(e)&&!lt(e))l=0;else if(bt(e))if(isNaN(+e)){var p=wi(e);p&&(c=p,l=3)}else l=0;else if(rt(e)){var g=De({},c);g.colorStops=j(e.colorStops,function(b){return{offset:b.offset,color:wi(b.color)}}),q(e)?l=4:Q(e)&&(l=5),c=g}0===i?this.valType=l:l===this.valType&&6!==l||(a=!0),this.discrete=this.discrete||a;var y={time:t,value:c,rawValue:e,percent:0};return r&&(y.easing=r,y.easingFunc=Se(r)?r:Ru[r]||Pp(r)),o.push(y),y},n.prototype.prepare=function(t,e){var r=this.keyframes;this._needsSort&&r.sort(function(w,S){return w.time-S.time});for(var o=this.valType,i=r.length,a=r[i-1],l=this.discrete,c=un(o),h=Gt(o),p=0;p<i;p++){var g=r[p],y=g.value,b=a.value;g.percent=g.time/t,l||(c&&p!==i-1?nn(y,b,o):h&&Zn(y.colorStops,b.colorStops))}if(!l&&5!==o&&e&&this.needsAnimate()&&e.needsAnimate()&&o===e.valType&&!e._finished){this._additiveTrack=e;var _=r[0].value;for(p=0;p<i;p++)0===o?r[p].additiveValue=r[p].value-_:3===o?r[p].additiveValue=Nt([],r[p].value,_,-1):un(o)&&(r[p].additiveValue=1===o?Nt([],r[p].value,_,-1):Rt([],r[p].value,_,-1))}},n.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r,o,i,a=null!=this._additiveTrack,l=a?"additiveValue":"value",c=this.valType,h=this.keyframes,p=h.length,g=this.propName,y=3===c,b=this._lastFr,_=Math.min;if(1===p)o=i=h[0];else{if(e<0)r=0;else if(e<this._lastFrP){for(r=_(b+1,p-1);r>=0&&!(h[r].percent<=e);r--);r=_(r,p-2)}else{for(r=b;r<p&&!(h[r].percent>e);r++);r=_(r-1,p-2)}i=h[r+1],o=h[r]}if(o&&i){this._lastFr=r,this._lastFrP=e;var w=i.percent-o.percent,S=0===w?1:_((e-o.percent)/w,1);i.easingFunc&&(S=i.easingFunc(S));var M=a?this._additiveValue:y?Nn:t[g];if(!un(c)&&!y||M||(M=this._additiveValue=[]),this.discrete)t[g]=S<1?o.rawValue:i.rawValue;else if(un(c))1===c?ot(M,o[l],i[l],S):function(R,O,B,G){for(var W=O.length,Y=W&&O[0].length,X=0;X<W;X++){R[X]||(R[X]=[]);for(var J=0;J<Y;J++)R[X][J]=$e(O[X][J],B[X][J],G)}}(M,o[l],i[l],S);else if(Gt(c)){var A=o[l],I=i[l],N=4===c;t[g]={type:N?"linear":"radial",x:$e(A.x,I.x,S),y:$e(A.y,I.y,S),colorStops:j(A.colorStops,function(R,O){var B=I.colorStops[O];return{offset:$e(R.offset,B.offset,S),color:Bn(ot([],R.color,B.color,S))}}),global:I.global},N?(t[g].x2=$e(A.x2,I.x2,S),t[g].y2=$e(A.y2,I.y2,S)):t[g].r=$e(A.r,I.r,S)}else if(y)ot(M,o[l],i[l],S),a||(t[g]=Bn(M));else{var L=$e(o[l],i[l],S);a?this._additiveValue=L:t[g]=L}a&&this._addToTarget(t)}}},n.prototype._addToTarget=function(t){var e=this.valType,r=this.propName,o=this._additiveValue;0===e?t[r]=t[r]+o:3===e?(wi(t[r],Nn),Nt(Nn,Nn,o,1),t[r]=Bn(Nn)):1===e?Nt(t[r],t[r],o,1):2===e&&Rt(t[r],t[r],o,1)},n}(),jn=function(){function n(t,e,r,o){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&o?Lr("Can' use additive animation on looped animation."):(this._additiveAnimators=o,this._allowDiscrete=r)}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(t){this._target=t},n.prototype.when=function(t,e,r){return this.whenWithKeys(t,e,vn(e),r)},n.prototype.whenWithKeys=function(t,e,r,o){for(var i=this._tracks,a=0;a<r.length;a++){var l=r[a],c=i[l];if(!c){c=i[l]=new Un(l);var h=void 0,p=this._getAdditiveTrack(l);if(p){var g=p.keyframes,y=g[g.length-1];h=y&&y.value,3===p.valType&&h&&(h=Bn(h))}else h=this._target[l];if(null==h)continue;t>0&&c.addKeyframe(0,fn(h),o),this._trackKeys.push(l)}c.addKeyframe(t,fn(e[l]),o)}return this._maxTime=Math.max(this._maxTime,t),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,r=0;r<e;r++)t[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var r=0;r<e.length;r++)e[r].call(this)},n.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,r=0;r<e.length;r++)t[e[r]].setFinished()},n.prototype._getAdditiveTrack=function(t){var e,r=this._additiveAnimators;if(r)for(var o=0;o<r.length;o++){var i=r[o].getTrack(t);i&&(e=i)}return e},n.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,r=[],o=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var a=this._trackKeys[i],l=this._tracks[a],c=this._getAdditiveTrack(a),h=l.keyframes,p=h.length;if(l.prepare(o,c),l.needsAnimate())if(!this._allowDiscrete&&l.discrete){var g=h[p-1];g&&(e._target[l.propName]=g.rawValue),l.setFinished()}else r.push(l)}if(r.length||this._force){var y=new zl({life:o,loop:this._loop,delay:this._delay||0,onframe:function(b){e._started=2;var _=e._additiveAnimators;if(_){for(var w=!1,S=0;S<_.length;S++)if(_[S]._clip){w=!0;break}w||(e._additiveAnimators=null)}for(S=0;S<r.length;S++)r[S].step(e._target,b);var M=e._onframeCbs;if(M)for(S=0;S<M.length;S++)M[S](e._target,b)},ondestroy:function(){e._doneCallback()}});this._clip=y,this.animation&&this.animation.addClip(y),t&&y.setEasing(t)}else this._doneCallback();return this}},n.prototype.stop=function(t){this._clip&&(t&&this._clip.onframe(1),this._abortedCallback())},n.prototype.delay=function(t){return this._delay=t,this},n.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},n.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},n.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(t){return this._tracks[t]},n.prototype.getTracks=function(){var t=this;return j(this._trackKeys,function(e){return t._tracks[e]})},n.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var r=this._tracks,o=this._trackKeys,i=0;i<t.length;i++){var a=r[t[i]];a&&!a.isFinished()&&(e?a.step(this._target,1):1===this._started&&a.step(this._target,0),a.setFinished())}var l=!0;for(i=0;i<o.length;i++)if(!r[o[i]].isFinished()){l=!1;break}return l&&this._abortedCallback(),l},n.prototype.saveTo=function(t,e,r){if(t){e=e||this._trackKeys;for(var o=0;o<e.length;o++){var i=e[o],a=this._tracks[i];if(a&&!a.isFinished()){var l=a.keyframes,c=l[r?0:l.length-1];c&&(t[i]=fn(c.rawValue))}}}},n.prototype.__changeFinalValue=function(t,e){e=e||vn(t);for(var r=0;r<e.length;r++){var o=e[r],i=this._tracks[o];if(i){var a=i.keyframes;if(a.length>1){var l=a.pop();i.addKeyframe(l.time,t[o]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},n}();function zn(){return(new Date).getTime()}var eo,Qo,Ui=function(n){function t(e){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,r.stage=(e=e||{}).stage||{},r}return Ce(t,n),t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var r=e.getClip();r&&this.addClip(r)},t.prototype.removeClip=function(e){if(e.animation){var r=e.prev,o=e.next;r?r.next=o:this._head=o,o?o.prev=r:this._tail=r,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var r=e.getClip();r&&this.removeClip(r),e.animation=null},t.prototype.update=function(e){for(var r=zn()-this._pausedTime,o=r-this._time,i=this._head;i;){var a=i.next;i.step(r,o)&&(i.ondestroy(),this.removeClip(i)),i=a}this._time=r,e||(this.trigger("frame",o),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0,go(function r(){e._running&&(go(r),!e._paused&&e.update())})},t.prototype.start=function(){this._running||(this._time=zn(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=zn(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=zn()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var r=e.next;e.prev=e.next=e.animation=null,e=r}this._head=this._tail=null},t.prototype.isFinished=function(){return null==this._head},t.prototype.animate=function(e,r){r=r||{},this.start();var o=new jn(e,r.loop);return this.addAnimator(o),o},t}(xn),fr=gn.domSupported,Na=(Qo={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:eo=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:j(eo,function(n){var t=n.replace("mouse","pointer");return Qo.hasOwnProperty(t)?t:n})}),Ro=["mousemove","mouseup"],t_=["pointermove","pointerup"],rA=!1;function Fc(n){var t=n.pointerType;return"pen"===t||"touch"===t}function kv(n){n&&(n.zrByTouch=!0)}function n_(n,t){for(var e=t,r=!1;e&&9!==e.nodeType&&!(r=e.domBelongToZr||e!==t&&e===n.painterRoot);)e=e.parentNode;return r}var nh=function(n,t){this.stopPropagation=zr,this.stopImmediatePropagation=zr,this.preventDefault=zr,this.type=t.type,this.target=this.currentTarget=n.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY},Ea={mousedown:function(n){n=Xr(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=Xr(this.dom,n);var t=this.__mayPointerCapture;!t||n.zrX===t[0]&&n.zrY===t[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=Xr(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n_(this,(n=Xr(this.dom,n)).toElement||n.relatedTarget)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){rA=!0,n=Xr(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){rA||(n=Xr(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){kv(n=Xr(this.dom,n)),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),Ea.mousemove.call(this,n),Ea.mousedown.call(this,n)},touchmove:function(n){kv(n=Xr(this.dom,n)),this.handler.processGesture(n,"change"),Ea.mousemove.call(this,n)},touchend:function(n){kv(n=Xr(this.dom,n)),this.handler.processGesture(n,"end"),Ea.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<300&&Ea.click.call(this,n)},pointerdown:function(n){Ea.mousedown.call(this,n)},pointermove:function(n){Fc(n)||Ea.mousemove.call(this,n)},pointerup:function(n){Ea.mouseup.call(this,n)},pointerout:function(n){Fc(n)||Ea.mouseout.call(this,n)}};Z(["click","dblclick","contextmenu"],function(n){Ea[n]=function(t){t=Xr(this.dom,t),this.trigger(n,t)}});var Bt={pointermove:function(n){Fc(n)||Bt.mousemove.call(this,n)},pointerup:function(n){Bt.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),t&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function La(n,t,e,r){n.mounted[t]=e,n.listenerOpts[t]=r,jd(n.domTarget,t,e,r)}function Fp(n){var i=n.mounted;for(var a in i)i.hasOwnProperty(a)&&n.domTarget.removeEventListener(a,i[a],n.listenerOpts[a]);n.mounted={}}var Gc=function(n,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=t},Wl=function(n){function t(e,r){var o=n.call(this)||this;return o.__pointerCapturing=!1,o.dom=e,o.painterRoot=r,o._localHandlerScope=new Gc(e,Ea),fr&&(o._globalHandlerScope=new Gc(document,Bt)),function Hu(n,t){var e=t.domHandlers;gn.pointerEventsSupported?Z(Na.pointer,function(r){La(t,r,function(o){e[r].call(n,o)})}):(gn.touchEventsSupported&&Z(Na.touch,function(r){La(t,r,function(o){var i;e[r].call(n,o),(i=t).touching=!0,null!=i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null),i.touchTimer=setTimeout(function(){i.touching=!1,i.touchTimer=null},700)})}),Z(Na.mouse,function(r){La(t,r,function(o){o=kp(o),t.touching||e[r].call(n,o)})}))}(o,o._localHandlerScope),o}return Ce(t,n),t.prototype.dispose=function(){Fp(this._localHandlerScope),fr&&Fp(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,fr&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var r=this._globalHandlerScope;e?function Wg(n,t){function e(r){La(t,r,function(o){var i;o=kp(o),n_(n,o.target)||(o=Xr((i=n).dom,new nh(i,o),!0),t.domHandlers[r].call(n,o))},{capture:!0})}gn.pointerEventsSupported?Z(t_,e):gn.touchEventsSupported||Z(Ro,e)}(this,r):Fp(r)}},t}(xn),r_=1;gn.hasGlobalWindow&&(r_=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Gp=r_,Je="#333",o_="#ccc",oA=qd,Hc=5e-5;function sl(n){return n>Hc||n<-5e-5}var Wu=[],Rr=[],Iv=[1,0,0,1,0,0],Ra=Math.abs,dr=function(){function n(){}return n.prototype.getLocalTransform=function(t){return n.getLocalTransform(this,t)},n.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},n.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},n.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},n.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},n.prototype.needLocalTransform=function(){return sl(this.rotation)||sl(this.x)||sl(this.y)||sl(this.scaleX-1)||sl(this.scaleY-1)||sl(this.skewX)||sl(this.skewY)},n.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),r=this.transform;e||t?(r=r||[1,0,0,1,0,0],e?this.getLocalTransform(r):oA(r),t&&(e?Ta(r,t,r):Ds(r,t)),this.transform=r,this._resolveGlobalScaleRatio(r)):r&&(oA(r),this.invTransform=null)},n.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(null!=e&&1!==e){this.getGlobalScale(Wu);var r=Wu[0]<0?-1:1,o=Wu[1]<0?-1:1,i=((Wu[0]-r)*e+r)/Wu[0]||0,a=((Wu[1]-o)*e+o)/Wu[1]||0;t[0]*=i,t[1]*=i,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||[1,0,0,1,0,0],Ns(this.invTransform,t)},n.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},n.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],r=t[2]*t[2]+t[3]*t[3],o=Math.atan2(t[1],t[0]),i=Math.PI/2+o-Math.atan2(t[3],t[2]);r=Math.sqrt(r)*Math.cos(i),e=Math.sqrt(e),this.skewX=i,this.skewY=0,this.rotation=-o,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||[1,0,0,1,0,0],Ta(Rr,t.invTransform,e),e=Rr);var r=this.originX,o=this.originY;(r||o)&&(Iv[4]=r,Iv[5]=o,Ta(Rr,e,Iv),Rr[4]-=r,Rr[5]-=o,e=Rr),this.setLocalTransform(e)}},n.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},n.prototype.transformCoordToLocal=function(t,e){var r=[t,e],o=this.invTransform;return o&&Ye(r,r,o),r},n.prototype.transformCoordToGlobal=function(t,e){var r=[t,e],o=this.transform;return o&&Ye(r,r,o),r},n.prototype.getLineScale=function(){var t=this.transform;return t&&Ra(t[0]-1)>1e-10&&Ra(t[3]-1)>1e-10?Math.sqrt(Ra(t[0]*t[3]-t[2]*t[1])):1},n.prototype.copyTransform=function(t){iA(this,t)},n.getLocalTransform=function(t,e){e=e||[];var r=t.originX||0,o=t.originY||0,i=t.scaleX,a=t.scaleY,l=t.anchorX,c=t.anchorY,h=t.rotation||0,p=t.x,g=t.y,y=t.skewX?Math.tan(t.skewX):0,b=t.skewY?Math.tan(-t.skewY):0;if(r||o||l||c){var _=r+l,w=o+c;e[4]=-_*i-y*w*a,e[5]=-w*a-b*_*i}else e[4]=e[5]=0;return e[0]=i,e[3]=a,e[1]=b*i,e[2]=y*a,h&&Eo(e,e,h),e[4]+=r+p,e[5]+=o+g,e},n.initDefaultProps=((t=n.prototype).scaleX=t.scaleY=t.globalScaleRatio=1,void(t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0)),n;var t}(),ls=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function iA(n,t){for(var e=0;e<ls.length;e++){var r=ls[e];n[r]=t[r]}}var ll={};function us(n,t){var e=ll[t=t||an];e||(e=ll[t]=new Vl(500));var r=e.get(n);return null==r&&(r=Tn.measureText(n,t).width,e.put(n,r)),r}function Dv(n,t,e,r){var o=us(n,t),i=Nv(t),a=Hp(0,o,e),l=Wp(0,i,r);return new Kt(a,l,o,i)}function Ug(n,t,e,r){var o=((n||"")+"").split("\n");if(1===o.length)return Dv(o[0],t,e,r);for(var i=new Kt(0,0,0,0),a=0;a<o.length;a++){var l=Dv(o[a],t,e,r);0===a?i.copy(l):i.union(l)}return i}function Hp(n,t,e){return"right"===e?n-=t:"center"===e&&(n-=t/2),n}function Wp(n,t,e){return"middle"===e?n-=t/2:"bottom"===e&&(n-=t),n}function Nv(n){return us("\u56fd",n)}function cs(n,t){return"string"==typeof n?n.lastIndexOf("%")>=0?parseFloat(n)/100*t:parseFloat(n):n}function Ps(n,t,e){var r=t.position||"inside",o=null!=t.distance?t.distance:5,i=e.height,a=e.width,l=i/2,c=e.x,h=e.y,p="left",g="top";if(r instanceof Array)c+=cs(r[0],e.width),h+=cs(r[1],e.height),p=null,g=null;else switch(r){case"left":c-=o,h+=l,p="right",g="middle";break;case"right":c+=o+a,h+=l,g="middle";break;case"top":c+=a/2,h-=o,p="center",g="bottom";break;case"bottom":c+=a/2,h+=i+o,p="center";break;case"inside":c+=a/2,h+=l,p="center",g="middle";break;case"insideLeft":c+=o,h+=l,g="middle";break;case"insideRight":c+=a-o,h+=l,p="right",g="middle";break;case"insideTop":c+=a/2,h+=o,p="center";break;case"insideBottom":c+=a/2,h+=i-o,p="center",g="bottom";break;case"insideTopLeft":c+=o,h+=o;break;case"insideTopRight":c+=a-o,h+=o,p="right";break;case"insideBottomLeft":c+=o,h+=i-o,g="bottom";break;case"insideBottomRight":c+=a-o,h+=i-o,p="right",g="bottom"}return(n=n||{}).x=c,n.y=h,n.align=p,n.verticalAlign=g,n}var Wo="__zr_normal__",Ev=ls.concat(["ignore"]),Oo=Jr(ls,function(n,t){return n[t]=!0,n},{ignore:!1}),Up={},Uu=new Kt(0,0,0,0),jg=function(){function n(t){this.id=Qt(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return n.prototype._init=function(t){this.attr(t)},n.prototype.drift=function(t,e,r){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var o=this.transform;o||(o=this.transform=[1,0,0,1,0,0]),o[4]+=t,o[5]+=e,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var r=this.textConfig,o=r.local,i=e.innerTransformable,a=void 0,l=void 0,c=!1;i.parent=o?this:null;var h=!1;if(i.copyTransform(e),null!=r.position){var p=Uu;p.copy(r.layoutRect?r.layoutRect:this.getBoundingRect()),o||p.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Up,r,p):Ps(Up,r,p),i.x=Up.x,i.y=Up.y,a=Up.align,l=Up.verticalAlign;var g=r.origin;if(g&&null!=r.rotation){var y=void 0,b=void 0;"center"===g?(y=.5*p.width,b=.5*p.height):(y=cs(g[0],p.width),b=cs(g[1],p.height)),h=!0,i.originX=-i.x+y+(o?0:p.x),i.originY=-i.y+b+(o?0:p.y)}}null!=r.rotation&&(i.rotation=r.rotation);var _=r.offset;_&&(i.x+=_[0],i.y+=_[1],h||(i.originX=-_[0],i.originY=-_[1]));var w=null==r.inside?"string"==typeof r.position&&r.position.indexOf("inside")>=0:r.inside,S=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),M=void 0,A=void 0,I=void 0;w&&this.canBeInsideText()?(A=r.insideStroke,null!=(M=r.insideFill)&&"auto"!==M||(M=this.getInsideTextFill()),null!=A&&"auto"!==A||(A=this.getInsideTextStroke(M),I=!0)):(A=r.outsideStroke,null!=(M=r.outsideFill)&&"auto"!==M||(M=this.getOutsideFill()),null!=A&&"auto"!==A||(A=this.getOutsideStroke(M),I=!0)),(M=M||"#000")===S.fill&&A===S.stroke&&I===S.autoStroke&&a===S.align&&l===S.verticalAlign||(c=!0,S.fill=M,S.stroke=A,S.autoStroke=I,S.align=a,S.verticalAlign=l,e.setDefaultTextStyle(S)),e.__dirty|=1,c&&e.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(t){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?o_:Je},n.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),r="string"==typeof e&&wi(e);r||(r=[255,255,255,1]);for(var o=r[3],i=this.__zr.isDarkMode(),a=0;a<3;a++)r[a]=r[a]*o+(i?0:255)*(1-o);return r[3]=1,Jo(r,"rgba")},n.prototype.traverse=function(t,e){},n.prototype.attrKV=function(t,e){"textConfig"===t?this.setTextConfig(e):"textContent"===t?this.setTextContent(e):"clipPath"===t?this.setClipPath(e):"extra"===t?(this.extra=this.extra||{},De(this.extra,e)):this[t]=e},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(Ft(t))for(var r=vn(t),o=0;o<r.length;o++){var i=r[o];this.attrKV(i,t[i])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,r=0;r<this.animators.length;r++){var o=this.animators[r],i=o.__fromStateTransition;if(!(o.getLoop()||i&&i!==Wo)){var a=o.targetName;o.saveTo(a?e[a]:e)}}},n.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,Ev)},n.prototype._savePrimaryToNormal=function(t,e,r){for(var o=0;o<r.length;o++){var i=r[o];null==t[i]||i in e||(e[i]=this[i])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(t){return this.states[t]},n.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},n.prototype.clearStates=function(t){this.useState(Wo,!1,t)},n.prototype.useState=function(t,e,r,o){var i=t===Wo;if(this.hasState()||!i){var a=this.currentStates,l=this.stateTransition;if(!($t(a,t)>=0)||!e&&1!==a.length){var c;if(this.stateProxy&&!i&&(c=this.stateProxy(t)),c||(c=this.states&&this.states[t]),c||i){i||this.saveCurrentToNormalState(c);var h=!!(c&&c.hoverLayer||o);h&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,c,this._normalState,e,!r&&!this.__inHover&&l&&l.duration>0,l);var p=this._textContent,g=this._textGuide;return p&&p.useState(t,e,r,h),g&&g.useState(t,e,r,h),i?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),c}Lr("State "+t+" not exists.")}}},n.prototype.useStates=function(t,e,r){if(t.length){var o=[],i=this.currentStates,a=t.length,l=a===i.length;if(l)for(var c=0;c<a;c++)if(t[c]!==i[c]){l=!1;break}if(l)return;for(c=0;c<a;c++){var h=t[c],p=void 0;this.stateProxy&&(p=this.stateProxy(h,t)),p||(p=this.states[h]),p&&o.push(p)}var g=o[a-1],y=!!(g&&g.hoverLayer||r);y&&this._toggleHoverLayerFlag(!0);var b=this._mergeStates(o),_=this.stateTransition;this.saveCurrentToNormalState(b),this._applyStateObj(t.join(","),b,this._normalState,!1,!e&&!this.__inHover&&_&&_.duration>0,_);var w=this._textContent,S=this._textGuide;w&&w.useStates(t,e,y),S&&S.useStates(t,e,y),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!y&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}else this.clearStates()},n.prototype.isSilent=function(){for(var t=this.silent,e=this.parent;!t&&e;){if(e.silent){t=!0;break}e=e.parent}return t},n.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},n.prototype.removeState=function(t){var e=$t(this.currentStates,t);if(e>=0){var r=this.currentStates.slice();r.splice(e,1),this.useStates(r)}},n.prototype.replaceState=function(t,e,r){var o=this.currentStates.slice(),i=$t(o,t),a=$t(o,e)>=0;i>=0?a?o.splice(i,1):o[i]=e:r&&!a&&o.push(e),this.useStates(o)},n.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},n.prototype._mergeStates=function(t){for(var e,r={},o=0;o<t.length;o++){var i=t[o];De(r,i),i.textConfig&&De(e=e||{},i.textConfig)}return e&&(r.textConfig=e),r},n.prototype._applyStateObj=function(t,e,r,o,i,a){var l=!(e&&o);e&&e.textConfig?(this.textConfig=De({},o?this.textConfig:r.textConfig),De(this.textConfig,e.textConfig)):l&&r.textConfig&&(this.textConfig=r.textConfig);for(var c={},h=!1,p=0;p<Ev.length;p++){var g=Ev[p],y=i&&Oo[g];e&&null!=e[g]?y?(h=!0,c[g]=e[g]):this[g]=e[g]:l&&null!=r[g]&&(y?(h=!0,c[g]=r[g]):this[g]=r[g])}if(!i)for(p=0;p<this.animators.length;p++){var b=this.animators[p],_=b.targetName;b.getLoop()||b.__changeFinalValue(_?(e||r)[_]:e||r)}h&&this._transitionState(t,c,a)},n.prototype._attachComponent=function(t){if((!t.__zr||t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},n.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},n.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new dr,this._attachComponent(t),this._textContent=t,this.markRedraw())},n.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),De(this.textConfig,t),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=1;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,r=this._textGuide;e&&(e.__inHover=t),r&&(r.__inHover=t)},n.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var r=0;r<e.length;r++)t.animation.addAnimator(e[r]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},n.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var r=0;r<e.length;r++)t.animation.removeAnimator(e[r]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},n.prototype.animate=function(t,e,r){var i=new jn(t?this[t]:this,e,r);return t&&(i.targetName=t),this.addAnimator(i,t),i},n.prototype.addAnimator=function(t,e){var r=this.__zr,o=this;t.during(function(){o.updateDuringAnimation(e)}).done(function(){var i=o.animators,a=$t(i,t);a>=0&&i.splice(a,1)}),this.animators.push(t),r&&r.animation.addAnimator(t),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(t){this.markRedraw()},n.prototype.stopAnimation=function(t,e){for(var r=this.animators,o=r.length,i=[],a=0;a<o;a++){var l=r[a];t&&t!==l.scope?i.push(l):l.stop(e)}return this.animators=i,this},n.prototype.animateTo=function(t,e,r){ju(this,t,e,r)},n.prototype.animateFrom=function(t,e,r){ju(this,t,e,r,!0)},n.prototype._transitionState=function(t,e,r,o){for(var i=ju(this,e,r,o),a=0;a<i.length;a++)i[a].__fromStateTransition=t},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var t=n.prototype;function e(r,o,i,a){function l(c,h){Object.defineProperty(h,0,{get:function(){return c[i]},set:function(p){c[i]=p}}),Object.defineProperty(h,1,{get:function(){return c[a]},set:function(p){c[a]=p}})}Object.defineProperty(t,r,{get:function(){return this[o]||l(this,this[o]=[]),this[o]},set:function(c){this[i]=c[0],this[a]=c[1],this[o]=c,l(this,c)}})}t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=1,Object.defineProperty&&(e("position","_legacyPos","x","y"),e("scale","_legacyScale","scaleX","scaleY"),e("origin","_legacyOrigin","originX","originY"))}(),n}();function ju(n,t,e,r,o){var i=[];sA(n,"",n,t,e=e||{},r,i,o);var a=i.length,l=!1,c=e.done,h=e.aborted,p=function(){l=!0,--a<=0&&(l?c&&c():h&&h())},g=function(){--a<=0&&(l?c&&c():h&&h())};a||c&&c(),i.length>0&&e.during&&i[0].during(function(_,w){e.during(w)});for(var y=0;y<i.length;y++){var b=i[y];p&&b.done(p),g&&b.aborted(g),e.force&&b.duration(e.duration),b.start(e.easing)}return i}function Yg(n,t,e){for(var r=0;r<e;r++)n[r]=t[r]}function aA(n,t,e){if(Mn(t[e]))if(Mn(n[e])||(n[e]=[]),ao(t[e])){var r=t[e].length;n[e].length!==r&&(n[e]=new t[e].constructor(r),Yg(n[e],t[e],r))}else{var o=t[e],i=n[e],a=o.length;if(Mn(o[0]))for(var l=o[0].length,c=0;c<a;c++)i[c]?Yg(i[c],o[c],l):i[c]=Array.prototype.slice.call(o[c]);else Yg(i,o,a);i.length=o.length}else n[e]=t[e]}function sA(n,t,e,r,o,i,a,l){for(var c=vn(r),h=o.duration,p=o.delay,g=o.additive,y=o.setToFinal,b=!Ft(i),_=n.animators,w=[],S=0;S<c.length;S++){var M=c[S],A=r[M];if(null!=A&&null!=e[M]&&(b||i[M]))if(!Ft(A)||Mn(A)||rt(A))w.push(M);else{if(t){l||(e[M]=A,n.updateDuringAnimation(t));continue}sA(n,M,e[M],A,o,i&&i[M],a,l)}else l||(e[M]=A,n.updateDuringAnimation(t),w.push(M))}var I=w.length;if(!g&&I)for(var N=0;N<_.length;N++)if((R=_[N]).targetName===t&&R.stopTracks(w)){var L=$t(_,R);_.splice(L,1)}if(o.force||(I=(w=Xn(w,function(W){return!((Y=r[W])===(X=e[W])||Mn(Y)&&Mn(X)&&function(J,ne){var oe=J.length;if(oe!==ne.length)return!1;for(var ie=0;ie<oe;ie++)if(J[ie]!==ne[ie])return!1;return!0}(Y,X));var Y,X})).length),I>0||o.force&&!a.length){var R,O=void 0,B=void 0,G=void 0;if(l)for(B={},y&&(O={}),N=0;N<I;N++)B[M=w[N]]=e[M],y?O[M]=r[M]:e[M]=r[M];else if(y)for(G={},N=0;N<I;N++)G[M=w[N]]=fn(e[M]),aA(e,r,M);(R=new jn(e,!1,!1,g?Xn(_,function(W){return W.targetName===t}):null)).targetName=t,o.scope&&(R.scope=o.scope),y&&O&&R.whenWithKeys(0,O,w),G&&R.whenWithKeys(0,G,w),R.whenWithKeys(h??500,l?B:r,w).delay(p||0),n.addAnimator(R,t),a.push(R)}}ur(jg,xn),ur(jg,dr);var on=function(n){function t(e){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(e),r}return Ce(t,n),t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var r=this._children,o=0;o<r.length;o++)if(r[o].name===e)return r[o]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,r){if(e&&e!==this&&e.parent!==this&&r&&r.parent===this){var o=this._children,i=o.indexOf(r);i>=0&&(o.splice(i,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,r){var o=$t(this._children,e);return o>=0&&this.replaceAt(r,o),this},t.prototype.replaceAt=function(e,r){var o=this._children,i=o[r];if(e&&e!==this&&e.parent!==this&&e!==i){o[r]=e,i.parent=null;var a=this.__zr;a&&i.removeSelfFromZr(a),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var r=this.__zr;r&&r!==e.__zr&&e.addSelfToZr(r),r&&r.refresh()},t.prototype.remove=function(e){var r=this.__zr,o=this._children,i=$t(o,e);return i<0||(o.splice(i,1),e.parent=null,r&&e.removeSelfFromZr(r),r&&r.refresh()),this},t.prototype.removeAll=function(){for(var e=this._children,r=this.__zr,o=0;o<e.length;o++){var i=e[o];r&&i.removeSelfFromZr(r),i.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,r){for(var o=this._children,i=0;i<o.length;i++)e.call(r,o[i],i);return this},t.prototype.traverse=function(e,r){for(var o=0;o<this._children.length;o++){var i=this._children[o],a=e.call(r,i);i.isGroup&&!a&&i.traverse(e,r)}return this},t.prototype.addSelfToZr=function(e){n.prototype.addSelfToZr.call(this,e);for(var r=0;r<this._children.length;r++)this._children[r].addSelfToZr(e)},t.prototype.removeSelfFromZr=function(e){n.prototype.removeSelfFromZr.call(this,e);for(var r=0;r<this._children.length;r++)this._children[r].removeSelfFromZr(e)},t.prototype.getBoundingRect=function(e){for(var r=new Kt(0,0,0,0),o=e||this._children,i=[],a=null,l=0;l<o.length;l++){var c=o[l];if(!c.ignore&&!c.invisible){var h=c.getBoundingRect(),p=c.getLocalTransform(i);p?(Kt.applyTransform(r,h,p),(a=a||r.clone()).union(r)):(a=a||h.clone()).union(h)}}return a||r},t}(jg);on.prototype.type="group";var Lv,jp={},Wc={},lA=function(){function n(t,e,r){var o=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=e,this.id=t;var i=new Jd,a=r.renderer||"canvas";jp[a]||(a=vn(jp)[0]),r.useDirtyRect=null!=r.useDirtyRect&&r.useDirtyRect;var l=new jp[a](e,i,r,t),c=r.ssr||l.ssrOnly;this.storage=i,this.painter=l;var h,p=gn.node||gn.worker||c?null:new Wl(l.getViewportRoot(),l.root),g=r.useCoarsePointer;(null==g||"auto"===g?gn.touchEventsSupported:g)&&(h=We(r.pointerSize,44)),this.handler=new zg(i,l,p,l.root,h),this.animation=new Ui({stage:{update:c?null:function(){return o._flush(!0)}}}),c||this.animation.start()}return n.prototype.add=function(t){!this._disposed&&t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},n.prototype.remove=function(t){!this._disposed&&t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(t,e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh())},n.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=function(e){if(!e)return!1;if("string"==typeof e)return eh(e,1)<.4;if(e.colorStops){for(var r=e.colorStops,o=0,i=r.length,a=0;a<i;a++)o+=eh(r[a].color,1);return(o/=i)<.4}return!1}(t))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(t){this._darkMode=t},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(t){var e,r=zn();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var o=zn();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:o-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover())},n.prototype.resize=function(t){this._disposed||(this.painter.resize((t=t||{}).width,t.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},n.prototype.findHover=function(t,e){if(!this._disposed)return this.handler.findHover(t,e)},n.prototype.on=function(t,e,r){return this._disposed||this.handler.on(t,e,r),this},n.prototype.off=function(t,e){this._disposed||this.handler.off(t,e)},n.prototype.trigger=function(t,e){this._disposed||this.handler.trigger(t,e)},n.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof on&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delete Wc[this.id])},n}();function i_(n,t){var e=new lA(Qt(),n,t);return Wc[e.id]=e,e}function Rv(n,t){jp[n]=t}function uA(n){if("function"==typeof Lv)return Lv(n)}function Ov(n){Lv=n}var a_=Object.freeze({__proto__:null,init:i_,dispose:function(n){n.dispose()},disposeAll:function(){for(var n in Wc)Wc.hasOwnProperty(n)&&Wc[n].dispose();Wc={}},getInstance:function(n){return Wc[n]},registerPainter:Rv,getElementSSRData:uA,registerSSRDataGetter:Ov,version:"5.6.0"}),s_=1e-4;function lr(n,t,e,r){var o=t[0],i=t[1],a=e[0],l=e[1],c=i-o,h=l-a;if(0===c)return 0===h?a:(a+l)/2;if(r)if(c>0){if(n<=o)return a;if(n>=i)return l}else{if(n>=o)return a;if(n<=i)return l}else{if(n===o)return a;if(n===i)return l}return(n-o)/c*h+a}function Ct(n,t){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%"}return bt(n)?(e=n,e.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(n)/100*t:parseFloat(n):null==n?NaN:+n;var e}function co(n,t,e){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),n=(+n).toFixed(t),e?n:+n}function ds(n){return n.sort(function(t,e){return t-e}),n}function Bs(n){if(n=+n,isNaN(n))return 0;if(n>1e-14)for(var t=1,e=0;e<15;e++,t*=10)if(Math.round(n*t)/t===n)return e;return l_(n)}function l_(n){var t=n.toString().toLowerCase(),e=t.indexOf("e"),r=e>0?+t.slice(e+1):0,o=e>0?e:t.length,i=t.indexOf(".");return Math.max(0,(i<0?0:o-1-i)-r)}function Pv(n,t){var e=Math.log,r=Math.LN10,o=Math.floor(e(n[1]-n[0])/r),i=Math.round(e(Math.abs(t[1]-t[0]))/r),a=Math.min(Math.max(-o+i,0),20);return isFinite(a)?a:20}function u_(n,t){var e=Jr(n,function(b,_){return b+(isNaN(_)?0:_)},0);if(0===e)return[];for(var r=Math.pow(10,t),o=j(n,function(b){return(isNaN(b)?0:b)/e*r*100}),i=100*r,a=j(o,function(b){return Math.floor(b)}),l=Jr(a,function(b,_){return b+_},0),c=j(o,function(b,_){return b-a[_]});l<i;){for(var h=Number.NEGATIVE_INFINITY,p=null,g=0,y=c.length;g<y;++g)c[g]>h&&(h=c[g],p=g);++a[p],c[p]=0,++l}return j(a,function(b){return b/r})}function cA(n,t){var e=Math.max(Bs(n),Bs(t)),r=n+t;return e>20?r:co(r,e)}var Bv=9007199254740991;function Xg(n){var t=2*Math.PI;return(n%t+t)%t}function Yp(n){return n>-1e-4&&n<s_}var zv=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ji(n){if(n instanceof Date)return n;if(bt(n)){var t=zv.exec(n);if(!t)return new Date(NaN);if(t[8]){var e=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(e-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,e,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}return null==n?new Date(NaN):new Date(Math.round(n))}function dA(n){return Math.pow(10,Vv(n))}function Vv(n){if(0===n)return 0;var t=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,t)>=10&&t++,t}function c_(n,t){var e=Vv(n),r=Math.pow(10,e),o=n/r;return n=(t?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*r,e>=-20?+n.toFixed(e<0?-e:0):n}function Ul(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),o=+n[r-1],i=e-r;return i?o+i*(n[r]-o):o}function d_(n){n.sort(function(c,h){return l(c,h,0)?-1:1});for(var t=-1/0,e=1,r=0;r<n.length;){for(var o=n[r].interval,i=n[r].close,a=0;a<2;a++)o[a]<=t&&(o[a]=t,i[a]=a?1:1-e),t=o[a],e=i[a];o[0]===o[1]&&i[0]*i[1]!=1?n.splice(r,1):r++}return n;function l(c,h,p){return c.interval[p]<h.interval[p]||c.interval[p]===h.interval[p]&&(c.close[p]-h.close[p]==(p?-1:1)||!p&&l(c,h,1))}}function ul(n){var t=parseFloat(n);return t==n&&(0!==t||!bt(n)||n.indexOf("x")<=0)?t:NaN}function qg(n){return!isNaN(ul(n))}function h_(){return Math.round(9*Math.random())}function p_(n,t){return 0===t?n:p_(t,n%t)}function Fv(n,t){return null==n?t:null==t?n:n*t/p_(n,t)}function En(n){throw new Error(n)}function f_(n,t,e){return(t-n)*e+n}var g_="series\0",m_="\0_ec_\0";function Dr(n){return n instanceof Array?n:null==n?[]:[n]}function rh(n,t,e){if(n){n[t]=n[t]||{},n.emphasis=n.emphasis||{},n.emphasis[t]=n.emphasis[t]||{};for(var r=0,o=e.length;r<o;r++){var i=e[r];!n.emphasis[t].hasOwnProperty(i)&&n[t].hasOwnProperty(i)&&(n.emphasis[t][i]=n[t][i])}}}var y_=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Uc(n){return!Ft(n)||Ee(n)||n instanceof Date?n:n.value}function Gv(n){return Ft(n)&&!(n instanceof Array)}function qp(n,t,e){var r="normalMerge"===e,o="replaceMerge"===e,i="replaceAll"===e;n=n||[],t=(t||[]).slice();var a=Et();Z(t,function(p,g){Ft(p)||(t[g]=null)});var l,c,p,g,y,b,h=function(p,g,y){var b=[];if("replaceAll"===y)return b;for(var _=0;_<p.length;_++){var w=p[_];w&&null!=w.id&&g.set(w.id,_),b.push({existing:"replaceMerge"===y||$p(w)?null:w,newOption:null,keyInfo:null,brandNew:null})}return b}(n,a,e);return(r||o)&&(p=h,g=n,y=a,Z(b=t,function(_,w){if(_&&null!=_.id){var S=Zp(_.id),M=y.get(S);if(null!=M){var A=p[M];bn(!A.newOption,'Duplicated option on id "'+S+'".'),A.newOption=_,A.existing=g[M],b[w]=null}}})),r&&function(p,g){Z(g,function(y,b){if(y&&null!=y.name)for(var _=0;_<p.length;_++){var w=p[_].existing;if(!p[_].newOption&&w&&(null==w.id||null==y.id)&&!$p(y)&&!$p(w)&&zs("name",w,y))return p[_].newOption=y,void(g[b]=null)}})}(h,t),r||o?function(p,g,y){Z(g,function(b){if(b){for(var _,w=0;(_=p[w])&&(_.newOption||$p(_.existing)||_.existing&&null!=b.id&&!zs("id",b,_.existing));)w++;_?(_.newOption=b,_.brandNew=y):p.push({newOption:b,brandNew:y,existing:null,keyInfo:null}),w++}})}(h,t,o):i&&function(p,g){Z(g,function(y){p.push({newOption:y,brandNew:!0,existing:null,keyInfo:null})})}(h,t),l=h,c=Et(),Z(l,function(p){var g=p.existing;g&&c.set(g.id,p)}),Z(l,function(p){var g=p.newOption;bn(!g||null==g.id||!c.get(g.id)||c.get(g.id)===p,"id duplicates: "+(g&&g.id)),g&&null!=g.id&&c.set(g.id,p),!p.keyInfo&&(p.keyInfo={})}),Z(l,function(p,g){var y=p.existing,b=p.newOption,_=p.keyInfo;if(Ft(b)){if(_.name=null!=b.name?Zp(b.name):y?y.name:g_+g,y)_.id=Zp(y.id);else if(null!=b.id)_.id=Zp(b.id);else{var w=0;do{_.id="\0"+_.name+"\0"+w++}while(c.get(_.id))}c.set(_.id,p)}}),h}function zs(n,t,e){var r=Po(t[n],null),o=Po(e[n],null);return null!=r&&null!=o&&r===o}function Zp(n){return Po(n,"")}function Po(n,t){return null==n?t:bt(n)?n:dt(n)||no(n)?n+"":t}function Hv(n){var t=n.name;return!(!t||!t.indexOf(g_))}function $p(n){return n&&null!=n.id&&0===Zp(n.id).indexOf(m_)}function Yu(n,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?Ee(t.dataIndex)?j(t.dataIndex,function(e){return n.indexOfRawIndex(e)}):n.indexOfRawIndex(t.dataIndex):null!=t.name?Ee(t.name)?j(t.name,function(e){return n.indexOfName(e)}):n.indexOfName(t.name):void 0}function Gn(){var n="__ec_inner_"+v_++;return function(t){return t[n]||(t[n]={})}}var v_=h_();function Zg(n,t,e){var r=Wv(t,e),i=r.queryOptionMap,a=r.others,l=e?e.defaultMainType:null;return!r.mainTypeSpecified&&l&&i.set(l,{}),i.each(function(c,h){var p=Kp(n,h,c,{useDefault:l===h,enableAll:!e||null==e.enableAll||e.enableAll,enableNone:!e||null==e.enableNone||e.enableNone});a[h+"Models"]=p.models,a[h+"Model"]=p.models[0]}),a}function Wv(n,t){var e;if(bt(n)){var r={};r[n+"Index"]=0,e=r}else e=n;var o=Et(),i={},a=!1;return Z(e,function(l,c){if("dataIndex"!==c&&"dataIndexInside"!==c){var h=c.match(/^(\w+)(Index|Id|Name)$/)||[],p=h[1],g=(h[2]||"").toLowerCase();p&&g&&!(t&&t.includeMainTypes&&$t(t.includeMainTypes,p)<0)&&(a=a||!!p,(o.get(p)||o.set(p,{}))[g]=l)}else i[c]=l}),{mainTypeSpecified:a,queryOptionMap:o,others:i}}var Mo={useDefault:!0,enableAll:!1,enableNone:!1},hA={useDefault:!1,enableAll:!0,enableNone:!0};function Kp(n,t,e,r){r=r||Mo;var o=e.index,i=e.id,a=e.name,l={models:null,specified:null!=o||null!=i||null!=a};if(!l.specified){var c=void 0;return l.models=r.useDefault&&(c=n.getComponent(t))?[c]:[],l}return"none"===o||!1===o?(bn(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),l.models=[],l):("all"===o&&(bn(r.enableAll,'`"all"` is not a valid value on index option.'),o=i=a=null),l.models=n.queryComponents({mainType:t,index:o,id:i,name:a}),l)}function pA(n,t,e){n.setAttribute?n.setAttribute(t,e):n[t]=e}function oh(n,t){var e=Et(),r=[];return Z(n,function(o){var i=t(o);(e.get(i)||(r.push(i),e.set(i,[]))).push(o)}),{keys:r,buckets:e}}function Uv(n,t,e,r,o){var i=null==t||"auto"===t;if(null==r)return r;if(dt(r))return co(_=f_(e||0,r,o),i?Math.max(Bs(e||0),Bs(r)):t);if(bt(r))return o<1?e:r;for(var a=[],l=e,c=r,h=Math.max(l?l.length:0,c.length),p=0;p<h;++p){var g=n.getDimensionInfo(p);if(g&&"ordinal"===g.type)a[p]=(o<1&&l?l:c)[p];else{var y=l&&l[p]?l[p]:0,b=c[p],_=f_(y,b,o);a[p]=co(_,i?Math.max(Bs(y),Bs(b)):t)}}return a}var ih="___EC__COMPONENT__CONTAINER___",b_="___EC__EXTENDED_CLASS___";function Vs(n){var t={main:"",sub:""};if(n){var e=n.split(".");t.main=e[0]||"",t.sub=e[1]||""}return t}function x_(n,t){n.$constructor=n,n.extend=function(e){var r,o,i=this;return Se(o=i)&&/^class\s/.test(Function.prototype.toString.call(o))?r=function(a){function l(){return a.apply(this,arguments)||this}return Ce(l,a),l}(i):(r=function(){(e.$constructor||i).apply(this,arguments)},Kr(r,this)),De(r.prototype,e),r[b_]=!0,r.extend=this.extend,r.superCall=$g,r.superApply=sE,r.superClass=i,r}}function jv(n,t){n.extend=t.extend}var Yv=Math.round(10*Math.random());function $g(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return this.superClass.prototype[t].apply(n,e)}function sE(n,t,e){return this.superClass.prototype[t].apply(n,e)}function jl(n){var t={};n.registerClass=function(e){var r,l,c,o=e.type||e.prototype.type;if(o){bn(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r=o),'componentType "'+r+'" illegal'),e.prototype.type=o;var i=Vs(o);i.sub?i.sub!==ih&&(((c=t[(l=i).main])&&c[ih]||((c=t[l.main]={})[ih]=!0),c)[i.sub]=e):t[i.main]=e}return e},n.getClass=function(e,r,o){var i=t[e];if(i&&i[ih]&&(i=r?i[r]:null),o&&!i)throw new Error(r?"Component "+e+"."+(r||"")+" is used but not imported.":e+".type should be specified.");return i},n.getClassesByMainType=function(e){var r=Vs(e),o=[],i=t[r.main];return i&&i[ih]?Z(i,function(a,l){l!==ih&&o.push(a)}):o.push(i),o},n.hasClass=function(e){var r=Vs(e);return!!t[r.main]},n.getAllClassMainTypes=function(){var e=[];return Z(t,function(r,o){e.push(o)}),e},n.hasSubTypes=function(e){var r=Vs(e),o=t[r.main];return o&&o[ih]}}function Xu(n,t){for(var e=0;e<n.length;e++)n[e][1]||(n[e][1]=n[e][0]);return t=t||!1,function(r,o,i){for(var a={},l=0;l<n.length;l++){var c=n[l][1];if(!(o&&$t(o,c)>=0||i&&$t(i,c)<0)){var h=r.getShallow(c,t);null!=h&&(a[n[l][0]]=h)}}return a}}var lE=Xu([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),__=function(){function n(){}return n.prototype.getAreaStyle=function(t,e){return lE(this,t,e)},n}(),w_=new Vl(50);function Kg(n){if("string"==typeof n){var t=w_.get(n);return t&&t.image}return n}function Xv(n,t,e,r,o){if(n){if("string"==typeof n){if(t&&t.__zrImageSrc===n||!e)return t;var i=w_.get(n),a={hostEl:e,cb:r,cbPayload:o};return i?!Jg(t=i.image)&&i.pending.push(a):((t=Tn.loadImage(n,ah,ah)).__zrImageSrc=n,w_.put(n,t.__cachedImgObj={image:t,pending:[a]})),t}return n}return t}function ah(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<n.pending.length;t++){var e=n.pending[t],r=e.cb;r&&r(this,e.cbPayload),e.hostEl.dirty()}n.pending.length=0}function Jg(n){return n&&n.width&&n.height}var qv=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Cr(n,t,e,r,o){if(!t)return"";var i=(n+"").split("\n");o=fA(t,e,r,o);for(var a=0,l=i.length;a<l;a++)i[a]=Yl(i[a],o);return i.join("\n")}function fA(n,t,e,r){var o=De({},r=r||{});o.font=t,e=We(e,"..."),o.maxIterations=We(r.maxIterations,2);var i=o.minChar=We(r.minChar,0);o.cnCharWidth=us("\u56fd",t);var a=o.ascCharWidth=us("a",t);o.placeholder=We(r.placeholder,"");for(var l=n=Math.max(0,n-1),c=0;c<i&&l>=a;c++)l-=a;var h=us(e,t);return h>l&&(e="",h=0),l=n-h,o.ellipsis=e,o.ellipsisWidth=h,o.contentWidth=l,o.containerWidth=n,o}function Yl(n,t){var e=t.containerWidth,r=t.font,o=t.contentWidth;if(!e)return"";var i=us(n,r);if(i<=e)return n;for(var a=0;;a++){if(i<=o||a>=t.maxIterations){n+=t.ellipsis;break}var l=0===a?Qg(n,o,t.ascCharWidth,t.cnCharWidth):i>0?Math.floor(n.length*o/i):0;i=us(n=n.substr(0,l),r)}return""===n&&(n=t.placeholder),n}function Qg(n,t,e,r){for(var o=0,i=0,a=n.length;i<a&&o<t;i++){var l=n.charCodeAt(i);o+=0<=l&&l<=127?e:r}return i}var S_=function(){},C_=function(n){this.tokens=[],n&&(this.tokens=n)},cl=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function ei(n,t,e,r,o){var i,a,l=""===t,c=o&&e.rich[o]||{},h=n.lines,p=c.font||e.font,g=!1;if(r){var y=c.padding,b=y?y[1]+y[3]:0;if(null!=c.width&&"auto"!==c.width){var _=cs(c.width,r.width)+b;h.length>0&&_+r.accumWidth>r.width&&(i=t.split("\n"),g=!0),r.accumWidth=_}else{var w=Jp(t,p,r.width,r.breakAll,r.accumWidth);r.accumWidth=w.accumWidth+b,a=w.linesWidths,i=w.lines}}else i=t.split("\n");for(var S=0;S<i.length;S++){var M=i[S],A=new S_;if(A.styleName=o,A.text=M,A.isLineHolder=!M&&!l,A.width="number"==typeof c.width?c.width:a?a[S]:us(M,p),S||g)h.push(new C_([A]));else{var I=(h[h.length-1]||(h[0]=new C_)).tokens,N=I.length;1===N&&I[0].isLineHolder?I[0]=A:(M||!N||l)&&I.push(A)}}}var Zv=Jr(",&?/;] ".split(""),function(n,t){return n[t]=!0,n},{});function M_(n){return!(((e=n.charCodeAt(0))>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303)&&!Zv[n]);var e}function Jp(n,t,e,r,o){for(var i=[],a=[],l="",c="",h=0,p=0,g=0;g<n.length;g++){var y=n.charAt(g);if("\n"!==y){var b=us(y,t),_=!r&&!M_(y);(i.length?p+b>e:o+p+b>e)?p?(l||c)&&(_?(l||(l=c,c="",p=h=0),i.push(l),a.push(p-h),c+=y,l="",p=h+=b):(c&&(l+=c,c="",h=0),i.push(l),a.push(p),l=y,p=b)):_?(i.push(c),a.push(h),c=y,h=b):(i.push(y),a.push(b)):(p+=b,_?(c+=y,h+=b):(c&&(l+=c,c="",h=0),l+=y))}else c&&(l+=c,p+=h),i.push(l),a.push(p),l="",c="",h=0,p=0}return i.length||l||(l=n,c="",h=0),c&&(l+=c),l&&(i.push(l),a.push(p)),1===i.length&&(p+=o),{accumWidth:p,lines:i,linesWidths:a}}var qu="__zr_style_"+Math.round(10*Math.random()),Fs={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},jc={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Fs[qu]=!0;var Qp=["z","z2","invisible"],em=["invisible"],hs=function(n){function t(r){return n.call(this,r)||this}var e;return Ce(t,n),t.prototype._init=function(r){for(var o=vn(r),i=0;i<o.length;i++){var a=o[i];"style"===a?this.useStyle(r[a]):n.prototype.attrKV.call(this,a,r[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,o,i,a){var p,g,y,l=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&(g=r,y=o,$v.copy((p=this).getBoundingRect()),p.transform&&$v.applyTransform(p.transform),Kv.width=g,Kv.height=y,!$v.intersect(Kv))||l&&!l[0]&&!l[3])return!1;if(i&&this.__clipPaths)for(var c=0;c<this.__clipPaths.length;++c)if(this.__clipPaths[c].isZeroArea())return!1;if(a&&this.parent)for(var h=this.parent;h;){if(h.ignore)return!1;h=h.parent}return!0},t.prototype.contain=function(r,o){return this.rectContain(r,o)},t.prototype.traverse=function(r,o){r.call(o,this)},t.prototype.rectContain=function(r,o){var i=this.transformCoordToLocal(r,o);return this.getBoundingRect().contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var o=this.transform,i=this.getBoundingRect(),a=this.style,l=a.shadowBlur||0,c=a.shadowOffsetX||0,h=a.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new Kt(0,0,0,0)),o?Kt.applyTransform(r,i,o):r.copy(i),(l||c||h)&&(r.width+=2*l+Math.abs(c),r.height+=2*l+Math.abs(h),r.x=Math.min(r.x,r.x+c-l),r.y=Math.min(r.y,r.y+h-l));var p=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-p),r.y=Math.floor(r.y-p),r.width=Math.ceil(r.width+1+2*p),r.height=Math.ceil(r.height+1+2*p))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new Kt(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){"style"===r?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,o){"style"!==r?n.prototype.attrKV.call(this,r,o):this.style?this.setStyle(o):this.useStyle(o)},t.prototype.setStyle=function(r,o){return"string"==typeof r?this.style[r]=o:De(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(2&this.__dirty)},t.prototype.styleUpdated=function(){this.__dirty&=-3},t.prototype.createStyle=function(r){return Ca(Fs,r)},t.prototype.useStyle=function(r){r[qu]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[qu]},t.prototype._innerSaveToNormal=function(r){n.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.style&&!o.style&&(o.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,o,Qp)},t.prototype._applyStateObj=function(r,o,i,a,l,c){n.prototype._applyStateObj.call(this,r,o,i,a,l,c);var h,p=!(o&&a);if(o&&o.style?l?a?h=o.style:(h=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(h,o.style)):(h=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(h,o.style)):p&&(h=i.style),h)if(l){var g=this.style;if(this.style=this.createStyle(p?{}:g),p)for(var y=vn(g),b=0;b<y.length;b++)(w=y[b])in h&&(h[w]=h[w],this.style[w]=g[w]);var _=vn(h);for(b=0;b<_.length;b++){var w=_[b];this.style[w]=this.style[w]}this._transitionState(r,{style:h},c,this.getAnimationStyleProps())}else this.useStyle(h);var S=this.__inHover?em:Qp;for(b=0;b<S.length;b++)w=S[b],o&&null!=o[w]?this[w]=o[w]:p&&null!=i[w]&&(this[w]=i[w])},t.prototype._mergeStates=function(r){for(var o,i=n.prototype._mergeStates.call(this,r),a=0;a<r.length;a++){var l=r[a];l.style&&this._mergeStyle(o=o||{},l.style)}return o&&(i.style=o),i},t.prototype._mergeStyle=function(r,o){return De(r,o),r},t.prototype.getAnimationStyleProps=function(){return jc},t.initDefaultProps=((e=t.prototype).type="displayable",e.invisible=!1,e.z=0,e.z2=0,e.zlevel=0,e.culling=!1,e.cursor="pointer",e.rectHover=!1,e.incremental=!1,e._rect=null,e.dirtyRectTolerance=0,void(e.__dirty=3)),t}(jg),$v=new Kt(0,0,0,0),Kv=new Kt(0,0,0,0),ua=Math.min,ca=Math.max,Jv=Math.sin,sh=Math.cos,Yc=2*Math.PI,Xl=Zt(),tm=Zt(),nm=Zt();function ql(n,t,e){if(0!==n.length){for(var r=n[0],o=r[0],i=r[0],a=r[1],l=r[1],c=1;c<n.length;c++)o=ua(o,(r=n[c])[0]),i=ca(i,r[0]),a=ua(a,r[1]),l=ca(l,r[1]);t[0]=o,t[1]=a,e[0]=i,e[1]=l}}function Qv(n,t,e,r,o,i){o[0]=ua(n,e),o[1]=ua(t,r),i[0]=ca(n,e),i[1]=ca(t,r)}var rm=[],lh=[];function uh(n,t,e,r,o,i,a,l,c,h){var p=Rc,g=er,y=p(n,e,o,a,rm);c[0]=1/0,c[1]=1/0,h[0]=-1/0,h[1]=-1/0;for(var b=0;b<y;b++){var _=g(n,e,o,a,rm[b]);c[0]=ua(_,c[0]),h[0]=ca(_,h[0])}for(y=p(t,r,i,l,lh),b=0;b<y;b++){var w=g(t,r,i,l,lh[b]);c[1]=ua(w,c[1]),h[1]=ca(w,h[1])}c[0]=ua(n,c[0]),h[0]=ca(n,h[0]),c[0]=ua(a,c[0]),h[0]=ca(a,h[0]),c[1]=ua(t,c[1]),h[1]=ca(t,h[1]),c[1]=ua(l,c[1]),h[1]=ca(l,h[1])}function gA(n,t,e,r,o,i,a,l){var c=Rp,h=_n,p=ca(ua(c(n,e,o),1),0),g=ca(ua(c(t,r,i),1),0),y=h(n,e,o,p),b=h(t,r,i,g);a[0]=ua(n,o,y),a[1]=ua(t,i,b),l[0]=ca(n,o,y),l[1]=ca(t,i,b)}function T_(n,t,e,r,o,i,a,l,c){var h=xt,p=rn,g=Math.abs(o-i);if(g%Yc<1e-4&&g>1e-4)return l[0]=n-e,l[1]=t-r,c[0]=n+e,void(c[1]=t+r);if(Xl[0]=sh(o)*e+n,Xl[1]=Jv(o)*r+t,tm[0]=sh(i)*e+n,tm[1]=Jv(i)*r+t,h(l,Xl,tm),p(c,Xl,tm),(o%=Yc)<0&&(o+=Yc),(i%=Yc)<0&&(i+=Yc),o>i&&!a?i+=Yc:o<i&&a&&(o+=Yc),a){var y=i;i=o,o=y}for(var b=0;b<i;b+=Math.PI/2)b>o&&(nm[0]=sh(b)*e+n,nm[1]=Jv(b)*r+t,h(l,nm,l),p(c,nm,c))}var Mr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},ch=[],dl=[],ps=[],fs=[],Ci=[],Hr=[],ef=Math.min,Yi=Math.max,dh=Math.cos,Gs=Math.sin,Oa=Math.abs,Zl=Math.PI,Uo=2*Zl,e0=typeof Float32Array<"u",hh=[];function om(n){return Math.round(n/Zl*1e8)/1e8%2*Zl}function tf(n,t){var e=om(n[0]);e<0&&(e+=Uo);var o=n[1];o+=e-n[0],!t&&o-e>=Uo?o=e+Uo:t&&e-o>=Uo?o=e-Uo:!t&&e>o?o=e+(Uo-om(e-o)):t&&e<o&&(o=e-(Uo-om(o-e))),n[0]=e,n[1]=o}var gs=function(){function n(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(t,e,r){(r=r||0)>0&&(this._ux=Oa(r/Gp/t)||0,this._uy=Oa(r/Gp/e)||0)},n.prototype.setDPR=function(t){this.dpr=t},n.prototype.setContext=function(t){this._ctx=t},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(Mr.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},n.prototype.lineTo=function(t,e){var r=Oa(t-this._xi),o=Oa(e-this._yi),i=r>this._ux||o>this._uy;if(this.addData(Mr.L,t,e),this._ctx&&i&&this._ctx.lineTo(t,e),i)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var a=r*r+o*o;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=a)}return this},n.prototype.bezierCurveTo=function(t,e,r,o,i,a){return this._drawPendingPt(),this.addData(Mr.C,t,e,r,o,i,a),this._ctx&&this._ctx.bezierCurveTo(t,e,r,o,i,a),this._xi=i,this._yi=a,this},n.prototype.quadraticCurveTo=function(t,e,r,o){return this._drawPendingPt(),this.addData(Mr.Q,t,e,r,o),this._ctx&&this._ctx.quadraticCurveTo(t,e,r,o),this._xi=r,this._yi=o,this},n.prototype.arc=function(t,e,r,o,i,a){this._drawPendingPt(),hh[0]=o,hh[1]=i,tf(hh,a);var l=(i=hh[1])-(o=hh[0]);return this.addData(Mr.A,t,e,r,r,o,l,0,a?0:1),this._ctx&&this._ctx.arc(t,e,r,o,i,a),this._xi=dh(i)*r+t,this._yi=Gs(i)*r+e,this},n.prototype.arcTo=function(t,e,r,o,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,r,o,i),this},n.prototype.rect=function(t,e,r,o){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,r,o),this.addData(Mr.R,t,e,r,o),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(Mr.Z);var t=this._ctx,e=this._x0,r=this._y0;return t&&t.closePath(),this._xi=e,this._yi=r,this},n.prototype.fill=function(t){t&&t.fill(),this.toStatic()},n.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(t){var e=t.length;this.data&&this.data.length===e||!e0||(this.data=new Float32Array(e));for(var r=0;r<e;r++)this.data[r]=t[r];this._len=e},n.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,r=0,o=this._len,i=0;i<e;i++)r+=t[i].len();for(e0&&this.data instanceof Float32Array&&(this.data=new Float32Array(o+r)),i=0;i<e;i++)for(var a=t[i].data,l=0;l<a.length;l++)this.data[o++]=a[l];this._len=o},n.prototype.addData=function(t,e,r,o,i,a,l,c,h){if(this._saveData){var p=this.data;this._len+arguments.length>p.length&&(this._expandData(),p=this.data);for(var g=0;g<arguments.length;g++)p[this._len++]=arguments[g]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,e0&&this._len>11&&(this.data=new Float32Array(t)))}},n.prototype.getBoundingRect=function(){ps[0]=ps[1]=Ci[0]=Ci[1]=Number.MAX_VALUE,fs[0]=fs[1]=Hr[0]=Hr[1]=-Number.MAX_VALUE;var t,e=this.data,r=0,o=0,i=0,a=0;for(t=0;t<this._len;){var l=e[t++],c=1===t;switch(c&&(i=r=e[t],a=o=e[t+1]),l){case Mr.M:r=i=e[t++],o=a=e[t++],Ci[0]=i,Ci[1]=a,Hr[0]=i,Hr[1]=a;break;case Mr.L:Qv(r,o,e[t],e[t+1],Ci,Hr),r=e[t++],o=e[t++];break;case Mr.C:uh(r,o,e[t++],e[t++],e[t++],e[t++],e[t],e[t+1],Ci,Hr),r=e[t++],o=e[t++];break;case Mr.Q:gA(r,o,e[t++],e[t++],e[t],e[t+1],Ci,Hr),r=e[t++],o=e[t++];break;case Mr.A:var h=e[t++],p=e[t++],g=e[t++],y=e[t++],b=e[t++],_=e[t++]+b;t+=1;var w=!e[t++];c&&(i=dh(b)*g+h,a=Gs(b)*y+p),T_(h,p,g,y,b,_,w,Ci,Hr),r=dh(_)*g+h,o=Gs(_)*y+p;break;case Mr.R:Qv(i=r=e[t++],a=o=e[t++],i+e[t++],a+e[t++],Ci,Hr);break;case Mr.Z:r=i,o=a}xt(ps,ps,Ci),rn(fs,fs,Hr)}return 0===t&&(ps[0]=ps[1]=fs[0]=fs[1]=0),new Kt(ps[0],ps[1],fs[0]-ps[0],fs[1]-ps[1])},n.prototype._calculateLength=function(){var t=this.data,e=this._len,r=this._ux,o=this._uy,i=0,a=0,l=0,c=0;this._pathSegLen||(this._pathSegLen=[]);for(var h=this._pathSegLen,p=0,g=0,y=0;y<e;){var b=t[y++],_=1===y;_&&(l=i=t[y],c=a=t[y+1]);var w=-1;switch(b){case Mr.M:i=l=t[y++],a=c=t[y++];break;case Mr.L:var S=t[y++],M=(N=t[y++])-a;(Oa(ne=S-i)>r||Oa(M)>o||y===e-1)&&(w=Math.sqrt(ne*ne+M*M),i=S,a=N);break;case Mr.C:var A=t[y++],I=t[y++],N=(S=t[y++],t[y++]),L=t[y++],R=t[y++];w=Hg(i,a,A,I,S,N,L,R,10),i=L,a=R;break;case Mr.Q:w=rs(i,a,A=t[y++],I=t[y++],S=t[y++],N=t[y++],10),i=S,a=N;break;case Mr.A:var O=t[y++],B=t[y++],G=t[y++],W=t[y++],Y=t[y++],X=t[y++],J=X+Y;y+=1,_&&(l=dh(Y)*G+O,c=Gs(Y)*W+B),w=Yi(G,W)*ef(Uo,Math.abs(X)),i=dh(J)*G+O,a=Gs(J)*W+B;break;case Mr.R:l=i=t[y++],c=a=t[y++],w=2*t[y++]+2*t[y++];break;case Mr.Z:var ne=l-i;M=c-a,w=Math.sqrt(ne*ne+M*M),i=l,a=c}w>=0&&(h[g++]=w,p+=w)}return this._pathLen=p,p},n.prototype.rebuildPath=function(t,e){var r,o,i,a,l,c,h,p,g,y,b=this.data,_=this._ux,w=this._uy,S=this._len,M=e<1,A=0,I=0,N=0;if(!M||(this._pathSegLen||this._calculateLength(),h=this._pathSegLen,p=e*this._pathLen))e:for(var L=0;L<S;){var R=b[L++],O=1===L;switch(O&&(r=i=b[L],o=a=b[L+1]),R!==Mr.L&&N>0&&(t.lineTo(g,y),N=0),R){case Mr.M:r=i=b[L++],o=a=b[L++],t.moveTo(i,a);break;case Mr.L:l=b[L++],c=b[L++];var B=Oa(l-i),G=Oa(c-a);if(B>_||G>w){if(M){if(A+(mn=h[I++])>p){var W=(p-A)/mn;t.lineTo(i*(1-W)+l*W,a*(1-W)+c*W);break e}A+=mn}t.lineTo(l,c),i=l,a=c,N=0}else{var Y=B*B+G*G;Y>N&&(g=l,y=c,N=Y)}break;case Mr.C:var X=b[L++],J=b[L++],ne=b[L++],oe=b[L++],ie=b[L++],se=b[L++];if(M){if(A+(mn=h[I++])>p){sa(i,X,ne,ie,W=(p-A)/mn,ch),sa(a,J,oe,se,W,dl),t.bezierCurveTo(ch[1],dl[1],ch[2],dl[2],ch[3],dl[3]);break e}A+=mn}t.bezierCurveTo(X,J,ne,oe,ie,se),i=ie,a=se;break;case Mr.Q:if(X=b[L++],J=b[L++],ne=b[L++],oe=b[L++],M){if(A+(mn=h[I++])>p){_i(i,X,ne,W=(p-A)/mn,ch),_i(a,J,oe,W,dl),t.quadraticCurveTo(ch[1],dl[1],ch[2],dl[2]);break e}A+=mn}t.quadraticCurveTo(X,J,ne,oe),i=ne,a=oe;break;case Mr.A:var le=b[L++],pe=b[L++],me=b[L++],ve=b[L++],He=b[L++],nt=b[L++],Me=b[L++],je=!b[L++],tt=me>ve?me:ve,ut=Oa(me-ve)>.001,pt=He+nt,St=!1;if(M&&(A+(mn=h[I++])>p&&(pt=He+nt*(p-A)/mn,St=!0),A+=mn),ut&&t.ellipse?t.ellipse(le,pe,me,ve,Me,He,pt,je):t.arc(le,pe,tt,He,pt,je),St)break e;O&&(r=dh(He)*me+le,o=Gs(He)*ve+pe),i=dh(pt)*me+le,a=Gs(pt)*ve+pe;break;case Mr.R:r=i=b[L],o=a=b[L+1],l=b[L++],c=b[L++];var Ze=b[L++],yt=b[L++];if(M){if(A+(mn=h[I++])>p){var Vt=p-A;t.moveTo(l,c),t.lineTo(l+ef(Vt,Ze),c),(Vt-=Ze)>0&&t.lineTo(l+Ze,c+ef(Vt,yt)),(Vt-=yt)>0&&t.lineTo(l+Yi(Ze-Vt,0),c+yt),(Vt-=Ze)>0&&t.lineTo(l,c+Yi(yt-Vt,0));break e}A+=mn}t.rect(l,c,Ze,yt);break;case Mr.Z:if(M){var mn;if(A+(mn=h[I++])>p){t.lineTo(i*(1-(W=(p-A)/mn))+r*W,a*(1-W)+o*W);break e}A+=mn}t.closePath(),i=r,a=o}}},n.prototype.clone=function(){var t=new n,e=this.data;return t.data=e.slice?e.slice():Array.prototype.slice.call(e),t._len=this._len,t},n.CMD=Mr,n.initDefaultProps=((t=n.prototype)._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,void(t._version=0)),n;var t}();function $l(n,t,e,r,o,i,a){if(0===o)return!1;var c,l=o;if(a>t+l&&a>r+l||a<t-l&&a<r-l||i>n+l&&i>e+l||i<n-l&&i<e-l)return!1;if(n===e)return Math.abs(i-n)<=l/2;var h=(c=(t-r)/(n-e))*i-a+(n*r-e*t)/(n-e);return h*h/(c*c+1)<=l/2*l/2}function mA(n,t,e,r,o,i,a,l,c,h,p){if(0===c)return!1;var g=c;return!(p>t+g&&p>r+g&&p>i+g&&p>l+g||p<t-g&&p<r-g&&p<i-g&&p<l-g||h>n+g&&h>e+g&&h>o+g&&h>a+g||h<n-g&&h<e-g&&h<o-g&&h<a-g)&&xi(n,t,e,r,o,i,a,l,h,p,null)<=g/2}function ph(n,t,e,r,o,i,a,l,c){if(0===a)return!1;var h=a;return!(c>t+h&&c>r+h&&c>i+h||c<t-h&&c<r-h&&c<i-h||l>n+h&&l>e+h&&l>o+h||l<n-h&&l<e-h&&l<o-h)&&Bl(n,t,e,r,o,i,l,c,null)<=h/2}var Xc=2*Math.PI;function Pa(n){return(n%=Xc)<0&&(n+=Xc),n}var nf=2*Math.PI;function im(n,t,e,r,o,i,a,l,c){if(0===a)return!1;var h=a;l-=n,c-=t;var p=Math.sqrt(l*l+c*c);if(p-h>e||p+h<e)return!1;if(Math.abs(r-o)%nf<1e-4)return!0;if(i){var g=r;r=Pa(o),o=Pa(g)}else r=Pa(r),o=Pa(o);r>o&&(o+=nf);var y=Math.atan2(c,l);return y<0&&(y+=nf),y>=r&&y<=o||y+nf>=r&&y+nf<=o}function ms(n,t,e,r,o,i){if(i>t&&i>r||i<t&&i<r||r===t)return 0;var a=(i-t)/(r-t),l=r<t?1:-1;1!==a&&0!==a||(l=r<t?.5:-.5);var c=a*(e-n)+n;return c===o?1/0:c>o?l:0}var Zu=gs.CMD,Kl=2*Math.PI,To=[-1,-1,-1],Hs=[-1,-1];function yA(n,t,e,r,o,i,a,l,c,h){if(h>t&&h>r&&h>i&&h>l||h<t&&h<r&&h<i&&h<l)return 0;var p,g=ge(t,r,i,l,h,To);if(0===g)return 0;for(var y=0,b=-1,_=void 0,w=void 0,S=0;S<g;S++){var M=To[S],A=0===M||1===M?.5:1;er(n,e,o,a,M)<c||(b<0&&(b=Rc(t,r,i,l,Hs),Hs[1]<Hs[0]&&b>1&&(p=Hs[0],Hs[0]=Hs[1],Hs[1]=p),_=er(t,r,i,l,Hs[0]),b>1&&(w=er(t,r,i,l,Hs[1]))),y+=2===b?M<Hs[0]?_<t?A:-A:M<Hs[1]?w<_?A:-A:l<w?A:-A:M<Hs[0]?_<t?A:-A:l<_?A:-A)}return y}function vA(n,t,e,r,o,i,a,l){if(l>t&&l>r&&l>i||l<t&&l<r&&l<i)return 0;var c=function(_,w,S,M,A){var I=_-2*w+S,N=2*(w-_),L=_-M,R=0;if(Hi(I))Ou(N)&&(B=-L/N)>=0&&B<=1&&(A[R++]=B);else{var O=N*N-4*I*L;if(Hi(O))(B=-N/(2*I))>=0&&B<=1&&(A[R++]=B);else if(O>0){var B,G=Gi(O),W=(-N-G)/(2*I);(B=(-N+G)/(2*I))>=0&&B<=1&&(A[R++]=B),W>=0&&W<=1&&(A[R++]=W)}}return R}(t,r,i,l,To);if(0===c)return 0;var h=Rp(t,r,i);if(h>=0&&h<=1){for(var p=0,g=_n(t,r,i,h),y=0;y<c;y++){var b=0===To[y]||1===To[y]?.5:1;_n(n,e,o,To[y])<a||(p+=To[y]<h?g<t?b:-b:i<g?b:-b)}return p}return b=0===To[0]||1===To[0]?.5:1,_n(n,e,o,To[0])<a?0:i<t?b:-b}function uE(n,t,e,r,o,i,a,l){if((l-=t)>e||l<-e)return 0;var c=Math.sqrt(e*e-l*l);To[0]=-c,To[1]=c;var h=Math.abs(r-o);if(h<1e-4)return 0;if(h>=Kl-1e-4){r=0,o=Kl;var p=i?1:-1;return a>=To[0]+n&&a<=To[1]+n?p:0}if(r>o){var g=r;r=o,o=g}r<0&&(r+=Kl,o+=Kl);for(var y=0,b=0;b<2;b++){var _=To[b];if(_+n>a){var w=Math.atan2(l,_);p=i?1:-1,w<0&&(w=Kl+w),(w>=r&&w<=o||w+Kl>=r&&w+Kl<=o)&&(w>Math.PI/2&&w<1.5*Math.PI&&(p=-p),y+=p)}}return y}function bA(n,t,e,r,o){for(var i,a,h=n.data,p=n.len(),g=0,y=0,b=0,_=0,w=0,S=0;S<p;){var M=h[S++],A=1===S;switch(M===Zu.M&&S>1&&(e||(g+=ms(y,b,_,w,r,o))),A&&(_=y=h[S],w=b=h[S+1]),M){case Zu.M:y=_=h[S++],b=w=h[S++];break;case Zu.L:if(e){if($l(y,b,h[S],h[S+1],t,r,o))return!0}else g+=ms(y,b,h[S],h[S+1],r,o)||0;y=h[S++],b=h[S++];break;case Zu.C:if(e){if(mA(y,b,h[S++],h[S++],h[S++],h[S++],h[S],h[S+1],t,r,o))return!0}else g+=yA(y,b,h[S++],h[S++],h[S++],h[S++],h[S],h[S+1],r,o)||0;y=h[S++],b=h[S++];break;case Zu.Q:if(e){if(ph(y,b,h[S++],h[S++],h[S],h[S+1],t,r,o))return!0}else g+=vA(y,b,h[S++],h[S++],h[S],h[S+1],r,o)||0;y=h[S++],b=h[S++];break;case Zu.A:var I=h[S++],N=h[S++],L=h[S++],R=h[S++],O=h[S++],B=h[S++];S+=1;var G=!!(1-h[S++]);i=Math.cos(O)*L+I,a=Math.sin(O)*R+N,A?(_=i,w=a):g+=ms(y,b,i,a,r,o);var W=(r-I)*R/L+I;if(e){if(im(I,N,R,O,O+B,G,t,W,o))return!0}else g+=uE(I,N,R,O,O+B,G,W,o);y=Math.cos(O+B)*L+I,b=Math.sin(O+B)*R+N;break;case Zu.R:if(_=y=h[S++],w=b=h[S++],i=_+h[S++],a=w+h[S++],e){if($l(_,w,i,w,t,r,o)||$l(i,w,i,a,t,r,o)||$l(i,a,_,a,t,r,o)||$l(_,a,_,w,t,r,o))return!0}else g+=ms(i,w,i,a,r,o),g+=ms(_,a,_,w,r,o);break;case Zu.Z:if(e){if($l(y,b,_,w,t,r,o))return!0}else g+=ms(y,b,_,w,r,o);y=_,b=w}}return e||Math.abs(b-w)<1e-4||(g+=ms(y,b,_,w,r,o)||0),0!==g}var t0=Pe({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Fs),cE={style:Pe({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},jc.style)},n0=ls.concat(["invisible","culling","z","z2","zlevel","parent"]),Yn=function(n){function t(r){return n.call(this,r)||this}var e;return Ce(t,n),t.prototype.update=function(){var r=this;n.prototype.update.call(this);var o=this.style;if(o.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(h){r.buildPath(h,r.shape)}),i.silent=!0;var a=i.style;for(var l in o)a[l]!==o[l]&&(a[l]=o[l]);a.fill=o.fill?o.decal:null,a.decal=null,a.shadowColor=null,o.strokeFirst&&(a.stroke=null);for(var c=0;c<n0.length;++c)i[n0[c]]=this[n0[c]];i.__dirty|=1}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var o=vn(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<o.length;a++){var l=o[a],c=r[l];"style"===l?this.style?De(this.style,c):this.useStyle(c):"shape"===l?De(this.shape,c):n.prototype.attrKV.call(this,l,c)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if("none"!==r){if(bt(r)){var o=eh(r,0);return o>.5?Je:o>.2?"#eee":o_}if(r)return o_}return Je},t.prototype.getInsideTextStroke=function(r){var o=this.style.fill;if(bt(o)){var i=this.__zr;if(!(!i||!i.isDarkMode())==eh(r,0)<.4)return o}},t.prototype.buildPath=function(r,o,i){},t.prototype.pathUpdated=function(){this.__dirty&=-5},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new gs(!1)},t.prototype.hasStroke=function(){var r=this.style,o=r.stroke;return!(null==o||"none"===o||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style.fill;return null!=r&&"none"!==r},t.prototype.getBoundingRect=function(){var r=this._rect,o=this.style,i=!r;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var l=this.path;(a||4&this.__dirty)&&(l.beginPath(),this.buildPath(l,this.shape,!1),this.pathUpdated()),r=l.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var c=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){c.copy(r);var h=o.strokeNoScale?this.getLineScale():1,p=o.lineWidth;this.hasFill()||(p=Math.max(p,this.strokeContainThreshold??4)),h>1e-10&&(c.width+=p/h,c.height+=p/h,c.x-=p/h/2,c.y-=p/h/2)}return c}return r},t.prototype.contain=function(r,o){var i=this.transformCoordToLocal(r,o),a=this.getBoundingRect(),l=this.style;if(a.contain(r=i[0],o=i[1])){var c=this.path;if(this.hasStroke()){var h=l.lineWidth,p=l.strokeNoScale?this.getLineScale():1;if(p>1e-10&&(this.hasFill()||(h=Math.max(h,this.strokeContainThreshold)),bA(c,h/p,!0,r,o)))return!0}if(this.hasFill())return bA(c,0,!1,r,o)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){"style"===r?this.dirtyStyle():"shape"===r?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,o){"shape"===r?this.setShape(o):n.prototype.attrKV.call(this,r,o)},t.prototype.setShape=function(r,o){var i=this.shape;return i||(i=this.shape={}),"string"==typeof r?i[r]=o:De(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(4&this.__dirty)},t.prototype.createStyle=function(r){return Ca(t0,r)},t.prototype._innerSaveToNormal=function(r){n.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.shape&&!o.shape&&(o.shape=De({},this.shape))},t.prototype._applyStateObj=function(r,o,i,a,l,c){n.prototype._applyStateObj.call(this,r,o,i,a,l,c);var h,p=!(o&&a);if(o&&o.shape?l?a?h=o.shape:(h=De({},i.shape),De(h,o.shape)):(h=De({},a?this.shape:i.shape),De(h,o.shape)):p&&(h=i.shape),h)if(l){this.shape=De({},this.shape);for(var g={},y=vn(h),b=0;b<y.length;b++){var _=y[b];"object"==typeof h[_]?this.shape[_]=h[_]:g[_]=h[_]}this._transitionState(r,{shape:g},c)}else this.shape=h,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var o,i=n.prototype._mergeStates.call(this,r),a=0;a<r.length;a++){var l=r[a];l.shape&&this._mergeStyle(o=o||{},l.shape)}return o&&(i.shape=o),i},t.prototype.getAnimationStyleProps=function(){return cE},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var o=function(a){function l(c){var h=a.call(this,c)||this;return r.init&&r.init.call(h,c),h}return Ce(l,a),l.prototype.getDefaultStyle=function(){return jt(r.style)},l.prototype.getDefaultShape=function(){return jt(r.shape)},l}(t);for(var i in r)"function"==typeof r[i]&&(o.prototype[i]=r[i]);return o},t.initDefaultProps=((e=t.prototype).type="path",e.strokeContainThreshold=5,e.segmentIgnoreThreshold=0,e.subPixelOptimize=!1,e.autoBatch=!1,void(e.__dirty=7)),t}(hs),dE=Pe({strokeFirst:!0,font:an,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},t0),Xi=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.hasStroke=function(){var e=this.style,r=e.stroke;return null!=r&&"none"!==r&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.createStyle=function(e){return Ca(dE,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var r=e.text;null!=r?r+="":r="";var o=Ug(r,e.font,e.textAlign,e.textBaseline);if(o.x+=e.x||0,o.y+=e.y||0,this.hasStroke()){var i=e.lineWidth;o.x-=i/2,o.y-=i/2,o.width+=i,o.height+=i}this._rect=o}return this._rect},t.initDefaultProps=void(t.prototype.dirtyRectTolerance=10),t}(hs);Xi.prototype.type="tspan";var A_=Pe({x:0,y:0},Fs),xA={style:Pe({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},jc.style)},jo=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.createStyle=function(e){return Ca(A_,e)},t.prototype._getSize=function(e){var r=this.style,o=r[e];if(null!=o)return o;var i,a=(i=r.image)&&"string"!=typeof i&&i.width&&i.height?r.image:this.__image;if(!a)return 0;var l="width"===e?"height":"width",c=r[l];return null==c?a[e]:a[e]/a[l]*c},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return xA},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new Kt(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}(hs);jo.prototype.type="image";var rf=Math.round;function k_(n,t,e){if(t){var r=t.x1,o=t.x2,i=t.y1,a=t.y2;n.x1=r,n.x2=o,n.y1=i,n.y2=a;var l=e&&e.lineWidth;return l&&(rf(2*r)===rf(2*o)&&(n.x1=n.x2=hl(r,l,!0)),rf(2*i)===rf(2*a)&&(n.y1=n.y2=hl(i,l,!0))),n}}function _A(n,t,e){if(t){var r=t.x,o=t.y,i=t.width,a=t.height;n.x=r,n.y=o,n.width=i,n.height=a;var l=e&&e.lineWidth;return l&&(n.x=hl(r,l,!0),n.y=hl(o,l,!0),n.width=Math.max(hl(r+i,l,!1)-n.x,0===i?0:1),n.height=Math.max(hl(o+a,l,!1)-n.y,0===a?0:1)),n}}function hl(n,t,e){if(!t)return n;var r=rf(2*n);return(r+rf(t))%2==0?r/2:(r+(e?1:-1))/2}var hE=function(){this.x=0,this.y=0,this.width=0,this.height=0},am={},$n=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultShape=function(){return new hE},t.prototype.buildPath=function(e,r){var o,i,a,l,h,p,g,y,b,_,w,S,M,A,I,N;if(this.subPixelOptimize){var c=_A(am,r,this.style);o=c.x,i=c.y,a=c.width,l=c.height,c.r=r.r,r=c}else o=r.x,i=r.y,a=r.width,l=r.height;r.r?(h=e,S=(p=r).x,M=p.y,(A=p.width)<0&&(S+=A,A=-A),(I=p.height)<0&&(M+=I,I=-I),"number"==typeof(N=p.r)?g=y=b=_=N:N instanceof Array?1===N.length?g=y=b=_=N[0]:2===N.length?(g=b=N[0],y=_=N[1]):3===N.length?(g=N[0],y=_=N[1],b=N[2]):(g=N[0],y=N[1],b=N[2],_=N[3]):g=y=b=_=0,g+y>A&&(g*=A/(w=g+y),y*=A/w),b+_>A&&(b*=A/(w=b+_),_*=A/w),y+b>I&&(y*=I/(w=y+b),b*=I/w),g+_>I&&(g*=I/(w=g+_),_*=I/w),h.moveTo(S+g,M),h.lineTo(S+A-y,M),0!==y&&h.arc(S+A-y,M+y,y,-Math.PI/2,0),h.lineTo(S+A,M+I-b),0!==b&&h.arc(S+A-b,M+I-b,b,0,Math.PI/2),h.lineTo(S+_,M+I),0!==_&&h.arc(S+_,M+I-_,_,Math.PI/2,Math.PI),h.lineTo(S,M+g),0!==g&&h.arc(S+g,M+g,g,Math.PI,1.5*Math.PI)):e.rect(o,i,a,l)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Yn);$n.prototype.type="rect";var I_={fill:"#000"},r0={style:Pe({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},jc.style)},Kn=function(n){function t(e){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=I_,r.attr(e),r}return Ce(t,n),t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var r=this._children[e];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},t.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):n.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(e){var r=this.innerTransformable;return r?r.getLocalTransform(e):n.prototype.getLocalTransform.call(this,e)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){var e;this._childCursor=0,Oe(e=this.style),Z(e.rich,Oe),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(e){n.prototype.addSelfToZr.call(this,e);for(var r=0;r<this._children.length;r++)this._children[r].__zr=e},t.prototype.removeSelfFromZr=function(e){n.prototype.removeSelfFromZr.call(this,e);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new Kt(0,0,0,0),r=this._children,o=[],i=null,a=0;a<r.length;a++){var l=r[a],c=l.getBoundingRect(),h=l.getLocalTransform(o);h?(e.copy(c),e.applyTransform(h),(i=i||e.clone()).union(e)):(i=i||c.clone()).union(c)}this._rect=i||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||I_},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,r){if(!r)return e;var o=r.rich,i=e.rich||o&&{};return De(e,r),o&&i?(this._mergeRich(i,o),e.rich=i):i&&(e.rich=i),e},t.prototype._mergeRich=function(e,r){for(var o=vn(r),i=0;i<o.length;i++){var a=o[i];e[a]=e[a]||{},De(e[a],r[a])}},t.prototype.getAnimationStyleProps=function(){return r0},t.prototype._getOrCreateChild=function(e){var r=this._children[this._childCursor];return r&&r instanceof e||(r=new e),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},t.prototype._updatePlainTexts=function(){var e=this.style,r=e.font||an,o=e.padding,i=function(ie,se){null!=ie&&(ie+="");var le,pe=se.overflow,me=se.padding,ve=se.font,He="truncate"===pe,nt=Nv(ve),Me=We(se.lineHeight,nt),je=!!se.backgroundColor,tt="truncate"===se.lineOverflow,ut=se.width,pt=(le=null==ut||"break"!==pe&&"breakAll"!==pe?ie?ie.split("\n"):[]:ie?Jp(ie,se.font,ut,"breakAll"===pe,0).lines:[]).length*Me,St=We(se.height,pt);if(pt>St&&tt){var Ze=Math.floor(St/Me);le=le.slice(0,Ze)}if(ie&&He&&null!=ut)for(var yt=fA(ut,ve,se.ellipsis,{minChar:se.truncateMinChar,placeholder:se.placeholder}),Vt=0;Vt<le.length;Vt++)le[Vt]=Yl(le[Vt],yt);var mn=St,Dn=0;for(Vt=0;Vt<le.length;Vt++)Dn=Math.max(us(le[Vt],ve),Dn);null==ut&&(ut=Dn);var Tr=Dn;return me&&(mn+=me[0]+me[2],Tr+=me[1]+me[3],ut+=me[1]+me[3]),je&&(Tr=ut),{lines:le,height:St,outerWidth:Tr,outerHeight:mn,lineHeight:Me,calculatedLineHeight:nt,contentWidth:Dn,contentHeight:pt,width:ut}}(E_(e),e),a=a0(e),l=!!e.backgroundColor,c=i.outerHeight,h=i.outerWidth,p=i.contentWidth,g=i.lines,y=i.lineHeight,b=this._defaultStyle,_=e.x||0,w=e.y||0,S=e.align||b.align||"left",M=e.verticalAlign||b.verticalAlign||"top",A=_,I=Wp(w,i.contentHeight,M);if(a||o){var N=Hp(_,h,S),L=Wp(w,c,M);a&&this._renderBackground(e,e,N,L,h,c)}I+=y/2,o&&(A=Ws(_,S,o),"top"===M?I+=o[0]:"bottom"===M&&(I-=o[2]));for(var R=0,O=!1,B=(i0("fill"in e?e.fill:(O=!0,b.fill))),G=(sm("stroke"in e?e.stroke:l||b.autoStroke&&!O?null:(R=2,b.stroke))),W=e.textShadowBlur>0,Y=null!=e.width&&("truncate"===e.overflow||"break"===e.overflow||"breakAll"===e.overflow),X=i.calculatedLineHeight,J=0;J<g.length;J++){var ne=this._getOrCreateChild(Xi),oe=ne.createStyle();ne.useStyle(oe),oe.text=g[J],oe.x=A,oe.y=I,S&&(oe.textAlign=S),oe.textBaseline="middle",oe.opacity=e.opacity,oe.strokeFirst=!0,W&&(oe.shadowBlur=e.textShadowBlur||0,oe.shadowColor=e.textShadowColor||"transparent",oe.shadowOffsetX=e.textShadowOffsetX||0,oe.shadowOffsetY=e.textShadowOffsetY||0),oe.stroke=G,oe.fill=B,G&&(oe.lineWidth=e.lineWidth||R,oe.lineDash=e.lineDash,oe.lineDashOffset=e.lineDashOffset||0),oe.font=r,$u(oe,e),I+=y,Y&&ne.setBoundingRect(new Kt(Hp(oe.x,e.width,oe.textAlign),Wp(oe.y,X,oe.textBaseline),p,X))}},t.prototype._updateRichTexts=function(){var e=this.style,r=function(ne,oe){var ie=new cl;if(null!=ne&&(ne+=""),!ne)return ie;for(var se,le=oe.width,pe=oe.height,me=oe.overflow,ve="break"!==me&&"breakAll"!==me||null==le?null:{width:le,accumWidth:0,breakAll:"breakAll"===me},He=qv.lastIndex=0;null!=(se=qv.exec(ne));){var nt=se.index;nt>He&&ei(ie,ne.substring(He,nt),oe,ve),ei(ie,se[2],oe,ve,se[1]),He=qv.lastIndex}He<ne.length&&ei(ie,ne.substring(He,ne.length),oe,ve);var Me=[],je=0,tt=0,ut=oe.padding,pt="truncate"===me,St="truncate"===oe.lineOverflow;function Ze(bo,jr,po){bo.width=jr,bo.lineHeight=po,je+=po,tt=Math.max(tt,jr)}e:for(var yt=0;yt<ie.lines.length;yt++){for(var Vt=ie.lines[yt],mn=0,Dn=0,Tr=0;Tr<Vt.tokens.length;Tr++){var Vn=(ln=Vt.tokens[Tr]).styleName&&oe.rich[ln.styleName]||{},nr=ln.textPadding=Vn.padding,wr=nr?nr[1]+nr[3]:0,oo=ln.font=Vn.font||oe.font;ln.contentHeight=Nv(oo);var io=We(Vn.height,ln.contentHeight);if(ln.innerHeight=io,nr&&(io+=nr[0]+nr[2]),ln.height=io,ln.lineHeight=An(Vn.lineHeight,oe.lineHeight,io),ln.align=Vn&&Vn.align||oe.align,ln.verticalAlign=Vn&&Vn.verticalAlign||"middle",St&&null!=pe&&je+ln.lineHeight>pe){Tr>0?(Vt.tokens=Vt.tokens.slice(0,Tr),Ze(Vt,Dn,mn),ie.lines=ie.lines.slice(0,yt+1)):ie.lines=ie.lines.slice(0,yt);break e}var yi=Vn.width,Cs=null==yi||"auto"===yi;if("string"==typeof yi&&"%"===yi.charAt(yi.length-1))ln.percentWidth=yi,Me.push(ln),ln.contentWidth=us(ln.text,oo);else{if(Cs){var ku=Vn.backgroundColor,Ka=ku&&ku.image;Ka&&Jg(Ka=Kg(Ka))&&(ln.width=Math.max(ln.width,Ka.width*io/Ka.height))}var Ms=pt&&null!=le?le-Dn:null;null!=Ms&&Ms<ln.width?!Cs||Ms<wr?(ln.text="",ln.width=ln.contentWidth=0):(ln.text=Cr(ln.text,Ms-wr,oo,oe.ellipsis,{minChar:oe.truncateMinChar}),ln.width=ln.contentWidth=us(ln.text,oo)):ln.contentWidth=us(ln.text,oo)}ln.width+=wr,Dn+=ln.width,Vn&&(mn=Math.max(mn,ln.lineHeight))}Ze(Vt,Dn,mn)}for(ie.outerWidth=ie.width=We(le,tt),ie.outerHeight=ie.height=We(pe,je),ie.contentHeight=je,ie.contentWidth=tt,ut&&(ie.outerWidth+=ut[1]+ut[3],ie.outerHeight+=ut[0]+ut[2]),yt=0;yt<Me.length;yt++){var ln,ar=(ln=Me[yt]).percentWidth;ln.width=parseInt(ar,10)/100*ie.width}return ie}(E_(e),e),o=r.width,i=r.outerWidth,a=r.outerHeight,l=e.padding,h=e.y||0,p=this._defaultStyle,y=e.verticalAlign||p.verticalAlign,b=Hp(e.x||0,i,e.align||p.align),_=Wp(h,a,y),w=b,S=_;l&&(w+=l[3],S+=l[0]);var M=w+o;a0(e)&&this._renderBackground(e,e,b,_,i,a);for(var A=!!e.backgroundColor,I=0;I<r.lines.length;I++){for(var N=r.lines[I],L=N.tokens,R=L.length,O=N.lineHeight,B=N.width,G=0,W=w,Y=M,X=R-1,J=void 0;G<R&&(!(J=L[G]).align||"left"===J.align);)this._placeToken(J,e,O,S,W,"left",A),B-=J.width,W+=J.width,G++;for(;X>=0&&"right"===(J=L[X]).align;)this._placeToken(J,e,O,S,Y,"right",A),B-=J.width,Y-=J.width,X--;for(W+=(o-(W-w)-(M-Y)-B)/2;G<=X;)this._placeToken(J=L[G],e,O,S,W+J.width/2,"center",A),W+=J.width,G++;S+=O}},t.prototype._placeToken=function(e,r,o,i,a,l,c){var h=r.rich[e.styleName]||{};h.text=e.text;var p=e.verticalAlign,g=i+o/2;"top"===p?g=i+e.height/2:"bottom"===p&&(g=i+o-e.height/2),!e.isLineHolder&&a0(h)&&this._renderBackground(h,r,"right"===l?a-e.width:"center"===l?a-e.width/2:a,g-e.height/2,e.width,e.height);var y=!!h.backgroundColor,b=e.textPadding;b&&(a=Ws(a,l,b),g-=e.height/2-b[0]-e.innerHeight/2);var _=this._getOrCreateChild(Xi),w=_.createStyle();_.useStyle(w);var S=this._defaultStyle,M=!1,A=0,I=i0("fill"in h?h.fill:"fill"in r?r.fill:(M=!0,S.fill)),N=sm("stroke"in h?h.stroke:"stroke"in r?r.stroke:y||c||S.autoStroke&&!M?null:(A=2,S.stroke)),L=h.textShadowBlur>0||r.textShadowBlur>0;w.text=e.text,w.x=a,w.y=g,L&&(w.shadowBlur=h.textShadowBlur||r.textShadowBlur||0,w.shadowColor=h.textShadowColor||r.textShadowColor||"transparent",w.shadowOffsetX=h.textShadowOffsetX||r.textShadowOffsetX||0,w.shadowOffsetY=h.textShadowOffsetY||r.textShadowOffsetY||0),w.textAlign=l,w.textBaseline="middle",w.font=e.font||an,w.opacity=An(h.opacity,r.opacity,1),$u(w,h),N&&(w.lineWidth=An(h.lineWidth,r.lineWidth,A),w.lineDash=We(h.lineDash,r.lineDash),w.lineDashOffset=r.lineDashOffset||0,w.stroke=N),I&&(w.fill=I);var R=e.contentWidth,O=e.contentHeight;_.setBoundingRect(new Kt(Hp(w.x,R,w.textAlign),Wp(w.y,O,w.textBaseline),R,O))},t.prototype._renderBackground=function(e,r,o,i,a,l){var c,h,p,g=e.backgroundColor,y=e.borderWidth,b=e.borderColor,_=g&&g.image,w=g&&!_,S=e.borderRadius,M=this;if(w||e.lineHeight||y&&b){(c=this._getOrCreateChild($n)).useStyle(c.createStyle()),c.style.fill=null;var A=c.shape;A.x=o,A.y=i,A.width=a,A.height=l,A.r=S,c.dirtyShape()}if(w)(p=c.style).fill=g||null,p.fillOpacity=We(e.fillOpacity,1);else if(_){(h=this._getOrCreateChild(jo)).onload=function(){M.dirtyStyle()};var I=h.style;I.image=g.image,I.x=o,I.y=i,I.width=a,I.height=l}y&&b&&((p=c.style).lineWidth=y,p.stroke=b,p.strokeOpacity=We(e.strokeOpacity,1),p.lineDash=e.borderDash,p.lineDashOffset=e.borderDashOffset||0,c.strokeContainThreshold=0,c.hasFill()&&c.hasStroke()&&(p.strokeFirst=!0,p.lineWidth*=2));var N=(c||h).style;N.shadowBlur=e.shadowBlur||0,N.shadowColor=e.shadowColor||"transparent",N.shadowOffsetX=e.shadowOffsetX||0,N.shadowOffsetY=e.shadowOffsetY||0,N.opacity=An(e.opacity,r.opacity,1)},t.makeFont=function(e){var r="";return qc(e)&&(r=[e.fontStyle,e.fontWeight,N_(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),r&&Br(r)||e.textFont||e.font},t}(hs),D_={left:!0,right:1,center:1},wA={top:1,bottom:1,middle:1},o0=["fontStyle","fontWeight","fontSize","fontFamily"];function N_(n){return"string"!=typeof n||-1===n.indexOf("px")&&-1===n.indexOf("rem")&&-1===n.indexOf("em")?isNaN(+n)?"12px":n+"px":n}function $u(n,t){for(var e=0;e<o0.length;e++){var r=o0[e],o=t[r];null!=o&&(n[r]=o)}}function qc(n){return null!=n.fontSize||n.fontFamily||n.fontWeight}function Oe(n){if(n){n.font=Kn.makeFont(n);var t=n.align;"middle"===t&&(t="center"),n.align=null==t||D_[t]?t:"left";var e=n.verticalAlign;"center"===e&&(e="middle"),n.verticalAlign=null==e||wA[e]?e:"top",n.padding&&(n.padding=pr(n.padding))}}function sm(n,t){return null==n||t<=0||"transparent"===n||"none"===n?null:n.image||n.colorStops?"#000":n}function i0(n){return null==n||"none"===n?null:n.image||n.colorStops?"#000":n}function Ws(n,t,e){return"right"===t?n-e[1]:"center"===t?n+e[3]/2-e[1]/2:n+e[3]}function E_(n){var t=n.text;return null!=t&&(t+=""),t}function a0(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var cn=Gn(),lm=function(n,t,e,r){if(r){var o=cn(r);o.dataIndex=e,o.dataType=t,o.seriesIndex=n,o.ssrType="chart","group"===r.type&&r.traverse(function(i){var a=cn(i);a.seriesIndex=n,a.dataIndex=e,a.dataType=t,a.ssrType="chart"})}},L_=1,R_={},O_=Gn(),s0=Gn(),ui=["emphasis","blur","select"],of=["normal","emphasis","blur","select"],P_=10,Zc="highlight",um="downplay",af="select",cm="unselect",sf="toggleSelect";function fh(n){return null!=n&&"none"!==n}function lf(n,t,e){n.onHoverStateChange&&(n.hoverState||0)!==e&&n.onHoverStateChange(t),n.hoverState=e}function B_(n){lf(n,"emphasis",2)}function z_(n){2===n.hoverState&&lf(n,"normal",0)}function ci(n){lf(n,"blur",1)}function pl(n){1===n.hoverState&&lf(n,"normal",0)}function pE(n){n.selected=!0}function fE(n){n.selected=!1}function SA(n,t,e){t(n,e)}function Jl(n,t,e){SA(n,t,e),n.isGroup&&n.traverse(function(r){SA(r,t,e)})}function dm(n,t){switch(t){case"emphasis":n.hoverState=2;break;case"normal":n.hoverState=0;break;case"blur":n.hoverState=1;break;case"select":n.selected=!0}}function hm(n,t){var o,i,a,l,c,h,e=this.states[n];if(this.style){if("emphasis"===n)return function(r,o,i,a){var l=i&&$t(i,"select")>=0,c=!1;if(r instanceof Yn){var h=O_(r),p=l&&h.selectFill||h.normalFill,g=l&&h.selectStroke||h.normalStroke;if(fh(p)||fh(g)){var y=(a=a||{}).style||{};"inherit"===y.fill?(c=!0,a=De({},a),(y=De({},y)).fill=p):!fh(y.fill)&&fh(p)?(c=!0,a=De({},a),(y=De({},y)).fill=th(p)):!fh(y.stroke)&&fh(g)&&(c||(a=De({},a),y=De({},y)),y.stroke=th(g)),a.style=y}}return a&&null==a.z2&&(c||(a=De({},a)),a.z2=r.z2+(r.z2EmphasisLift??P_)),a}(this,0,t,e);if("blur"===n)return i=e,a=$t(this.currentStates,o=n)>=0,l=this.style.opacity,c=a?null:function(p,g,y,b){for(var _=p.style,w={},S=0;S<g.length;S++){var M=g[S];w[M]=_[M]??(b&&b[M])}for(S=0;S<p.animators.length;S++){var I=p.animators[S];I.__fromStateTransition&&I.__fromStateTransition.indexOf(y)<0&&"style"===I.targetName&&I.saveTo(w,g)}return w}(this,["opacity"],o,{opacity:1}),null==(h=(i=i||{}).style||{}).opacity&&(i=De({},i),h=De({opacity:a?l:.1*c.opacity},h),i.style=h),i;if("select"===n)return function(r,o,i){return i&&null==i.z2&&((i=De({},i)).z2=r.z2+(r.z2SelectLift??9)),i}(this,0,e)}return e}function $c(n){n.stateProxy=hm;var t=n.getTextContent(),e=n.getTextGuideLine();t&&(t.stateProxy=hm),e&&(e.stateProxy=hm)}function l0(n,t){!TA(n,t)&&!n.__highByOuter&&Jl(n,B_)}function CA(n,t){!TA(n,t)&&!n.__highByOuter&&Jl(n,z_)}function Ku(n,t){n.__highByOuter|=1<<(t||0),Jl(n,B_)}function Ql(n,t){!(n.__highByOuter&=~(1<<(t||0)))&&Jl(n,z_)}function At(n){Jl(n,ci)}function uf(n){Jl(n,pl)}function V_(n){Jl(n,pE)}function MA(n){Jl(n,fE)}function TA(n,t){return n.__highDownSilentOnTouch&&t.zrByTouch}function F_(n){var t=n.getModel(),e=[],r=[];t.eachComponent(function(o,i){var a=s0(i),l="series"===o,c=l?n.getViewOfSeriesModel(i):n.getViewOfComponentModel(i);!l&&r.push(c),a.isBlured&&(c.group.traverse(function(h){pl(h)}),l&&e.push(i)),a.isBlured=!1}),Z(r,function(o){o&&o.toggleBlurSeries&&o.toggleBlurSeries(e,!1,t)})}function G_(n,t,e,r){var o=r.getModel();function i(h,p){for(var g=0;g<p.length;g++){var y=h.getItemGraphicEl(p[g]);y&&uf(y)}}if(e=e||"coordinateSystem",null!=n&&t&&"none"!==t){var a=o.getSeriesByIndex(n),l=a.coordinateSystem;l&&l.master&&(l=l.master);var c=[];o.eachSeries(function(h){var p=a===h,g=h.coordinateSystem;if(g&&g.master&&(g=g.master),!("series"===e&&!p||"coordinateSystem"===e&&!(g&&l?g===l:p)||"series"===t&&p)){if(r.getViewOfSeriesModel(h).group.traverse(function(_){_.__highByOuter&&p&&"self"===t||ci(_)}),Mn(t))i(h.getData(),t);else if(Ft(t))for(var y=vn(t),b=0;b<y.length;b++)i(h.getData(y[b]),t[y[b]]);c.push(h),s0(h).isBlured=!0}}),o.eachComponent(function(h,p){if("series"!==h){var g=r.getViewOfComponentModel(p);g&&g.toggleBlurSeries&&g.toggleBlurSeries(c,!0,o)}})}}function H_(n,t,e){if(null!=n&&null!=t){var r=e.getModel().getComponent(n,t);if(r){s0(r).isBlured=!0;var o=e.getViewOfComponentModel(r);o&&o.focusBlurEnabled&&o.group.traverse(function(i){ci(i)})}}}function u0(n,t,e,r){var o={focusSelf:!1,dispatchers:null};if(null==n||"series"===n||null==t||null==e)return o;var i=r.getModel().getComponent(n,t);if(!i)return o;var a=r.getViewOfComponentModel(i);if(!a||!a.findHighDownDispatchers)return o;for(var l,c=a.findHighDownDispatchers(e),h=0;h<c.length;h++)if("self"===cn(c[h]).focus){l=!0;break}return{focusSelf:l,dispatchers:c}}function AA(n){Z(n.getAllData(),function(t){var r=t.type;t.data.eachItemGraphicEl(function(o,i){n.isSelected(i,r)?V_(o):MA(o)})})}function di(n){var t=[];return n.eachSeries(function(e){Z(e.getAllData(),function(r){var o=r.type,i=e.getSelectedDataIndices();if(i.length>0){var a={dataIndex:i,seriesIndex:e.seriesIndex};null!=o&&(a.dataType=o),t.push(a)}})}),t}function Us(n,t,e){Kc(n,!0),Jl(n,$c),W_(n,t,e)}function mo(n,t,e,r){r?Kc(n,!1):Us(n,t,e)}function W_(n,t,e){var r=cn(n);null!=t?(r.focus=t,r.blurScope=e):r.focus&&(r.focus=null)}var kA=["emphasis","blur","select"],gE={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Mi(n,t,e,r){e=e||"itemStyle";for(var o=0;o<kA.length;o++){var i=kA[o],a=t.getModel([i,e]);n.ensureState(i).style=r?r(a):a[gE[e]]()}}function Kc(n,t){var e=!1===t,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),e&&!r.__highDownDispatcher||(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!e)}function cf(n){return!(!n||!n.__highDownDispatcher)}function U_(n){var t=n.type;return t===af||t===cm||t===sf}function j_(n){var t=n.type;return t===Zc||t===um}var df=gs.CMD,mE=[[],[],[]],IA=Math.sqrt,yE=Math.atan2;function DA(n,t){if(t){var e,r,o,i,a,l,c=n.data,h=n.len(),p=df.M,g=df.C,y=df.L,b=df.R,_=df.A,w=df.Q;for(o=0,i=0;o<h;){switch(e=c[o++],i=o,r=0,e){case p:case y:r=1;break;case g:r=3;break;case w:r=2;break;case _:var S=t[4],M=t[5],A=IA(t[0]*t[0]+t[1]*t[1]),I=IA(t[2]*t[2]+t[3]*t[3]),N=yE(-t[1]/I,t[0]/A);c[o]*=A,c[o++]+=S,c[o]*=I,c[o++]+=M,c[o++]*=A,c[o++]*=I,c[o++]+=N,c[o++]+=N,i=o+=2;break;case b:l[0]=c[o++],l[1]=c[o++],Ye(l,l,t),c[i++]=l[0],c[i++]=l[1],l[0]+=c[o++],l[1]+=c[o++],Ye(l,l,t),c[i++]=l[0],c[i++]=l[1]}for(a=0;a<r;a++){var L=mE[a];L[0]=c[o++],L[1]=c[o++],Ye(L,L,t),c[i++]=L[0],c[i++]=L[1]}}n.increaseVersion()}}var Y_=Math.sqrt,hf=Math.sin,pm=Math.cos,fm=Math.PI;function X_(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function q_(n,t){return(n[0]*t[0]+n[1]*t[1])/(X_(n)*X_(t))}function NA(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(q_(n,t))}function EA(n,t,e,r,o,i,a,l,c,h,p){var g=c*(fm/180),y=pm(g)*(n-e)/2+hf(g)*(t-r)/2,b=-1*hf(g)*(n-e)/2+pm(g)*(t-r)/2,_=y*y/(a*a)+b*b/(l*l);_>1&&(a*=Y_(_),l*=Y_(_));var w=(o===i?-1:1)*Y_((a*a*(l*l)-a*a*(b*b)-l*l*(y*y))/(a*a*(b*b)+l*l*(y*y)))||0,S=w*a*b/l,M=w*-l*y/a,A=(n+e)/2+pm(g)*S-hf(g)*M,I=(t+r)/2+hf(g)*S+pm(g)*M,N=NA([1,0],[(y-S)/a,(b-M)/l]),L=[(y-S)/a,(b-M)/l],R=[(-1*y-S)/a,(-1*b-M)/l],O=NA(L,R);if(q_(L,R)<=-1&&(O=fm),q_(L,R)>=1&&(O=0),O<0){var B=Math.round(O/fm*1e6)/1e6;O=2*fm+B%2*fm}p.addData(h,A,I,a,l,N,O,g,i)}var LA=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,vE=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,RA=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.applyTransform=function(e){},t}(Yn);function Z_(n){return null!=n.setData}function OA(n,t){var e=function(o){var i=new gs;if(!o)return i;var a,l=0,c=0,h=l,p=c,g=gs.CMD,y=o.match(LA);if(!y)return i;for(var b=0;b<y.length;b++){for(var _=y[b],w=_.charAt(0),S=void 0,M=_.match(vE)||[],A=M.length,I=0;I<A;I++)M[I]=parseFloat(M[I]);for(var N=0;N<A;){var L=void 0,R=void 0,O=void 0,B=void 0,G=void 0,W=void 0,Y=void 0,X=l,J=c,ne=void 0,oe=void 0;switch(w){case"l":l+=M[N++],c+=M[N++],i.addData(S=g.L,l,c);break;case"L":l=M[N++],c=M[N++],i.addData(S=g.L,l,c);break;case"m":l+=M[N++],c+=M[N++],i.addData(S=g.M,l,c),h=l,p=c,w="l";break;case"M":l=M[N++],c=M[N++],i.addData(S=g.M,l,c),h=l,p=c,w="L";break;case"h":l+=M[N++],i.addData(S=g.L,l,c);break;case"H":l=M[N++],i.addData(S=g.L,l,c);break;case"v":c+=M[N++],i.addData(S=g.L,l,c);break;case"V":c=M[N++],i.addData(S=g.L,l,c);break;case"C":i.addData(S=g.C,M[N++],M[N++],M[N++],M[N++],M[N++],M[N++]),l=M[N-2],c=M[N-1];break;case"c":i.addData(S=g.C,M[N++]+l,M[N++]+c,M[N++]+l,M[N++]+c,M[N++]+l,M[N++]+c),l+=M[N-2],c+=M[N-1];break;case"S":L=l,R=c,ne=i.len(),oe=i.data,a===g.C&&(L+=l-oe[ne-4],R+=c-oe[ne-3]),X=M[N++],J=M[N++],l=M[N++],c=M[N++],i.addData(S=g.C,L,R,X,J,l,c);break;case"s":L=l,R=c,ne=i.len(),oe=i.data,a===g.C&&(L+=l-oe[ne-4],R+=c-oe[ne-3]),X=l+M[N++],J=c+M[N++],l+=M[N++],c+=M[N++],i.addData(S=g.C,L,R,X,J,l,c);break;case"Q":X=M[N++],J=M[N++],l=M[N++],c=M[N++],i.addData(S=g.Q,X,J,l,c);break;case"q":X=M[N++]+l,J=M[N++]+c,l+=M[N++],c+=M[N++],i.addData(S=g.Q,X,J,l,c);break;case"T":L=l,R=c,ne=i.len(),oe=i.data,a===g.Q&&(L+=l-oe[ne-4],R+=c-oe[ne-3]),l=M[N++],c=M[N++],i.addData(S=g.Q,L,R,l,c);break;case"t":L=l,R=c,ne=i.len(),oe=i.data,a===g.Q&&(L+=l-oe[ne-4],R+=c-oe[ne-3]),l+=M[N++],c+=M[N++],i.addData(S=g.Q,L,R,l,c);break;case"A":O=M[N++],B=M[N++],G=M[N++],W=M[N++],Y=M[N++],EA(X=l,J=c,l=M[N++],c=M[N++],W,Y,O,B,G,S=g.A,i);break;case"a":O=M[N++],B=M[N++],G=M[N++],W=M[N++],Y=M[N++],EA(X=l,J=c,l+=M[N++],c+=M[N++],W,Y,O,B,G,S=g.A,i)}}"z"!==w&&"Z"!==w||(i.addData(S=g.Z),l=h,c=p),a=S}return i.toStatic(),i}(n),r=De({},t);return r.buildPath=function(o){if(Z_(o))o.setData(e.data),(i=o.getContext())&&o.rebuildPath(i,1);else{var i=o;e.rebuildPath(i,1)}},r.applyTransform=function(o){DA(e,o),this.dirtyShape()},r}function PA(n,t){return new RA(OA(n,t))}function c0(n,t){t=t||{};var e=new Yn;return n.shape&&e.setShape(n.shape),e.setStyle(n.style),t.bakeTransform?DA(e.path,n.getComputedTransform()):t.toLocal?e.setLocalTransform(n.getComputedTransform()):e.copyTransform(n),e.buildPath=n.buildPath,e.applyTransform=e.applyTransform,e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel,e}var bE=function(){this.cx=0,this.cy=0,this.r=0},da=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultShape=function(){return new bE},t.prototype.buildPath=function(e,r){e.moveTo(r.cx+r.r,r.cy),e.arc(r.cx,r.cy,r.r,0,2*Math.PI)},t}(Yn);da.prototype.type="circle";var xE=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},gh=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultShape=function(){return new xE},t.prototype.buildPath=function(e,r){var o=.5522848,i=r.cx,a=r.cy,l=r.rx,c=r.ry,h=l*o,p=c*o;e.moveTo(i-l,a),e.bezierCurveTo(i-l,a-p,i-h,a-c,i,a-c),e.bezierCurveTo(i+h,a-c,i+l,a-p,i+l,a),e.bezierCurveTo(i+l,a+p,i+h,a+c,i,a+c),e.bezierCurveTo(i-h,a+c,i-l,a+p,i-l,a),e.closePath()},t}(Yn);gh.prototype.type="ellipse";var BA=Math.PI,mh=2*BA,yh=Math.sin,pf=Math.cos,_E=Math.acos,qi=Math.atan2,zA=Math.abs,vh=Math.sqrt,gm=Math.max,eu=Math.min,fl=1e-4;function d0(n,t,e,r,o,i,a){var l=n-e,c=t-r,h=(a?i:-i)/vh(l*l+c*c),p=h*c,g=-h*l,y=n+p,b=t+g,_=e+p,w=r+g,S=(y+_)/2,M=(b+w)/2,A=_-y,I=w-b,N=A*A+I*I,L=o-i,R=y*w-_*b,O=(I<0?-1:1)*vh(gm(0,L*L*N-R*R)),B=(R*I-A*O)/N,G=(-R*A-I*O)/N,W=(R*I+A*O)/N,Y=(-R*A+I*O)/N,X=B-S,J=G-M,ne=W-S,oe=Y-M;return X*X+J*J>ne*ne+oe*oe&&(B=W,G=Y),{cx:B,cy:G,x0:-p,y0:-g,x1:B*(o/L-1),y1:G*(o/L-1)}}var SE=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},Ti=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultShape=function(){return new SE},t.prototype.buildPath=function(e,r){!function wE(n,t){var e,r=gm(t.r,0),o=gm(t.r0||0,0),i=r>0;if(i||o>0){if(i||(r=o,o=0),o>r){var a=r;r=o,o=a}var l=t.startAngle,c=t.endAngle;if(!isNaN(l)&&!isNaN(c)){var h=t.cx,p=t.cy,g=!!t.clockwise,y=zA(c-l),b=y>mh&&y%mh;if(b>fl&&(y=b),r>fl)if(y>mh-fl)n.moveTo(h+r*pf(l),p+r*yh(l)),n.arc(h,p,r,l,c,!g),o>fl&&(n.moveTo(h+o*pf(c),p+o*yh(c)),n.arc(h,p,o,c,l,g));else{var _=void 0,w=void 0,S=void 0,M=void 0,A=void 0,I=void 0,N=void 0,L=void 0,R=void 0,O=void 0,B=void 0,G=void 0,W=void 0,Y=void 0,X=void 0,J=void 0,ne=r*pf(l),oe=r*yh(l),ie=o*pf(c),se=o*yh(c),le=y>fl;if(le){var pe=t.cornerRadius;pe&&(_=(e=function(Vt){var mn;if(Ee(Vt)){var Dn=Vt.length;if(!Dn)return Vt;mn=1===Dn?[Vt[0],Vt[0],0,0]:2===Dn?[Vt[0],Vt[0],Vt[1],Vt[1]]:3===Dn?Vt.concat(Vt[2]):Vt}else mn=[Vt,Vt,Vt,Vt];return mn}(pe))[0],w=e[1],S=e[2],M=e[3]);var me=zA(r-o)/2;if(A=eu(me,S),I=eu(me,M),N=eu(me,_),L=eu(me,w),B=R=gm(A,I),G=O=gm(N,L),(R>fl||O>fl)&&(W=r*pf(c),Y=r*yh(c),X=o*pf(l),J=o*yh(l),y<BA)){var ve=function(Vt,mn,Dn,Tr,Vn,nr,wr,oo){var io=Dn-Vt,yi=Tr-mn,Cs=wr-Vn,ku=oo-nr,Ka=ku*io-Cs*yi;if(!(Ka*Ka<fl))return[Vt+(Ka=(Cs*(mn-nr)-ku*(Vt-Vn))/Ka)*io,mn+Ka*yi]}(ne,oe,X,J,W,Y,ie,se);if(ve){var He=ne-ve[0],nt=oe-ve[1],Me=W-ve[0],je=Y-ve[1],tt=1/yh(_E((He*Me+nt*je)/(vh(He*He+nt*nt)*vh(Me*Me+je*je)))/2),ut=vh(ve[0]*ve[0]+ve[1]*ve[1]);B=eu(R,(r-ut)/(tt+1)),G=eu(O,(o-ut)/(tt-1))}}}if(le)if(B>fl){var pt=eu(S,B),St=eu(M,B),Ze=d0(X,J,ne,oe,r,pt,g),yt=d0(W,Y,ie,se,r,St,g);n.moveTo(h+Ze.cx+Ze.x0,p+Ze.cy+Ze.y0),B<R&&pt===St?n.arc(h+Ze.cx,p+Ze.cy,B,qi(Ze.y0,Ze.x0),qi(yt.y0,yt.x0),!g):(pt>0&&n.arc(h+Ze.cx,p+Ze.cy,pt,qi(Ze.y0,Ze.x0),qi(Ze.y1,Ze.x1),!g),n.arc(h,p,r,qi(Ze.cy+Ze.y1,Ze.cx+Ze.x1),qi(yt.cy+yt.y1,yt.cx+yt.x1),!g),St>0&&n.arc(h+yt.cx,p+yt.cy,St,qi(yt.y1,yt.x1),qi(yt.y0,yt.x0),!g))}else n.moveTo(h+ne,p+oe),n.arc(h,p,r,l,c,!g);else n.moveTo(h+ne,p+oe);o>fl&&le?G>fl?(pt=eu(_,G),Ze=d0(ie,se,W,Y,o,-(St=eu(w,G)),g),yt=d0(ne,oe,X,J,o,-pt,g),n.lineTo(h+Ze.cx+Ze.x0,p+Ze.cy+Ze.y0),G<O&&pt===St?n.arc(h+Ze.cx,p+Ze.cy,G,qi(Ze.y0,Ze.x0),qi(yt.y0,yt.x0),!g):(St>0&&n.arc(h+Ze.cx,p+Ze.cy,St,qi(Ze.y0,Ze.x0),qi(Ze.y1,Ze.x1),!g),n.arc(h,p,o,qi(Ze.cy+Ze.y1,Ze.cx+Ze.x1),qi(yt.cy+yt.y1,yt.cx+yt.x1),g),pt>0&&n.arc(h+yt.cx,p+yt.cy,pt,qi(yt.y1,yt.x1),qi(yt.y0,yt.x0),!g))):(n.lineTo(h+ie,p+se),n.arc(h,p,o,c,l,g)):n.lineTo(h+ie,p+se)}else n.moveTo(h,p);n.closePath()}}}(e,r)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Yn);Ti.prototype.type="sector";var CE=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},bh=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultShape=function(){return new CE},t.prototype.buildPath=function(e,r){var o=r.cx,i=r.cy,a=2*Math.PI;e.moveTo(o+r.r,i),e.arc(o,i,r.r,0,a,!1),e.moveTo(o+r.r0,i),e.arc(o,i,r.r0,0,a,!0)},t}(Yn);function mm(n,t,e){var r=t.smooth,o=t.points;if(o&&o.length>=2){if(r){var i=function(y,b,_,w){var S,M,A,I,N=[],L=[],R=[],O=[];if(w){A=[1/0,1/0],I=[-1/0,-1/0];for(var B=0,G=y.length;B<G;B++)xt(A,A,y[B]),rn(I,I,y[B]);xt(A,A,w[0]),rn(I,I,w[1])}for(B=0,G=y.length;B<G;B++){var W=y[B];if(_)S=y[B?B-1:G-1],M=y[(B+1)%G];else{if(0===B||B===G-1){N.push(zi(y[B]));continue}S=y[B-1],M=y[B+1]}Vi(L,M,S),$o(L,L,b);var Y=Re(W,S),X=Re(W,M),J=Y+X;0!==J&&(Y/=J,X/=J),$o(R,L,-Y),$o(O,L,X);var ne=As([],W,R),oe=As([],W,O);w&&(rn(ne,ne,A),xt(ne,ne,I),rn(oe,oe,A),xt(oe,oe,I)),N.push(ne),N.push(oe)}return _&&N.push(N.shift()),N}(o,r,e,t.smoothConstraint);n.moveTo(o[0][0],o[0][1]);for(var a=o.length,l=0;l<(e?a:a-1);l++){var c=i[2*l],h=i[2*l+1],p=o[(l+1)%a];n.bezierCurveTo(c[0],c[1],h[0],h[1],p[0],p[1])}}else{n.moveTo(o[0][0],o[0][1]),l=1;for(var g=o.length;l<g;l++)n.lineTo(o[l][0],o[l][1])}e&&n.closePath()}}bh.prototype.type="ring";var ME=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},Zi=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultShape=function(){return new ME},t.prototype.buildPath=function(e,r){mm(e,r,!0)},t}(Yn);Zi.prototype.type="polygon";var TE=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},$i=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new TE},t.prototype.buildPath=function(e,r){mm(e,r,!1)},t}(Yn);$i.prototype.type="polyline";var VA={},FA=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},Yo=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new FA},t.prototype.buildPath=function(e,r){var o,i,a,l;if(this.subPixelOptimize){var c=k_(VA,r,this.style);o=c.x1,i=c.y1,a=c.x2,l=c.y2}else o=r.x1,i=r.y1,a=r.x2,l=r.y2;var h=r.percent;0!==h&&(e.moveTo(o,i),h<1&&(a=o*(1-h)+a*h,l=i*(1-h)+l*h),e.lineTo(a,l))},t.prototype.pointAt=function(e){var r=this.shape;return[r.x1*(1-e)+r.x2*e,r.y1*(1-e)+r.y2*e]},t}(Yn);Yo.prototype.type="line";var Ba=[],AE=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function GA(n,t,e){return null!=n.cpx2||null!=n.cpy2?[(e?aa:er)(n.x1,n.cpx1,n.cpx2,n.x2,t),(e?aa:er)(n.y1,n.cpy1,n.cpy2,n.y2,t)]:[(e?Go:_n)(n.x1,n.cpx1,n.x2,t),(e?Go:_n)(n.y1,n.cpy1,n.y2,t)]}var ff=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new AE},t.prototype.buildPath=function(e,r){var o=r.x1,i=r.y1,a=r.x2,l=r.y2,c=r.cpx1,h=r.cpy1,p=r.cpx2,g=r.cpy2,y=r.percent;0!==y&&(e.moveTo(o,i),null==p||null==g?(y<1&&(_i(o,c,a,y,Ba),c=Ba[1],a=Ba[2],_i(i,h,l,y,Ba),h=Ba[1],l=Ba[2]),e.quadraticCurveTo(c,h,a,l)):(y<1&&(sa(o,c,p,a,y,Ba),c=Ba[1],p=Ba[2],a=Ba[3],sa(i,h,g,l,y,Ba),h=Ba[1],g=Ba[2],l=Ba[3]),e.bezierCurveTo(c,h,p,g,a,l)))},t.prototype.pointAt=function(e){return GA(this.shape,e,!1)},t.prototype.tangentAt=function(e){var r=GA(this.shape,e,!0);return ke(r,r)},t}(Yn);ff.prototype.type="bezier-curve";var kE=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},ym=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new kE},t.prototype.buildPath=function(e,r){var o=r.cx,i=r.cy,a=Math.max(r.r,0),l=r.startAngle,c=r.endAngle,h=r.clockwise,p=Math.cos(l),g=Math.sin(l);e.moveTo(p*a+o,g*a+i),e.arc(o,i,a,l,c,!h)},t}(Yn);ym.prototype.type="arc";var xh=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="compound",e}return Ce(t,n),t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,r=this.shapeChanged(),o=0;o<e.length;o++)r=r||e[o].shapeChanged();r&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],r=this.getGlobalScale(),o=0;o<e.length;o++)e[o].path||e[o].createPathProxy(),e[o].path.setScale(r[0],r[1],e[o].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,r){for(var o=r.paths||[],i=0;i<o.length;i++)o[i].buildPath(e,o[i].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],r=0;r<e.length;r++)e[r].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Yn.prototype.getBoundingRect.call(this)},t}(Yn),HA=function(){function n(t){this.colorStops=t||[]}return n.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},n}(),gf=function(n){function t(e,r,o,i,a,l){var c=n.call(this,a)||this;return c.x=e??0,c.y=r??0,c.x2=o??1,c.y2=i??0,c.type="linear",c.global=l||!1,c}return Ce(t,n),t}(HA),$_=function(n){function t(e,r,o,i,a){var l=n.call(this,i)||this;return l.x=e??.5,l.y=r??.5,l.r=o??.5,l.type="radial",l.global=a||!1,l}return Ce(t,n),t}(HA),_h=[0,0],wh=[0,0],h0=new pn,p0=new pn,f0=function(){function n(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new pn;for(r=0;r<2;r++)this._axes[r]=new pn;t&&this.fromBoundingRect(t,e)}return n.prototype.fromBoundingRect=function(t,e){var r=this._corners,o=this._axes,i=t.x,a=t.y,l=i+t.width,c=a+t.height;if(r[0].set(i,a),r[1].set(l,a),r[2].set(l,c),r[3].set(i,c),e)for(var h=0;h<4;h++)r[h].transform(e);for(pn.sub(o[0],r[1],r[0]),pn.sub(o[1],r[3],r[0]),o[0].normalize(),o[1].normalize(),h=0;h<2;h++)this._origin[h]=o[h].dot(r[0])},n.prototype.intersect=function(t,e){var r=!0,o=!e;return h0.set(1/0,1/0),p0.set(0,0),!this._intersectCheckOneSide(this,t,h0,p0,o,1)&&(r=!1,o)||!this._intersectCheckOneSide(t,this,h0,p0,o,-1)&&(r=!1,o)||o||pn.copy(e,r?h0:p0),r},n.prototype._intersectCheckOneSide=function(t,e,r,o,i,a){for(var l=!0,c=0;c<2;c++){var h=this._axes[c];if(this._getProjMinMaxOnAxis(c,t._corners,_h),this._getProjMinMaxOnAxis(c,e._corners,wh),_h[1]<wh[0]||_h[0]>wh[1]){if(l=!1,i)return l;var p=Math.abs(wh[0]-_h[1]),g=Math.abs(_h[0]-wh[1]);Math.min(p,g)>o.len()&&pn.scale(o,h,p<g?-p*a:g*a)}else r&&(p=Math.abs(wh[0]-_h[1]),g=Math.abs(_h[0]-wh[1]),Math.min(p,g)<r.len()&&pn.scale(r,h,p<g?p*a:-g*a))}return l},n.prototype._getProjMinMaxOnAxis=function(t,e,r){for(var o=this._axes[t],i=this._origin,a=e[0].dot(o)+i[t],l=a,c=a,h=1;h<e.length;h++){var p=e[h].dot(o)+i[t];l=Math.min(p,l),c=Math.max(p,c)}r[0]=l,r[1]=c},n}(),IE=[],WA=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return Ce(t,n),t.prototype.traverse=function(e,r){e.call(r,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,r){r?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,r){r=r||!1;for(var o=0;o<e.length;o++)this.addDisplayable(e[o],r)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var r=this._cursor;r<this._displayables.length;r++)e&&e(this._displayables[r]);for(r=0;r<this._temporaryDisplayables.length;r++)e&&e(this._temporaryDisplayables[r])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++)(r=this._displayables[e]).parent=this,r.update(),r.parent=null;for(e=0;e<this._temporaryDisplayables.length;e++){var r;(r=this._temporaryDisplayables[e]).parent=this,r.update(),r.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Kt(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var o=this._displayables[r],i=o.getBoundingRect().clone();o.needLocalTransform()&&i.applyTransform(o.getLocalTransform(IE)),e.union(i)}this._rect=e}return this._rect},t.prototype.contain=function(e,r){var o=this.transformCoordToLocal(e,r);if(this.getBoundingRect().contain(o[0],o[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(e,r))return!0;return!1},t}(hs),UA=Gn();function mf(n,t,e,r,o){var i;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();i=a&&a.animation}var l="update"===n;if(t&&t.isAnimationEnabled()){var c=void 0,h=void 0,p=void 0;return r?(c=We(r.duration,200),h=We(r.easing,"cubicOut"),p=0):(c=t.getShallow(l?"animationDurationUpdate":"animationDuration"),h=t.getShallow(l?"animationEasingUpdate":"animationEasing"),p=t.getShallow(l?"animationDelayUpdate":"animationDelay")),i&&(null!=i.duration&&(c=i.duration),null!=i.easing&&(h=i.easing),null!=i.delay&&(p=i.delay)),Se(p)&&(p=p(e,o)),Se(c)&&(c=c(e)),{duration:c||0,delay:p,easing:h}}return null}function g0(n,t,e,r,o,i,a){var l,c=!1;Se(o)?(a=i,i=o,o=null):Ft(o)&&(i=o.cb,a=o.during,c=o.isFrom,l=o.removeOpt,o=o.dataIndex);var h="leave"===n;h||t.stopAnimation("leave");var p=mf(n,r,o,h?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(t,o):null);if(p&&p.duration>0){var g={duration:p.duration,delay:p.delay||0,easing:p.easing,done:i,force:!!i||!!a,setToFinal:!h,scope:n,during:a};c?t.animateFrom(e,g):t.animateTo(e,g)}else t.stopAnimation(),!c&&t.attr(e),a&&a(1),i&&i()}function hr(n,t,e,r,o,i){g0("update",n,t,e,r,o,i)}function to(n,t,e,r,o,i){g0("enter",n,t,e,r,o,i)}function yf(n){if(!n.__zr)return!0;for(var t=0;t<n.animators.length;t++)if("leave"===n.animators[t].scope)return!0;return!1}function Jc(n,t,e,r,o,i){yf(n)||g0("leave",n,t,e,r,o,i)}function K_(n,t,e,r){n.removeTextContent(),n.removeTextGuideLine(),Jc(n,{style:{opacity:0}},t,e,r)}function vm(n,t,e){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(o){o.isGroup||K_(o,t,e,r)}):K_(n,t,e,r)}function js(n){UA(n).oldStyle=n.style}var m0=Math.max,y0=Math.min,J_={};function Q_(n){return Yn.extend(n)}var ew=function(n,t){var e=OA(n,t);return function(r){function o(i){var a=r.call(this,i)||this;return a.applyTransform=e.applyTransform,a.buildPath=e.buildPath,a}return Ce(o,r),o}(RA)};function jA(n,t){return ew(n,t)}function Ys(n,t){J_[n]=t}function v0(n){if(J_.hasOwnProperty(n))return J_[n]}function bm(n,t,e,r){var o=PA(n,t);return e&&("center"===r&&(e=tw(e,o.getBoundingRect())),x0(o,e)),o}function b0(n,t,e){var r=new jo({style:{image:n,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(o){"center"===e&&r.setStyle(tw(t,{width:o.width,height:o.height}))}});return r}function tw(n,t){var e,r=t.width/t.height,o=n.height*r;return e=o<=n.width?n.height:(o=n.width)/r,{x:n.x+n.width/2-o/2,y:n.y+n.height/2-e/2,width:o,height:e}}var za=function(n,t){for(var e=[],r=n.length,o=0;o<r;o++)e.push(n[o].getUpdatedPathProxy(!0));var a=new Yn(t);return a.createPathProxy(),a.buildPath=function(l){if(Z_(l)){l.appendPath(e);var c=l.getContext();c&&l.rebuildPath(c,1)}},a};function x0(n,t){if(n.applyTransform){var e=n.getBoundingRect().calculateTransform(t);n.applyTransform(e)}}function Sh(n,t){return k_(n,n,{lineWidth:t}),n}var _0=hl;function Va(n,t){for(var e=qd([]);n&&n!==t;)Ta(e,n.getLocalTransform(),e),n=n.parent;return e}function gl(n,t,e){return t&&!Mn(t)&&(t=dr.getLocalTransform(t)),e&&(t=Ns([],t)),Ye([],n,t)}function w0(n,t,e){var r=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),o=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),i=["left"===n?-r:"right"===n?r:0,"top"===n?-o:"bottom"===n?o:0];return i=gl(i,t,e),Math.abs(i[0])>Math.abs(i[1])?i[0]>0?"right":"left":i[1]>0?"bottom":"top"}function YA(n){return!n.isGroup}function vf(n,t,e){if(n&&t){var r,o=(r={},n.traverse(function(a){YA(a)&&a.anid&&(r[a.anid]=a)}),r);t.traverse(function(a){if(YA(a)&&a.anid){var l=o[a.anid];if(l){var c=i(a);a.attr(i(l)),hr(a,c,e,cn(a).dataIndex)}}})}function i(a){var l={x:a.x,y:a.y,rotation:a.rotation};return null!=a.shape&&(l.shape=De({},a.shape)),l}}function nw(n,t){return j(n,function(e){var r=e[0];r=m0(r,t.x),r=y0(r,t.x+t.width);var o=e[1];return o=m0(o,t.y),[r,o=y0(o,t.y+t.height)]})}function rw(n,t){var e=m0(n.x,t.x),r=y0(n.x+n.width,t.x+t.width),o=m0(n.y,t.y),i=y0(n.y+n.height,t.y+t.height);if(r>=e&&i>=o)return{x:e,y:o,width:r-e,height:i-o}}function tu(n,t,e){var r=De({rectHover:!0},t),o=r.style={strokeNoScale:!0};if(e=e||{x:-1,y:-1,width:2,height:2},n)return 0===n.indexOf("image://")?(o.image=n.slice(8),Pe(o,e),new jo(r)):bm(n.replace("path://",""),r,e,"center")}function Ju(n,t,e,r,o){for(var i=0,a=o[o.length-1];i<o.length;i++){var l=o[i];if(XA(n,t,e,r,l[0],l[1],a[0],a[1]))return!0;a=l}}function XA(n,t,e,r,o,i,a,l){var c,h=e-n,p=r-t,g=a-o,y=l-i,b=xm(g,y,h,p);if((c=b)<=1e-6&&c>=-1e-6)return!1;var _=n-o,w=t-i,S=xm(_,w,h,p)/b;if(S<0||S>1)return!1;var M=xm(_,w,g,y)/b;return!(M<0||M>1)}function xm(n,t,e,r){return n*r-e*t}function bf(n){var t=n.itemTooltipOption,e=n.componentModel,r=n.itemName,o=bt(t)?{formatter:t}:t,i=e.mainType,a=e.componentIndex,l={componentType:i,name:r,$vars:["name"]};l[i+"Index"]=a;var c=n.formatterParamsExtra;c&&Z(vn(c),function(p){Lt(l,p)||(l[p]=c[p],l.$vars.push(p))});var h=cn(n.el);h.componentMainType=i,h.componentIndex=a,h.tooltipConfig={name:r,option:Pe({content:r,encodeHTMLContent:!0,formatterParams:l},o)}}function ow(n,t){var e;n.isGroup&&(e=t(n)),e||n.traverse(t)}function Qu(n,t){if(n)if(Ee(n))for(var e=0;e<n.length;e++)ow(n[e],t);else ow(n,t)}Ys("circle",da),Ys("ellipse",gh),Ys("sector",Ti),Ys("ring",bh),Ys("polygon",Zi),Ys("polyline",$i),Ys("rect",$n),Ys("line",Yo),Ys("bezierCurve",ff),Ys("arc",ym);var Qc=Object.freeze({__proto__:null,updateProps:hr,initProps:to,removeElement:Jc,removeElementWithFadeOut:vm,isElementRemoved:yf,extendShape:Q_,extendPath:jA,registerShape:Ys,getShapeClass:v0,makePath:bm,makeImage:b0,mergePath:za,resizePath:x0,subPixelOptimizeLine:Sh,subPixelOptimizeRect:function(n){return _A(n.shape,n.shape,n.style),n},subPixelOptimize:_0,getTransform:Va,applyTransform:gl,transformDirection:w0,groupTransition:vf,clipPointsByRect:nw,clipRectByRect:rw,createIcon:tu,linePolygonIntersect:Ju,lineLineIntersect:XA,setTooltipConfig:bf,traverseElements:Qu,Group:on,Image:jo,Text:Kn,Circle:da,Ellipse:gh,Sector:Ti,Ring:bh,Polygon:Zi,Polyline:$i,Rect:$n,Line:Yo,BezierCurve:ff,Arc:ym,IncrementalDisplayable:WA,CompoundPath:xh,LinearGradient:gf,RadialGradient:$_,BoundingRect:Kt,OrientedBoundingRect:f0,Point:pn,Path:Yn}),S0={};function qA(n,t){for(var e=0;e<ui.length;e++){var r=ui[e],o=t[r],i=n.ensureState(r);i.style=i.style||{},i.style.text=o}var a=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:t.normal}),n.useStates(a,!0)}function iw(n,t,e){var r,o=n.labelFetcher,i=n.labelDataIndex,a=n.labelDimIndex,l=t.normal;o&&(r=o.getFormattedLabel(i,"normal",null,a,l&&l.get("formatter"),null!=e?{interpolatedValue:e}:null)),null==r&&(r=Se(n.defaultText)?n.defaultText(i,n,e):n.defaultText);for(var c={normal:r},h=0;h<ui.length;h++){var p=ui[h],g=t[p];c[p]=We(o?o.getFormattedLabel(i,p,null,a,g&&g.get("formatter")):null,r)}return c}function Ao(n,t,e,r){e=e||S0;for(var o=n instanceof Kn,i=!1,a=0;a<of.length;a++)if((y=t[of[a]])&&y.getShallow("show")){i=!0;break}var l=o?n:n.getTextContent();if(i){o||(l||(l=new Kn,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var c=iw(e,t),h=t.normal,p=!!h.getShallow("show"),g=Or(h,r&&r.normal,e,!1,!o);for(g.text=c.normal,o||n.setTextConfig(ed(h,e,!1)),a=0;a<ui.length;a++){var y,b=ui[a];if(y=t[b]){var _=l.ensureState(b),w=!!We(y.getShallow("show"),p);w!==p&&(_.ignore=!w),_.style=Or(y,r&&r[b],e,!0,!o),_.style.text=c[b],!o&&(n.ensureState(b).textConfig=ed(y,e,!0))}}l.silent=!!h.getShallow("silent"),null!=l.style.x&&(g.x=l.style.x),null!=l.style.y&&(g.y=l.style.y),l.ignore=!p,l.useStyle(g),l.dirty(),e.enableTextSetter&&(Ch(l).setLabelText=function(S){var M=iw(e,t,S);qA(l,M)})}else l&&(l.ignore=!0);n.dirty()}function fo(n,t){for(var e={normal:n.getModel(t=t||"label")},r=0;r<ui.length;r++){var o=ui[r];e[o]=n.getModel([o,t])}return e}function Or(n,t,e,r,o){var i={};return function(a,l,c,h,p){c=c||S0;var g,y=l.ecModel,b=y&&y.option.textStyle,_=function(I){for(var N;I&&I!==I.ecModel;){var L=(I.option||S0).rich;if(L){N=N||{};for(var R=vn(L),O=0;O<R.length;O++)N[R[O]]=1}I=I.parentModel}return N}(l);if(_)for(var w in g={},_)if(_.hasOwnProperty(w)){var S=l.getModel(["rich",w]);aw(g[w]={},S,b,c,h,p,!1,!0)}g&&(a.rich=g);var M=l.get("overflow");M&&(a.overflow=M);var A=l.get("minMargin");null!=A&&(a.margin=A),aw(a,l,b,c,h,p,!0,!1)}(i,n,e,r,o),t&&De(i,t),i}function ed(n,t,e){t=t||{};var r,o={},i=n.getShallow("rotate"),a=We(n.getShallow("distance"),e?null:5),l=n.getShallow("offset");return"outside"===(r=n.getShallow("position")||(e?null:"inside"))&&(r=t.defaultOutsidePosition||"top"),null!=r&&(o.position=r),null!=l&&(o.offset=l),null!=i&&(i*=Math.PI/180,o.rotation=i),null!=a&&(o.distance=a),o.outsideFill="inherit"===n.get("color")?t.inheritColor||null:"auto",o}var ec=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],ml=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],C0=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function aw(n,t,e,r,o,i,a,l){e=!o&&e||S0;var c=r&&r.inheritColor,h=t.getShallow("color"),p=t.getShallow("textBorderColor"),g=We(t.getShallow("opacity"),e.opacity);"inherit"!==h&&"auto"!==h||(h=c||null),"inherit"!==p&&"auto"!==p||(p=c||null),i||(h=h||e.color,p=p||e.textBorderColor),null!=h&&(n.fill=h),null!=p&&(n.stroke=p);var y=We(t.getShallow("textBorderWidth"),e.textBorderWidth);null!=y&&(n.lineWidth=y);var b=We(t.getShallow("textBorderType"),e.textBorderType);null!=b&&(n.lineDash=b);var _=We(t.getShallow("textBorderDashOffset"),e.textBorderDashOffset);null!=_&&(n.lineDashOffset=_),o||null!=g||l||(g=r&&r.defaultOpacity),null!=g&&(n.opacity=g),o||i||null==n.fill&&r.inheritColor&&(n.fill=r.inheritColor);for(var w=0;w<ec.length;w++){var S=ec[w];null!=(A=We(t.getShallow(S),e[S]))&&(n[S]=A)}for(w=0;w<ml.length;w++)null!=(A=t.getShallow(S=ml[w]))&&(n[S]=A);if(null==n.verticalAlign){var M=t.getShallow("baseline");null!=M&&(n.verticalAlign=M)}if(!a||!r.disableBox){for(w=0;w<C0.length;w++){var A;null!=(A=t.getShallow(S=C0[w]))&&(n[S]=A)}var I=t.getShallow("borderType");null!=I&&(n.borderDash=I),"auto"!==n.backgroundColor&&"inherit"!==n.backgroundColor||!c||(n.backgroundColor=c),"auto"!==n.borderColor&&"inherit"!==n.borderColor||!c||(n.borderColor=c)}}function sw(n,t){var e=t&&t.getModel("textStyle");return Br([n.fontStyle||e&&e.getShallow("fontStyle")||"",n.fontWeight||e&&e.getShallow("fontWeight")||"",(n.fontSize||e&&e.getShallow("fontSize")||12)+"px",n.fontFamily||e&&e.getShallow("fontFamily")||"sans-serif"].join(" "))}var Ch=Gn();function xf(n,t,e,r){if(n){var o=Ch(n);o.prevValue=o.value,o.value=e;var i=t.normal;o.valueAnimation=i.get("valueAnimation"),o.valueAnimation&&(o.precision=i.get("precision"),o.defaultInterpolatedText=r,o.statesModels=t)}}function _f(n,t,e,r,o){var i=Ch(n);if(i.valueAnimation&&i.prevValue!==i.value){var a=i.defaultInterpolatedText,l=We(i.interpolatedValue,i.prevValue),c=i.value;n.percent=0,(null==i.prevValue?to:hr)(n,{percent:1},r,t,null,function(h){var p=Uv(e,i.precision,l,c,h);i.interpolatedValue=1===h?null:p;var g=iw({labelDataIndex:t,labelFetcher:o,defaultText:a?a(p):p+""},i.statesModels,p);qA(n,g)})}}var _m,M0,wm=["textStyle","color"],wf=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],Sm=new Kn,T0=function(){function n(){}return n.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(wm):null)},n.prototype.getFont=function(){return sw({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(t){for(var e={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<wf.length;r++)e[wf[r]]=this.getShallow(wf[r]);return Sm.useStyle(e),Sm.update(),Sm.getBoundingRect()},n}(),ko=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],DE=Xu(ko),nu=function(){function n(){}return n.prototype.getLineStyle=function(t){return DE(this,t)},n}(),lw=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],uw=Xu(lw),Sf=function(){function n(){}return n.prototype.getItemStyle=function(t,e){return uw(this,t,e)},n}(),gr=function(){function n(t,e,r){this.parentModel=e,this.ecModel=r,this.option=t}return n.prototype.init=function(t,e,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i]},n.prototype.mergeOption=function(t,e){Ve(this.option,t,!0)},n.prototype.get=function(t,e){return null==t?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},n.prototype.getShallow=function(t,e){var r=this.option,o=null==r?r:r[t];if(null==o&&!e){var i=this.parentModel;i&&(o=i.getShallow(t))}return o},n.prototype.getModel=function(t,e){var r=null!=t,o=r?this.parsePath(t):null;return new n(r?this._doGet(o):this.option,e=e||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(o)),this.ecModel)},n.prototype.isEmpty=function(){return null==this.option},n.prototype.restoreData=function(){},n.prototype.clone=function(){return new this.constructor(jt(this.option))},n.prototype.parsePath=function(t){return"string"==typeof t?t.split("."):t},n.prototype.resolveParentPath=function(t){return t},n.prototype.isAnimationEnabled=function(){if(!gn.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(t,e){var r=this.option;if(!t)return r;for(var o=0;o<t.length&&(!t[o]||null!=(r=r&&"object"==typeof r?r[t[o]]:null));o++);return null==r&&e&&(r=e._doGet(this.resolveParentPath(t),e.parentModel)),r},n}();x_(gr),_m=gr,M0=["__\0is_clz",Yv++].join("_"),_m.prototype[M0]=!0,_m.isInstance=function(n){return!(!n||!n[M0])},ur(gr,nu),ur(gr,Sf),ur(gr,__),ur(gr,T0);var A0=Math.round(10*Math.random());function Mh(n){return[n||"",A0++].join("_")}function tc(n,t){return Ve(Ve({},n,!0),t,!0)}var Cf="ZH",Xs="EN",Mf=Xs,Cm={},k0={},Fa=gn.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage||Mf).toUpperCase().indexOf(Cf)>-1?Cf:Mf;function td(n,t){n=n.toUpperCase(),k0[n]=new gr(t),Cm[n]=t}function I0(n){return k0[n]}td(Xs,{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),td(Cf,{time:{month:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayOfWeekAbbr:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe",custom:"\u81ea\u5b9a\u4e49\u56fe\u8868",chart:"\u56fe\u8868"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}});var Th=1e3,Ai=6e4,Ki=36e5,Io=864e5,ys=31536e6,Ah={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Ji="{yyyy}-{MM}-{dd}",nd={year:"{yyyy}",month:"{yyyy}-{MM}",day:Ji,hour:Ji+" "+Ah.hour,minute:Ji+" "+Ah.minute,second:Ji+" "+Ah.second,millisecond:Ah.none},D0=["year","month","day","hour","minute","second","millisecond"],cw=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function hi(n,t){return"0000".substr(0,t-(n+="").length)+n}function kh(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function NE(n){return n===kh(n)}function Tf(n,t,e,r){var o=ji(n),i=o[E0(e)](),a=o[Af(e)]()+1,l=Math.floor((a-1)/3)+1,c=o[L0(e)](),h=o["get"+(e?"UTC":"")+"Day"](),p=o[ki(e)](),g=(p-1)%12+1,y=o[Ih(e)](),b=o[Mm(e)](),_=o[nc(e)](),w=p>=12?"pm":"am",S=w.toUpperCase(),M=(r instanceof gr?r:I0(r||Fa)||k0[Mf]).getModel("time"),A=M.get("month"),I=M.get("monthAbbr"),N=M.get("dayOfWeek"),L=M.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,w+"").replace(/{A}/g,S+"").replace(/{yyyy}/g,i+"").replace(/{yy}/g,hi(i%100+"",2)).replace(/{Q}/g,l+"").replace(/{MMMM}/g,A[a-1]).replace(/{MMM}/g,I[a-1]).replace(/{MM}/g,hi(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,hi(c,2)).replace(/{d}/g,c+"").replace(/{eeee}/g,N[h]).replace(/{ee}/g,L[h]).replace(/{e}/g,h+"").replace(/{HH}/g,hi(p,2)).replace(/{H}/g,p+"").replace(/{hh}/g,hi(g+"",2)).replace(/{h}/g,g+"").replace(/{mm}/g,hi(y,2)).replace(/{m}/g,y+"").replace(/{ss}/g,hi(b,2)).replace(/{s}/g,b+"").replace(/{SSS}/g,hi(_,3)).replace(/{S}/g,_+"")}function dw(n,t){var e=ji(n),r=e[Af(t)]()+1,o=e[L0(t)](),i=e[ki(t)](),a=e[Ih(t)](),l=e[Mm(t)](),c=0===e[nc(t)](),h=c&&0===l,p=h&&0===a,g=p&&0===i,y=g&&1===o;return y&&1===r?"year":y?"month":g?"day":p?"hour":h?"minute":c?"second":"millisecond"}function N0(n,t,e){var r=dt(n)?ji(n):n;switch(t=t||dw(n,e)){case"year":return r[E0(e)]();case"half-year":return r[Af(e)]()>=6?1:0;case"quarter":return Math.floor((r[Af(e)]()+1)/4);case"month":return r[Af(e)]();case"day":return r[L0(e)]();case"half-day":return r[ki(e)]()/24;case"hour":return r[ki(e)]();case"minute":return r[Ih(e)]();case"second":return r[Mm(e)]();case"millisecond":return r[nc(e)]()}}function E0(n){return n?"getUTCFullYear":"getFullYear"}function Af(n){return n?"getUTCMonth":"getMonth"}function L0(n){return n?"getUTCDate":"getDate"}function ki(n){return n?"getUTCHours":"getHours"}function Ih(n){return n?"getUTCMinutes":"getMinutes"}function Mm(n){return n?"getUTCSeconds":"getSeconds"}function nc(n){return n?"getUTCMilliseconds":"getMilliseconds"}function hw(n){return n?"setUTCFullYear":"setFullYear"}function R0(n){return n?"setUTCMonth":"setMonth"}function pw(n){return n?"setUTCDate":"setDate"}function Dh(n){return n?"setUTCHours":"setHours"}function kf(n){return n?"setUTCMinutes":"setMinutes"}function fw(n){return n?"setUTCSeconds":"setSeconds"}function O0(n){return n?"setUTCMilliseconds":"setMilliseconds"}function Tm(n){if(!qg(n))return bt(n)?n:"-";var t=(n+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function Am(n,t){return n=(n||"").toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()}),t&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var ru=pr;function km(n,t,e){function r(h){return h&&Br(h)?h:"-"}function o(h){return!(null==h||isNaN(h)||!isFinite(h))}var i="time"===t,a=n instanceof Date;if(i||a){var l=i?ji(n):n;if(!isNaN(+l))return Tf(l,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",e);if(a)return"-"}if("ordinal"===t)return no(n)?r(n):dt(n)&&o(n)?n+"":"-";var c=ul(n);return o(c)?Tm(c):no(n)?r(n):"boolean"==typeof n?n+"":"-"}var gw=["a","b","c","d","e","f","g"],Nh=function(n,t){return"{"+n+(t??"")+"}"};function Im(n,t,e){Ee(t)||(t=[t]);var r=t.length;if(!r)return"";for(var o=t[0].$vars||[],i=0;i<o.length;i++){var a=gw[i];n=n.replace(Nh(a),Nh(a,0))}for(var l=0;l<r;l++)for(var c=0;c<o.length;c++){var h=t[l][o[c]];n=n.replace(Nh(gw[c],l),e?Co(h):h)}return n}function mw(n,t){var e=bt(n)?{color:n,extraCssText:t}:n||{},r=e.color,o=e.type;t=e.extraCssText;var i=e.renderMode||"html";return r?"html"===i?"subItem"===o?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Co(r)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Co(r)+";"+(t||"")+'"></span>':{renderMode:i,content:"{"+(e.markerId||"markerX")+"|}  ",style:"subItem"===o?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}:""}function Eh(n,t){return t=t||"transparent",bt(n)?n:Ft(n)&&n.colorStops&&(n.colorStops[0]||{}).color||t}function Dm(n,t){if("_blank"===t||"blank"===t){var e=window.open();e.opener=null,e.location.href=n}else window.open(n,t)}var If=Z,Lh=["left","right","top","bottom","width","height"],rc=[["width","left","right"],["height","top","bottom"]];function P0(n,t,e,r,o){var i=0,a=0;null==r&&(r=1/0),null==o&&(o=1/0);var l=0;t.eachChild(function(c,h){var p,g,y=c.getBoundingRect(),b=t.childAt(h+1),_=b&&b.getBoundingRect();if("horizontal"===n){var w=y.width+(_?-_.x+y.x:0);(p=i+w)>r||c.newline?(i=0,p=w,a+=l+e,l=y.height):l=Math.max(l,y.height)}else{var S=y.height+(_?-_.y+y.y:0);(g=a+S)>o||c.newline?(i+=l+e,a=0,g=S,l=y.width):l=Math.max(l,y.width)}c.newline||(c.x=i,c.y=a,c.markRedraw(),"horizontal"===n?i=p+e:a=g+e)})}var Ga=P0;function xo(n,t,e){e=ru(e||0);var r=t.width,o=t.height,i=Ct(n.left,r),a=Ct(n.top,o),l=Ct(n.right,r),c=Ct(n.bottom,o),h=Ct(n.width,r),p=Ct(n.height,o),g=e[2]+e[0],y=e[1]+e[3],b=n.aspect;switch(isNaN(h)&&(h=r-l-y-i),isNaN(p)&&(p=o-c-g-a),null!=b&&(isNaN(h)&&isNaN(p)&&(b>r/o?h=.8*r:p=.8*o),isNaN(h)&&(h=b*p),isNaN(p)&&(p=h/b)),isNaN(i)&&(i=r-l-h-y),isNaN(a)&&(a=o-c-p-g),n.left||n.right){case"center":i=r/2-h/2-e[3];break;case"right":i=r-h-y}switch(n.top||n.bottom){case"middle":case"center":a=o/2-p/2-e[0];break;case"bottom":a=o-p-g}i=i||0,a=a||0,isNaN(h)&&(h=r-y-i-(l||0)),isNaN(p)&&(p=o-g-a-(c||0));var _=new Kt(i+e[3],a+e[0],h,p);return _.margin=e,_}function Df(n,t,e,r,o,i){var a,l=!o||!o.hv||o.hv[0],c=!o||!o.hv||o.hv[1],h=o&&o.boundingMode||"all";if((i=i||n).x=n.x,i.y=n.y,!l&&!c)return!1;if("raw"===h)a="group"===n.type?new Kt(0,0,+t.width||0,+t.height||0):n.getBoundingRect();else if(a=n.getBoundingRect(),n.needLocalTransform()){var p=n.getLocalTransform();(a=a.clone()).applyTransform(p)}var g=xo(Pe({width:a.width,height:a.height},t),e,r),y=l?g.x-a.x:0,b=c?g.y-a.y:0;return"raw"===h?(i.x=y,i.y=b):(i.x+=y,i.y+=b),i===n&&n.markRedraw(),!0}function rd(n){var t=n.layoutMode||n.constructor.layoutMode;return Ft(t)?t:t?{type:t}:null}function oc(n,t,e){var r=e&&e.ignoreSize;!Ee(r)&&(r=[r,r]);var o=a(rc[0],0),i=a(rc[1],1);function a(p,g){var y={},b=0,_={},w=0;if(If(p,function(A){_[A]=n[A]}),If(p,function(A){l(t,A)&&(y[A]=_[A]=t[A]),c(y,A)&&b++,c(_,A)&&w++}),r[g])return c(t,p[1])?_[p[2]]=null:c(t,p[2])&&(_[p[1]]=null),_;if(2!==w&&b){if(b>=2)return y;for(var S=0;S<p.length;S++){var M=p[S];if(!l(y,M)&&l(n,M)){y[M]=n[M];break}}return y}return _}function l(p,g){return p.hasOwnProperty(g)}function c(p,g){return null!=p[g]&&"auto"!==p[g]}function h(p,g,y){If(p,function(b){g[b]=y[b]})}h(rc[0],n,o),h(rc[1],n,i)}function ic(n){return B0({},n)}function B0(n,t){return t&&n&&If(Lh,function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}_t(P0,"vertical"),_t(P0,"horizontal");var n,t,ou=Gn(),wn=function(n){function t(e,r,o){var i=n.call(this,e,r,o)||this;return i.uid=Mh("ec_cpt_model"),i}return Ce(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o)},t.prototype.mergeDefaultAndTheme=function(e,r){var o=rd(this),i=o?ic(e):{};Ve(e,r.getTheme().get(this.mainType)),Ve(e,this.getDefaultOption()),o&&oc(e,i,o)},t.prototype.mergeOption=function(e,r){Ve(this.option,e,!0);var o=rd(this);o&&oc(this.option,e,o)},t.prototype.optionUpdated=function(e,r){},t.prototype.getDefaultOption=function(){var h,e=this.constructor;if(!(h=e)||!h[b_])return e.defaultOption;var r=ou(this);if(!r.defaultOption){for(var o=[],i=e;i;){var a=i.prototype.defaultOption;a&&o.push(a),i=i.superClass}for(var l={},c=o.length-1;c>=0;c--)l=Ve(l,o[c],!0);r.defaultOption=l}return r.defaultOption},t.prototype.getReferringComponents=function(e,r){var i=e+"Id";return Kp(this.ecModel,e,{index:this.get(e+"Index",!0),id:this.get(i,!0)},r)},t.prototype.getBoxLayoutParams=function(){var e=this;return{left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=((e=t.prototype).type="component",e.id="",e.name="",e.mainType="",e.subType="",void(e.componentIndex=0)),t;var e}(gr);jv(wn,gr),jl(wn),t={},(n=wn).registerSubTypeDefaulter=function(e,r){var o=Vs(e);t[o.main]=r},n.determineSubType=function(e,r){var o=r.type;if(!o){var i=Vs(e).main;n.hasSubTypes(e)&&t[i]&&(o=t[i](r))}return o},function(n,t){function e(r,o){return r[o]||(r[o]={predecessor:[],successor:[]}),r[o]}n.topologicalTravel=function(r,o,i,a){if(r.length){var l=(M={},A=[],Z(S=o,function(I){var R,O,B,N=e(M,I),L=(R=N.originalDeps=function(n){var t=[];return Z(wn.getClassesByMainType(n),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=j(t,function(e){return Vs(e).main}),"dataset"!==n&&$t(t,"dataset")<=0&&t.unshift("dataset"),t}(I),O=S,B=[],Z(R,function(G){$t(O,G)>=0&&B.push(G)}),B);N.entryCount=L.length,0===N.entryCount&&A.push(I),Z(L,function(R){$t(N.predecessor,R)<0&&N.predecessor.push(R);var O=e(M,R);$t(O.successor,R)<0&&O.successor.push(I)})}),{graph:M,noEntryList:A}),c=l.graph,h=l.noEntryList,p={};for(Z(r,function(S){p[S]=!0});h.length;){var g=h.pop(),y=c[g],b=!!p[g];b&&(i.call(a,g,y.originalDeps.slice()),delete p[g]),Z(y.successor,b?w:_)}Z(p,function(){throw new Error("")})}var S,M,A;function _(S){c[S].entryCount--,0===c[S].entryCount&&h.push(S)}function w(S){p[S]=!0,_(S)}}}(wn);var _o="";typeof navigator<"u"&&(_o=navigator.platform||"");var od="rgba(0, 0, 0, 0.2)",ZA={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:od,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:od,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:od,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:od,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:od,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:od,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:_o.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},z0=Et(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Ii="original",Di="arrayRows",vs="objectRows",iu="keyedColumns",ac="typedArray",yw="unknown",au="column",Nf="row",Nm=1,vw=2,qs=3,bw=Gn();function Em(n,t,e){var r={},o=sc(t);if(!o||!n)return r;var i,a,l=[],c=[],p=bw(t.ecModel).datasetMap,g=o.uid+"_"+e.seriesLayoutBy;Z(n=n.slice(),function(w,S){var M=Ft(w)?w:n[S]={name:w};"ordinal"===M.type&&null==i&&(i=S,a=_(M)),r[M.name]=[]});var y=p.get(g)||p.set(g,{categoryWayDim:a,valueWayDim:0});function b(w,S,M){for(var A=0;A<M;A++)w.push(S+A)}function _(w){var S=w.dimsDef;return S?S.length:1}return Z(n,function(w,S){var M=w.name,A=_(w);if(null==i){var I=y.valueWayDim;b(r[M],I,A),b(c,I,A),y.valueWayDim+=A}else i===S?(b(r[M],0,A),b(l,0,A)):(b(r[M],I=y.categoryWayDim,A),b(c,I,A),y.categoryWayDim+=A)}),l.length&&(r.itemName=l),c.length&&(r.seriesName=c),r}function V0(n,t,e){var r={};if(!sc(n))return r;var o,i=t.sourceFormat,a=t.dimensionsDefine;i!==vs&&i!==iu||Z(a,function(h,p){"name"===(Ft(h)?h.name:h)&&(o=p)});var l=function(){for(var h={},p={},g=[],y=0,b=Math.min(5,e);y<b;y++){var _=$A(t.data,i,t.seriesLayoutBy,a,t.startIndex,y);g.push(_);var w=_===qs;if(w&&null==h.v&&y!==o&&(h.v=y),(null==h.n||h.n===h.v||!w&&g[h.n]===qs)&&(h.n=y),S(h)&&g[h.n]!==qs)return h;w||(_===vw&&null==p.v&&y!==o&&(p.v=y),null!=p.n&&p.n!==p.v||(p.n=y))}function S(M){return null!=M.v&&null!=M.n}return S(h)?h:S(p)?p:null}();if(l){r.value=[l.v];var c=o??l.n;r.itemName=[c],r.seriesName=[c]}return r}function sc(n){if(!n.get("data",!0))return Kp(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},Mo).models[0]}function Ef(n,t){return $A(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,t)}function $A(n,t,e,r,o,i){var a,l,c;if(ao(n))return qs;if(r){var h=r[i];Ft(h)?(l=h.name,c=h.type):bt(h)&&(l=h)}if(null!=c)return"ordinal"===c?Nm:qs;if(t===Di){var p=n;if(e===Nf){for(var g=p[i],y=0;y<(g||[]).length&&y<5;y++)if(null!=(a=A(g[o+y])))return a}else for(y=0;y<p.length&&y<5;y++){var b=p[o+y];if(b&&null!=(a=A(b[i])))return a}}else if(t===vs){var _=n;if(!l)return qs;for(y=0;y<_.length&&y<5;y++)if((S=_[y])&&null!=(a=A(S[l])))return a}else if(t===iu){if(!l||!(g=n[l])||ao(g))return qs;for(y=0;y<g.length&&y<5;y++)if(null!=(a=A(g[y])))return a}else if(t===Ii){var w=n;for(y=0;y<w.length&&y<5;y++){var S,M=Uc(S=w[y]);if(!Ee(M))return qs;if(null!=(a=A(M[i])))return a}}function A(I){var N=bt(I);return null!=I&&Number.isFinite(Number(I))&&""!==I?N?vw:qs:N&&"-"!==I?Nm:void 0}return qs}var Lm,Rm,xw,F0=Et(),Lf=Gn(),KA=Gn(),G0=function(){function n(){}return n.prototype.getColorFromPalette=function(t,e,r){var o=Dr(this.get("color",!0)),i=this.get("colorLayer",!0);return _w(this,Lf,o,i,t,e,r)},n.prototype.clearColorPalette=function(){!function(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}(this,Lf)},n}();function H0(n,t,e,r){var o=Dr(n.get(["aria","decal","decals"]));return _w(n,KA,o,null,t,e,r)}function _w(n,t,e,r,o,i,a){var l=t(i=i||n),c=l.paletteIdx||0,h=l.paletteNameMap=l.paletteNameMap||{};if(h.hasOwnProperty(o))return h[o];var p=null!=a&&r?function(y,b){for(var _=y.length,w=0;w<_;w++)if(y[w].length>b)return y[w];return y[_-1]}(r,a):e;if((p=p||e)&&p.length){var g=p[c];return o&&(h[o]=g),l.paletteIdx=(c+1)%p.length,g}}var ww="\0_ec_inner",W0=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.init=function(e,r,o,i,a,l){i=i||{},this.option=null,this._theme=new gr(i),this._locale=new gr(a),this._optionManager=l},t.prototype.setOption=function(e,r,o){var i=Mt(r);this._optionManager.setOption(e,o,i),this._resetOption(null,i)},t.prototype.resetOption=function(e,r){return this._resetOption(e,Mt(r))},t.prototype._resetOption=function(e,r){var o=!1,i=this._optionManager;if(!e||"recreate"===e){var a=i.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this._mergeOption(a,r)):xw(this,a),o=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var l=i.getTimelineOption(this);l&&(o=!0,this._mergeOption(l,r))}if(!e||"recreate"===e||"media"===e){var c=i.getMediaOption(this);c.length&&Z(c,function(h){o=!0,this._mergeOption(h,r)},this)}return o},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,r){var o=this.option,i=this._componentsMap,a=this._componentsCount,l=[],c=Et(),h=r&&r.replaceMergeMainTypeMap;bw(this).datasetMap=Et(),Z(e,function(p,g){null!=p&&(wn.hasClass(g)?g&&(l.push(g),c.set(g,!0)):o[g]=null==o[g]?jt(p):Ve(o[g],p,!0))}),h&&h.each(function(p,g){wn.hasClass(g)&&!c.get(g)&&(l.push(g),c.set(g,!0))}),wn.topologicalTravel(l,wn.getAllClassMainTypes(),function(p){var N,L,g=function(I,N,L){var R=F0.get(N);if(!R)return L;var O=R(I);return O?L.concat(O):L}(this,p,Dr(e[p])),y=i.get(p),_=qp(y,g,y?h&&h.get(p)?"replaceMerge":"normalMerge":"replaceAll");N=p,L=wn,Z(_,function(R){var G,W,O=R.newOption;Ft(O)&&(R.keyInfo.mainType=N,R.keyInfo.subType=(W=R.existing,(G=O).type?G.type:W?W.subType:L.determineSubType(N,G)))}),o[p]=null,i.set(p,null),a.set(p,0);var w,S=[],M=[],A=0;Z(_,function(I,N){var L=I.existing,R=I.newOption;if(R){var B=wn.getClass(p,I.keyInfo.subType,!("series"===p));if(!B)return;if("tooltip"===p){if(w)return;w=!0}if(L&&L.constructor===B)L.name=I.keyInfo.name,L.mergeOption(R,this),L.optionUpdated(R,!1);else{var G=De({componentIndex:N},I.keyInfo);De(L=new B(R,this,this,G),G),I.brandNew&&(L.__requireNewView=!0),L.init(R,this,this),L.optionUpdated(null,!0)}}else L&&(L.mergeOption({},this),L.optionUpdated({},!1));L?(S.push(L.option),M.push(L),A++):(S.push(void 0),M.push(void 0))},this),o[p]=S,i.set(p,M),a.set(p,A),"series"===p&&Lm(this)},this),this._seriesIndices||Lm(this)},t.prototype.getOption=function(){var e=jt(this.option);return Z(e,function(r,o){if(wn.hasClass(o)){for(var i=Dr(r),a=i.length,l=!1,c=a-1;c>=0;c--)i[c]&&!$p(i[c])?l=!0:(i[c]=null,!l&&a--);i.length=a,e[o]=i}}),delete e[ww],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,r){var o=this._componentsMap.get(e);if(o){var i=o[r||0];if(i)return i;if(null==r)for(var a=0;a<o.length;a++)if(o[a])return o[a]}},t.prototype.queryComponents=function(e){var r=e.mainType;if(!r)return[];var o,i=e.index,a=e.id,l=e.name,c=this._componentsMap.get(r);return c&&c.length?(null!=i?(o=[],Z(Dr(i),function(h){c[h]&&o.push(c[h])})):o=null!=a?U0("id",a,c):null!=l?U0("name",l,c):Xn(c,function(h){return!!h}),Sw(o,e)):[]},t.prototype.findComponents=function(e){var r,o,i,a,l,h=e.mainType,p=(o=h+"Index",i=h+"Id",a=h+"Name",!(r=e.query)||null==r[o]&&null==r[i]&&null==r[a]?null:{mainType:h,index:r[o],id:r[i],name:r[a]});return l=Sw(p?this.queryComponents(p):Xn(this._componentsMap.get(h),function(y){return!!y}),e),e.filter?Xn(l,e.filter):l},t.prototype.eachComponent=function(e,r,o){var i=this._componentsMap;if(Se(e)){var a=r,l=e;i.each(function(g,y){for(var b=0;g&&b<g.length;b++){var _=g[b];_&&l.call(a,y,_,_.componentIndex)}})}else for(var c=bt(e)?i.get(e):Ft(e)?this.findComponents(e):null,h=0;c&&h<c.length;h++){var p=c[h];p&&r.call(o,p,p.componentIndex)}},t.prototype.getSeriesByName=function(e){var r=Po(e,null);return Xn(this._componentsMap.get("series"),function(o){return!!o&&null!=r&&o.name===r})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return Xn(this._componentsMap.get("series"),function(r){return!!r&&r.subType===e})},t.prototype.getSeries=function(){return Xn(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,r){Rm(this),Z(this._seriesIndices,function(o){var i=this._componentsMap.get("series")[o];e.call(r,i,o)},this)},t.prototype.eachRawSeries=function(e,r){Z(this._componentsMap.get("series"),function(o){o&&e.call(r,o,o.componentIndex)})},t.prototype.eachSeriesByType=function(e,r,o){Rm(this),Z(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];a.subType===e&&r.call(o,a,i)},this)},t.prototype.eachRawSeriesByType=function(e,r,o){return Z(this.getSeriesByType(e),r,o)},t.prototype.isSeriesFiltered=function(e){return Rm(this),null==this._seriesIndicesMap.get(e.componentIndex)},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,r){Rm(this);var o=[];Z(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];e.call(r,a,i)&&o.push(i)},this),this._seriesIndices=o,this._seriesIndicesMap=Et(o)},t.prototype.restoreData=function(e){Lm(this);var r=this._componentsMap,o=[];r.each(function(i,a){wn.hasClass(a)&&o.push(a)}),wn.topologicalTravel(o,wn.getAllClassMainTypes(),function(i){Z(r.get(i),function(a){!a||"series"===i&&function(l,c){if(c){var h=c.seriesIndex,p=c.seriesId,g=c.seriesName;return null!=h&&l.componentIndex!==h||null!=p&&l.id!==p||null!=g&&l.name!==g}}(a,e)||a.restoreData()})})},t.internalField=(Lm=function(e){var r=e._seriesIndices=[];Z(e._componentsMap.get("series"),function(o){o&&r.push(o.componentIndex)}),e._seriesIndicesMap=Et(r)},Rm=function(e){},void(xw=function(e,r){e.option={},e.option[ww]=1,e._componentsMap=Et({series:[]}),e._componentsCount=Et();var i,l,o=r.aria;Ft(o)&&null==o.enabled&&(o.enabled=!0),l=(i=r).color&&!i.colorLayer,Z(e._theme.option,function(c,h){"colorLayer"===h&&l||wn.hasClass(h)||("object"==typeof c?i[h]=i[h]?Ve(i[h],c,!1):jt(c):null==i[h]&&(i[h]=c))}),Ve(r,ZA,!1),e._mergeOption(r,null)})),t}(gr);function U0(n,t,e){if(Ee(t)){var r=Et();return Z(t,function(i){null!=i&&null!=Po(i,null)&&r.set(i,!0)}),Xn(e,function(i){return i&&r.get(i[n])})}var o=Po(t,null);return Xn(e,function(i){return i&&null!=o&&i[n]===o})}function Sw(n,t){return t.hasOwnProperty("subType")?Xn(n,function(e){return e&&e.subType===t.subType}):n}function Mt(n){var t=Et();return n&&Z(Dr(n.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}ur(W0,G0);var Rh=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Cw=function(n){Z(Rh,function(t){this[t]=Fe(n[t],n)},this)},Rf={},id=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(t,e){var r=[];Z(Rf,function(o,i){var a=o.create(t,e);r=r.concat(a||[])}),this._coordinateSystems=r},n.prototype.update=function(t,e){Z(this._coordinateSystems,function(r){r.update&&r.update(t,e)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(t,e){Rf[t]=e},n.get=function(t){return Rf[t]},n}(),JA=/^(min|max)?(.+)$/,QA=function(){function n(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return n.prototype.setOption=function(t,e,r){t&&(Z(Dr(t.series),function(a){a&&a.data&&ao(a.data)&&Zo(a.data)}),Z(Dr(t.dataset),function(a){a&&a.source&&ao(a.source)&&Zo(a.source)})),t=jt(t);var o=this._optionBackup,i=function(a,l,c){var h,p,g=[],y=a.baseOption,b=a.timeline,_=a.options,w=a.media,S=!!a.media,M=!!(_||b||y&&y.timeline);function A(I){Z(l,function(N){N(I,c)})}return y?(p=y).timeline||(p.timeline=b):((M||S)&&(a.options=a.media=null),p=a),S&&Ee(w)&&Z(w,function(I){I&&I.option&&(I.query?g.push(I):h||(h=I))}),A(p),Z(_,function(I){return A(I)}),Z(g,function(I){return A(I.option)}),{baseOption:p,timelineOptions:_||[],mediaDefault:h,mediaList:g}}(t,e,!o);this._newBaseOption=i.baseOption,o?(i.timelineOptions.length&&(o.timelineOptions=i.timelineOptions),i.mediaList.length&&(o.mediaList=i.mediaList),i.mediaDefault&&(o.mediaDefault=i.mediaDefault)):this._optionBackup=i},n.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],jt(t?e.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(t){var e,r=this._timelineOptions;if(r.length){var o=t.getComponent("timeline");o&&(e=jt(r[o.getCurrentIndex()]))}return e},n.prototype.getMediaOption=function(t){var r,o=this._api.getWidth(),i=this._api.getHeight(),a=this._mediaList,l=this._mediaDefault,c=[],h=[];if(!a.length&&!l)return h;for(var p=0,g=a.length;p<g;p++)Mw(a[p].query,o,i)&&c.push(p);return!c.length&&l&&(c=[-1]),c.length&&(r=this._currentMediaIndices,c.join(",")!==r.join(","))&&(h=j(c,function(y){return jt(-1===y?l.option:a[y].option)})),this._currentMediaIndices=c,h},n}();function Mw(n,t,e){var r={width:t,height:e,aspectratio:t/e},o=!0;return Z(n,function(i,a){var p,g,y,l=a.match(JA);if(l&&l[1]&&l[2]){var c=l[1],h=l[2].toLowerCase();p=r[h],g=i,("min"===(y=c)?p>=g:"max"===y?p<=g:p===g)||(o=!1)}}),o}var ha=Z,Of=Ft,Tw=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Aw(n){var t=n&&n.itemStyle;if(t)for(var e=0,r=Tw.length;e<r;e++){var o=Tw[e],i=t.normal,a=t.emphasis;i&&i[o]&&(n[o]=n[o]||{},n[o].normal?Ve(n[o].normal,i[o]):n[o].normal=i[o],i[o]=null),a&&a[o]&&(n[o]=n[o]||{},n[o].emphasis?Ve(n[o].emphasis,a[o]):n[o].emphasis=a[o],a[o]=null)}}function pi(n,t,e){if(n&&n[t]&&(n[t].normal||n[t].emphasis)){var r=n[t].normal,o=n[t].emphasis;r&&(e?(n[t].normal=n[t].emphasis=null,Pe(n[t],r)):n[t]=r),o&&(n.emphasis=n.emphasis||{},n.emphasis[t]=o,o.focus&&(n.emphasis.focus=o.focus),o.blurScope&&(n.emphasis.blurScope=o.blurScope))}}function bs(n){pi(n,"itemStyle"),pi(n,"lineStyle"),pi(n,"areaStyle"),pi(n,"label"),pi(n,"labelLine"),pi(n,"upperLabel"),pi(n,"edgeLabel")}function yo(n,t){var e=Of(n)&&n[t],r=Of(e)&&e.textStyle;if(r)for(var o=0,i=y_.length;o<i;o++){var a=y_[o];r.hasOwnProperty(a)&&(e[a]=r[a])}}function Ni(n){n&&(bs(n),yo(n,"label"),n.emphasis&&yo(n.emphasis,"label"))}function Zs(n){return Ee(n)?n:n?[n]:[]}function ek(n){return(Ee(n)?n[0]:n)||{}}function j0(n){n&&Z(EE,function(t){t[0]in n&&!(t[1]in n)&&(n[t[1]]=n[t[0]])})}var EE=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],nk=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Om=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Pf(n){var t=n&&n.itemStyle;if(t)for(var e=0;e<Om.length;e++){var r=Om[e][1];null!=t[r]&&(t[Om[e][0]]=t[r])}}function rk(n){n&&"edge"===n.alignTo&&null!=n.margin&&null==n.edgeDistance&&(n.edgeDistance=n.margin)}function ok(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function kw(n,t){if(n)for(var e=0;e<n.length;e++)t(n[e]),n[e]&&kw(n[e].children,t)}function Y0(n,t){(function tk(n,t){ha(Zs(n.series),function(r){Of(r)&&function(o){if(Of(o)){Aw(o),bs(o),yo(o,"label"),yo(o,"upperLabel"),yo(o,"edgeLabel"),o.emphasis&&(yo(o.emphasis,"label"),yo(o.emphasis,"upperLabel"),yo(o.emphasis,"edgeLabel"));var i=o.markPoint;i&&(Aw(i),Ni(i));var a=o.markLine;a&&(Aw(a),Ni(a));var l=o.markArea;l&&Ni(l);var c=o.data;if("graph"===o.type){c=c||o.nodes;var h=o.links||o.edges;if(h&&!ao(h))for(var p=0;p<h.length;p++)Ni(h[p]);Z(o.categories,function(b){bs(b)})}if(c&&!ao(c))for(p=0;p<c.length;p++)Ni(c[p]);if((i=o.markPoint)&&i.data){var g=i.data;for(p=0;p<g.length;p++)Ni(g[p])}if((a=o.markLine)&&a.data){var y=a.data;for(p=0;p<y.length;p++)Ee(y[p])?(Ni(y[p][0]),Ni(y[p][1])):Ni(y[p])}"gauge"===o.type?(yo(o,"axisLabel"),yo(o,"title"),yo(o,"detail")):"treemap"===o.type?(pi(o.breadcrumb,"itemStyle"),Z(o.levels,function(b){bs(b)})):"tree"===o.type&&bs(o.leaves)}}(r)});var e=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&e.push("valueAxis","categoryAxis","logAxis","timeAxis"),ha(e,function(r){ha(Zs(n[r]),function(o){o&&(yo(o,"axisLabel"),yo(o.axisPointer,"label"))})}),ha(Zs(n.parallel),function(r){var o=r&&r.parallelAxisDefault;yo(o,"axisLabel"),yo(o&&o.axisPointer,"label")}),ha(Zs(n.calendar),function(r){pi(r,"itemStyle"),yo(r,"dayLabel"),yo(r,"monthLabel"),yo(r,"yearLabel")}),ha(Zs(n.radar),function(r){yo(r,"name"),r.name&&null==r.axisName&&(r.axisName=r.name,delete r.name),null!=r.nameGap&&null==r.axisNameGap&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),ha(Zs(n.geo),function(r){Of(r)&&(Ni(r),ha(Zs(r.regions),function(o){Ni(o)}))}),ha(Zs(n.timeline),function(r){Ni(r),pi(r,"label"),pi(r,"itemStyle"),pi(r,"controlStyle",!0);var o=r.data;Ee(o)&&Z(o,function(i){Ft(i)&&(pi(i,"label"),pi(i,"itemStyle"))})}),ha(Zs(n.toolbox),function(r){pi(r,"iconStyle"),ha(r.feature,function(o){pi(o,"iconStyle")})}),yo(ek(n.axisPointer),"label"),yo(ek(n.tooltip).axisPointer,"label")})(n,t),n.series=Dr(n.series),Z(n.series,function(e){if(Ft(e)){var r=e.type;if("line"===r)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===r||"gauge"===r){if(null!=e.clockWise&&(e.clockwise=e.clockWise),rk(e.label),(a=e.data)&&!ao(a))for(var o=0;o<a.length;o++)rk(a[o]);null!=e.hoverOffset&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if("gauge"===r){var i=function(c,h){for(var p="pointer.color".split(","),g=c,y=0;y<p.length&&null!=(g=g&&g[p[y]]);y++);return g}(e);null!=i&&function(c,h,p,g){for(var y,b="itemStyle.color".split(","),_=c,w=0;w<b.length-1;w++)null==_[y=b[w]]&&(_[y]={}),_=_[y];null==_[b[w]]&&(_[b[w]]=p)}(e,0,i)}else if("bar"===r){var a;if(Pf(e),Pf(e.backgroundStyle),Pf(e.emphasis),(a=e.data)&&!ao(a))for(o=0;o<a.length;o++)"object"==typeof a[o]&&(Pf(a[o]),Pf(a[o]&&a[o].emphasis))}else if("sunburst"===r){var l=e.highlightPolicy;l&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=l)),ok(e),kw(e.data,ok)}else"graph"===r||"sankey"===r?(c=e)&&null!=c.focusNodeAdjacency&&(c.emphasis=c.emphasis||{},null==c.emphasis.focus&&(c.emphasis.focus="adjacency")):"map"===r&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&Pe(e,e.mapLocation));null!=e.hoverAnimation&&(e.emphasis=e.emphasis||{},e.emphasis&&null==e.emphasis.scale&&(e.emphasis.scale=e.hoverAnimation)),j0(e)}var c}),n.dataRange&&(n.visualMap=n.dataRange),Z(nk,function(e){var r=n[e];r&&(Ee(r)||(r=[r]),Z(r,function(o){j0(o)}))})}function ik(n){Z(n,function(t,e){var r=[],o=[NaN,NaN],i=[t.stackResultDimension,t.stackedOverDimension],a=t.data,l=t.isStackedByIndex,c=t.seriesModel.get("stackStrategy")||"samesign";a.modify(i,function(h,p,g){var y,b,_=a.get(t.stackedDimension,g);if(isNaN(_))return o;l?b=a.getRawIndex(g):y=a.get(t.stackedByDimension,g);for(var w=NaN,S=e-1;S>=0;S--){var M=n[S];if(l||(b=M.data.rawIndexOf(M.stackedByDimension,y)),b>=0){var A=M.data.getByRawIndex(M.stackResultDimension,b);if("all"===c||"positive"===c&&A>0||"negative"===c&&A<0||"samesign"===c&&_>=0&&A>0||"samesign"===c&&_<=0&&A<0){_=cA(_,A),w=A;break}}}return r[0]=_,r[1]=w,r})})}var lc,uc,cc,ad,ak,Pm=function(n){this.data=n.data||(n.sourceFormat===iu?{}:[]),this.sourceFormat=n.sourceFormat||yw,this.seriesLayoutBy=n.seriesLayoutBy||au,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var t=this.dimensionsDefine=n.dimensionsDefine;if(t)for(var e=0;e<t.length;e++){var r=t[e];null==r.type&&Ef(this,e)===Nm&&(r.type="ordinal")}};function X0(n){return n instanceof Pm}function Iw(n,t,e){e=e||Dw(n);var r=t.seriesLayoutBy,o=function(i,a,l,c,h){var p,g;if(!i)return{dimensionsDefine:Nw(h),startIndex:g,dimensionsDetectedCount:p};if(a===Di){var y=i;"auto"===c||null==c?Ew(function(_){null!=_&&"-"!==_&&(bt(_)?null==g&&(g=1):g=0)},l,y,10):g=dt(c)?c:c?1:0,h||1!==g||(h=[],Ew(function(_,w){h[w]=null!=_?_+"":""},l,y,1/0)),p=h?h.length:l===Nf?y.length:y[0]?y[0].length:null}else if(a===vs)h||(h=function(_){for(var w,S=0;S<_.length&&!(w=_[S++]););if(w)return vn(w)}(i));else if(a===iu)h||(h=[],Z(i,function(_,w){h.push(w)}));else if(a===Ii){var b=Uc(i[0]);p=Ee(b)&&b.length||1}return{startIndex:g,dimensionsDefine:Nw(h),dimensionsDetectedCount:p}}(n,e,r,t.sourceHeader,t.dimensions);return new Pm({data:n,sourceFormat:e,seriesLayoutBy:r,dimensionsDefine:o.dimensionsDefine,startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount,metaRawOption:jt(t)})}function Bm(n){return new Pm({data:n,sourceFormat:ao(n)?ac:Ii})}function Dw(n){var t=yw;if(ao(n))t=ac;else if(Ee(n)){0===n.length&&(t=Di);for(var e=0,r=n.length;e<r;e++){var o=n[e];if(null!=o){if(Ee(o)||ao(o)){t=Di;break}if(Ft(o)){t=vs;break}}}}else if(Ft(n))for(var i in n)if(Lt(n,i)&&Mn(n[i])){t=iu;break}return t}function Nw(n){if(n){var t=Et();return j(n,function(e,r){var o={name:(e=Ft(e)?e:{name:e}).name,displayName:e.displayName,type:e.type};if(null==o.name)return o;o.name+="",null==o.displayName&&(o.displayName=o.name);var i=t.get(o.name);return i?o.name+="-"+i.count++:t.set(o.name,{count:1}),o})}}function Ew(n,t,e,r){if(t===Nf)for(var o=0;o<e.length&&o<r;o++)n(e[o]?e[o][0]:null,o);else{var i=e[0]||[];for(o=0;o<i.length&&o<r;o++)n(i[o],o)}}function sk(n){var t=n.sourceFormat;return t===vs||t===iu}var Lw=function(){function n(t,e){var r=X0(t)?t:Bm(t);this._source=r;var o=this._data=r.data;r.sourceFormat===ac&&(this._offset=0,this._dimSize=e,this._data=o),ak(this,o,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(t,e){},n.prototype.appendData=function(t){},n.prototype.clean=function(){},n.protoInitialize=function(){var t=n.prototype;t.pure=!1,t.persistent=!0}(),n.internalField=function(){var t;ak=function(a,l,c){var h=c.sourceFormat,p=c.seriesLayoutBy,g=c.startIndex,y=c.dimensionsDefine;if(De(a,ad[Oh(h,p)]),h===ac)a.getItem=e,a.count=o,a.fillStorage=r;else{var _=Ow(h,p);a.getItem=Fe(_,null,l,g,y);var w=ck(h,p);a.count=Fe(w,null,l,g,y)}};var e=function(a,l){l=l||[];for(var c=this._data,h=this._dimSize,p=h*(a-=this._offset),g=0;g<h;g++)l[g]=c[p+g];return l},r=function(a,l,c,h){for(var p=this._data,g=this._dimSize,y=0;y<g;y++){for(var b=h[y],_=null==b[0]?1/0:b[0],w=null==b[1]?-1/0:b[1],S=l-a,M=c[y],A=0;A<S;A++){var I=p[A*g+y];M[a+A]=I,I<_&&(_=I),I>w&&(w=I)}b[0]=_,b[1]=w}},o=function(){return this._data?this._data.length/this._dimSize:0};function i(a){for(var l=0;l<a.length;l++)this._data.push(a[l])}(t={})[Di+"_"+au]={pure:!0,appendData:i},t[Di+"_"+Nf]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[vs]={pure:!0,appendData:i},t[iu]={pure:!0,appendData:function(a){var l=this._data;Z(a,function(c,h){for(var p=l[h]||(l[h]=[]),g=0;g<(c||[]).length;g++)p.push(c[g])})}},t[Ii]={appendData:i},t[ac]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},ad=t}(),n}(),lk=function(n,t,e,r){return n[r]},Rw=((lc={})[Di+"_"+au]=function(n,t,e,r){return n[r+t]},lc[Di+"_"+Nf]=function(n,t,e,r,o){r+=t;for(var i=o||[],a=n,l=0;l<a.length;l++){var c=a[l];i[l]=c?c[r]:null}return i},lc[vs]=lk,lc[iu]=function(n,t,e,r,o){for(var i=o||[],a=0;a<e.length;a++){var c=n[e[a].name];i[a]=c?c[r]:null}return i},lc[Ii]=lk,lc);function Ow(n,t){return Rw[Oh(n,t)]}var Pw=function(n,t,e){return n.length},uk=((uc={})[Di+"_"+au]=function(n,t,e){return Math.max(0,n.length-t)},uc[Di+"_"+Nf]=function(n,t,e){var r=n[0];return r?Math.max(0,r.length-t):0},uc[vs]=Pw,uc[iu]=function(n,t,e){var o=n[e[0].name];return o?o.length:0},uc[Ii]=Pw,uc);function ck(n,t){return uk[Oh(n,t)]}var Bw=function(n,t,e){return n[t]},LE=((cc={})[Di]=Bw,cc[vs]=function(n,t,e){return n[e]},cc[iu]=Bw,cc[Ii]=function(n,t,e){var r=Uc(n);return r instanceof Array?r[t]:r},cc[ac]=Bw,cc);function dk(n){return LE[n]}function Oh(n,t){return n===Di?n+"_"+t:n}function Ph(n,t,e){if(n){var r=n.getRawDataItem(t);if(null!=r){var o=n.getStore(),i=o.getSource().sourceFormat;if(null!=e){var a=n.getDimensionIndex(e),l=o.getDimensionProperty(a);return dk(i)(r,a,l)}var c=r;return i===Ii&&(c=Uc(r)),c}}}var hk=/\{@(.+?)\}/g,Bf=function(){function n(){}return n.prototype.getDataParams=function(t,e){var r=this.getData(e),o=this.getRawValue(t,e),i=r.getRawIndex(t),a=r.getName(t),l=r.getRawDataItem(t),c=r.getItemVisual(t,"style"),h=c&&c[r.getItemVisual(t,"drawType")||"fill"],p=c&&c.stroke,g=this.mainType,y="series"===g,b=r.userOutput&&r.userOutput.get();return{componentType:g,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:y?this.subType:null,seriesIndex:this.seriesIndex,seriesId:y?this.id:null,seriesName:y?this.name:null,name:a,dataIndex:i,data:l,dataType:e,value:o,color:h,borderColor:p,dimensionNames:b?b.fullDimensions:null,encode:b?b.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(t,e,r,o,i,a){e=e||"normal";var l=this.getData(r),c=this.getDataParams(t,r);return a&&(c.value=a.interpolatedValue),null!=o&&Ee(c.value)&&(c.value=c.value[o]),i||(i=l.getItemModel(t).get("normal"===e?["label","formatter"]:[e,"label","formatter"])),Se(i)?(c.status=e,c.dimensionIndex=o,i(c)):bt(i)?Im(i,c).replace(hk,function(h,p){var g=p.length,y=p;"["===y.charAt(0)&&"]"===y.charAt(g-1)&&(y=+y.slice(1,g-1));var b=Ph(l,t,y);if(a&&Ee(a.interpolatedValue)){var _=l.getDimensionIndex(y);_>=0&&(b=a.interpolatedValue[_])}return null!=b?b+"":""}):void 0},n.prototype.getRawValue=function(t,e){return Ph(this.getData(e),t)},n.prototype.formatTooltip=function(t,e,r){},n}();function zw(n){var t,e;return Ft(n)?n.type&&(e=n):t=n,{text:t,frag:e}}function zm(n){return new pk(n)}var pk=function(){function n(t){this._reset=(t=t||{}).reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return n.prototype.perform=function(t){var e,r=this._upstream,o=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!o&&(e=this._plan(this.context));var a,l=g(this._modBy),c=this._modDataCount||0,h=g(t&&t.modBy),p=t&&t.modDataCount||0;function g(A){return!(A>=1)&&(A=1),A}l===h&&c===p||(e="reset"),(this._dirty||"reset"===e)&&(this._dirty=!1,a=this._doReset(o)),this._modBy=h,this._modDataCount=p;var y=t&&t.step;if(this._dueEnd=r?r._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var b=this._dueIndex,_=Math.min(null!=y?this._dueIndex+y:1/0,this._dueEnd);if(!o&&(a||b<_)){var w=this._progress;if(Ee(w))for(var S=0;S<w.length;S++)this._doProgress(w[S],b,_,h,p);else this._doProgress(w,b,_,h,p)}this._dueIndex=_,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:_}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(t,e,r,o,i){Vw.reset(e,r,o,i),this._callingProgress=t,this._callingProgress({start:e,end:r,count:r-e,next:Vw.next},this.context)},n.prototype._doReset=function(t){var e,r;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!t&&this._reset&&((e=this._reset(this.context))&&e.progress&&(r=e.forceFirstProgress,e=e.progress),Ee(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var o=this._downstream;return o&&o.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},n}(),Vw=function(){var n,t,e,r,o,i={reset:function(c,h,p,g){t=c,n=h,e=p,r=g,o=Math.ceil(r/e),i.next=e>1&&r>0?l:a}};return i;function a(){return t<n?t++:null}function l(){var c=t%o*e+Math.ceil(t/o),h=t>=n?null:c<r?c:t;return t++,h}}();function sd(n,t){var e=t&&t.type;return"ordinal"===e?n:("time"!==e||dt(n)||null==n||"-"===n||(n=+ji(n)),null==n||""===n?NaN:Number(n))}var RE=Et({number:function(n){return parseFloat(n)},time:function(n){return+ji(n)},trim:function(n){return bt(n)?Br(n):n}});function Vm(n){return RE.get(n)}var q0={lt:function(n,t){return n<t},lte:function(n,t){return n<=t},gt:function(n,t){return n>t},gte:function(n,t){return n>=t}},fk=function(){function n(t,e){dt(e)||En(""),this._opFn=q0[t],this._rvalFloat=ul(e)}return n.prototype.evaluate=function(t){return dt(t)?this._opFn(t,this._rvalFloat):this._opFn(ul(t),this._rvalFloat)},n}(),Ha=function(){function n(t,e){var r="desc"===t;this._resultLT=r?1:-1,null==e&&(e=r?"min":"max"),this._incomparable="min"===e?-1/0:1/0}return n.prototype.evaluate=function(t,e){var r=dt(t)?t:ul(t),o=dt(e)?e:ul(e),i=isNaN(r),a=isNaN(o);if(i&&(r=this._incomparable),a&&(o=this._incomparable),i&&a){var l=bt(t),c=bt(e);l&&(r=c?t:0),c&&(o=l?e:0)}return r<o?this._resultLT:r>o?-this._resultLT:0},n}(),zf=function(){function n(t,e){this._rval=e,this._isEQ=t,this._rvalTypeof=typeof e,this._rvalFloat=ul(e)}return n.prototype.evaluate=function(t){var e=t===this._rval;if(!e){var r=typeof t;r===this._rvalTypeof||"number"!==r&&"number"!==this._rvalTypeof||(e=ul(t)===this._rvalFloat)}return this._isEQ?e:!e},n}();function Fw(n,t){return"eq"===n||"ne"===n?new zf("eq"===n,t):Lt(q0,n)?new fk(n,t):null}var Gw=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(t){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(t){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(t,e){},n.prototype.retrieveValueFromItem=function(t,e){},n.prototype.convertValue=function(t,e){return sd(t,e)},n}();function Z0(n){return ld(n.sourceFormat)||En(""),n.data}function Hw(n){var t=n.sourceFormat,e=n.data;if(ld(t)||En(""),t===Di){for(var o=[],i=0,a=e.length;i<a;i++)o.push(e[i].slice());return o}if(t===vs){for(o=[],i=0,a=e.length;i<a;i++)o.push(De({},e[i]));return o}}function OE(n,t,e){if(null!=e)return dt(e)||!isNaN(e)&&!Lt(t,e)?n[e]:Lt(t,e)?t[e]:void 0}function PE(n){return jt(n)}var Ww=Et();function Uw(n,t,e,r){t.length||En(""),Ft(n)||En("");var a=Ww.get(n.type);a||En("");var l=j(t,function(h){return function(p,g){var y=new Gw,b=p.data,_=y.sourceFormat=p.sourceFormat,w=p.startIndex;p.seriesLayoutBy!==au&&En("");var M=[],A={},I=p.dimensionsDefine;if(I)Z(I,function(G,W){var Y=G.name,X={index:W,name:Y,displayName:G.displayName};M.push(X),null!=Y&&(Lt(A,Y)&&En(""),A[Y]=X)});else for(var N=0;N<p.dimensionsDetectedCount;N++)M.push({index:N});var L=Ow(_,au);g.__isBuiltIn&&(y.getRawDataItem=function(G){return L(b,w,M,G)},y.getRawData=Fe(Z0,null,p)),y.cloneRawData=Fe(Hw,null,p);var R=ck(_,au);y.count=Fe(R,null,b,w,M);var O=dk(_);y.retrieveValue=function(G,W){var Y=L(b,w,M,G);return B(Y,W)};var B=y.retrieveValueFromItem=function(G,W){if(null!=G){var Y=M[W];return Y?O(G,W,Y.name):void 0}};return y.getDimensionInfo=Fe(OE,null,M,A),y.cloneAllDimensionInfo=Fe(PE,null,M),y}(h,a)});return j(Dr(a.transform({upstream:l[0],upstreamList:l,config:jt(n.config)})),function(h,p){var g;Ft(h)||En(""),h.data||En(""),ld(Dw(h.data))||En("");var b=t[0];if(b&&0===p&&!h.dimensions){var _=b.startIndex;_&&(h.data=b.data.slice(0,_).concat(h.data)),g={seriesLayoutBy:au,sourceHeader:_,dimensions:b.metaRawOption.dimensions}}else g={seriesLayoutBy:au,sourceHeader:0,dimensions:h.dimensions};return Iw(h.data,g,null)})}function ld(n){return n===Di||n===vs}var $0,Vf="undefined",gk=typeof Uint32Array===Vf?Array:Uint32Array,mk=typeof Uint16Array===Vf?Array:Uint16Array,jw=typeof Int32Array===Vf?Array:Int32Array,Yw=typeof Float64Array===Vf?Array:Float64Array,Xw={float:Yw,int:jw,ordinal:Array,number:Array,time:Yw};function Bh(n){return n>65535?gk:mk}function yk(n,t,e,r,o){var i=Xw[e||"float"];if(o){var a=n[t],l=a&&a.length;if(l!==r){for(var c=new i(r),h=0;h<l;h++)c[h]=a[h];n[t]=c}}else n[t]=new i(r)}var Ff=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Et()}return n.prototype.initData=function(t,e,r){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var o=t.getSource(),i=this.defaultDimValueGetter=$0[o.sourceFormat];this._dimValueGetter=r||i,this._rawExtent=[],sk(o),this._dimensions=j(e,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(t,e){var r=this._calcDimNameToIdx,o=this._dimensions,i=r.get(t);if(null!=i){if(o[i].type===e)return i}else i=o.length;return o[i]={type:e},r.set(t,i),this._chunks[i]=new Xw[e||"float"](this._rawCount),this._rawExtent[i]=[1/0,-1/0],i},n.prototype.collectOrdinalMeta=function(t,e){var r=this._chunks[t],o=this._dimensions[t],i=this._rawExtent,a=o.ordinalOffset||0,l=r.length;0===a&&(i[t]=[1/0,-1/0]);for(var c=i[t],h=a;h<l;h++){var p=r[h]=e.parseAndCollect(r[h]);isNaN(p)||(c[0]=Math.min(p,c[0]),c[1]=Math.max(p,c[1]))}o.ordinalMeta=e,o.ordinalOffset=l,o.type="ordinal"},n.prototype.getOrdinalMeta=function(t){return this._dimensions[t].ordinalMeta},n.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},n.prototype.appendData=function(t){var e=this._provider,r=this.count();e.appendData(t);var o=e.count();return e.persistent||(o+=r),r<o&&this._initDataFromProvider(r,o,!0),[r,o]},n.prototype.appendValues=function(t,e){for(var r=this._chunks,o=this._dimensions,i=o.length,a=this._rawExtent,l=this.count(),c=l+Math.max(t.length,e||0),h=0;h<i;h++)yk(r,h,(_=o[h]).type,c,!0);for(var p=[],g=l;g<c;g++)for(var y=g-l,b=0;b<i;b++){var _=o[b],w=$0.arrayRows.call(this,t[y]||p,_.property,y,b);r[b][g]=w;var S=a[b];w<S[0]&&(S[0]=w),w>S[1]&&(S[1]=w)}return this._rawCount=this._count=c,{start:l,end:c}},n.prototype._initDataFromProvider=function(t,e,r){for(var o=this._provider,i=this._chunks,a=this._dimensions,l=a.length,c=this._rawExtent,h=j(a,function(A){return A.property}),p=0;p<l;p++){var g=a[p];c[p]||(c[p]=[1/0,-1/0]),yk(i,p,g.type,e,r)}if(o.fillStorage)o.fillStorage(t,e,i,c);else for(var y=[],b=t;b<e;b++){y=o.getItem(b,y);for(var _=0;_<l;_++){var w=i[_],S=this._dimValueGetter(y,h[_],b,_);w[b]=S;var M=c[_];S<M[0]&&(M[0]=S),S>M[1]&&(M[1]=S)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=e,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var r=this._chunks[t];return r?r[this.getRawIndex(e)]:NaN},n.prototype.getValues=function(t,e){var r=[],o=[];if(null==e){e=t,t=[];for(var i=0;i<this._dimensions.length;i++)o.push(i)}else o=t;i=0;for(var a=o.length;i<a;i++)r.push(this.get(o[i],e));return r},n.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var r=this._chunks[t];return r?r[e]:NaN},n.prototype.getSum=function(t){var e=0;if(this._chunks[t])for(var r=0,o=this.count();r<o;r++){var i=this.get(t,r);isNaN(i)||(e+=i)}return e},n.prototype.getMedian=function(t){var e=[];this.each([t],function(i){isNaN(i)||e.push(i)});var r=e.sort(function(i,a){return i-a}),o=this.count();return 0===o?0:o%2==1?r[(o-1)/2]:(r[o/2]+r[o/2-1])/2},n.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,r=e[t];if(null!=r&&r<this._count&&r===t)return t;for(var o=0,i=this._count-1;o<=i;){var a=(o+i)/2|0;if(e[a]<t)o=a+1;else{if(!(e[a]>t))return a;i=a-1}}return-1},n.prototype.indicesOfNearest=function(t,e,r){var o=this._chunks[t],i=[];if(!o)return i;null==r&&(r=1/0);for(var a=1/0,l=-1,c=0,h=0,p=this.count();h<p;h++){var g=e-o[this.getRawIndex(h)],y=Math.abs(g);y<=r&&((y<a||y===a&&g>=0&&l<0)&&(a=y,l=g,c=0),g===l&&(i[c++]=h))}return i.length=c,i},n.prototype.getIndices=function(){var t,e=this._indices;if(e){var r=e.constructor,o=this._count;if(r===Array){t=new r(o);for(var i=0;i<o;i++)t[i]=e[i]}else t=new r(e.buffer,0,o)}else for(t=new(r=Bh(this._rawCount))(this.count()),i=0;i<t.length;i++)t[i]=i;return t},n.prototype.filter=function(t,e){if(!this._count)return this;for(var r=this.clone(),o=r.count(),i=new(Bh(r._rawCount))(o),a=[],l=t.length,c=0,h=t[0],p=r._chunks,g=0;g<o;g++){var y=void 0,b=r.getRawIndex(g);if(0===l)y=e(g);else if(1===l)y=e(p[h][b],g);else{for(var _=0;_<l;_++)a[_]=p[t[_]][b];a[_]=g,y=e.apply(null,a)}y&&(i[c++]=b)}return c<o&&(r._indices=i),r._count=c,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(t){var e=this.clone(),r=e._count;if(!r)return this;var o=vn(t),i=o.length;if(!i)return this;var a=e.count(),l=new(Bh(e._rawCount))(a),c=0,h=o[0],p=t[h][0],g=t[h][1],y=e._chunks,b=!1;if(!e._indices){var _=0;if(1===i){for(var w=y[o[0]],S=0;S<r;S++)((N=w[S])>=p&&N<=g||isNaN(N))&&(l[c++]=_),_++;b=!0}else if(2===i){w=y[o[0]];var M=y[o[1]],A=t[o[1]][0],I=t[o[1]][1];for(S=0;S<r;S++){var N=w[S],L=M[S];(N>=p&&N<=g||isNaN(N))&&(L>=A&&L<=I||isNaN(L))&&(l[c++]=_),_++}b=!0}}if(!b)if(1===i)for(S=0;S<a;S++){var R=e.getRawIndex(S);((N=y[o[0]][R])>=p&&N<=g||isNaN(N))&&(l[c++]=R)}else for(S=0;S<a;S++){for(var O=!0,B=(R=e.getRawIndex(S),0);B<i;B++){var G=o[B];((N=y[G][R])<t[G][0]||N>t[G][1])&&(O=!1)}O&&(l[c++]=e.getRawIndex(S))}return c<a&&(e._indices=l),e._count=c,e._extent=[],e._updateGetRawIdx(),e},n.prototype.map=function(t,e){var r=this.clone(t);return this._updateDims(r,t,e),r},n.prototype.modify=function(t,e){this._updateDims(this,t,e)},n.prototype._updateDims=function(t,e,r){for(var o=t._chunks,i=[],a=e.length,l=t.count(),c=[],h=t._rawExtent,p=0;p<e.length;p++)h[e[p]]=[1/0,-1/0];for(var g=0;g<l;g++){for(var y=t.getRawIndex(g),b=0;b<a;b++)c[b]=o[e[b]][y];c[a]=g;var _=r&&r.apply(null,c);if(null!=_)for("object"!=typeof _&&(i[0]=_,_=i),p=0;p<_.length;p++){var w=e[p],S=_[p],M=h[w],A=o[w];A&&(A[y]=S),S<M[0]&&(M[0]=S),S>M[1]&&(M[1]=S)}}},n.prototype.lttbDownSample=function(t,e){var r,o,i,a=this.clone([t],!0),l=a._chunks[t],c=this.count(),h=0,p=Math.floor(1/e),g=this.getRawIndex(0),y=new(Bh(this._rawCount))(Math.min(2*(Math.ceil(c/p)+2),c));y[h++]=g;for(var b=1;b<c-1;b+=p){for(var _=Math.min(b+p,c-1),w=Math.min(b+2*p,c),S=(w+_)/2,M=0,A=_;A<w;A++){var I=l[W=this.getRawIndex(A)];isNaN(I)||(M+=I)}M/=w-_;var N=b,L=Math.min(b+p,c),R=b-1,O=l[g];r=-1,i=N;var B=-1,G=0;for(A=N;A<L;A++){var W;I=l[W=this.getRawIndex(A)],isNaN(I)?(G++,B<0&&(B=W)):(o=Math.abs((R-S)*(I-O)-(R-A)*(M-O)))>r&&(r=o,i=W)}G>0&&G<L-N&&(y[h++]=Math.min(B,i),i=Math.max(B,i)),y[h++]=i,g=i}return y[h++]=this.getRawIndex(c-1),a._count=h,a._indices=y,a.getRawIndex=this._getRawIdx,a},n.prototype.downSample=function(t,e,r,o){for(var i=this.clone([t],!0),a=i._chunks,l=[],c=Math.floor(1/e),h=a[t],p=this.count(),g=i._rawExtent[t]=[1/0,-1/0],y=new(Bh(this._rawCount))(Math.ceil(p/c)),b=0,_=0;_<p;_+=c){c>p-_&&(l.length=c=p-_);for(var w=0;w<c;w++){var S=this.getRawIndex(_+w);l[w]=h[S]}var M=r(l),A=this.getRawIndex(Math.min(_+o(l,M)||0,p-1));h[A]=M,M<g[0]&&(g[0]=M),M>g[1]&&(g[1]=M),y[b++]=A}return i._count=b,i._indices=y,i._updateGetRawIdx(),i},n.prototype.each=function(t,e){if(this._count)for(var r=t.length,o=this._chunks,i=0,a=this.count();i<a;i++){var l=this.getRawIndex(i);switch(r){case 0:e(i);break;case 1:e(o[t[0]][l],i);break;case 2:e(o[t[0]][l],o[t[1]][l],i);break;default:for(var c=0,h=[];c<r;c++)h[c]=o[t[c]][l];h[c]=i,e.apply(null,h)}}},n.prototype.getDataExtent=function(t){var e=this._chunks[t],r=[1/0,-1/0];if(!e)return r;var o,i=this.count();if(!this._indices)return this._rawExtent[t].slice();if(o=this._extent[t])return o.slice();for(var a=(o=r)[0],l=o[1],c=0;c<i;c++){var h=e[this.getRawIndex(c)];h<a&&(a=h),h>l&&(l=h)}return this._extent[t]=o=[a,l],o},n.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var r=[],o=this._chunks,i=0;i<o.length;i++)r.push(o[i][e]);return r},n.prototype.clone=function(t,e){var r,o,i=new n,a=this._chunks,l=t&&Jr(t,function(h,p){return h[p]=!0,h},{});if(l)for(var c=0;c<a.length;c++)i._chunks[c]=l[c]?(o=void 0,(o=(r=a[c]).constructor)===Array?r.slice():new o(r)):a[c];else i._chunks=a;return this._copyCommonProps(i),e||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},n.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=jt(this._extent),t._rawExtent=jt(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var r=this._indices.length;e=new t(r);for(var o=0;o<r;o++)e[o]=this._indices[o]}else e=new t(this._indices);return e}return null},n.prototype._getRawIdxIdentity=function(t){return t},n.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function t(e,r,o,i){return sd(e[i],this._dimensions[i])}$0={arrayRows:t,objectRows:function(e,r,o,i){return sd(e[r],this._dimensions[i])},keyedColumns:t,original:function(e,r,o,i){var a=e&&(null==e.value?e:e.value);return sd(a instanceof Array?a[i]:a,this._dimensions[i])},typedArray:function(e,r,o,i){return e[i]}}}(),n}(),vk=function(){function n(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var t,e,r=this._sourceHost,o=this._getUpstreamSourceManagers(),i=!!o.length;if(Xo(r)){var a=r,l=void 0,c=void 0,h=void 0;if(i){var p=o[0];p.prepareSource(),l=(h=p.getSource()).data,c=h.sourceFormat,e=[p._getVersionSign()]}else c=ao(l=a.get("data",!0))?ac:Ii,e=[];var g=this._getSourceMetaRawOption()||{},y=h&&h.metaRawOption||{},b=We(g.seriesLayoutBy,y.seriesLayoutBy)||null,_=We(g.sourceHeader,y.sourceHeader),w=We(g.dimensions,y.dimensions);t=b!==y.seriesLayoutBy||!!_!=!!y.sourceHeader||w?[Iw(l,{seriesLayoutBy:b,sourceHeader:_,dimensions:w},c)]:[]}else{var S=r;if(i){var M=this._applyTransform(o);t=M.sourceList,e=M.upstreamSignList}else t=[Iw(S.get("source",!0),this._getSourceMetaRawOption(),null)],e=[]}this._setLocalSource(t,e)},n.prototype._applyTransform=function(t){var e,r=this._sourceHost,o=r.get("transform",!0),i=r.get("fromTransformResult",!0);null!=i&&1!==t.length&&bk("");var l,c=[],h=[];return Z(t,function(p){p.prepareSource();var g=p.getSource(i||0);null==i||g||bk(""),c.push(g),h.push(p._getVersionSign())}),o?e=function(p,g,y){var b=Dr(p),_=b.length;_||En("");for(var S=0,M=_;S<M;S++)g=Uw(b[S],g),S!==M-1&&(g.length=Math.max(g.length,1));return g}(o,c):null!=i&&(e=[(l=c[0],new Pm({data:l.data,sourceFormat:l.sourceFormat,seriesLayoutBy:l.seriesLayoutBy,dimensionsDefine:jt(l.dimensionsDefine),startIndex:l.startIndex,dimensionsDetectedCount:l.dimensionsDetectedCount}))]),{sourceList:e,upstreamSignList:h}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var r=t[e];if(r._isDirty()||this._upstreamSignList[e]!==r._getVersionSign())return!0}},n.prototype.getSource=function(t){var e=this._sourceList[t=t||0];if(!e){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(t)}return e},n.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},n.prototype._innerGetDataStore=function(t,e,r){var o=this._storeList,i=o[0];i||(i=o[0]={});var a=i[r];if(!a){var l=this._getUpstreamSourceManagers()[0];Xo(this._sourceHost)&&l?a=l._innerGetDataStore(t,e,r):(a=new Ff).initData(new Lw(e,t.length),t),i[r]=a}return a},n.prototype._getUpstreamSourceManagers=function(){var r,t=this._sourceHost;if(Xo(t)){var e=sc(t);return e?[e.getSourceManager()]:[]}return j((r=t).get("transform",!0)||r.get("fromTransformResult",!0)?Kp(r.ecModel,"dataset",{index:r.get("fromDatasetIndex",!0),id:r.get("fromDatasetId",!0)},Mo).models:[],function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var t,e,r,o=this._sourceHost;if(Xo(o))t=o.get("seriesLayoutBy",!0),e=o.get("sourceHeader",!0),r=o.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var i=o;t=i.get("seriesLayoutBy",!0),e=i.get("sourceHeader",!0),r=i.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:e,dimensions:r}},n}();function qw(n){n.option.transform&&Zo(n.option.transform)}function Xo(n){return"series"===n.mainType}function bk(n){throw new Error(n)}var Zw="line-height:1";function $w(n,t){var e=n.color||"#6e7079",r=n.fontSize||12,o=n.fontWeight||"400",i=n.color||"#464646",a=n.fontSize||14,l=n.fontWeight||"900";return"html"===t?{nameStyle:"font-size:"+Co(r+"")+"px;color:"+Co(e)+";font-weight:"+Co(o+""),valueStyle:"font-size:"+Co(a+"")+"px;color:"+Co(i)+";font-weight:"+Co(l+"")}:{nameStyle:{fontSize:r,fill:e,fontWeight:o},valueStyle:{fontSize:a,fill:i,fontWeight:l}}}var xk=[0,10,20,30],_k=["","\n","\n\n","\n\n\n"];function ti(n,t){return t.type=n,t}function Kw(n){return"section"===n.type}function wk(n){return Kw(n)?Ck:BE}function Sk(n){if(Kw(n)){var t=0,e=n.blocks.length,r=e>1||e>0&&!n.noHeader;return Z(n.blocks,function(o){var i=Sk(o);i>=t&&(t=i+ +(r&&(!i||Kw(o)&&!o.noHeader)))}),t}return 0}function Ck(n,t,e,r){var o,i=t.noHeader,a=(o=Sk(t),{html:xk[o],richText:_k[o]}),l=[],c=t.blocks||[];bn(!c||Ee(c)),c=c||[];var h=n.orderMode;if(t.sortBlocks&&h){c=c.slice();var p={valueAsc:"asc",valueDesc:"desc"};if(Lt(p,h)){var g=new Ha(p[h],null);c.sort(function(w,S){return g.evaluate(w.sortParam,S.sortParam)})}else"seriesDesc"===h&&c.reverse()}Z(c,function(w,S){var M=t.valueFormatter,A=wk(w)(M?De(De({},n),{valueFormatter:M}):n,w,S>0?a.html:0,r);null!=A&&l.push(A)});var y="richText"===n.renderMode?l.join(a.richText):K0(l.join(""),i?e:a.html);if(i)return y;var b=km(t.header,"ordinal",n.useUTC),_=$w(r,n.renderMode).nameStyle;return"richText"===n.renderMode?Jw(n,b,_)+a.richText+y:K0('<div style="'+_+";"+Zw+';">'+Co(b)+"</div>"+y,e)}function BE(n,t,e,r){var N,L,G,o=n.renderMode,i=t.noName,a=t.noValue,l=!t.markerType,c=t.name,h=n.useUTC,p=t.valueFormatter||n.valueFormatter||function(N){return j(N=Ee(N)?N:[N],function(L,R){return km(L,Ee(b)?b[R]:b,h)})};if(!i||!a){var g=l?"":n.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",o),y=i?"":km(c,"ordinal",h),b=t.valueType,_=a?[]:p(t.value,t.dataIndex),w=!l||!i,S=!l&&i,M=$w(r,o),A=M.nameStyle,I=M.valueStyle;return"richText"===o?(l?"":g)+(i?"":Jw(n,y,A))+(a?"":(N=n,L=_,G=[I],w&&G.push({padding:[0,0,0,S?10:20],align:"right"}),N.markupStyleCreator.wrapRichTextStyle(Ee(L)?L.join("  "):L,G))):K0((l?"":g)+(i?"":function(N,L,R){return'<span style="'+R+";"+(L?"margin-left:2px":"")+'">'+Co(N)+"</span>"}(y,!l,A))+(a?"":function(N,L,R,O){return'<span style="'+(L?"float:right;margin-left:"+(R?"10px":"20px"):"")+";"+O+'">'+j(N=Ee(N)?N:[N],function(W){return Co(W)}).join("&nbsp;&nbsp;")+"</span>"}(_,w,S,I)),e)}}function Mk(n,t,e,r,o,i){if(n)return wk(n)({useUTC:o,renderMode:e,orderMode:r,markupStyleCreator:t,valueFormatter:n.valueFormatter},n,0,i)}function K0(n,t){return'<div style="margin: '+t+"px 0 0;"+Zw+';">'+n+'<div style="clear:both"></div></div>'}function Jw(n,t,e){return n.markupStyleCreator.wrapRichTextStyle(t,e)}function Qw(n,t){return Eh(n.getData().getItemVisual(t,"style")[n.visualDrawType])}function Tk(n,t){return n.get("padding")??("richText"===t?[8,10]:10)}var J0=function(){function n(){this.richTextStyles={},this._nextStyleNameId=h_()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(t,e,r){var o="richText"===r?this._generateStyleName():null,i=mw({color:e,type:t,renderMode:r,markerId:o});return bt(i)?i:(this.richTextStyles[o]=i.style,i.content)},n.prototype.wrapRichTextStyle=function(t,e){var r={};Ee(e)?Z(e,function(i){return De(r,i)}):De(r,e);var o=this._generateStyleName();return this.richTextStyles[o]=r,"{"+o+"|"+t+"}"},n}();function eS(n){var t,e,r,o,i=n.series,a=n.dataIndex,l=n.multipleSeries,c=i.getData(),h=c.mapDimensionsAll("defaultedTooltip"),p=h.length,g=i.getRawValue(a),y=Ee(g),b=Qw(i,a);if(p>1||y&&!p){var _=function(N,L,R,O,B){var G=L.getData(),W=Jr(N,function(oe,ie,se){var le=G.getDimensionInfo(se);return oe||le&&!1!==le.tooltip&&null!=le.displayName},!1),Y=[],X=[],J=[];function ne(oe,ie){var se=G.getDimensionInfo(ie);se&&!1!==se.otherDims.tooltip&&(W?J.push(ti("nameValue",{markerType:"subItem",markerColor:B,name:se.displayName,value:oe,valueType:se.type})):(Y.push(oe),X.push(se.type)))}return O.length?Z(O,function(oe){ne(Ph(G,R,oe),oe)}):Z(N,ne),{inlineValues:Y,inlineValueTypes:X,blocks:J}}(g,i,a,h,b);t=_.inlineValues,e=_.inlineValueTypes,r=_.blocks,o=_.inlineValues[0]}else if(p){var w=c.getDimensionInfo(h[0]);o=t=Ph(c,a,h[0]),e=w.type}else o=t=y?g[0]:g;var S=Hv(i),M=S&&i.name||"",A=c.getName(a),I=l?M:A;return ti("section",{header:M,noHeader:l||!S,sortParam:o,blocks:[ti("nameValue",{markerType:"item",markerColor:b,name:I,noName:!Br(I),value:t,valueType:e,dataIndex:a})].concat(r||[])})}var pa=Gn();function Fm(n,t){return n.getName(t)||n.getId(t)}var Gm="__universalTransitionEnabled",Pr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return Ce(t,n),t.prototype.init=function(e,r,o){this.seriesIndex=this.componentIndex,this.dataTask=zm({count:Ak,reset:kk}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,o),(pa(this).sourceManager=new vk(this)).prepareSource();var i=this.getInitialData(e,o);Q0(i,this),this.dataTask.context.data=i,pa(this).dataBeforeProcessed=i,zh(this),this._initSelectedMapFromData(i)},t.prototype.mergeDefaultAndTheme=function(e,r){var o=rd(this),i=o?ic(e):{},a=this.subType;wn.hasClass(a)&&(a+="Series"),Ve(e,r.getTheme().get(this.subType)),Ve(e,this.getDefaultOption()),rh(e,"label",["show"]),this.fillDataTextStyle(e.data),o&&oc(e,i,o)},t.prototype.mergeOption=function(e,r){e=Ve(this.option,e,!0),this.fillDataTextStyle(e.data);var o=rd(this);o&&oc(this.option,e,o);var i=pa(this).sourceManager;i.dirty(),i.prepareSource();var a=this.getInitialData(e,r);Q0(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,pa(this).dataBeforeProcessed=a,zh(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(e){if(e&&!ao(e))for(var r=["show"],o=0;o<e.length;o++)e[o]&&e[o].label&&rh(e[o],"label",r)},t.prototype.getInitialData=function(e,r){},t.prototype.appendData=function(e){this.getRawData().appendData(e.data)},t.prototype.getData=function(e){var r=su(this);if(r){var o=r.context.data;return null!=e&&o.getLinkedData?o.getLinkedData(e):o}return pa(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var r=su(this);if(r){var o=r.context;o.outputData=e,r!==this.dataTask&&(o.data=e)}pa(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return Et(e)},t.prototype.getSourceManager=function(){return pa(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return pa(this).dataBeforeProcessed},t.prototype.getColorBy=function(){return this.get("colorBy")||"series"},t.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.formatTooltip=function(e,r,o){return eS({series:this,dataIndex:e,multipleSeries:r})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(gn.node&&(!e||!e.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,r,o){var i=this.ecModel,a=G0.prototype.getColorFromPalette.call(this,e,r,o);return a||(a=i.getColorFromPalette(e,r,o)),a},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,r){this._innerSelect(this.getData(r),e)},t.prototype.unselect=function(e,r){var o=this.option.selectedMap;if(o){var i=this.option.selectedMode,a=this.getData(r);if("series"===i||"all"===o)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var l=0;l<e.length;l++){var c=Fm(a,e[l]);o[c]=!1,this._selectedDataIndicesMap[c]=-1}}},t.prototype.toggleSelect=function(e,r){for(var o=[],i=0;i<e.length;i++)o[0]=e[i],this.isSelected(e[i],r)?this.unselect(o,r):this.select(o,r)},t.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,r=vn(e),o=[],i=0;i<r.length;i++){var a=e[r[i]];a>=0&&o.push(a)}return o},t.prototype.isSelected=function(e,r){var o=this.option.selectedMap;if(!o)return!1;var i=this.getData(r);return("all"===o||o[Fm(i,e)])&&!i.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[Gm])return!0;var e=this.option.universalTransition;return!!e&&(!0===e||e&&e.enabled)},t.prototype._innerSelect=function(e,r){var o,i,a=this.option,l=a.selectedMode,c=r.length;if(l&&c)if("series"===l)a.selectedMap="all";else if("multiple"===l){Ft(a.selectedMap)||(a.selectedMap={});for(var h=a.selectedMap,p=0;p<c;p++){var g=r[p];h[b=Fm(e,g)]=!0,this._selectedDataIndicesMap[b]=e.getRawIndex(g)}}else if("single"===l||!0===l){var y=r[c-1],b=Fm(e,y);a.selectedMap=((o={})[b]=!0,o),this._selectedDataIndicesMap=((i={})[b]=e.getRawIndex(y),i)}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var r=[];e.hasItemOption&&e.each(function(o){var i=e.getRawDataItem(o);i&&i.selected&&r.push(o)}),r.length>0&&this._innerSelect(e,r)}},t.registerClass=function(e){return wn.registerClass(e)},t.protoInitialize=((e=t.prototype).type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",void(e.visualDrawType="fill")),t;var e}(wn);function zh(n){var r,o,i,t=n.name;Hv(n)||(n.name=(o=(r=n.getRawData()).mapDimensionsAll("seriesName"),i=[],Z(o,function(a){var l=r.getDimensionInfo(a);l.displayName&&i.push(l.displayName)}),i.join(" ")||t))}function Ak(n){return n.model.getRawData().count()}function kk(n){var t=n.model;return t.setData(t.getRawData().cloneShallow()),tS}function tS(n,t){t.outputData&&n.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function Q0(n,t){Z(Vo(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(e){n.wrapMethod(e,_t(zE,t))})}function zE(n,t){var e=su(n);return e&&e.setOutputEnd((t||this).count()),t}function su(n){var t=(n.ecModel||{}).scheduler,e=t&&t.getPipeline(n.uid);if(e){var r=e.currentTask;if(r){var o=r.agentStubMap;o&&(r=o.get(n.uid))}return r}}ur(Pr,Bf),ur(Pr,G0),jv(Pr,wn);var Wr=function(){function n(){this.group=new on,this.uid=Mh("viewComponent")}return n.prototype.init=function(t,e){},n.prototype.render=function(t,e,r,o){},n.prototype.dispose=function(t,e){},n.prototype.updateView=function(t,e,r,o){},n.prototype.updateLayout=function(t,e,r,o){},n.prototype.updateVisual=function(t,e,r,o){},n.prototype.toggleBlurSeries=function(t,e,r){},n.prototype.eachRendered=function(t){var e=this.group;e&&e.traverse(t)},n}();function Vh(){var n=Gn();return function(t){var e=n(t),r=t.pipelineContext,o=!!e.large,i=!!e.progressiveRender,a=e.large=!(!r||!r.large),l=e.progressiveRender=!(!r||!r.progressiveRender);return!(o===a&&i===l)&&"reset"}}x_(Wr),jl(Wr);var Ik=Gn(),VE=Vh(),vr=function(){function n(){this.group=new on,this.uid=Mh("viewChart"),this.renderTask=zm({plan:rS,reset:ud}),this.renderTask.context={view:this}}return n.prototype.init=function(t,e){},n.prototype.render=function(t,e,r,o){},n.prototype.highlight=function(t,e,r,o){var i=t.getData(o&&o.dataType);i&&nS(i,o,"emphasis")},n.prototype.downplay=function(t,e,r,o){var i=t.getData(o&&o.dataType);i&&nS(i,o,"normal")},n.prototype.remove=function(t,e){this.group.removeAll()},n.prototype.dispose=function(t,e){},n.prototype.updateView=function(t,e,r,o){this.render(t,e,r,o)},n.prototype.updateLayout=function(t,e,r,o){this.render(t,e,r,o)},n.prototype.updateVisual=function(t,e,r,o){this.render(t,e,r,o)},n.prototype.eachRendered=function(t){Qu(this.group,t)},n.markUpdateMethod=function(t,e){Ik(t).updateMethod=e},n.protoInitialize=void(n.prototype.type="chart"),n}();function Gf(n,t,e){n&&cf(n)&&("emphasis"===t?Ku:Ql)(n,e)}function nS(n,t,e){var i,a,r=Yu(n,t),o=t&&null!=t.highlightKey?(null==(a=R_[i=t.highlightKey])&&L_<=32&&(a=R_[i]=L_++),a):null;null!=r?Z(Dr(r),function(i){Gf(n.getItemGraphicEl(i),e,o)}):n.eachItemGraphicEl(function(i){Gf(i,e,o)})}function rS(n){return VE(n.model)}function ud(n){var t=n.model,e=n.ecModel,r=n.api,o=n.payload,i=t.pipelineContext.progressiveRender,a=n.view,l=o&&Ik(o).updateMethod,c=i?"incrementalPrepareRender":l&&a[l]?l:"render";return"render"!==c&&a[c](t,e,r,o),cd[c]}x_(vr),jl(vr);var cd={incrementalPrepareRender:{progress:function(n,t){t.view.incrementalRender(n,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(n,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},Hm="\0__throttleOriginMethod",lu="\0__throttleRate",e1="\0__throttleType";function Wm(n,t,e){var r,o,i,a,l,c=0,h=0,p=null;function g(){h=(new Date).getTime(),p=null,n.apply(i,a||[])}t=t||0;var y=function(){for(var b=[],_=0;_<arguments.length;_++)b[_]=arguments[_];r=(new Date).getTime(),i=this,a=b;var w=l||t,S=l||e;l=null,o=r-(S?c:h)-w,clearTimeout(p),S?p=setTimeout(g,w):o>=0?g():p=setTimeout(g,-o),c=r};return y.clear=function(){p&&(clearTimeout(p),p=null)},y.debounceNextCall=function(b){l=b},y}function Fh(n,t,e,r){var o=n[t];if(o){var i=o[Hm]||o;if(o[lu]!==e||o[e1]!==r){if(null==e||!r)return n[t]=i;(o=n[t]=Wm(i,e,"debounce"===r))[Hm]=i,o[e1]=r,o[lu]=e}return o}}function Hf(n,t){var e=n[t];e&&e[Hm]&&(e.clear&&e.clear(),n[t]=e[Hm])}var t1=Gn(),oS={itemStyle:Xu(lw,!0),lineStyle:Xu(ko,!0)},FE={lineStyle:"stroke",itemStyle:"fill"};function Dk(n,t){return n.visualStyleMapper||oS[t]||(console.warn("Unknown style type '"+t+"'."),oS.itemStyle)}function Nk(n,t){return n.visualDrawType||FE[t]||(console.warn("Unknown style type '"+t+"'."),"fill")}var n1={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var e=n.getData(),r=n.visualStyleAccessPath||"itemStyle",o=n.getModel(r),i=Dk(n,r)(o),a=o.getShallow("decal");a&&(e.setVisual("decal",a),a.dirty=!0);var l=Nk(n,r),c=i[l],h=Se(c)?c:null;if(!i[l]||h||"auto"===i.fill||"auto"===i.stroke){var g=n.getColorFromPalette(n.name,null,t.getSeriesCount());i[l]||(i[l]=g,e.setVisual("colorFromPalette",!0)),i.fill="auto"===i.fill||Se(i.fill)?g:i.fill,i.stroke="auto"===i.stroke||Se(i.stroke)?g:i.stroke}if(e.setVisual("style",i),e.setVisual("drawType",l),!t.isSeriesFiltered(n)&&h)return e.setVisual("colorFromPalette",!1),{dataEach:function(y,b){var _=n.getDataParams(b),w=De({},i);w[l]=h(_),y.setItemVisual(b,"style",w)}}}},Gh=new gr,r1={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(!n.ignoreStyleOnData&&!t.isSeriesFiltered(n)){var e=n.getData(),r=n.visualStyleAccessPath||"itemStyle",o=Dk(n,r),i=e.getVisual("drawType");return{dataEach:e.hasItemOption?function(a,l){var c=a.getRawDataItem(l);if(c&&c[r]){Gh.option=c[r];var h=o(Gh);De(a.ensureUniqueItemVisual(l,"style"),h),Gh.option.decal&&(a.setItemVisual(l,"decal",Gh.option.decal),Gh.option.decal.dirty=!0),i in h&&a.setItemVisual(l,"colorFromPalette",!1)}}:null}}}},Ek={performRawSeries:!0,overallReset:function(n){var t=Et();n.eachSeries(function(e){var r=e.getColorBy();if(!e.isColorBySeries()){var o=e.type+"-"+r,i=t.get(o);i||t.set(o,i={}),t1(e).scope=i}}),n.eachSeries(function(e){if(!e.isColorBySeries()&&!n.isSeriesFiltered(e)){var r=e.getRawData(),o={},i=e.getData(),a=t1(e).scope,c=Nk(e,e.visualStyleAccessPath||"itemStyle");i.each(function(h){var p=i.getRawIndex(h);o[p]=h}),r.each(function(h){var p=o[h];if(i.getItemVisual(p,"colorFromPalette")){var g=i.ensureUniqueItemVisual(p,"style"),y=r.getName(h)||h+"",b=r.count();g[c]=e.getColorFromPalette(y,a,b)}})}})}},o1=Math.PI,iS=function(){function n(t,e,r,o){this._stageTaskMap=Et(),this.ecInstance=t,this.api=e,r=this._dataProcessorHandlers=r.slice(),o=this._visualHandlers=o.slice(),this._allHandlers=r.concat(o)}return n.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(r){var o=r.overallTask;o&&o.dirty()})},n.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var r=this._pipelineMap.get(t.__pipeline.id),o=r.context,i=!e&&r.progressiveEnabled&&(!o||o.progressiveRender)&&t.__idxInPipeline>r.blockIndex?r.step:null,a=o&&o.modDataCount;return{step:i,modBy:null!=a?Math.ceil(a/i):null,modDataCount:a}}},n.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},n.prototype.updateStreamModes=function(t,e){var r=this._pipelineMap.get(t.uid),o=t.getData().count(),i=r.progressiveEnabled&&e.incrementalPrepareRender&&o>=r.threshold,a=t.get("large")&&o>=t.get("largeThreshold"),l="mod"===t.get("progressiveChunkMode")?o:null;t.pipelineContext=r.context={progressiveRender:i,modDataCount:l,large:a}},n.prototype.restorePipelines=function(t){var e=this,r=e._pipelineMap=Et();t.eachSeries(function(o){var i=o.getProgressive(),a=o.uid;r.set(a,{id:a,head:null,tail:null,threshold:o.getProgressiveThreshold(),progressiveEnabled:i&&!(o.preventIncremental&&o.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),e._pipe(o,o.dataTask)})},n.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),r=this.api;Z(this._allHandlers,function(o){var i=t.get(o.uid)||t.set(o.uid,{});bn(!(o.reset&&o.overallReset),""),o.reset&&this._createSeriesStageTask(o,i,e,r),o.overallReset&&this._createOverallStageTask(o,i,e,r)},this)},n.prototype.prepareView=function(t,e,r,o){var i=t.renderTask,a=i.context;a.model=e,a.ecModel=r,a.api=o,i.__block=!t.incrementalPrepareRender,this._pipe(e,i)},n.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},n.prototype.performVisualTasks=function(t,e,r){this._performStageTasks(this._visualHandlers,t,e,r)},n.prototype._performStageTasks=function(t,e,r,o){o=o||{};var i=!1,a=this;function l(c,h){return c.setDirty&&(!c.dirtyMap||c.dirtyMap.get(h.__pipeline.id))}Z(t,function(c,h){if(!o.visualType||o.visualType===c.visualType){var p=a._stageTaskMap.get(c.uid),g=p.seriesTaskMap,y=p.overallTask;if(y){var b,_=y.agentStubMap;_.each(function(S){l(o,S)&&(S.dirty(),b=!0)}),b&&y.dirty(),a.updatePayload(y,r);var w=a.getPerformArgs(y,o.block);_.each(function(S){S.perform(w)}),y.perform(w)&&(i=!0)}else g&&g.each(function(S,M){l(o,S)&&S.dirty();var A=a.getPerformArgs(S,o.block);A.skip=!c.performRawSeries&&e.isSeriesFiltered(S.context.model),a.updatePayload(S,r),S.perform(A)&&(i=!0)})}}),this.unfinished=i||this.unfinished},n.prototype.performSeriesTasks=function(t){var e;t.eachSeries(function(r){e=r.dataTask.perform()||e}),this.unfinished=e||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})},n.prototype.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},n.prototype._createSeriesStageTask=function(t,e,r,o){var i=this,a=e.seriesTaskMap,l=e.seriesTaskMap=Et(),c=t.seriesType,h=t.getTargetSeries;function p(g){var y=g.uid,b=l.set(y,a&&a.get(y)||zm({plan:Pk,reset:Bk,count:sS}));b.context={model:g,ecModel:r,api:o,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:i},i._pipe(g,b)}t.createOnAllSeries?r.eachRawSeries(p):c?r.eachRawSeriesByType(c,p):h&&h(r,o).each(p)},n.prototype._createOverallStageTask=function(t,e,r,o){var i=this,a=e.overallTask=e.overallTask||zm({reset:Lk});a.context={ecModel:r,api:o,overallReset:t.overallReset,scheduler:i};var l=a.agentStubMap,c=a.agentStubMap=Et(),h=t.seriesType,p=t.getTargetSeries,g=!0,y=!1;function _(w){var S=w.uid,M=c.set(S,l&&l.get(S)||(y=!0,zm({reset:Rk,onDirty:aS})));M.context={model:w,overallProgress:g},M.agent=a,M.__block=g,i._pipe(w,M)}bn(!t.createOnAllSeries,""),h?r.eachRawSeriesByType(h,_):p?p(r,o).each(_):(g=!1,Z(r.getSeries(),_)),y&&a.dirty()},n.prototype._pipe=function(t,e){var o=this._pipelineMap.get(t.uid);!o.head&&(o.head=e),o.tail&&o.tail.pipe(e),o.tail=e,e.__idxInPipeline=o.count++,e.__pipeline=o},n.wrapStageHandler=function(t,e){return Se(t)&&(t={overallReset:t,seriesType:zk(t)}),t.uid=Mh("stageHandler"),e&&(t.visualType=e),t},n}();function Lk(n){n.overallReset(n.ecModel,n.api,n.payload)}function Rk(n){return n.overallProgress&&Ok}function Ok(){this.agent.dirty(),this.getDownstream().dirty()}function aS(){this.agent&&this.agent.dirty()}function Pk(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function Bk(n){n.useClearVisual&&n.data.clearAllVisual();var t=n.resetDefines=Dr(n.reset(n.model,n.ecModel,n.api,n.payload));return t.length>1?j(t,function(e,r){return Wf(r)}):Um}var Um=Wf(0);function Wf(n){return function(t,e){var r=e.data,o=e.resetDefines[n];if(o&&o.dataEach)for(var i=t.start;i<t.end;i++)o.dataEach(r,i);else o&&o.progress&&o.progress(t,r)}}function sS(n){return n.data.count()}function zk(n){jm=null;try{n(Uf,lS)}catch{}return jm}var jm,Uf={},lS={};function Vk(n,t){for(var e in t.prototype)n[e]=zr}Vk(Uf,W0),Vk(lS,Cw),Uf.eachSeriesByType=Uf.eachRawSeriesByType=function(n){jm=n},Uf.eachComponent=function(n){"series"===n.mainType&&n.subType&&(jm=n.subType)};var uS=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],i1={color:uS,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],uS]},Ei="#B9B8CE",a1="#100C2A",s1=function(){return{axisLine:{lineStyle:{color:Ei}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},cS=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],dS={darkMode:!0,color:cS,backgroundColor:a1,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Ei}},textStyle:{color:Ei},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Ei}},dataZoom:{borderColor:"#71708A",textStyle:{color:Ei},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Ei}},timeline:{lineStyle:{color:Ei},label:{color:Ei},controlStyle:{color:Ei,borderColor:Ei}},calendar:{itemStyle:{color:a1},dayLabel:{color:Ei},monthLabel:{color:Ei},yearLabel:{color:Ei}},timeAxis:s1(),logAxis:s1(),valueAxis:s1(),categoryAxis:s1(),line:{symbol:"circle"},graph:{color:cS},gauge:{title:{color:Ei},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Ei},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};dS.categoryAxis.splitLine.show=!1;var GE=function(){function n(){}return n.prototype.normalizeQuery=function(t){var e={},r={},o={};if(bt(t)){var i=Vs(t);e.mainType=i.main||null,e.subType=i.sub||null}else{var a=["Index","Name","Id"],l={name:1,dataIndex:1,dataType:1};Z(t,function(c,h){for(var p=!1,g=0;g<a.length;g++){var y=a[g],b=h.lastIndexOf(y);if(b>0&&b===h.length-y.length){var _=h.slice(0,b);"data"!==_&&(e.mainType=_,e[y.toLowerCase()]=c,p=!0)}}l.hasOwnProperty(h)&&(r[h]=c,p=!0),p||(o[h]=c)})}return{cptQuery:e,dataQuery:r,otherQuery:o}},n.prototype.filter=function(t,e){var r=this.eventInfo;if(!r)return!0;var o=r.targetEl,i=r.packedEvent,a=r.model,l=r.view;if(!a||!l)return!0;var c=e.cptQuery,h=e.dataQuery;return p(c,a,"mainType")&&p(c,a,"subType")&&p(c,a,"index","componentIndex")&&p(c,a,"name")&&p(c,a,"id")&&p(h,i,"name")&&p(h,i,"dataIndex")&&p(h,i,"dataType")&&(!l.filterForExposedEvent||l.filterForExposedEvent(t,e.otherQuery,o,i));function p(g,y,b,_){return null==g[b]||y[_||b]===g[b]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),l1=["symbol","symbolSize","symbolRotate","symbolOffset"],Fk=l1.concat(["symbolKeepAspect"]),Hh={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var e=n.getData();if(n.legendIcon&&e.setVisual("legendIcon",n.legendIcon),n.hasSymbolVisual){for(var r={},o={},i=!1,a=0;a<l1.length;a++){var l=l1[a],c=n.get(l);Se(c)?(i=!0,o[l]=c):r[l]=c}if(r.symbol=r.symbol||n.defaultSymbol,e.setVisual(De({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),!t.isSeriesFiltered(n)){var h=vn(o);return{dataEach:i?function(p,g){for(var y=n.getRawValue(g),b=n.getDataParams(g),_=0;_<h.length;_++){var w=h[_];p.setItemVisual(g,w,o[w](y,b))}}:null}}}}},HE={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(n.hasSymbolVisual&&!t.isSeriesFiltered(n))return{dataEach:n.getData().hasItemOption?function(e,r){for(var o=e.getItemModel(r),i=0;i<Fk.length;i++){var a=Fk[i],l=o.getShallow(a,!0);null!=l&&e.setItemVisual(r,a,l)}}:null}}};function dc(n,t,e){switch(e){case"color":return n.getItemVisual(t,"style")[n.getVisual("drawType")];case"opacity":return n.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(t,e)}}function jf(n,t){switch(t){case"color":return n.getVisual("style")[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(t)}}function hc(n,t,e,r){switch(e){case"color":n.ensureUniqueItemVisual(t,"style")[n.getVisual("drawType")]=r,n.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(t,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(t,e,r)}}function Wa(n,t){function e(r,o){var i=[];return r.eachComponent({mainType:"series",subType:n,query:o},function(a){i.push(a.seriesIndex)}),i}Z([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){t(r[0],function(o,i,a){o=De({},o),a.dispatchAction(De(o,{type:r[1],seriesIndex:e(i,o)}))})})}function Wh(n,t,e,r,o){var i=n+t;e.isSilent(i)||r.eachComponent({mainType:"series",subType:"pie"},function(a){for(var l=a.seriesIndex,c=a.option.selectedMap,h=o.selected,p=0;p<h.length;p++)if(h[p].seriesIndex===l){var g=a.getData(),y=Yu(g,o.fromActionPayload);e.trigger(i,{type:i,seriesId:a.id,name:Ee(y)?g.getName(y[0]):g.getName(y),selected:bt(c)?c:De({},c)})}})}function dd(n,t,e){for(var r;n&&(!t(n)||(r=n,!e));)n=n.__hostTarget||n.parent;return r}var Gk=Math.round(9*Math.random()),u1="function"==typeof Object.defineProperty,Hk=function(){function n(){this._id="__ec_inner_"+Gk++}return n.prototype.get=function(t){return this._guard(t)[this._id]},n.prototype.set=function(t,e){var r=this._guard(t);return u1?Object.defineProperty(r,this._id,{value:e,enumerable:!1,configurable:!0}):r[this._id]=e,this},n.prototype.delete=function(t){return!!this.has(t)&&(delete this._guard(t)[this._id],!0)},n.prototype.has=function(t){return!!this._guard(t)[this._id]},n.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},n}(),WE=Yn.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var e=t.cx,r=t.cy,o=t.width/2,i=t.height/2;n.moveTo(e,r-i),n.lineTo(e+o,r+i),n.lineTo(e-o,r+i),n.closePath()}}),c1=Yn.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var e=t.cx,r=t.cy,o=t.width/2,i=t.height/2;n.moveTo(e,r-i),n.lineTo(e+o,r),n.lineTo(e,r+i),n.lineTo(e-o,r),n.closePath()}}),hS=Yn.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var e=t.x,r=t.y,o=t.width/5*3,i=Math.max(o,t.height),a=o/2,l=a*a/(i-a),c=r-i+a+l,h=Math.asin(l/a),p=Math.cos(h)*a,g=Math.sin(h),y=Math.cos(h),b=.6*a,_=.7*a;n.moveTo(e-p,c+l),n.arc(e,c,a,Math.PI-h,2*Math.PI+h),n.bezierCurveTo(e+p-g*b,c+l+y*b,e,r-_,e,r),n.bezierCurveTo(e,r-_,e-p+g*b,c+l+y*b,e-p,c+l),n.closePath()}}),Wk=Yn.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var e=t.height,o=t.x,i=t.y,a=t.width/3*2;n.moveTo(o,i),n.lineTo(o+a,i+e),n.lineTo(o,i+e/4*3),n.lineTo(o-a,i+e),n.lineTo(o,i),n.closePath()}}),Uk={line:function(n,t,e,r,o){o.x1=n,o.y1=t+r/2,o.x2=n+e,o.y2=t+r/2},rect:function(n,t,e,r,o){o.x=n,o.y=t,o.width=e,o.height=r},roundRect:function(n,t,e,r,o){o.x=n,o.y=t,o.width=e,o.height=r,o.r=Math.min(e,r)/4},square:function(n,t,e,r,o){var i=Math.min(e,r);o.x=n,o.y=t,o.width=i,o.height=i},circle:function(n,t,e,r,o){o.cx=n+e/2,o.cy=t+r/2,o.r=Math.min(e,r)/2},diamond:function(n,t,e,r,o){o.cx=n+e/2,o.cy=t+r/2,o.width=e,o.height=r},pin:function(n,t,e,r,o){o.x=n+e/2,o.y=t+r/2,o.width=e,o.height=r},arrow:function(n,t,e,r,o){o.x=n+e/2,o.y=t+r/2,o.width=e,o.height=r},triangle:function(n,t,e,r,o){o.cx=n+e/2,o.cy=t+r/2,o.width=e,o.height=r}},Ym={};Z({line:Yo,rect:$n,roundRect:$n,square:$n,circle:da,diamond:c1,pin:hS,arrow:Wk,triangle:WE},function(n,t){Ym[t]=new n});var pS=Yn.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,t,e){var r=Ps(n,t,e),o=this.shape;return o&&"pin"===o.symbolType&&"inside"===t.position&&(r.y=e.y+.4*e.height),r},buildPath:function(n,t,e){var r=t.symbolType;if("none"!==r){var o=Ym[r];o||(o=Ym[r="rect"]),Uk[r](t.x,t.y,t.width,t.height,o.shape),o.buildPath(n,o.shape,e)}}});function jk(n,t){if("image"!==this.type){var e=this.style;this.__isEmptyBrush?(e.stroke=n,e.fill=t||"#fff",e.lineWidth=2):"line"===this.shape.symbolType?e.stroke=n:e.fill=n,this.markRedraw()}}function vo(n,t,e,r,o,i,a){var l,c=0===n.indexOf("empty");return c&&(n=n.substr(5,1).toLowerCase()+n.substr(6)),(l=0===n.indexOf("image://")?b0(n.slice(8),new Kt(t,e,r,o),a?"center":"cover"):0===n.indexOf("path://")?bm(n.slice(7),{},new Kt(t,e,r,o),a?"center":"cover"):new pS({shape:{symbolType:n,x:t,y:e,width:r,height:o}})).__isEmptyBrush=c,l.setColor=jk,i&&l.setColor(i),l}function uu(n){return Ee(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function cu(n,t){if(null!=n)return Ee(n)||(n=[n,n]),[Ct(n[0],t[0])||0,Ct(We(n[1],n[0]),t[1])||0]}function hd(n){return isFinite(n)}function d1(n,t,e){for(var r="radial"===t.type?(a=n,l=t,void 0,void 0,void 0,y=void 0,b=void 0,_=void 0,h=(c=e).width,p=c.height,g=Math.min(h,p),y=null==l.x?.5:l.x,b=null==l.y?.5:l.y,_=null==l.r?.5:l.r,l.global||(y=y*h+c.x,b=b*p+c.y,_*=g),y=hd(y)?y:.5,b=hd(b)?b:.5,_=_>=0&&hd(_)?_:.5,a.createRadialGradient(y,b,0,y,b,_)):function(a,l,c){var h=null==l.x?0:l.x,p=null==l.x2?1:l.x2,g=null==l.y?0:l.y,y=null==l.y2?0:l.y2;return l.global||(h=h*c.width+c.x,p=p*c.width+c.x,g=g*c.height+c.y,y=y*c.height+c.y),h=hd(h)?h:0,p=hd(p)?p:1,g=hd(g)?g:0,y=hd(y)?y:0,a.createLinearGradient(h,g,p,y)}(n,t,e),o=t.colorStops,i=0;i<o.length;i++)r.addColorStop(o[i].offset,o[i].color);var a,l,c,h,p,g,y,b,_;return r}function Yf(n){return parseInt(n,10)}function Uh(n,t,e){var r=["width","height"][t],o=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[r]&&"auto"!==e[r])return parseFloat(e[r]);var l=document.defaultView.getComputedStyle(n);return(n[o]||Yf(l[r])||Yf(n.style[r]))-(Yf(l[i])||0)-(Yf(l[a])||0)|0}function h1(n){var t,e,r=n.style,o=r.lineDash&&r.lineWidth>0&&(e=r.lineWidth,(t=r.lineDash)&&"solid"!==t&&e>0?"dashed"===t?[4*e,2*e]:"dotted"===t?[e]:dt(t)?[t]:Ee(t)?t:null:null),i=r.lineDashOffset;if(o){var a=r.strokeNoScale&&n.getLineScale?n.getLineScale():1;a&&1!==a&&(o=j(o,function(l){return l/a}),i/=a)}return[o,i]}var fS=new gs(!0);function Xm(n){var t=n.stroke;return!(null==t||"none"===t||!(n.lineWidth>0))}function Yk(n){return"string"==typeof n&&"none"!==n}function qm(n){var t=n.fill;return null!=t&&"none"!==t}function p1(n,t){if(null!=t.fillOpacity&&1!==t.fillOpacity){var e=n.globalAlpha;n.globalAlpha=t.fillOpacity*t.opacity,n.fill(),n.globalAlpha=e}else n.fill()}function gS(n,t){if(null!=t.strokeOpacity&&1!==t.strokeOpacity){var e=n.globalAlpha;n.globalAlpha=t.strokeOpacity*t.opacity,n.stroke(),n.globalAlpha=e}else n.stroke()}function f1(n,t,e){var r=Xv(t.image,t.__image,e);if(Jg(r)){var o=n.createPattern(r,t.repeat||"repeat");if("function"==typeof DOMMatrix&&o&&o.setTransform){var i=new DOMMatrix;i.translateSelf(t.x||0,t.y||0),i.rotateSelf(0,0,(t.rotation||0)*Ts),i.scaleSelf(t.scaleX||1,t.scaleY||1),o.setTransform(i)}return o}}var Xk=["shadowBlur","shadowOffsetX","shadowOffsetY"],g1=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function qk(n,t,e,r,o){var i=!1;if(!r&&t===(e=e||{}))return!1;if(r||t.opacity!==e.opacity){Li(n,o),i=!0;var a=Math.max(Math.min(t.opacity,1),0);n.globalAlpha=isNaN(a)?Fs.opacity:a}(r||t.blend!==e.blend)&&(i||(Li(n,o),i=!0),n.globalCompositeOperation=t.blend||Fs.blend);for(var l=0;l<Xk.length;l++){var c=Xk[l];(r||t[c]!==e[c])&&(i||(Li(n,o),i=!0),n[c]=n.dpr*(t[c]||0))}return(r||t.shadowColor!==e.shadowColor)&&(i||(Li(n,o),i=!0),n.shadowColor=t.shadowColor||Fs.shadowColor),i}function mS(n,t,e,r,o){var i=Xf(t,o.inHover),a=r?null:e&&Xf(e,o.inHover)||{};if(i===a)return!1;var l=qk(n,i,a,r,o);if((r||i.fill!==a.fill)&&(l||(Li(n,o),l=!0),Yk(i.fill)&&(n.fillStyle=i.fill)),(r||i.stroke!==a.stroke)&&(l||(Li(n,o),l=!0),Yk(i.stroke)&&(n.strokeStyle=i.stroke)),(r||i.opacity!==a.opacity)&&(l||(Li(n,o),l=!0),n.globalAlpha=null==i.opacity?1:i.opacity),t.hasStroke()){var c=i.lineWidth/(i.strokeNoScale&&t.getLineScale?t.getLineScale():1);n.lineWidth!==c&&(l||(Li(n,o),l=!0),n.lineWidth=c)}for(var h=0;h<g1.length;h++){var p=g1[h],g=p[0];(r||i[g]!==a[g])&&(l||(Li(n,o),l=!0),n[g]=i[g]||p[1])}return l}function m1(n,t){var e=t.transform,r=n.dpr||1;e?n.setTransform(r*e[0],r*e[1],r*e[2],r*e[3],r*e[4],r*e[5]):n.setTransform(r,0,0,r,0,0)}function Li(n,t){t.batchFill&&n.fill(),t.batchStroke&&n.stroke(),t.batchFill="",t.batchStroke=""}function Xf(n,t){return t&&n.__hoverStyle||n.style}function yS(n,t){pc(n,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function pc(n,t,e,r){var o=t.transform;if(!t.shouldBePainted(e.viewWidth,e.viewHeight,!1,!1))return t.__dirty&=-2,void(t.__isRendered=!1);var _,w,S,i=t.__clipPaths,a=e.prevElClipPaths,l=!1,c=!1;if(a&&!function(_,w){if(_===w||!_&&!w)return!1;if(!_||!w||_.length!==w.length)return!0;for(var S=0;S<_.length;S++)if(_[S]!==w[S])return!0;return!1}(i,a)||(a&&a.length&&(Li(n,e),n.restore(),c=l=!0,e.prevElClipPaths=null,e.allClipped=!1,e.prevEl=null),i&&i.length&&(Li(n,e),n.save(),function(_,w,S){for(var M=!1,A=0;A<_.length;A++){var I=_[A];M=M||I.isZeroArea(),m1(w,I),w.beginPath(),I.buildPath(w,I.shape),w.clip()}S.allClipped=M}(i,n,e),l=!0),e.prevElClipPaths=i),e.allClipped)t.__isRendered=!1;else{t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var h=e.prevEl;h||(c=l=!0);var p,g,y=t instanceof Yn&&t.autoBatch&&(w=qm(_=t.style),S=Xm(_),!(_.lineDash||!(+w^+S)||w&&"string"!=typeof _.fill||S&&"string"!=typeof _.stroke||_.strokePercent<1||_.strokeOpacity<1||_.fillOpacity<1));l||(g=h.transform,(p=o)&&g?p[0]!==g[0]||p[1]!==g[1]||p[2]!==g[2]||p[3]!==g[3]||p[4]!==g[4]||p[5]!==g[5]:p||g)?(Li(n,e),m1(n,t)):y||Li(n,e);var b=Xf(t,e.inHover);t instanceof Yn?(1!==e.lastDrawType&&(c=!0,e.lastDrawType=1),mS(n,t,h,c,e),y&&(e.batchFill||e.batchStroke)||n.beginPath(),function(_,w,S,M){var A,I=Xm(S),N=qm(S),L=S.strokePercent,R=L<1,O=!w.path;w.silent&&!R||!O||w.createPathProxy();var B=w.path||fS,G=w.__dirty;if(!M){var W=S.fill,Y=S.stroke,X=N&&!!W.colorStops,J=I&&!!Y.colorStops,ne=N&&!!W.image,oe=I&&!!Y.image,ie=void 0,se=void 0,le=void 0,pe=void 0,me=void 0;(X||J)&&(me=w.getBoundingRect()),X&&(ie=G?d1(_,W,me):w.__canvasFillGradient,w.__canvasFillGradient=ie),J&&(se=G?d1(_,Y,me):w.__canvasStrokeGradient,w.__canvasStrokeGradient=se),ne&&(le=G||!w.__canvasFillPattern?f1(_,W,w):w.__canvasFillPattern,w.__canvasFillPattern=le),oe&&(pe=G||!w.__canvasStrokePattern?f1(_,Y,w):w.__canvasStrokePattern,w.__canvasStrokePattern=le),X?_.fillStyle=ie:ne&&(le?_.fillStyle=le:N=!1),J?_.strokeStyle=se:oe&&(pe?_.strokeStyle=pe:I=!1)}var ve,He,nt=w.getGlobalScale();B.setScale(nt[0],nt[1],w.segmentIgnoreThreshold),_.setLineDash&&S.lineDash&&(ve=(A=h1(w))[0],He=A[1]);var Me=!0;(O||4&G)&&(B.setDPR(_.dpr),R?B.setContext(null):(B.setContext(_),Me=!1),B.reset(),w.buildPath(B,w.shape,M),B.toStatic(),w.pathUpdated()),Me&&B.rebuildPath(_,R?L:1),ve&&(_.setLineDash(ve),_.lineDashOffset=He),M||(S.strokeFirst?(I&&gS(_,S),N&&p1(_,S)):(N&&p1(_,S),I&&gS(_,S))),ve&&_.setLineDash([])}(n,t,b,y),y&&(e.batchFill=b.fill||"",e.batchStroke=b.stroke||"")):t instanceof Xi?(3!==e.lastDrawType&&(c=!0,e.lastDrawType=3),mS(n,t,h,c,e),function(_,w,S){var M,A=S.text;if(null!=A&&(A+=""),A){_.font=S.font||an,_.textAlign=S.textAlign,_.textBaseline=S.textBaseline;var I=void 0,N=void 0;_.setLineDash&&S.lineDash&&(I=(M=h1(w))[0],N=M[1]),I&&(_.setLineDash(I),_.lineDashOffset=N),S.strokeFirst?(Xm(S)&&_.strokeText(A,S.x,S.y),qm(S)&&_.fillText(A,S.x,S.y)):(qm(S)&&_.fillText(A,S.x,S.y),Xm(S)&&_.strokeText(A,S.x,S.y)),I&&_.setLineDash([])}}(n,t,b)):t instanceof jo?(2!==e.lastDrawType&&(c=!0,e.lastDrawType=2),function(_,w,S,M,A){qk(_,Xf(w,A.inHover),S&&Xf(S,A.inHover),M,A)}(n,t,h,c,e),function(_,w,S){var M=w.__image=Xv(S.image,w.__image,w,w.onload);if(M&&Jg(M)){var A=S.x||0,I=S.y||0,N=w.getWidth(),L=w.getHeight(),R=M.width/M.height;if(null==N&&null!=L?N=L*R:null==L&&null!=N?L=N/R:null==N&&null==L&&(N=M.width,L=M.height),S.sWidth&&S.sHeight){var O=S.sx||0,B=S.sy||0;_.drawImage(M,O,B,S.sWidth,S.sHeight,A,I,N,L)}else if(S.sx&&S.sy){var G=N-(O=S.sx),W=L-(B=S.sy);_.drawImage(M,O,B,G,W,A,I,N,L)}else _.drawImage(M,A,I,N,L)}}(n,t,b)):t.getTemporalDisplayables&&(4!==e.lastDrawType&&(c=!0,e.lastDrawType=4),function(_,w,S){var M=w.getDisplayables(),A=w.getTemporalDisplayables();_.save();var I,N,L={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:S.viewWidth,viewHeight:S.viewHeight,inHover:S.inHover};for(I=w.getCursor(),N=M.length;I<N;I++)(B=M[I]).beforeBrush&&B.beforeBrush(),B.innerBeforeBrush(),pc(_,B,L,I===N-1),B.innerAfterBrush(),B.afterBrush&&B.afterBrush(),L.prevEl=B;for(var R=0,O=A.length;R<O;R++){var B;(B=A[R]).beforeBrush&&B.beforeBrush(),B.innerBeforeBrush(),pc(_,B,L,R===O-1),B.innerAfterBrush(),B.afterBrush&&B.afterBrush(),L.prevEl=B}w.clearTemporalDisplayables(),w.notClear=!0,_.restore()}(n,t,e)),y&&r&&Li(n,e),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),e.prevEl=t,t.__dirty=0,t.__isRendered=!0}}var fc=new Hk,Zk=new Vl(100),$k=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function pd(n,t){if("none"===n)return null;var e=t.getDevicePixelRatio(),r=t.getZr(),o="svg"===r.painter.type;n.dirty&&fc.delete(n);var i=fc.get(n);if(i)return i;var a=Pe(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===a.backgroundColor&&(a.backgroundColor=null);var l={repeat:"repeat"};return function(c){for(var h,p=[e],g=!0,y=0;y<$k.length;++y){var b=a[$k[y]];if(null!=b&&!Ee(b)&&!bt(b)&&!dt(b)&&"boolean"!=typeof b){g=!1;break}p.push(b)}if(g){h=p.join(",")+(o?"-svg":"");var _=Zk.get(h);_&&(o?c.svgElement=_:c.image=_)}var w,S=bS(a.dashArrayX),M=function(G){if(!G||"object"==typeof G&&0===G.length)return[0,0];if(dt(G)){var W=Math.ceil(G);return[W,W]}var Y=j(G,function(X){return Math.ceil(X)});return G.length%2?Y.concat(Y):Y}(a.dashArrayY),A=vS(a.symbol),I=j(S,function(G){return xS(G)}),N=xS(M),L=!o&&Tn.createCanvas(),R=o&&{tag:"g",attrs:{},key:"dcl",children:[]},O=function(){for(var G=1,W=0,Y=I.length;W<Y;++W)G=Fv(G,I[W]);var X=1;for(W=0,Y=A.length;W<Y;++W)X=Fv(X,A[W].length);G*=X;var J=N*I.length*A.length;return{width:Math.max(1,Math.min(G,a.maxTileWidth)),height:Math.max(1,Math.min(J,a.maxTileHeight))}}();L&&(L.width=O.width*e,L.height=O.height*e,w=L.getContext("2d")),function(){w&&(w.clearRect(0,0,L.width,L.height),a.backgroundColor&&(w.fillStyle=a.backgroundColor,w.fillRect(0,0,L.width,L.height)));for(var G=0,W=0;W<M.length;++W)G+=M[W];if(!(G<=0))for(var Y=-N,X=0,J=0,ne=0;Y<O.height;){if(X%2==0){for(var oe=J/2%A.length,ie=0,se=0,le=0;ie<2*O.width;){var pe=0;for(W=0;W<S[ne].length;++W)pe+=S[ne][W];if(pe<=0)break;if(se%2==0){var me=.5*(1-a.symbolSize);tt(ie+S[ne][se]*me,Y+M[X]*me,S[ne][se]*a.symbolSize,M[X]*a.symbolSize,A[oe][le/2%A[oe].length])}ie+=S[ne][se],++le,++se===S[ne].length&&(se=0)}++ne===S.length&&(ne=0)}Y+=M[X],++J,++X===M.length&&(X=0)}function tt(ut,pt,St,Ze,yt){var Vt=o?1:e,mn=vo(yt,ut*Vt,pt*Vt,St*Vt,Ze*Vt,a.color,a.symbolKeepAspect);if(o){var Dn=r.painter.renderOneToVNode(mn);Dn&&R.children.push(Dn)}else yS(w,mn)}}(),g&&Zk.put(h,L||R),c.image=L,c.svgElement=R,c.svgWidth=O.width,c.svgHeight=O.height}(l),l.rotation=a.rotation,l.scaleX=l.scaleY=o?1:1/e,fc.set(n,l),n.dirty=!1,l}function vS(n){if(!n||0===n.length)return[["rect"]];if(bt(n))return[[n]];for(var t=!0,e=0;e<n.length;++e)if(!bt(n[e])){t=!1;break}if(t)return vS([n]);var r=[];for(e=0;e<n.length;++e)bt(n[e])?r.push([n[e]]):r.push(n[e]);return r}function bS(n){if(!n||0===n.length)return[[0,0]];if(dt(n))return[[o=Math.ceil(n),o]];for(var t=!0,e=0;e<n.length;++e)if(!dt(n[e])){t=!1;break}if(t)return bS([n]);var r=[];for(e=0;e<n.length;++e)if(dt(n[e])){var o=Math.ceil(n[e]);r.push([o,o])}else(o=j(n[e],function(i){return Math.ceil(i)})).length%2==1?r.push(o.concat(o)):r.push(o);return r}function xS(n){for(var t=0,e=0;e<n.length;++e)t+=n[e];return n.length%2==1?2*t:t}var $s=new xn,y1={};function _S(n){return y1[n]}var b1={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},fi="__flagInMainProcess",Qi="__pendingUpdate",Zm="__needsUpdateStatus",Kk=/^[a-zA-Z0-9_]+$/,wS="__connectUpdateStatus";function x1(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!this.isDisposed())return Jk(this,n,t)}}function SS(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jk(this,n,t)}}function Jk(n,t,e){return e[0]=e[0]&&e[0].toLowerCase(),xn.prototype[t].apply(n,e)}var qf,$m,_1,yl,Km,w1,Jm,Yh,Zf,S1,Qm,C1,vl,$f,Kf,CS,Ua,M1,T1=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t}(xn),MS=T1.prototype;MS.on=SS("on"),MS.off=SS("off");var ey=function(n){function t(e,r,o){var i=n.call(this,new GE)||this;i._chartsViews=[],i._chartsMap={},i._componentsViews=[],i._componentsMap={},i._pendingActions=[],o=o||{},bt(r)&&(r=AS[r]),i._dom=e,o.ssr&&Ov(function(y){var b=cn(y),_=b.dataIndex;if(null!=_){var w=Et();return w.set("series_index",b.seriesIndex),w.set("data_index",_),b.ssrType&&w.set("ssr_type",b.ssrType),w}});var h=i._zr=i_(e,{renderer:o.renderer||"canvas",devicePixelRatio:o.devicePixelRatio,width:o.width,height:o.height,ssr:o.ssr,useDirtyRect:We(o.useDirtyRect,!1),useCoarsePointer:We(o.useCoarsePointer,"auto"),pointerSize:o.pointerSize});i._ssr=o.ssr,i._throttledZrFlush=Wm(Fe(h.flush,h),17),(r=jt(r))&&Y0(r,!0),i._theme=r,i._locale=function(y){if(bt(y)){var b=Cm[y.toUpperCase()]||{};return y===Cf||y===Xs?jt(b):Ve(jt(b),jt(Cm[Mf]),!1)}return Ve(jt(y),jt(Cm[Mf]),!1)}(o.locale||Fa),i._coordSysMgr=new id;var p=i._api=Kf(i);function g(y,b){return y.__prio-b.__prio}return uo(ny,g),uo(A1,g),i._scheduler=new iS(i,p,A1,ny),i._messageCenter=new T1,i._initEvents(),i.resize=Fe(i.resize,i),h.animation.on("frame",i._onframe,i),S1(h,i),Qm(h,i),Zo(i),i}return Ce(t,n),t.prototype._onframe=function(){if(!this._disposed){M1(this);var e=this._scheduler;if(this[Qi]){var r=this[Qi].silent;this[fi]=!0;try{qf(this),yl.update.call(this,null,this[Qi].updateParams)}catch(c){throw this[fi]=!1,this[Qi]=null,c}this._zr.flush(),this[fi]=!1,this[Qi]=null,Yh.call(this,r),Zf.call(this,r)}else if(e.unfinished){var o=1,i=this._model,a=this._api;e.unfinished=!1;do{var l=+new Date;e.performSeriesTasks(i),e.performDataProcessorTasks(i),w1(this,i),e.performVisualTasks(i),$f(this,this._model,a,"remain",{}),o-=+new Date-l}while(o>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,r,o){if(!this[fi])if(this._disposed);else{var i,a,l;if(Ft(r)&&(o=r.lazyUpdate,i=r.silent,a=r.replaceMerge,l=r.transition,r=r.notMerge),this[fi]=!0,!this._model||r){var c=new QA(this._api),h=this._theme,p=this._model=new W0;p.scheduler=this._scheduler,p.ssr=this._ssr,p.init(null,null,null,h,this._locale,c)}this._model.setOption(e,{replaceMerge:a},k1);var g={seriesTransition:l,optionChanged:!0};if(o)this[Qi]={silent:i,updateParams:g},this[fi]=!1,this.getZr().wakeUp();else{try{qf(this),yl.update.call(this,null,g)}catch(y){throw this[Qi]=null,this[fi]=!1,y}this._ssr||this._zr.flush(),this[Qi]=null,this[fi]=!1,Yh.call(this,i),Zf.call(this,i)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||gn.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){return this._zr.painter.getRenderedCanvas({backgroundColor:(e=e||{}).backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){return this._zr.painter.renderToString({useViewBox:(e=e||{}).useViewBox})},t.prototype.getSvgDataURL=function(){if(gn.svgSupported){var e=this._zr;return Z(e.storage.getDisplayList(),function(r){r.stopAnimation(null,!0)}),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(!this._disposed){var r=(e=e||{}).excludeComponents,o=this._model,i=[],a=this;Z(r,function(c){o.eachComponent({mainType:c},function(h){var p=a._componentsMap[h.__viewId];p.group.ignore||(i.push(p),p.group.ignore=!0)})});var l="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Z(i,function(c){c.group.ignore=!1}),l}},t.prototype.getConnectedDataURL=function(e){if(!this._disposed){var r="svg"===e.type,o=this.group,i=Math.min,a=Math.max,l=1/0;if(ry[o]){var c=l,h=l,p=-1/0,g=-1/0,y=[],b=e&&e.pixelRatio||this.getDevicePixelRatio();Z(fd,function(I,N){if(I.group===o){var L=r?I.getZr().painter.getSvgDom().innerHTML:I.renderToCanvas(jt(e)),R=I.getDom().getBoundingClientRect();c=i(R.left,c),h=i(R.top,h),p=a(R.right,p),g=a(R.bottom,g),y.push({dom:L,left:R.left,top:R.top})}});var _=(p*=b)-(c*=b),w=(g*=b)-(h*=b),S=Tn.createCanvas(),M=i_(S,{renderer:r?"svg":"canvas"});if(M.resize({width:_,height:w}),r){var A="";return Z(y,function(I){A+='<g transform="translate('+(I.left-c)+","+(I.top-h)+')">'+I.dom+"</g>"}),M.painter.getSvgRoot().innerHTML=A,e.connectedBackgroundColor&&M.painter.setBackgroundColor(e.connectedBackgroundColor),M.refreshImmediately(),M.painter.toDataURL()}return e.connectedBackgroundColor&&M.add(new $n({shape:{x:0,y:0,width:_,height:w},style:{fill:e.connectedBackgroundColor}})),Z(y,function(I){var N=new jo({style:{x:I.left*b-c,y:I.top*b-h,image:I.dom}});M.add(N)}),M.refreshImmediately(),S.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},t.prototype.convertToPixel=function(e,r){return Km(this,"convertToPixel",e,r)},t.prototype.convertFromPixel=function(e,r){return Km(this,"convertFromPixel",e,r)},t.prototype.containPixel=function(e,r){var o;if(!this._disposed)return Z(Zg(this._model,e),function(i,a){a.indexOf("Models")>=0&&Z(i,function(l){var c=l.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(r);else if("seriesModels"===a){var h=this._chartsMap[l.__viewId];h&&h.containPoint&&(o=o||h.containPoint(r,l))}},this)},this),!!o},t.prototype.getVisual=function(e,r){var o=Zg(this._model,e,{defaultMainType:"series"}),a=o.seriesModel.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?a.indexOfRawIndex(o.dataIndex):null;return null!=l?dc(a,l,r):jf(a,r)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var r,o,i=this;Z(Qk,function(a){var l=function(c){var h,p=i.getModel(),g=c.target;if("globalout"===a?h={}:g&&dd(g,function(M){var A=cn(M);if(A&&null!=A.dataIndex){var I=A.dataModel||p.getSeriesByIndex(A.seriesIndex);return h=I&&I.getDataParams(A.dataIndex,A.dataType,g)||{},!0}if(A.eventData)return h=De({},A.eventData),!0},!0),h){var b=h.componentType,_=h.componentIndex;"markLine"!==b&&"markPoint"!==b&&"markArea"!==b||(b="series",_=h.seriesIndex);var w=b&&null!=_&&p.getComponent(b,_),S=w&&i["series"===w.mainType?"_chartsMap":"_componentsMap"][w.__viewId];h.event=c,h.type=a,i._$eventProcessor.eventInfo={targetEl:g,packedEvent:h,model:w,view:S},i.trigger(a,h)}};l.zrEventfulCallAtLast=!0,i._zr.on(a,l,i)}),Z(gc,function(a,l){i._messageCenter.on(l,function(c){this.trigger(l,c)},i)}),Z(["selectchanged"],function(a){i._messageCenter.on(a,function(l){this.trigger(a,l)},i)}),r=this,o=this._api,this._messageCenter.on("selectchanged",function(a){var l=o.getModel();a.isFromClick?(Wh("map","selectchanged",r,l,a),Wh("pie","selectchanged",r,l,a)):"select"===a.fromAction?(Wh("map","selected",r,l,a),Wh("pie","selected",r,l,a)):"unselect"===a.fromAction&&(Wh("map","unselected",r,l,a),Wh("pie","unselected",r,l,a))})},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){this._disposed||this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed);else{this._disposed=!0,this.getDom()&&pA(this.getDom(),D1,"");var e=this,r=e._api,o=e._model;Z(e._componentsViews,function(i){i.dispose(o,r)}),Z(e._chartsViews,function(i){i.dispose(o,r)}),e._zr.dispose(),e._dom=e._model=e._chartsMap=e._componentsMap=e._chartsViews=e._componentsViews=e._scheduler=e._api=e._zr=e._throttledZrFlush=e._theme=e._coordSysMgr=e._messageCenter=null,delete fd[e.id]}},t.prototype.resize=function(e){if(!this[fi])if(this._disposed);else{this._zr.resize(e);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),r){var o=r.resetOption("media"),i=e&&e.silent;this[Qi]&&(null==i&&(i=this[Qi].silent),o=!0,this[Qi]=null),this[fi]=!0;try{o&&qf(this),yl.update.call(this,{type:"resize",animation:De({duration:0},e&&e.animation)})}catch(a){throw this[fi]=!1,a}this[fi]=!1,Yh.call(this,i),Zf.call(this,i)}}},t.prototype.showLoading=function(e,r){if(this._disposed);else if(Ft(e)&&(r=e,e=""),e=e||"default",this.hideLoading(),I1[e]){var o=I1[e](this._api,r),i=this._zr;this._loadingFX=o,i.add(o)}},t.prototype.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},t.prototype.makeActionFromEvent=function(e){var r=De({},e);return r.type=gc[e.type],r},t.prototype.dispatchAction=function(e,r){if(this._disposed);else if(Ft(r)||(r={silent:!!r}),ty[e.type]&&this._model)if(this[fi])this._pendingActions.push(e);else{var o=r.silent;Jm.call(this,e,o);var i=r.flush;i?this._zr.flush():!1!==i&&gn.browser.weChat&&this._throttledZrFlush(),Yh.call(this,o),Zf.call(this,o)}},t.prototype.updateLabelLayout=function(){$s.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed);else{var r=e.seriesIndex;this.getModel().getSeriesByIndex(r).appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},t.internalField=function(){function e(c){c.clearColorPalette(),c.eachSeries(function(h){h.clearColorPalette()})}function r(c){for(var h=[],p=c.currentStates,g=0;g<p.length;g++){var y=p[g];"emphasis"!==y&&"blur"!==y&&"select"!==y&&h.push(y)}c.selected&&c.states.select&&h.push("select"),2===c.hoverState&&c.states.emphasis?h.push("emphasis"):1===c.hoverState&&c.states.blur&&h.push("blur"),c.useStates(h)}function o(c,h){if(!c.preventAutoZ){var p=c.get("z")||0,g=c.get("zlevel")||0;h.eachRendered(function(y){return i(y,p,g,-1/0),!0})}}function i(c,h,p,g){var y=c.getTextContent(),b=c.getTextGuideLine();if(c.isGroup)for(var _=c.childrenRef(),w=0;w<_.length;w++)g=Math.max(i(_[w],h,p,g),g);else c.z=h,c.zlevel=p,g=Math.max(c.z2,g);if(y&&(y.z=h,y.zlevel=p,isFinite(g)&&(y.z2=g+2)),b){var S=c.textGuideLineConfig;b.z=h,b.zlevel=p,isFinite(g)&&(b.z2=g+(S&&S.showAbove?1:-1))}return g}function a(c,h){h.eachRendered(function(p){if(!yf(p)){var g=p.getTextContent(),y=p.getTextGuideLine();p.stateTransition&&(p.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),y&&y.stateTransition&&(y.stateTransition=null),p.hasState()?(p.prevStates=p.currentStates,p.clearStates()):p.prevStates&&(p.prevStates=null)}})}function l(c,h){var p=c.getModel("stateAnimation"),g=c.isAnimationEnabled(),y=p.get("duration"),b=y>0?{duration:y,delay:p.get("delay"),easing:p.get("easing")}:null;h.eachRendered(function(_){if(_.states&&_.states.emphasis){if(yf(_))return;if(_ instanceof Yn&&function(A){var I=O_(A);I.normalFill=A.style.fill,I.normalStroke=A.style.stroke;var N=A.states.select||{};I.selectFill=N.style&&N.style.fill||null,I.selectStroke=N.style&&N.style.stroke||null}(_),_.__dirty){var w=_.prevStates;w&&_.useStates(w)}if(g){_.stateTransition=b;var S=_.getTextContent(),M=_.getTextGuideLine();S&&(S.stateTransition=b),M&&(M.stateTransition=b)}_.__dirty&&r(_)}})}qf=function(c){var h=c._scheduler;h.restorePipelines(c._model),h.prepareStageTasks(),$m(c,!0),$m(c,!1),h.plan()},$m=function(c,h){for(var p=c._model,g=c._scheduler,y=h?c._componentsViews:c._chartsViews,b=h?c._componentsMap:c._chartsMap,_=c._zr,w=c._api,S=0;S<y.length;S++)y[S].__alive=!1;function M(I){var N=I.__requireNewView;I.__requireNewView=!1;var L="_ec_"+I.id+"_"+I.type,R=!N&&b[L];if(!R){var O=Vs(I.type);(R=new(h?Wr.getClass(O.main,O.sub):vr.getClass(O.sub))).init(p,w),b[L]=R,y.push(R),_.add(R.group)}I.__viewId=R.__id=L,R.__alive=!0,R.__model=I,R.group.__ecComponentInfo={mainType:I.mainType,index:I.componentIndex},!h&&g.prepareView(R,I,p,w)}for(h?p.eachComponent(function(I,N){"series"!==I&&M(N)}):p.eachSeries(M),S=0;S<y.length;){var A=y[S];A.__alive?S++:(!h&&A.renderTask.dispose(),_.remove(A.group),A.dispose(p,w),y.splice(S,1),b[A.__id]===A&&delete b[A.__id],A.__id=A.group.__ecComponentInfo=null)}},_1=function(c,h,p,g,y){var b=c._model;if(b.setUpdatePayload(p),g){var _={};_[g+"Id"]=p[g+"Id"],_[g+"Index"]=p[g+"Index"],_[g+"Name"]=p[g+"Name"];var w={mainType:g,query:_};y&&(w.subType=y);var S,M=p.excludeSeriesId;null!=M&&(S=Et(),Z(Dr(M),function(I){var N=Po(I,null);null!=N&&S.set(N,!0)})),b&&b.eachComponent(w,function(I){if(!S||null==S.get(I.id))if(j_(p))if(I instanceof Pr)p.type!==Zc||p.notBlur||I.get(["emphasis","disabled"])||function(O,B,G){var W=O.seriesIndex,Y=O.getData(B.dataType);if(Y){var X=Yu(Y,B);X=(Ee(X)?X[0]:X)||0;var J=Y.getItemGraphicEl(X);if(!J)for(var ne=Y.count(),oe=0;!J&&oe<ne;)J=Y.getItemGraphicEl(oe++);if(J){var ie=cn(J);G_(W,ie.focus,ie.blurScope,G)}else{var se=O.get(["emphasis","focus"]),le=O.get(["emphasis","blurScope"]);null!=se&&G_(W,se,le,G)}}}(I,p,c._api);else{var N=u0(I.mainType,I.componentIndex,p.name,c._api),R=N.dispatchers;p.type===Zc&&N.focusSelf&&!p.notBlur&&H_(I.mainType,I.componentIndex,c._api),R&&Z(R,function(O){p.type===Zc?Ku(O):Ql(O)})}else U_(p)&&I instanceof Pr&&(function(O,B,G){if(U_(B)){var W=B.dataType,Y=Yu(O.getData(W),B);Ee(Y)||(Y=[Y]),O[B.type===sf?"toggleSelect":B.type===af?"select":"unselect"](Y,W)}}(I,p),AA(I),Ua(c))},c),b&&b.eachComponent(w,function(I){S&&null!=S.get(I.id)||A(c["series"===g?"_chartsMap":"_componentsMap"][I.__viewId])},c)}else Z([].concat(c._componentsViews).concat(c._chartsViews),A);function A(I){I&&I.__alive&&I[h]&&I[h](I.__model,b,c._api,p)}},yl={prepareAndUpdate:function(c){qf(this),yl.update.call(this,c,{optionChanged:null!=c.newOption})},update:function(c,h){var p=this._model,g=this._api,y=this._zr,b=this._coordSysMgr,_=this._scheduler;if(p){p.setUpdatePayload(c),_.restoreData(p,c),_.performSeriesTasks(p),b.create(p,g),_.performDataProcessorTasks(p,c),w1(this,p),b.update(p,g),e(p),_.performVisualTasks(p,c),C1(this,p,g,c,h);var w=p.get("backgroundColor")||"transparent",S=p.get("darkMode");y.setBackgroundColor(w),null!=S&&"auto"!==S&&y.setDarkMode(S),$s.trigger("afterupdate",p,g)}},updateTransform:function(c){var h=this,p=this._model,g=this._api;if(p){p.setUpdatePayload(c);var y=[];p.eachComponent(function(_,w){if("series"!==_){var S=h.getViewOfComponentModel(w);if(S&&S.__alive)if(S.updateTransform){var M=S.updateTransform(w,p,g,c);M&&M.update&&y.push(S)}else y.push(S)}});var b=Et();p.eachSeries(function(_){var w=h._chartsMap[_.__viewId];if(w.updateTransform){var S=w.updateTransform(_,p,g,c);S&&S.update&&b.set(_.uid,1)}else b.set(_.uid,1)}),e(p),this._scheduler.performVisualTasks(p,c,{setDirty:!0,dirtyMap:b}),$f(this,p,g,c,{},b),$s.trigger("afterupdate",p,g)}},updateView:function(c){var h=this._model;h&&(h.setUpdatePayload(c),vr.markUpdateMethod(c,"updateView"),e(h),this._scheduler.performVisualTasks(h,c,{setDirty:!0}),C1(this,h,this._api,c,{}),$s.trigger("afterupdate",h,this._api))},updateVisual:function(c){var h=this,p=this._model;p&&(p.setUpdatePayload(c),p.eachSeries(function(g){g.getData().clearAllVisual()}),vr.markUpdateMethod(c,"updateVisual"),e(p),this._scheduler.performVisualTasks(p,c,{visualType:"visual",setDirty:!0}),p.eachComponent(function(g,y){if("series"!==g){var b=h.getViewOfComponentModel(y);b&&b.__alive&&b.updateVisual(y,p,h._api,c)}}),p.eachSeries(function(g){h._chartsMap[g.__viewId].updateVisual(g,p,h._api,c)}),$s.trigger("afterupdate",p,this._api))},updateLayout:function(c){yl.update.call(this,c)}},Km=function(c,h,p,g){if(c._disposed);else for(var y,b=c._model,_=c._coordSysMgr.getCoordinateSystems(),w=Zg(b,p),S=0;S<_.length;S++){var M=_[S];if(M[h]&&null!=(y=M[h](b,w,g)))return y}},w1=function(c,h){var p=c._chartsMap,g=c._scheduler;h.eachSeries(function(y){g.updateStreamModes(y,p[y.__viewId])})},Jm=function(c,h){var p=this,g=this.getModel(),y=c.type,b=c.escapeConnect,_=ty[y],w=_.actionInfo,S=(w.update||"update").split(":"),M=S.pop(),A=null!=S[0]&&Vs(S[0]);this[fi]=!0;var I=[c],N=!1;c.batch&&(N=!0,I=j(c.batch,function(Y){return(Y=Pe(De({},Y),c)).batch=null,Y}));var L,R=[],O=U_(c),B=j_(c);if(B&&F_(this._api),Z(I,function(Y){if((L=(L=_.action(Y,p._model,p._api))||De({},Y)).type=w.event||L.type,R.push(L),B){var X=Wv(c),ne=X.mainTypeSpecified?X.queryOptionMap.keys()[0]:"series";_1(p,M,Y,ne),Ua(p)}else O?(_1(p,M,Y,"series"),Ua(p)):A&&_1(p,M,Y,A.main,A.sub)}),"none"!==M&&!B&&!O&&!A)try{this[Qi]?(qf(this),yl.update.call(this,c),this[Qi]=null):yl[M].call(this,c)}catch(Y){throw this[fi]=!1,Y}if(L=N?{type:w.event||y,escapeConnect:b,batch:R}:R[0],this[fi]=!1,!h){var G=this._messageCenter;if(G.trigger(L.type,L),O){var W={type:"selectchanged",escapeConnect:b,selected:di(g),isFromClick:c.isFromClick||!1,fromAction:c.type,fromActionPayload:c};G.trigger(W.type,W)}}},Yh=function(c){for(var h=this._pendingActions;h.length;){var p=h.shift();Jm.call(this,p,c)}},Zf=function(c){!c&&this.trigger("updated")},S1=function(c,h){c.on("rendered",function(p){h.trigger("rendered",p),!c.animation.isFinished()||h[Qi]||h._scheduler.unfinished||h._pendingActions.length||h.trigger("finished")})},Qm=function(c,h){c.on("mouseover",function(p){var y,b,_,w,S,M,g=dd(p.target,cf);g&&(b=p,_=h._api,(M=(S=u0((w=cn(y=g)).componentMainType,w.componentIndex,w.componentHighDownName,_)).dispatchers)?(S.focusSelf&&H_(w.componentMainType,w.componentIndex,_),Z(M,function(I){return l0(I,b)})):(G_(w.seriesIndex,w.focus,w.blurScope,_),"self"===w.focus&&H_(w.componentMainType,w.componentIndex,_),l0(y,b)),Ua(h))}).on("mouseout",function(p){var g=dd(p.target,cf);g&&(function(y,b,_){F_(_);var w=cn(y),S=u0(w.componentMainType,w.componentIndex,w.componentHighDownName,_).dispatchers;S?Z(S,function(M){return CA(M,b)}):CA(y,b)}(g,p,h._api),Ua(h))}).on("click",function(p){var g=dd(p.target,function(_){return null!=cn(_).dataIndex},!0);if(g){var y=g.selected?"unselect":"select",b=cn(g);h._api.dispatchAction({type:y,dataType:b.dataType,dataIndexInside:b.dataIndex,seriesIndex:b.seriesIndex,isFromClick:!0})}})},C1=function(c,h,p,g,y){(function(b){var _=[],w=[],S=!1;if(b.eachComponent(function(N,L){var R=L.get("zlevel")||0,O=L.get("z")||0,B=L.getZLevelKey();S=S||!!B,("series"===N?w:_).push({zlevel:R,z:O,idx:L.componentIndex,type:N,key:B})}),S){var M,A,I=_.concat(w);uo(I,function(N,L){return N.zlevel===L.zlevel?N.z-L.z:N.zlevel-L.zlevel}),Z(I,function(N){var L=b.getComponent(N.type,N.idx),R=N.zlevel,O=N.key;null!=M&&(R=Math.max(M,R)),O?(R===M&&O!==A&&R++,A=O):A&&(R===M&&R++,A=""),M=R,L.setZLevel(R)})}})(h),vl(c,h,p,g,y),Z(c._chartsViews,function(b){b.__alive=!1}),$f(c,h,p,g,y),Z(c._chartsViews,function(b){b.__alive||b.remove(h,p)})},vl=function(c,h,p,g,y,b){Z(b||c._componentsViews,function(_){var w=_.__model;a(0,_),_.render(w,h,p,g),o(w,_),l(w,_)})},$f=function(c,h,p,g,y,b){var _=c._scheduler;y=De(y||{},{updatedSeries:h.getSeries()}),$s.trigger("series:beforeupdate",h,p,y);var S,M,N,w=!1;h.eachSeries(function(S){var M=c._chartsMap[S.__viewId];M.__alive=!0;var N,L,A=M.renderTask;_.updatePayload(A,g),a(0,M),b&&b.get(S.uid)&&A.dirty(),A.perform(_.getPerformArgs(A))&&(w=!0),M.group.silent=!!S.get("silent"),N=M,L=S.get("blendMode")||null,N.eachRendered(function(R){R.isGroup||(R.style.blend=L)}),AA(S)}),_.unfinished=w||_.unfinished,$s.trigger("series:layoutlabels",h,p,y),$s.trigger("series:transition",h,p,y),h.eachSeries(function(S){var M=c._chartsMap[S.__viewId];o(S,M),l(S,M)}),M=h,N=0,(S=c)._zr.storage.traverse(function(L){L.isGroup||N++}),N>M.get("hoverLayerThreshold")&&!gn.node&&!gn.worker&&M.eachSeries(function(L){if(!L.preventUsingHoverLayer){var R=S._chartsMap[L.__viewId];R.__alive&&R.eachRendered(function(O){O.states.emphasis&&(O.states.emphasis.hoverLayer=!0)})}}),$s.trigger("series:afterupdate",h,p,y)},Ua=function(c){c[Zm]=!0,c.getZr().wakeUp()},M1=function(c){c[Zm]&&(c.getZr().storage.traverse(function(h){yf(h)||r(h)}),c[Zm]=!1)},Kf=function(c){return new(function(h){function p(){return null!==h&&h.apply(this,arguments)||this}return Ce(p,h),p.prototype.getCoordinateSystems=function(){return c._coordSysMgr.getCoordinateSystems()},p.prototype.getComponentByElement=function(g){for(;g;){var y=g.__ecComponentInfo;if(null!=y)return c._model.getComponent(y.mainType,y.index);g=g.parent}},p.prototype.enterEmphasis=function(g,y){Ku(g,y),Ua(c)},p.prototype.leaveEmphasis=function(g,y){Ql(g,y),Ua(c)},p.prototype.enterBlur=function(g){At(g),Ua(c)},p.prototype.leaveBlur=function(g){uf(g),Ua(c)},p.prototype.enterSelect=function(g){V_(g),Ua(c)},p.prototype.leaveSelect=function(g){MA(g),Ua(c)},p.prototype.getModel=function(){return c.getModel()},p.prototype.getViewOfComponentModel=function(g){return c.getViewOfComponentModel(g)},p.prototype.getViewOfSeriesModel=function(g){return c.getViewOfSeriesModel(g)},p}(Cw))(c)},CS=function(c){function h(p,g){for(var y=0;y<p.length;y++)p[y][wS]=g}Z(gc,function(p,g){c._messageCenter.on(g,function(y){if(ry[c.group]&&0!==c[wS]){if(y&&y.escapeConnect)return;var b=c.makeActionFromEvent(y),_=[];Z(fd,function(w){w!==c&&w.group===c.group&&_.push(w)}),h(_,0),Z(_,function(w){1!==w[wS]&&w.dispatchAction(b)}),h(_,2)}})})}}(),t}(xn),TS=ey.prototype;TS.on=x1("on"),TS.off=x1("off"),TS.one=function(n,t,e){var r=this;this.on.call(this,n,function o(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];t&&t.apply&&t.apply(this,i),r.off(n,o)},e)};var Qk=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],ty={},gc={},A1=[],k1=[],ny=[],AS={},I1={},fd={},ry={},kS=+new Date-0,IS=+new Date-0,D1="_echarts_instance_";function DS(n){ry[n]=!1}var eI=DS;function oy(n){return fd[function(t,e){return t.getAttribute?t.getAttribute(e):t[e]}(n,D1)]}function N1(n,t){AS[n]=t}function E1(n){$t(k1,n)<0&&k1.push(n)}function mc(n,t){R1(A1,n,t,2e3)}function tI(n){Xh("afterinit",n)}function L1(n){Xh("afterupdate",n)}function Xh(n,t){$s.on(n,t)}function Ks(n,t,e){Se(t)&&(e=t,t="");var r=Ft(n)?n.type:[n,n={event:t}][0];n.event=(n.event||r).toLowerCase(),gc[t=n.event]||(bn(Kk.test(r)&&Kk.test(t)),ty[r]||(ty[r]={action:e,actionInfo:n}),gc[t]=r)}function NS(n,t){id.register(n,t)}function ES(n,t){R1(ny,n,t,1e3,"layout")}function du(n,t){R1(ny,n,t,3e3,"visual")}var LS=[];function R1(n,t,e,r,o){if((Se(t)||Ft(t))&&(e=t,t=r),!($t(LS,e)>=0)){LS.push(e);var i=iS.wrapStageHandler(e,o);i.__prio=t,i.__raw=e,n.push(i)}}function O1(n,t){I1[n]=t}function RS(n,t,e){var r=_S("registerMap");r&&r(n,t,e)}var OS=function(n){var t=(n=jt(n)).type;t||En("");var r=t.split(":");2!==r.length&&En("");var o=!1;"echarts"===r[0]&&(t=r[1],o=!0),n.__isBuiltIn=o,Ww.set(t,n)};du(2e3,n1),du(4500,r1),du(4500,Ek),du(2e3,Hh),du(4500,HE),du(7e3,function(n,t){n.eachRawSeries(function(e){if(!n.isSeriesFiltered(e)){var r=e.getData();r.hasItemVisual()&&r.each(function(i){var a=r.getItemVisual(i,"decal");a&&(r.ensureUniqueItemVisual(i,"style").decal=pd(a,t))});var o=r.getVisual("decal");o&&(r.getVisual("style").decal=pd(o,t))}})}),E1(Y0),mc(900,function(n){var t=Et();n.eachSeries(function(e){var r=e.get("stack");if(r){var o=t.get(r)||t.set(r,[]),i=e.getData(),a={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:e};if(!a.stackedDimension||!a.isStackedByIndex&&!a.stackedByDimension)return;o.length&&i.setCalculationInfo("stackedOnSeries",o[o.length-1].seriesModel),o.push(a)}}),t.each(ik)}),O1("default",function(n,t){Pe(t=t||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var e=new on,r=new $n({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});e.add(r);var o,i=new Kn({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new $n({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});return e.add(a),t.showSpinner&&((o=new ym({shape:{startAngle:-o1/2,endAngle:-o1/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*o1/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:3*o1/2}).delay(300).start("circularInOut"),e.add(o)),e.resize=function(){var l=i.getBoundingRect().width,c=t.showSpinner?t.spinnerRadius:0,h=(n.getWidth()-2*c-(t.showSpinner&&l?10:0)-l)/2-(t.showSpinner&&l?0:5+l/2)+(t.showSpinner?0:l/2)+(l?0:c),p=n.getHeight()/2;t.showSpinner&&o.setShape({cx:h,cy:p}),a.setShape({x:h-c,y:p-c,width:2*c,height:2*c}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},e.resize(),e}),Ks({type:Zc,event:Zc,update:Zc},zr),Ks({type:um,event:um,update:um},zr),Ks({type:af,event:af,update:af},zr),Ks({type:cm,event:cm,update:cm},zr),Ks({type:sf,event:sf,update:sf},zr),N1("light",i1),N1("dark",dS);var PS=[],jE={registerPreprocessor:E1,registerProcessor:mc,registerPostInit:tI,registerPostUpdate:L1,registerUpdateLifecycle:Xh,registerAction:Ks,registerCoordinateSystem:NS,registerLayout:ES,registerVisual:du,registerTransform:OS,registerLoading:O1,registerMap:RS,registerImpl:function(n,t){y1[n]=t},PRIORITY:b1,ComponentModel:wn,ComponentView:Wr,SeriesModel:Pr,ChartView:vr,registerComponentModel:function(n){wn.registerClass(n)},registerComponentView:function(n){Wr.registerClass(n)},registerSeriesModel:function(n){Pr.registerClass(n)},registerChartView:function(n){vr.registerClass(n)},registerSubTypeDefaulter:function(n,t){wn.registerSubTypeDefaulter(n,t)},registerPainter:function(n,t){Rv(n,t)}};function Rn(n){Ee(n)?Z(n,function(t){Rn(t)}):$t(PS,n)>=0||(PS.push(n),Se(n)&&(n={install:n}),n.install(jE))}function yc(n){return null==n?0:n.length||1}function BS(n){return n}var Js=function(){function n(t,e,r,o,i,a){this._old=t,this._new=e,this._oldKeyGetter=r||BS,this._newKeyGetter=o||BS,this.context=i,this._diffModeMultiple="multiple"===a}return n.prototype.add=function(t){return this._add=t,this},n.prototype.update=function(t){return this._update=t,this},n.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},n.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},n.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},n.prototype.remove=function(t){return this._remove=t,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var t=this._old,e=this._new,r={},o=new Array(t.length),i=new Array(e.length);this._initIndexMap(t,null,o,"_oldKeyGetter"),this._initIndexMap(e,r,i,"_newKeyGetter");for(var a=0;a<t.length;a++){var l=o[a],c=r[l],h=yc(c);if(h>1){var p=c.shift();1===c.length&&(r[l]=c[0]),this._update&&this._update(p,a)}else 1===h?(r[l]=null,this._update&&this._update(c,a)):this._remove&&this._remove(a)}this._performRestAdd(i,r)},n.prototype._executeMultiple=function(){var e=this._new,r={},o={},i=[],a=[];this._initIndexMap(this._old,r,i,"_oldKeyGetter"),this._initIndexMap(e,o,a,"_newKeyGetter");for(var l=0;l<i.length;l++){var c=i[l],h=r[c],p=o[c],g=yc(h),y=yc(p);if(g>1&&1===y)this._updateManyToOne&&this._updateManyToOne(p,h),o[c]=null;else if(1===g&&y>1)this._updateOneToMany&&this._updateOneToMany(p,h),o[c]=null;else if(1===g&&1===y)this._update&&this._update(p,h),o[c]=null;else if(g>1&&y>1)this._updateManyToMany&&this._updateManyToMany(p,h),o[c]=null;else if(g>1)for(var b=0;b<g;b++)this._remove&&this._remove(h[b]);else this._remove&&this._remove(h)}this._performRestAdd(a,o)},n.prototype._performRestAdd=function(t,e){for(var r=0;r<t.length;r++){var o=t[r],i=e[o],a=yc(i);if(a>1)for(var l=0;l<a;l++)this._add&&this._add(i[l]);else 1===a&&this._add&&this._add(i);e[o]=null}},n.prototype._initIndexMap=function(t,e,r,o){for(var i=this._diffModeMultiple,a=0;a<t.length;a++){var l="_ec_"+this[o](t[a],a);if(i||(r[a]=l),e){var c=e[l],h=yc(c);0===h?(e[l]=a,i&&r.push(l)):1===h?e[l]=[c,a]:c.push(a)}}},n}(),nI=function(){function n(t,e){this._encode=t,this._schema=e}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function zS(n,t){return n.hasOwnProperty(t)||(n[t]=[]),n[t]}function iy(n){return"category"===n?"ordinal":"time"===n?"time":"float"}var ay=function(n){this.otherDims={},null!=n&&De(this,n)},rI=Gn(),oI={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},VS=function(){function n(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=HS(this.source)))},n.prototype.getSourceDimensionIndex=function(t){return We(this._dimNameMap.get(t),-1)},n.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},n.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=sk(this.source),r=!iI(t),o="",i=[],a=0,l=0;a<t;a++){var c=void 0,h=void 0,p=void 0,g=this.dimensions[l];if(g&&g.storeDimIndex===a)c=e?g.name:null,h=g.type,p=g.ordinalMeta,l++;else{var y=this.getSourceDimension(a);y&&(c=e?y.name:null,h=y.type)}i.push({property:c,type:h,ordinalMeta:p}),!e||null==c||g&&g.isCalculationCoord||(o+=r?c.replace(/\`/g,"`1").replace(/\$/g,"`2"):c),o+="$",o+=oI[h]||"f",p&&(o+=p.uid),o+="$"}var b=this.source;return{dimensions:i,hash:[b.seriesLayoutBy,b.startIndex,o].join("$$")}},n.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,r=0;e<this._fullDimCount;e++){var o=void 0,i=this.dimensions[r];if(i&&i.storeDimIndex===e)i.isCalculationCoord||(o=i.name),r++;else{var a=this.getSourceDimension(e);a&&(o=a.name)}t.push(o)}return t},n.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function FS(n){return n instanceof VS}function GS(n){for(var t=Et(),e=0;e<(n||[]).length;e++){var r=n[e],o=Ft(r)?r.name:r;null!=o&&null==t.get(o)&&t.set(o,e)}return t}function HS(n){var t=rI(n);return t.dimNameMap||(t.dimNameMap=GS(n.dimensionsDefine))}function iI(n){return n>30}var P1,sy,Jf,ly,B1,uy,z1,cy=Ft,gd=j,aI=typeof Int32Array>"u"?Array:Int32Array,WS=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],sI=["_approximateExtent"],Ri=function(){function n(t,e){var r;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var o=!1;FS(t)?(r=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(o=!0,r=t),r=r||["x","y"];for(var i={},a=[],l={},c=!1,h={},p=0;p<r.length;p++){var g=r[p],y=bt(g)?new ay({name:g}):g instanceof ay?g:new ay(g),b=y.name;y.type=y.type||"float",y.coordDim||(y.coordDim=b,y.coordDimIndex=0);var _=y.otherDims=y.otherDims||{};a.push(b),i[b]=y,null!=h[b]&&(c=!0),y.createInvertedIndices&&(l[b]=[]),0===_.itemName&&(this._nameDimIdx=p),0===_.itemId&&(this._idDimIdx=p),o&&(y.storeDimIndex=p)}if(this.dimensions=a,this._dimInfos=i,this._initGetDimensionInfo(c),this.hostModel=e,this._invertedIndicesMap=l,this._dimOmitted){var w=this._dimIdxToName=Et();Z(a,function(S){w.set(i[S].storeDimIndex,S)})}}return n.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(null==e)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var r=this._dimIdxToName.get(e);if(null!=r)return r;var o=this._schema.getSourceDimension(e);return o?o.name:void 0},n.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(null!=e)return e;if(null==t)return-1;var r=this._getDimInfo(t);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},n.prototype._recognizeDimIndex=function(t){if(dt(t)||null!=t&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},n.prototype._getStoreDimIndex=function(t){return this.getDimensionIndex(t)},n.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},n.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(r){return e.hasOwnProperty(r)?e[r]:void 0}:function(r){return e[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(t,e){var r=this._dimSummary;if(null==e)return r.encodeFirstDimNotExtra[t];var o=r.encode[t];return o?o[e]:null},n.prototype.mapDimensionsAll=function(t){return(this._dimSummary.encode[t]||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(t,e,r){var o,i=this;if(t instanceof Ff&&(o=t),!o){var a=this.dimensions,l=X0(t)||Mn(t)?new Lw(t,a.length):t;o=new Ff;var c=gd(a,function(h){return{type:i._dimInfos[h].type,property:h}});o.initData(l,c,r)}this._store=o,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=function(h,p){var g={},y=g.encode={},b=Et(),_=[],w=[],S={};Z(h.dimensions,function(L){var R,O=h.getDimensionInfo(L),B=O.coordDim;if(B){var G=O.coordDimIndex;zS(y,B)[G]=L,O.isExtraCoord||(b.set(B,1),"ordinal"!==(R=O.type)&&"time"!==R&&(_[0]=L),zS(S,B)[G]=h.getDimensionIndex(O.name)),O.defaultTooltip&&w.push(L)}z0.each(function(W,Y){var X=zS(y,Y),J=O.otherDims[Y];null!=J&&!1!==J&&(X[J]=O.name)})});var M=[],A={};b.each(function(L,R){var O=y[R];A[R]=O[0],M=M.concat(O)}),g.dataDimsOnCoord=M,g.dataDimIndicesOnCoord=j(M,function(L){return h.getDimensionInfo(L).storeDimIndex}),g.encodeFirstDimNotExtra=A;var I=y.label;I&&I.length&&(_=I.slice());var N=y.tooltip;return N&&N.length?w=N.slice():w.length||(w=_.slice()),y.defaultedLabel=_,y.defaultedTooltip=w,g.userOutput=new nI(S,p),g}(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},n.prototype.appendValues=function(t,e){var r=this._store.appendValues(t,e.length),o=r.start,i=r.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var l=o;l<i;l++)this._nameList[l]=e[l-o],a&&z1(this,l)},n.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,r=0;r<e.length;r++){var o=this._dimInfos[e[r]];o.ordinalMeta&&t.collectOrdinalMeta(o.storeDimIndex,o.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return null==this._idDimIdx&&t.getSource().sourceFormat!==ac&&!t.fillStorage},n.prototype._doInit=function(t,e){if(!(t>=e)){var r=this._store.getProvider();this._updateOrdinalMeta();var o=this._nameList,i=this._idList;if(r.getSource().sourceFormat===Ii&&!r.pure)for(var a=[],l=t;l<e;l++){var c=r.getItem(l,a);if(!this.hasItemOption&&Gv(c)&&(this.hasItemOption=!0),c){var h=c.name;null==o[l]&&null!=h&&(o[l]=Po(h,null));var p=c.id;null==i[l]&&null!=p&&(i[l]=Po(p,null))}}if(this._shouldMakeIdFromName())for(l=t;l<e;l++)z1(this,l);P1(this)}},n.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},n.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},n.prototype.setCalculationInfo=function(t,e){cy(t)?De(this._calculationInfo,t):this._calculationInfo[t]=e},n.prototype.getName=function(t){var e=this.getRawIndex(t),r=this._nameList[e];return null==r&&null!=this._nameDimIdx&&(r=Jf(this,this._nameDimIdx,e)),null==r&&(r=""),r},n.prototype._getCategory=function(t,e){var r=this._store.get(t,e),o=this._store.getOrdinalMeta(t);return o?o.categories[r]:r},n.prototype.getId=function(t){return sy(this,this.getRawIndex(t))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(t,e){var o=this._dimInfos[t];if(o)return this._store.get(o.storeDimIndex,e)},n.prototype.getByRawIndex=function(t,e){var o=this._dimInfos[t];if(o)return this._store.getByRawIndex(o.storeDimIndex,e)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},n.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},n.prototype.getValues=function(t,e){var r=this,o=this._store;return Ee(t)?o.getValues(gd(t,function(i){return r._getStoreDimIndex(i)}),e):o.getValues(t)},n.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,r=0,o=e.length;r<o;r++)if(isNaN(this._store.get(e[r],t)))return!1;return!0},n.prototype.indexOfName=function(t){for(var e=0,r=this._store.count();e<r;e++)if(this.getName(e)===t)return e;return-1},n.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},n.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},n.prototype.rawIndexOf=function(t,e){var o=(t&&this._invertedIndicesMap[t])[e];return null==o||isNaN(o)?-1:o},n.prototype.indicesOfNearest=function(t,e,r){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,r)},n.prototype.each=function(t,e,r){Se(t)&&(r=e,e=t,t=[]);var o=r||this,i=gd(ly(t),this._getStoreDimIndex,this);this._store.each(i,o?Fe(e,o):e)},n.prototype.filterSelf=function(t,e,r){Se(t)&&(r=e,e=t,t=[]);var o=r||this,i=gd(ly(t),this._getStoreDimIndex,this);return this._store=this._store.filter(i,o?Fe(e,o):e),this},n.prototype.selectRange=function(t){var e=this,r={};return Z(vn(t),function(o){var i=e._getStoreDimIndex(o);r[i]=t[o]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(t,e,r){Se(t)&&(r=e,e=t,t=[]);var o=[];return this.each(t,function(){o.push(e&&e.apply(this,arguments))},r=r||this),o},n.prototype.map=function(t,e,r,o){var i=r||o||this,a=gd(ly(t),this._getStoreDimIndex,this),l=uy(this);return l._store=this._store.map(a,i?Fe(e,i):e),l},n.prototype.modify=function(t,e,r,o){var i=r||o||this,a=gd(ly(t),this._getStoreDimIndex,this);this._store.modify(a,i?Fe(e,i):e)},n.prototype.downSample=function(t,e,r,o){var i=uy(this);return i._store=this._store.downSample(this._getStoreDimIndex(t),e,r,o),i},n.prototype.lttbDownSample=function(t,e){var r=uy(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),r},n.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},n.prototype.getItemModel=function(t){var e=this.hostModel,r=this.getRawDataItem(t);return new gr(r,e,e&&e.ecModel)},n.prototype.diff=function(t){var e=this;return new Js(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(r){return sy(t,r)},function(r){return sy(e,r)})},n.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},n.prototype.setVisual=function(t,e){this._visual=this._visual||{},cy(t)?De(this._visual,t):this._visual[t]=e},n.prototype.getItemVisual=function(t,e){var r=this._itemVisuals[t];return(r&&r[e])??this.getVisual(e)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(t,e){var r=this._itemVisuals,o=r[t];o||(o=r[t]={});var i=o[e];return null==i&&(Ee(i=this.getVisual(e))?i=i.slice():cy(i)&&(i=De({},i)),o[e]=i),i},n.prototype.setItemVisual=function(t,e,r){var o=this._itemVisuals[t]||{};this._itemVisuals[t]=o,cy(e)?De(o,e):o[e]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(t,e){cy(t)?De(this._layout,t):this._layout[t]=e},n.prototype.getLayout=function(t){return this._layout[t]},n.prototype.getItemLayout=function(t){return this._itemLayouts[t]},n.prototype.setItemLayout=function(t,e,r){this._itemLayouts[t]=r?De(this._itemLayouts[t]||{},e):e},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(t,e){lm(this.hostModel&&this.hostModel.seriesIndex,this.dataType,t,e),this._graphicEls[t]=e},n.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},n.prototype.eachItemGraphicEl=function(t,e){Z(this._graphicEls,function(r,o){r&&t&&t.call(e,r,o)})},n.prototype.cloneShallow=function(t){return t||(t=new n(this._schema?this._schema:gd(this.dimensions,this._getDimInfo,this),this.hostModel)),B1(t,this),t._store=this._store,t},n.prototype.wrapMethod=function(t,e){var r=this[t];Se(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var o=r.apply(this,arguments);return e.apply(this,[o].concat(Wn(arguments)))})},n.internalField=(P1=function(t){var e=t._invertedIndicesMap;Z(e,function(r,o){var i=t._dimInfos[o],a=i.ordinalMeta,l=t._store;if(a){r=e[o]=new aI(a.categories.length);for(var c=0;c<r.length;c++)r[c]=-1;for(c=0;c<l.count();c++)r[l.get(i.storeDimIndex,c)]=c}})},Jf=function(t,e,r){return Po(t._getCategory(e,r),null)},sy=function(t,e){var r=t._idList[e];return null==r&&null!=t._idDimIdx&&(r=Jf(t,t._idDimIdx,e)),null==r&&(r="e\0\0"+e),r},ly=function(t){return Ee(t)||(t=null!=t?[t]:[]),t},uy=function(t){var e=new n(t._schema?t._schema:gd(t.dimensions,t._getDimInfo,t),t.hostModel);return B1(e,t),e},B1=function(t,e){Z(WS.concat(e.__wrappedMethods||[]),function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t.__wrappedMethods=e.__wrappedMethods,Z(sI,function(r){t[r]=jt(e[r])}),t._calculationInfo=De({},e._calculationInfo)},void(z1=function(t,e){var r=t._nameList,o=t._idList,i=t._nameDimIdx,a=t._idDimIdx,l=r[e],c=o[e];if(null==l&&null!=i&&(r[e]=l=Jf(t,i,e)),null==c&&null!=a&&(o[e]=c=Jf(t,a,e)),null==c&&null!=l){var h=t._nameRepeatCount,p=h[l]=(h[l]||0)+1;c=l,p>1&&(c+="__ec__"+p),o[e]=c}})),n}();function Qf(n,t){X0(n)||(n=Bm(n));var G,X,e=(t=t||{}).coordDimensions||[],r=t.dimensionsDefine||n.dimensionsDefine||[],o=Et(),i=[],a=(G=e,X=Math.max(n.dimensionsDetectedCount||1,G.length,r.length,t.dimensionsCount||0),Z(G,function(J){var ne;Ft(J)&&(ne=J.dimsDef)&&(X=Math.max(X,ne.length))}),X),l=t.canOmitUnusedDimensions&&iI(a),c=r===n.dimensionsDefine,h=c?HS(n):GS(r),p=t.encodeDefine;!p&&t.encodeDefaulter&&(p=t.encodeDefaulter(n,a));for(var g=Et(p),y=new jw(a),b=0;b<y.length;b++)y[b]=-1;function _(B){var G=y[B];if(G<0){var W=r[B],Y=Ft(W)?W:{name:W},X=new ay,J=Y.name;return null!=J&&null!=h.get(J)&&(X.name=X.displayName=J),null!=Y.type&&(X.type=Y.type),null!=Y.displayName&&(X.displayName=Y.displayName),y[B]=i.length,X.storeDimIndex=B,i.push(X),X}return i[G]}if(!l)for(b=0;b<a;b++)_(b);g.each(function(B,G){var W=Dr(B).slice();if(1===W.length&&!bt(W[0])&&W[0]<0)g.set(G,!1);else{var Y=g.set(G,[]);Z(W,function(X,J){var ne=bt(X)?h.get(X):X;null!=ne&&ne<a&&(Y[J]=ne,S(_(ne),G,J))})}});var w=0;function S(B,G,W){null!=z0.get(G)?B.otherDims[G]=W:(B.coordDim=G,B.coordDimIndex=W,o.set(G,!0))}Z(e,function(B){var G,W,Y,X;if(bt(B))G=B,X={};else{G=(X=B).name;var J=X.ordinalMeta;X.ordinalMeta=null,(X=De({},X)).ordinalMeta=J,W=X.dimsDef,Y=X.otherDims,X.name=X.coordDim=X.coordDimIndex=X.dimsDef=X.otherDims=null}var ne=g.get(G);if(!1!==ne){if(!(ne=Dr(ne)).length)for(var oe=0;oe<(W&&W.length||1);oe++){for(;w<a&&null!=_(w).coordDim;)w++;w<a&&ne.push(w++)}Z(ne,function(ie,se){var le=_(ie);if(c&&null!=X.type&&(le.type=X.type),S(Pe(le,X),G,se),null==le.name&&W){var pe=W[se];!Ft(pe)&&(pe={name:pe}),le.name=le.displayName=pe.name,le.defaultTooltip=pe.defaultTooltip}Y&&Pe(le.otherDims,Y)})}});var M=t.generateCoord,A=t.generateCoordCount,I=null!=A;A=M?A||1:0;var N=M||"value";function L(B){null==B.name&&(B.name=B.coordDim)}if(l)Z(i,function(B){L(B)}),i.sort(function(B,G){return B.storeDimIndex-G.storeDimIndex});else for(var R=0;R<a;R++){var O=_(R);null==O.coordDim&&(O.coordDim=YE(N,o,I),O.coordDimIndex=0,(!M||A<=0)&&(O.isExtraCoord=!0),A--),L(O),null!=O.type||Ef(n,R)!==Nm&&(!O.isExtraCoord||null==O.otherDims.itemName&&null==O.otherDims.seriesName)||(O.type="ordinal")}return function(B){for(var G=Et(),W=0;W<B.length;W++){var Y=B[W],X=Y.name,J=G.get(X)||0;J>0&&(Y.name=X+(J-1)),J++,G.set(X,J)}}(i),new VS({source:n,dimensions:i,fullDimensionCount:a,dimensionOmitted:l})}function YE(n,t,e){if(e||t.hasKey(n)){for(var r=0;t.hasKey(n+r);)r++;n+=r}return t.set(n,!0),n}var XE=function(n){this.coordSysDims=[],this.axisMap=Et(),this.categoryAxisMap=Et(),this.coordSysName=n},fa={cartesian2d:function(n,t,e,r){var o=n.getReferringComponents("xAxis",Mo).models[0],i=n.getReferringComponents("yAxis",Mo).models[0];t.coordSysDims=["x","y"],e.set("x",o),e.set("y",i),ea(o)&&(r.set("x",o),t.firstCategoryDimIndex=0),ea(i)&&(r.set("y",i),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},singleAxis:function(n,t,e,r){var o=n.getReferringComponents("singleAxis",Mo).models[0];t.coordSysDims=["single"],e.set("single",o),ea(o)&&(r.set("single",o),t.firstCategoryDimIndex=0)},polar:function(n,t,e,r){var o=n.getReferringComponents("polar",Mo).models[0],i=o.findAxisModel("radiusAxis"),a=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",i),e.set("angle",a),ea(i)&&(r.set("radius",i),t.firstCategoryDimIndex=0),ea(a)&&(r.set("angle",a),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(n,t,e,r){t.coordSysDims=["lng","lat"]},parallel:function(n,t,e,r){var o=n.ecModel,i=o.getComponent("parallel",n.get("parallelIndex")),a=t.coordSysDims=i.dimensions.slice();Z(i.parallelAxisIndex,function(l,c){var h=o.getComponent("parallelAxis",l),p=a[c];e.set(p,h),ea(h)&&(r.set(p,h),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=c))})}};function ea(n){return"category"===n.get("type")}function lI(n,t,e){var r,o,i,a=(e=e||{}).byIndex,l=e.stackedCoordDimension;FS(t.schema)?(r=(o=t.schema).dimensions,i=t.store):r=t;var c,h,p,g,y=!(!n||!n.get("stack"));if(Z(r,function(A,I){bt(A)&&(r[I]=A={name:A}),y&&!A.isExtraCoord&&(a||c||!A.ordinalMeta||(c=A),h||"ordinal"===A.type||"time"===A.type||l&&l!==A.coordDim||(h=A))}),!h||a||c||(a=!0),h){p="__\0ecstackresult_"+n.id,g="__\0ecstackedover_"+n.id,c&&(c.createInvertedIndices=!0);var b=h.coordDim,_=h.type,w=0;Z(r,function(A){A.coordDim===b&&w++});var S={name:p,coordDim:b,coordDimIndex:w,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length},M={name:g,coordDim:g,coordDimIndex:w+1,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length+1};o?(i&&(S.storeDimIndex=i.ensureCalculationDimension(g,_),M.storeDimIndex=i.ensureCalculationDimension(p,_)),o.appendCalculationDimension(S),o.appendCalculationDimension(M)):(r.push(S),r.push(M))}return{stackedDimension:h&&h.name,stackedByDimension:c&&c.name,isStackedByIndex:a,stackedOverDimension:g,stackResultDimension:p}}function bl(n,t){return!!t&&t===n.getCalculationInfo("stackedDimension")}function dy(n,t){return bl(n,t)?n.getCalculationInfo("stackResultDimension"):t}function hu(n,t,e){e=e||{};var r,o=t.getSourceManager(),i=!1;n?(i=!0,r=Bm(n)):i=(r=o.getSource()).sourceFormat===Ii;var M,A,I,N,a=function(S){var M=S.get("coordinateSystem"),A=new XE(M),I=fa[M];if(I)return I(S,A,A.axisMap,A.categoryAxisMap),A}(t),l=(M=a,I=t.get("coordinateSystem"),N=id.get(I),M&&M.coordSysDims&&(A=j(M.coordSysDims,function(L){var R={name:L},O=M.axisMap.get(L);if(O){var B=O.get("type");R.type=iy(B)}return R})),A||(A=N&&(N.getDimensionsInfo?N.getDimensionsInfo():N.dimensions.slice())||["x","y"]),A),c=e.useEncodeDefaulter,h=Se(c)?c:c?_t(Em,l,t):null,p=Qf(r,{coordDimensions:l,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:h,canOmitUnusedDimensions:!i}),g=function(S,M,A){var I,N;return A&&Z(S,function(L,R){var B=A.categoryAxisMap.get(L.coordDim);B&&(null==I&&(I=R),L.ordinalMeta=B.getOrdinalMeta(),M&&(L.createInvertedIndices=!0)),null!=L.otherDims.itemName&&(N=!0)}),N||null==I||(S[I].otherDims.itemName=0),I}(p.dimensions,e.createInvertedIndices,a),y=i?null:o.getSharedDataStore(p),b=lI(t,{schema:p,store:y}),_=new Ri(p,t);_.setCalculationInfo(b);var w=null!=g&&function(S){if(S.sourceFormat===Ii){var M=function(A){for(var I=0;I<A.length&&null==A[I];)I++;return A[I]}(S.data||[]);return!Ee(Uc(M))}}(r)?function(S,M,A,I){return I===g?A:this.defaultDimValueGetter(S,M,A,I)}:null;return _.hasItemOption=!1,_.initData(i?r:y,null,w),_}var pu=function(){function n(t){this._setting=t||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(t){return this._setting[t]},n.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},n.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(t,e){var r=this._extent;isNaN(t)||(r[0]=t),isNaN(e)||(r[1]=e)},n.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(t){this._isBlank=t},n}();jl(pu);var hy=0,eg=function(){function n(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++hy}return n.createByAxisModel=function(t){var e=t.option,r=e.data,o=r&&j(r,US);return new n({categories:o,needCollect:!o,deduplication:!1!==e.dedplication})},n.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},n.prototype.parseAndCollect=function(t){var e,r=this._needCollect;if(!bt(t)&&!r)return t;if(r&&!this._deduplication)return this.categories[e=this.categories.length]=t,e;var o=this._getOrCreateMap();return null==(e=o.get(t))&&(r?(this.categories[e=this.categories.length]=t,o.set(t,e)):e=NaN),e},n.prototype._getOrCreateMap=function(){return this._map||(this._map=Et(this.categories))},n}();function US(n){return Ft(n)&&null!=n.value?n.value:n+""}function jS(n){return"interval"===n.type||"log"===n.type}function YS(n){var t=Math.pow(10,Vv(n)),e=n/t;return e?2===e?e=3:3===e?e=5:e*=2:e=1,co(e*t)}function uI(n){return Bs(n)+2}function ja(n,t,e){n[t]=Math.max(Math.min(n[t],e[1]),e[0])}function md(n,t){return n>=t[0]&&n<=t[1]}function py(n,t){return t[1]===t[0]?.5:(n-t[0])/(t[1]-t[0])}function ga(n,t){return n*(t[1]-t[0])+t[0]}var tr=function(n){function t(e){var r=n.call(this,e)||this;r.type="ordinal";var o=r.getSetting("ordinalMeta");return o||(o=new eg({})),Ee(o)&&(o=new eg({categories:j(o,function(i){return Ft(i)?i.value:i})})),r._ordinalMeta=o,r._extent=r.getSetting("extent")||[0,o.categories.length-1],r}return Ce(t,n),t.prototype.parse=function(e){return null==e?NaN:bt(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return md(e=this.parse(e),this._extent)&&null!=this._ordinalMeta.categories[e]},t.prototype.normalize=function(e){return py(e=this._getTickNumber(this.parse(e)),this._extent)},t.prototype.scale=function(e){return e=Math.round(ga(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],r=this._extent,o=r[0];o<=r[1];)e.push({value:o}),o++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(null!=e){for(var r=e.ordinalNumbers,o=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],a=0,l=this._ordinalMeta.categories.length,c=Math.min(l,r.length);a<c;++a){var h=r[a];o[a]=h,i[h]=a}for(var p=0;a<l;++a){for(;null!=i[p];)p++;o.push(p),i[p]=a}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},t.prototype._getTickNumber=function(e){var r=this._ticksByOrdinalNumber;return r&&e>=0&&e<r.length?r[e]:e},t.prototype.getRawOrdinalNumber=function(e){var r=this._ordinalNumbersByTick;return r&&e>=0&&e<r.length?r[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var r=this.getRawOrdinalNumber(e.value),o=this._ordinalMeta.categories[r];return null==o?"":o+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,r){this.unionExtent(e.getApproximateExtent(r))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(pu);pu.registerClass(tr);var Qs=co,el=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return Ce(t,n),t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return md(e,this._extent)},t.prototype.normalize=function(e){return py(e,this._extent)},t.prototype.scale=function(e){return ga(e,this._extent)},t.prototype.setExtent=function(e,r){var o=this._extent;isNaN(e)||(o[0]=parseFloat(e)),isNaN(r)||(o[1]=parseFloat(r))},t.prototype.unionExtent=function(e){var r=this._extent;e[0]<r[0]&&(r[0]=e[0]),e[1]>r[1]&&(r[1]=e[1]),this.setExtent(r[0],r[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=uI(e)},t.prototype.getTicks=function(e){var r=this._interval,o=this._extent,i=this._niceExtent,a=this._intervalPrecision,l=[];if(!r)return l;o[0]<i[0]&&l.push(e?{value:Qs(i[0]-r,a)}:{value:o[0]});for(var c=i[0];c<=i[1]&&(l.push({value:c}),(c=Qs(c+r,a))!==l[l.length-1].value);)if(l.length>1e4)return[];var h=l.length?l[l.length-1].value:i[1];return o[1]>h&&l.push(e?{value:Qs(h+r,a)}:{value:o[1]}),l},t.prototype.getMinorTicks=function(e){for(var r=this.getTicks(!0),o=[],i=this.getExtent(),a=1;a<r.length;a++){for(var c=r[a-1],h=0,p=[],g=(r[a].value-c.value)/e;h<e-1;){var y=Qs(c.value+(h+1)*g);y>i[0]&&y<i[1]&&p.push(y),h++}o.push(p)}return o},t.prototype.getLabel=function(e,r){if(null==e)return"";var o=r&&r.precision;return null==o?o=Bs(e.value)||0:"auto"===o&&(o=this._intervalPrecision),Tm(Qs(e.value,o,!0))},t.prototype.calcNiceTicks=function(e,r,o){e=e||5;var i=this._extent,a=i[1]-i[0];if(isFinite(a)){a<0&&(a=-a,i.reverse());var l=function xl(n,t,e,r){var o={},a=o.interval=c_((n[1]-n[0])/t,!0);null!=e&&a<e&&(a=o.interval=e),null!=r&&a>r&&(a=o.interval=r);var c,h,l=o.intervalPrecision=uI(a);return c=o.niceTickExtent=[co(Math.ceil(n[0]/a)*a,l),co(Math.floor(n[1]/a)*a,l)],h=n,!isFinite(c[0])&&(c[0]=h[0]),!isFinite(c[1])&&(c[1]=h[1]),ja(c,0,h),ja(c,1,h),c[0]>c[1]&&(c[0]=c[1]),o}(i,e,r,o);this._intervalPrecision=l.intervalPrecision,this._interval=l.interval,this._niceExtent=l.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var r=this._extent;if(r[0]===r[1])if(0!==r[0]){var o=Math.abs(r[0]);e.fixMax||(r[1]+=o/2),r[0]-=o/2}else r[1]=1;isFinite(r[1]-r[0])||(r[0]=0,r[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var a=this._interval;e.fixMin||(r[0]=Qs(Math.floor(r[0]/a)*a)),e.fixMax||(r[1]=Qs(Math.ceil(r[1]/a)*a))},t.prototype.setNiceExtent=function(e,r){this._niceExtent=[e,r]},t.type="interval",t}(pu);pu.registerClass(el);var XS=typeof Float32Array<"u",qS=XS?Float32Array:Array;function tl(n){return Ee(n)?XS?new Float32Array(n):n:new qS(n)}var ZS="__ec_stack_";function fy(n){return n.get("stack")||ZS+n.seriesIndex}function $S(n){return n.dim+n.index}function KS(n,t){var e=[];return t.eachSeriesByType(n,function(r){cI(r)&&e.push(r)}),e}function JS(n){var t=function(r){var o={};Z(r,function(g){var y=g.coordinateSystem.getBaseAxis();if("time"===y.type||"value"===y.type)for(var b=g.getData(),_=y.dim+"_"+y.index,w=b.getDimensionIndex(b.mapDimension(y.dim)),S=b.getStore(),M=0,A=S.count();M<A;++M){var I=S.get(w,M);o[_]?o[_].push(I):o[_]=[I]}});var i={};for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];if(l){l.sort(function(g,y){return g-y});for(var c=null,h=1;h<l.length;++h){var p=l[h]-l[h-1];p>0&&(c=null===c?p:Math.min(c,p))}i[a]=c}}return i}(n),e=[];return Z(n,function(r){var o,i=r.coordinateSystem.getBaseAxis(),a=i.getExtent();if("category"===i.type)o=i.getBandWidth();else if("value"===i.type||"time"===i.type){var c=t[i.dim+"_"+i.index],h=Math.abs(a[1]-a[0]),p=i.scale.getExtent(),g=Math.abs(p[1]-p[0]);o=c?h/g*c:h}else{var y=r.getData();o=Math.abs(a[1]-a[0])/y.count()}var b=Ct(r.get("barWidth"),o),_=Ct(r.get("barMaxWidth"),o),w=Ct(r.get("barMinWidth")||(dI(r)?.5:1),o),S=r.get("barGap"),M=r.get("barCategoryGap");e.push({bandWidth:o,barWidth:b,barMaxWidth:_,barMinWidth:w,barGap:S,barCategoryGap:M,axisKey:$S(i),stackId:fy(r)})}),V1(e)}function V1(n){var t={};Z(n,function(r,o){var i=r.axisKey,a=r.bandWidth,l=t[i]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},c=l.stacks;t[i]=l;var h=r.stackId;c[h]||l.autoWidthCount++,c[h]=c[h]||{width:0,maxWidth:0};var p=r.barWidth;p&&!c[h].width&&(c[h].width=p,p=Math.min(l.remainedWidth,p),l.remainedWidth-=p);var g=r.barMaxWidth;g&&(c[h].maxWidth=g);var y=r.barMinWidth;y&&(c[h].minWidth=y);var b=r.barGap;null!=b&&(l.gap=b);var _=r.barCategoryGap;null!=_&&(l.categoryGap=_)});var e={};return Z(t,function(r,o){e[o]={};var i=r.stacks,a=r.bandWidth,l=r.categoryGap;if(null==l){var c=vn(i).length;l=Math.max(35-4*c,15)+"%"}var h=Ct(l,a),p=Ct(r.gap,1),g=r.remainedWidth,y=r.autoWidthCount,b=(g-h)/(y+(y-1)*p);b=Math.max(b,0),Z(i,function(M){var A=M.maxWidth,I=M.minWidth;if(M.width)N=M.width,A&&(N=Math.min(N,A)),I&&(N=Math.max(N,I)),M.width=N,g-=N+p*N,y--;else{var N=b;A&&A<N&&(N=Math.min(A,g)),I&&I>N&&(N=I),N!==b&&(M.width=N,g-=N+p*N,y--)}}),b=(g-h)/(y+(y-1)*p),b=Math.max(b,0);var _,w=0;Z(i,function(M,A){M.width||(M.width=b),_=M,w+=M.width*(1+p)}),_&&(w-=_.width*p);var S=-w/2;Z(i,function(M,A){e[o][A]=e[o][A]||{bandWidth:a,offset:S,width:M.width},S+=M.width*(1+p)})}),e}function QS(n,t){var e=KS(n,t),r=JS(e);Z(e,function(o){var i=o.getData(),a=o.coordinateSystem.getBaseAxis(),l=fy(o),c=r[$S(a)][l];i.setLayout({bandWidth:c.bandWidth,offset:c.offset,size:c.width})})}function gy(n){return{seriesType:n,plan:Vh(),reset:function(t){if(cI(t)){var e=t.getData(),r=t.coordinateSystem,o=r.getBaseAxis(),i=r.getOtherAxis(o),a=e.getDimensionIndex(e.mapDimension(i.dim)),l=e.getDimensionIndex(e.mapDimension(o.dim)),c=t.get("showBackground",!0),h=e.mapDimension(i.dim),p=e.getCalculationInfo("stackResultDimension"),g=bl(e,h)&&!!e.getCalculationInfo("stackedOnSeries"),y=i.isHorizontal(),b=((L=(N=i).model.get("startValue"))||(L=0),N.toGlobalCoord(N.dataToCoord("log"===N.type?L>0?L:1:L))),_=dI(t),w=t.get("barMinHeight")||0,S=p&&e.getDimensionIndex(p),M=e.getLayout("size"),A=e.getLayout("offset");return{progress:function(I,N){for(var L,R=I.count,O=_&&tl(3*R),B=_&&c&&tl(3*R),G=_&&tl(R),W=r.master.getRect(),Y=y?W.width:W.height,X=N.getStore(),J=0;null!=(L=I.next());){var ne=X.get(g?S:a,L),oe=X.get(l,L),ie=b,se=void 0;g&&(se=+ne-X.get(a,L));var le=void 0,pe=void 0,me=void 0,ve=void 0;if(y){var He=r.dataToPoint([ne,oe]);g&&(ie=r.dataToPoint([se,oe])[0]),le=ie,pe=He[1]+A,me=He[0]-ie,ve=M,Math.abs(me)<w&&(me=(me<0?-1:1)*w)}else He=r.dataToPoint([oe,ne]),g&&(ie=r.dataToPoint([oe,se])[1]),le=He[0]+A,pe=ie,me=M,ve=He[1]-ie,Math.abs(ve)<w&&(ve=(ve<=0?-1:1)*w);_?(O[J]=le,O[J+1]=pe,O[J+2]=y?me:ve,B&&(B[J]=y?W.x:le,B[J+1]=y?pe:W.y,B[J+2]=Y),G[L]=L):N.setItemLayout(L,{x:le,y:pe,width:me,height:ve}),J+=3}_&&N.setLayout({largePoints:O,largeDataIndices:G,largeBackgroundPoints:B,valueAxisHorizontal:y})}}}var N,L}}}function cI(n){return n.coordinateSystem&&"cartesian2d"===n.coordinateSystem.type}function dI(n){return n.pipelineContext&&n.pipelineContext.large}var eC=function(n){function t(e){var r=n.call(this,e)||this;return r.type="time",r}return Ce(t,n),t.prototype.getLabel=function(e){var r=this.getSetting("useUTC");return Tf(e.value,nd[function(o){switch(o){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(kh(this._minLevelUnit))]||nd.second,r,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,r,o){var i=this.getSetting("useUTC");return function(a,l,c,h,p){var g=null;if(bt(c))g=c;else if(Se(c))g=c(a.value,l,{level:a.level});else{var y=De({},Ah);if(a.level>0)for(var b=0;b<D0.length;++b)y[D0[b]]="{primary|"+y[D0[b]]+"}";var _=c?!1===c.inherit?c:Pe(c,y):y,w=dw(a.value,p);if(_[w])g=_[w];else if(_.inherit){for(b=cw.indexOf(w)-1;b>=0;--b)if(_[w]){g=_[w];break}g=g||y.none}if(Ee(g)){var S=null==a.level?0:a.level>=0?a.level:g.length+a.level;g=g[S=Math.min(S,g.length-1)]}}return Tf(new Date(a.value),g,p,h)}(e,r,o,this.getSetting("locale"),i)},t.prototype.getTicks=function(){var r=this._extent,o=[];if(!this._interval)return o;o.push({value:r[0],level:0});var i=this.getSetting("useUTC"),a=function(l,c,h,p){var y=cw,b=0;function _(ie,se,le,pe,me,ve,He){for(var nt=new Date(se),Me=se,je=nt[pe]();Me<le&&Me<=p[1];)He.push({value:Me}),nt[me](je+=ie),Me=nt.getTime();He.push({value:Me,notAdd:!0})}function w(ie,se,le){var pe=[],me=!se.length;if(!function(pt,St,Ze,yt){var Vt=ji(St),mn=ji(Ze),Dn=function(Cs){return N0(Vt,Cs,yt)===N0(mn,Cs,yt)},Tr=function(){return Dn("year")},Vn=function(){return Tr()&&Dn("month")},nr=function(){return Vn()&&Dn("day")},wr=function(){return nr()&&Dn("hour")},oo=function(){return wr()&&Dn("minute")},io=function(){return oo()&&Dn("second")};switch(pt){case"year":return Tr();case"month":return Vn();case"day":return nr();case"hour":return wr();case"minute":return oo();case"second":return io();case"millisecond":return io()&&Dn("millisecond")}}(kh(ie),p[0],p[1],h)){me&&(se=[{value:gI(new Date(p[0]),ie,h)},{value:p[1]}]);for(var ve=0;ve<se.length-1;ve++){var He=se[ve].value,nt=se[ve+1].value;if(He!==nt){var Me=void 0,je=void 0,tt=void 0;switch(ie){case"year":Me=Math.max(1,Math.round(c/Io/365)),je=E0(h),tt=hw(h);break;case"half-year":case"quarter":case"month":Me=hI(c),je=Af(h),tt=R0(h);break;case"week":case"half-week":case"day":Me=qE(c),je=L0(h),tt=pw(h);break;case"half-day":case"quarter-day":case"hour":Me=ZE(c),je=ki(h),tt=Dh(h);break;case"minute":Me=pI(c,!0),je=Ih(h),tt=kf(h);break;case"second":Me=pI(c,!1),je=Mm(h),tt=fw(h);break;case"millisecond":Me=fI(c),je=nc(h),tt=O0(h)}_(Me,He,nt,je,tt,0,pe),"year"===ie&&le.length>1&&0===ve&&le.unshift({value:le[0].value-Me})}}for(ve=0;ve<pe.length;ve++)le.push(pe[ve]);return pe}}for(var S=[],M=[],A=0,I=0,N=0;N<y.length&&b++<1e4;++N){var L=kh(y[N]);if(NE(y[N])&&(w(y[N],S[S.length-1]||[],M),L!==(y[N+1]?kh(y[N+1]):null))){if(M.length){I=A,M.sort(function(ie,se){return ie.value-se.value});for(var R=[],O=0;O<M.length;++O){var B=M[O].value;0!==O&&M[O-1].value===B||(R.push(M[O]),B>=p[0]&&B<=p[1]&&A++)}var G=(p[1]-p[0])/c;if(A>1.5*G&&I>G/1.5||(S.push(R),A>G||l===y[N]))break}M=[]}}var W=Xn(j(S,function(ie){return Xn(ie,function(se){return se.value>=p[0]&&se.value<=p[1]&&!se.notAdd})}),function(ie){return ie.length>0}),Y=[],X=W.length-1;for(N=0;N<W.length;++N)for(var J=W[N],ne=0;ne<J.length;++ne)Y.push({value:J[ne].value,level:X-N});Y.sort(function(ie,se){return ie.value-se.value});var oe=[];for(N=0;N<Y.length;++N)0!==N&&Y[N].value===Y[N-1].value||oe.push(Y[N]);return oe}(this._minLevelUnit,this._approxInterval,i,r);return(o=o.concat(a)).push({value:r[1],level:0}),o},t.prototype.calcNiceExtent=function(e){var r=this._extent;if(r[0]===r[1]&&(r[0]-=Io,r[1]+=Io),r[1]===-1/0&&r[0]===1/0){var o=new Date;r[1]=+new Date(o.getFullYear(),o.getMonth(),o.getDate()),r[0]=r[1]-Io}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,r,o){var i=this._extent;this._approxInterval=(i[1]-i[0])/(e=e||10),null!=r&&this._approxInterval<r&&(this._approxInterval=r),null!=o&&this._approxInterval>o&&(this._approxInterval=o);var l=F1.length,c=Math.min(function(h,p,g,y){for(;g<y;){var b=g+y>>>1;h[b][1]<p?g=b+1:y=b}return g}(F1,this._approxInterval,0,l),l-1);this._interval=F1[c][1],this._minLevelUnit=F1[Math.max(c-1,0)][0]},t.prototype.parse=function(e){return dt(e)?e:+ji(e)},t.prototype.contain=function(e){return md(this.parse(e),this._extent)},t.prototype.normalize=function(e){return py(this.parse(e),this._extent)},t.prototype.scale=function(e){return ga(e,this._extent)},t.type="time",t}(el),F1=[["second",Th],["minute",Ai],["hour",Ki],["quarter-day",216e5],["half-day",432e5],["day",10368e4],["half-week",3024e5],["week",6048e5],["month",26784e5],["quarter",8208e6],["half-year",ys/2],["year",ys]];function qE(n,t){return(n/=Io)>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function hI(n){return(n/=2592e6)>6?6:n>3?3:n>2?2:1}function ZE(n){return(n/=Ki)>12?12:n>6?6:n>3.5?4:n>2?2:1}function pI(n,t){return(n/=t?Ai:Th)>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function fI(n){return c_(n,!0)}function gI(n,t,e){var r=new Date(n);switch(kh(t)){case"year":case"month":r[R0(e)](0);case"day":r[pw(e)](1);case"hour":r[Dh(e)](0);case"minute":r[kf(e)](0);case"second":r[fw(e)](0),r[O0(e)](0)}return r.getTime()}pu.registerClass(eC);var mI=pu.prototype,qh=el.prototype,yI=co,$E=Math.floor,KE=Math.ceil,G1=Math.pow,_l=Math.log,H1=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new el,e._interval=0,e}return Ce(t,n),t.prototype.getTicks=function(e){var o=this._extent,i=this._originalScale.getExtent();return j(qh.getTicks.call(this,e),function(a){var l=a.value,c=co(G1(this.base,l));return c=l===o[0]&&this._fixMin?W1(c,i[0]):c,{value:c=l===o[1]&&this._fixMax?W1(c,i[1]):c}},this)},t.prototype.setExtent=function(e,r){var o=_l(this.base);e=_l(Math.max(0,e))/o,r=_l(Math.max(0,r))/o,qh.setExtent.call(this,e,r)},t.prototype.getExtent=function(){var e=this.base,r=mI.getExtent.call(this);r[0]=G1(e,r[0]),r[1]=G1(e,r[1]);var o=this._originalScale.getExtent();return this._fixMin&&(r[0]=W1(r[0],o[0])),this._fixMax&&(r[1]=W1(r[1],o[1])),r},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var r=this.base;e[0]=_l(e[0])/_l(r),e[1]=_l(e[1])/_l(r),mI.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,r){this.unionExtent(e.getApproximateExtent(r))},t.prototype.calcNiceTicks=function(e){e=e||10;var r=this._extent,o=r[1]-r[0];if(!(o===1/0||o<=0)){var i=dA(o);for(e/o*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var a=[co(KE(r[0]/i)*i),co($E(r[1]/i)*i)];this._interval=i,this._niceExtent=a}},t.prototype.calcNiceExtent=function(e){qh.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return md(e=_l(e)/_l(this.base),this._extent)},t.prototype.normalize=function(e){return py(e=_l(e)/_l(this.base),this._extent)},t.prototype.scale=function(e){return e=ga(e,this._extent),G1(this.base,e)},t.type="log",t}(pu),xs=H1.prototype;function W1(n,t){return yI(n,Bs(t))}xs.getMinorTicks=qh.getMinorTicks,xs.getLabel=qh.getLabel,pu.registerClass(H1);var tC=function(){function n(t,e,r){this._prepareParams(t,e,r)}return n.prototype._prepareParams=function(t,e,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var o=this._isOrdinal="ordinal"===t.type;this._needCrossZero="interval"===t.type&&e.getNeedCrossZero&&e.getNeedCrossZero();var i=e.get("min",!0);null==i&&(i=e.get("startValue",!0));var a=this._modelMinRaw=i;Se(a)?this._modelMinNum=my(t,a({min:r[0],max:r[1]})):"dataMin"!==a&&(this._modelMinNum=my(t,a));var l=this._modelMaxRaw=e.get("max",!0);if(Se(l)?this._modelMaxNum=my(t,l({min:r[0],max:r[1]})):"dataMax"!==l&&(this._modelMaxNum=my(t,l)),o)this._axisDataLen=e.getCategories().length;else{var c=e.get("boundaryGap"),h=Ee(c)?c:[c||0,c||0];this._boundaryGapInner="boolean"==typeof h[0]||"boolean"==typeof h[1]?[0,0]:[cs(h[0],1),cs(h[1],1)]}},n.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,r=this._dataMax,o=this._axisDataLen,i=this._boundaryGapInner,a=t?null:r-e||Math.abs(e),l="dataMin"===this._modelMinRaw?e:this._modelMinNum,c="dataMax"===this._modelMaxRaw?r:this._modelMaxNum,h=null!=l,p=null!=c;null==l&&(l=t?o?0:NaN:e-i[0]*a),null==c&&(c=t?o?o-1:NaN:r+i[1]*a),(null==l||!isFinite(l))&&(l=NaN),(null==c||!isFinite(c))&&(c=NaN);var g=lt(l)||lt(c)||t&&!o;this._needCrossZero&&(l>0&&c>0&&!h&&(l=0),l<0&&c<0&&!p&&(c=0));var y=this._determinedMin,b=this._determinedMax;return null!=y&&(l=y,h=!0),null!=b&&(c=b,p=!0),{min:l,max:c,minFixed:h,maxFixed:p,isBlank:g}},n.prototype.modifyDataMinMax=function(t,e){this[bI[t]]=e},n.prototype.setDeterminedMinMax=function(t,e){this[vI[t]]=e},n.prototype.freeze=function(){this.frozen=!0},n}(),vI={min:"_determinedMin",max:"_determinedMax"},bI={min:"_dataMin",max:"_dataMax"};function nC(n,t,e){var r=n.rawExtentInfo;return r||(r=new tC(n,t,e),n.rawExtentInfo=r,r)}function my(n,t){return null==t?null:lt(t)?NaN:n.parse(t)}function rC(n,t){var e=n.type,r=nC(n,t,n.getExtent()).calculate();n.setBlank(r.isBlank);var o=r.min,i=r.max,a=t.ecModel;if(a&&"time"===e){var l=KS("bar",a),c=!1;if(Z(l,function(g){c=c||g.getBaseAxis()===t.axis}),c){var h=JS(l),p=function(g,y,b,_){var w=b.axis.getExtent(),S=w[1]-w[0],M=function(O,B,G){if(O&&B)return O[$S(B)]}(_,b.axis);if(void 0===M)return{min:g,max:y};var A=1/0;Z(M,function(O){A=Math.min(O.offset,A)});var I=-1/0;Z(M,function(O){I=Math.max(O.offset+O.width,I)}),A=Math.abs(A),I=Math.abs(I);var N=A+I,L=y-g,R=L/(1-(A+I)/S)-L;return{min:g-=R*(A/N),max:y+=R*(I/N)}}(o,i,t,h);o=p.min,i=p.max}}return{extent:[o,i],fixMin:r.minFixed,fixMax:r.maxFixed}}function Zh(n,t){var e=t,r=rC(n,e),o=r.extent,i=e.get("splitNumber");n instanceof H1&&(n.base=e.get("logBase"));var a=n.type,l=e.get("interval"),c="interval"===a||"time"===a;n.setExtent(o[0],o[1]),n.calcNiceExtent({splitNumber:i,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:c?e.get("minInterval"):null,maxInterval:c?e.get("maxInterval"):null}),null!=l&&n.setInterval&&n.setInterval(l)}function yy(n,t){if(t=t||n.get("type"))switch(t){case"category":return new tr({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new eC({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(pu.getClass(t)||el)}}function tg(n){var t,e,i,r=n.getLabelModel().get("formatter"),o="category"===n.type?n.scale.getExtent()[0]:null;return"time"===n.scale.type?(e=r,function(i,a){return n.scale.getFormattedLabel(i,a,e)}):bt(r)?(i=r,function(a){var l=n.scale.getLabel(a);return i.replace("{value}",l??"")}):Se(r)?(t=r,function(i,a){return null!=o&&(a=i.value-o),t(U1(n,i),a,null!=i.level?{level:i.level}:null)}):function(i){return n.scale.getLabel(i)}}function U1(n,t){return"category"===n.type?n.scale.getLabel(t):t.value}function xI(n,t){var e=t*Math.PI/180,r=n.width,o=n.height,i=r*Math.abs(Math.cos(e))+Math.abs(o*Math.sin(e)),a=r*Math.abs(Math.sin(e))+Math.abs(o*Math.cos(e));return new Kt(n.x,n.y,i,a)}function j1(n){return n.get("interval")??"auto"}function $h(n){return"category"===n.type&&0===j1(n.getLabelModel())}function vy(n,t){var e={};return Z(n.mapDimensionsAll(t),function(r){e[dy(n,r)]=!0}),vn(e)}var Kh=function(){function n(){}return n.prototype.getNeedCrossZero=function(){return!this.option.scale},n.prototype.getCoordSysModel=function(){},n}(),wI=Object.freeze({__proto__:null,createList:function(n){return hu(null,n)},getLayoutRect:xo,dataStack:{isDimensionStacked:bl,enableDataStack:lI,getStackedDimension:dy},createScale:function(n,t){var e=t;t instanceof gr||(e=new gr(t));var r=yy(e);return r.setExtent(n[0],n[1]),Zh(r,e),r},mixinAxisModelCommonMethods:function(n){ur(n,Kh)},getECData:cn,createTextStyle:function(n,t){return Or(n,null,null,"normal"!==(t=t||{}).state)},createDimensions:function(n,t){return Qf(n,t).dimensions},createSymbol:vo,enableHoverEmphasis:Us});function Y1(n,t){return Math.abs(n-t)<1e-8}function vc(n,t,e){var r=0,o=n[0];if(!o)return!1;for(var i=1;i<n.length;i++){var a=n[i];r+=ms(o[0],o[1],a[0],a[1],t,e),o=a}var l=n[0];return Y1(o[0],l[0])&&Y1(o[1],l[1])||(r+=ms(o[0],o[1],l[0],l[1],t,e)),0!==r}var oC=[];function X1(n,t){for(var e=0;e<n.length;e++)Ye(n[e],n[e],t)}function SI(n,t,e,r){for(var o=0;o<n.length;o++){var i=n[o];r&&(i=r.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(xt(t,t,i),rn(e,e,i))}}var iC=function(){function n(t){this.name=t}return n.prototype.setCenter=function(t){this._center=t},n.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},n}(),CI=function(n,t){this.type="polygon",this.exterior=n,this.interiors=t},aC=function(n){this.type="linestring",this.points=n},sC=function(n){function t(e,r,o){var i=n.call(this,e)||this;return i.type="geoJSON",i.geometries=r,i._center=o&&[o[0],o[1]],i}return Ce(t,n),t.prototype.calcCenter=function(){for(var e,r=this.geometries,o=0,i=0;i<r.length;i++){var a=r[i],l=a.exterior,c=l&&l.length;c>o&&(e=a,o=c)}if(e)return function(p){for(var g=0,y=0,b=0,_=p.length,w=p[_-1][0],S=p[_-1][1],M=0;M<_;M++){var A=p[M][0],I=p[M][1],N=w*I-A*S;g+=N,y+=(w+A)*N,b+=(S+I)*N,w=A,S=I}return g?[y/g/3,b/g/3,g]:[p[0][0]||0,p[0][1]||0]}(e.exterior);var h=this.getBoundingRect();return[h.x+h.width/2,h.y+h.height/2]},t.prototype.getBoundingRect=function(e){var r=this._rect;if(r&&!e)return r;var o=[1/0,1/0],i=[-1/0,-1/0];return Z(this.geometries,function(a){"polygon"===a.type?SI(a.exterior,o,i,e):Z(a.points,function(l){SI(l,o,i,e)})}),isFinite(o[0])&&isFinite(o[1])&&isFinite(i[0])&&isFinite(i[1])||(o[0]=o[1]=i[0]=i[1]=0),r=new Kt(o[0],o[1],i[0]-o[0],i[1]-o[1]),e||(this._rect=r),r},t.prototype.contain=function(e){var r=this.getBoundingRect(),o=this.geometries;if(!r.contain(e[0],e[1]))return!1;e:for(var i=0,a=o.length;i<a;i++){var l=o[i];if("polygon"===l.type){var h=l.interiors;if(vc(l.exterior,e[0],e[1])){for(var p=0;p<(h?h.length:0);p++)if(vc(h[p],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,r,o,i){var a=this.getBoundingRect(),l=a.width/a.height;o?i||(i=o/l):o=l*i;for(var c=new Kt(e,r,o,i),h=a.calculateTransform(c),p=this.geometries,g=0;g<p.length;g++){var y=p[g];"polygon"===y.type?(X1(y.exterior,h),Z(y.interiors,function(b){X1(b,h)})):Z(y.points,function(b){X1(b,h)})}(a=this._rect).copy(c),this._center=[a.x+a.width/2,a.y+a.height/2]},t.prototype.cloneShallow=function(e){null==e&&(e=this.name);var r=new t(e,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},t}(iC),MI=function(n){function t(e,r){var o=n.call(this,e)||this;return o.type="geoSVG",o._elOnlyForCalculate=r,o}return Ce(t,n),t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,r=e.getBoundingRect(),o=[r.x+r.width/2,r.y+r.height/2],i=qd(oC),a=e;a&&!a.isGeoSVGGraphicRoot;)Ta(i,a.getLocalTransform(),i),a=a.parent;return Ns(i,i),Ye(o,o,i),o},t}(iC);function TI(n,t,e){for(var r=0;r<n.length;r++)n[r]=AI(n[r],t[r],e)}function AI(n,t,e){for(var r=[],o=t[0],i=t[1],a=0;a<n.length;a+=2){var l=n.charCodeAt(a)-64,c=n.charCodeAt(a+1)-64;l=l>>1^-(1&l),c=c>>1^-(1&c),o=l+=o,i=c+=i,r.push([l/e,c/e])}return r}function q1(n,t){return j(Xn((n=function(e){if(!e.UTF8Encoding)return e;var r=e,o=r.UTF8Scale;return null==o&&(o=1024),Z(r.features,function(i){var a=i.geometry,l=a.encodeOffsets,c=a.coordinates;if(l)switch(a.type){case"LineString":a.coordinates=AI(c,l,o);break;case"Polygon":case"MultiLineString":TI(c,l,o);break;case"MultiPolygon":Z(c,function(h,p){return TI(h,l[p],o)})}}),r.UTF8Encoding=!1,r}(n)).features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var r=e.properties,o=e.geometry,i=[];switch(o.type){case"Polygon":var a=o.coordinates;i.push(new CI(a[0],a.slice(1)));break;case"MultiPolygon":Z(o.coordinates,function(c){c[0]&&i.push(new CI(c[0],c.slice(1)))});break;case"LineString":i.push(new aC([o.coordinates]));break;case"MultiLineString":i.push(new aC(o.coordinates))}var l=new sC(r[t||"name"],i,r.cp);return l.properties=r,l})}var JE=Object.freeze({__proto__:null,linearMap:lr,round:co,asc:ds,getPrecision:Bs,getPrecisionSafe:l_,getPixelPrecision:Pv,getPercentWithPrecision:function(n,t,e){return n[t]&&u_(n,e)[t]||0},MAX_SAFE_INTEGER:Bv,remRadian:Xg,isRadianAroundZero:Yp,parseDate:ji,quantity:dA,quantityExponent:Vv,nice:c_,quantile:Ul,reformIntervals:d_,isNumeric:qg,numericToNumber:ul}),QE=Object.freeze({__proto__:null,parse:ji,format:Tf}),Z1=Object.freeze({__proto__:null,extendShape:Q_,extendPath:jA,makePath:bm,makeImage:b0,mergePath:za,resizePath:x0,createIcon:tu,updateProps:hr,initProps:to,getTransform:Va,clipPointsByRect:nw,clipRectByRect:rw,registerShape:Ys,getShapeClass:v0,Group:on,Image:jo,Text:Kn,Circle:da,Ellipse:gh,Sector:Ti,Ring:bh,Polygon:Zi,Polyline:$i,Rect:$n,Line:Yo,BezierCurve:ff,Arc:ym,IncrementalDisplayable:WA,CompoundPath:xh,LinearGradient:gf,RadialGradient:$_,BoundingRect:Kt}),kI=Object.freeze({__proto__:null,addCommas:Tm,toCamelCase:Am,normalizeCssArray:ru,encodeHTML:Co,formatTpl:Im,getTooltipMarker:mw,formatTime:function(n,t,e){"week"!==n&&"month"!==n&&"quarter"!==n&&"half-year"!==n&&"year"!==n||(n="MM-dd\nyyyy");var r=ji(t),o=e?"getUTC":"get",i=r[o+"FullYear"](),a=r[o+"Month"]()+1,l=r[o+"Date"](),c=r[o+"Hours"](),h=r[o+"Minutes"](),p=r[o+"Seconds"](),g=r[o+"Milliseconds"]();return n.replace("MM",hi(a,2)).replace("M",a).replace("yyyy",i).replace("yy",hi(i%100+"",2)).replace("dd",hi(l,2)).replace("d",l).replace("hh",hi(c,2)).replace("h",c).replace("mm",hi(h,2)).replace("m",h).replace("ss",hi(p,2)).replace("s",p).replace("SSS",hi(g,3))},capitalFirst:function(n){return n&&n.charAt(0).toUpperCase()+n.substr(1)},truncateText:Cr,getTextRect:function(n,t,e,r,o,i,a,l){return new Kn({style:{text:n,font:t,align:e,verticalAlign:r,padding:o,rich:i,overflow:a?"truncate":null,lineHeight:l}}).getBoundingRect()}}),II=Object.freeze({__proto__:null,map:j,each:Z,indexOf:$t,inherits:Kr,reduce:Jr,filter:Xn,bind:Fe,curry:_t,isArray:Ee,isString:bt,isObject:Ft,isFunction:Se,extend:De,defaults:Pe,clone:jt,merge:Ve}),by=Gn();function DI(n,t){var e=j(t,function(r){return n.scale.parse(r)});return"time"===n.type&&e.length>0&&(e.sort(),e.unshift(e[0]),e.push(e[e.length-1])),e}function K1(n,t){var r,l,o=uC(n,"labels"),i=j1(t);return J1(o,i)||Q1(o,i,{labels:Se(i)?cC(n,i):xy(n,r="auto"===i?by(l=n).autoInterval??(by(l).autoInterval=l.calculateCategoryInterval()):i),labelCategoryInterval:r})}function uC(n,t){return by(n)[t]||(by(n)[t]=[])}function J1(n,t){for(var e=0;e<n.length;e++)if(n[e].key===t)return n[e].value}function Q1(n,t,e){return n.push({key:t,value:e}),e}function xy(n,t,e){var r=tg(n),o=n.scale,i=o.getExtent(),a=n.getLabelModel(),l=[],c=Math.max((t||0)+1,1),h=i[0],p=o.count();0!==h&&c>1&&p/c>2&&(h=Math.round(Math.ceil(h/c)*c));var g=$h(n),y=a.get("showMinLabel")||g,b=a.get("showMaxLabel")||g;y&&h!==i[0]&&w(i[0]);for(var _=h;_<=i[1];_+=c)w(_);function w(S){var M={value:S};l.push(e?S:{formattedLabel:r(M),rawLabel:o.getLabel(M),tickValue:S})}return b&&_-c!==i[1]&&w(i[1]),l}function cC(n,t,e){var r=n.scale,o=tg(n),i=[];return Z(r.getTicks(),function(a){var l=r.getLabel(a),c=a.value;t(a.value,l)&&i.push(e?c:{formattedLabel:o(a),rawLabel:l,tickValue:c})}),i}var dC=[0,1],Bo=function(){function n(t,e,r){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=r||[0,0]}return n.prototype.contain=function(t){var e=this._extent,r=Math.min(e[0],e[1]),o=Math.max(e[0],e[1]);return t>=r&&t<=o},n.prototype.containData=function(t){return this.scale.contain(t)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(t){return Pv(t||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(t,e){var r=this._extent;r[0]=t,r[1]=e},n.prototype.dataToCoord=function(t,e){var r=this._extent,o=this.scale;return t=o.normalize(t),this.onBand&&"ordinal"===o.type&&eb(r=r.slice(),o.count()),lr(t,dC,r,e)},n.prototype.coordToData=function(t,e){var r=this._extent,o=this.scale;this.onBand&&"ordinal"===o.type&&eb(r=r.slice(),o.count());var i=lr(t,r,dC,e);return this.scale.scale(i)},n.prototype.pointToData=function(t,e){},n.prototype.getTicksCoords=function(t){var e=(t=t||{}).tickModel||this.getTickModel(),r=j(function lC(n,t){var e=n.getTickModel().get("customValues");return e?{ticks:DI(n,e)}:"category"===n.type?function(r,o){var i,a,l=uC(r,"ticks"),c=j1(o),h=J1(l,c);if(h)return h;if(o.get("show")&&!r.scale.isBlank()||(i=[]),Se(c))i=cC(r,c,!0);else if("auto"===c){var p=K1(r,r.getLabelModel());a=p.labelCategoryInterval,i=j(p.labels,function(g){return g.tickValue})}else i=xy(r,a=c,!0);return Q1(l,c,{ticks:i,tickCategoryInterval:a})}(n,t):{ticks:j(n.scale.getTicks(),function(r){return r.value})}}(this,e).ticks,function(o){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this);return function(o,i,a,l){var c=i.length;if(o.onBand&&!a&&c){var h,p,g=o.getExtent();if(1===c)i[0].coord=g[0],h=i[1]={coord:g[1]};else{var b=(i[c-1].coord-i[0].coord)/(i[c-1].tickValue-i[0].tickValue);Z(i,function(S){S.coord-=b/2}),p=1+o.scale.getExtent()[1]-i[c-1].tickValue,i.push(h={coord:i[c-1].coord+b*p})}var _=g[0]>g[1];w(i[0].coord,g[0])&&(l?i[0].coord=g[0]:i.shift()),l&&w(g[0],i[0].coord)&&i.unshift({coord:g[0]}),w(g[1],h.coord)&&(l?h.coord=g[1]:i.pop()),l&&w(h.coord,g[1])&&i.push({coord:g[1]})}function w(S,M){return S=co(S),M=co(M),_?S>M:S<M}}(this,r,e.get("alignWithLabel"),t.clamp),r},n.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return t>0&&t<100||(t=5),j(this.scale.getMinorTicks(t),function(e){return j(e,function(r){return{coord:this.dataToCoord(r),tickValue:r}},this)},this)},n.prototype.getViewLabels=function(){return function $1(n){var r,o,i,t=n.getLabelModel().get("customValues");if(t){var e=tg(n);return{labels:DI(n,t).map(function(r){var o={value:r};return{formattedLabel:e(o),rawLabel:n.scale.getLabel(o),tickValue:r}})}}return"category"===n.type?(o=(r=n).getLabelModel(),i=K1(r,o),!o.get("show")||r.scale.isBlank()?{labels:[],labelCategoryInterval:i.labelCategoryInterval}:i):function(r){var o=r.scale.getTicks(),i=tg(r);return{labels:j(o,function(a,l){return{level:a.level,formattedLabel:i(a,l),rawLabel:r.scale.getLabel(a),tickValue:a.value}})}}(n)}(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),r=e[1]-e[0]+(this.onBand?1:0);0===r&&(r=1);var o=Math.abs(t[1]-t[0]);return Math.abs(o)/r},n.prototype.calculateCategoryInterval=function(){return function(t){var G,W,e=(W=(G=t).getLabelModel(),{axisRotate:G.getRotate?G.getRotate():G.isHorizontal&&!G.isHorizontal()?90:0,labelRotate:W.get("rotate")||0,font:W.getFont()}),r=tg(t),o=(e.axisRotate-e.labelRotate)/180*Math.PI,i=t.scale,a=i.getExtent(),l=i.count();if(a[1]-a[0]<1)return 0;var c=1;l>40&&(c=Math.max(1,Math.floor(l/40)));for(var h=a[0],p=t.dataToCoord(h+1)-t.dataToCoord(h),g=Math.abs(p*Math.cos(o)),y=Math.abs(p*Math.sin(o)),b=0,_=0;h<=a[1];h+=c){var S,M=Ug(r({value:h}),e.font,"center","top");S=1.3*M.height,b=Math.max(b,1.3*M.width,7),_=Math.max(_,S,7)}var A=b/g,I=_/y;isNaN(A)&&(A=1/0),isNaN(I)&&(I=1/0);var N=Math.max(0,Math.floor(Math.min(A,I))),L=by(t.model),R=t.getExtent(),O=L.lastAutoInterval,B=L.lastTickCount;return null!=O&&null!=B&&Math.abs(O-N)<=1&&Math.abs(B-l)<=1&&O>N&&L.axisExtent0===R[0]&&L.axisExtent1===R[1]?N=O:(L.lastTickCount=l,L.lastAutoInterval=N,L.axisExtent0=R[0],L.axisExtent1=R[1]),N}(this)},n}();function eb(n,t){var e=(n[1]-n[0])/t/2;n[0]+=e,n[1]-=e}var ro=2*Math.PI,yd=gs.CMD,NI=["top","right","bottom","left"];function EI(n,t,e,r,o){var i=e.width,a=e.height;switch(n){case"top":r.set(e.x+i/2,e.y-t),o.set(0,-1);break;case"bottom":r.set(e.x+i/2,e.y+a+t),o.set(0,1);break;case"left":r.set(e.x-t,e.y+a/2),o.set(-1,0);break;case"right":r.set(e.x+i+t,e.y+a/2),o.set(1,0)}}function LI(n,t,e,r,o,i,a,l,c){a-=n,l-=t;var h=Math.sqrt(a*a+l*l),p=(a/=h)*e+n,g=(l/=h)*e+t;if(Math.abs(r-o)%ro<1e-4)return c[0]=p,c[1]=g,h-e;if(i){var y=r;r=Pa(o),o=Pa(y)}else r=Pa(r),o=Pa(o);r>o&&(o+=ro);var b=Math.atan2(l,a);if(b<0&&(b+=ro),b>=r&&b<=o||b+ro>=r&&b+ro<=o)return c[0]=p,c[1]=g,h-e;var _=e*Math.cos(r)+n,w=e*Math.sin(r)+t,S=e*Math.cos(o)+n,M=e*Math.sin(o)+t,A=(_-a)*(_-a)+(w-l)*(w-l),I=(S-a)*(S-a)+(M-l)*(M-l);return A<I?(c[0]=_,c[1]=w,Math.sqrt(A)):(c[0]=S,c[1]=M,Math.sqrt(I))}function _y(n,t,e,r,o,i,a,l){var c=o-n,h=i-t,p=e-n,g=r-t,y=Math.sqrt(p*p+g*g),b=(c*(p/=y)+h*(g/=y))/y;l&&(b=Math.min(Math.max(b,0),1));var _=a[0]=n+(b*=y)*p,w=a[1]=t+b*g;return Math.sqrt((_-o)*(_-o)+(w-i)*(w-i))}function hC(n,t,e,r,o,i,a){e<0&&(n+=e,e=-e),r<0&&(t+=r,r=-r);var l=n+e,c=t+r,h=a[0]=Math.min(Math.max(o,n),l),p=a[1]=Math.min(Math.max(i,t),c);return Math.sqrt((h-o)*(h-o)+(p-i)*(p-i))}var wl=[];function eL(n,t,e){var r=hC(t.x,t.y,t.width,t.height,n.x,n.y,wl);return e.set(wl[0],wl[1]),r}function RI(n,t,e){for(var r,o,i=0,a=0,l=0,c=0,h=1/0,p=t.data,g=n.x,y=n.y,b=0;b<p.length;){var _=p[b++];1===b&&(l=i=p[b],c=a=p[b+1]);var w=h;switch(_){case yd.M:i=l=p[b++],a=c=p[b++];break;case yd.L:w=_y(i,a,p[b],p[b+1],g,y,wl,!0),i=p[b++],a=p[b++];break;case yd.C:w=xi(i,a,p[b++],p[b++],p[b++],p[b++],p[b],p[b+1],g,y,wl),i=p[b++],a=p[b++];break;case yd.Q:w=Bl(i,a,p[b++],p[b++],p[b],p[b+1],g,y,wl),i=p[b++],a=p[b++];break;case yd.A:var S=p[b++],M=p[b++],A=p[b++],I=p[b++],N=p[b++],L=p[b++];b+=1;var R=!!(1-p[b++]);r=Math.cos(N)*A+S,o=Math.sin(N)*I+M,b<=1&&(l=r,c=o),w=LI(S,M,I,N,N+L,R,(g-S)*I/A+S,y,wl),i=Math.cos(N+L)*A+S,a=Math.sin(N+L)*I+M;break;case yd.R:w=hC(l=i=p[b++],c=a=p[b++],p[b++],p[b++],g,y,wl);break;case yd.Z:w=_y(i,a,l,c,g,y,wl,!0),i=l,a=c}w<h&&(h=w,e.set(wl[0],wl[1]))}return h}var _s=new pn,qr=new pn,Do=new pn,fu=new pn,Sl=new pn;function pC(n,t){if(n){var e=n.getTextGuideLine(),r=n.getTextContent();if(r&&e){var o=n.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],a=o.candidates||NI,l=r.getBoundingRect().clone();l.applyTransform(r.getComputedTransform());var c=1/0,h=o.anchor,p=n.getComputedTransform(),g=p&&Ns([],p),y=t.get("length2")||0;h&&Do.copy(h);for(var b=0;b<a.length;b++){EI(a[b],0,l,_s,fu),pn.scaleAndAdd(qr,_s,fu,y),qr.transform(g);var _=n.getBoundingRect(),w=h?h.distance(qr):n instanceof Yn?RI(qr,n.path,Do):eL(qr,_,Do);w<c&&(c=w,qr.transform(p),Do.transform(p),Do.toArray(i[0]),qr.toArray(i[1]),_s.toArray(i[2]))}fC(i,t.get("minTurnAngle")),e.setShape({points:i})}}}var tb=[],ma=new pn;function fC(n,t){if(t<=180&&t>0){t=t/180*Math.PI,_s.fromArray(n[0]),qr.fromArray(n[1]),Do.fromArray(n[2]),pn.sub(fu,_s,qr),pn.sub(Sl,Do,qr);var e=fu.len(),r=Sl.len();if(!(e<.001||r<.001)){fu.scale(1/e),Sl.scale(1/r);var o=fu.dot(Sl);if(Math.cos(t)<o){var i=_y(qr.x,qr.y,Do.x,Do.y,_s.x,_s.y,tb,!1);ma.fromArray(tb),ma.scaleAndAdd(Sl,i/Math.tan(Math.PI-t));var a=Do.x!==qr.x?(ma.x-qr.x)/(Do.x-qr.x):(ma.y-qr.y)/(Do.y-qr.y);if(isNaN(a))return;a<0?pn.copy(ma,qr):a>1&&pn.copy(ma,Do),ma.toArray(n[1])}}}}function tL(n,t,e){if(e<=180&&e>0){e=e/180*Math.PI,_s.fromArray(n[0]),qr.fromArray(n[1]),Do.fromArray(n[2]),pn.sub(fu,qr,_s),pn.sub(Sl,Do,qr);var r=fu.len(),o=Sl.len();if(!(r<.001||o<.001)&&(fu.scale(1/r),Sl.scale(1/o),fu.dot(t)<Math.cos(e))){var i=_y(qr.x,qr.y,Do.x,Do.y,_s.x,_s.y,tb,!1);ma.fromArray(tb);var a=Math.PI/2,l=a+Math.acos(Sl.dot(t))-e;if(l>=a)pn.copy(ma,Do);else{ma.scaleAndAdd(Sl,i/Math.tan(Math.PI/2-l));var c=Do.x!==qr.x?(ma.x-qr.x)/(Do.x-qr.x):(ma.y-qr.y)/(Do.y-qr.y);if(isNaN(c))return;c<0?pn.copy(ma,qr):c>1&&pn.copy(ma,Do)}ma.toArray(n[1])}}}function gC(n,t,e,r){var o="normal"===e,i=o?n:n.ensureState(e);i.ignore=t;var a=r.get("smooth");a&&!0===a&&(a=.3),i.shape=i.shape||{},a>0&&(i.shape.smooth=a);var l=r.getModel("lineStyle").getLineStyle();o?n.useStyle(l):i.style=l}function nL(n,t){var e=t.smooth,r=t.points;if(r)if(n.moveTo(r[0][0],r[0][1]),e>0&&r.length>=3){var o=Ae(r[0],r[1]),i=Ae(r[1],r[2]);if(!o||!i)return n.lineTo(r[1][0],r[1][1]),void n.lineTo(r[2][0],r[2][1]);var a=Math.min(o,i)*e,l=ft([],r[1],r[0],a/o),c=ft([],r[1],r[2],a/i),h=ft([],l,c,.5);n.bezierCurveTo(l[0],l[1],l[0],l[1],h[0],h[1]),n.bezierCurveTo(c[0],c[1],c[0],c[1],r[2][0],r[2][1])}else for(var p=1;p<r.length;p++)n.lineTo(r[p][0],r[p][1])}function ng(n,t,e){var r=n.getTextGuideLine(),o=n.getTextContent();if(o){for(var i=t.normal,a=i.get("show"),l=o.ignore,c=0;c<of.length;c++){var h=of[c],p=t[h],g="normal"===h;if(p){var y=p.get("show");if((g?l:We(o.states[h]&&o.states[h].ignore,l))||!We(y,a)){var b=g?r:r&&r.states[h];b&&(b.ignore=!0),r&&gC(r,!0,h,p);continue}r||(r=new $i,n.setTextGuideLine(r),g||!l&&a||gC(r,!0,"normal",t.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),gC(r,!1,h,p)}}if(r){Pe(r.style,e),r.style.fill=null;var _=i.get("showAbove");(n.textGuideLineConfig=n.textGuideLineConfig||{}).showAbove=_||!1,r.buildPath=nL}}else r&&n.removeTextGuideLine()}function rg(n,t){for(var e={normal:n.getModel(t=t||"labelLine")},r=0;r<ui.length;r++){var o=ui[r];e[o]=n.getModel([o,t])}return e}function wy(n){for(var t=[],e=0;e<n.length;e++){var r=n[e];if(!r.defaultAttr.ignore){var o=r.label,i=o.getComputedTransform(),a=o.getBoundingRect(),l=!i||i[1]<1e-5&&i[2]<1e-5,c=o.style.margin||0,h=a.clone();h.applyTransform(i),h.x-=c/2,h.y-=c/2,h.width+=c,h.height+=c;var p=l?new f0(a,i):null;t.push({label:o,labelLine:r.labelLine,rect:h,localRect:a,obb:p,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:l,transform:i})}}return t}function Jh(n,t,e,r,o,i){var a=n.length;if(!(a<2)){n.sort(function(O,B){return O.rect[t]-B.rect[t]});for(var l,c=0,h=!1,p=0,g=0;g<a;g++){var y=n[g],b=y.rect;(l=b[t]-c)<0&&(b[t]-=l,y.label[t]-=l,h=!0),p+=Math.max(-l,0),c=b[t]+b[e]}p>0&&i&&N(-p/a,0,a);var _,w,S=n[0],M=n[a-1];return A(),_<0&&L(-_,.8),w<0&&L(w,.8),A(),I(_,w,1),I(w,_,-1),A(),_<0&&R(-_),w<0&&R(w),h}function A(){_=S.rect[t]-r,w=o-M.rect[t]-M.rect[e]}function I(O,B,G){if(O<0){var W=Math.min(B,-O);if(W>0){N(W*G,0,a);var Y=W+O;Y<0&&L(-Y*G,1)}else L(-O*G,1)}}function N(O,B,G){0!==O&&(h=!0);for(var W=B;W<G;W++){var Y=n[W];Y.rect[t]+=O,Y.label[t]+=O}}function L(O,B){for(var G=[],W=0,Y=1;Y<a;Y++){var X=n[Y-1].rect,J=Math.max(n[Y].rect[t]-X[t]-X[e],0);G.push(J),W+=J}if(W){var ne=Math.min(Math.abs(O)/W,B);if(O>0)for(Y=0;Y<a-1;Y++)N(G[Y]*ne,0,Y+1);else for(Y=a-1;Y>0;Y--)N(-G[Y-1]*ne,Y,a)}}function R(O){var B=O<0?-1:1;O=Math.abs(O);for(var G=Math.ceil(O/(a-1)),W=0;W<a-1;W++)if(B>0?N(G,0,W+1):N(-G,a-W-1,a),(O-=G)<=0)return}}function mC(n,t,e,r){return Jh(n,"y","height",t,e,r)}function yC(n){var t=[];n.sort(function(w,S){return S.priority-w.priority});var e=new Kt(0,0,0,0);function r(w){if(!w.ignore){var S=w.ensureState("emphasis");null==S.ignore&&(S.ignore=!1)}w.ignore=!0}for(var o=0;o<n.length;o++){var i=n[o],a=i.axisAligned,l=i.localRect,c=i.transform,h=i.label,p=i.labelLine;e.copy(i.rect),e.width-=.1,e.height-=.1,e.x+=.05,e.y+=.05;for(var g=i.obb,y=!1,b=0;b<t.length;b++){var _=t[b];if(e.intersect(_.rect)){if(a&&_.axisAligned){y=!0;break}if(_.obb||(_.obb=new f0(_.localRect,_.transform)),g||(g=new f0(l,c)),g.intersect(_.obb)){y=!0;break}}}y?(r(h),p&&r(p)):(h.attr("ignore",i.defaultAttr.ignore),p&&p.attr("ignore",i.defaultAttr.labelGuideIgnore),t.push(i))}}function rL(n){if(n){for(var t=[],e=0;e<n.length;e++)t.push(n[e].slice());return t}}function oL(n,t){var e=n.label,r=t&&t.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:e.style.align,verticalAlign:e.style.verticalAlign,labelLinePoints:rL(r&&r.shape.points)}}var OI=["align","verticalAlign","width","height","fontSize"],ya=new dr,nb=Gn(),og=Gn();function gu(n,t,e){for(var r=0;r<e.length;r++){var o=e[r];null!=t[o]&&(n[o]=t[o])}}var Sy=["x","y","rotation"],PI=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(t,e,r,o,i){var a=o.style,l=o.__hostTarget.textConfig||{},c=o.getComputedTransform(),h=o.getBoundingRect().plain();Kt.applyTransform(h,h,c),c?ya.setLocalTransform(c):(ya.x=ya.y=ya.rotation=ya.originX=ya.originY=0,ya.scaleX=ya.scaleY=1),ya.rotation=Pa(ya.rotation);var p,g=o.__hostTarget;if(g){p=g.getBoundingRect().plain();var y=g.getComputedTransform();Kt.applyTransform(p,p,y)}var b=p&&g.getTextGuideLine();this._labelList.push({label:o,labelLine:b,seriesModel:r,dataIndex:t,dataType:e,layoutOption:i,computedLayoutOption:null,rect:h,hostRect:p,priority:p?p.width*p.height:0,defaultAttr:{ignore:o.ignore,labelGuideIgnore:b&&b.ignore,x:ya.x,y:ya.y,scaleX:ya.scaleX,scaleY:ya.scaleY,rotation:ya.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:o.cursor,attachedPos:l.position,attachedRot:l.rotation}})},n.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var r=t.__model,o=r.get("labelLayout");(Se(o)||vn(o).length)&&t.group.traverse(function(i){if(i.ignore)return!0;var a=i.getTextContent(),l=cn(i);a&&!a.disableLabelLayout&&e._addLabel(l.dataIndex,l.dataType,r,a,o)})},n.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),r=t.getHeight();function o(M,A){return function(){pC(M,A)}}for(var i=0;i<this._labelList.length;i++){var a=this._labelList[i],l=a.label,c=l.__hostTarget,h=a.defaultAttr,p=void 0;p=(p=Se(a.layoutOption)?a.layoutOption(oL(a,c)):a.layoutOption)||{},a.computedLayoutOption=p;var g=Math.PI/180;c&&c.setTextConfig({local:!1,position:null!=p.x||null!=p.y?null:h.attachedPos,rotation:null!=p.rotate?p.rotate*g:h.attachedRot,offset:[p.dx||0,p.dy||0]});var y=!1;if(null!=p.x?(l.x=Ct(p.x,e),l.setStyle("x",0),y=!0):(l.x=h.x,l.setStyle("x",h.style.x)),null!=p.y?(l.y=Ct(p.y,r),l.setStyle("y",0),y=!0):(l.y=h.y,l.setStyle("y",h.style.y)),p.labelLinePoints){var b=c.getTextGuideLine();b&&(b.setShape({points:p.labelLinePoints}),y=!1)}nb(l).needsUpdateLabelLine=y,l.rotation=null!=p.rotate?p.rotate*g:h.rotation,l.scaleX=h.scaleX,l.scaleY=h.scaleY;for(var _=0;_<OI.length;_++){var w=OI[_];l.setStyle(w,null!=p[w]?p[w]:h.style[w])}if(p.draggable){if(l.draggable=!0,l.cursor="move",c){var S=a.seriesModel;null!=a.dataIndex&&(S=a.seriesModel.getData(a.dataType).getItemModel(a.dataIndex)),l.on("drag",o(c,S.getModel("labelLine")))}}else l.off("drag"),l.cursor=h.cursor}},n.prototype.layout=function(t){var r=t.getWidth(),o=t.getHeight(),i=wy(this._labelList),a=Xn(i,function(c){return"shiftX"===c.layoutOption.moveOverlap}),l=Xn(i,function(c){return"shiftY"===c.layoutOption.moveOverlap});Jh(a,"x","width",0,r,void 0),mC(l,0,o),yC(Xn(i,function(c){return c.layoutOption.hideOverlap}))},n.prototype.processLabelsOverall=function(){var t=this;Z(this._chartViewList,function(e){var r=e.__model,o=e.ignoreLabelLineUpdate,i=r.isAnimationEnabled();e.group.traverse(function(a){if(a.ignore&&!a.forceLabelAnimation)return!0;var l=!o,c=a.getTextContent();!l&&c&&(l=nb(c).needsUpdateLabelLine),l&&t._updateLabelLine(a,r),i&&t._animateLabels(a,r)})})},n.prototype._updateLabelLine=function(t,e){var r=t.getTextContent(),o=cn(t),i=o.dataIndex;if(r&&null!=i){var a=e.getData(o.dataType),l=a.getItemModel(i),c={},h=a.getItemVisual(i,"style");if(h){var p=a.getVisual("drawType");c.stroke=h[p]}var g=l.getModel("labelLine");ng(t,rg(l),c),pC(t,g)}},n.prototype._animateLabels=function(t,e){var r=t.getTextContent(),o=t.getTextGuideLine();if(r&&(t.forceLabelAnimation||!r.ignore&&!r.invisible&&!t.disableLabelAnimation&&!yf(t))){var i=(_=nb(r)).oldLayout,a=cn(t),l=a.dataIndex,c={x:r.x,y:r.y,rotation:r.rotation},h=e.getData(a.dataType);if(i){r.attr(i);var p=t.prevStates;p&&($t(p,"select")>=0&&r.attr(_.oldLayoutSelect),$t(p,"emphasis")>=0&&r.attr(_.oldLayoutEmphasis)),hr(r,c,e,l)}else if(r.attr(c),!Ch(r).valueAnimation){var g=We(r.style.opacity,1);r.style.opacity=0,to(r,{style:{opacity:g}},e,l)}if(_.oldLayout=c,r.states.select){var y=_.oldLayoutSelect={};gu(y,c,Sy),gu(y,r.states.select,Sy)}if(r.states.emphasis){var b=_.oldLayoutEmphasis={};gu(b,c,Sy),gu(b,r.states.emphasis,Sy)}_f(r,l,h,e,e)}if(o&&!o.ignore&&!o.invisible){i=(_=og(o)).oldLayout;var _,w={points:o.shape.points};i?(o.attr({shape:i}),hr(o,{shape:w},e)):(o.setShape(w),o.style.strokePercent=0,to(o,{style:{strokePercent:1}},e)),_.oldLayout=w}},n}(),ig=Gn(),Qh=Math.sin,ep=Math.cos,Cy=Math.PI,bc=2*Math.PI,BI=180/Cy,zI=function(){function n(){}return n.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},n.prototype.moveTo=function(t,e){this._add("M",t,e)},n.prototype.lineTo=function(t,e){this._add("L",t,e)},n.prototype.bezierCurveTo=function(t,e,r,o,i,a){this._add("C",t,e,r,o,i,a)},n.prototype.quadraticCurveTo=function(t,e,r,o){this._add("Q",t,e,r,o)},n.prototype.arc=function(t,e,r,o,i,a){this.ellipse(t,e,r,r,0,o,i,a)},n.prototype.ellipse=function(t,e,r,o,i,a,l,c){var _,h=l-a,p=!c,g=Math.abs(h),y=as(g-bc)||(p?h>=bc:-h>=bc),b=h>0?h%bc:h%bc+bc;_=!!y||!as(g)&&b>=Cy==!!p;var w=t+r*ep(a),S=e+o*Qh(a);this._start&&this._add("M",w,S);var M=Math.round(i*BI);if(y){var A=1/this._p,I=(p?1:-1)*(bc-A);this._add("A",r,o,M,1,+p,t+r*ep(a+I),e+o*Qh(a+I)),A>.01&&this._add("A",r,o,M,0,+p,w,S)}else{var N=t+r*ep(l),L=e+o*Qh(l);this._add("A",r,o,M,+_,+p,N,L)}},n.prototype.rect=function(t,e,r,o){this._add("M",t,e),this._add("l",r,0),this._add("l",0,o),this._add("l",-r,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(t,e,r,o,i,a,l,c,h){for(var p=[],g=this._p,y=1;y<arguments.length;y++){var b=arguments[y];if(isNaN(b))return void(this._invalid=!0);p.push(Math.round(b*g)/g)}this._d.push(t+p.join(" ")),this._start="Z"===t},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n}(),ag="none",iL=Math.round,vC=["lineCap","miterLimit","lineJoin"],VI=j(vC,function(n){return"stroke-"+n.toLowerCase()}),GI="http://www.w3.org/2000/svg",bC="http://www.w3.org/1999/xlink",tp="ecmeta_";function HI(n){return document.createElementNS(GI,n)}function ni(n,t,e,r,o){return{tag:n,attrs:e||{},children:r,text:o,key:t}}function sg(n,t){var e=(t=t||{}).newline?"\n":"";return function r(o){var i=o.children,a=o.tag,c=o.text;return function(h,p){var g=[];if(p)for(var y in p){var b=p[y],_=y;!1!==b&&(!0!==b&&null!=b&&(_+='="'+b+'"'),g.push(_))}return"<"+h+" "+g.join(" ")+">"}(a,o.attrs)+("style"!==a?Co(c):c||"")+(i?""+e+j(i,function(h){return r(h)}).join(e)+e:"")+"</"+a+">"}(n)}function va(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function rb(n,t,e,r){return ni("svg","root",{width:n,height:t,xmlns:GI,"xmlns:xlink":bC,version:"1.1",baseProfile:"full",viewBox:!!r&&"0 0 "+n+" "+t},e)}var WI=0;function UI(){return WI++}var jI={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},vd="transform-origin";function YI(n,t,e){var r=De({},n.shape);De(r,t),n.buildPath(e,r);var o=new zI;return o.reset(be(n)),e.rebuildPath(o,1),o.generateStr(),o.getStr()}function XI(n,t){var e=t.originX,r=t.originY;(e||r)&&(n[vd]=e+"px "+r+"px")}var aL={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function xC(n,t){var e=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[e]=n,e}function _C(n){return bt(n)?jI[n]?"cubic-bezier("+jI[n]+")":Pp(n)?n:"":""}function My(n,t,e,r){var o=n.animators,i=o.length,a=[];if(n instanceof xh){var l=function(A,I,N){var L,R,B={};if(Z(A.shape.paths,function(W){var Y=va(N.zrId);Y.animation=!0,My(W,{},Y,!0);var X=Y.cssAnims,J=Y.cssNodes,ne=vn(X),oe=ne.length;if(oe){var ie=X[R=ne[oe-1]];for(var se in ie){var le=ie[se];B[se]=B[se]||{d:""},B[se].d+=le.d||""}for(var pe in J){var me=J[pe].animation;me.indexOf(R)>=0&&(L=me)}}}),L){I.d=!1;var G=xC(B,N);return L.replace(R,G)}}(n,t,e);if(l)a.push(l);else if(!i)return}else if(!i)return;for(var c={},h=0;h<i;h++){var p=o[h],g=[p.getMaxTime()/1e3+"s"],y=_C(p.getClip().easing),b=p.getDelay();g.push(y||"linear"),b&&g.push(b/1e3+"s"),p.getLoop()&&g.push("infinite");var _=g.join(" ");c[_]=c[_]||[_,[]],c[_][1].push(p)}function w(A){var I,N=A[1],L=N.length,R={},O={},B={},G="animation-timing-function";function W(ut,pt,St){for(var Ze=ut.getTracks(),yt=ut.getMaxTime(),Vt=0;Vt<Ze.length;Vt++){var mn=Ze[Vt];if(mn.needsAnimate()){var Dn=mn.keyframes,Tr=mn.propName;if(St&&(Tr=St(Tr)),Tr)for(var Vn=0;Vn<Dn.length;Vn++){var nr=Dn[Vn],wr=Math.round(nr.time/yt*100)+"%",oo=_C(nr.easing),io=nr.rawValue;(bt(io)||dt(io))&&(pt[wr]=pt[wr]||{},pt[wr][Tr]=nr.rawValue,oo&&(pt[wr][G]=oo))}}}}for(var Y=0;Y<L;Y++)(ve=(me=N[Y]).targetName)?"shape"===ve&&W(me,O):!r&&W(me,R);for(var X in R){var J={};iA(J,n),De(J,R[X]);var ne=Te(J),oe=R[X][G];B[X]=ne?{transform:ne}:{},XI(B[X],J),oe&&(B[X][G]=oe)}var ie=!0;for(var X in O){B[X]=B[X]||{};var se=!I;oe=O[X][G],se&&(I=new gs);var le=I.len();I.reset(),B[X].d=YI(n,O[X],I);var pe=I.len();if(!se&&le!==pe){ie=!1;break}oe&&(B[X][G]=oe)}if(!ie)for(var X in B)delete B[X].d;if(!r)for(Y=0;Y<L;Y++){var me,ve;"style"===(ve=(me=N[Y]).targetName)&&W(me,B,function(ut){return aL[ut]})}var He,nt=vn(B),Me=!0;for(Y=1;Y<nt.length;Y++){var je=nt[Y-1];if(B[je][vd]!==B[nt[Y]][vd]){Me=!1;break}He=B[je][vd]}if(Me&&He){for(var X in B)B[X][vd]&&delete B[X][vd];t[vd]=He}if(Xn(nt,function(ut){return vn(B[ut]).length>0}).length)return xC(B,e)+" "+A[0]+" both"}for(var S in c)(l=w(c[S]))&&a.push(l);if(a.length){var M=e.zrId+"-cls-"+UI();e.cssNodes["."+M]={animation:a.join(",")},t.class=M}}function qI(n,t,e,r){var o=JSON.stringify(n),i=e.cssStyleCache[o];i||(i=e.zrId+"-cls-"+UI(),e.cssStyleCache[o]=i,e.cssNodes["."+i+(r?":hover":"")]=n),t.class=t.class?t.class+" "+i:i}var np=Math.round;function wC(n){return n&&bt(n.src)}function SC(n){return n&&Se(n.toDataURL)}function ob(n,t,e,r){(function FI(n,t,e,r){var I,o=null==t.opacity?1:t.opacity;if(e instanceof jo)n("opacity",o);else{if(null!=(I=t.fill)&&I!==ag){var i=Si(t.fill);n("fill",i.color);var a=null!=t.fillOpacity?t.fillOpacity*i.opacity*o:i.opacity*o;(r||a<1)&&n("fill-opacity",a)}else n("fill",ag);if(function(A){var I=A.stroke;return null!=I&&I!==ag}(t)){var l=Si(t.stroke);n("stroke",l.color);var c=t.strokeNoScale?e.getLineScale():1,h=c?(t.lineWidth||0)/c:0,p=null!=t.strokeOpacity?t.strokeOpacity*l.opacity*o:l.opacity*o,g=t.strokeFirst;if((r||1!==h)&&n("stroke-width",h),(r||g)&&n("paint-order",g?"stroke":"fill"),(r||p<1)&&n("stroke-opacity",p),t.lineDash){var y=h1(e),b=y[0],_=y[1];b&&(_=iL(_||0),n("stroke-dasharray",b.join(",")),(_||r)&&n("stroke-dashoffset",_))}else r&&n("stroke-dasharray",ag);for(var w=0;w<vC.length;w++){var S=vC[w];if(r||t[S]!==t0[S]){var M=t[S]||t0[S];M&&n(VI[w],M)}}}else r&&n("stroke",ag)}})(function(o,i){var a="fill"===o||"stroke"===o;a&&ee(i)?mu(t,n,o,r):a&&Hl(i)?lg(e,n,o,r):n[o]=a&&"none"===i?"transparent":i},t,e,!1),function(o,i,a){var L,l=o.style;if((L=l)&&(L.shadowBlur||L.shadowOffsetX||L.shadowOffsetY)){var c=function(L){var R=L.style,O=L.getGlobalScale();return[R.shadowColor,(R.shadowBlur||0).toFixed(2),(R.shadowOffsetX||0).toFixed(2),(R.shadowOffsetY||0).toFixed(2),O[0],O[1]].join(",")}(o),h=a.shadowCache,p=h[c];if(!p){var g=o.getGlobalScale(),y=g[0],b=g[1];if(!y||!b)return;var _=l.shadowOffsetX||0,w=l.shadowOffsetY||0,S=l.shadowBlur,M=Si(l.shadowColor),A=M.opacity,I=M.color,N=S/2/y+" "+S/2/b;p=a.zrId+"-s"+a.shadowIdx++,a.defs[p]=ni("filter",p,{id:p,x:"-100%",y:"-100%",width:"300%",height:"300%"},[ni("feDropShadow","",{dx:_/y,dy:w/b,stdDeviation:N,"flood-color":I,"flood-opacity":A})]),h[c]=p}i.filter=ae(p)}}(e,n,r)}function ib(n,t){var e=uA(t);e&&(e.each(function(r,o){null!=r&&(n[(tp+o).toLowerCase()]=r+"")}),t.isSilent()&&(n[tp+"silent"]="true"))}function ZI(n){return as(n[0]-1)&&as(n[1])&&as(n[2])&&as(n[3]-1)}function CC(n,t,e){if(t&&(!as((o=t)[4])||!as(o[5])||!ZI(t))){var r=e?10:1e4;n.transform=ZI(t)?"translate("+np(t[4]*r)/r+" "+np(t[5]*r)/r+")":function(o){return"matrix("+Fu(o[0])+","+Fu(o[1])+","+Fu(o[2])+","+Fu(o[3])+","+Gu(o[4])+","+Gu(o[5])+")"}(t)}var o}function MC(n,t,e){for(var r=n.points,o=[],i=0;i<r.length;i++)o.push(np(r[i][0]*e)/e),o.push(np(r[i][1]*e)/e);t.points=o.join(" ")}function Ty(n){return!n.smooth}var TC,Ay,$I={circle:[(TC=["cx","cy","r"],Ay=j(TC,function(n){return"string"==typeof n?[n,n]:n}),function(n,t,e){for(var r=0;r<Ay.length;r++){var o=Ay[r],i=n[o[0]];null!=i&&(t[o[1]]=np(i*e)/e)}})],polyline:[MC,Ty],polygon:[MC,Ty]};function KI(n,t){var e=n.style,r=n.shape,o=$I[n.type],i={},a=t.animation,l="path",c=n.style.strokePercent,h=t.compress&&be(n)||4;if(!o||t.willUpdate||o[1]&&!o[1](r)||a&&function(S){for(var M=S.animators,A=0;A<M.length;A++)if("shape"===M[A].targetName)return!0;return!1}(n)||c<1){var p=!n.path||n.shapeChanged();n.path||n.createPathProxy();var g=n.path;p&&(g.beginPath(),n.buildPath(g,n.shape),n.pathUpdated());var y=g.getVersion(),b=n,_=b.__svgPathBuilder;b.__svgPathVersion===y&&_&&c===b.__svgPathStrokePercent||(_||(_=b.__svgPathBuilder=new zI),_.reset(h),g.rebuildPath(_,c),_.generateStr(),b.__svgPathVersion=y,b.__svgPathStrokePercent=c),i.d=_.getStr()}else{l=n.type;var w=Math.pow(10,h);o[0](r,i,w)}return CC(i,n.transform),ob(i,e,n,t),ib(i,n),t.animation&&My(n,i,t),t.emphasis&&function(S,M,A){if(!S.ignore)if(S.isSilent())qI(G={"pointer-events":"none"},M,A,!0);else{var I=S.states.emphasis&&S.states.emphasis.style?S.states.emphasis.style:{},N=I.fill;if(!N){var L=S.style&&S.style.fill,R=S.states.select&&S.states.select.style&&S.states.select.style.fill,O=S.currentStates.indexOf("select")>=0&&R||L;O&&(N=th(O))}var B=I.lineWidth;B&&(B/=!I.strokeNoScale&&S.transform?S.transform[0]:1);var G={cursor:"pointer"};N&&(G.fill=N),I.stroke&&(G.stroke=I.stroke),B&&(G["stroke-width"]=B),qI(G,M,A,!0)}}(n,i,t),ni(l,n.id+"",i)}function ab(n,t){return n instanceof Yn?KI(n,t):n instanceof jo?function(e,r){var o=e.style,i=o.image;if(i&&!bt(i)&&(wC(i)?i=i.src:SC(i)&&(i=i.toDataURL())),i){var a=o.x||0,l=o.y||0,c={href:i,width:o.width,height:o.height};return a&&(c.x=a),l&&(c.y=l),CC(c,e.transform),ob(c,o,e,r),ib(c,e),r.animation&&My(e,c,r),ni("image",e.id+"",c)}}(n,t):n instanceof Xi?function(e,r){var w,S,M,o=e.style,i=o.text;if(null!=i&&(i+=""),i&&!isNaN(o.x)&&!isNaN(o.y)){var a=o.font||an,l=o.x||0,c=(w=o.y||0,S=Nv(a),"top"===(M=o.textBaseline)?w+=S/2:"bottom"===M&&(w-=S/2),w),h={"dominant-baseline":"central","text-anchor":Ho[o.textAlign]||o.textAlign};if(qc(o)){var p="",g=o.fontStyle,y=N_(o.fontSize);if(!parseFloat(y))return;var _=o.fontWeight;p+="font-size:"+y+";font-family:"+(o.fontFamily||Bi)+";",g&&"normal"!==g&&(p+="font-style:"+g+";"),_&&"normal"!==_&&(p+="font-weight:"+_+";"),h.style=p}else h.style="font: "+a;return i.match(/\s/)&&(h["xml:space"]="preserve"),l&&(h.x=l),c&&(h.y=c),CC(h,e.transform),ob(h,o,e,r),ib(h,e),r.animation&&My(e,h,r),ni("text",e.id+"",h,void 0,i)}}(n,t):void 0}function mu(n,t,e,r){var o,i=n[e],a={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(q(i))o="linearGradient",a.x1=i.x,a.y1=i.y,a.x2=i.x2,a.y2=i.y2;else{if(!Q(i))return;o="radialGradient",a.cx=We(i.x,.5),a.cy=We(i.y,.5),a.r=We(i.r,.5)}for(var l=i.colorStops,c=[],h=0,p=l.length;h<p;++h){var g=100*Gu(l[h].offset)+"%",y=Si(l[h].color),_=y.opacity,w={offset:g};w["stop-color"]=y.color,_<1&&(w["stop-opacity"]=_),c.push(ni("stop",h+"",w))}var S=sg(ni(o,"",a,c)),M=r.gradientCache,A=M[S];A||(A=r.zrId+"-g"+r.gradientIdx++,M[S]=A,a.id=A,r.defs[A]=ni(o,A,a,c)),t[e]=ae(A)}function lg(n,t,e,r){var o,i=n.style[e],a=n.getBoundingRect(),l={},c=i.repeat,h="no-repeat"===c,p="repeat-x"===c,g="repeat-y"===c;if(ss(i)){var y=i.imageWidth,b=i.imageHeight,_=void 0,w=i.image;if(bt(w)?_=w:wC(w)?_=w.src:SC(w)&&(_=w.toDataURL()),typeof Image>"u"){var S="Image width/height must been given explictly in svg-ssr renderer.";bn(y,S),bn(b,S)}else if(null==y||null==b){var M=function(W,Y){if(W){var X=W.elm,J=y||Y.width,ne=b||Y.height;"pattern"===W.tag&&(p?(ne=1,J/=a.width):g&&(J=1,ne/=a.height)),W.attrs.width=J,W.attrs.height=ne,X&&(X.setAttribute("width",J),X.setAttribute("height",ne))}},A=Xv(_,null,n,function(W){h||M(R,W),M(o,W)});A&&A.width&&A.height&&(y=y||A.width,b=b||A.height)}o=ni("image","img",{href:_,width:y,height:b}),l.width=y,l.height=b}else i.svgElement&&(o=jt(i.svgElement),l.width=i.svgWidth,l.height=i.svgHeight);if(o){var I,N;h?I=N=1:p?(N=1,I=l.width/a.width):g?(I=1,N=l.height/a.height):l.patternUnits="userSpaceOnUse",null==I||isNaN(I)||(l.width=I),null==N||isNaN(N)||(l.height=N);var L=Te(i);L&&(l.patternTransform=L);var R=ni("pattern","",l,[o]),O=sg(R),B=r.patternCache,G=B[O];G||(G=r.zrId+"-p"+r.patternIdx++,B[O]=G,l.id=G,R=r.defs[G]=ni("pattern",G,l,[o])),t[e]=ae(G)}}function AC(n,t,e){var r=e.clipPathCache,o=e.defs,i=r[n.id];if(!i){var a={id:i=e.zrId+"-c"+e.clipPathIdx++};r[n.id]=i,o[i]=ni("clipPath",i,a,[KI(n,e)])}t["clip-path"]=ae(i)}function JI(n){return document.createTextNode(n)}function ug(n,t,e){n.insertBefore(t,e)}function kC(n,t){n.removeChild(t)}function sb(n,t){n.appendChild(t)}function lb(n){return n.parentNode}function ub(n){return n.nextSibling}function ba(n,t){n.textContent=t}var QI=ni("","");function cb(n){return void 0===n}function yu(n){return void 0!==n}function eD(n,t,e){for(var r={},o=t;o<=e;++o){var i=n[o].key;void 0!==i&&(r[i]=o)}return r}function rp(n,t){return n.tag===t.tag&&n.key===t.key}function ky(n){var t,e=n.children,r=n.tag;if(yu(r)){var o=n.elm=HI(r);if(db(QI,n),Ee(e))for(t=0;t<e.length;++t){var i=e[t];null!=i&&sb(o,ky(i))}else yu(n.text)&&!Ft(n.text)&&sb(o,JI(n.text))}else n.elm=JI(n.text);return n.elm}function IC(n,t,e,r,o){for(;r<=o;++r){var i=e[r];null!=i&&ug(n,ky(i),t)}}function Iy(n,t,e,r){for(;e<=r;++e){var o=t[e];null!=o&&(yu(o.tag)?kC(lb(o.elm),o.elm):kC(n,o.elm))}}function db(n,t){var e,r=t.elm,o=n&&n.attrs||{},i=t.attrs||{};if(o!==i){for(e in i){var a=i[e];o[e]!==a&&(!0===a?r.setAttribute(e,""):!1===a?r.removeAttribute(e):"style"===e?r.style.cssText=a:120!==e.charCodeAt(0)?r.setAttribute(e,a):"xmlns:xlink"===e||"xmlns"===e?r.setAttributeNS("http://www.w3.org/2000/xmlns/",e,a):58===e.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",e,a):58===e.charCodeAt(5)?r.setAttributeNS(bC,e,a):r.setAttribute(e,a))}for(e in o)e in i||r.removeAttribute(e)}}function bd(n,t){var e=t.elm=n.elm,r=n.children,o=t.children;n!==t&&(db(n,t),cb(t.text)?yu(r)&&yu(o)?r!==o&&function(i,a,l){for(var c,h,p,g=0,y=0,b=a.length-1,_=a[0],w=a[b],S=l.length-1,M=l[0],A=l[S];g<=b&&y<=S;)null==_?_=a[++g]:null==w?w=a[--b]:null==M?M=l[++y]:null==A?A=l[--S]:rp(_,M)?(bd(_,M),_=a[++g],M=l[++y]):rp(w,A)?(bd(w,A),w=a[--b],A=l[--S]):rp(_,A)?(bd(_,A),ug(i,_.elm,ub(w.elm)),_=a[++g],A=l[--S]):rp(w,M)?(bd(w,M),ug(i,w.elm,_.elm),w=a[--b],M=l[++y]):(cb(c)&&(c=eD(a,g,b)),cb(h=c[M.key])||(p=a[h]).tag!==M.tag?ug(i,ky(M),_.elm):(bd(p,M),a[h]=void 0,ug(i,p.elm,_.elm)),M=l[++y]);(g<=b||y<=S)&&(g>b?IC(i,null==l[S+1]?null:l[S+1].elm,l,y,S):Iy(i,a,g,b))}(e,r,o):yu(o)?(yu(n.text)&&ba(e,""),IC(e,null,o,0,o.length-1)):yu(r)?Iy(e,r,0,r.length-1):yu(n.text)&&ba(e,""):n.text!==t.text&&(yu(r)&&Iy(e,r,0,r.length-1),ba(e,t.text)))}var DC=0,cg=function(){function n(t,e,r){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=e,this._opts=r=De({},r),this.root=t,this._id="zr"+DC++,this._oldVNode=rb(r.width,r.height),t&&!r.ssr){var o=this._viewport=document.createElement("div");o.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=HI("svg");db(null,this._oldVNode),o.appendChild(i),t.appendChild(o)}this.resize(r.width,r.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",function(e,r){if(rp(e,r))bd(e,r);else{var o=e.elm,i=lb(o);ky(r),null!==i&&(ug(i,r.elm,ub(o)),Iy(i,[e],0,0))}}(this._oldVNode,t),this._oldVNode=t}},n.prototype.renderOneToVNode=function(t){return ab(t,va(this._id))},n.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),r=this._width,o=this._height,i=va(this._id);i.animation=t.animation,i.willUpdate=t.willUpdate,i.compress=t.compress,i.emphasis=t.emphasis;var a=[],l=this._bgVNode=function(y,b,_,w){var S;if(_&&"none"!==_)if(S=ni("rect","bg",{width:y,height:b,x:"0",y:"0"}),ee(_))mu({fill:_},S.attrs,"fill",w);else if(Hl(_))lg({style:{fill:_},dirty:zr,getBoundingRect:function(){return{width:y,height:b}}},S.attrs,"fill",w);else{var M=Si(_),I=M.opacity;S.attrs.fill=M.color,I<1&&(S.attrs["fill-opacity"]=I)}return S}(r,o,this._backgroundColor,i);l&&a.push(l);var c=t.compress?null:this._mainVNode=ni("g","main",{},[]);this._paintList(e,i,c?c.children:a),c&&a.push(c);var y,b,w,S,M,A,I,h=j(vn(i.defs),function(y){return i.defs[y]});if(h.length&&a.push(ni("defs","defs",{},h)),t.animation){var p=(b=i.cssAnims,S=" {"+(w=({newline:!0}||{}).newline?"\n":""),M=w+"}",A=j(vn(y=i.cssNodes),function(N){return N+S+j(vn(y[N]),function(L){return L+":"+y[N][L]+";"}).join(w)+M}).join(w),I=j(vn(b),function(N){return"@keyframes "+N+S+j(vn(b[N]),function(L){return L+S+j(vn(b[N][L]),function(R){var O=b[N][L][R];return"d"===R&&(O='path("'+O+'")'),R+":"+O+";"}).join(w)+M}).join(w)+M}).join(w),A||I?["<![CDATA[",A,I,"]]>"].join(w):"");if(p){var g=ni("style","stl",{},[],p);a.push(g)}}return rb(r,o,a,t.useViewBox)},n.prototype.renderToString=function(t){return sg(this.renderToVNode({animation:We((t=t||{}).cssAnimation,!0),emphasis:We(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:We(t.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(t){this._backgroundColor=t},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(t,e,r){for(var o,i,a=t.length,l=[],c=0,h=0,p=0;p<a;p++){var g=t[p];if(!g.invisible){var y=g.__clipPaths,b=y&&y.length||0,_=i&&i.length||0,w=void 0;for(w=Math.max(b-1,_-1);w>=0&&(!y||!i||y[w]!==i[w]);w--);for(var S=_-1;S>w;S--)o=l[--c-1];for(var M=w+1;M<b;M++){var A={};AC(y[M],A,e);var I=ni("g","clip-g-"+h++,A,[]);(o?o.children:r).push(I),l[c++]=I,o=I}i=y;var N=ab(g,e);N&&(o?o.children:r).push(N)}}},n.prototype.resize=function(t,e){var r=this._opts,o=this.root,i=this._viewport;if(null!=t&&(r.width=t),null!=e&&(r.height=e),o&&i&&(i.style.display="none",t=Uh(o,0,r),e=Uh(o,1,r),i.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,i){var a=i.style;a.width=t+"px",a.height=e+"px"}if(Hl(this._backgroundColor))this.refresh();else{var l=this._svgDom;l&&(l.setAttribute("width",t),l.setAttribute("height",e));var c=this._bgVNode&&this._bgVNode.elm;c&&(c.setAttribute("width",t),c.setAttribute("height",e))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(t){var e=this.renderToString(),r="data:image/svg+xml;";return t?(e=Ue(e))&&r+"base64,"+e:r+"charset=UTF-8,"+encodeURIComponent(e)},n}();function EC(n,t,e){var r=Tn.createCanvas(),o=t.getWidth(),i=t.getHeight(),a=r.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=o+"px",a.height=i+"px",r.setAttribute("data-zr-dom-id",n)),r.width=o*e,r.height=i*e,r}var hb=function(n){function t(e,r,o){var i,a=n.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null,o=o||Gp,"string"==typeof e?i=EC(e,r,o):Ft(e)&&(e=(i=e).id),a.id=e,a.dom=i;var l=i.style;return l&&(Iu(i),i.onselectstart=function(){return!1},l.padding="0",l.margin="0",l.borderWidth="0"),a.painter=r,a.dpr=o,a}return Ce(t,n),t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=EC("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,r,o,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a,l=[],c=this.maxRepaintRectCount,h=!1,p=new Kt(0,0,0,0);function g(A){if(A.isFinite()&&!A.isZero())if(0===l.length)(I=new Kt(0,0,0,0)).copy(A),l.push(I);else{for(var I,N=!1,L=1/0,R=0,O=0;O<l.length;++O){var B=l[O];if(B.intersect(A)){var G=new Kt(0,0,0,0);G.copy(B),G.union(A),l[O]=G,N=!0;break}if(h){p.copy(A),p.union(B);var X=p.width*p.height-A.width*A.height-B.width*B.height;X<L&&(L=X,R=O)}}h&&(l[R].union(A),N=!0),!N&&((I=new Kt(0,0,0,0)).copy(A),l.push(I)),h||(h=l.length>=c)}}for(var y=this.__startIndex;y<this.__endIndex;++y)if(w=e[y]){var b=w.shouldBePainted(o,i,!0,!0);(S=w.__isRendered&&(1&w.__dirty||!b)?w.getPrevPaintRect():null)&&g(S);var _=b&&(1&w.__dirty||!w.__isRendered)?w.getPaintRect():null;_&&g(_)}for(y=this.__prevStartIndex;y<this.__prevEndIndex;++y){var w,S;b=(w=r[y])&&w.shouldBePainted(o,i,!0,!0),w&&(!b||!w.__zr)&&w.__isRendered&&(S=w.getPrevPaintRect())&&g(S)}do{for(a=!1,y=0;y<l.length;)if(l[y].isZero())l.splice(y,1);else{for(var M=y+1;M<l.length;)l[y].intersect(l[M])?(a=!0,l[y].union(l[M]),l.splice(M,1)):M++;y++}}while(a);return this._paintRects=l,l},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,r){var o=this.dpr,i=this.dom,a=i.style,l=this.domBack;a&&(a.width=e+"px",a.height=r+"px"),i.width=e*o,i.height=r*o,l&&(l.width=e*o,l.height=r*o,1!==o&&this.ctxBack.scale(o,o))},t.prototype.clear=function(e,r,o){var i=this.dom,a=this.ctx,l=i.width,c=i.height;r=r||this.clearColor;var h=this.motionBlur&&!e,p=this.lastFrameAlpha,g=this.dpr,y=this;h&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,l/g,c/g));var b=this.domBack;function _(w,S,M,A){if(a.clearRect(w,S,M,A),r&&"transparent"!==r){var I=void 0;rt(r)?(I=(r.global||r.__width===M&&r.__height===A)&&r.__canvasGradient||d1(a,r,{x:0,y:0,width:M,height:A}),r.__canvasGradient=I,r.__width=M,r.__height=A):Be(r)&&(r.scaleX=r.scaleX||g,r.scaleY=r.scaleY||g,I=f1(a,r,{dirty:function(){y.setUnpainted(),y.painter.refresh()}})),a.save(),a.fillStyle=I||r,a.fillRect(w,S,M,A),a.restore()}h&&(a.save(),a.globalAlpha=p,a.drawImage(b,w,S,M,A),a.restore())}!o||h?_(0,0,l,c):o.length&&Z(o,function(w){_(w.x*g,w.y*g,w.width*g,w.height*g)})},t}(xn),Ny=314159,tD=function(){function n(t,e,r,o){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=r=De({},r||{}),this.dpr=r.devicePixelRatio||Gp,this._singleCanvas=i,this.root=t,t.style&&(Iu(t),t.innerHTML=""),this.storage=e;var a=this._zlevelList;this._prevDisplayList=[];var b,_,w,l=this._layers;if(i){var c=t,h=c.width,p=c.height;null!=r.width&&(h=r.width),null!=r.height&&(p=r.height),this.dpr=r.devicePixelRatio||1,c.width=h*this.dpr,c.height=p*this.dpr,this._width=h,this._height=p;var g=new hb(c,this,this.dpr);g.__builtin__=!0,g.initContext(),l[314159]=g,g.zlevel=Ny,a.push(Ny),this._domRoot=t}else{this._width=Uh(t,0,r),this._height=Uh(t,1,r);var y=this._domRoot=(b=this._width,_=this._height,(w=document.createElement("div")).style.cssText=["position:relative","width:"+b+"px","height:"+_+"px","padding:0","margin:0","border-width:0"].join(";")+";",w);t.appendChild(y)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},n.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),r=this._prevDisplayList,o=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,r,t,this._redrawId);for(var i=0;i<o.length;i++){var l=this._layers[o[i]];!l.__builtin__&&l.refresh&&l.refresh(0===i?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(t){var e=t.length,r=this._hoverlayer;if(r&&r.clear(),e){for(var o,i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a=0;a<e;a++){var l=t[a];l.__inHover&&(r||(r=this._hoverlayer=this.getLayer(1e5)),o||(o=r.ctx).save(),pc(o,l,i,a===e-1))}o&&o.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(1e5)},n.prototype.paintOne=function(t,e){yS(t,e)},n.prototype._paintList=function(t,e,r,o){if(this._redrawId===o){r=r||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,e,r),a=i.finished,l=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),l&&this._paintHoverList(t),a)this.eachLayer(function(h){h.afterBrush&&h.afterBrush()});else{var c=this;go(function(){c._paintList(t,e,r,o)})}}},n.prototype._compositeManually=function(){var t=this.getLayer(Ny).ctx,e=this._domRoot.width,r=this._domRoot.height;t.clearRect(0,0,e,r),this.eachBuiltinLayer(function(o){o.virtual&&t.drawImage(o.dom,0,0,e,r)})},n.prototype._doPaintList=function(t,e,r){for(var o=this,i=[],a=this._opts.useDirtyRect,l=0;l<this._zlevelList.length;l++){var h=this._layers[this._zlevelList[l]];h.__builtin__&&h!==this._hoverlayer&&(h.__dirty||r)&&i.push(h)}for(var p=!0,g=!1,y=function(w){var S,M=i[w],A=M.ctx,I=a&&M.createRepaintRects(t,e,b._width,b._height),N=r?M.__startIndex:M.__drawIndex,L=!r&&M.incremental&&Date.now,R=L&&Date.now(),O=M.zlevel===b._zlevelList[0]?b._backgroundColor:null;if(M.__startIndex===M.__endIndex)M.clear(!1,O,I);else if(N===M.__startIndex){var B=t[N];B.incremental&&B.notClear&&!r||M.clear(!1,O,I)}-1===N&&(console.error("For some unknown reason. drawIndex is -1"),N=M.__startIndex);var G=function(J){var ne={inHover:!1,allClipped:!1,prevEl:null,viewWidth:o._width,viewHeight:o._height};for(S=N;S<M.__endIndex;S++){var oe=t[S];if(oe.__inHover&&(g=!0),o._doPaintEl(oe,M,a,J,ne,S===M.__endIndex-1),L&&Date.now()-R>15)break}ne.prevElClipPaths&&A.restore()};if(I)if(0===I.length)S=M.__endIndex;else for(var W=b.dpr,Y=0;Y<I.length;++Y){var X=I[Y];A.save(),A.beginPath(),A.rect(X.x*W,X.y*W,X.width*W,X.height*W),A.clip(),G(X),A.restore()}else A.save(),G(),A.restore();M.__drawIndex=S,M.__drawIndex<M.__endIndex&&(p=!1)},b=this,_=0;_<i.length;_++)y(_);return gn.wxa&&Z(this._layers,function(w){w&&w.ctx&&w.ctx.draw&&w.ctx.draw()}),{finished:p,needsRefreshHover:g}},n.prototype._doPaintEl=function(t,e,r,o,i,a){var l=e.ctx;if(r){var c=t.getPaintRect();(!o||c&&c.intersect(o))&&(pc(l,t,i,a),t.setPrevPaintRect(c))}else pc(l,t,i,a)},n.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Ny);var r=this._layers[t];return r||((r=new hb("zr_"+t,this,this.dpr)).zlevel=t,r.__builtin__=!0,this._layerConfig[t]?Ve(r,this._layerConfig[t],!0):this._layerConfig[t-.01]&&Ve(r,this._layerConfig[t-.01],!0),e&&(r.virtual=e),this.insertLayer(t,r),r.initContext()),r},n.prototype.insertLayer=function(t,e){var p,r=this._layers,o=this._zlevelList,i=o.length,a=this._domRoot,l=null,c=-1;if(!r[t]&&(p=e)&&(p.__builtin__||"function"==typeof p.resize&&"function"==typeof p.refresh)){if(i>0&&t>o[0]){for(c=0;c<i-1&&!(o[c]<t&&o[c+1]>t);c++);l=r[o[c]]}if(o.splice(c+1,0,t),r[t]=e,!e.virtual)if(l){var h=l.dom;h.nextSibling?a.insertBefore(e.dom,h.nextSibling):a.appendChild(e.dom)}else a.firstChild?a.insertBefore(e.dom,a.firstChild):a.appendChild(e.dom);e.painter||(e.painter=this)}},n.prototype.eachLayer=function(t,e){for(var r=this._zlevelList,o=0;o<r.length;o++){var i=r[o];t.call(e,this._layers[i],i)}},n.prototype.eachBuiltinLayer=function(t,e){for(var r=this._zlevelList,o=0;o<r.length;o++){var i=r[o],a=this._layers[i];a.__builtin__&&t.call(e,a,i)}},n.prototype.eachOtherLayer=function(t,e){for(var r=this._zlevelList,o=0;o<r.length;o++){var i=r[o],a=this._layers[i];a.__builtin__||t.call(e,a,i)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(t){function e(g){a&&(a.__endIndex!==g&&(a.__dirty=!0),a.__endIndex=g)}if(this.eachBuiltinLayer(function(g,y){g.__dirty=g.__used=!1}),this._singleCanvas)for(var r=1;r<t.length;r++)if((c=t[r]).zlevel!==t[r-1].zlevel||c.incremental){this._needsManuallyCompositing=!0;break}var o,i,a=null,l=0;for(i=0;i<t.length;i++){var c,h=(c=t[i]).zlevel,p=void 0;o!==h&&(o=h,l=0),c.incremental?((p=this.getLayer(h+.001,this._needsManuallyCompositing)).incremental=!0,l=1):p=this.getLayer(h+(l>0?.01:0),this._needsManuallyCompositing),p.__builtin__||Lr("ZLevel "+h+" has been used by unkown layer "+p.id),p!==a&&(p.__used=!0,p.__startIndex!==i&&(p.__dirty=!0),p.__startIndex=i,p.__drawIndex=p.incremental?-1:i,e(i),a=p),1&c.__dirty&&!c.__inHover&&(p.__dirty=!0,p.incremental&&p.__drawIndex<0&&(p.__drawIndex=i))}e(i),this.eachBuiltinLayer(function(g,y){!g.__used&&g.getElementCount()>0&&(g.__dirty=!0,g.__startIndex=g.__endIndex=g.__drawIndex=0),g.__dirty&&g.__drawIndex<0&&(g.__drawIndex=g.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(t){t.clear()},n.prototype.setBackgroundColor=function(t){this._backgroundColor=t,Z(this._layers,function(e){e.setUnpainted()})},n.prototype.configLayer=function(t,e){if(e){var r=this._layerConfig;r[t]?Ve(r[t],e,!0):r[t]=e;for(var o=0;o<this._zlevelList.length;o++){var i=this._zlevelList[o];(i===t||i===t+.01)&&Ve(this._layers[i],r[t],!0)}}},n.prototype.delLayer=function(t){var e=this._layers,r=this._zlevelList,o=e[t];o&&(o.dom.parentNode.removeChild(o.dom),delete e[t],r.splice($t(r,t),1))},n.prototype.resize=function(t,e){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var o=this._opts,i=this.root;if(null!=t&&(o.width=t),null!=e&&(o.height=e),t=Uh(i,0,o),e=Uh(i,1,o),r.style.display="",this._width!==t||e!==this._height){for(var a in r.style.width=t+"px",r.style.height=e+"px",this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(Ny).resize(t,e)}return this},n.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(t){if(this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new hb("image",this,(t=t||{}).pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var r=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var o=e.dom.width,i=e.dom.height;this.eachLayer(function(g){g.__builtin__?r.drawImage(g.dom,0,0,o,i):g.renderToCanvas&&(r.save(),g.renderToCanvas(r),r.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},l=this.storage.getDisplayList(!0),c=0,h=l.length;c<h;c++)pc(r,l[c],a,c===h-1);return e.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}(),nD=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return Ce(t,n),t.prototype.getInitialData=function(e){return hu(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var r=new on,o=vo("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);r.add(o),o.setStyle(e.lineStyle);var i=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),l="none"===i?"circle":i,c=.8*e.itemHeight,h=vo(l,(e.itemWidth-c)/2,(e.itemHeight-c)/2,c,c,e.itemStyle.fill);return r.add(h),h.setStyle(e.itemStyle),h.rotation=("inherit"===e.iconRotate?a:e.iconRotate||0)*Math.PI/180,h.setOrigin([e.itemWidth/2,e.itemHeight/2]),l.indexOf("empty")>-1&&(h.style.stroke=h.style.fill,h.style.fill="#fff",h.style.lineWidth=2),r},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Pr);function xd(n,t){var e=n.mapDimensionsAll("defaultedLabel"),r=e.length;if(1===r){var o=Ph(n,t,e[0]);return null!=o?o+"":null}if(r){for(var i=[],a=0;a<e.length;a++)i.push(Ph(n,t,e[a]));return i.join(" ")}}function LC(n,t){var e=n.mapDimensionsAll("defaultedLabel");if(!Ee(t))return t+"";for(var r=[],o=0;o<e.length;o++){var i=n.getDimensionIndex(e[o]);i>=0&&r.push(t[i])}return r.join(" ")}var zo=function(n){function t(e,r,o,i){var a=n.call(this)||this;return a.updateData(e,r,o,i),a}return Ce(t,n),t.prototype._createSymbol=function(e,r,o,i,a){this.removeAll();var l=vo(e,-1,-1,2,2,null,a);l.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),l.drift=rD,this._symbolType=e,this.add(l)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Ku(this.childAt(0))},t.prototype.downplay=function(){Ql(this.childAt(0))},t.prototype.setZ=function(e,r){var o=this.childAt(0);o.zlevel=e,o.z=r},t.prototype.setDraggable=function(e,r){var o=this.childAt(0);o.draggable=e,o.cursor=!r&&e?"move":o.cursor},t.prototype.updateData=function(e,r,o,i){this.silent=!1;var a=e.getItemVisual(r,"symbol")||"circle",l=e.hostModel,c=t.getSymbolSize(e,r),h=a!==this._symbolType,p=i&&i.disableAnimation;if(h){var g=e.getItemVisual(r,"symbolKeepAspect");this._createSymbol(a,e,r,c,g)}else{(b=this.childAt(0)).silent=!1;var y={scaleX:c[0]/2,scaleY:c[1]/2};p?b.attr(y):hr(b,y,l,r),js(b)}if(this._updateCommon(e,r,c,o,i),h){var b=this.childAt(0);p||(y={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:b.style.opacity}},b.scaleX=b.scaleY=0,b.style.opacity=0,to(b,y,l,r))}p&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,r,o,i,a){var l,c,h,p,g,y,b,_,w,S=this.childAt(0),M=e.hostModel;if(i&&(l=i.emphasisItemStyle,c=i.blurItemStyle,h=i.selectItemStyle,p=i.focus,g=i.blurScope,b=i.labelStatesModels,_=i.hoverScale,w=i.cursorStyle,y=i.emphasisDisabled),!i||e.hasItemOption){var A=i&&i.itemModel?i.itemModel:e.getItemModel(r),I=A.getModel("emphasis");l=I.getModel("itemStyle").getItemStyle(),h=A.getModel(["select","itemStyle"]).getItemStyle(),c=A.getModel(["blur","itemStyle"]).getItemStyle(),p=I.get("focus"),g=I.get("blurScope"),y=I.get("disabled"),b=fo(A),_=I.getShallow("scale"),w=A.getShallow("cursor")}var N=e.getItemVisual(r,"symbolRotate");S.attr("rotation",(N||0)*Math.PI/180||0);var L=cu(e.getItemVisual(r,"symbolOffset"),o);L&&(S.x=L[0],S.y=L[1]),w&&S.attr("cursor",w);var R=e.getItemVisual(r,"style"),O=R.fill;if(S instanceof jo){var B=S.style;S.useStyle(De({image:B.image,x:B.x,y:B.y,width:B.width,height:B.height},R))}else S.useStyle(S.__isEmptyBrush?De({},R):R),S.style.decal=null,S.setColor(O,a&&a.symbolInnerColor),S.style.strokeNoScale=!0;var G=e.getItemVisual(r,"liftZ"),W=this._z2;null!=G?null==W&&(this._z2=S.z2,S.z2+=G):null!=W&&(S.z2=W,this._z2=null);var Y=a&&a.useNameLabel;Ao(S,b,{labelFetcher:M,labelDataIndex:r,defaultText:function(ne){return Y?e.getName(ne):xd(e,ne)},inheritColor:O,defaultOpacity:R.opacity}),this._sizeX=o[0]/2,this._sizeY=o[1]/2;var X=S.ensureState("emphasis");X.style=l,S.ensureState("select").style=h,S.ensureState("blur").style=c;var J=null==_||!0===_?Math.max(1.1,3/this._sizeY):isFinite(_)&&_>0?+_:1;X.scaleX=this._sizeX*J,X.scaleY=this._sizeY*J,this.setSymbolScale(1),mo(this,p,g,y)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,r,o){var i=this.childAt(0),a=cn(this).dataIndex,l=o&&o.animation;if(this.silent=i.silent=!0,o&&o.fadeLabel){var c=i.getTextContent();c&&Jc(c,{style:{opacity:0}},r,{dataIndex:a,removeOpt:l,cb:function(){i.removeTextContent()}})}else i.removeTextContent();Jc(i,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:a,cb:e,removeOpt:l})},t.getSymbolSize=function(e,r){return uu(e.getItemVisual(r,"symbolSize"))},t}(on);function rD(n,t){this.parent.drift(n,t)}function RC(n,t,e,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(e))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&"none"!==n.getItemVisual(e,"symbol")}function oD(n){return null==n||Ft(n)||(n={isIgnore:n}),n||{}}function OC(n){var t=n.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:fo(t),cursorStyle:t.get("cursor")}}var Ey=function(){function n(t){this.group=new on,this._SymbolCtor=t||zo}return n.prototype.updateData=function(t,e){this._progressiveEls=null,e=oD(e);var r=this.group,o=t.hostModel,i=this._data,a=this._SymbolCtor,l=e.disableAnimation,c=OC(t),h={disableAnimation:l},p=e.getSymbolPoint||function(g){return t.getItemLayout(g)};i||r.removeAll(),t.diff(i).add(function(g){var y=p(g);if(RC(t,y,g,e)){var b=new a(t,g,c,h);b.setPosition(y),t.setItemGraphicEl(g,b),r.add(b)}}).update(function(g,y){var b=i.getItemGraphicEl(y),_=p(g);if(RC(t,_,g,e)){var w=t.getItemVisual(g,"symbol")||"circle",S=b&&b.getSymbolType&&b.getSymbolType();if(!b||S&&S!==w)r.remove(b),(b=new a(t,g,c,h)).setPosition(_);else{b.updateData(t,g,c,h);var M={x:_[0],y:_[1]};l?b.attr(M):hr(b,M,o)}r.add(b),t.setItemGraphicEl(g,b)}else r.remove(b)}).remove(function(g){var y=i.getItemGraphicEl(g);y&&y.fadeOut(function(){r.remove(y)},o)}).execute(),this._getSymbolPoint=p,this._data=t},n.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(r,o){var i=t._getSymbolPoint(o);r.setPosition(i),r.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=OC(t),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,e,r){function o(c){c.isGroup||(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],r=oD(r);for(var i=t.start;i<t.end;i++){var a=e.getItemLayout(i);if(RC(e,a,i,r)){var l=new this._SymbolCtor(e,i,this._seriesScope);l.traverse(o),l.setPosition(a),this.group.add(l),e.setItemGraphicEl(i,l),this._progressiveEls.push(l)}}},n.prototype.eachRendered=function(t){Qu(this._progressiveEls||this.group,t)},n.prototype.remove=function(t){var e=this.group,r=this._data;r&&t?r.eachItemGraphicEl(function(o){o.fadeOut(function(){e.remove(o)},r.hostModel)}):e.removeAll()},n}();function iD(n,t,e){var w,S,M,r=n.getBaseAxis(),o=n.getOtherAxis(r),i=(w=e,S=0,M=o.scale.getExtent(),"start"===w?S=M[0]:"end"===w?S=M[1]:dt(w)&&!isNaN(w)?S=w:M[0]>0?S=M[0]:M[1]<0&&(S=M[1]),S),a=r.dim,l=o.dim,c=t.mapDimension(l),h=t.mapDimension(a),p="x"===l||"radius"===l?1:0,g=j(n.dimensions,function(_){return t.mapDimension(_)}),y=!1,b=t.getCalculationInfo("stackResultDimension");return bl(t,g[0])&&(y=!0,g[0]=b),bl(t,g[1])&&(y=!0,g[1]=b),{dataDimsForPoint:g,valueStart:i,valueAxisDim:l,baseAxisDim:a,stacked:!!y,valueDim:c,baseDim:h,baseDataOffset:p,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function aD(n,t,e,r){var o=NaN;n.stacked&&(o=e.get(e.getCalculationInfo("stackedOverDimension"),r)),isNaN(o)&&(o=n.valueStart);var i=n.baseDataOffset,a=[];return a[i]=e.get(n.baseDim,r),a[1-i]=o,t.dataToPoint(a)}var xc=Math.min,Oi=Math.max;function _c(n,t){return isNaN(n)||isNaN(t)}function fb(n,t,e,r,o,i,a,l,c){for(var h,p,g,y,b,_,w=e,S=0;S<r;S++){var M=t[2*w],A=t[2*w+1];if(w>=o||w<0)break;if(_c(M,A)){if(c){w+=i;continue}break}if(w===e)n[i>0?"moveTo":"lineTo"](M,A),g=M,y=A;else{var I=M-h,N=A-p;if(I*I+N*N<.5){w+=i;continue}if(a>0){for(var L=w+i,R=t[2*L],O=t[2*L+1];R===M&&O===A&&S<r;)S++,R=t[2*(L+=i)],O=t[2*L+1],I=(M=t[2*(w+=i)])-h,N=(A=t[2*w+1])-p;var B=S+1;if(c)for(;_c(R,O)&&B<r;)B++,R=t[2*(L+=i)],O=t[2*L+1];var G=.5,W=0,Y=0,X=void 0,J=void 0;if(B>=r||_c(R,O))b=M,_=A;else{W=R-h,Y=O-p;var ne=M-h,oe=R-M,ie=A-p,se=O-A,le=void 0,pe=void 0;if("x"===l){var me=W>0?1:-1;b=M-me*(le=Math.abs(ne))*a,_=A,X=M+me*(pe=Math.abs(oe))*a,J=A}else if("y"===l){var ve=Y>0?1:-1;b=M,_=A-ve*(le=Math.abs(ie))*a,X=M,J=A+ve*(pe=Math.abs(se))*a}else le=Math.sqrt(ne*ne+ie*ie),b=M-W*a*(1-(G=(pe=Math.sqrt(oe*oe+se*se))/(pe+le))),_=A-Y*a*(1-G),J=A+Y*a*G,X=xc(X=M+W*a*G,Oi(R,M)),J=xc(J,Oi(O,A)),X=Oi(X,xc(R,M)),_=A-(Y=(J=Oi(J,xc(O,A)))-A)*le/pe,b=xc(b=M-(W=X-M)*le/pe,Oi(h,M)),_=xc(_,Oi(p,A)),X=M+(W=M-(b=Oi(b,xc(h,M))))*pe/le,J=A+(Y=A-(_=Oi(_,xc(p,A))))*pe/le}n.bezierCurveTo(g,y,b,_,M,A),g=X,y=J}else n.lineTo(M,A)}h=M,p=A,w+=i}return S}var Ly=function(){this.smooth=0,this.smoothConstraint=!0},PC=function(n){function t(e){var r=n.call(this,e)||this;return r.type="ec-polyline",r}return Ce(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ly},t.prototype.buildPath=function(e,r){var o=r.points,i=0,a=o.length/2;if(r.connectNulls){for(;a>0&&_c(o[2*a-2],o[2*a-1]);a--);for(;i<a&&_c(o[2*i],o[2*i+1]);i++);}for(;i<a;)i+=fb(e,o,i,a,a,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},t.prototype.getPointOn=function(e,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o,i,a=this.path.data,l=gs.CMD,c="x"===r,h=[],p=0;p<a.length;){var g=void 0,y=void 0,b=void 0,_=void 0,w=void 0,S=void 0,M=void 0;switch(a[p++]){case l.M:o=a[p++],i=a[p++];break;case l.L:if(g=a[p++],y=a[p++],(M=c?(e-o)/(g-o):(e-i)/(y-i))<=1&&M>=0){var A=c?(y-i)*M+i:(g-o)*M+o;return c?[e,A]:[A,e]}o=g,i=y;break;case l.C:g=a[p++],y=a[p++],b=a[p++],_=a[p++],w=a[p++],S=a[p++];var I=c?ge(o,g,b,w,e,h):ge(i,y,_,S,e,h);if(I>0)for(var N=0;N<I;N++){var L=h[N];if(L<=1&&L>=0)return A=c?er(i,y,_,S,L):er(o,g,b,w,L),c?[e,A]:[A,e]}o=w,i=S}}},t}(Yn),sL=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t}(Ly),sD=function(n){function t(e){var r=n.call(this,e)||this;return r.type="ec-polygon",r}return Ce(t,n),t.prototype.getDefaultShape=function(){return new sL},t.prototype.buildPath=function(e,r){var o=r.points,i=r.stackedOnPoints,a=0,l=o.length/2,c=r.smoothMonotone;if(r.connectNulls){for(;l>0&&_c(o[2*l-2],o[2*l-1]);l--);for(;a<l&&_c(o[2*a],o[2*a+1]);a++);}for(;a<l;){var h=fb(e,o,a,l,l,1,r.smooth,c,r.connectNulls);fb(e,i,a+h-1,h,l,-1,r.stackedOnSmooth,c,r.connectNulls),a+=h+1,e.closePath()}},t}(Yn);function lD(n,t,e,r,o){var i=n.getArea(),a=i.x,l=i.y,c=i.width,h=i.height,p=e.get(["lineStyle","width"])||2;a-=p/2,l-=p/2,c+=p,h+=p,c=Math.ceil(c),a!==Math.floor(a)&&(a=Math.floor(a),c++);var g=new $n({shape:{x:a,y:l,width:c,height:h}});if(t){var y=n.getBaseAxis(),b=y.isHorizontal(),_=y.inverse;b?(_&&(g.shape.x+=c),g.shape.width=0):(_||(g.shape.y+=h),g.shape.height=0);var w=Se(o)?function(S){o(S,g)}:null;to(g,{shape:{width:c,height:h,x:a,y:l}},e,null,r,w)}return g}function BC(n,t,e){var r=n.getArea(),o=co(r.r0,1),i=co(r.r,1),a=new Ti({shape:{cx:co(n.cx,1),cy:co(n.cy,1),r0:o,r:i,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});return t&&("angle"===n.getBaseAxis().dim?a.shape.endAngle=r.startAngle:a.shape.r=o,to(a,{shape:{endAngle:r.endAngle,r:i}},e)),a}function Ya(n,t,e,r,o){return n?"polar"===n.type?BC(n,t,e):"cartesian2d"===n.type?lD(n,t,e,r,o):null:null}function vu(n,t){return n.type===t}function uD(n,t){if(n.length===t.length){for(var e=0;e<n.length;e++)if(n[e]!==t[e])return;return!0}}function cD(n){for(var t=1/0,e=1/0,r=-1/0,o=-1/0,i=0;i<n.length;){var a=n[i++],l=n[i++];isNaN(a)||(t=Math.min(a,t),r=Math.max(a,r)),isNaN(l)||(e=Math.min(l,e),o=Math.max(l,o))}return[[t,e],[r,o]]}function zC(n,t){var e=cD(n),r=e[0],o=e[1],i=cD(t),a=i[0],l=i[1];return Math.max(Math.abs(r[0]-a[0]),Math.abs(r[1]-a[1]),Math.abs(o[0]-l[0]),Math.abs(o[1]-l[1]))}function VC(n){return dt(n)?n:n?.5:0}function bu(n,t,e,r){var o=t.getBaseAxis(),i="x"===o.dim||"radius"===o.dim?0:1,a=[],l=0,c=[],h=[],p=[],g=[];if(r){for(l=0;l<n.length;l+=2)isNaN(n[l])||isNaN(n[l+1])||g.push(n[l],n[l+1]);n=g}for(l=0;l<n.length-2;l+=2)switch(p[0]=n[l+2],p[1]=n[l+3],h[0]=n[l],h[1]=n[l+1],a.push(h[0],h[1]),e){case"end":c[i]=p[i],c[1-i]=h[1-i],a.push(c[0],c[1]);break;case"middle":var b=[];c[i]=b[i]=(h[i]+p[i])/2,c[1-i]=h[1-i],b[1-i]=p[1-i],a.push(c[0],c[1]),a.push(b[0],b[1]);break;default:c[i]=h[i],c[1-i]=p[1-i],a.push(c[0],c[1])}return a.push(n[l++],n[l++]),a}function dg(n,t){return[n[2*t],n[2*t+1]]}function FC(n){if(n.get(["endLabel","show"]))return!0;for(var t=0;t<ui.length;t++)if(n.get([ui[t],"endLabel","show"]))return!0;return!1}function mb(n,t,e,r){if(vu(t,"cartesian2d")){var o=r.getModel("endLabel"),i=o.get("valueAnimation"),a=r.getData(),l={lastFrameIndex:0},c=FC(r)?function(b,_){n._endLabelOnDuring(b,_,a,l,i,o,t)}:null,h=t.getBaseAxis().isHorizontal(),p=lD(t,e,r,function(){var b=n._endLabel;b&&e&&null!=l.originalX&&b.attr({x:l.originalX,y:l.originalY})},c);if(!r.get("clip",!0)){var g=p.shape,y=Math.max(g.width,g.height);h?(g.y-=y,g.height+=2*y):(g.x-=y,g.width+=2*y)}return c&&c(1,p),p}return BC(t,e,r)}var dD=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.init=function(){var e=new on,r=new Ey;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=e},t.prototype.render=function(e,r,o){var i=this,a=e.coordinateSystem,l=this.group,c=e.getData(),h=e.getModel("lineStyle"),p=e.getModel("areaStyle"),g=c.getLayout("points")||[],y="polar"===a.type,b=this._coordSys,_=this._symbolDraw,w=this._polyline,S=this._polygon,M=this._lineGroup,A=!r.ssr&&e.get("animation"),I=!p.isEmpty(),N=p.get("origin"),L=iD(a,c,N),R=I&&function(Me,je,tt){if(!tt.valueDim)return[];for(var ut=je.count(),pt=tl(2*ut),St=0;St<ut;St++){var Ze=aD(tt,Me,je,St);pt[2*St]=Ze[0],pt[2*St+1]=Ze[1]}return pt}(a,c,L),O=e.get("showSymbol"),B=e.get("connectNulls"),G=O&&!y&&function Ry(n,t,e){var r=n.get("showAllSymbol"),o="auto"===r;if(!r||o){var i=e.getAxesByScale("ordinal")[0];if(i&&(!o||!function(c,h){var p=c.getExtent(),g=Math.abs(p[1]-p[0])/c.scale.count();isNaN(g)&&(g=0);for(var y=h.count(),b=Math.max(1,Math.round(y/5)),_=0;_<y;_+=b)if(1.5*zo.getSymbolSize(h,_)[c.isHorizontal()?1:0]>g)return!1;return!0}(i,t))){var a=t.mapDimension(i.dim),l={};return Z(i.getViewLabels(),function(c){var h=i.scale.getRawOrdinalNumber(c.tickValue);l[h]=1}),function(c){return!l.hasOwnProperty(t.get(a,c))}}}}(e,c,a),W=this._data;W&&W.eachItemGraphicEl(function(Me,je){Me.__temp&&(l.remove(Me),W.setItemGraphicEl(je,null))}),O||_.remove(),l.add(M);var Y,X=!y&&e.get("step");a&&a.getArea&&e.get("clip",!0)&&(null!=(Y=a.getArea()).width?(Y.x-=.1,Y.y-=.1,Y.width+=.2,Y.height+=.2):Y.r0&&(Y.r0-=.5,Y.r+=.5)),this._clipShapeForSymbol=Y;var J=function gb(n,t,e){var r=n.getVisual("visualMeta");if(r&&r.length&&n.count()&&"cartesian2d"===t.type){for(var o,i,a=r.length-1;a>=0;a--){var l=n.getDimensionInfo(r[a].dimension);if("x"===(o=l&&l.coordDim)||"y"===o){i=r[a];break}}if(i){var c=t.getAxis(o),h=j(i.stops,function(A){return{coord:c.toGlobalCoord(c.dataToCoord(A.value)),color:A.color}}),p=h.length,g=i.outerColors.slice();p&&h[0].coord>h[p-1].coord&&(h.reverse(),g.reverse());var y=function(A,I){var N,L,R=[],O=A.length;function B(X,J,ne){var oe=X.coord;return{coord:ne,color:Vp((ne-oe)/(J.coord-oe),[X.color,J.color])}}for(var G=0;G<O;G++){var W=A[G],Y=W.coord;if(Y<0)N=W;else{if(Y>I){L?R.push(B(L,W,I)):N&&R.push(B(N,W,0),B(N,W,I));break}N&&(R.push(B(N,W,0)),N=null),R.push(W),L=W}}return R}(h,"x"===o?e.getWidth():e.getHeight()),b=y.length;if(!b&&p)return h[0].coord<0?g[1]?g[1]:h[p-1].color:g[0]?g[0]:h[0].color;var _=y[0].coord-10,w=y[b-1].coord+10,S=w-_;if(S<.001)return"transparent";Z(y,function(A){A.offset=(A.coord-_)/S}),y.push({offset:b?y[b-1].offset:.5,color:g[1]||"transparent"}),y.unshift({offset:b?y[0].offset:.5,color:g[0]||"transparent"});var M=new gf(0,0,0,0,y,!0);return M[o]=_,M[o+"2"]=w,M}}}(c,a,o)||c.getVisual("style")[c.getVisual("drawType")];if(w&&b.type===a.type&&X===this._step){I&&!S?S=this._newPolygon(g,R):S&&!I&&(M.remove(S),S=this._polygon=null),y||this._initOrUpdateEndLabel(e,a,Eh(J));var ne=M.getClipPath();ne?to(ne,{shape:mb(this,a,!1,e).shape},e):M.setClipPath(mb(this,a,!0,e)),O&&_.updateData(c,{isIgnore:G,clipShape:Y,disableAnimation:!0,getSymbolPoint:function(Me){return[g[2*Me],g[2*Me+1]]}}),uD(this._stackedOnPoints,R)&&uD(this._points,g)||(A?this._doUpdateAnimation(c,R,a,o,X,N,B):(X&&(g=bu(g,a,X,B),R&&(R=bu(R,a,X,B))),w.setShape({points:g}),S&&S.setShape({points:g,stackedOnPoints:R})))}else O&&_.updateData(c,{isIgnore:G,clipShape:Y,disableAnimation:!0,getSymbolPoint:function(Me){return[g[2*Me],g[2*Me+1]]}}),A&&this._initSymbolLabelAnimation(c,a,Y),X&&(g=bu(g,a,X,B),R&&(R=bu(R,a,X,B))),w=this._newPolyline(g),I?S=this._newPolygon(g,R):S&&(M.remove(S),S=this._polygon=null),y||this._initOrUpdateEndLabel(e,a,Eh(J)),M.setClipPath(mb(this,a,!0,e));var oe=e.getModel("emphasis"),ie=oe.get("focus"),se=oe.get("blurScope"),le=oe.get("disabled");w.useStyle(Pe(h.getLineStyle(),{fill:"none",stroke:J,lineJoin:"bevel"})),Mi(w,e,"lineStyle"),w.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"])&&(w.getState("emphasis").style.lineWidth=+w.style.lineWidth+1),cn(w).seriesIndex=e.seriesIndex,mo(w,ie,se,le);var pe=VC(e.get("smooth")),me=e.get("smoothMonotone");if(w.setShape({smooth:pe,smoothMonotone:me,connectNulls:B}),S){var ve=c.getCalculationInfo("stackedOnSeries"),He=0;S.useStyle(Pe(p.getAreaStyle(),{fill:J,opacity:.7,lineJoin:"bevel",decal:c.getVisual("style").decal})),ve&&(He=VC(ve.get("smooth"))),S.setShape({smooth:pe,stackedOnSmooth:He,smoothMonotone:me,connectNulls:B}),Mi(S,e,"areaStyle"),cn(S).seriesIndex=e.seriesIndex,mo(S,ie,se,le)}var nt=function(Me){i._changePolyState(Me)};c.eachItemGraphicEl(function(Me){Me&&(Me.onHoverStateChange=nt)}),this._polyline.onHoverStateChange=nt,this._data=c,this._coordSys=a,this._stackedOnPoints=R,this._points=g,this._step=X,this._valueOrigin=N,e.get("triggerLineEvent")&&(this.packEventData(e,w),S&&this.packEventData(e,S))},t.prototype.packEventData=function(e,r){cn(r).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,r,o,i){var a=e.getData(),l=Yu(a,i);if(this._changePolyState("emphasis"),!(l instanceof Array)&&null!=l&&l>=0){var c=a.getLayout("points"),h=a.getItemGraphicEl(l);if(!h){var p=c[2*l],g=c[2*l+1];if(isNaN(p)||isNaN(g)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(p,g))return;var y=e.get("zlevel")||0,b=e.get("z")||0;(h=new zo(a,l)).x=p,h.y=g,h.setZ(y,b);var _=h.getSymbolPath().getTextContent();_&&(_.zlevel=y,_.z=b,_.z2=this._polyline.z2+1),h.__temp=!0,a.setItemGraphicEl(l,h),h.stopSymbolAnimation(!0),this.group.add(h)}h.highlight()}else vr.prototype.highlight.call(this,e,r,o,i)},t.prototype.downplay=function(e,r,o,i){var a=e.getData(),l=Yu(a,i);if(this._changePolyState("normal"),null!=l&&l>=0){var c=a.getItemGraphicEl(l);c&&(c.__temp?(a.setItemGraphicEl(l,null),this.group.remove(c)):c.downplay())}else vr.prototype.downplay.call(this,e,r,o,i)},t.prototype._changePolyState=function(e){var r=this._polygon;dm(this._polyline,e),r&&dm(r,e)},t.prototype._newPolyline=function(e){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new PC({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},t.prototype._newPolygon=function(e,r){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new sD({shape:{points:e,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},t.prototype._initSymbolLabelAnimation=function(e,r,o){var i,a,l=r.getBaseAxis(),c=l.inverse;"cartesian2d"===r.type?(i=l.isHorizontal(),a=!1):"polar"===r.type&&(i="angle"===l.dim,a=!0);var h=e.hostModel,p=h.get("animationDuration");Se(p)&&(p=p(null));var g=h.get("animationDelay")||0,y=Se(g)?g(null):g;e.eachItemGraphicEl(function(b,_){var w=b;if(w){var M=void 0,A=void 0,I=void 0;if(o)if(a){var N=o,L=r.pointToCoord([b.x,b.y]);i?(M=N.startAngle,A=N.endAngle,I=-L[1]/180*Math.PI):(M=N.r0,A=N.r,I=L[0])}else i?(M=o.x,A=o.x+o.width,I=b.x):(M=o.y+o.height,A=o.y,I=b.y);var O=A===M?0:(I-M)/(A-M);c&&(O=1-O);var B=Se(g)?g(_):p*O+y,G=w.getSymbolPath(),W=G.getTextContent();w.attr({scaleX:0,scaleY:0}),w.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:B}),W&&W.animateFrom({style:{opacity:0}},{duration:300,delay:B}),G.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,r,o){var g,b,_,w,S,M,i=e.getModel("endLabel");if(FC(e)){var a=e.getData(),l=this._polyline,c=a.getLayout("points");if(!c)return l.removeTextContent(),void(this._endLabel=null);var h=this._endLabel;h||((h=this._endLabel=new Kn({z2:200})).ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var p=function(g){for(var b,_=g.length/2;_>0&&(b=g[2*_-1],isNaN(g[2*_-2])||isNaN(b));_--);return _-1}(c);p>=0&&(Ao(l,fo(e,"endLabel"),{inheritColor:o,labelFetcher:e,labelDataIndex:p,defaultText:function(g,y,b){return null!=b?LC(a,b):xd(a,g)},enableTextSetter:!0},(g=i,_=(b=r.getBaseAxis()).isHorizontal(),w=b.inverse,S=_?w?"right":"left":"center",M=_?"middle":w?"top":"bottom",{normal:{align:g.get("align")||S,verticalAlign:g.get("verticalAlign")||M}})),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,r,o,i,a,l,c){var h=this._endLabel,p=this._polyline;if(h){e<1&&null==i.originalX&&(i.originalX=h.x,i.originalY=h.y);var g=o.getLayout("points"),y=o.hostModel,b=y.get("connectNulls"),_=l.get("precision"),w=l.get("distance")||0,S=c.getBaseAxis(),M=S.isHorizontal(),A=S.inverse,I=r.shape,N=A?M?I.x:I.y+I.height:M?I.x+I.width:I.y,L=(M?w:0)*(A?-1:1),R=(M?0:-w)*(A?-1:1),O=M?"x":"y",B=function(se,le,pe){for(var me,ve,He=se.length/2,nt="x"===pe?0:1,Me=0,je=-1,tt=0;tt<He;tt++)if(ve=se[2*tt+nt],!isNaN(ve)&&!isNaN(se[2*tt+1-nt]))if(0!==tt){if(me<=le&&ve>=le||me>=le&&ve<=le){je=tt;break}Me=tt,me=ve}else me=ve;return{range:[Me,je],t:(le-me)/(ve-me)}}(g,N,O),G=B.range,W=G[1]-G[0],Y=void 0;if(W>=1){if(W>1&&!b){var X=dg(g,G[0]);h.attr({x:X[0]+L,y:X[1]+R}),a&&(Y=y.getRawValue(G[0]))}else{(X=p.getPointOn(N,O))&&h.attr({x:X[0]+L,y:X[1]+R});var J=y.getRawValue(G[0]),ne=y.getRawValue(G[1]);a&&(Y=Uv(o,_,J,ne,B.t))}i.lastFrameIndex=G[0]}else{var oe=1===e||i.lastFrameIndex>0?G[0]:0;X=dg(g,oe),a&&(Y=y.getRawValue(oe)),h.attr({x:X[0]+L,y:X[1]+R})}if(a){var ie=Ch(h);"function"==typeof ie.setLabelText&&ie.setLabelText(Y)}}},t.prototype._doUpdateAnimation=function(e,r,o,i,a,l,c){var h=this._polyline,p=this._polygon,g=e.hostModel,y=function(R,O,B,G,W,Y,X,J){for(var ne=function(ar,bo){var jr=[];return bo.diff(ar).add(function(po){jr.push({cmd:"+",idx:po})}).update(function(po,Ja){jr.push({cmd:"=",idx:Ja,idx1:po})}).remove(function(po){jr.push({cmd:"-",idx:po})}).execute(),jr}(R,O),oe=[],ie=[],se=[],le=[],pe=[],me=[],ve=[],He=iD(W,O,X),nt=R.getLayout("points")||[],Me=O.getLayout("points")||[],je=0;je<ne.length;je++){var tt=ne[je],ut=!0,pt=void 0,St=void 0;switch(tt.cmd){case"=":var Ze=nt[pt=2*tt.idx],yt=nt[pt+1],Vt=Me[St=2*tt.idx1],mn=Me[St+1];(isNaN(Ze)||isNaN(yt))&&(Ze=Vt,yt=mn),oe.push(Ze,yt),ie.push(Vt,mn),se.push(B[pt],B[pt+1]),le.push(G[St],G[St+1]),ve.push(O.getRawIndex(tt.idx1));break;case"+":var Dn=tt.idx,Tr=He.dataDimsForPoint,Vn=W.dataToPoint([O.get(Tr[0],Dn),O.get(Tr[1],Dn)]);St=2*Dn,oe.push(Vn[0],Vn[1]),ie.push(Me[St],Me[St+1]);var nr=aD(He,W,O,Dn);se.push(nr[0],nr[1]),le.push(G[St],G[St+1]),ve.push(O.getRawIndex(Dn));break;case"-":ut=!1}ut&&(pe.push(tt),me.push(me.length))}me.sort(function(ar,bo){return ve[ar]-ve[bo]});var wr=oe.length,oo=tl(wr),io=tl(wr),yi=tl(wr),Cs=tl(wr),ku=[];for(je=0;je<me.length;je++){var Ka=me[je],Ms=2*je,ln=2*Ka;oo[Ms]=oe[ln],oo[Ms+1]=oe[ln+1],io[Ms]=ie[ln],io[Ms+1]=ie[ln+1],yi[Ms]=se[ln],yi[Ms+1]=se[ln+1],Cs[Ms]=le[ln],Cs[Ms+1]=le[ln+1],ku[je]=pe[Ka]}return{current:oo,next:io,stackedOnCurrent:yi,stackedOnNext:Cs,status:ku}}(this._data,e,this._stackedOnPoints,r,this._coordSys,0,this._valueOrigin),b=y.current,_=y.stackedOnCurrent,w=y.next,S=y.stackedOnNext;if(a&&(b=bu(y.current,o,a,c),_=bu(y.stackedOnCurrent,o,a,c),w=bu(y.next,o,a,c),S=bu(y.stackedOnNext,o,a,c)),zC(b,w)>3e3||p&&zC(_,S)>3e3)return h.stopAnimation(),h.setShape({points:w}),void(p&&(p.stopAnimation(),p.setShape({points:w,stackedOnPoints:S})));h.shape.__points=y.current,h.shape.points=b;var M={shape:{points:w}};y.current!==b&&(M.shape.__points=y.next),h.stopAnimation(),hr(h,M,g),p&&(p.setShape({points:b,stackedOnPoints:_}),p.stopAnimation(),hr(p,{shape:{stackedOnPoints:S}},g),h.shape.points!==p.shape.points&&(p.shape.points=h.shape.points));for(var A=[],I=y.status,N=0;N<I.length;N++)if("="===I[N].cmd){var L=e.getItemGraphicEl(I[N].idx1);L&&A.push({el:L,ptIdx:N})}h.animators&&h.animators.length&&h.animators[0].during(function(){p&&p.dirtyShape();for(var R=h.shape.__points,O=0;O<A.length;O++){var B=A[O].el,G=2*A[O].ptIdx;B.x=R[G],B.y=R[G+1],B.markRedraw()}})},t.prototype.remove=function(e){var r=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(i,a){i.__temp&&(r.remove(i),o.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(vr);function hg(n,t){return{seriesType:n,plan:Vh(),reset:function(e){var r=e.getData(),o=e.coordinateSystem,a=t||e.pipelineContext.large;if(o){var l=j(o.dimensions,function(b){return r.mapDimension(b)}).slice(0,2),c=l.length,h=r.getCalculationInfo("stackResultDimension");bl(r,l[0])&&(l[0]=h),bl(r,l[1])&&(l[1]=h);var p=r.getStore(),g=r.getDimensionIndex(l[0]),y=r.getDimensionIndex(l[1]);return c&&{progress:function(b,_){for(var S=a&&tl((b.end-b.start)*c),M=[],A=[],I=b.start,N=0;I<b.end;I++){var L=void 0;if(1===c){var R=p.get(g,I);L=o.dataToPoint(R,null,A)}else M[0]=p.get(g,I),M[1]=p.get(y,I),L=o.dataToPoint(M,null,A);a?(S[N++]=L[0],S[N++]=L[1]):_.setItemLayout(I,L.slice())}a&&_.setLayout("points",S)}}}}}}var lL={average:function(n){for(var t=0,e=0,r=0;r<n.length;r++)isNaN(n[r])||(t+=n[r],e++);return 0===e?NaN:t/e},sum:function(n){for(var t=0,e=0;e<n.length;e++)t+=n[e]||0;return t},max:function(n){for(var t=-1/0,e=0;e<n.length;e++)n[e]>t&&(t=n[e]);return isFinite(t)?t:NaN},min:function(n){for(var t=1/0,e=0;e<n.length;e++)n[e]<t&&(t=n[e]);return isFinite(t)?t:NaN},minmax:function(n){for(var t=-1/0,e=-1/0,r=0;r<n.length;r++){var o=n[r],i=Math.abs(o);i>t&&(t=i,e=o)}return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},uL=function(n){return Math.round(n.length/2)};function hD(n){return{seriesType:n,reset:function(t,e,r){var o=t.getData(),i=t.get("sampling"),a=t.coordinateSystem,l=o.count();if(l>10&&"cartesian2d"===a.type&&i){var c=a.getBaseAxis(),h=a.getOtherAxis(c),p=c.getExtent(),g=r.getDevicePixelRatio(),y=Math.abs(p[1]-p[0])*(g||1),b=Math.round(l/y);if(isFinite(b)&&b>1){"lttb"===i&&t.setData(o.lttbDownSample(o.mapDimension(h.dim),1/b));var _=void 0;bt(i)?_=lL[i]:Se(i)&&(_=i),_&&t.setData(o.downSample(o.mapDimension(h.dim),1/b,_,uL))}}}}}var pg=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.getInitialData=function(e,r){return hu(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,r,o){var i=this.coordinateSystem;if(i&&i.clampData){var a=i.clampData(e),l=i.dataToPoint(a);if(o)Z(i.getAxes(),function(y,b){if("category"===y.type&&null!=r){var _=y.getTicksCoords(),w=y.getTickModel().get("alignWithLabel"),S=a[b],M="x1"===r[b]||"y1"===r[b];if(M&&!w&&(S+=1),_.length<2)return;if(2===_.length)return void(l[b]=y.toGlobalCoord(y.getExtent()[M?1:0]));for(var A=void 0,I=void 0,N=1,L=0;L<_.length;L++){var R=_[L].coord,O=L===_.length-1?_[L-1].tickValue+N:_[L].tickValue;if(O===S){I=R;break}if(O<S)A=R;else if(null!=A&&O>S){I=(R+A)/2;break}1===L&&(N=O-_[0].tickValue)}null==I&&(A?A&&(I=_[_.length-1].coord):I=_[0].coord),l[b]=y.toGlobalCoord(I)}});else{var c=this.getData(),h=c.getLayout("offset"),p=c.getLayout("size"),g=i.getBaseAxis().isHorizontal()?0:1;l[g]+=h+p/2}return l}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Pr);Pr.registerClass(pg);var pD=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.getInitialData=function(){return hu(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>e&&(e=r),e},t.prototype.brushSelector=function(e,r,o){return o.rect(r.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=tc(pg.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(pg),fD=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},yb=function(n){function t(e){var r=n.call(this,e)||this;return r.type="sausage",r}return Ce(t,n),t.prototype.getDefaultShape=function(){return new fD},t.prototype.buildPath=function(e,r){var o=r.cx,i=r.cy,a=Math.max(r.r0||0,0),l=Math.max(r.r,0),c=.5*(l-a),h=a+c,p=r.startAngle,g=r.endAngle,y=r.clockwise,b=2*Math.PI,_=y?g-p<b:p-g<b;_||(p=g-(y?b:-b));var w=Math.cos(p),S=Math.sin(p),M=Math.cos(g),A=Math.sin(g);_?(e.moveTo(w*a+o,S*a+i),e.arc(w*h+o,S*h+i,c,-Math.PI+p,p,!y)):e.moveTo(w*l+o,S*l+i),e.arc(o,i,l,p,g,!y),e.arc(M*h+o,A*h+i,c,g-2*Math.PI,g-Math.PI,!y),0!==a&&e.arc(o,i,a,g,p,y)},t}(Yn);function Oy(n,t,e){return t*Math.sin(n)*(e?-1:1)}function _d(n,t,e){return t*Math.cos(n)*(e?1:-1)}function wd(n,t,e){var r=n.get("borderRadius");if(null==r)return e?{cornerRadius:0}:null;Ee(r)||(r=[r,r,r,r]);var o=Math.abs(t.r||0-t.r0||0);return{cornerRadius:j(r,function(i){return cs(i,o)})}}var GC=Math.max,HC=Math.min,gD=function(n){function t(){var e=n.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return Ce(t,n),t.prototype.render=function(e,r,o,i){this._model=e,this._removeOnRenderedListener(o),this._updateDrawMode(e);var a=e.get("coordinateSystem");("cartesian2d"===a||"polar"===a)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,r,o):this._renderNormal(e,r,o,i))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,r){this._progressiveEls=[],this._incrementalRenderLarge(e,r)},t.prototype.eachRendered=function(e){Qu(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var r=e.pipelineContext.large;null!=this._isLargeDraw&&r===this._isLargeDraw||(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(e,r,o,i){var a,l=this.group,c=e.getData(),h=this._data,p=e.coordinateSystem,g=p.getBaseAxis();"cartesian2d"===p.type?a=g.isHorizontal():"polar"===p.type&&(a="angle"===g.dim);var y=e.isAnimationEnabled()?e:null,b=function(Y,X){var J=Y.get("realtimeSort",!0),ne=X.getBaseAxis();if(J&&"category"===ne.type&&"cartesian2d"===X.type)return{baseAxis:ne,otherAxis:X.getOtherAxis(ne)}}(e,p);b&&this._enableRealtimeSort(b,c,o);var _=e.get("clip",!0)||b,w=function(Y,X){var J=Y.getArea&&Y.getArea();if(vu(Y,"cartesian2d")){var ne=Y.getBaseAxis();if("category"!==ne.type||!ne.onBand){var oe=X.getLayout("bandWidth");ne.isHorizontal()?(J.x-=oe,J.width+=2*oe):(J.y-=oe,J.height+=2*oe)}}return J}(p,c);l.removeClipPath();var S=e.get("roundCap",!0),M=e.get("showBackground",!0),A=e.getModel("backgroundStyle"),I=A.get("borderRadius")||0,N=[],L=this._backgroundEls,R=i&&i.isInitSort,O=i&&"changeAxisOrder"===i.type;function B(Y){var ne,X=Py[p.type](c,Y),J=new("polar"===(ne=p).type?Ti:$n)({shape:xD(a,X,ne),silent:!0,z2:0});return J.useStyle(A.getItemStyle()),J.setShape("cartesian2d"===p.type?"r":"cornerRadius",I),N[Y]=J,J}c.diff(h).add(function(Y){var X=c.getItemModel(Y),J=Py[p.type](c,Y,X);if(M&&B(Y),c.hasValue(Y)&&xb[p.type](J)){var ne=!1;_&&(ne=WC[p.type](w,J));var oe=vb[p.type](e,c,Y,J,a,y,g.model,!1,S);b&&(oe.forceLabelAnimation=!0),UC(oe,c,Y,X,J,e,a,"polar"===p.type),R?oe.attr({shape:J}):b?xu(b,y,oe,J,Y,a,!1,!1):to(oe,{shape:J},e,Y),c.setItemGraphicEl(Y,oe),l.add(oe),oe.ignore=ne}}).update(function(Y,X){var J=c.getItemModel(Y),ne=Py[p.type](c,Y,J);if(M){var oe=void 0;0===L.length?oe=B(X):((oe=L[X]).useStyle(A.getItemStyle()),oe.setShape("cartesian2d"===p.type?"r":"cornerRadius",I),N[Y]=oe);var ie=Py[p.type](c,Y);hr(oe,{shape:xD(a,ie,p)},y,Y)}var se=h.getItemGraphicEl(X);if(c.hasValue(Y)&&xb[p.type](ne)){var le=!1;if(_&&(le=WC[p.type](w,ne))&&l.remove(se),se?js(se):se=vb[p.type](e,c,Y,ne,a,y,g.model,!!se,S),b&&(se.forceLabelAnimation=!0),O){var pe=se.getTextContent();if(pe){var me=Ch(pe);null!=me.prevValue&&(me.prevValue=me.value)}}else UC(se,c,Y,J,ne,e,a,"polar"===p.type);R?se.attr({shape:ne}):b?xu(b,y,se,ne,Y,a,!0,O):hr(se,{shape:ne},e,Y,null),c.setItemGraphicEl(Y,se),se.ignore=le,l.add(se)}else l.remove(se)}).remove(function(Y){var X=h.getItemGraphicEl(Y);X&&vm(X,e,Y)}).execute();var G=this._backgroundGroup||(this._backgroundGroup=new on);G.removeAll();for(var W=0;W<N.length;++W)G.add(N[W]);l.add(G),this._backgroundEls=N,this._data=c},t.prototype._renderLarge=function(e,r,o){this._clear(),jC(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,r){this._removeBackground(),jC(r,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var r=e.get("clip",!0)&&Ya(e.coordinateSystem,!1,e),o=this.group;r?o.setClipPath(r):o.removeClipPath()},t.prototype._enableRealtimeSort=function(e,r,o){var i=this;if(r.count()){var a=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,e,o),this._isFirstFrame=!1;else{var l=function(c){var h=r.getItemGraphicEl(c),p=h&&h.shape;return p&&Math.abs(a.isHorizontal()?p.height:p.width)||0};this._onRendered=function(){i._updateSortWithinSameData(r,l,a,o)},o.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,r,o){var i=[];return e.each(e.mapDimension(r.dim),function(a,l){var c=o(l);i.push({dataIndex:l,mappedValue:c=c??NaN,ordinalNumber:a})}),i.sort(function(a,l){return l.mappedValue-a.mappedValue}),{ordinalNumbers:j(i,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,r,o){for(var i=o.scale,a=e.mapDimension(o.dim),l=Number.MAX_VALUE,c=0,h=i.getOrdinalMeta().categories.length;c<h;++c){var p=e.rawIndexOf(a,i.getRawOrdinalNumber(c)),g=p<0?Number.MIN_VALUE:r(e.indexOfRawIndex(p));if(g>l)return!0;l=g}return!1},t.prototype._isOrderDifferentInView=function(e,r){for(var o=r.scale,i=o.getExtent(),a=Math.max(0,i[0]),l=Math.min(i[1],o.getOrdinalMeta().categories.length-1);a<=l;++a)if(e.ordinalNumbers[a]!==o.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(e,r,o,i){if(this._isOrderChangedWithinSameData(e,r,o)){var a=this._dataSort(e,o,r);this._isOrderDifferentInView(a,o)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",axisId:o.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(e,r,o){var i=r.baseAxis,a=this._dataSort(e,i,function(l){return e.get(e.mapDimension(r.otherAxis.dim),l)});o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:a})},t.prototype.remove=function(e,r){this._clear(this._model),this._removeOnRenderedListener(r)},t.prototype.dispose=function(e,r){this._removeOnRenderedListener(r)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var r=this.group,o=this._data;e&&e.isAnimationEnabled()&&o&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],o.eachItemGraphicEl(function(i){vm(i,e,cn(i).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(vr),WC={cartesian2d:function(n,t){var e=t.width<0?-1:1,r=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var o=n.x+n.width,i=n.y+n.height,a=GC(t.x,n.x),l=HC(t.x+t.width,o),c=GC(t.y,n.y),h=HC(t.y+t.height,i),p=l<a,g=h<c;return t.x=p&&a>o?l:a,t.y=g&&c>i?h:c,t.width=p?0:l-a,t.height=g?0:h-c,e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),p||g},polar:function(n,t){var e=t.r0<=t.r?1:-1;if(e<0){var r=t.r;t.r=t.r0,t.r0=r}var o=HC(t.r,n.r),i=GC(t.r0,n.r0);t.r=o,t.r0=i;var a=o-i<0;return e<0&&(r=t.r,t.r=t.r0,t.r0=r),a}},vb={cartesian2d:function(n,t,e,r,o,i,a,l,c){var h=new $n({shape:De({},r),z2:1});return h.__dataIndex=e,h.name="item",i&&(h.shape[o?"height":"width"]=0),h},polar:function(n,t,e,r,o,i,a,l,c){var h=!o&&c?yb:Ti,p=new h({shape:r,z2:1});p.name="item";var g,y,b=By(o);if(p.calculateTextPosition=(g=b,y=h===yb,function(S,M,A){var I=M.position;if(!I||I instanceof Array)return Ps(S,M,A);var N=g(I),L=null!=M.distance?M.distance:5,R=this.shape,O=R.cx,B=R.cy,G=R.r,W=R.r0,Y=(G+W)/2,X=R.startAngle,J=R.endAngle,ne=(X+J)/2,oe=y?Math.abs(G-W)/2:0,ie=Math.cos,se=Math.sin,le=O+G*ie(X),pe=B+G*se(X),me="left",ve="top";switch(N){case"startArc":le=O+(W-L)*ie(ne),pe=B+(W-L)*se(ne),me="center",ve="top";break;case"insideStartArc":le=O+(W+L)*ie(ne),pe=B+(W+L)*se(ne),me="center",ve="bottom";break;case"startAngle":le=O+Y*ie(X)+Oy(X,L+oe,!1),pe=B+Y*se(X)+_d(X,L+oe,!1),me="right",ve="middle";break;case"insideStartAngle":le=O+Y*ie(X)+Oy(X,-L+oe,!1),pe=B+Y*se(X)+_d(X,-L+oe,!1),me="left",ve="middle";break;case"middle":le=O+Y*ie(ne),pe=B+Y*se(ne),me="center",ve="middle";break;case"endArc":le=O+(G+L)*ie(ne),pe=B+(G+L)*se(ne),me="center",ve="bottom";break;case"insideEndArc":le=O+(G-L)*ie(ne),pe=B+(G-L)*se(ne),me="center",ve="top";break;case"endAngle":le=O+Y*ie(J)+Oy(J,L+oe,!0),pe=B+Y*se(J)+_d(J,L+oe,!0),me="left",ve="middle";break;case"insideEndAngle":le=O+Y*ie(J)+Oy(J,-L+oe,!0),pe=B+Y*se(J)+_d(J,-L+oe,!0),me="right",ve="middle";break;default:return Ps(S,M,A)}return(S=S||{}).x=le,S.y=pe,S.align=me,S.verticalAlign=ve,S}),i){var _=o?"r":"endAngle",w={};p.shape[_]=o?r.r0:r.startAngle,w[_]=r[_],(l?hr:to)(p,{shape:w},i)}return p}};function xu(n,t,e,r,o,i,a,l){var c,h;i?(h={x:r.x,width:r.width},c={y:r.y,height:r.height}):(h={y:r.y,height:r.height},c={x:r.x,width:r.width}),l||(a?hr:to)(e,{shape:c},t,o,null),(a?hr:to)(e,{shape:h},t?n.baseAxis.model:null,o)}function bb(n,t){for(var e=0;e<t.length;e++)if(!isFinite(n[t[e]]))return!0;return!1}var mD=["x","y","width","height"],yD=["cx","cy","r","startAngle","endAngle"],xb={cartesian2d:function(n){return!bb(n,mD)},polar:function(n){return!bb(n,yD)}},Py={cartesian2d:function(n,t,e){var r=n.getItemLayout(t),o=e?function(l,c){var h=l.get(["itemStyle","borderColor"]);if(!h||"none"===h)return 0;var p=l.get(["itemStyle","borderWidth"])||0,g=isNaN(c.width)?Number.MAX_VALUE:Math.abs(c.width),y=isNaN(c.height)?Number.MAX_VALUE:Math.abs(c.height);return Math.min(p,g,y)}(e,r):0,i=r.width>0?1:-1,a=r.height>0?1:-1;return{x:r.x+i*o/2,y:r.y+a*o/2,width:r.width-i*o,height:r.height-a*o}},polar:function(n,t,e){var r=n.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function By(n){return function(t){var e=t?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+e;default:return r}}}(n)}function UC(n,t,e,r,o,i,a,l){var c=t.getItemVisual(e,"style");if(l){if(!i.get("roundCap")){var h=n.shape;De(h,wd(r.getModel("itemStyle"),h,!0)),n.setShape(h)}}else{var p=r.get(["itemStyle","borderRadius"])||0;n.setShape("r",p)}n.useStyle(c);var g=r.getShallow("cursor");g&&n.attr("cursor",g);var y=l?a?o.r>=o.r0?"endArc":"startArc":o.endAngle>=o.startAngle?"endAngle":"startAngle":a?o.height>=0?"bottom":"top":o.width>=0?"right":"left",b=fo(r);Ao(n,b,{labelFetcher:i,labelDataIndex:e,defaultText:xd(i.getData(),e),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:y});var _=n.getTextContent();if(l&&_){var w=r.get(["label","position"]);n.textConfig.inside="middle"===w||null,function(M,A,I,N){if(dt(N))M.setTextConfig({rotation:N});else if(Ee(A))M.setTextConfig({rotation:0});else{var L,R=M.shape,O=R.clockwise?R.startAngle:R.endAngle,B=R.clockwise?R.endAngle:R.startAngle,G=(O+B)/2,W=I(A);switch(W){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":L=G;break;case"startAngle":case"insideStartAngle":L=O;break;case"endAngle":case"insideEndAngle":L=B;break;default:return void M.setTextConfig({rotation:0})}var Y=1.5*Math.PI-L;"middle"===W&&Y>Math.PI/2&&Y<1.5*Math.PI&&(Y-=Math.PI),M.setTextConfig({rotation:Y})}}(n,"outside"===w?y:w,By(a),r.get(["label","rotate"]))}xf(_,b,i.getRawValue(e),function(M){return LC(t,M)});var M,S=r.getModel(["emphasis"]);mo(n,S.get("focus"),S.get("blurScope"),S.get("disabled")),Mi(n,r),null!=(M=o).startAngle&&null!=M.endAngle&&M.startAngle===M.endAngle&&(n.style.fill="none",n.style.stroke="none",Z(n.states,function(M){M.style&&(M.style.fill=M.style.stroke="none")}))}var vD=function(){},bD=function(n){function t(e){var r=n.call(this,e)||this;return r.type="largeBar",r}return Ce(t,n),t.prototype.getDefaultShape=function(){return new vD},t.prototype.buildPath=function(e,r){for(var o=r.points,i=this.baseDimIdx,a=1-this.baseDimIdx,l=[],c=[],h=this.barWidth,p=0;p<o.length;p+=3)c[i]=h,c[a]=o[p+2],l[i]=o[p+i],l[a]=o[p+a],e.rect(l[0],l[1],c[0],c[1])},t}(Yn);function jC(n,t,e,r){var o=n.getData(),i=o.getLayout("valueAxisHorizontal")?1:0,a=o.getLayout("largeDataIndices"),l=o.getLayout("size"),c=n.getModel("backgroundStyle"),h=o.getLayout("largeBackgroundPoints");if(h){var p=new bD({shape:{points:h},incremental:!!r,silent:!0,z2:0});p.baseDimIdx=i,p.largeDataIndices=a,p.barWidth=l,p.useStyle(c.getItemStyle()),t.add(p),e&&e.push(p)}var g=new bD({shape:{points:o.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});g.baseDimIdx=i,g.largeDataIndices=a,g.barWidth=l,t.add(g),g.useStyle(o.getVisual("style")),cn(g).seriesIndex=n.seriesIndex,n.get("silent")||(g.on("mousedown",YC),g.on("mousemove",YC)),e&&e.push(g)}var YC=Wm(function(n){var t=function(e,r,o){for(var i=e.baseDimIdx,a=1-i,l=e.shape.points,c=e.largeDataIndices,h=[],p=[],g=e.barWidth,y=0,b=l.length/3;y<b;y++){var _=3*y;if(p[i]=g,p[a]=l[_+2],h[i]=l[_+i],h[a]=l[_+a],p[a]<0&&(h[a]+=p[a],p[a]=-p[a]),r>=h[0]&&r<=h[0]+p[0]&&o>=h[1]&&o<=h[1]+p[1])return c[y]}return-1}(this,n.offsetX,n.offsetY);cn(this).dataIndex=t>=0?t:null},30,!1);function xD(n,t,e){if(vu(e,"cartesian2d")){var r=t,o=e.getArea();return{x:n?r.x:o.x,y:n?o.y:r.y,width:n?r.width:o.width,height:n?o.height:r.height}}var i=t;return{cx:(o=e.getArea()).cx,cy:o.cy,r0:n?o.r0:i.r0,r:n?o.r:i.r,startAngle:n?i.startAngle:0,endAngle:n?i.endAngle:2*Math.PI}}var _D=2*Math.PI,_b=Math.PI/180;function zy(n,t){return xo(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function XC(n,t){var e=zy(n,t),r=n.get("center"),o=n.get("radius");Ee(o)||(o=[0,o]);var i,a,l=Ct(e.width,t.getWidth()),c=Ct(e.height,t.getHeight()),h=Math.min(l,c),p=Ct(o[0],h/2),g=Ct(o[1],h/2),y=n.coordinateSystem;if(y){var b=y.dataToPoint(r);i=b[0]||0,a=b[1]||0}else Ee(r)||(r=[r,r]),i=Ct(r[0],l)+e.x,a=Ct(r[1],c)+e.y;return{cx:i,cy:a,r0:p,r:g}}function wD(n,t,e){t.eachSeriesByType(n,function(r){var o=r.getData(),i=o.mapDimension("value"),a=zy(r,e),l=XC(r,e),c=l.cx,h=l.cy,p=l.r,g=l.r0,y=-r.get("startAngle")*_b,b=r.get("endAngle"),_=r.get("padAngle")*_b;b="auto"===b?y-_D:-b*_b;var w=r.get("minAngle")*_b+_,S=0;o.each(i,function(ie){!isNaN(ie)&&S++});var M=o.getSum(i),A=Math.PI/(M||S)*2,I=r.get("clockwise"),N=r.get("roseType"),L=r.get("stillShowZeroSum"),R=o.getDataExtent(i);R[0]=0;var O=I?1:-1,B=[y,b],G=O*_/2;tf(B,!I),y=B[0],b=B[1];var W=wb(r);W.startAngle=y,W.endAngle=b,W.clockwise=I;var Y=Math.abs(b-y),X=Y,J=0,ne=y;if(o.setLayout({viewRect:a,r:p}),o.each(i,function(ie,se){var le;if(isNaN(ie))o.setItemLayout(se,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:I,cx:c,cy:h,r0:g,r:N?NaN:p});else{(le="area"!==N?0===M&&L?A:ie*A:Y/S)<w?(le=w,X-=w):J+=ie;var pe=ne+O*le,me=0,ve=0;_>le?ve=me=ne+O*le/2:(me=ne+G,ve=pe-G),o.setItemLayout(se,{angle:le,startAngle:me,endAngle:ve,clockwise:I,cx:c,cy:h,r0:g,r:N?lr(ie,R,[g,p]):p}),ne=pe}}),X<_D&&S)if(X<=.001){var oe=Y/S;o.each(i,function(ie,se){if(!isNaN(ie)){var le=o.getItemLayout(se);le.angle=oe;var pe=0,me=0;oe<_?me=pe=y+O*(se+.5)*oe:(pe=y+O*se*oe+G,me=y+O*(se+1)*oe-G),le.startAngle=pe,le.endAngle=me}})}else A=X/J,ne=y,o.each(i,function(ie,se){if(!isNaN(ie)){var le=o.getItemLayout(se),pe=le.angle===w?w:ie*A,me=0,ve=0;pe<_?ve=me=ne+O*pe/2:(me=ne+G,ve=ne+O*pe-G),le.startAngle=me,le.endAngle=ve,ne+=O*pe}})})}var wb=Gn();function fg(n){return{seriesType:n,reset:function(t,e){var r=e.findComponents({mainType:"legend"});if(r&&r.length){var o=t.getData();o.filterSelf(function(i){for(var a=o.getName(i),l=0;l<r.length;l++)if(!r[l].isSelected(a))return!1;return!0})}}}}var cL=Math.PI/180;function qC(n,t,e,r,o,i,a,l,c,h){if(!(n.length<2)){for(var p=n.length,g=0;g<p;g++)"outer"===n[g].position&&"labelLine"===n[g].labelAlignTo&&(n[g].linePoints[1][0]+=n[g].label.x-h,n[g].label.x=h);mC(n,c,c+a)&&function(_){for(var w={list:[],maxY:0},S={list:[],maxY:0},M=0;M<_.length;M++)if("none"===_[M].labelAlignTo){var A=_[M],I=A.label.y>e?S:w,N=Math.abs(A.label.y-e);if(N>=I.maxY){var L=A.label.x-t-A.len2*o,R=r+A.len,O=Math.abs(L)<R?Math.sqrt(N*N/(1-L*L/R/R)):R;I.rB=O,I.maxY=N}I.list.push(A)}b(w),b(S)}(n)}function b(_){for(var w=_.rB,S=w*w,M=0;M<_.list.length;M++){var A=_.list[M],I=Math.abs(A.label.y-e),N=r+A.len,L=N*N,R=Math.sqrt((1-Math.abs(I*I/S))*L),O=t+(R+A.len2)*o;ZC(A,A.targetTextWidth-(O-A.label.x)*o,!0),A.label.x=O}}}function ZC(n,t,e){if(void 0===e&&(e=!1),null==n.labelStyleWidth){var r=n.label,o=r.style,i=n.rect,a=o.backgroundColor,l=o.padding,c=l?l[1]+l[3]:0,h=o.overflow,p=i.width+(a?0:c);if(t<p||e){var g=i.height;if(h&&h.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-c);var y=r.getBoundingRect();r.setStyle("width",Math.ceil(y.width)),r.setStyle("backgroundColor",a)}else{var b=t-c;r.setStyle("width",t<p?b:e?b>n.unconstrainedWidth?null:b:null)}var w=r.getBoundingRect();i.width=w.width,i.height=w.height+((r.style.margin||0)+2.1),i.y-=(i.height-g)/2}}}function $C(n){return"center"===n.position}var CD=function(n){function t(e,r,o){var i=n.call(this)||this;i.z2=2;var a=new Kn;return i.setTextContent(a),i.updateData(e,r,o,!0),i}return Ce(t,n),t.prototype.updateData=function(e,r,o,i){var a=this,l=e.hostModel,c=e.getItemModel(r),h=c.getModel("emphasis"),p=e.getItemLayout(r),g=De(wd(c.getModel("itemStyle"),p,!0),p);if(isNaN(g.startAngle))a.setShape(g);else{if(i){a.setShape(g);var y=l.getShallow("animationType");l.ecModel.ssr?(to(a,{scaleX:0,scaleY:0},l,{dataIndex:r,isFrom:!0}),a.originX=g.cx,a.originY=g.cy):"scale"===y?(a.shape.r=p.r0,to(a,{shape:{r:p.r}},l,r)):null!=o?(a.setShape({startAngle:o,endAngle:o}),to(a,{shape:{startAngle:p.startAngle,endAngle:p.endAngle}},l,r)):(a.shape.endAngle=p.startAngle,hr(a,{shape:{endAngle:p.endAngle}},l,r))}else js(a),hr(a,{shape:g},l,r);a.useStyle(e.getItemVisual(r,"style")),Mi(a,c);var b=(p.startAngle+p.endAngle)/2,_=l.get("selectedOffset"),w=Math.cos(b)*_,S=Math.sin(b)*_,M=c.getShallow("cursor");M&&a.attr("cursor",M),this._updateLabel(l,e,r),a.ensureState("emphasis").shape=De({r:p.r+(h.get("scale")&&h.get("scaleSize")||0)},wd(h.getModel("itemStyle"),p)),De(a.ensureState("select"),{x:w,y:S,shape:wd(c.getModel(["select","itemStyle"]),p)}),De(a.ensureState("blur"),{shape:wd(c.getModel(["blur","itemStyle"]),p)});var A=a.getTextGuideLine(),I=a.getTextContent();A&&De(A.ensureState("select"),{x:w,y:S}),De(I.ensureState("select"),{x:w,y:S}),mo(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))}},t.prototype._updateLabel=function(e,r,o){var i=this,a=r.getItemModel(o),l=a.getModel("labelLine"),c=r.getItemVisual(o,"style"),h=c&&c.fill,p=c&&c.opacity;Ao(i,fo(a),{labelFetcher:r.hostModel,labelDataIndex:o,inheritColor:h,defaultOpacity:p,defaultText:e.getFormattedLabel(o,"normal")||r.getName(o)});var g=i.getTextContent();i.setTextConfig({position:null,rotation:null}),g.attr({z2:10});var y=e.get(["label","position"]);if("outside"!==y&&"outer"!==y)i.removeTextGuideLine();else{var b=this.getTextGuideLine();b||(b=new $i,this.setTextGuideLine(b)),ng(this,rg(a),{stroke:h,opacity:An(l.get(["lineStyle","opacity"]),p,1)})}},t}(Ti),dL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return Ce(t,n),t.prototype.render=function(e,r,o,i){var a,l=e.getData(),c=this._data,h=this.group;if(!c&&l.count()>0){for(var p=l.getItemLayout(0),g=1;isNaN(p&&p.startAngle)&&g<l.count();++g)p=l.getItemLayout(g);p&&(a=p.startAngle)}if(this._emptyCircleSector&&h.remove(this._emptyCircleSector),0===l.count()&&e.get("showEmptyCircle")){var y=wb(e),b=new Ti({shape:De(XC(e,o),y)});b.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=b,h.add(b)}l.diff(c).add(function(_){var w=new CD(l,_,a);l.setItemGraphicEl(_,w),h.add(w)}).update(function(_,w){var S=c.getItemGraphicEl(w);S.updateData(l,_,a),S.off("click"),h.add(S),l.setItemGraphicEl(_,S)}).remove(function(_){vm(c.getItemGraphicEl(_),e,_)}).execute(),function SD(n){var t,e,r=n.getData(),o=[],i=!1,a=(n.get("minShowLabelAngle")||0)*cL,l=r.getLayout("viewRect"),c=r.getLayout("r"),h=l.width,p=l.x,g=l.y,y=l.height;function b(L){L.ignore=!0}r.each(function(L){var R=r.getItemGraphicEl(L),O=R.shape,B=R.getTextContent(),G=R.getTextGuideLine(),W=r.getItemModel(L),Y=W.getModel("label"),X=Y.get("position")||W.get(["emphasis","label","position"]),J=Y.get("distanceToLabelLine"),ne=Y.get("alignTo"),oe=Ct(Y.get("edgeDistance"),h),ie=Y.get("bleedMargin"),se=W.getModel("labelLine"),le=se.get("length");le=Ct(le,h);var pe=se.get("length2");if(pe=Ct(pe,h),Math.abs(O.endAngle-O.startAngle)<a)return Z(B.states,b),B.ignore=!0,void(G&&(Z(G.states,b),G.ignore=!0));if(function(io){if(!io.ignore)return!0;for(var yi in io.states)if(!1===io.states[yi].ignore)return!0;return!1}(B)){var me,ve,He,nt,Me=(O.startAngle+O.endAngle)/2,je=Math.cos(Me),tt=Math.sin(Me);t=O.cx,e=O.cy;var ut="inside"===X||"inner"===X;if("center"===X)me=O.cx,ve=O.cy,nt="center";else{var pt=(ut?(O.r+O.r0)/2*je:O.r*je)+t,St=(ut?(O.r+O.r0)/2*tt:O.r*tt)+e;if(me=pt+3*je,ve=St+3*tt,!ut){var Ze=pt+je*(le+c-O.r),yt=St+tt*(le+c-O.r),Vt=Ze+(je<0?-1:1)*pe;me="edge"===ne?je<0?p+oe:p+h-oe:Vt+(je<0?-J:J),ve=yt,He=[[pt,St],[Ze,yt],[Vt,yt]]}nt=ut?"center":"edge"===ne?je>0?"right":"left":je>0?"left":"right"}var mn=Math.PI,Dn=0,Tr=Y.get("rotate");if(dt(Tr))Dn=Tr*(mn/180);else if("center"===X)Dn=0;else if("radial"===Tr||!0===Tr)Dn=je<0?-Me+mn:-Me;else if("tangential"===Tr&&"outside"!==X&&"outer"!==X){var Vn=Math.atan2(je,tt);Vn<0&&(Vn=2*mn+Vn),tt>0&&(Vn=mn+Vn),Dn=Vn-mn}if(i=!!Dn,B.x=me,B.y=ve,B.rotation=Dn,B.setStyle({verticalAlign:"middle"}),ut){B.setStyle({align:nt});var nr=B.states.select;nr&&(nr.x+=B.x,nr.y+=B.y)}else{var wr=B.getBoundingRect().clone();wr.applyTransform(B.getComputedTransform());var oo=(B.style.margin||0)+2.1;wr.y-=oo/2,wr.height+=oo,o.push({label:B,labelLine:G,position:X,len:le,len2:pe,minTurnAngle:se.get("minTurnAngle"),maxSurfaceAngle:se.get("maxSurfaceAngle"),surfaceNormal:new pn(je,tt),linePoints:He,textAlign:nt,labelDistance:J,labelAlignTo:ne,edgeDistance:oe,bleedMargin:ie,rect:wr,unconstrainedWidth:wr.width,labelStyleWidth:B.style.width})}R.setTextConfig({inside:ut})}}),!i&&n.get("avoidLabelOverlap")&&function(L,R,O,B,G,W,Y,X){for(var J=[],ne=[],oe=Number.MAX_VALUE,ie=-Number.MAX_VALUE,se=0;se<L.length;se++){var le=L[se].label;$C(L[se])||(le.x<R?(oe=Math.min(oe,le.x),J.push(L[se])):(ie=Math.max(ie,le.x),ne.push(L[se])))}for(se=0;se<L.length;se++)if(!$C(ve=L[se])&&ve.linePoints){if(null!=ve.labelStyleWidth)continue;le=ve.label;var me,pe=ve.linePoints;ve.targetTextWidth=me="edge"===ve.labelAlignTo?le.x<R?pe[2][0]-ve.labelDistance-Y-ve.edgeDistance:Y+G-ve.edgeDistance-pe[2][0]-ve.labelDistance:"labelLine"===ve.labelAlignTo?le.x<R?oe-Y-ve.bleedMargin:Y+G-ie-ve.bleedMargin:le.x<R?le.x-Y-ve.bleedMargin:Y+G-le.x-ve.bleedMargin,ZC(ve,me)}for(qC(ne,R,O,B,1,0,W,0,X,ie),qC(J,R,O,B,-1,0,W,0,X,oe),se=0;se<L.length;se++){var ve;if(!$C(ve=L[se])&&ve.linePoints){var nt=(le=ve.label).style.padding,tt=ve.rect.width+(le.style.backgroundColor?0:nt?nt[1]+nt[3]:0),ut=(pe=ve.linePoints)[1][0]-pe[2][0];"edge"===ve.labelAlignTo?pe[2][0]=le.x<R?Y+ve.edgeDistance+tt+ve.labelDistance:Y+G-ve.edgeDistance-tt-ve.labelDistance:(pe[2][0]=le.x<R?le.x+ve.labelDistance:le.x-ve.labelDistance,pe[1][0]=pe[2][0]+ut),pe[1][1]=pe[2][1]=le.y}}}(o,t,e,c,h,y,p,g);for(var _=0;_<o.length;_++){var w=o[_],S=w.label,M=w.labelLine,A=isNaN(S.x)||isNaN(S.y);if(S){S.setStyle({align:w.textAlign}),A&&(Z(S.states,b),S.ignore=!0);var I=S.states.select;I&&(I.x+=S.x,I.y+=S.y)}if(M){var N=w.linePoints;A||!N?(Z(M.states,b),M.ignore=!0):(fC(N,w.minTurnAngle),tL(N,w.surfaceNormal,w.maxSurfaceAngle),M.setShape({points:N}),S.__hostTarget.textGuideLineConfig={anchor:new pn(N[0][0],N[0][1])})}}}(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=l)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,r){var o=r.getData().getItemLayout(0);if(o){var i=e[0]-o.cx,a=e[1]-o.cy,l=Math.sqrt(i*i+a*a);return l<=o.r&&l>=o.r0}},t.type="pie",t}(vr);function Sd(n,t,e){t=Ee(t)&&{coordDimensions:t}||De({encodeDefine:n.getEncode()},t);var r=n.getSource(),o=Qf(r,t).dimensions,i=new Ri(o,n);return i.initData(r,e),i}var wc=function(){function n(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return n.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},n.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},n.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},n.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},n}(),KC=Gn(),JC=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new wc(Fe(this.getData,this),Fe(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return Sd(this,{coordDimensions:["value"],encodeDefaulter:_t(V0,this)})},t.prototype.getDataParams=function(e){var r=this.getData(),o=KC(r),i=o.seats;if(!i){var a=[];r.each(r.mapDimension("value"),function(c){a.push(c)}),i=o.seats=u_(a,r.hostModel.get("percentPrecision"))}var l=n.prototype.getDataParams.call(this,e);return l.percent=i[e]||0,l.$vars.push("percent"),l},t.prototype._defaultLabelLine=function(e){rh(e,"labelLine",["show"]);var r=e.labelLine,o=e.emphasis.labelLine;r.show=r.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(Pr),QC=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return Ce(t,n),t.prototype.getInitialData=function(e,r){return hu(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,r,o){return o.point(r.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Pr),MD=function(){},TD=function(n){function t(e){var r=n.call(this,e)||this;return r._off=0,r.hoverDataIdx=-1,r}return Ce(t,n),t.prototype.getDefaultShape=function(){return new MD},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,r){var o,i=r.points,a=r.size,l=this.symbolProxy,c=l.shape,h=e.getContext?e.getContext():e,g=this.softClipShape;if(h&&a[0]<4)this._ctx=h;else{for(this._ctx=null,o=this._off;o<i.length;){var y=i[o++],b=i[o++];isNaN(y)||isNaN(b)||g&&!g.contain(y,b)||(c.x=y-a[0]/2,c.y=b-a[1]/2,c.width=a[0],c.height=a[1],l.buildPath(e,c,!0))}this.incremental&&(this._off=o,this.notClear=!0)}},t.prototype.afterBrush=function(){var e,r=this.shape,o=r.points,i=r.size,a=this._ctx,l=this.softClipShape;if(a){for(e=this._off;e<o.length;){var c=o[e++],h=o[e++];isNaN(c)||isNaN(h)||l&&!l.contain(c,h)||a.fillRect(c-i[0]/2,h-i[1]/2,i[0],i[1])}this.incremental&&(this._off=e,this.notClear=!0)}},t.prototype.findDataIndex=function(e,r){for(var o=this.shape,i=o.points,a=o.size,l=Math.max(a[0],4),c=Math.max(a[1],4),h=i.length/2-1;h>=0;h--){var p=2*h,g=i[p]-l/2,y=i[p+1]-c/2;if(e>=g&&r>=y&&e<=g+l&&r<=y+c)return h}return-1},t.prototype.contain=function(e,r){var o=this.transformCoordToLocal(e,r);return this.getBoundingRect().contain(e=o[0],r=o[1])?(this.hoverDataIdx=this.findDataIndex(e,r))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var r=this.shape,o=r.points,i=r.size,a=i[0],l=i[1],c=1/0,h=1/0,p=-1/0,g=-1/0,y=0;y<o.length;){var b=o[y++],_=o[y++];c=Math.min(b,c),p=Math.max(b,p),h=Math.min(_,h),g=Math.max(_,g)}e=this._rect=new Kt(c-a/2,h-l/2,p-c+a,g-h+l)}return e},t}(Yn),AD=function(){function n(){this.group=new on}return n.prototype.updateData=function(t,e){this._clear();var r=this._create();r.setShape({points:t.getLayout("points")}),this._setCommon(r,t,e)},n.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(r){null!=r.startIndex&&(e=new Float32Array(e.buffer,4*r.startIndex*2,2*(r.endIndex-r.startIndex))),r.setShape("points",e),r.reset()})},n.prototype.incrementalPrepareUpdate=function(t){this._clear()},n.prototype.incrementalUpdate=function(t,e,r){var o=this._newAdded[0],i=e.getLayout("points"),a=o&&o.shape.points;if(a&&a.length<2e4){var l=a.length,c=new Float32Array(l+i.length);c.set(a),c.set(i,l),o.endIndex=t.end,o.setShape({points:c})}else{this._newAdded=[];var h=this._create();h.startIndex=t.start,h.endIndex=t.end,h.incremental=!0,h.setShape({points:i}),this._setCommon(h,e,r)}},n.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},n.prototype._create=function(){var t=new TD({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},n.prototype._setCommon=function(t,e,r){var o=e.hostModel;r=r||{};var i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=r.clipShape||null,t.symbolProxy=vo(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<4;t.useStyle(o.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var l=e.getVisual("style"),c=l&&l.fill;c&&t.setColor(c);var h=cn(t);h.seriesIndex=o.seriesIndex,t.on("mousemove",function(p){h.dataIndex=null;var g=t.hoverDataIdx;g>=0&&(h.dataIndex=g+(t.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),kD=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){var i=e.getData();this._updateSymbolDraw(i,e).updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,r,o){var i=e.getData();this._updateSymbolDraw(i,e).incrementalPrepareUpdate(i),this._finished=!1},t.prototype.incrementalRender=function(e,r,o){this._symbolDraw.incrementalUpdate(e,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=e.end===r.getData().count()},t.prototype.updateTransform=function(e,r,o){var i=e.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var a=hg("").reset(e,r,o);a.progress&&a.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var r=e.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,r){var o=this._symbolDraw,i=r.pipelineContext.large;return o&&i===this._isLargeDraw||(o&&o.remove(),o=this._symbolDraw=i?new AD:new Ey,this._isLargeDraw=i,this.group.removeAll()),this.group.add(o.group),o},t.prototype.remove=function(e,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(vr),ID=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(wn),Sb=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Mo).models[0]},t.type="cartesian2dAxis",t}(wn);ur(Sb,Kh);var eM={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},DD=Ve({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},eM),Cb=Ve({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},eM),Mb={category:DD,value:Cb,time:Ve({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Cb),log:Pe({logBase:10},Cb)},hL={value:1,category:1,time:1,log:1};function gg(n,t,e,r){Z(hL,function(o,i){var a=Ve(Ve({},Mb[i],!0),r,!0),l=function(c){function h(){var p=null!==c&&c.apply(this,arguments)||this;return p.type=t+"Axis."+i,p}return Ce(h,c),h.prototype.mergeDefaultAndTheme=function(p,g){var y=rd(this),b=y?ic(p):{};Ve(p,g.getTheme().get(i+"Axis")),Ve(p,this.getDefaultOption()),p.type=Tb(p),y&&oc(p,b,y)},h.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=eg.createByAxisModel(this))},h.prototype.getCategories=function(p){var g=this.option;if("category"===g.type)return p?g.data:this.__ordinalMeta.categories},h.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},h.type=t+"Axis."+i,h.defaultOption=a,h}(e);n.registerComponentModel(l)}),n.registerSubTypeDefaulter(t+"Axis",Tb)}function Tb(n){return n.type||(n.data?"category":"value")}var ND=function(){function n(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return n.prototype.getAxis=function(t){return this._axes[t]},n.prototype.getAxes=function(){return j(this._dimList,function(t){return this._axes[t]},this)},n.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Xn(this.getAxes(),function(e){return e.scale.type===t})},n.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},n}(),Ab=["x","y"];function ED(n){return"interval"===n.type||"time"===n.type}var pL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=Ab,e}return Ce(t,n),t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,r=this.getAxis("y").scale;if(ED(e)&&ED(r)){var o=e.getExtent(),i=r.getExtent(),a=this.dataToPoint([o[0],i[0]]),l=this.dataToPoint([o[1],i[1]]),c=o[1]-o[0],h=i[1]-i[0];if(c&&h){var p=(l[0]-a[0])/c,g=(l[1]-a[1])/h,_=this._transform=[p,0,0,g,a[0]-o[0]*p,a[1]-i[0]*g];this._invTransform=Ns([],_)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var r=this.getAxis("x"),o=this.getAxis("y");return r.contain(r.toLocalCoord(e[0]))&&o.contain(o.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,r){var o=this.dataToPoint(e),i=this.dataToPoint(r),a=this.getArea(),l=new Kt(o[0],o[1],i[0]-o[0],i[1]-o[1]);return a.intersect(l)},t.prototype.dataToPoint=function(e,r,o){o=o||[];var i=e[0],a=e[1];if(this._transform&&null!=i&&isFinite(i)&&null!=a&&isFinite(a))return Ye(o,e,this._transform);var l=this.getAxis("x"),c=this.getAxis("y");return o[0]=l.toGlobalCoord(l.dataToCoord(i,r)),o[1]=c.toGlobalCoord(c.dataToCoord(a,r)),o},t.prototype.clampData=function(e,r){var o=this.getAxis("x").scale,i=this.getAxis("y").scale,a=o.getExtent(),l=i.getExtent(),c=o.parse(e[0]),h=i.parse(e[1]);return(r=r||[])[0]=Math.min(Math.max(Math.min(a[0],a[1]),c),Math.max(a[0],a[1])),r[1]=Math.min(Math.max(Math.min(l[0],l[1]),h),Math.max(l[0],l[1])),r},t.prototype.pointToData=function(e,r){var o=[];if(this._invTransform)return Ye(o,e,this._invTransform);var i=this.getAxis("x"),a=this.getAxis("y");return o[0]=i.coordToData(i.toLocalCoord(e[0]),r),o[1]=a.coordToData(a.toLocalCoord(e[1]),r),o},t.prototype.getOtherAxis=function(e){return this.getAxis("x"===e.dim?"y":"x")},t.prototype.getArea=function(e){e=e||0;var r=this.getAxis("x").getGlobalExtent(),o=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1])-e,a=Math.min(o[0],o[1])-e,l=Math.max(r[0],r[1])-i+e,c=Math.max(o[0],o[1])-a+e;return new Kt(i,a,l,c)},t}(ND),LD=function(n){function t(e,r,o,i,a){var l=n.call(this,e,r,o)||this;return l.index=0,l.type=i||"value",l.position=a||"bottom",l}return Ce(t,n),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.getGlobalExtent=function(e){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),e&&r[0]>r[1]&&r.reverse(),r},t.prototype.pointToData=function(e,r){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),r)},t.prototype.setCategorySortInfo=function(e){if("category"!==this.type)return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(Bo);function tM(n,t,e){e=e||{};var r=n.coordinateSystem,o=t.axis,i={},a=o.getAxesOnZeroOf()[0],l=o.position,c=a?"onZero":l,h=o.dim,p=r.getRect(),g=[p.x,p.x+p.width,p.y,p.y+p.height],y={left:0,right:1,top:0,bottom:1,onZero:2},b=t.get("offset")||0,_="x"===h?[g[2]-b,g[3]+b]:[g[0]-b,g[1]+b];if(a){var w=a.toGlobalCoord(a.dataToCoord(0));_[y.onZero]=Math.max(Math.min(w,_[1]),_[0])}i.position=["y"===h?_[y[c]]:g[0],"x"===h?_[y[c]]:g[3]],i.rotation=Math.PI/2*("x"===h?0:1),i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,left:-1,right:1}[l],i.labelOffset=a?_[y[l]]-_[y.onZero]:0,t.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),ht(e.labelInside,t.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var S=t.get(["axisLabel","rotate"]);return i.labelRotate="top"===c?-S:S,i.z2=1,i}function nM(n){return"cartesian2d"===n.get("coordinateSystem")}function rM(n){var t={xAxisModel:null,yAxisModel:null};return Z(t,function(e,r){var o=r.replace(/Model$/,""),i=n.getReferringComponents(o,Mo).models[0];t[r]=i}),t}var kb=Math.log;function oM(n,t,e){var r=el.prototype,o=r.getTicks.call(e),i=r.getTicks.call(e,!0),a=o.length-1,l=r.getInterval.call(e),c=rC(n,t),h=c.extent,p=c.fixMin,g=c.fixMax;if("log"===n.type){var y=kb(n.base);h=[kb(h[0])/y,kb(h[1])/y]}n.setExtent(h[0],h[1]),n.calcNiceExtent({splitNumber:a,fixMin:p,fixMax:g});var b=r.getExtent.call(n);p&&(h[0]=b[0]),g&&(h[1]=b[1]);var _=r.getInterval.call(n),w=h[0],S=h[1];if(p&&g)_=(S-w)/a;else if(p)for(S=h[0]+_*a;S<h[1]&&isFinite(S)&&isFinite(h[1]);)_=YS(_),S=h[0]+_*a;else if(g)for(w=h[1]-_*a;w>h[0]&&isFinite(w)&&isFinite(h[0]);)_=YS(_),w=h[1]-_*a;else{n.getTicks().length-1>a&&(_=YS(_));var M=_*a;(w=co((S=Math.ceil(h[1]/_)*_)-M))<0&&h[0]>=0?(w=0,S=co(M)):S>0&&h[1]<=0&&(S=0,w=-co(M))}var A=(o[0].value-i[0].value)/l,I=(o[a].value-i[a].value)/l;r.setExtent.call(n,w+_*A,S+_*I),r.setInterval.call(n,_),(A||I)&&r.setNiceExtent.call(n,w+_,S-_)}var RD=function(){function n(t,e,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Ab,this._initCartesian(t,e,r),this.model=t}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(t,e){var r=this._axesMap;function o(a){var l,c=vn(a),h=c.length;if(h){for(var p=[],g=h-1;g>=0;g--){var y=a[+c[g]],b=y.model,_=y.scale;jS(_)&&b.get("alignTicks")&&null==b.get("interval")?p.push(y):(Zh(_,b),jS(_)&&(l=y))}p.length&&(l||Zh((l=p.pop()).scale,l.model),Z(p,function(w){oM(w.scale,w.model,l.scale)}))}}this._updateScale(t,this.model),o(r.x),o(r.y);var i={};Z(r.x,function(a){OD(r,"y",a,i)}),Z(r.y,function(a){OD(r,"x",a,i)}),this.resize(this.model,e)},n.prototype.resize=function(t,e,r){var o=t.getBoxLayoutParams(),i=!r&&t.get("containLabel"),a=xo(o,{width:e.getWidth(),height:e.getHeight()});this._rect=a;var l=this._axesList;function c(){Z(l,function(h){var b,_,w,S,p=h.isHorizontal(),g=p?[0,a.width]:[0,a.height],y=h.inverse?1:0;h.setExtent(g[y],g[1-y]),_=p?a.x:a.y,w=(b=h).getExtent(),S=w[0]+w[1],b.toGlobalCoord="x"===b.dim?function(M){return M+_}:function(M){return S-M+_},b.toLocalCoord="x"===b.dim?function(M){return M-_}:function(M){return S-M+_}})}c(),i&&(Z(l,function(h){if(!h.model.get(["axisLabel","inside"])){var p=function(b){var w=b.scale;if(b.model.get(["axisLabel","show"])&&!w.isBlank()){var S,M,A=w.getExtent();M=w instanceof tr?w.count():(S=w.getTicks()).length;var I,N=b.getLabelModel(),L=tg(b),R=1;M>40&&(R=Math.ceil(M/40));for(var O=0;O<M;O+=R){var B=L(S?S[O]:{value:A[0]+O},O),G=xI(N.getTextRect(B),N.get("rotate")||0);I?I.union(G):I=G}return I}}(h);if(p){var g=h.isHorizontal()?"height":"width",y=h.model.get(["axisLabel","margin"]);a[g]-=p[g]+y,"top"===h.position?a.y+=p.height+y:"left"===h.position&&(a.x+=p.width+y)}}}),c()),Z(this._coordsList,function(h){h.calcAffineTransform()})},n.prototype.getAxis=function(t,e){var r=this._axesMap[t];if(null!=r)return r[e||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(t,e){if(null!=t&&null!=e)return this._coordsMap["x"+t+"y"+e];Ft(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var o=0,i=this._coordsList;o<i.length;o++)if(i[o].getAxis("x").index===t||i[o].getAxis("y").index===e)return i[o]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(t,e,r){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.dataToPoint(r):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(r)):null},n.prototype.convertFromPixel=function(t,e,r){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.pointToData(r):o.axis?o.axis.coordToData(o.axis.toLocalCoord(r)):null},n.prototype._findConvertTarget=function(t){var e,r,o=t.seriesModel,i=t.xAxisModel||o&&o.getReferringComponents("xAxis",Mo).models[0],a=t.yAxisModel||o&&o.getReferringComponents("yAxis",Mo).models[0],l=t.gridModel;return o?$t(this._coordsList,e=o.coordinateSystem)<0&&(e=null):i&&a?e=this.getCartesian(i.componentIndex,a.componentIndex):i?r=this.getAxis("x",i.componentIndex):a?r=this.getAxis("y",a.componentIndex):l&&l.coordinateSystem===this&&(e=this._coordsList[0]),{cartesian:e,axis:r}},n.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},n.prototype._initCartesian=function(t,e,r){var o=this,i=this,a={left:!1,right:!1,top:!1,bottom:!1},l={x:{},y:{}},c={x:0,y:0};if(e.eachComponent("xAxis",h("x"),this),e.eachComponent("yAxis",h("y"),this),!c.x||!c.y)return this._axesMap={},void(this._axesList=[]);function h(p){return function(g,y){if(mg(g,t)){var b=g.get("position");"x"===p?"top"!==b&&"bottom"!==b&&(b=a.bottom?"top":"bottom"):"left"!==b&&"right"!==b&&(b=a.left?"right":"left"),a[b]=!0;var _=new LD(p,yy(g),[0,0],g.get("type"),b);_.onBand="category"===_.type&&g.get("boundaryGap"),_.inverse=g.get("inverse"),g.axis=_,_.model=g,_.grid=i,_.index=y,i._axesList.push(_),l[p][y]=_,c[p]++}}}this._axesMap=l,Z(l.x,function(p,g){Z(l.y,function(y,b){var _="x"+g+"y"+b,w=new pL(_);w.master=o,w.model=t,o._coordsMap[_]=w,o._coordsList.push(w),w.addAxis(p),w.addAxis(y)})})},n.prototype._updateScale=function(t,e){function r(o,i){Z(vy(o,i.dim),function(a){i.scale.unionExtentFromData(o,a)})}Z(this._axesList,function(o){if(o.scale.setExtent(1/0,-1/0),"category"===o.type){var i=o.model.get("categorySortInfo");o.scale.setSortInfo(i)}}),t.eachSeries(function(o){if(nM(o)){var i=rM(o),a=i.xAxisModel,l=i.yAxisModel;if(!mg(a,e)||!mg(l,e))return;var c=this.getCartesian(a.componentIndex,l.componentIndex),h=o.getData(),p=c.getAxis("x"),g=c.getAxis("y");r(h,p),r(h,g)}},this)},n.prototype.getTooltipAxes=function(t){var e=[],r=[];return Z(this.getCartesians(),function(o){var i=null!=t&&"auto"!==t?o.getAxis(t):o.getBaseAxis(),a=o.getOtherAxis(i);$t(e,i)<0&&e.push(i),$t(r,a)<0&&r.push(a)}),{baseAxes:e,otherAxes:r}},n.create=function(t,e){var r=[];return t.eachComponent("grid",function(o,i){var a=new n(o,t,e);a.name="grid_"+i,a.resize(o,e,!0),o.coordinateSystem=a,r.push(a)}),t.eachSeries(function(o){if(nM(o)){var i=rM(o),a=i.xAxisModel,l=i.yAxisModel,c=a.getCoordSysModel();o.coordinateSystem=c.coordinateSystem.getCartesian(a.componentIndex,l.componentIndex)}}),r},n.dimensions=Ab,n}();function mg(n,t){return n.getCoordSysModel()===t}function OD(n,t,e,r){e.getAxesOnZeroOf=function(){return o?[o]:[]};var o,i=n[t],a=e.model,l=a.get(["axisLine","onZero"]),c=a.get(["axisLine","onZeroAxisIndex"]);if(l){if(null!=c)iM(i[c])&&(o=i[c]);else for(var h in i)if(i.hasOwnProperty(h)&&iM(i[h])&&!r[p(i[h])]){o=i[h];break}o&&(r[p(o)]=!0)}function p(g){return g.dim+"_"+g.index}}function iM(n){return n&&"category"!==n.type&&"time"!==n.type&&function(t){var e=t.scale.getExtent(),r=e[0],o=e[1];return!(r>0&&o>0||r<0&&o<0)}(n)}var Sc=Math.PI,ta=function(){function n(t,e){this.group=new on,this.opt=e,this.axisModel=t,Pe(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new on({x:e.position[0],y:e.position[1],rotation:e.rotation});r.updateTransform(),this._transformGroup=r}return n.prototype.hasBuilder=function(t){return!!aM[t]},n.prototype.add=function(t){aM[t](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(t,e,r){var o,i,a=Xg(e-t);return Yp(a)?(i=r>0?"top":"bottom",o="center"):Yp(a-Sc)?(i=r>0?"bottom":"top",o="center"):(i="middle",o=a>0&&a<Sc?r>0?"right":"left":r>0?"left":"right"),{rotation:a,textAlign:o,textVerticalAlign:i}},n.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},n.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},n}(),aM={axisLine:function(n,t,e,r){var o=t.get(["axisLine","show"]);if("auto"===o&&n.handleAutoShown&&(o=n.handleAutoShown("axisLine")),o){var i=t.axis.getExtent(),a=r.transform,l=[i[0],0],c=[i[1],0],h=l[0]>c[0];a&&(Ye(l,l,a),Ye(c,c,a));var p=De({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),g=new Yo({shape:{x1:l[0],y1:l[1],x2:c[0],y2:c[1]},style:p,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});Sh(g.shape,g.style.lineWidth),g.anid="line",e.add(g);var y=t.get(["axisLine","symbol"]);if(null!=y){var b=t.get(["axisLine","symbolSize"]);bt(y)&&(y=[y,y]),(bt(b)||dt(b))&&(b=[b,b]);var _=cu(t.get(["axisLine","symbolOffset"])||0,b),w=b[0],S=b[1];Z([{rotate:n.rotation+Math.PI/2,offset:_[0],r:0},{rotate:n.rotation-Math.PI/2,offset:_[1],r:Math.sqrt((l[0]-c[0])*(l[0]-c[0])+(l[1]-c[1])*(l[1]-c[1]))}],function(M,A){if("none"!==y[A]&&null!=y[A]){var I=vo(y[A],-w/2,-S/2,w,S,p.stroke,!0),N=M.r+M.offset,L=h?c:l;I.attr({rotation:M.rotate,x:L[0]+N*Math.cos(n.rotation),y:L[1]-N*Math.sin(n.rotation),silent:!0,z2:11}),e.add(I)}})}}},axisTickLabel:function(n,t,e,r){var o=function(a,l,c,h){var p=c.axis,g=c.getModel("axisTick"),y=g.get("show");if("auto"===y&&h.handleAutoShown&&(y=h.handleAutoShown("axisTick")),y&&!p.scale.isBlank()){for(var b=g.getModel("lineStyle"),_=h.tickDirection*g.get("length"),w=lM(p.getTicksCoords(),l.transform,_,Pe(b.getLineStyle(),{stroke:c.get(["axisLine","lineStyle","color"])}),"ticks"),S=0;S<w.length;S++)a.add(w[S]);return w}}(e,r,t,n),i=function(a,l,c,h){var p=c.axis;if(ht(h.axisLabelShow,c.get(["axisLabel","show"]))&&!p.scale.isBlank()){var y=c.getModel("axisLabel"),b=y.get("margin"),_=p.getViewLabels(),w=(ht(h.labelRotate,y.get("rotate"))||0)*Sc/180,S=ta.innerTextLayout(h.rotation,w,h.labelDirection),M=c.getCategories&&c.getCategories(!0),A=[],I=ta.isLabelSilent(c),N=c.get("triggerEvent");return Z(_,function(L,R){var O="ordinal"===p.scale.type?p.scale.getRawOrdinalNumber(L.tickValue):L.tickValue,B=L.formattedLabel,G=L.rawLabel,W=y;if(M&&M[O]){var Y=M[O];Ft(Y)&&Y.textStyle&&(W=new gr(Y.textStyle,y,c.ecModel))}var X=W.getTextColor()||c.get(["axisLine","lineStyle","color"]),J=p.dataToCoord(O),ne=W.getShallow("align",!0)||S.textAlign,oe=We(W.getShallow("alignMinLabel",!0),ne),ie=We(W.getShallow("alignMaxLabel",!0),ne),se=W.getShallow("verticalAlign",!0)||W.getShallow("baseline",!0)||S.textVerticalAlign,le=We(W.getShallow("verticalAlignMinLabel",!0),se),pe=We(W.getShallow("verticalAlignMaxLabel",!0),se),me=new Kn({x:J,y:h.labelOffset+h.labelDirection*b,rotation:S.rotation,silent:I,z2:10+(L.level||0),style:Or(W,{text:B,align:0===R?oe:R===_.length-1?ie:ne,verticalAlign:0===R?le:R===_.length-1?pe:se,fill:Se(X)?X("category"===p.type?G:"value"===p.type?O+"":O,R):X})});if(me.anid="label_"+O,N){var ve=ta.makeAxisEventDataBase(c);ve.targetType="axisLabel",ve.value=G,ve.tickIndex=R,"category"===p.type&&(ve.dataIndex=O),cn(me).eventData=ve}l.add(me),me.updateTransform(),A.push(me),a.add(me),me.decomposeTransform()}),A}}(e,r,t,n);(function(a,l,c){if(!$h(a.axis)){var h=a.get(["axisLabel","showMinLabel"]),p=a.get(["axisLabel","showMaxLabel"]),g=(l=l||[])[0],y=l[1],b=l[l.length-1],_=l[l.length-2],w=(c=c||[])[0],S=c[1],M=c[c.length-1],A=c[c.length-2];!1===h?(Wt(g),Wt(w)):yg(g,y)&&(h?(Wt(y),Wt(S)):(Wt(g),Wt(w))),!1===p?(Wt(b),Wt(M)):yg(_,b)&&(p?(Wt(_),Wt(A)):(Wt(b),Wt(M)))}})(t,i,o),function(a,l,c,h){var p=c.axis,g=c.getModel("minorTick");if(g.get("show")&&!p.scale.isBlank()){var y=p.getMinorTicksCoords();if(y.length)for(var b=g.getModel("lineStyle"),_=h*g.get("length"),w=Pe(b.getLineStyle(),Pe(c.getModel("axisTick").getLineStyle(),{stroke:c.get(["axisLine","lineStyle","color"])})),S=0;S<y.length;S++)for(var M=lM(y[S],l.transform,_,w,"minorticks_"+S),A=0;A<M.length;A++)a.add(M[A])}}(e,r,t,n.tickDirection),t.get(["axisLabel","hideOverlap"])&&yC(wy(j(i,function(a){return{label:a,priority:a.z2,defaultAttr:{ignore:a.ignore}}})))},axisName:function(n,t,e,r){var R,B,G,W,Y,X,J,o=ht(n.axisName,t.get("name"));if(o){var i,a,l=t.get("nameLocation"),c=n.nameDirection,h=t.getModel("nameTextStyle"),p=t.get("nameGap")||0,g=t.axis.getExtent(),y=g[0]>g[1]?-1:1,b=["start"===l?g[0]-y*p:"end"===l?g[1]+y*p:(g[0]+g[1])/2,sM(l)?n.labelOffset+c*p:0],_=t.get("nameRotate");null!=_&&(_=_*Sc/180),sM(l)?i=ta.innerTextLayout(n.rotation,_??n.rotation,c):(R=l,B=g,Y=Xg((_||0)-n.rotation),X=B[0]>B[1],J="start"===R&&!X||"start"!==R&&X,Yp(Y-Sc/2)?(W=J?"bottom":"top",G="center"):Yp(Y-1.5*Sc)?(W=J?"top":"bottom",G="center"):(W="middle",G=Y<1.5*Sc&&Y>Sc/2?J?"left":"right":J?"right":"left"),i={rotation:Y,textAlign:G,textVerticalAlign:W},null!=(a=n.axisNameAvailableWidth)&&(a=Math.abs(a/Math.sin(i.rotation)),!isFinite(a)&&(a=null)));var w=h.getFont(),S=t.get("nameTruncate",!0)||{},M=S.ellipsis,A=ht(n.nameTruncateMaxWidth,S.maxWidth,a),I=new Kn({x:b[0],y:b[1],rotation:i.rotation,silent:ta.isLabelSilent(t),style:Or(h,{text:o,font:w,overflow:"truncate",width:A,ellipsis:M,fill:h.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:h.get("align")||i.textAlign,verticalAlign:h.get("verticalAlign")||i.textVerticalAlign}),z2:1});if(bf({el:I,componentModel:t,itemName:o}),I.__fullText=o,I.anid="name",t.get("triggerEvent")){var N=ta.makeAxisEventDataBase(t);N.targetType="axisName",N.name=o,cn(I).eventData=N}r.add(I),I.updateTransform(),e.add(I),I.decomposeTransform()}}};function Wt(n){n&&(n.ignore=!0)}function yg(n,t){var e=n&&n.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(e&&r){var o=qd([]);return Eo(o,o,-n.rotation),e.applyTransform(Ta([],o,n.getLocalTransform())),r.applyTransform(Ta([],o,t.getLocalTransform())),e.intersect(r)}}function sM(n){return"middle"===n||"center"===n}function lM(n,t,e,r,o){for(var i=[],a=[],l=[],c=0;c<n.length;c++){var h=n[c].coord;a[0]=h,a[1]=0,l[0]=h,l[1]=e,t&&(Ye(a,a,t),Ye(l,l,t));var p=new Yo({shape:{x1:a[0],y1:a[1],x2:l[0],y2:l[1]},style:r,z2:2,autoBatch:!0,silent:!0});Sh(p.shape,p.style.lineWidth),p.anid=o+"_"+n[c].tickValue,i.push(p)}return i}function Ib(n,t){return"all"===n||Ee(n)&&$t(n,t)>=0||n===t}function op(n){var t=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[vg(n)]}function Db(n){return!!n.get(["handle","show"])}function vg(n){return n.type+"||"+n.id}var Nb={},Cd=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o,i){this.axisPointerClass&&function BD(n){var t=op(n);if(t){var e=t.axisPointerModel,r=t.axis.scale,o=e.option,i=e.get("status"),a=e.get("value");null!=a&&(a=r.parse(a));var l=Db(e);null==i&&(o.status=l?"show":"hide");var c=r.getExtent().slice();c[0]>c[1]&&c.reverse(),(null==a||a>c[1])&&(a=c[1]),a<c[0]&&(a=c[0]),o.value=a,l&&(o.status=t.axis.scale.isBlank()?"hide":"show")}}(e),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,o,!0)},t.prototype.updateAxisPointer=function(e,r,o,i){this._doUpdateAxisPointerClass(e,o,!1)},t.prototype.remove=function(e,r){var o=this._axisPointer;o&&o.remove(r)},t.prototype.dispose=function(e,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,r,o){var c,i=t.getAxisPointerClass(this.axisPointerClass);if(i){var a=(c=op(e))&&c.axisPointerModel;a?(this._axisPointer||(this._axisPointer=new i)).render(e,a,r,o):this._disposeAxisPointer(r)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,r){Nb[e]=r},t.getAxisPointerClass=function(e){return e&&Nb[e]},t.type="axis",t}(Wr),uM=Gn();function zD(n,t,e,r){var o=e.axis;if(!o.scale.isBlank()){var i=e.getModel("splitArea"),a=i.getModel("areaStyle"),l=a.get("color"),c=r.coordinateSystem.getRect(),h=o.getTicksCoords({tickModel:i,clamp:!0});if(h.length){var p=l.length,g=uM(n).splitAreaColors,y=Et(),b=0;if(g)for(var _=0;_<h.length;_++){var w=g.get(h[_].tickValue);if(null!=w){b=(w+(p-1)*_)%p;break}}var S=o.toGlobalCoord(h[0].coord),M=a.getAreaStyle();for(l=Ee(l)?l:[l],_=1;_<h.length;_++){var A=o.toGlobalCoord(h[_].coord),I=void 0,N=void 0,L=void 0,R=void 0;o.isHorizontal()?(N=c.y,R=c.height,S=(I=S)+(L=A-I)):(I=c.x,L=c.width,S=(N=S)+(R=A-N));var O=h[_-1].tickValue;null!=O&&y.set(O,b),t.add(new $n({anid:null!=O?"area_"+O:null,shape:{x:I,y:N,width:L,height:R},style:Pe({fill:l[b]},M),autoBatch:!0,silent:!0})),b=(b+1)%p}uM(n).splitAreaColors=y}}}function cM(n){uM(n).splitAreaColors=null}var fL=["axisLine","axisTickLabel","axisName"],gL=["splitArea","splitLine","minorSplitLine"],dM=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return Ce(t,n),t.prototype.render=function(e,r,o,i){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new on,this.group.add(this._axisGroup),e.get("show")){var l=e.getCoordSysModel(),c=tM(l,e),h=new ta(e,De({handleAutoShown:function(p){for(var g=l.coordinateSystem.getCartesians(),y=0;y<g.length;y++)if(jS(g[y].getOtherAxis(e.axis).scale))return!0;return!1}},c));Z(fL,h.add,h),this._axisGroup.add(h.getGroup()),Z(gL,function(p){e.get([p,"show"])&&mL[p](this,this._axisGroup,e,l)},this),i&&"changeAxisOrder"===i.type&&i.isInitSort||vf(a,this._axisGroup,e),n.prototype.render.call(this,e,r,o,i)}},t.prototype.remove=function(){cM(this)},t.type="cartesianAxis",t}(Cd),mL={splitLine:function(n,t,e,r){var o=e.axis;if(!o.scale.isBlank()){var i=e.getModel("splitLine"),a=i.getModel("lineStyle"),l=a.get("color");l=Ee(l)?l:[l];for(var c=r.coordinateSystem.getRect(),h=o.isHorizontal(),p=0,g=o.getTicksCoords({tickModel:i}),y=[],b=[],_=a.getLineStyle(),w=0;w<g.length;w++){var S=o.toGlobalCoord(g[w].coord);h?(y[0]=S,y[1]=c.y,b[0]=S,b[1]=c.y+c.height):(y[0]=c.x,y[1]=S,b[0]=c.x+c.width,b[1]=S);var M=p++%l.length,I=new Yo({anid:null!=g[w].tickValue?"line_"+g[w].tickValue:null,autoBatch:!0,shape:{x1:y[0],y1:y[1],x2:b[0],y2:b[1]},style:Pe({stroke:l[M]},_),silent:!0});Sh(I.shape,_.lineWidth),t.add(I)}}},minorSplitLine:function(n,t,e,r){var o=e.axis,i=e.getModel("minorSplitLine").getModel("lineStyle"),a=r.coordinateSystem.getRect(),l=o.isHorizontal(),c=o.getMinorTicksCoords();if(c.length)for(var h=[],p=[],g=i.getLineStyle(),y=0;y<c.length;y++)for(var b=0;b<c[y].length;b++){var _=o.toGlobalCoord(c[y][b].coord);l?(h[0]=_,h[1]=a.y,p[0]=_,p[1]=a.y+a.height):(h[0]=a.x,h[1]=_,p[0]=a.x+a.width,p[1]=_);var w=new Yo({anid:"minor_line_"+c[y][b].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:p[0],y2:p[1]},style:g,silent:!0});Sh(w.shape,g.lineWidth),t.add(w)}},splitArea:function(n,t,e,r){zD(n,t,e,r)}},VD=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="xAxis",t}(dM),yL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=VD.type,e}return Ce(t,n),t.type="yAxis",t}(dM),FD=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="grid",e}return Ce(t,n),t.prototype.render=function(e,r){this.group.removeAll(),e.get("show")&&this.group.add(new $n({shape:e.coordinateSystem.getRect(),style:Pe({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Wr),GD={offset:0};function hM(n){n.registerComponentView(FD),n.registerComponentModel(ID),n.registerCoordinateSystem("cartesian2d",RD),gg(n,"x",Sb,GD),gg(n,"y",Sb,GD),n.registerComponentView(VD),n.registerComponentView(yL),n.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function HD(n){n.eachSeriesByType("radar",function(t){var e=t.getData(),r=[],o=t.coordinateSystem;if(o){var i=o.getIndicatorAxes();Z(i,function(a,l){e.each(e.mapDimension(i[l].dim),function(c,h){r[h]=r[h]||[];var p=o.dataToPoint(c,l);r[h][l]=Eb(p)?p:pM(o)})}),e.each(function(a){var l=Sa(r[a],function(c){return Eb(c)})||pM(o);r[a].push(l.slice()),e.setItemLayout(a,r[a])})}})}function Eb(n){return!isNaN(n[0])&&!isNaN(n[1])}function pM(n){return[n.cx,n.cy]}function WD(n){var t=n.polar;if(t){Ee(t)||(t=[t]);var e=[];Z(t,function(r,o){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),n.radar=n.radar||[],Ee(n.radar)||(n.radar=[n.radar]),n.radar.push(r)):e.push(r)}),n.polar=e}Z(n.series,function(r){r&&"radar"===r.type&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var vL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){var i=e.coordinateSystem,a=this.group,l=e.getData(),c=this._data;function h(y,b){var _=y.getItemVisual(b,"symbol")||"circle";if("none"!==_){var w=uu(y.getItemVisual(b,"symbolSize")),S=vo(_,-1,-1,2,2),M=y.getItemVisual(b,"symbolRotate")||0;return S.attr({style:{strokeNoScale:!0},z2:100,scaleX:w[0]/2,scaleY:w[1]/2,rotation:M*Math.PI/180||0}),S}}function p(y,b,_,w,S,M){_.removeAll();for(var A=0;A<b.length-1;A++){var I=h(w,S);I&&(I.__dimIdx=A,y[A]?(I.setPosition(y[A]),Qc[M?"initProps":"updateProps"](I,{x:b[A][0],y:b[A][1]},e,S)):I.setPosition(b[A]),_.add(I))}}function g(y){return j(y,function(b){return[i.cx,i.cy]})}l.diff(c).add(function(y){var b=l.getItemLayout(y);if(b){var _=new Zi,w=new $i,S={shape:{points:b}};_.shape.points=g(b),w.shape.points=g(b),to(_,S,e,y),to(w,S,e,y);var M=new on,A=new on;M.add(w),M.add(_),M.add(A),p(w.shape.points,b,A,l,y,!0),l.setItemGraphicEl(y,M)}}).update(function(y,b){var _=c.getItemGraphicEl(b),w=_.childAt(0),S=_.childAt(1),M=_.childAt(2),A={shape:{points:l.getItemLayout(y)}};A.shape.points&&(p(w.shape.points,A.shape.points,M,l,y,!1),js(S),js(w),hr(w,A,e),hr(S,A,e),l.setItemGraphicEl(y,_))}).remove(function(y){a.remove(c.getItemGraphicEl(y))}).execute(),l.eachItemGraphicEl(function(y,b){var _=l.getItemModel(b),w=y.childAt(0),S=y.childAt(1),M=y.childAt(2),A=l.getItemVisual(b,"style"),I=A.fill;a.add(y),w.useStyle(Pe(_.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:I})),Mi(w,_,"lineStyle"),Mi(S,_,"areaStyle");var N=_.getModel("areaStyle"),L=N.isEmpty()&&N.parentModel.isEmpty();S.ignore=L,Z(["emphasis","select","blur"],function(B){var G=_.getModel([B,"areaStyle"]),W=G.isEmpty()&&G.parentModel.isEmpty();S.ensureState(B).ignore=W&&L}),S.useStyle(Pe(N.getAreaStyle(),{fill:I,opacity:.7,decal:A.decal}));var R=_.getModel("emphasis"),O=R.getModel("itemStyle").getItemStyle();M.eachChild(function(B){if(B instanceof jo){var G=B.style;B.useStyle(De({image:G.image,x:G.x,y:G.y,width:G.width,height:G.height},A))}else B.useStyle(A),B.setColor(I),B.style.strokeNoScale=!0;B.ensureState("emphasis").style=jt(O);var W=l.getStore().get(l.getDimensionIndex(B.__dimIdx),b);(null==W||isNaN(W))&&(W=""),Ao(B,fo(_),{labelFetcher:l.hostModel,labelDataIndex:b,labelDimIndex:B.__dimIdx,defaultText:W,inheritColor:I,defaultOpacity:A.opacity})}),mo(y,R.get("focus"),R.get("blurScope"),R.get("disabled"))}),this._data=l},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(vr),UD=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return Ce(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new wc(Fe(this.getData,this),Fe(this.getRawData,this))},t.prototype.getInitialData=function(e,r){return Sd(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,r,o){var i=this.getData(),a=this.coordinateSystem.getIndicatorAxes(),l=this.getData().getName(e),c=""===l?this.name:l,h=Qw(this,e);return ti("section",{header:c,sortBlocks:!0,blocks:j(a,function(p){var g=i.get(i.mapDimension(p.dim),e);return ti("nameValue",{markerType:"subItem",markerColor:h,name:p.name,value:g,sortParam:g})})})},t.prototype.getTooltipPosition=function(e){if(null!=e)for(var r=this.getData(),o=this.coordinateSystem,i=r.getValues(j(o.dimensions,function(h){return r.mapDimension(h)}),e),a=0,l=i.length;a<l;a++)if(!isNaN(i[a])){var c=o.getIndicatorAxes();return o.coordToPoint(c[a].dataToCoord(i[a]),a)}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(Pr),xa=Mb.value;function ip(n,t){return Pe({show:t},n)}var Lb=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),r=this.get("splitNumber"),o=this.get("scale"),i=this.get("axisLine"),a=this.get("axisTick"),l=this.get("axisLabel"),c=this.get("axisName"),h=this.get(["axisName","show"]),p=this.get(["axisName","formatter"]),g=this.get("axisNameGap"),y=this.get("triggerEvent"),b=j(this.get("indicator")||[],function(_){null!=_.max&&_.max>0&&!_.min?_.min=0:null!=_.min&&_.min<0&&!_.max&&(_.max=0);var w=c;null!=_.color&&(w=Pe({color:_.color},c));var S=Ve(jt(_),{boundaryGap:e,splitNumber:r,scale:o,axisLine:i,axisTick:a,axisLabel:l,name:_.text,showName:h,nameLocation:"end",nameGap:g,nameTextStyle:w,triggerEvent:y},!1);bt(p)?S.name=p.replace("{value}",S.name??""):Se(p)&&(S.name=p(S.name,S));var A=new gr(S,null,this.ecModel);return ur(A,Kh.prototype),A.mainType="radar",A.componentIndex=this.componentIndex,A},this);this._indicatorModels=b},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Ve({lineStyle:{color:"#bbb"}},xa.axisLine),axisLabel:ip(xa.axisLabel,!1),axisTick:ip(xa.axisTick,!1),splitLine:ip(xa.splitLine,!0),splitArea:ip(xa.splitArea,!0),indicator:[]},t}(wn),fM=["axisLine","axisTickLabel","axisName"],gM=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var r=e.coordinateSystem;Z(j(r.getIndicatorAxes(),function(o){var i=o.model.get("showName")?o.name:"";return new ta(o.model,{axisName:i,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(o){Z(fM,o.add,o),this.group.add(o.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(e){var r=e.coordinateSystem,o=r.getIndicatorAxes();if(o.length){var i=e.get("shape"),a=e.getModel("splitLine"),l=e.getModel("splitArea"),c=a.getModel("lineStyle"),h=l.getModel("areaStyle"),p=a.get("show"),g=l.get("show"),y=c.get("color"),b=h.get("color"),_=Ee(y)?y:[y],w=Ee(b)?b:[b],S=[],M=[];if("circle"===i)for(var A=o[0].getTicksCoords(),I=r.cx,N=r.cy,L=0;L<A.length;L++)p&&S[J(S,_,L)].push(new da({shape:{cx:I,cy:N,r:A[L].coord}})),g&&L<A.length-1&&M[J(M,w,L)].push(new bh({shape:{cx:I,cy:N,r0:A[L].coord,r:A[L+1].coord}}));else{var R,O=j(o,function(ne,oe){var ie=ne.getTicksCoords();return R=null==R?ie.length-1:Math.min(ie.length-1,R),j(ie,function(se){return r.coordToPoint(se.coord,oe)})}),B=[];for(L=0;L<=R;L++){for(var G=[],W=0;W<o.length;W++)G.push(O[W][L]);G[0]&&G.push(G[0].slice()),p&&S[J(S,_,L)].push(new $i({shape:{points:G}})),g&&B&&M[J(M,w,L-1)].push(new Zi({shape:{points:G.concat(B)}})),B=G.slice().reverse()}}var Y=c.getLineStyle(),X=h.getAreaStyle();Z(M,function(ne,oe){this.group.add(za(ne,{style:Pe({stroke:"none",fill:w[oe%w.length]},X),silent:!0}))},this),Z(S,function(ne,oe){this.group.add(za(ne,{style:Pe({fill:"none",stroke:_[oe%_.length]},Y),silent:!0}))},this)}function J(ne,oe,ie){var se=ie%oe.length;return ne[se]=ne[se]||[],se}},t.type="radar",t}(Wr),jD=function(n){function t(e,r,o){var i=n.call(this,e,r,o)||this;return i.type="value",i.angle=0,i.name="",i}return Ce(t,n),t}(Bo),mM=function(){function n(t,e,r){this.dimensions=[],this._model=t,this._indicatorAxes=j(t.getIndicatorModels(),function(o,i){var a="indicator_"+i,l=new jD(a,new el);return l.name=o.get("name"),l.model=o,o.axis=l,this.dimensions.push(a),l},this),this.resize(t,r)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(t,e){return this.coordToPoint(this._indicatorAxes[e].dataToCoord(t),e)},n.prototype.coordToPoint=function(t,e){var r=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(r),this.cy-t*Math.sin(r)]},n.prototype.pointToData=function(t){var e=t[0]-this.cx,r=t[1]-this.cy,o=Math.sqrt(e*e+r*r);e/=o,r/=o;for(var i,a=Math.atan2(-r,e),l=1/0,c=-1,h=0;h<this._indicatorAxes.length;h++){var p=this._indicatorAxes[h],g=Math.abs(a-p.angle);g<l&&(i=p,c=h,l=g)}return[c,+(i&&i.coordToData(o))]},n.prototype.resize=function(t,e){var r=t.get("center"),o=e.getWidth(),i=e.getHeight(),a=Math.min(o,i)/2;this.cx=Ct(r[0],o),this.cy=Ct(r[1],i),this.startAngle=t.get("startAngle")*Math.PI/180;var l=t.get("radius");(bt(l)||dt(l))&&(l=[0,l]),this.r0=Ct(l[0],a),this.r=Ct(l[1],a),Z(this._indicatorAxes,function(c,h){c.setExtent(this.r0,this.r);var p=this.startAngle+h*Math.PI*2/this._indicatorAxes.length;p=Math.atan2(Math.sin(p),Math.cos(p)),c.angle=p},this)},n.prototype.update=function(t,e){var r=this._indicatorAxes,o=this._model;Z(r,function(l){l.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(l,c){if("radar"===l.get("coordinateSystem")&&t.getComponent("radar",l.get("radarIndex"))===o){var h=l.getData();Z(r,function(p){p.scale.unionExtentFromData(h,h.mapDimension(p.dim))})}},this);var i=o.get("splitNumber"),a=new el;a.setExtent(0,i),a.setInterval(1),Z(r,function(l,c){oM(l.scale,l.model,a)})},n.prototype.convertToPixel=function(t,e,r){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(t,e,r){return console.warn("Not implemented."),null},n.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},n.create=function(t,e){var r=[];return t.eachComponent("radar",function(o){var i=new n(o,t,e);r.push(i),o.coordinateSystem=i}),t.eachSeriesByType("radar",function(o){"radar"===o.get("coordinateSystem")&&(o.coordinateSystem=r[o.get("radarIndex")||0])}),r},n.dimensions=[],n}();function YD(n){n.registerCoordinateSystem("radar",mM),n.registerComponentModel(Lb),n.registerComponentView(gM),n.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(r){e.setItemVisual(r,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}var XD="\0_ec_interaction_mutex";function Rb(n,t){return!!Ob(n)[t]}function Ob(n){return n[XD]||(n[XD]={})}Ks({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},zr);var bg=function(n){function t(e){var r=n.call(this)||this;r._zr=e;var o=Fe(r._mousedownHandler,r),i=Fe(r._mousemoveHandler,r),a=Fe(r._mouseupHandler,r),l=Fe(r._mousewheelHandler,r),c=Fe(r._pinchHandler,r);return r.enable=function(h,p){this.disable(),this._opt=Pe(jt(p)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==h&&(h=!0),!0!==h&&"move"!==h&&"pan"!==h||(e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",a)),!0!==h&&"scale"!==h&&"zoom"!==h||(e.on("mousewheel",l),e.on("pinch",c))},r.disable=function(){e.off("mousedown",o),e.off("mousemove",i),e.off("mouseup",a),e.off("mousewheel",l),e.off("pinch",c)},r}return Ce(t,n),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!Yd(e)){for(var r=e.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var o=e.offsetX,i=e.offsetY;this.pointerChecker&&this.pointerChecker(e,o,i)&&(this._x=o,this._y=i,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&xg("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!Rb(this._zr,"globalPan")){var r=e.offsetX,o=e.offsetY,i=this._x,a=this._y,l=r-i,c=o-a;this._x=r,this._y=o,this._opt.preventDefaultMouseMove&&Qa(e.event),Cl(this,"pan","moveOnMouseMove",e,{dx:l,dy:c,oldX:i,oldY:a,newX:r,newY:o,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){Yd(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var r=xg("zoomOnMouseWheel",e,this._opt),o=xg("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,a=Math.abs(i),l=e.offsetX,c=e.offsetY;if(0!==i&&(r||o)){if(r){var h=a>3?1.4:a>1?1.2:1.1;Pb(this,"zoom","zoomOnMouseWheel",e,{scale:i>0?h:1/h,originX:l,originY:c,isAvailableBehavior:null})}if(o){var p=Math.abs(i);Pb(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(i>0?1:-1)*(p>3?.4:p>1?.15:.05),originX:l,originY:c,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){Rb(this._zr,"globalPan")||Pb(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(xn);function Pb(n,t,e,r,o){n.pointerChecker&&n.pointerChecker(r,o.originX,o.originY)&&(Qa(r.event),Cl(n,t,e,r,o))}function Cl(n,t,e,r,o){o.isAvailableBehavior=Fe(xg,null,e,r),n.trigger(t,o)}function xg(n,t,e){var r=e[n];return!n||r&&(!bt(r)||t.event[r+"Key"])}function Md(n,t,e){var r=n.target;r.x+=t,r.y+=e,r.dirty()}function ap(n,t,e,r){var o=n.target,i=n.zoomLimit,a=n.zoom=n.zoom||1;if(a*=t,i){var l=i.min||0;a=Math.max(Math.min(i.max||1/0,a),l)}var h=a/n.zoom;n.zoom=a,o.x-=(e-o.x)*(h-1),o.y-=(r-o.y)*(h-1),o.scaleX*=h,o.scaleY*=h,o.dirty()}var yM,vM={axisPointer:1,tooltip:1,brush:1};function sp(n,t,e){var r=t.getComponentByElement(n.topTarget),o=r&&r.coordinateSystem;return r&&r!==e&&!vM.hasOwnProperty(r.mainType)&&o&&o.model!==e}function qD(n){bt(n)&&(n=(new DOMParser).parseFromString(n,"text/xml"));var t=n;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var Vy={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Bb=vn(Vy),zb={"alignment-baseline":"textBaseline","stop-color":"stopColor"},bM=vn(zb),bL=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(t,e){e=e||{};var r=qD(t);this._defsUsePending=[];var o=new on;this._root=o;var i=[],a=r.getAttribute("viewBox")||"",l=parseFloat(r.getAttribute("width")||e.width),c=parseFloat(r.getAttribute("height")||e.height);isNaN(l)&&(l=null),isNaN(c)&&(c=null),_a(r,o,null,!0,!1);for(var h,p,g=r.firstChild;g;)this._parseNode(g,o,i,null,!1,!1),g=g.nextSibling;if(function(_,w){for(var S=0;S<w.length;S++){var M=w[S];M[0].style[M[1]]=_[M[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],a){var y=Fb(a);y.length>=4&&(h={x:parseFloat(y[0]||0),y:parseFloat(y[1]||0),width:parseFloat(y[2]),height:parseFloat(y[3])})}if(h&&null!=l&&null!=c&&(p=Hb(h,{x:0,y:0,width:l,height:c}),!e.ignoreViewBox)){var b=o;(o=new on).add(b),b.scaleX=b.scaleY=p.scale,b.x=p.x,b.y=p.y}return e.ignoreRootClip||null==l||null==c||o.setClipPath(new $n({shape:{x:0,y:0,width:l,height:c}})),{root:o,width:l,height:c,viewBoxRect:h,viewBoxTransform:p,named:i}},n.prototype._parseNode=function(t,e,r,o,i,a){var l,c=t.nodeName.toLowerCase(),h=o;if("defs"===c&&(i=!0),"text"===c&&(a=!0),"defs"===c||"switch"===c)l=e;else{if(!i){var p=yM[c];if(p&&Lt(yM,c)){l=p.call(this,t,e);var g=t.getAttribute("name");if(g){var y={name:g,namedFrom:null,svgNodeTagLower:c,el:l};r.push(y),"g"===c&&(h=y)}else o&&r.push({name:o.name,namedFrom:o,svgNodeTagLower:c,el:l});e.add(l)}}var b=xM[c];if(b&&Lt(xM,c)){var _=b.call(this,t),w=t.getAttribute("id");w&&(this._defs[w]=_)}}if(l&&l.isGroup)for(var S=t.firstChild;S;)1===S.nodeType?this._parseNode(S,l,r,h,i,a):3===S.nodeType&&a&&this._parseText(S,l),S=S.nextSibling},n.prototype._parseText=function(t,e){var r=new Xi({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});ws(e,r),_a(t,r,this._defsUsePending,!1,!1),function(c,h){var p=h.__selfStyle;if(p){var g=p.textBaseline,y=g;g&&"auto"!==g?"baseline"===g?y="alphabetic":"before-edge"===g||"text-before-edge"===g?y="top":"after-edge"===g||"text-after-edge"===g?y="bottom":"central"!==g&&"mathematical"!==g||(y="middle"):y="alphabetic",c.style.textBaseline=y}var b=h.__inheritedStyle;if(b){var _=b.textAlign,w=_;_&&("middle"===_&&(w="center"),c.style.textAlign=w)}}(r,e);var o=r.style,i=o.fontSize;i&&i<9&&(o.fontSize=9,r.scaleX*=i/9,r.scaleY*=i/9);var a=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=a;var l=r.getBoundingRect();return this._textX+=l.width,e.add(r),r},n.internalField=void(yM={g:function(t,e){var r=new on;return ws(e,r),_a(t,r,this._defsUsePending,!1,!1),r},rect:function(t,e){var r=new $n;return ws(e,r),_a(t,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(t,e){var r=new da;return ws(e,r),_a(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),r.silent=!0,r},line:function(t,e){var r=new Yo;return ws(e,r),_a(t,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(t,e){var r=new gh;return ws(e,r),_a(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(t,e){var r,o=t.getAttribute("points");o&&(r=$D(o));var i=new Zi({shape:{points:r||[]},silent:!0});return ws(e,i),_a(t,i,this._defsUsePending,!1,!1),i},polyline:function(t,e){var r,o=t.getAttribute("points");o&&(r=$D(o));var i=new $i({shape:{points:r||[]},silent:!0});return ws(e,i),_a(t,i,this._defsUsePending,!1,!1),i},image:function(t,e){var r=new jo;return ws(e,r),_a(t,r,this._defsUsePending,!1,!1),r.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),r.silent=!0,r},text:function(t,e){var r=t.getAttribute("x")||"0",o=t.getAttribute("y")||"0",i=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(i),this._textY=parseFloat(o)+parseFloat(a);var l=new on;return ws(e,l),_a(t,l,this._defsUsePending,!1,!0),l},tspan:function(t,e){var r=t.getAttribute("x"),o=t.getAttribute("y");null!=r&&(this._textX=parseFloat(r)),null!=o&&(this._textY=parseFloat(o));var i=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0",l=new on;return ws(e,l),_a(t,l,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(a),l},path:function(t,e){var r=PA(t.getAttribute("d")||"");return ws(e,r),_a(t,r,this._defsUsePending,!1,!1),r.silent=!0,r}}),n}(),xM={lineargradient:function(n){var t=parseInt(n.getAttribute("x1")||"0",10),e=parseInt(n.getAttribute("y1")||"0",10),r=parseInt(n.getAttribute("x2")||"10",10),o=parseInt(n.getAttribute("y2")||"0",10),i=new gf(t,e,r,o);return Vb(n,i),ZD(n,i),i},radialgradient:function(n){var t=parseInt(n.getAttribute("cx")||"0",10),e=parseInt(n.getAttribute("cy")||"0",10),r=parseInt(n.getAttribute("r")||"0",10),o=new $_(t,e,r);return Vb(n,o),ZD(n,o),o}};function Vb(n,t){"userSpaceOnUse"===n.getAttribute("gradientUnits")&&(t.global=!0)}function ZD(n,t){for(var e=n.firstChild;e;){if(1===e.nodeType&&"stop"===e.nodeName.toLocaleLowerCase()){var o,r=e.getAttribute("offset");o=r&&r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var i={};e2(e,i,i);var a=i.stopColor||e.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:o,color:a})}e=e.nextSibling}}function ws(n,t){n&&n.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Pe(t.__inheritedStyle,n.__inheritedStyle))}function $D(n){for(var t=Fb(n),e=[],r=0;r<t.length;r+=2){var o=parseFloat(t[r]),i=parseFloat(t[r+1]);e.push([o,i])}return e}function _a(n,t,e,r,o){var i=t,a=i.__inheritedStyle=i.__inheritedStyle||{},l={};1===n.nodeType&&(function(c,h){var p=c.getAttribute("transform");if(p){p=p.replace(/,/g," ");var g=[],y=null;p.replace(Gb,function(M,A,I){return g.push(A,I),""});for(var b=g.length-1;b>0;b-=2){var w=g[b-1],S=Fb(g[b]);switch(y=y||[1,0,0,1,0,0],w){case"translate":es(y,y,[parseFloat(S[0]),parseFloat(S[1]||"0")]);break;case"scale":Dp(y,y,[parseFloat(S[0]),parseFloat(S[1]||S[0])]);break;case"rotate":Eo(y,y,-parseFloat(S[0])*_M,[parseFloat(S[1]||"0"),parseFloat(S[2]||"0")]);break;case"skewX":Ta(y,[1,0,Math.tan(parseFloat(S[0])*_M),1,0,0],y);break;case"skewY":Ta(y,[1,Math.tan(parseFloat(S[0])*_M),0,1,0,0],y);break;case"matrix":y[0]=parseFloat(S[0]),y[1]=parseFloat(S[1]),y[2]=parseFloat(S[2]),y[3]=parseFloat(S[3]),y[4]=parseFloat(S[4]),y[5]=parseFloat(S[5])}}h.setLocalTransform(y)}}(n,t),e2(n,a,l),r||function(c,h,p){for(var g=0;g<Bb.length;g++){var y=Bb[g];null!=(b=c.getAttribute(y))&&(h[Vy[y]]=b)}for(g=0;g<bM.length;g++){var b;null!=(b=c.getAttribute(y=bM[g]))&&(p[zb[y]]=b)}}(n,a,l)),i.style=i.style||{},null!=a.fill&&(i.style.fill=JD(i,"fill",a.fill,e)),null!=a.stroke&&(i.style.stroke=JD(i,"stroke",a.stroke,e)),Z(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(c){null!=a[c]&&(i.style[c]=parseFloat(a[c]))}),Z(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(c){null!=a[c]&&(i.style[c]=a[c])}),o&&(i.__selfStyle=l),a.lineDash&&(i.style.lineDash=j(Fb(a.lineDash),function(c){return parseFloat(c)})),"hidden"!==a.visibility&&"collapse"!==a.visibility||(i.invisible=!0),"none"===a.display&&(i.ignore=!0)}var KD=/^url\(\s*#(.*?)\)/;function JD(n,t,e,r){var o=e&&e.match(KD);if(!o)return"none"===e&&(e=null),e;var i=Br(o[1]);r.push([n,t,i])}var QD=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Fb(n){return n.match(QD)||[]}var Gb=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,_M=Math.PI/180,Fy=/([^\s:;]+)\s*:\s*([^:;]+)/g;function e2(n,t,e){var r,o=n.getAttribute("style");if(o)for(Fy.lastIndex=0;null!=(r=Fy.exec(o));){var i=r[1],a=Lt(Vy,i)?Vy[i]:null;a&&(t[a]=r[2]);var l=Lt(zb,i)?zb[i]:null;l&&(e[l]=r[2])}}function Hb(n,t){var o=Math.min(t.width/n.width,t.height/n.height);return{scale:o,x:-(n.x+n.width/2)*o+(t.x+t.width/2),y:-(n.y+n.height/2)*o+(t.y+t.height/2)}}for(var Gy=Et(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),t2=function(){function n(t,e){this.type="geoSVG",this._usedGraphicMap=Et(),this._freedGraphics=[],this._mapName=t,this._parsedXML=qD(e)}return n.prototype.load=function(){var i,a,l,t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=(i=t.named,a=[],l=Et(),Z(i,function(c){if(null==c.namedFrom){var h=new MI(c.name,c.el);a.push(h),l.set(c.name,h)}}),{regions:a,regionsMap:l}),o=e.regionsMap;this._regions=e.regions,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(t){var e,r,o,i;try{bn(null!=(r=(e=t&&(o=t,i={ignoreViewBox:!0,ignoreRootClip:!0},(new bL).parse(o,i))||{}).root))}catch(A){throw new Error("Invalid svg format\n"+A.message)}var a=new on;a.add(r),a.isGeoSVGGraphicRoot=!0;var l=e.width,c=e.height,h=e.viewBoxRect,p=this._boundingRect;if(!p){var g=void 0,y=void 0,b=void 0,_=void 0;if(null!=l?(g=0,b=l):h&&(g=h.x,b=h.width),null!=c?(y=0,_=c):h&&(y=h.y,_=h.height),null==g||null==y){var w=r.getBoundingRect();null==g&&(g=w.x,b=w.width),null==y&&(y=w.y,_=w.height)}p=this._boundingRect=new Kt(g,y,b,_)}if(h){var S=Hb(h,p);r.scaleX=r.scaleY=S.scale,r.x=S.x,r.y=S.y}a.setClipPath(new $n({shape:p.plain()}));var M=[];return Z(e.named,function(A){var I;null!=Gy.get(A.svgNodeTagLower)&&(M.push(A),(I=A.el).silent=!1,I.isGroup&&I.traverse(function(N){N.silent=!1}))}),{root:a,boundingRect:p,named:M}},n.prototype.useGraphic=function(t){var e=this._usedGraphicMap,r=e.get(t);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,r),r)},n.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,r=e.get(t);r&&(e.removeKey(t),this._freedGraphics.push(r))},n}(),Wb=[126,25],Td=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Cc=0;Cc<Td.length;Cc++)for(var Mc=0;Mc<Td[Cc].length;Mc++)Td[Cc][Mc][0]/=10.5,Td[Cc][Mc][1]/=-14,Td[Cc][Mc][0]+=Wb[0],Td[Cc][Mc][1]+=Wb[1];var _g={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]},n2=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],r2=function(){function n(t,e,r){var o;this.type="geoJSON",this._parsedMap=Et(),this._mapName=t,this._specialAreas=r,this._geoJSON=bt(o=e)?typeof JSON<"u"&&JSON.parse?JSON.parse(o):new Function("return ("+o+");")():o}return n.prototype.load=function(t,e){var r=this._parsedMap.get(e=e||"name");if(!r){var o=this._parseToRegions(e);r=this._parsedMap.set(e,{regions:o,boundingRect:SM(o)})}var i=Et(),a=[];return Z(r.regions,function(l){var c=l.name;t&&Lt(t,c)&&(l=l.cloneShallow(c=t[c])),a.push(l),i.set(c,l)}),{regions:a,boundingRect:r.boundingRect||new Kt(0,0,0,0),regionsMap:i}},n.prototype._parseToRegions=function(t){var e,r=this._mapName,o=this._geoJSON;try{e=o?q1(o,t):[]}catch(i){throw new Error("Invalid geoJson format\n"+i.message)}return function(i,a){if("china"===i){for(var l=0;l<a.length;l++)if("\u5357\u6d77\u8bf8\u5c9b"===a[l].name)return;a.push(new sC("\u5357\u6d77\u8bf8\u5c9b",j(Td,function(c){return{type:"polygon",exterior:c}}),Wb))}}(r,e),Z(e,function(i){var h,a=i.name;(function(c,h){if("china"===c){var p=_g[h.name];if(p){var g=h.getCenter();g[0]+=p[0]/10.5,g[1]+=-p[1]/14,h.setCenter(g)}}})(r,i),h=i,"china"===r&&"\u53f0\u6e7e"===h.name&&h.geometries.push({type:"polygon",exterior:n2[0]});var l=this._specialAreas&&this._specialAreas[a];l&&i.transformTo(l.left,l.top,l.width,l.height)},this),e},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function SM(n){for(var t,e=0;e<n.length;e++){var r=n[e].getBoundingRect();(t=t||r.clone()).union(r)}return t}var lp=Et(),xL=function(n,t,e){if(t.svg){var r=new t2(n,t.svg);lp.set(n,r)}else{var o=t.geoJson||t.geoJSON;o&&!t.features?e=t.specialAreas:o=t,r=new r2(n,o,e),lp.set(n,r)}},Ub=function(n){return lp.get(n)},CM=function(n){var t=lp.get(n);return t&&"geoJSON"===t.type&&t.getMapForUser()},MM=function(n,t,e){var r=lp.get(n);if(r)return r.load(t,e)},TM=["rect","circle","line","ellipse","polygon","polyline","path"],_L=Et(TM),wL=Et(TM.concat(["g"])),SL=Et(TM.concat(["g"])),o2=Gn();function jb(n){var t=n.getItemStyle(),e=n.get("areaColor");return null!=e&&(t.fill=e),t}function AM(n){var t=n.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var wg=function(){function n(t){var e=new on;this.uid=Mh("ec_map_draw"),this._controller=new bg(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new on),e.add(this._svgGroup=new on)}return n.prototype.draw=function(t,e,r,o,i){var a="geo"===t.mainType,l=t.getData&&t.getData();a&&e.eachComponent({mainType:"series",subType:"map"},function(S){l||S.getHostGeoModel()!==t||(l=S.getData())});var c=t.coordinateSystem,h=this._regionsGroup,p=this.group,g=c.getTransformInfo(),y=g.raw,b=g.roam;!h.childAt(0)||i?(p.x=b.x,p.y=b.y,p.scaleX=b.scaleX,p.scaleY=b.scaleY,p.dirty()):hr(p,b,t);var _=l&&l.getVisual("visualMeta")&&l.getVisual("visualMeta").length>0,w={api:r,geo:c,mapOrGeoModel:t,data:l,isVisualEncodedByVisualMap:_,isGeo:a,transformInfoRaw:y};"geoJSON"===c.resourceType?this._buildGeoJSON(w):"geoSVG"===c.resourceType&&this._buildSVG(w),this._updateController(t,e,r),this._updateMapSelectHandler(t,h,r,o)},n.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=Et(),r=Et(),o=this._regionsGroup,i=t.transformInfoRaw,a=t.mapOrGeoModel,l=t.data,c=t.geo.projection,h=c&&c.stream;function p(b,_){return _&&(b=_(b)),b&&[b[0]*i.scaleX+i.x,b[1]*i.scaleY+i.y]}function g(b){for(var _=[],w=!h&&c&&c.project,S=0;S<b.length;++S){var M=p(b[S],w);M&&_.push(M)}return _}function y(b){return{shape:{points:g(b)}}}o.removeAll(),Z(t.geo.regions,function(b){var _=b.name,w=e.get(_),S=r.get(_)||{},M=S.dataIdx,A=S.regionModel;w||(w=e.set(_,new on),o.add(w),M=l?l.indexOfName(_):null,A=t.isGeo?a.getRegionModel(_):l?l.getItemModel(M):null,r.set(_,{dataIdx:M,regionModel:A}));var I=[],N=[];Z(b.geometries,function(O){if("polygon"===O.type){var B=[O.exterior].concat(O.interiors||[]);h&&(B=s2(B,h)),Z(B,function(W){I.push(new Zi(y(W)))})}else{var G=O.points;h&&(G=s2(G,h,!0)),Z(G,function(W){N.push(new $i(y(W)))})}});var L=p(b.getCenter(),c&&c.project);function R(O,B){if(O.length){var G=new xh({culling:!0,segmentIgnoreThreshold:1,shape:{paths:O}});w.add(G),i2(t,G,M,A),kM(t,G,_,A,a,M,L),B&&(AM(G),Z(G.states,AM))}}R(I),R(N,!0)}),e.each(function(b,_){var w=r.get(_),M=w.regionModel;Yb(t,b,_,M,a,w.dataIdx),IM(t,b,_,M,a),a2(t,b,_,M,a)},this)},n.prototype._buildSVG=function(t){var e=t.geo.map,r=t.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var o=this._svgDispatcherMap=Et(),i=!1;Z(this._svgGraphicRecord.named,function(a){var l=a.name,c=t.mapOrGeoModel,h=t.data,p=a.svgNodeTagLower,g=a.el,y=h?h.indexOfName(l):null,b=c.getRegionModel(l);null!=_L.get(p)&&g instanceof hs&&i2(t,g,y,b),g instanceof hs&&(g.culling=!0),g.z2EmphasisLift=0,a.namedFrom||(null!=SL.get(p)&&kM(t,g,l,b,c,y,null),Yb(t,g,l,b,c,y),IM(t,g,l,b,c),null!=wL.get(p)&&("self"===a2(t,g,l,b,c)&&(i=!0),(o.get(l)||o.set(l,[])).push(g)))},this),this._enableBlurEntireSVG(i,t)},n.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var r=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(o){if(!o.isGroup){$c(o);var i=o.ensureState("blur").style||{};null==i.opacity&&null!=r&&(i.opacity=r),o.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(t,e){if(null==t)return[];var r=e.coordinateSystem;if("geoJSON"===r.resourceType){var o=this._regionsGroupByName;if(o){var i=o.get(t);return i?[i]:[]}}else if("geoSVG"===r.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},n.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},n.prototype._useSVG=function(t){var e=Ub(t);if(e&&"geoSVG"===e.type){var r=e.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=t}},n.prototype._freeSVG=function(){var t=this._svgMapName;if(null!=t){var e=Ub(t);e&&"geoSVG"===e.type&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(t,e,r){var o=t.coordinateSystem,i=this._controller,a=this._controllerHost;a.zoomLimit=t.get("scaleLimit"),a.zoom=o.getZoom(),i.enable(t.get("roam")||!1);var l=t.mainType;function c(){var h={type:"geoRoam",componentType:l};return h[l+"Id"]=t.id,h}i.off("pan").on("pan",function(h){this._mouseDownFlag=!1,Md(a,h.dx,h.dy),r.dispatchAction(De(c(),{dx:h.dx,dy:h.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(h){this._mouseDownFlag=!1,ap(a,h.scale,h.originX,h.originY),r.dispatchAction(De(c(),{totalZoom:a.zoom,zoom:h.scale,originX:h.originX,originY:h.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(h,p,g){return o.containPoint([p,g])&&!sp(h,r,t)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=o2(e).ignore)})},n.prototype._updateMapSelectHandler=function(t,e,r,o){var i=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){i._mouseDownFlag=!0}),e.on("click",function(a){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},n}();function i2(n,t,e,r){var o=r.getModel("itemStyle"),i=r.getModel(["emphasis","itemStyle"]),a=r.getModel(["blur","itemStyle"]),l=r.getModel(["select","itemStyle"]),c=jb(o),h=jb(i),p=jb(l),g=jb(a),y=n.data;if(y){var b=y.getItemVisual(e,"style"),_=y.getItemVisual(e,"decal");n.isVisualEncodedByVisualMap&&b.fill&&(c.fill=b.fill),_&&(c.decal=pd(_,n.api))}t.setStyle(c),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=h,t.ensureState("select").style=p,t.ensureState("blur").style=g,$c(t)}function kM(n,t,e,r,o,i,a){var l=n.data,c=n.isGeo,h=l&&isNaN(l.get(l.mapDimension("value"),i)),p=l&&l.getItemLayout(i);if(c||h||p&&p.showLabel){var g=c?e:i,y=void 0;(!l||i>=0)&&(y=o);var b=a?{normal:{align:"center",verticalAlign:"middle"}}:null;Ao(t,fo(r),{labelFetcher:y,labelDataIndex:g,defaultText:e},b);var _=t.getTextContent();if(_&&(o2(_).ignore=_.ignore,t.textConfig&&a)){var w=t.getBoundingRect().clone();t.textConfig.layoutRect=w,t.textConfig.position=[(a[0]-w.x)/w.width*100+"%",(a[1]-w.y)/w.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function Yb(n,t,e,r,o,i){n.data?n.data.setItemGraphicEl(i,t):cn(t).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:e,region:r&&r.option||{}}}function IM(n,t,e,r,o){n.data||bf({el:t,componentModel:o,itemName:e,itemTooltipOption:r.get("tooltip")})}function a2(n,t,e,r,o){t.highDownSilentOnTouch=!!o.get("selectedMode");var c,h,p,i=r.getModel("emphasis"),a=i.get("focus");return mo(t,a,i.get("blurScope"),i.get("disabled")),n.isGeo&&(c=o,h=e,(p=cn(t)).componentMainType=c.mainType,p.componentIndex=c.componentIndex,p.componentHighDownName=h),a}function s2(n,t,e){var r,o=[];function i(){r=[]}function a(){r.length&&(o.push(r),r=[])}var l=t({polygonStart:i,polygonEnd:a,lineStart:i,lineEnd:a,point:function(c,h){isFinite(c)&&isFinite(h)&&r.push([c,h])},sphere:function(){}});return!e&&l.polygonStart(),Z(n,function(c){l.lineStart();for(var h=0;h<c.length;h++)l.point(c[h][0],c[h][1]);l.lineEnd()}),!e&&l.polygonEnd(),o}var CL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var a=this.group;if(a.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&i&&"geoRoam"===i.type&&this._mapDraw.resetForLabelLayout(),i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===e.id)(l=this._mapDraw)&&a.add(l.group);else if(e.needsDrawMap){var l=this._mapDraw||new wg(o);a.add(l.group),l.draw(e,r,o,this,i),this._mapDraw=l}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(e,r,o)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,r,o){var i=e.originalData,a=this.group;i.each(i.mapDimension("value"),function(l,c){if(!isNaN(l)){var h=i.getItemLayout(c);if(h&&h.point){var p=h.point,g=h.offset,y=new da({style:{fill:e.getData().getVisual("style").fill},shape:{cx:p[0]+9*g,cy:p[1],r:3},silent:!0,z2:8+(g?0:11)});if(!g){var b=e.mainSeries.getData(),_=i.getName(c),w=b.indexOfName(_),S=i.getItemModel(c),M=S.getModel("label"),A=b.getItemGraphicEl(w);Ao(y,fo(S),{labelFetcher:{getFormattedLabel:function(I,N){return e.getFormattedLabel(w,N)}},defaultText:_}),y.disableLabelAnimation=!0,M.get("position")||y.setTextConfig({position:"bottom"}),A.onHoverStateChange=function(I){dm(y,I)}}a.add(y)}}})},t.type="map",t}(vr),ML=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(r){if(null!=r){var o=this.getData().getName(r),i=this.coordinateSystem,a=i.getRegion(o);return a&&i.dataToPoint(a.getCenter())}},e}return Ce(t,n),t.prototype.getInitialData=function(e){for(var r=Sd(this,{coordDimensions:["value"],encodeDefaulter:_t(V0,this)}),o=Et(),i=[],a=0,l=r.count();a<l;a++){var c=r.getName(a);o.set(c,!0)}return Z(MM(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(h){var p=h.name;o.get(p)||i.push(p)}),r.appendValues([],i),r},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var r=this.getData();return r.get(r.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var r=this.getData();return r.getItemModel(r.indexOfName(e))},t.prototype.formatTooltip=function(e,r,o){for(var i=this.getData(),a=this.getRawValue(e),l=i.getName(e),c=this.seriesGroup,h=[],p=0;p<c.length;p++){var g=c[p].originalData.indexOfName(l),y=i.mapDimension("value");isNaN(c[p].originalData.get(y,g))||h.push(c[p].name)}return ti("section",{header:h.join(", "),noHeader:!h.length,blocks:[ti("nameValue",{name:l,value:a})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var r=e.icon||"roundRect",o=vo(r,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return o.setStyle(e.itemStyle),o.style.stroke="none",r.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill="#fff",o.style.lineWidth=2),o},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(Pr);function TL(n){var t={};n.eachSeriesByType("map",function(e){var r=e.getHostGeoModel(),o=r?"o"+r.id:"i"+e.getMapType();(t[o]=t[o]||[]).push(e)}),Z(t,function(e,r){for(var o,i,a,l=(o=j(e,function(h){return h.getData()}),i=e[0].get("mapValueCalculation"),a={},Z(o,function(h){h.each(h.mapDimension("value"),function(p,g){var y="ec-"+h.getName(g);a[y]=a[y]||[],isNaN(p)||a[y].push(p)})}),o[0].map(o[0].mapDimension("value"),function(h,p){for(var g="ec-"+o[0].getName(p),y=0,b=1/0,_=-1/0,w=a[g].length,S=0;S<w;S++)b=Math.min(b,a[g][S]),_=Math.max(_,a[g][S]),y+=a[g][S];return 0===w?NaN:"min"===i?b:"max"===i?_:"average"===i?y/w:y})),c=0;c<e.length;c++)e[c].originalData=e[c].getData();for(c=0;c<e.length;c++)e[c].seriesGroup=e,e[c].needsDrawMap=0===c&&!e[c].getHostGeoModel(),e[c].setData(l.cloneShallow()),e[c].mainSeries=e[0]})}function AL(n){var t={};n.eachSeriesByType("map",function(e){var r=e.getMapType();if(!e.getHostGeoModel()&&!t[r]){var o={};Z(e.seriesGroup,function(a){var l=a.coordinateSystem,c=a.originalData;a.get("showLegendSymbol")&&n.getComponent("legend")&&c.each(c.mapDimension("value"),function(h,p){var g=c.getName(p),y=l.getRegion(g);if(y&&!isNaN(h)){var b=o[g]||0,_=l.dataToPoint(y.getCenter());o[g]=b+1,c.setItemLayout(p,{point:_,offset:b})}})});var i=e.getData();i.each(function(a){var l=i.getName(a),c=i.getItemLayout(a)||{};c.showLabel=!o[l],i.setItemLayout(a,c)}),t[r]=!0}})}var l2=Ye,Hy=function(n){function t(e){var r=n.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new dr,r._rawTransformable=new dr,r.name=e,r}return Ce(t,n),t.prototype.setBoundingRect=function(e,r,o,i){return this._rect=new Kt(e,r,o,i),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,r,o,i){this._transformTo(e,r,o,i),this._viewRect=new Kt(e,r,o,i)},t.prototype._transformTo=function(e,r,o,i){var a=this.getBoundingRect(),l=this._rawTransformable;l.transform=a.calculateTransform(new Kt(e,r,o,i));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,this._updateTransform()},t.prototype.setCenter=function(e,r){e&&(this._center=[Ct(e[0],r.getWidth()),Ct(e[1],r.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var r=this.zoomLimit;r&&(null!=r.max&&(e=Math.min(r.max,e)),null!=r.min&&(e=Math.max(r.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,o=this.getDefaultCenter(),i=this.getCenter(),a=this.getZoom();i=Ye([],i,e),o=Ye([],o,e),r.originX=i[0],r.originY=i[1],r.x=o[0]-i[0],r.y=o[1]-i[1],r.scaleX=r.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,r=this._rawTransformable;r.parent=e,e.updateTransform(),r.updateTransform(),Ds(this.transform||(this.transform=[]),r.transform||[1,0,0,1,0,0]),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],Ns(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,r=this._roamTransformable,o=new dr;return o.transform=r.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,r,o){var i=r?this._rawTransform:this.transform;return o=o||[],i?l2(o,e,i):lo(o,e)},t.prototype.pointToData=function(e){var r=this.invTransform;return r?l2([],e,r):[e[0],e[1]]},t.prototype.convertToPixel=function(e,r,o){var i=u2(r);return i===this?i.dataToPoint(o):null},t.prototype.convertFromPixel=function(e,r,o){var i=u2(r);return i===this?i.pointToData(o):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(dr);function u2(n){var t=n.seriesModel;return t?t.coordinateSystem:null}var c2={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},DM=["lng","lat"],Sg=function(n){function t(e,r,o){var i=n.call(this,e)||this;i.dimensions=DM,i.type="geo",i._nameCoordMap=Et(),i.map=r;var a,l=o.projection,c=MM(r,o.nameMap,o.nameProperty),h=Ub(r),p=(i.resourceType=h?h.type:null,i.regions=c.regions),g=c2[h.type];if(i._regionsMap=c.regionsMap,i.regions=c.regions,i.projection=l,l)for(var y=0;y<p.length;y++){var b=p[y].getBoundingRect(l);(a=a||b.clone()).union(b)}else a=c.boundingRect;return i.setBoundingRect(a.x,a.y,a.width,a.height),i.aspectScale=l?1:We(o.aspectScale,g.aspectScale),i._invertLongitute=!l&&g.invertLongitute,i}return Ce(t,n),t.prototype._transformTo=function(e,r,o,i){var a=this.getBoundingRect(),l=this._invertLongitute;a=a.clone(),l&&(a.y=-a.y-a.height);var c=this._rawTransformable;c.transform=a.calculateTransform(new Kt(e,r,o,i));var h=c.parent;c.parent=null,c.decomposeTransform(),c.parent=h,l&&(c.scaleY=-c.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var r=this.regions,o=0;o<r.length;o++){var i=r[o];if("geoJSON"===i.type&&i.contain(e))return r[o]}},t.prototype.addGeoCoord=function(e,r){this._nameCoordMap.set(e,r)},t.prototype.getGeoCoord=function(e){var r=this._regionsMap.get(e);return this._nameCoordMap.get(e)||r&&r.getCenter()},t.prototype.dataToPoint=function(e,r,o){if(bt(e)&&(e=this.getGeoCoord(e)),e){var i=this.projection;return i&&(e=i.project(e)),e&&this.projectedToPoint(e,r,o)}},t.prototype.pointToData=function(e){var r=this.projection;return r&&(e=r.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(e){return n.prototype.pointToData.call(this,e)},t.prototype.projectedToPoint=function(e,r,o){return n.prototype.dataToPoint.call(this,e,r,o)},t.prototype.convertToPixel=function(e,r,o){var i=NM(r);return i===this?i.dataToPoint(o):null},t.prototype.convertFromPixel=function(e,r,o){var i=NM(r);return i===this?i.pointToData(o):null},t}(Hy);function NM(n){var t=n.geoModel,e=n.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",Mo).models[0]||{}).coordinateSystem:null}function EM(n,t){var e=n.get("boundingCoords");if(null!=e){var r=e[0],o=e[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])){var i=this.projection;if(i){var a=r[0],l=r[1],c=o[0],h=o[1];r=[1/0,1/0],o=[-1/0,-1/0];var p=function(R,O,B,G){for(var W=B-R,Y=G-O,X=0;X<=100;X++){var J=X/100,ne=i.project([R+W*J,O+Y*J]);xt(r,r,ne),rn(o,o,ne)}};p(a,l,c,l),p(c,l,c,h),p(c,h,a,h),p(a,h,c,l)}this.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1])}}var g,y,b,_=this.getBoundingRect(),w=n.get("layoutCenter"),S=n.get("layoutSize"),M=t.getWidth(),A=t.getHeight(),I=_.width/_.height*this.aspectScale,N=!1;if(w&&S&&(g=[Ct(w[0],M),Ct(w[1],A)],y=Ct(S,Math.min(M,A)),isNaN(g[0])||isNaN(g[1])||isNaN(y)||(N=!0)),N)b={},I>1?(b.width=y,b.height=y/I):(b.height=y,b.width=y*I),b.y=g[1]-b.height/2,b.x=g[0]-b.width/2;else{var L=n.getBoxLayoutParams();L.aspect=I,b=xo(L,{width:M,height:A})}this.setViewRect(b.x,b.y,b.width,b.height),this.setCenter(n.get("center"),t),this.setZoom(n.get("zoom"))}ur(Sg,Hy);var d2=function(){function n(){this.dimensions=DM}return n.prototype.create=function(t,e){var r=[];function o(a){return{nameProperty:a.get("nameProperty"),aspectScale:a.get("aspectScale"),projection:a.get("projection")}}t.eachComponent("geo",function(a,l){var c=a.get("map"),h=new Sg(c+l,c,De({nameMap:a.get("nameMap")},o(a)));h.zoomLimit=a.get("scaleLimit"),r.push(h),a.coordinateSystem=h,h.model=a,h.resize=EM,h.resize(a,e)}),t.eachSeries(function(a){if("geo"===a.get("coordinateSystem")){var l=a.get("geoIndex")||0;a.coordinateSystem=r[l]}});var i={};return t.eachSeriesByType("map",function(a){if(!a.getHostGeoModel()){var l=a.getMapType();i[l]=i[l]||[],i[l].push(a)}}),Z(i,function(a,l){var c=j(a,function(p){return p.get("nameMap")}),h=new Sg(l,l,De({nameMap:Ir(c)},o(a[0])));h.zoomLimit=ht.apply(null,j(a,function(p){return p.get("scaleLimit")})),r.push(h),h.resize=EM,h.resize(a[0],e),Z(a,function(p){var g;p.coordinateSystem=h,g=h,Z(p.get("geoCoord"),function(b,_){g.addGeoCoord(_,b)})})}),r},n.prototype.getFilledRegions=function(t,e,r,o){for(var i=(t||[]).slice(),a=Et(),l=0;l<i.length;l++)a.set(i[l].name,i[l]);return Z(MM(e,r,o).regions,function(c){var h=c.name;!a.get(h)&&i.push({name:h})}),i},n}(),LM=new d2,kL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(e,r,o){var i=Ub(e.map);if(i&&"geoJSON"===i.type){var a=e.itemStyle=e.itemStyle||{};"color"in a||(a.color="#eee")}this.mergeDefaultAndTheme(e,o),rh(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,r=this.option;r.regions=LM.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var o={};this._optionModelMap=Jr(r.regions||[],function(i,a){var l=a.name;return l&&(i.set(l,new gr(a,e,e.ecModel)),a.selected&&(o[l]=!0)),i},Et()),r.selectedMap||(r.selectedMap=o)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new gr(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,r){var i=this.getRegionModel(e).get("normal"===r?["label","formatter"]:["emphasis","label","formatter"]),a={name:e};return Se(i)?(a.status=r,i(a)):bt(i)?i.replace("{a}",e??""):void 0},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var r=this.option,o=r.selectedMode;o&&("multiple"!==o&&(r.selectedMap=null),(r.selectedMap||(r.selectedMap={}))[e]=!0)},t.prototype.unSelect=function(e){var r=this.option.selectedMap;r&&(r[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var r=this.option.selectedMap;return!(!r||!r[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(wn);function Ad(n,t){return n.pointToProjected?n.pointToProjected(t):n.pointToData(t)}function Xb(n,t,e,r){var o=n.getZoom(),i=n.getCenter(),a=t.zoom,l=n.projectedToPoint?n.projectedToPoint(i):n.dataToPoint(i);if(null!=t.dx&&null!=t.dy&&(l[0]-=t.dx,l[1]-=t.dy,n.setCenter(Ad(n,l),r)),null!=a){if(e){var c=e.min||0;a=Math.max(Math.min(o*a,e.max||1/0),c)/o}n.scaleX*=a,n.scaleY*=a;var g=(t.originY-n.y)*(a-1);n.x-=(t.originX-n.x)*(a-1),n.y-=g,n.updateTransform(),n.setCenter(Ad(n,l),r),n.setZoom(a*o)}return{center:n.getCenter(),zoom:n.getZoom()}}var Wy=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.focusBlurEnabled=!0,e}return Ce(t,n),t.prototype.init=function(e,r){this._api=r},t.prototype.render=function(e,r,o,i){if(this._model=e,!e.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new wg(o));var a=this._mapDraw;a.draw(e,r,o,this,i),a.group.on("click",this._handleRegionClick,this),a.group.silent=e.get("silent"),this.group.add(a.group),this.updateSelectStatus(e,r,o)},t.prototype._handleRegionClick=function(e){var r;dd(e.target,function(o){return null!=(r=cn(o).eventData)},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},t.prototype.updateSelectStatus=function(e,r,o){var i=this;this._mapDraw.group.traverse(function(a){var l=cn(a).eventData;if(l)return i._model.isSelected(l.name)?o.enterSelect(a):o.leaveSelect(a),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(Wr);function qb(n,t,e){xL(n,t,e)}function RM(n){function t(e,r){r.update="geo:updateSelectStatus",n.registerAction(r,function(o,i){var a={},l=[];return i.eachComponent({mainType:"geo",query:o},function(c){c[e](o.name),Z(c.coordinateSystem.regions,function(p){a[p.name]=c.isSelected(p.name)||!1});var h=[];Z(a,function(p,g){a[g]&&h.push(g)}),l.push({geoIndex:c.componentIndex,name:h})}),{selected:a,allSelected:l,name:o.name}})}n.registerCoordinateSystem("geo",LM),n.registerComponentModel(kL),n.registerComponentView(Wy),n.registerImpl("registerMap",qb),n.registerImpl("getMap",function(e){return CM(e)}),t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,r,o){var i=e.componentType||"series";r.eachComponent({mainType:i,query:e},function(a){var l=a.coordinateSystem;if("geo"===l.type){var c=Xb(l,e,a.get("scaleLimit"),o);a.setCenter&&a.setCenter(c.center),a.setZoom&&a.setZoom(c.zoom),"series"===i&&Z(a.seriesGroup,function(h){h.setCenter(c.center),h.setZoom(c.zoom)})}})})}function h2(n,t){var e=n.isExpand?n.children:[],r=n.parentNode.children,o=n.hierNode.i?r[n.hierNode.i-1]:null;if(e.length){!function(a){for(var l=a.children,c=l.length,h=0,p=0;--c>=0;){var g=l[c];g.hierNode.prelim+=h,g.hierNode.modifier+=h,h+=g.hierNode.shift+(p+=g.hierNode.change)}}(n);var i=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;o?(n.hierNode.prelim=o.hierNode.prelim+t(n,o),n.hierNode.modifier=n.hierNode.prelim-i):n.hierNode.prelim=i}else o&&(n.hierNode.prelim=o.hierNode.prelim+t(n,o));n.parentNode.hierNode.defaultAncestor=function(a,l,c,h){if(l){for(var p=a,g=a,y=g.parentNode.children[0],b=l,_=p.hierNode.modifier,w=g.hierNode.modifier,S=y.hierNode.modifier,M=b.hierNode.modifier;b=up(b),g=Uy(g),b&&g;){p=up(p),y=Uy(y),p.hierNode.ancestor=a;var A=b.hierNode.prelim+M-g.hierNode.prelim-w+h(b,g);A>0&&(jy(OM(b,a,c),a,A),w+=A,_+=A),M+=b.hierNode.modifier,w+=g.hierNode.modifier,_+=p.hierNode.modifier,S+=y.hierNode.modifier}b&&!up(p)&&(p.hierNode.thread=b,p.hierNode.modifier+=M-_),g&&!Uy(y)&&(y.hierNode.thread=g,y.hierNode.modifier+=w-S,c=a)}return c}(n,o,n.parentNode.hierNode.defaultAncestor||r[0],t)}function p2(n){n.setLayout({x:n.hierNode.prelim+n.parentNode.hierNode.modifier},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function f2(n){return arguments.length?n:g2}function _u(n,t){return n-=Math.PI/2,{x:t*Math.cos(n),y:t*Math.sin(n)}}function up(n){var t=n.children;return t.length&&n.isExpand?t[t.length-1]:n.hierNode.thread}function Uy(n){var t=n.children;return t.length&&n.isExpand?t[0]:n.hierNode.thread}function OM(n,t,e){return n.hierNode.ancestor.parentNode===t.parentNode?n.hierNode.ancestor:e}function jy(n,t,e){var r=e/(t.hierNode.i-n.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=e,t.hierNode.modifier+=e,t.hierNode.prelim+=e,n.hierNode.change+=r}function g2(n,t){return n.parentNode===t.parentNode?1:2}var m2=function(){this.parentPoint=[],this.childPoints=[]},y2=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new m2},t.prototype.buildPath=function(e,r){var o=r.childPoints,i=o.length,a=r.parentPoint,l=o[0],c=o[i-1];if(1===i)return e.moveTo(a[0],a[1]),void e.lineTo(l[0],l[1]);var h=r.orient,p="TB"===h||"BT"===h?0:1,g=1-p,y=Ct(r.forkPosition,1),b=[];b[p]=a[p],b[g]=a[g]+(c[g]-a[g])*y,e.moveTo(a[0],a[1]),e.lineTo(b[0],b[1]),e.moveTo(l[0],l[1]),b[p]=l[p],e.lineTo(b[0],b[1]),b[p]=c[p],e.lineTo(b[0],b[1]),e.lineTo(c[0],c[1]);for(var _=1;_<i-1;_++){var w=o[_];e.moveTo(w[0],w[1]),b[p]=w[p],e.lineTo(b[0],b[1])}},t}(Yn),PM=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new on,e}return Ce(t,n),t.prototype.init=function(e,r){this._controller=new bg(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,r,o){var i=e.getData(),a=e.layoutInfo,l=this._mainGroup;"radial"===e.get("layout")?(l.x=a.x+a.width/2,l.y=a.y+a.height/2):(l.x=a.x,l.y=a.y),this._updateViewCoordSys(e,o),this._updateController(e,r,o);var c=this._data;i.diff(c).add(function(h){Yy(i,h)&&Xy(i,h,null,l,e)}).update(function(h,p){var g=c.getItemGraphicEl(p);Yy(i,h)?Xy(i,h,g,l,e):g&&Zb(c,p,g,l,e)}).remove(function(h){var p=c.getItemGraphicEl(h);p&&Zb(c,h,p,l,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&i.eachItemGraphicEl(function(h,p){h.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:p})})}),this._data=i},t.prototype._updateViewCoordSys=function(e,r){var o=e.getData(),i=[];o.each(function(g){var y=o.getItemLayout(g);!y||isNaN(y.x)||isNaN(y.y)||i.push([+y.x,+y.y])});var a=[],l=[];ql(i,a,l);var c=this._min,h=this._max;l[0]-a[0]==0&&(a[0]=c?c[0]:a[0]-1,l[0]=h?h[0]:l[0]+1),l[1]-a[1]==0&&(a[1]=c?c[1]:a[1]-1,l[1]=h?h[1]:l[1]+1);var p=e.coordinateSystem=new Hy;p.zoomLimit=e.get("scaleLimit"),p.setBoundingRect(a[0],a[1],l[0]-a[0],l[1]-a[1]),p.setCenter(e.get("center"),r),p.setZoom(e.get("zoom")),this.group.attr({x:p.x,y:p.y,scaleX:p.scaleX,scaleY:p.scaleY}),this._min=a,this._max=l},t.prototype._updateController=function(e,r,o){var i=this,a=this._controller,l=this._controllerHost,c=this.group;a.setPointerChecker(function(h,p,g){var y=c.getBoundingRect();return y.applyTransform(c.transform),y.contain(p,g)&&!sp(h,o,e)}),a.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(h){Md(l,h.dx,h.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:h.dx,dy:h.dy})}).on("zoom",function(h){ap(l,h.scale,h.originX,h.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:h.scale,originX:h.originX,originY:h.originY}),i._updateNodeAndLinkScale(e),o.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var r=e.getData(),o=this._getNodeGlobalScale(e);r.eachItemGraphicEl(function(i,a){i.setSymbolScale(o)})},t.prototype._getNodeGlobalScale=function(e){var r=e.coordinateSystem;if("view"!==r.type)return 1;var o=this._nodeScaleRatio,i=r.scaleX||1;return((r.getZoom()-1)*o+1)/i},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(vr);function Yy(n,t){var e=n.getItemLayout(t);return e&&!isNaN(e.x)&&!isNaN(e.y)}function Xy(n,t,e,r,o){var i=!e,a=n.tree.getNodeByDataIndex(t),l=a.getModel(),c=a.getVisual("style").fill,h=!1===a.isExpand&&0!==a.children.length?c:"#fff",p=n.tree.root,g=a.parentNode===p?a:a.parentNode||a,y=n.getItemGraphicEl(g.dataIndex),b=g.getLayout(),_=y?{x:y.__oldX,y:y.__oldY,rawX:y.__radialOldRawX,rawY:y.__radialOldRawY}:b,w=a.getLayout();i?((e=new zo(n,t,null,{symbolInnerColor:h,useNameLabel:!0})).x=_.x,e.y=_.y):e.updateData(n,t,null,{symbolInnerColor:h,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=w.rawX,e.__radialRawY=w.rawY,r.add(e),n.setItemGraphicEl(t,e),e.__oldX=e.x,e.__oldY=e.y,hr(e,{x:w.x,y:w.y},o);var S=e.getSymbolPath();if("radial"===o.get("layout")){var M=p.children[0],A=M.getLayout(),I=M.children.length,N=void 0,L=void 0;if(w.x===A.x&&!0===a.isExpand&&M.children.length){var R={x:(M.children[0].getLayout().x+M.children[I-1].getLayout().x)/2,y:(M.children[0].getLayout().y+M.children[I-1].getLayout().y)/2};(N=Math.atan2(R.y-A.y,R.x-A.x))<0&&(N=2*Math.PI+N),(L=R.x<A.x)&&(N-=Math.PI)}else(N=Math.atan2(w.y-A.y,w.x-A.x))<0&&(N=2*Math.PI+N),0===a.children.length||0!==a.children.length&&!1===a.isExpand?(L=w.x<A.x)&&(N-=Math.PI):(L=w.x>A.x)||(N-=Math.PI);var O=L?"left":"right",B=l.getModel("label"),G=B.get("rotate"),W=G*(Math.PI/180),Y=S.getTextContent();Y&&(S.setTextConfig({position:B.get("position")||O,rotation:null==G?-N:W,origin:"center"}),Y.setStyle("verticalAlign","middle"))}var X=l.get(["emphasis","focus"]),J="relative"===X?Vo(a.getAncestorsIndices(),a.getDescendantIndices()):"ancestor"===X?a.getAncestorsIndices():"descendant"===X?a.getDescendantIndices():null;J&&(cn(e).focus=J),function(ne,oe,ie,se,le,pe,me,ve){var He=oe.getModel(),nt=ne.get("edgeShape"),Me=ne.get("layout"),je=ne.getOrient(),tt=ne.get(["lineStyle","curveness"]),ut=ne.get("edgeForkPosition"),pt=He.getModel("lineStyle").getLineStyle(),St=se.__edge;if("curve"===nt)oe.parentNode&&oe.parentNode!==ie&&(St||(St=se.__edge=new ff({shape:qy(Me,je,tt,le,le)})),hr(St,{shape:qy(Me,je,tt,pe,me)},ne));else if("polyline"===nt&&"orthogonal"===Me&&oe!==ie&&oe.children&&0!==oe.children.length&&!0===oe.isExpand){for(var Ze=oe.children,yt=[],Vt=0;Vt<Ze.length;Vt++){var mn=Ze[Vt].getLayout();yt.push([mn.x,mn.y])}St||(St=se.__edge=new y2({shape:{parentPoint:[me.x,me.y],childPoints:[[me.x,me.y]],orient:je,forkPosition:ut}})),hr(St,{shape:{parentPoint:[me.x,me.y],childPoints:yt}},ne)}St&&("polyline"!==nt||oe.isExpand)&&(St.useStyle(Pe({strokeNoScale:!0,fill:null},pt)),Mi(St,He,"lineStyle"),$c(St),ve.add(St))}(o,a,p,e,_,b,w,r),e.__edge&&(e.onHoverStateChange=function(ne){if("blur"!==ne){var oe=a.parentNode&&n.getItemGraphicEl(a.parentNode.dataIndex);oe&&1===oe.hoverState||dm(e.__edge,ne)}})}function BM(n,t,e,r,o){var i=v2(t.tree.root,n),a=i.source,l=i.sourceLayout,c=t.getItemGraphicEl(n.dataIndex);if(c){var h=t.getItemGraphicEl(a.dataIndex).__edge,p=c.__edge||(!1===a.isExpand||1===a.children.length?h:void 0),g=r.get("edgeShape"),y=r.get("layout"),b=r.get("orient"),_=r.get(["lineStyle","curveness"]);p&&("curve"===g?Jc(p,{shape:qy(y,b,_,l,l),style:{opacity:0}},r,{cb:function(){e.remove(p)},removeOpt:o}):"polyline"===g&&"orthogonal"===r.get("layout")&&Jc(p,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){e.remove(p)},removeOpt:o}))}}function v2(n,t){for(var e,r=t.parentNode===n?t:t.parentNode||t;null==(e=r.getLayout());)r=r.parentNode===n?r:r.parentNode||r;return{source:r,sourceLayout:e}}function Zb(n,t,e,r,o){var i=n.tree.getNodeByDataIndex(t),a=v2(n.tree.root,i).sourceLayout,l={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};Jc(e,{x:a.x+1,y:a.y+1},o,{cb:function(){r.remove(e),n.setItemGraphicEl(t,null)},removeOpt:l}),e.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:l}),i.children.forEach(function(c){BM(c,n,r,o,l)}),BM(i,n,r,o,l)}function qy(n,t,e,r,o){var i,a,l,c,h,p,g,y;if("radial"===n){p=o.rawX,y=o.rawY;var b=_u(h=r.rawX,g=r.rawY),_=_u(h,g+(y-g)*e),w=_u(p,y+(g-y)*e),S=_u(p,y);return{x1:b.x||0,y1:b.y||0,x2:S.x||0,y2:S.y||0,cpx1:_.x||0,cpy1:_.y||0,cpx2:w.x||0,cpy2:w.y||0}}return h=r.x,g=r.y,p=o.x,y=o.y,"LR"!==t&&"RL"!==t||(i=h+(p-h)*e,a=g,l=p+(h-p)*e,c=y),"TB"!==t&&"BT"!==t||(i=h,a=g+(y-g)*e,l=p,c=y+(g-y)*e),{x1:h,y1:g,x2:p,y2:y,cpx1:i,cpy1:a,cpx2:l,cpy2:c}}var Xa=Gn();function zM(n){var t=n.mainData,e=n.datas;e||(e={main:t},n.datasAttr={main:"data"}),n.datas=n.mainData=null,_2(t,e,n),Z(e,function(r){Z(t.TRANSFERABLE_METHODS,function(o){r.wrapMethod(o,_t(b2,n))})}),t.wrapMethod("cloneShallow",_t(DL,n)),Z(t.CHANGABLE_METHODS,function(r){t.wrapMethod(r,_t(IL,n))}),bn(e[t.dataType]===t)}function b2(n,t){if(Xa(this).mainData===this){var e=De({},Xa(this).datas);e[this.dataType]=t,_2(t,e,n)}else VM(t,this.dataType,Xa(this).mainData,n);return t}function IL(n,t){return n.struct&&n.struct.update(),t}function DL(n,t){return Z(Xa(t).datas,function(e,r){e!==t&&VM(e.cloneShallow(),r,t,n)}),t}function NL(n){var t=Xa(this).mainData;return null==n||null==t?t:Xa(t).datas[n]}function x2(){var n=Xa(this).mainData;return null==n?[{data:n}]:j(vn(Xa(n).datas),function(t){return{type:t,data:Xa(n).datas[t]}})}function _2(n,t,e){Xa(n).datas={},Z(t,function(r,o){VM(r,o,n,e)})}function VM(n,t,e,r){Xa(e).datas[t]=n,Xa(n).mainData=e,n.dataType=t,r.struct&&(n[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=n),n.getLinkedData=NL,n.getLinkedDataAll=x2}var w2=function(){function n(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(t,e,r){Se(t)&&(r=e,e=t,t=null),bt(t=t||{})&&(t={order:t});var o,i=t.order||"preorder",a=this[t.attr||"children"];"preorder"===i&&(o=e.call(r,this));for(var l=0;!o&&l<a.length;l++)a[l].eachNode(t,e,r);"postorder"===i&&e.call(r,this)},n.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var r=0;r<this.children.length;r++){var o=this.children[r];o.updateDepthAndHeight(t+1),o.height>e&&(e=o.height)}this.height=e+1},n.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,r=this.children,o=r.length;e<o;e++){var i=r[e].getNodeById(t);if(i)return i}},n.prototype.contains=function(t){if(t===this)return!0;for(var e=0,r=this.children,o=r.length;e<o;e++){var i=r[e].contains(t);if(i)return i}},n.prototype.getAncestors=function(t){for(var e=[],r=t?this:this.parentNode;r;)e.push(r),r=r.parentNode;return e.reverse(),e},n.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},n.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},n.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},n.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},n.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},n.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},n.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},n}(),$b=function(){function n(t){this.type="tree",this._nodes=[],this.hostModel=t}return n.prototype.eachNode=function(t,e,r){this.root.eachNode(t,e,r)},n.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},n.prototype.getNodeById=function(t){return this.root.getNodeById(t)},n.prototype.update=function(){for(var t=this.data,e=this._nodes,r=0,o=e.length;r<o;r++)e[r].dataIndex=-1;for(r=0,o=t.count();r<o;r++)e[t.getRawIndex(r)].dataIndex=r},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(t,e,r){var o=new n(e),i=[],a=1;(function h(p,g){var y=p.value;a=Math.max(a,Ee(y)?y.length:1),i.push(p);var S,M,b=new w2(Po(p.name,""),o);g?(S=b).parentNode!==(M=g)&&(M.children.push(S),S.parentNode=M):o.root=b,o._nodes.push(b);var _=p.children;if(_)for(var w=0;w<_.length;w++)h(_[w],b)})(t),o.root.updateDepthAndHeight(0);var l=Qf(i,{coordDimensions:["value"],dimensionsCount:a}).dimensions,c=new Ri(l,e);return c.initData(i),r&&r(c),zM({mainData:c,struct:o,structAttr:"tree"}),o.update(),o},n}();function gi(n,t,e){if(n&&$t(t,n.type)>=0){var r=e.getData().tree.root,o=n.targetNode;if(bt(o)&&(o=r.getNodeById(o)),o&&r.contains(o))return{node:o};var i=n.targetNodeId;if(null!=i&&(o=r.getNodeById(i)))return{node:o}}}function S2(n){for(var t=[];n;)(n=n.parentNode)&&t.push(n);return t.reverse()}function Kb(n,t){return $t(S2(n),t)>=0}function Zy(n,t){for(var e=[];n;){var r=n.dataIndex;e.push({name:n.name,dataIndex:r,value:t.getRawValue(r)}),n=n.parentNode}return e.reverse(),e}var EL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return Ce(t,n),t.prototype.getInitialData=function(e){var r={name:e.name,children:e.data},i=new gr(e.leaves||{},this,this.ecModel),a=$b.createTree(r,this,function(h){h.wrapMethod("getItemModel",function(p,g){var y=a.getNodeByDataIndex(g);return y&&y.children.length&&y.isExpand||(p.parentModel=i),p})}),l=0;a.eachNode("preorder",function(h){h.depth>l&&(l=h.depth)});var c=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:l;return a.root.eachNode("preorder",function(h){var p=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=p&&null!=p.collapsed?!p.collapsed:h.depth<=c}),a.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,r,o){for(var i=this.getData().tree,a=i.root.children[0],l=i.getNodeByDataIndex(e),c=l.getValue(),h=l.name;l&&l!==a;)h=l.parentNode.name+"."+h,l=l.parentNode;return ti("nameValue",{name:h,value:c,noValue:isNaN(c)||null==c})},t.prototype.getDataParams=function(e){var r=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return r.treeAncestors=Zy(o,this),r.collapsed=!o.isExpand,r},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Pr);function Tc(n,t){for(var e,r=[n];e=r.pop();)if(t(e),e.isExpand){var o=e.children;if(o.length)for(var i=o.length-1;i>=0;i--)r.push(o[i])}}function Jb(n,t){n.eachSeriesByType("tree",function(e){!function(r,o){var O,i=(O=o,xo(r.getBoxLayoutParams(),{width:O.getWidth(),height:O.getHeight()}));r.layoutInfo=i;var a=r.get("layout"),l=0,c=0,h=null;"radial"===a?(l=2*Math.PI,c=Math.min(i.height,i.width)/2,h=f2(function(R,O){return(R.parentNode===O.parentNode?1:2)/R.depth})):(l=i.width,c=i.height,h=f2());var p=r.getData().tree.root,g=p.children[0];if(g){(function(R){var O=R;O.hierNode={defaultAncestor:null,ancestor:O,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var B,G,W=[O];B=W.pop();)if(G=B.children,B.isExpand&&G.length)for(var Y=G.length-1;Y>=0;Y--){var X=G[Y];X.hierNode={defaultAncestor:null,ancestor:X,prelim:0,modifier:0,change:0,shift:0,i:Y,thread:null},W.push(X)}})(p),function(R,O,B){for(var G,W=[R],Y=[];G=W.pop();)if(Y.push(G),G.isExpand){var X=G.children;if(X.length)for(var J=0;J<X.length;J++)W.push(X[J])}for(;G=Y.pop();)O(G,B)}(g,h2,h),p.hierNode.modifier=-g.hierNode.prelim,Tc(g,p2);var y=g,b=g,_=g;Tc(g,function(R){var O=R.getLayout().x;O<y.getLayout().x&&(y=R),O>b.getLayout().x&&(b=R),R.depth>_.depth&&(_=R)});var w=y===b?1:h(y,b)/2,S=w-y.getLayout().x,M=0,A=0,I=0,N=0;if("radial"===a)M=l/(b.getLayout().x+w+S),A=c/(_.depth-1||1),Tc(g,function(R){var O=_u(I=(R.getLayout().x+S)*M,N=(R.depth-1)*A);R.setLayout({x:O.x,y:O.y,rawX:I,rawY:N},!0)});else{var L=r.getOrient();"RL"===L||"LR"===L?(A=c/(b.getLayout().x+w+S),M=l/(_.depth-1||1),Tc(g,function(R){N=(R.getLayout().x+S)*A,R.setLayout({x:I="LR"===L?(R.depth-1)*M:l-(R.depth-1)*M,y:N},!0)})):"TB"!==L&&"BT"!==L||(M=l/(b.getLayout().x+w+S),A=c/(_.depth-1||1),Tc(g,function(R){I=(R.getLayout().x+S)*M,R.setLayout({x:I,y:N="TB"===L?(R.depth-1)*A:c-(R.depth-1)*A},!0)}))}}}(e,t)})}function LL(n){n.eachSeriesByType("tree",function(t){var e=t.getData();e.tree.eachNode(function(r){var o=r.getModel().getModel("itemStyle").getItemStyle();De(e.ensureUniqueItemVisual(r.dataIndex,"style"),o)})})}var $y=["treemapZoomToNode","treemapRender","treemapMove"];function C2(n){var t=n.getData().tree,e={};t.eachNode(function(r){for(var o=r;o&&o.depth>1;)o=o.parentNode;var i=H0(n.ecModel,o.name||o.dataIndex+"",e);r.setVisual("decal",i)})}var RL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.preventUsingHoverLayer=!0,e}return Ce(t,n),t.prototype.getInitialData=function(e,r){var o={name:e.name,children:e.data};qa(o);var i=e.levels||[],a=this.designatedVisualItemStyle={},l=new gr({itemStyle:a},this,r),c=j((i=e.levels=function(p,g){var y,b,_=Dr(g.get("color")),w=Dr(g.get(["aria","decal","decals"]));if(_){Z(p=p||[],function(M){var A=new gr(M),I=A.get("color"),N=A.get("decal");(A.get(["itemStyle","color"])||I&&"none"!==I)&&(y=!0),(A.get(["itemStyle","decal"])||N&&"none"!==N)&&(b=!0)});var S=p[0]||(p[0]={});return y||(S.color=_.slice()),!b&&w&&(S.decal=w.slice()),p}}(i,r))||[],function(p){return new gr(p,l,r)},this),h=$b.createTree(o,this,function(p){p.wrapMethod("getItemModel",function(g,y){var b=h.getNodeByDataIndex(y);return g.parentModel=(b?c[b.depth]:null)||l,g})});return h.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,r,o){var i=this.getData(),a=this.getRawValue(e);return ti("nameValue",{name:i.getName(e),value:a})},t.prototype.getDataParams=function(e){var r=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return r.treeAncestors=Zy(o,this),r.treePathInfo=r.treeAncestors,r},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},De(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var r=this._idIndexMap;r||(r=this._idIndexMap=Et(),this._idIndexMapCount=0);var o=r.get(e);return null==o&&r.set(e,o=this._idIndexMapCount++),o},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var r=this.getRawData().tree.root;e&&(e===r||r.contains(e))||(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){C2(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(Pr);function qa(n){var t=0;Z(n.children,function(r){qa(r);var o=r.value;Ee(o)&&(o=o[0]),t+=o});var e=n.value;Ee(e)&&(e=e[0]),(null==e||isNaN(e))&&(e=t),e<0&&(e=0),Ee(n.value)?n.value[0]=e:n.value=e}var Qb=function(){function n(t){this.group=new on,t.add(this.group)}return n.prototype.render=function(t,e,r,o){var i=t.getModel("breadcrumb"),a=this.group;if(a.removeAll(),i.get("show")&&r){var l=i.getModel("itemStyle"),c=i.getModel("emphasis"),h=l.getModel("textStyle"),p=c.getModel(["itemStyle","textStyle"]),g={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,g,h),this._renderContent(t,g,l,c,h,p,o),Df(a,g.pos,g.box)}},n.prototype._prepare=function(t,e,r){for(var o=t;o;o=o.parentNode){var i=Po(o.getModel().get("name"),""),a=r.getTextRect(i),l=Math.max(a.width+16,e.emptyItemWidth);e.totalWidth+=l+8,e.renderList.push({node:o,text:i,width:l})}},n.prototype._renderContent=function(t,e,r,o,i,a,l){for(var c,h,p,g,y,b,_,w,S,M=0,A=e.emptyItemWidth,I=t.get(["breadcrumb","height"]),N=(y=(h=e.box).height,b=Ct((c=e.pos).left,g=h.width),_=Ct(c.top,y),w=Ct(c.right,g),S=Ct(c.bottom,y),(isNaN(b)||isNaN(parseFloat(c.left)))&&(b=0),(isNaN(w)||isNaN(parseFloat(c.right)))&&(w=g),(isNaN(_)||isNaN(parseFloat(c.top)))&&(_=0),(isNaN(S)||isNaN(parseFloat(c.bottom)))&&(S=y),p=ru(p||0),{width:Math.max(w-b-p[1]-p[3],0),height:Math.max(S-_-p[0]-p[2],0)}),L=e.totalWidth,R=e.renderList,O=o.getModel("itemStyle").getItemStyle(),B=R.length-1;B>=0;B--){var G=R[B],W=G.node,Y=G.width,X=G.text;L>N.width&&(L-=Y-A,Y=A,X=null);var J=new Zi({shape:{points:M2(M,0,Y,I,B===R.length-1,0===B)},style:Pe(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new Kn({style:Or(i,{text:X})}),textConfig:{position:"inside"},z2:1e5,onclick:_t(l,W)});J.disableLabelAnimation=!0,J.getTextContent().ensureState("emphasis").style=Or(a,{text:X}),J.ensureState("emphasis").style=O,mo(J,o.get("focus"),o.get("blurScope"),o.get("disabled")),this.group.add(J),T2(J,t,W),M+=Y+8}},n.prototype.remove=function(){this.group.removeAll()},n}();function M2(n,t,e,r,o,i){var a=[[o?n:n-5,t],[n+e,t],[n+e,t+r],[o?n:n-5,t+r]];return!i&&a.splice(2,0,[n+e+5,t+r/2]),!o&&a.push([n,t+r/2]),a}function T2(n,t,e){cn(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&Zy(e,t)}}var OL=function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(t,e,r,o,i){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:r,delay:o,easing:i}),!0)},n.prototype.finished=function(t){return this._finishedCallback=t,this},n.prototype.start=function(){for(var t=this,e=this._storage.length,r=function(){--e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},o=0,i=this._storage.length;o<i;o++){var a=this._storage[o];a.el.animateTo(a.target,{duration:a.duration,delay:a.delay,easing:a.easing,setToFinal:!0,done:r,aborted:r})}return this},n}(),ex=on,A2=$n,FM="label",GM="upperLabel",kd=Xu([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),HM=function(n){var t=kd(n);return t.stroke=t.fill=t.lineWidth=null,t},Ky=Gn(),k2=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._state="ready",e._storage={nodeGroup:[],background:[],content:[]},e}return Ce(t,n),t.prototype.render=function(e,r,o,i){if(!($t(r.findComponents({mainType:"series",subType:"treemap",query:i}),e)<0)){this.seriesModel=e,this.api=o,this.ecModel=r;var a=gi(i,["treemapZoomToNode","treemapRootToNode"],e),l=i&&i.type,c=e.layoutInfo,h=!this._oldTree,p=this._storage,g="treemapRootToNode"===l&&a&&p?{rootNodeGroup:p.nodeGroup[a.node.getRawIndex()],direction:i.direction}:null,y=this._giveContainerGroup(c),b=e.get("animation"),_=this._doRender(y,e,g);!b||h||l&&"treemapZoomToNode"!==l&&"treemapRootToNode"!==l?_.renderFinally():this._doAnimation(y,_,e,g),this._resetController(o),this._renderBreadcrumb(e,o,a)}},t.prototype._giveContainerGroup=function(e){var r=this._containerGroup;return r||(r=this._containerGroup=new ex,this._initEvents(r),this.group.add(r)),r.x=e.x,r.y=e.y,r},t.prototype._doRender=function(e,r,o){var i=r.getData().tree,a=this._oldTree,l={nodeGroup:[],background:[],content:[]},c={nodeGroup:[],background:[],content:[]},h=this._storage,p=[];!function w(S,M,A,I,N){function L(O){return O.getId()}function R(O,B){var G=null!=O?S[O]:null,W=null!=B?M[B]:null,Y=function g(w,S,M,A){return function(I,N,L,R,O,B,G,W,Y,X){if(G){var J=G.getLayout(),ne=I.getData(),oe=G.getModel();if(ne.setItemGraphicEl(G.dataIndex,null),J&&J.isInView){var ie=J.width,se=J.height,le=J.borderWidth,pe=J.invisible,me=G.getRawIndex(),ve=W&&W.getRawIndex(),He=G.viewChildren,nt=J.upperHeight,Me=He&&He.length,je=oe.getModel("itemStyle"),tt=oe.getModel(["emphasis","itemStyle"]),ut=oe.getModel(["blur","itemStyle"]),pt=oe.getModel(["select","itemStyle"]),St=je.get("borderRadius")||0,Ze=ku("nodeGroup",ex);if(Ze){if(Y.add(Ze),Ze.x=J.x||0,Ze.y=J.y||0,Ze.markRedraw(),Ky(Ze).nodeWidth=ie,Ky(Ze).nodeHeight=se,J.isAboveViewRoot)return Ze;var yt=ku("background",A2,X,20);yt&&function wr(ln,ar,bo){var jr=cn(ar);if(jr.dataIndex=G.dataIndex,jr.seriesIndex=I.seriesIndex,ar.setShape({x:0,y:0,width:ie,height:se,r:St}),pe)io(ar);else{ar.invisible=!1;var po=G.getVisual("style"),Ja=po.stroke,kl=HM(je);kl.fill=Ja;var vi=kd(tt);vi.fill=tt.get("borderColor");var Lc=kd(ut);Lc.fill=ut.get("borderColor");var Cp=kd(pt);Cp.fill=pt.get("borderColor"),bo?yi(ar,Ja,po.opacity,{x:le,y:0,width:ie-2*le,height:nt}):ar.removeTextContent(),ar.setStyle(kl),ar.ensureState("emphasis").style=vi,ar.ensureState("blur").style=Lc,ar.ensureState("select").style=Cp,$c(ar)}ln.add(ar)}(Ze,yt,Me&&J.upperLabelHeight);var Vt=oe.getModel("emphasis"),mn=Vt.get("focus"),Dn=Vt.get("blurScope"),Tr=Vt.get("disabled"),Vn="ancestor"===mn?G.getAncestorsIndices():"descendant"===mn?G.getDescendantIndices():mn;if(Me)cf(Ze)&&Kc(Ze,!1),yt&&(Kc(yt,!Tr),ne.setItemGraphicEl(G.dataIndex,yt),W_(yt,Vn,Dn));else{var nr=ku("content",A2,X,30);nr&&function oo(ln,ar){var bo=cn(ar);bo.dataIndex=G.dataIndex,bo.seriesIndex=I.seriesIndex;var jr=Math.max(ie-2*le,0),po=Math.max(se-2*le,0);if(ar.culling=!0,ar.setShape({x:le,y:le,width:jr,height:po,r:St}),pe)io(ar);else{ar.invisible=!1;var Ja=G.getVisual("style"),kl=Ja.fill,vi=HM(je);vi.fill=kl,vi.decal=Ja.decal;var Lc=kd(tt),Cp=kd(ut),Qx=kd(pt);yi(ar,kl,Ja.opacity,null),ar.setStyle(vi),ar.ensureState("emphasis").style=Lc,ar.ensureState("blur").style=Cp,ar.ensureState("select").style=Qx,$c(ar)}ln.add(ar)}(Ze,nr),yt.disableMorphing=!0,yt&&cf(yt)&&Kc(yt,!1),Kc(Ze,!Tr),ne.setItemGraphicEl(G.dataIndex,Ze),W_(Ze,Vn,Dn)}return Ze}}}function io(ln){!ln.invisible&&B.push(ln)}function yi(ln,ar,bo,jr){var po=oe.getModel(jr?GM:FM),Ja=Po(oe.get("name"),null),kl=po.getShallow("show");Ao(ln,fo(oe,jr?GM:FM),{defaultText:kl?Ja:null,inheritColor:ar,defaultOpacity:bo,labelFetcher:I,labelDataIndex:G.dataIndex});var vi=ln.getTextContent();if(vi){var Lc=vi.style,Cp=pr(Lc.padding||0);jr&&(ln.setTextConfig({layoutRect:jr}),vi.disableLabelLayout=!0),vi.beforeUpdate=function(){var qB=Math.max((jr?jr.width:ln.shape.width)-Cp[1]-Cp[3],0),ZB=Math.max((jr?jr.height:ln.shape.height)-Cp[0]-Cp[2],0);Lc.width===qB&&Lc.height===ZB||vi.setStyle({width:qB,height:ZB})},Lc.truncateMinChar=2,Lc.lineOverflow="truncate",Cs(Lc,jr,J);var Qx=vi.getState("emphasis");Cs(Qx?Qx.style:null,jr,J)}}function Cs(ln,ar,bo){var jr=ln?ln.text:null;if(!ar&&bo.isLeafRoot&&null!=jr){var po=I.get("drillDownIcon",!0);ln.text=po?po+" "+jr:jr}}function ku(ln,ar,bo,jr){var po=null!=ve&&L[ln][ve],Ja=O[ln];return po?(L[ln][ve]=null,function Ka(ln,ar){var bo=ln[me]={};ar instanceof ex?(bo.oldX=ar.x,bo.oldY=ar.y):bo.oldShape=De({},ar.shape)}(Ja,po)):pe||((po=new ar)instanceof hs&&(po.z2=100*bo+jr),function Ms(ln,ar){var bo=ln[me]={},jr=G.parentNode,po=ar instanceof on;if(jr&&(!R||"drillDown"===R.direction)){var Ja=0,kl=0,vi=O.background[jr.getRawIndex()];!R&&vi&&vi.oldShape&&(Ja=vi.oldShape.width,kl=vi.oldShape.height),po?(bo.oldX=0,bo.oldY=kl):bo.oldShape={x:Ja,y:kl,width:0,height:0}}bo.fadein=!po}(Ja,po)),N[ln][me]=po}}(r,c,h,o,l,p,w,S,M,A)}(G,W,A,N);Y&&w(G&&G.viewChildren||[],W&&W.viewChildren||[],Y,I,N+1)}I?(M=S,Z(S,function(O,B){!O.isRemoved()&&R(B,B)})):new Js(M,S,L,L).add(R).update(R).remove(_t(R,null)).execute()}(i.root?[i.root]:[],a&&a.root?[a.root]:[],e,i===a||!a,0);var w,S,y=(S={nodeGroup:[],background:[],content:[]},(w=h)&&Z(w,function(M,A){var I=S[A];Z(M,function(N){N&&(I.push(N),Ky(N).willDelete=!0)})}),S);if(this._oldTree=i,this._storage=c,this._controllerHost){var b=this.seriesModel.layoutInfo,_=i.root.getLayout();_.width===b.width&&_.height===b.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:l,willDeleteEls:y,renderFinally:function(){Z(y,function(w){Z(w,function(S){S.parent&&S.parent.remove(S)})}),Z(p,function(w){w.invisible=!0,w.dirty()})}}},t.prototype._doAnimation=function(e,r,o,i){var a=o.get("animationDurationUpdate"),l=o.get("animationEasing"),c=(Se(a)?0:a)||0,h=(Se(l)?null:l)||"cubicOut",p=new OL;Z(r.willDeleteEls,function(g,y){Z(g,function(b,_){if(!b.invisible){var w,S=b.parent,M=Ky(S);if(i&&"drillDown"===i.direction)w=S===i.rootNodeGroup?{shape:{x:0,y:0,width:M.nodeWidth,height:M.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var A=0,I=0;M.willDelete||(A=M.nodeWidth/2,I=M.nodeHeight/2),w="nodeGroup"===y?{x:A,y:I,style:{opacity:0}}:{shape:{x:A,y:I,width:0,height:0},style:{opacity:0}}}w&&p.add(b,w,c,0,h)}})}),Z(this._storage,function(g,y){Z(g,function(b,_){var w=r.lastsForAnimation[y][_],S={};w&&(b instanceof on?null!=w.oldX&&(S.x=b.x,S.y=b.y,b.x=w.oldX,b.y=w.oldY):(w.oldShape&&(S.shape=De({},b.shape),b.setShape(w.oldShape)),w.fadein?(b.setStyle("opacity",0),S.style={opacity:1}):1!==b.style.opacity&&(S.style={opacity:1})),p.add(b,S,c,0,h))})},this),this._state="animating",p.finished(Fe(function(){this._state="ready",r.renderFinally()},this)).start()},t.prototype._resetController=function(e){var r=this._controller,o=this._controllerHost;o||(this._controllerHost={target:this.group},o=this._controllerHost),r||((r=this._controller=new bg(e.getZr())).enable(this.seriesModel.get("roam")),o.zoomLimit=this.seriesModel.get("scaleLimit"),o.zoom=this.seriesModel.get("zoom"),r.on("pan",Fe(this._onPan,this)),r.on("zoom",Fe(this._onZoom,this)));var i=new Kt(0,0,e.getWidth(),e.getHeight());r.setPointerChecker(function(a,l,c){return i.contain(l,c)})},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var r=this.seriesModel.getData().tree.root;if(!r)return;var o=r.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},t.prototype._onZoom=function(e){var r=e.originX,o=e.originY,i=e.scale;if("animating"!==this._state){var a=this.seriesModel.getData().tree.root;if(!a)return;var l=a.getLayout();if(!l)return;var c,h=new Kt(l.x,l.y,l.width,l.height),p=this._controllerHost;c=p.zoomLimit;var g=p.zoom=p.zoom||1;if(g*=i,c){var y=c.min||0;g=Math.max(Math.min(c.max||1/0,g),y)}var _=g/p.zoom;p.zoom=g;var w=this.seriesModel.layoutInfo,S=[1,0,0,1,0,0];es(S,S,[-(r-=w.x),-(o-=w.y)]),Dp(S,S,[_,_]),es(S,S,[r,o]),h.applyTransform(S),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:h.x,y:h.y,width:h.width,height:h.height}})}},t.prototype._initEvents=function(e){var r=this;e.on("click",function(o){if("ready"===r._state){var i=r.seriesModel.get("nodeClick",!0);if(i){var a=r.findTarget(o.offsetX,o.offsetY);if(a){var l=a.node;if(l.getLayout().isLeafRoot)r._rootToNode(a);else if("zoomToNode"===i)r._zoomToNode(a);else if("link"===i){var c=l.hostTree.data.getItemModel(l.dataIndex),h=c.get("link",!0),p=c.get("target",!0)||"blank";h&&Dm(h,p)}}}}},this)},t.prototype._renderBreadcrumb=function(e,r,o){var i=this;o||(o=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2))||(o={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new Qb(this.group))).render(e,r,o.node,function(a){"animating"!==i._state&&(Kb(e.getViewRoot(),a)?i._rootToNode({node:a}):i._zoomToNode({node:a}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,r){var o;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(i){var a=this._storage.background[i.getRawIndex()];if(a){var l=a.transformCoordToLocal(e,r),c=a.shape;if(!(c.x<=l[0]&&l[0]<=c.x+c.width&&c.y<=l[1]&&l[1]<=c.y+c.height))return!1;o={node:i,offsetX:l[0],offsetY:l[1]}}},this),o},t.type="treemap",t}(vr),Cg=Z,PL=Ft,WM=-1,ri=function(){function n(t){var e=t.mappingMethod,r=t.type,o=this.option=jt(t);this.type=r,this.mappingMethod=e,this._normalizeData=qM[e];var a,l,i=n.visualHandlers[r];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[e],"piecewise"===e?(UM(o),l=(a=o).pieceList,a.hasSpecialVisual=!1,Z(l,function(c,h){c.originIndex=h,null!=c.visual&&(a.hasSpecialVisual=!0)})):"category"===e?o.categories?function(a){var l=a.categories,c=a.categoryMap={},h=a.visual;if(Cg(l,function(y,b){c[y]=b}),!Ee(h)){var p=[];Ft(h)?Cg(h,function(y,b){p[c[b]??WM]=y}):p[-1]=h,h=I2(a,p)}for(var g=l.length-1;g>=0;g--)null==h[g]&&(delete c[l[g]],l.pop())}(o):UM(o,!0):(bn("linear"!==e||o.dataExtent),UM(o))}return n.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},n.prototype.getNormalizer=function(){return Fe(this._normalizeData,this)},n.listVisualTypes=function(){return vn(n.visualHandlers)},n.isValidType=function(t){return n.visualHandlers.hasOwnProperty(t)},n.eachVisual=function(t,e,r){Ft(t)?Z(t,e,r):e.call(r,t)},n.mapVisual=function(t,e,r){var o,i=Ee(t)?[]:Ft(t)?{}:(o=!0,null);return n.eachVisual(t,function(a,l){var c=e.call(r,a,l);o?i=c:i[l]=c}),i},n.retrieveVisuals=function(t){var e,r={};return t&&Cg(n.visualHandlers,function(o,i){t.hasOwnProperty(i)&&(r[i]=t[i],e=!0)}),e?r:null},n.prepareVisualTypes=function(t){if(Ee(t))t=t.slice();else{if(!PL(t))return[];var e=[];Cg(t,function(r,o){e.push(o)}),t=e}return t.sort(function(r,o){return"color"===o&&"color"!==r&&0===r.indexOf("color")?1:-1}),t},n.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},n.findPieceIndex=function(t,e,r){for(var o,i=1/0,a=0,l=e.length;a<l;a++){var c=e[a].value;if(null!=c){if(c===t||bt(c)&&c===t+"")return a;r&&y(c,a)}}for(a=0,l=e.length;a<l;a++){var h=e[a],p=h.interval,g=h.close;if(p){if(p[0]===-1/0){if(dp(g[1],t,p[1]))return a}else if(p[1]===1/0){if(dp(g[0],p[0],t))return a}else if(dp(g[0],p[0],t)&&dp(g[1],t,p[1]))return a;r&&y(p[0],a),r&&y(p[1],a)}}if(r)return t===1/0?e.length-1:t===-1/0?0:o;function y(b,_){var w=Math.abs(b-t);w<i&&(i=w,o=_)}},n.visualHandlers={color:{applyVisual:cp("color"),getColorMapper:function(){var t=this.option;return Fe("category"===t.mappingMethod?function(e,r){return!r&&(e=this._normalizeData(e)),Id.call(this,e)}:function(e,r,o){var i=!!o;return!r&&(e=this._normalizeData(e)),o=la(e,t.parsedVisual,o),i?o:Jo(o,"rgba")},this)},_normalizedToVisual:{linear:function(t){return Jo(la(t,this.option.parsedVisual),"rgba")},category:Id,piecewise:function(t,e){var r=XM.call(this,e);return null==r&&(r=Jo(la(t,this.option.parsedVisual),"rgba")),r},fixed:Dd}},colorHue:tx(function(t,e){return al(t,e)}),colorSaturation:tx(function(t,e){return al(t,null,e)}),colorLightness:tx(function(t,e){return al(t,null,null,e)}),colorAlpha:tx(function(t,e){return is(t,e)}),decal:{applyVisual:cp("decal"),_normalizedToVisual:{linear:null,category:Id,piecewise:null,fixed:null}},opacity:{applyVisual:cp("opacity"),_normalizedToVisual:YM([0,1])},liftZ:{applyVisual:cp("liftZ"),_normalizedToVisual:{linear:Dd,category:Dd,piecewise:Dd,fixed:Dd}},symbol:{applyVisual:function(t,e,r){r("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:jM,category:Id,piecewise:function(t,e){var r=XM.call(this,e);return null==r&&(r=jM.call(this,t)),r},fixed:Dd}},symbolSize:{applyVisual:cp("symbolSize"),_normalizedToVisual:YM([0,1])}},n}();function UM(n,t){var e=n.visual,r=[];Ft(e)?Cg(e,function(o){r.push(o)}):null!=e&&r.push(e),t||1!==r.length||{color:1,symbol:1}.hasOwnProperty(n.type)||(r[1]=r[0]),I2(n,r)}function tx(n){return{applyVisual:function(t,e,r){var o=this.mapValueToVisual(t);r("color",n(e("color"),o))},_normalizedToVisual:YM([0,1])}}function jM(n){var t=this.option.visual;return t[Math.round(lr(n,[0,1],[0,t.length-1],!0))]||{}}function cp(n){return function(t,e,r){r(n,this.mapValueToVisual(t))}}function Id(n){var t=this.option.visual;return t[this.option.loop&&n!==WM?n%t.length:n]}function Dd(){return this.option.visual[0]}function YM(n){return{linear:function(t){return lr(t,n,this.option.visual,!0)},category:Id,piecewise:function(t,e){var r=XM.call(this,e);return null==r&&(r=lr(t,n,this.option.visual,!0)),r},fixed:Dd}}function XM(n){var t=this.option,e=t.pieceList;if(t.hasSpecialVisual){var r=e[ri.findPieceIndex(n,e)];if(r&&r.visual)return r.visual[this.type]}}function I2(n,t){return n.visual=t,"color"===n.type&&(n.parsedVisual=j(t,function(e){return wi(e)||[0,0,0,1]})),t}var qM={linear:function(n){return lr(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var t=this.option.pieceList,e=ri.findPieceIndex(n,t,!0);if(null!=e)return lr(e,[0,t.length-1],[0,1],!0)},category:function(n){return(this.option.categories?this.option.categoryMap[n]:n)??WM},fixed:zr};function dp(n,t,e){return n?t<=e:t<e}var ZM=Gn(),D2={seriesType:"treemap",reset:function(n){var t=n.getData().tree.root;t.isRemoved()||nx(t,{},n.getViewRoot().getAncestors(),n)}};function nx(n,t,e,r){var w,S,M,A,I,o=n.getModel(),i=n.getLayout(),a=n.hostTree.data;if(i&&!i.invisible&&i.isInView){var l,c=o.getModel("itemStyle"),h=(w=c,M=r,A=De({},S=t),I=M.designatedVisualItemStyle,Z(["color","colorAlpha","colorSaturation"],function(N){I[N]=S[N];var L=w.get(N);I[N]=null,null!=L&&(A[N]=L)}),A),p=a.ensureUniqueItemVisual(n.dataIndex,"style"),g=c.get("borderColor"),y=c.get("borderColorSaturation");null!=y&&(g=function(w,S){return null!=S?al(S,null,null,w):null}(y,l=N2(h))),p.stroke=g;var b=n.viewChildren;if(b&&b.length){var _=function(w,S,M,A,I,N){if(N&&N.length){var L=Nd(S,"color")||null!=I.color&&"none"!==I.color&&(Nd(S,"colorAlpha")||Nd(S,"colorSaturation"));if(L){var R=S.get("visualMin"),O=S.get("visualMax"),B=M.dataExtent.slice();null!=R&&R<B[0]&&(B[0]=R),null!=O&&O>B[1]&&(B[1]=O);var G=S.get("colorMappingBy"),W={type:L.name,dataExtent:B,visual:L.range};"color"!==W.type||"index"!==G&&"id"!==G?W.mappingMethod="linear":(W.mappingMethod="category",W.loop=!0);var Y=new ri(W);return ZM(Y).drColorMappingBy=G,Y}}}(0,o,i,0,h,b);Z(b,function(w,S){if(w.depth>=e.length||w===e[w.depth]){var M=function(A,I,N,L,R,O){var B=De({},I);if(R){var G=R.type,W="color"===G&&ZM(R).drColorMappingBy,Y="index"===W?L:"id"===W?O.mapIdToIndex(N.getId()):N.getValue(A.get("visualDimension"));B[G]=R.mapValueToVisual(Y)}return B}(o,h,w,S,_,r);nx(w,M,e,r)}})}else l=N2(h),p.fill=l}}function N2(n){var t=rx(n,"color");if(t){var e=rx(n,"colorAlpha"),r=rx(n,"colorSaturation");return r&&(t=al(t,null,null,r)),e&&(t=is(t,e)),t}}function rx(n,t){var e=n[t];if(null!=e&&"none"!==e)return e}function Nd(n,t){var e=n.get(t);return Ee(e)&&e.length?{name:t,range:e}:null}var Mg=Math.max,ox=Math.min,E2=ht,Jy=Z,$M=["itemStyle","borderWidth"],L2=["itemStyle","gapWidth"],ix=["upperLabel","show"],KM=["upperLabel","height"],BL={seriesType:"treemap",reset:function(n,t,e,r){var o=e.getWidth(),i=e.getHeight(),a=n.option,l=xo(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),c=a.size||[],h=Ct(E2(l.width,c[0]),o),p=Ct(E2(l.height,c[1]),i),g=r&&r.type,y=gi(r,["treemapZoomToNode","treemapRootToNode"],n),b="treemapRender"===g||"treemapMove"===g?r.rootRect:null,_=n.getViewRoot(),w=S2(_);if("treemapMove"!==g){var S="treemapZoomToNode"===g?function(L,R,O,B,G){var W,Y=(R||{}).node,X=[B,G];if(!Y||Y===O)return X;for(var J=B*G,ne=J*L.option.zoomToNodeRatio;W=Y.parentNode;){for(var oe=0,ie=W.children,se=0,le=ie.length;se<le;se++)oe+=ie[se].getValue();var pe=Y.getValue();if(0===pe)return X;ne*=oe/pe;var me=W.getModel(),ve=me.get($M);(ne+=4*ve*ve+(3*ve+Math.max(ve,QM(me)))*Math.pow(ne,.5))>Bv&&(ne=Bv),Y=W}ne<J&&(ne=J);var He=Math.pow(ne/J,.5);return[B*He,G*He]}(n,y,_,h,p):b?[b.width,b.height]:[h,p],M=a.sort;M&&"asc"!==M&&"desc"!==M&&(M="desc");var A={squareRatio:a.squareRatio,sort:M,leafDepth:a.leafDepth};_.hostTree.clearLayouts();var I={x:0,y:0,width:S[0],height:S[1],area:S[0]*S[1]};_.setLayout(I),JM(_,A,!1,0),I=_.getLayout(),Jy(w,function(L,R){var O=(w[R+1]||_).getValue();L.setLayout(De({dataExtent:[O,O],borderWidth:0,upperHeight:0},I))})}var N=n.getData().tree.root;N.setLayout(function(L,R,O){if(R)return{x:R.x,y:R.y};var B={x:0,y:0};if(!O)return B;var G=O.node,W=G.getLayout();if(!W)return B;for(var Y=[W.width/2,W.height/2],X=G;X;){var J=X.getLayout();Y[0]+=J.x,Y[1]+=J.y,X=X.parentNode}return{x:L.width/2-Y[0],y:L.height/2-Y[1]}}(l,b,y),!0),n.setLayoutInfo(l),O2(N,new Kt(-l.x,-l.y,o,i),w,_,0)}};function JM(n,t,e,r){var o,i;if(!n.isRemoved()){var a=n.getLayout();o=a.width,i=a.height;var l=n.getModel(),c=l.get($M),h=l.get(L2)/2,p=QM(l),g=Math.max(c,p),y=c-h,b=g-h;n.setLayout({borderWidth:c,upperHeight:g,upperLabelHeight:p},!0);var _=(o=Mg(o-2*y,0))*(i=Mg(i-y-b,0)),w=function(G,W,Y,X,J,ne){var oe=G.children||[],ie=X.sort;"asc"!==ie&&"desc"!==ie&&(ie=null);var nt,se=null!=X.leafDepth&&X.leafDepth<=ne;if(J&&!se)return G.viewChildren=[];oe=Xn(oe,function(He){return!He.isRemoved()}),(nt=ie)&&oe.sort(function(Me,je){var tt="asc"===nt?Me.getValue()-je.getValue():je.getValue()-Me.getValue();return 0===tt?"asc"===nt?Me.dataIndex-je.dataIndex:je.dataIndex-Me.dataIndex:tt});var le=function(He,nt,Me){for(var je=0,tt=0,ut=nt.length;tt<ut;tt++)je+=nt[tt].getValue();var pt,St=He.get("visualDimension");return nt&&nt.length?"value"===St&&Me?(pt=[nt[nt.length-1].getValue(),nt[0].getValue()],"asc"===Me&&pt.reverse()):(pt=[1/0,-1/0],Jy(nt,function(Ze){var yt=Ze.getValue(St);yt<pt[0]&&(pt[0]=yt),yt>pt[1]&&(pt[1]=yt)})):pt=[NaN,NaN],{sum:je,dataExtent:pt}}(W,oe,ie);if(0===le.sum)return G.viewChildren=[];if(le.sum=function(He,nt,Me,je,tt){if(!je)return Me;for(var ut=He.get("visibleMin"),pt=tt.length,St=pt,Ze=pt-1;Ze>=0;Ze--){var yt=tt["asc"===je?pt-Ze-1:Ze].getValue();yt/Me*nt<ut&&(St=Ze,Me-=yt)}return tt.splice("asc"===je?0:St,pt-St),Me}(W,Y,le.sum,ie,oe),0===le.sum)return G.viewChildren=[];for(var pe=0,me=oe.length;pe<me;pe++){var ve=oe[pe].getValue()/le.sum*Y;oe[pe].setLayout({area:ve})}return se&&(oe.length&&G.setLayout({isLeafRoot:!0},!0),oe.length=0),G.viewChildren=oe,G.setLayout({dataExtent:le.dataExtent},!0),oe}(n,l,_,t,e,r);if(w.length){var S={x:y,y:b,width:o,height:i},M=ox(o,i),A=1/0,I=[];I.area=0;for(var N=0,L=w.length;N<L;){var R=w[N];I.push(R),I.area+=R.getLayout().area;var O=R2(I,M,t.squareRatio);O<=A?(N++,A=O):(I.area-=I.pop().getLayout().area,ax(I,M,S,h,!1),M=ox(S.width,S.height),I.length=I.area=0,A=1/0)}if(I.length&&ax(I,M,S,h,!0),!e){var B=l.get("childrenVisibleMin");null!=B&&_<B&&(e=!0)}for(N=0,L=w.length;N<L;N++)JM(w[N],t,e,r+1)}}}function R2(n,t,e){for(var r=0,o=1/0,i=0,a=void 0,l=n.length;i<l;i++)(a=n[i].getLayout().area)&&(a<o&&(o=a),a>r&&(r=a));var c=n.area*n.area,h=t*t*e;return c?Mg(h*r/c,c/(h*o)):1/0}function ax(n,t,e,r,o){var i=t===e.width?0:1,a=1-i,l=["x","y"],c=["width","height"],h=e[l[i]],p=t?n.area/t:0;(o||p>e[c[a]])&&(p=e[c[a]]);for(var g=0,y=n.length;g<y;g++){var b=n[g],_={},w=p?b.getLayout().area/p:0,S=_[c[a]]=Mg(p-2*r,0),M=e[l[i]]+e[c[i]]-h,A=g===y-1||M<w?M:w,I=_[c[i]]=Mg(A-2*r,0);_[l[a]]=e[l[a]]+ox(r,S/2),_[l[i]]=h+ox(r,I/2),h+=A,b.setLayout(_,!0)}e[l[a]]+=p,e[c[a]]-=p}function O2(n,t,e,r,o){var i=n.getLayout(),a=e[o],l=a&&a===n;if(!(a&&!l||o===e.length&&n!==r)){n.setLayout({isInView:!0,invisible:!l&&!t.intersect(i),isAboveViewRoot:l},!0);var c=new Kt(t.x-i.x,t.y-i.y,t.width,t.height);Jy(n.viewChildren||[],function(h){O2(h,c,e,r,o+1)})}}function QM(n){return n.get(ix)?n.get(KM):0}function P2(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.eachSeriesByType("graph",function(e){var r=e.getCategoriesData(),o=e.getGraph().data,i=r.mapArray(r.getName);o.filterSelf(function(a){var l=o.getItemModel(a).getShallow("category");if(null!=l){dt(l)&&(l=i[l]);for(var c=0;c<t.length;c++)if(!t[c].isSelected(l))return!1}return!0})})}function B2(n){var t={};n.eachSeriesByType("graph",function(e){var r=e.getCategoriesData(),o=e.getData(),i={};r.each(function(a){var l=r.getName(a);i["ec-"+l]=a;var c=r.getItemModel(a),h=c.getModel("itemStyle").getItemStyle();h.fill||(h.fill=e.getColorFromPalette(l,t)),r.setItemVisual(a,"style",h);for(var p=["symbol","symbolSize","symbolKeepAspect"],g=0;g<p.length;g++){var y=c.getShallow(p[g],!0);null!=y&&r.setItemVisual(a,p[g],y)}}),r.count()&&o.each(function(a){var l=o.getItemModel(a).getShallow("category");if(null!=l){bt(l)&&(l=i["ec-"+l]);var c=r.getItemVisual(l,"style");De(o.ensureUniqueItemVisual(a,"style"),c);for(var h=["symbol","symbolSize","symbolKeepAspect"],p=0;p<h.length;p++)o.setItemVisual(a,h[p],r.getItemVisual(l,h[p]))}})})}function Qy(n){return n instanceof Array||(n=[n,n]),n}function eT(n){n.eachSeriesByType("graph",function(t){var e=t.getGraph(),r=t.getEdgeData(),o=Qy(t.get("edgeSymbol")),i=Qy(t.get("edgeSymbolSize"));r.setVisual("fromSymbol",o&&o[0]),r.setVisual("toSymbol",o&&o[1]),r.setVisual("fromSymbolSize",i&&i[0]),r.setVisual("toSymbolSize",i&&i[1]),r.setVisual("style",t.getModel("lineStyle").getLineStyle()),r.each(function(a){var l=r.getItemModel(a),c=e.getEdgeByIndex(a),h=Qy(l.getShallow("symbol",!0)),p=Qy(l.getShallow("symbolSize",!0)),g=l.getModel("lineStyle").getLineStyle(),y=r.ensureUniqueItemVisual(a,"style");switch(De(y,g),y.stroke){case"source":var b=c.node1.getVisual("style");y.stroke=b&&b.fill;break;case"target":b=c.node2.getVisual("style"),y.stroke=b&&b.fill}h[0]&&c.setVisual("fromSymbol",h[0]),h[1]&&c.setVisual("toSymbol",h[1]),p[0]&&c.setVisual("fromSymbolSize",p[0]),p[1]&&c.setVisual("toSymbolSize",p[1])})})}var sx=function(n){return n.get("autoCurveness")||null},z2=function(n,t){var e=sx(n),r=20,o=[];if(dt(e))r=e;else if(Ee(e))return void(n.__curvenessList=e);t>r&&(r=t);var i=r%2?r+2:r+3;o=[];for(var a=0;a<i;a++)o.push((a%2?a+1:a)/10*(a%2?-1:1));n.__curvenessList=o},tv=function(n,t,e){var r=[n.id,n.dataIndex].join("."),o=[t.id,t.dataIndex].join(".");return[e.uid,r,o].join("--\x3e")},V2=function(n){var t=n.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},lx=function(n,t){var e=t.__edgeMap;return e[n]?e[n].length:0};function Tg(n,t,e,r){var o=sx(t),i=Ee(o);if(!o)return null;var S,M,A,a=(A=tv((S=n).node1,S.node2,M=t),M.__edgeMap[A]);if(!a)return null;for(var l=-1,c=0;c<a.length;c++)if(a[c]===e){l=c;break}var h=function(S,M){return lx(tv(S.node1,S.node2,M),M)+lx(tv(S.node2,S.node1,M),M)}(n,t);z2(t,h),n.lineStyle=n.lineStyle||{};var p=tv(n.node1,n.node2,t),g=t.__curvenessList,y=i||h%2?0:1;if(a.isForward)return g[y+l];var b=V2(p),_=lx(b,t),w=g[l+_+y];return r?i?o&&0===o[0]?(_+y)%2?w:-w:((_%2?0:1)+y)%2?w:-w:(_+y)%2?w:-w:g[l+_+y]}function ux(n){var t=n.coordinateSystem;if(!t||"view"===t.type){var e=n.getGraph();e.eachNode(function(r){var o=r.getModel();r.setLayout([+o.get("x"),+o.get("y")])}),cx(e,n)}}function cx(n,t){n.eachEdge(function(e,r){var o=An(e.getModel().get(["lineStyle","curveness"]),-Tg(e,t,r,!0),0),i=zi(e.node1.getLayout()),a=zi(e.node2.getLayout()),l=[i,a];+o&&l.push([(i[0]+a[0])/2-(i[1]-a[1])*o,(i[1]+a[1])/2-(a[0]-i[0])*o]),e.setLayout(l)})}function Ed(n,t){n.eachSeriesByType("graph",function(e){var r=e.get("layout"),o=e.coordinateSystem;if(o&&"view"!==o.type){var i=e.getData(),a=[];Z(o.dimensions,function(y){a=a.concat(i.mapDimensionsAll(y))});for(var l=0;l<i.count();l++){for(var c=[],h=!1,p=0;p<a.length;p++){var g=i.get(a[p],l);isNaN(g)||(h=!0),c.push(g)}i.setItemLayout(l,h?o.dataToPoint(c):[NaN,NaN])}cx(i.graph,e)}else r&&"none"!==r||ux(e)})}function Ag(n){var t=n.coordinateSystem;if("view"!==t.type)return 1;var e=n.option.nodeScaleRatio,r=t.scaleX;return((t.getZoom()-1)*e+1)/r}function kg(n){var t=n.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var dx=Math.PI,tT=[];function hx(n,t,e,r){var o=n.coordinateSystem;if(!o||"view"===o.type){var i=o.getBoundingRect(),a=n.getData(),l=a.graph,c=i.width/2+i.x,h=i.height/2+i.y,p=Math.min(i.width,i.height)/2,g=a.count();if(a.setLayout({cx:c,cy:h}),g){if(e){var y=o.pointToData(r),w=[y[0]-c,y[1]-h];ke(w,w),$o(w,w,p),e.setLayout([c+w[0],h+w[1]],!0),nT(e,n.get(["circular","rotateLabel"]),c,h)}F2[t](n,l,a,p,c,h,g),l.eachEdge(function(S,M){var A,I=An(S.getModel().get(["lineStyle","curveness"]),Tg(S,n,M),0),N=zi(S.node1.getLayout()),L=zi(S.node2.getLayout());+I&&(A=[c*(I*=3)+(N[0]+L[0])/2*(1-I),h*I+(N[1]+L[1])/2*(1-I)]),S.setLayout([N,L,A])})}}}var F2={value:function(n,t,e,r,o,i,a){var l=0,c=e.getSum("value"),h=2*Math.PI/(c||a);t.eachNode(function(p){var g=p.getValue("value"),y=h*(c?g:1)/2;l+=y,p.setLayout([r*Math.cos(l)+o,r*Math.sin(l)+i]),l+=y})},symbolSize:function(n,t,e,r,o,i,a){var l=0;tT.length=a;var c=Ag(n);t.eachNode(function(g){var y=kg(g);isNaN(y)&&(y=2),y<0&&(y=0),y*=c;var b=Math.asin(y/2/r);isNaN(b)&&(b=dx/2),tT[g.dataIndex]=b,l+=2*b});var h=(2*dx-l)/a/2,p=0;t.eachNode(function(g){var y=h+tT[g.dataIndex];p+=y,(!g.getLayout()||!g.getLayout().fixed)&&g.setLayout([r*Math.cos(p)+o,r*Math.sin(p)+i]),p+=y})}};function nT(n,t,e,r){var o=n.getGraphicEl();if(o){var i=n.getModel().get(["label","rotate"])||0,a=o.getSymbolPath();if(t){var l=n.getLayout(),c=Math.atan2(l[1]-r,l[0]-e);c<0&&(c=2*Math.PI+c);var h=l[0]<e;h&&(c-=Math.PI);var p=h?"left":"right";a.setTextConfig({rotation:-c,position:p,origin:"center"});var g=a.ensureState("emphasis");De(g.textConfig||(g.textConfig={}),{position:p})}else a.setTextConfig({rotation:i*=Math.PI/180})}}function G2(n){n.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&hx(t,"symbolSize")})}var hp=ks;function H2(n){n.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var r=t.preservedPoints||{},o=t.getGraph(),i=o.data,a=o.edgeData,l=t.getModel("force"),c=l.get("initLayout");t.preservedPoints?i.each(function(I){var N=i.getId(I);i.setItemLayout(I,r[N]||[NaN,NaN])}):c&&"none"!==c?"circular"===c&&hx(t,"value"):ux(t);var h=i.getDataExtent("value"),p=a.getDataExtent("value"),g=l.get("repulsion"),y=l.get("edgeLength"),b=Ee(g)?g:[g,g],_=Ee(y)?y:[y,y];_=[_[1],_[0]];var w=i.mapArray("value",function(I,N){var L=i.getItemLayout(N),R=lr(I,h,b);return isNaN(R)&&(R=(b[0]+b[1])/2),{w:R,rep:R,fixed:i.getItemModel(N).get("fixed"),p:!L||isNaN(L[0])||isNaN(L[1])?null:L}}),S=a.mapArray("value",function(I,N){var L=o.getEdgeByIndex(N),R=lr(I,p,_);isNaN(R)&&(R=(_[0]+_[1])/2);var O=L.getModel(),B=An(L.getModel().get(["lineStyle","curveness"]),-Tg(L,t,N,!0),0);return{n1:w[L.node1.dataIndex],n2:w[L.node2.dataIndex],d:R,curveness:B,ignoreForceLayout:O.get("ignoreForceLayout")}}),M=e.getBoundingRect(),A=function(I,N,L){for(var R=I,O=N,B=L.rect,G=B.width,W=B.height,Y=[B.x+G/2,B.y+W/2],X=null==L.gravity?.1:L.gravity,J=0;J<R.length;J++){var ne=R[J];ne.p||(ne.p=Zt(G*(Math.random()-.5)+Y[0],W*(Math.random()-.5)+Y[1])),ne.pp=zi(ne.p),ne.edges=null}var oe,ie,se=null==L.friction?.6:L.friction,le=se;return{warmUp:function(){le=.8*se},setFixed:function(pe){R[pe].fixed=!0},setUnfixed:function(pe){R[pe].fixed=!1},beforeStep:function(pe){oe=pe},afterStep:function(pe){ie=pe},step:function(pe){oe&&oe(R,O);for(var me=[],ve=R.length,He=0;He<O.length;He++){var nt=O[He];if(!nt.ignoreForceLayout){var Me=nt.n1;Vi(me,(pt=nt.n2).p,Me.p);var je=Fi(me)-nt.d,tt=pt.w/(Me.w+pt.w);isNaN(tt)&&(tt=0),ke(me,me),!Me.fixed&&hp(Me.p,Me.p,me,tt*je*le),!pt.fixed&&hp(pt.p,pt.p,me,-(1-tt)*je*le)}}for(He=0;He<ve;He++)(yt=R[He]).fixed||(Vi(me,Y,yt.p),hp(yt.p,yt.p,me,X*le));for(He=0;He<ve;He++){Me=R[He];for(var ut=He+1;ut<ve;ut++){var pt;Vi(me,(pt=R[ut]).p,Me.p),0===(je=Fi(me))&&(Dl(me,Math.random()-.5,Math.random()-.5),je=1);var St=(Me.rep+pt.rep)/je/je;!Me.fixed&&hp(Me.pp,Me.pp,me,St),!pt.fixed&&hp(pt.pp,pt.pp,me,-St)}}var Ze=[];for(He=0;He<ve;He++){var yt;(yt=R[He]).fixed||(Vi(Ze,yt.p,yt.pp),hp(yt.p,yt.p,Ze,le),lo(yt.pp,yt.p))}var Vt=(le*=.992)<.01;ie&&ie(R,O,Vt),pe&&pe(Vt)}}}(w,S,{rect:M,gravity:l.get("gravity"),friction:l.get("friction")});A.beforeStep(function(I,N){for(var L=0,R=I.length;L<R;L++)I[L].fixed&&lo(I[L].p,o.getNodeByIndex(L).getLayout())}),A.afterStep(function(I,N,L){for(var R=0,O=I.length;R<O;R++)I[R].fixed||o.getNodeByIndex(R).setLayout(I[R].p),r[i.getId(R)]=I[R].p;for(R=0,O=N.length;R<O;R++){var B=N[R],G=o.getEdgeByIndex(R),W=B.n1.p,Y=B.n2.p,X=G.getLayout();(X=X?X.slice():[])[0]=X[0]||[],X[1]=X[1]||[],lo(X[0],W),lo(X[1],Y),+B.curveness&&(X[2]=[(W[0]+Y[0])/2-(W[1]-Y[1])*B.curveness,(W[1]+Y[1])/2-(Y[0]-W[0])*B.curveness]),G.setLayout(X)}}),t.forceLayout=A,t.preservedPoints=r,A.step()}else t.forceLayout=null})}function zL(n,t){var e=[];return n.eachSeriesByType("graph",function(r){var S,M,o=r.get("coordinateSystem");if(!o||"view"===o){var i=r.getData(),a=[],l=[];ql(i.mapArray(function(w){var S=i.getItemModel(w);return[+S.get("x"),+S.get("y")]}),a,l),l[0]-a[0]==0&&(l[0]+=1,a[0]-=1),l[1]-a[1]==0&&(l[1]+=1,a[1]-=1);var c=(l[0]-a[0])/(l[1]-a[1]),h=(S=t,M=c,xo(De(r.getBoxLayoutParams(),{aspect:M}),{width:S.getWidth(),height:S.getHeight()}));isNaN(c)&&(a=[h.x,h.y],l=[h.x+h.width,h.y+h.height]);var p=l[0]-a[0],g=l[1]-a[1],y=h.width,b=h.height,_=r.coordinateSystem=new Hy;_.zoomLimit=r.get("scaleLimit"),_.setBoundingRect(a[0],a[1],p,g),_.setViewRect(h.x,h.y,y,b),_.setCenter(r.get("center"),t),_.setZoom(r.get("zoom")),e.push(_)}}),e}var rT=Yo.prototype,oT=ff.prototype,W2=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function iT(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}!function(n){Ce(function t(){return null!==n&&n.apply(this,arguments)||this},n)}(W2);var U2=function(n){function t(e){var r=n.call(this,e)||this;return r.type="ec-line",r}return Ce(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new W2},t.prototype.buildPath=function(e,r){iT(r)?rT.buildPath.call(this,e,r):oT.buildPath.call(this,e,r)},t.prototype.pointAt=function(e){return iT(this.shape)?rT.pointAt.call(this,e):oT.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var r=this.shape,o=iT(r)?[r.x2-r.x1,r.y2-r.y1]:oT.tangentAt.call(this,e);return ke(o,o)},t}(Yn),aT=["fromSymbol","toSymbol"];function sT(n){return"_"+n+"Type"}function lT(n,t,e){var r=t.getItemVisual(e,n);if(!r||"none"===r)return r;var o=t.getItemVisual(e,n+"Size"),i=t.getItemVisual(e,n+"Rotate"),a=t.getItemVisual(e,n+"Offset"),l=t.getItemVisual(e,n+"KeepAspect"),c=uu(o);return r+c+cu(a||0,c)+(i||"")+(l||"")}function uT(n,t,e){var r=t.getItemVisual(e,n);if(r&&"none"!==r){var o=t.getItemVisual(e,n+"Size"),i=t.getItemVisual(e,n+"Rotate"),a=t.getItemVisual(e,n+"Offset"),l=t.getItemVisual(e,n+"KeepAspect"),c=uu(o),h=cu(a||0,c),p=vo(r,-c[0]/2+h[0],-c[1]/2+h[1],c[0],c[1],null,l);return p.__specifiedRotation=null==i||isNaN(i)?void 0:+i*Math.PI/180||0,p.name=n,p}}function cT(n,t){n.x1=t[0][0],n.y1=t[0][1],n.x2=t[1][0],n.y2=t[1][1],n.percent=1;var e=t[2];e?(n.cpx1=e[0],n.cpy1=e[1]):(n.cpx1=NaN,n.cpy1=NaN)}var Ld=function(n){function t(e,r,o){var i=n.call(this)||this;return i._createLine(e,r,o),i}return Ce(t,n),t.prototype._createLine=function(e,r,o){var l,c,i=e.hostModel,a=(l=e.getItemLayout(r),cT((c=new U2({name:"line",subPixelOptimize:!0})).shape,l),c);a.shape.percent=0,to(a,{shape:{percent:1}},i,r),this.add(a),Z(aT,function(l){var c=uT(l,e,r);this.add(c),this[sT(l)]=lT(l,e,r)},this),this._updateCommonStl(e,r,o)},t.prototype.updateData=function(e,r,o){var i=e.hostModel,a=this.childOfName("line"),l=e.getItemLayout(r),c={shape:{}};cT(c.shape,l),hr(a,c,i,r),Z(aT,function(h){var p=lT(h,e,r),g=sT(h);if(this[g]!==p){this.remove(this.childOfName(h));var y=uT(h,e,r);this.add(y)}this[g]=p},this),this._updateCommonStl(e,r,o)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,r,o){var i=e.hostModel,a=this.childOfName("line"),l=o&&o.emphasisLineStyle,c=o&&o.blurLineStyle,h=o&&o.selectLineStyle,p=o&&o.labelStatesModels,g=o&&o.emphasisDisabled,y=o&&o.focus,b=o&&o.blurScope;if(!o||e.hasItemOption){var _=e.getItemModel(r),w=_.getModel("emphasis");l=w.getModel("lineStyle").getLineStyle(),c=_.getModel(["blur","lineStyle"]).getLineStyle(),h=_.getModel(["select","lineStyle"]).getLineStyle(),g=w.get("disabled"),y=w.get("focus"),b=w.get("blurScope"),p=fo(_)}var S=e.getItemVisual(r,"style"),M=S.stroke;a.useStyle(S),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=l,a.ensureState("blur").style=c,a.ensureState("select").style=h,Z(aT,function(R){var O=this.childOfName(R);if(O){O.setColor(M),O.style.opacity=S.opacity;for(var B=0;B<ui.length;B++){var G=ui[B],W=a.getState(G);if(W){var Y=W.style||{},X=O.ensureState(G),J=X.style||(X.style={});null!=Y.stroke&&(J[O.__isEmptyBrush?"stroke":"fill"]=Y.stroke),null!=Y.opacity&&(J.opacity=Y.opacity)}}O.markRedraw()}},this);var A=i.getRawValue(r);Ao(this,p,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(R,O){return i.getFormattedLabel(R,O,e.dataType)}},inheritColor:M||"#000",defaultOpacity:S.opacity,defaultText:(null==A?e.getName(r):isFinite(A)?co(A):A)+""});var I=this.getTextContent();if(I){var N=p.normal;I.__align=I.style.align,I.__verticalAlign=I.style.verticalAlign,I.__position=N.get("position")||"middle";var L=N.get("distance");Ee(L)||(L=[L,L]),I.__labelDistance=L}this.setTextConfig({position:null,local:!0,inside:!1}),mo(this,y,b,g)},t.prototype.highlight=function(){Ku(this)},t.prototype.downplay=function(){Ql(this)},t.prototype.updateLayout=function(e,r){this.setLinePoints(e.getItemLayout(r))},t.prototype.setLinePoints=function(e){var r=this.childOfName("line");cT(r.shape,e),r.dirty()},t.prototype.beforeUpdate=function(){var e=this,r=e.childOfName("fromSymbol"),o=e.childOfName("toSymbol"),i=e.getTextContent();if(r||o||i&&!i.ignore){for(var a=1,l=this.parent;l;)l.scaleX&&(a/=l.scaleX),l=l.parent;var c=e.childOfName("line");if(this.__dirty||c.__dirty){var h=c.shape.percent,p=c.pointAt(0),g=c.pointAt(h),y=Vi([],g,p);if(ke(y,y),r&&(r.setPosition(p),G(r,0),r.scaleX=r.scaleY=a*h,r.markRedraw()),o&&(o.setPosition(g),G(o,1),o.scaleX=o.scaleY=a*h,o.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var b=void 0,_=void 0,w=i.__labelDistance,S=w[0]*a,M=w[1]*a,A=h/2,I=c.tangentAt(A),N=[I[1],-I[0]],L=c.pointAt(A);N[1]>0&&(N[0]=-N[0],N[1]=-N[1]);var R=I[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var O=-Math.atan2(I[1],I[0]);g[0]<p[0]&&(O=Math.PI+O),i.rotation=O}var B=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":B=-M,_="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":B=M,_="top";break;default:B=0,_="middle"}switch(i.__position){case"end":i.x=y[0]*S+g[0],i.y=y[1]*M+g[1],b=y[0]>.8?"left":y[0]<-.8?"right":"center",_=y[1]>.8?"top":y[1]<-.8?"bottom":"middle";break;case"start":i.x=-y[0]*S+p[0],i.y=-y[1]*M+p[1],b=y[0]>.8?"right":y[0]<-.8?"left":"center",_=y[1]>.8?"bottom":y[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=S*R+p[0],i.y=p[1]+B,b=I[0]<0?"right":"left",i.originX=-S*R,i.originY=-B;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=L[0],i.y=L[1]+B,b="center",i.originY=-B;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-S*R+g[0],i.y=g[1]+B,b=I[0]>=0?"right":"left",i.originX=S*R,i.originY=-B}i.scaleX=i.scaleY=a,i.setStyle({verticalAlign:i.__verticalAlign||_,align:i.__align||b})}}}function G(W,Y){var X=W.__specifiedRotation;if(null==X){var J=c.tangentAt(Y);W.attr("rotation",(1===Y?-1:1)*Math.PI/2-Math.atan2(J[1],J[0]))}else W.attr("rotation",X)}},t}(on),dT=function(){function n(t){this.group=new on,this._LineCtor=t||Ld}return n.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var r=this,o=r.group,i=r._lineData;r._lineData=t,i||o.removeAll();var a=j2(t);t.diff(i).add(function(l){e._doAdd(t,l,a)}).update(function(l,c){e._doUpdate(i,t,c,l,a)}).remove(function(l){o.remove(i.getItemGraphicEl(l))}).execute()},n.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,r){e.updateLayout(t,r)},this)},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=j2(t),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,e){function r(a){var l;a.isGroup||(l=a).animators&&l.animators.length>0||(a.incremental=!0,a.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var o=t.start;o<t.end;o++)if(hT(e.getItemLayout(o))){var i=new this._LineCtor(e,o,this._seriesScope);i.traverse(r),this.group.add(i),e.setItemGraphicEl(o,i),this._progressiveEls.push(i)}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(t){Qu(this._progressiveEls||this.group,t)},n.prototype._doAdd=function(t,e,r){if(hT(t.getItemLayout(e))){var o=new this._LineCtor(t,e,r);t.setItemGraphicEl(e,o),this.group.add(o)}},n.prototype._doUpdate=function(t,e,r,o,i){var a=t.getItemGraphicEl(r);hT(e.getItemLayout(o))?(a?a.updateData(e,o,i):a=new this._LineCtor(e,o,i),e.setItemGraphicEl(o,a),this.group.add(a)):this.group.remove(a)},n}();function j2(n){var t=n.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:fo(t)}}function Y2(n){return isNaN(n[0])||isNaN(n[1])}function hT(n){return n&&!Y2(n[0])&&!Y2(n[1])}var nv=[],px=[],fx=[],pp=_n,pT=It,fT=Math.abs;function X2(n,t,e){for(var r,o=n[0],i=n[1],a=n[2],l=1/0,c=e*e,h=.1,p=.1;p<=.9;p+=.1)nv[0]=pp(o[0],i[0],a[0],p),nv[1]=pp(o[1],i[1],a[1],p),(b=fT(pT(nv,t)-c))<l&&(l=b,r=p);for(var g=0;g<32;g++){var y=r+h;px[0]=pp(o[0],i[0],a[0],r),px[1]=pp(o[1],i[1],a[1],r),fx[0]=pp(o[0],i[0],a[0],y),fx[1]=pp(o[1],i[1],a[1],y);var b=pT(px,t)-c;if(fT(b)<.01)break;var _=pT(fx,t)-c;h/=2,b<0?_>=0?r+=h:r-=h:_>=0?r-=h:r+=h}return r}function gT(n,t){var e=[],r=_i,o=[[],[],[]],i=[[],[]],a=[];t/=2,n.eachEdge(function(l,c){var h=l.getLayout(),p=l.getVisual("fromSymbol"),g=l.getVisual("toSymbol");h.__original||(h.__original=[zi(h[0]),zi(h[1])],h[2]&&h.__original.push(zi(h[2])));var y=h.__original;if(null!=h[2]){if(lo(o[0],y[0]),lo(o[1],y[2]),lo(o[2],y[1]),p&&"none"!==p){var b=kg(l.node1),_=X2(o,y[0],b*t);r(o[0][0],o[1][0],o[2][0],_,e),o[0][0]=e[3],o[1][0]=e[4],r(o[0][1],o[1][1],o[2][1],_,e),o[0][1]=e[3],o[1][1]=e[4]}g&&"none"!==g&&(b=kg(l.node2),_=X2(o,y[1],b*t),r(o[0][0],o[1][0],o[2][0],_,e),o[1][0]=e[1],o[2][0]=e[2],r(o[0][1],o[1][1],o[2][1],_,e),o[1][1]=e[1],o[2][1]=e[2]),lo(h[0],o[0]),lo(h[1],o[2]),lo(h[2],o[1])}else lo(i[0],y[0]),lo(i[1],y[1]),Vi(a,i[1],i[0]),ke(a,a),p&&"none"!==p&&(b=kg(l.node1),ks(i[0],i[0],a,b*t)),g&&"none"!==g&&(b=kg(l.node2),ks(i[1],i[1],a,-b*t)),lo(h[0],i[0]),lo(h[1],i[1])})}function rv(n){return"view"===n.type}var q2=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(e,r){var o=new Ey,i=new dT,a=this.group;this._controller=new bg(r.getZr()),this._controllerHost={target:a},a.add(o.group),a.add(i.group),this._symbolDraw=o,this._lineDraw=i,this._firstRender=!0},t.prototype.render=function(e,r,o){var i=this,a=e.coordinateSystem;this._model=e;var l=this._symbolDraw,c=this._lineDraw,h=this.group;if(rv(a)){var p={x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY};this._firstRender?h.attr(p):hr(h,p,e)}gT(e.getGraph(),Ag(e));var g=e.getData();l.updateData(g);var y=e.getEdgeData();c.updateData(y),this._updateNodeAndLinkScale(),this._updateController(e,r,o),clearTimeout(this._layoutTimeout);var b=e.forceLayout,_=e.get(["force","layoutAnimation"]);b&&this._startForceLayoutIteration(b,_);var w=e.get("layout");g.graph.eachNode(function(I){var N=I.dataIndex,L=I.getGraphicEl(),R=I.getModel();if(L){L.off("drag").off("dragend");var O=R.get("draggable");O&&L.on("drag",function(B){switch(w){case"force":b.warmUp(),!i._layouting&&i._startForceLayoutIteration(b,_),b.setFixed(N),g.setItemLayout(N,[L.x,L.y]);break;case"circular":g.setItemLayout(N,[L.x,L.y]),I.setLayout({fixed:!0},!0),hx(e,"symbolSize",I,[B.offsetX,B.offsetY]),i.updateLayout(e);break;default:g.setItemLayout(N,[L.x,L.y]),cx(e.getGraph(),e),i.updateLayout(e)}}).on("dragend",function(){b&&b.setUnfixed(N)}),L.setDraggable(O,!!R.get("cursor")),"adjacency"===R.get(["emphasis","focus"])&&(cn(L).focus=I.getAdjacentDataIndices())}}),g.graph.eachEdge(function(I){var N=I.getGraphicEl(),L=I.getModel().get(["emphasis","focus"]);N&&"adjacency"===L&&(cn(N).focus={edge:[I.dataIndex],node:[I.node1.dataIndex,I.node2.dataIndex]})});var S="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),M=g.getLayout("cx"),A=g.getLayout("cy");g.graph.eachNode(function(I){nT(I,S,M,A)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,r){var o=this;!function i(){e.step(function(a){o.updateLayout(o._model),(o._layouting=!a)&&(r?o._layoutTimeout=setTimeout(i,16):i())})}()},t.prototype._updateController=function(e,r,o){var i=this,a=this._controller,l=this._controllerHost,c=this.group;a.setPointerChecker(function(h,p,g){var y=c.getBoundingRect();return y.applyTransform(c.transform),y.contain(p,g)&&!sp(h,o,e)}),rv(e.coordinateSystem)?(a.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(h){Md(l,h.dx,h.dy),o.dispatchAction({seriesId:e.id,type:"graphRoam",dx:h.dx,dy:h.dy})}).on("zoom",function(h){ap(l,h.scale,h.originX,h.originY),o.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:h.scale,originX:h.originX,originY:h.originY}),i._updateNodeAndLinkScale(),gT(e.getGraph(),Ag(e)),i._lineDraw.updateLayout(),o.updateLabelLayout()})):a.disable()},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,r=e.getData(),o=Ag(e);r.eachItemGraphicEl(function(i,a){i&&i.setSymbolScale(o)})},t.prototype.updateLayout=function(e){gT(e.getGraph(),Ag(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(vr);function fp(n){return"_EC_"+n}var Z2=function(){function n(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(t,e){var r=this._nodesMap;if(!r[fp(t=null==t?""+e:""+t)]){var o=new Rd(t,e);return o.hostGraph=this,this.nodes.push(o),r[fp(t)]=o,o}},n.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},n.prototype.getNodeById=function(t){return this._nodesMap[fp(t)]},n.prototype.addEdge=function(t,e,r){var o=this._nodesMap,i=this._edgesMap;if(dt(t)&&(t=this.nodes[t]),dt(e)&&(e=this.nodes[e]),t instanceof Rd||(t=o[fp(t)]),e instanceof Rd||(e=o[fp(e)]),t&&e){var a=t.id+"-"+e.id,l=new mT(t,e,r);return l.hostGraph=this,this._directed&&(t.outEdges.push(l),e.inEdges.push(l)),t.edges.push(l),t!==e&&e.edges.push(l),this.edges.push(l),i[a]=l,l}},n.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},n.prototype.getEdge=function(t,e){t instanceof Rd&&(t=t.id),e instanceof Rd&&(e=e.id);var r=this._edgesMap;return this._directed?r[t+"-"+e]:r[t+"-"+e]||r[e+"-"+t]},n.prototype.eachNode=function(t,e){for(var r=this.nodes,o=r.length,i=0;i<o;i++)r[i].dataIndex>=0&&t.call(e,r[i],i)},n.prototype.eachEdge=function(t,e){for(var r=this.edges,o=r.length,i=0;i<o;i++)r[i].dataIndex>=0&&r[i].node1.dataIndex>=0&&r[i].node2.dataIndex>=0&&t.call(e,r[i],i)},n.prototype.breadthFirstTraverse=function(t,e,r,o){if(e instanceof Rd||(e=this._nodesMap[fp(e)]),e){for(var i="out"===r?"outEdges":"in"===r?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(o,e,null))for(var l=[e];l.length;){var c=l.shift(),h=c[i];for(a=0;a<h.length;a++){var p=h[a],g=p.node1===c?p.node2:p.node1;if(!g.__visited){if(t.call(o,g,c))return;l.push(g),g.__visited=!0}}}}},n.prototype.update=function(){for(var t=this.data,e=this.edgeData,r=this.nodes,o=this.edges,i=0,a=r.length;i<a;i++)r[i].dataIndex=-1;for(i=0,a=t.count();i<a;i++)r[t.getRawIndex(i)].dataIndex=i;for(e.filterSelf(function(l){var c=o[e.getRawIndex(l)];return c.node1.dataIndex>=0&&c.node2.dataIndex>=0}),i=0,a=o.length;i<a;i++)o[i].dataIndex=-1;for(i=0,a=e.count();i<a;i++)o[e.getRawIndex(i)].dataIndex=i},n.prototype.clone=function(){for(var t=new n(this._directed),e=this.nodes,r=this.edges,o=0;o<e.length;o++)t.addNode(e[o].id,e[o].dataIndex);for(o=0;o<r.length;o++){var i=r[o];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},n}(),Rd=function(){function n(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=e??-1}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)},n.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var r=this.edges[e];r.dataIndex<0||(t.edge.push(r.dataIndex),t.node.push(r.node1.dataIndex,r.node2.dataIndex))}return t},n.prototype.getTrajectoryDataIndices=function(){for(var t=Et(),e=Et(),r=0;r<this.edges.length;r++){var o=this.edges[r];if(!(o.dataIndex<0)){t.set(o.dataIndex,!0);for(var i=[o.node1],a=[o.node2],l=0;l<i.length;){var c=i[l];l++,e.set(c.dataIndex,!0);for(var h=0;h<c.inEdges.length;h++)t.set(c.inEdges[h].dataIndex,!0),i.push(c.inEdges[h].node1)}for(l=0;l<a.length;){var p=a[l];for(l++,e.set(p.dataIndex,!0),h=0;h<p.outEdges.length;h++)t.set(p.outEdges[h].dataIndex,!0),a.push(p.outEdges[h].node2)}}}return{edge:t.keys(),node:e.keys()}},n}(),mT=function(){function n(t,e,r){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=r??-1}return n.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n.prototype.getTrajectoryDataIndices=function(){var t=Et(),e=Et();t.set(this.dataIndex,!0);for(var r=[this.node1],o=[this.node2],i=0;i<r.length;){var a=r[i];i++,e.set(a.dataIndex,!0);for(var l=0;l<a.inEdges.length;l++)t.set(a.inEdges[l].dataIndex,!0),r.push(a.inEdges[l].node1)}for(i=0;i<o.length;){var c=o[i];for(i++,e.set(c.dataIndex,!0),l=0;l<c.outEdges.length;l++)t.set(c.outEdges[l].dataIndex,!0),o.push(c.outEdges[l].node2)}return{edge:t.keys(),node:e.keys()}},n}();function Ig(n,t){return{getValue:function(e){var r=this[n][t];return r.getStore().get(r.getDimensionIndex(e||"value"),this.dataIndex)},setVisual:function(e,r){this.dataIndex>=0&&this[n][t].setItemVisual(this.dataIndex,e,r)},getVisual:function(e){return this[n][t].getItemVisual(this.dataIndex,e)},setLayout:function(e,r){this.dataIndex>=0&&this[n][t].setItemLayout(this.dataIndex,e,r)},getLayout:function(){return this[n][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][t].getRawIndex(this.dataIndex)}}}function $2(n,t,e,r,o){for(var i=new Z2(r),a=0;a<n.length;a++)i.addNode(ht(n[a].id,n[a].name,a),a);var l=[],c=[],h=0;for(a=0;a<t.length;a++){var p=t[a],g=p.source,y=p.target;i.addEdge(g,y,h)&&(c.push(p),l.push(ht(Po(p.id,null),g+" > "+y)),h++)}var b,_=e.get("coordinateSystem");if("cartesian2d"===_||"polar"===_)b=hu(n,e);else{var w=id.get(_),S=w&&w.dimensions||[];$t(S,"value")<0&&S.concat(["value"]);var M=Qf(n,{coordDimensions:S,encodeDefine:e.getEncode()}).dimensions;(b=new Ri(M,e)).initData(n)}var A=new Ri(["value"],e);return A.initData(c,l),o&&o(b,A),zM({mainData:b,struct:i,structAttr:"graph",datas:{node:b,edge:A},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}ur(Rd,Ig("hostGraph","data")),ur(mT,Ig("hostGraph","edgeData"));var K2=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return Ce(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments);var r=this;function o(){return r._categoriesData}this.legendVisualProvider=new wc(o,o),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeOption=function(e){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(e){n.prototype.mergeDefaultAndTheme.apply(this,arguments),rh(e,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,r){var o,i=e.edges||e.links||[],a=e.data||e.nodes||[],l=this;if(a&&i){sx(o=this)&&(o.__curvenessList=[],o.__edgeMap={},z2(o));var c=$2(a,i,this,!0,function(h,p){h.wrapMethod("getItemModel",function(_){var w=l._categoriesModels[_.getShallow("category")];return w&&(w.parentModel=_.parentModel,_.parentModel=w),_});var g=gr.prototype.getModel;function y(_,w){var S=g.call(this,_,w);return S.resolveParentPath=b,S}function b(_){if(_&&("label"===_[0]||"label"===_[1])){var w=_.slice();return"label"===_[0]?w[0]="edgeLabel":"label"===_[1]&&(w[1]="edgeLabel"),w}return _}p.wrapMethod("getItemModel",function(_){return _.resolveParentPath=b,_.getModel=y,_})});return Z(c.edges,function(h){!function(p,g,y,b){if(sx(y)){var _=tv(p,g,y),w=y.__edgeMap,S=w[V2(_)];w[_]&&!S?w[_].isForward=!0:S&&w[_]&&(S.isForward=!0,w[_].isForward=!1),w[_]=w[_]||[],w[_].push(b)}}(h.node1,h.node2,this,h.dataIndex)},this),c.data}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,r,o){if("edge"===o){var i=this.getData(),a=this.getDataParams(e,o),l=i.graph.getEdgeByIndex(e),c=i.getName(l.node1.dataIndex),h=i.getName(l.node2.dataIndex),p=[];return null!=c&&p.push(c),null!=h&&p.push(h),ti("nameValue",{name:p.join(" > "),value:a.value,noValue:null==a.value})}return eS({series:this,dataIndex:e,multipleSeries:r})},t.prototype._updateCategoriesData=function(){var e=j(this.option.categories||[],function(o){return null!=o.value?o:De({value:0},o)}),r=new Ri(["value"],this);r.initData(e),this._categoriesData=r,this._categoriesModels=r.mapArray(function(o){return r.getItemModel(o)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Pr),J2={type:"graphRoam",event:"graphRoam",update:"none"},VL=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},ov=function(n){function t(e){var r=n.call(this,e)||this;return r.type="pointer",r}return Ce(t,n),t.prototype.getDefaultShape=function(){return new VL},t.prototype.buildPath=function(e,r){var o=Math.cos,i=Math.sin,a=r.r,l=r.width,c=r.angle,h=r.x-o(c)*l*(l>=a/3?1:2),p=r.y-i(c)*l*(l>=a/3?1:2);c=r.angle-Math.PI/2,e.moveTo(h,p),e.lineTo(r.x+o(c)*l,r.y+i(c)*l),e.lineTo(r.x+o(r.angle)*a,r.y+i(r.angle)*a),e.lineTo(r.x-o(c)*l,r.y-i(c)*l),e.lineTo(h,p)},t}(Yn);function iv(n,t){var e=null==n?"":n+"";return t&&(bt(t)?e=t.replace("{value}",e):Se(t)&&(e=t(n))),e}var FL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){this.group.removeAll();var l,c,h,p,g,y,i=e.get(["axisLine","lineStyle","color"]),a=(c=o,h=(l=e).get("center"),p=c.getWidth(),g=c.getHeight(),y=Math.min(p,g),{cx:Ct(h[0],c.getWidth()),cy:Ct(h[1],c.getHeight()),r:Ct(l.get("radius"),y/2)});this._renderMain(e,r,o,i,a),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,r,o,i,a){var l=this.group,c=e.get("clockwise"),h=-e.get("startAngle")/180*Math.PI,p=-e.get("endAngle")/180*Math.PI,g=e.getModel("axisLine"),y=g.get("roundCap")?yb:Ti,b=g.get("show"),_=g.getModel("lineStyle"),w=_.get("width"),S=[h,p];tf(S,!c);for(var M=(p=S[1])-(h=S[0]),A=h,I=[],N=0;b&&N<i.length;N++){var L=new y({shape:{startAngle:A,endAngle:p=h+M*Math.min(Math.max(i[N][0],0),1),cx:a.cx,cy:a.cy,clockwise:c,r0:a.r-w,r:a.r},silent:!0});L.setStyle({fill:i[N][1]}),L.setStyle(_.getLineStyle(["color","width"])),I.push(L),A=p}I.reverse(),Z(I,function(O){return l.add(O)});var R=function(O){if(O<=0)return i[0][1];var B;for(B=0;B<i.length;B++)if(i[B][0]>=O&&(0===B?0:i[B-1][0])<O)return i[B][1];return i[B-1][1]};this._renderTicks(e,r,o,R,a,h,p,c,w),this._renderTitleAndDetail(e,r,o,R,a),this._renderAnchor(e,a),this._renderPointer(e,r,o,R,a,h,p,c,w)},t.prototype._renderTicks=function(e,r,o,i,a,l,c,h,p){for(var g,y,b=this.group,_=a.cx,w=a.cy,S=a.r,M=+e.get("min"),A=+e.get("max"),I=e.getModel("splitLine"),N=e.getModel("axisTick"),L=e.getModel("axisLabel"),R=e.get("splitNumber"),O=N.get("splitNumber"),B=Ct(I.get("length"),S),G=Ct(N.get("length"),S),W=l,Y=(c-l)/R,X=Y/O,J=I.getModel("lineStyle").getLineStyle(),ne=N.getModel("lineStyle").getLineStyle(),oe=I.get("distance"),ie=0;ie<=R;ie++){if(g=Math.cos(W),y=Math.sin(W),I.get("show")){var se=new Yo({shape:{x1:g*(S-(le=oe?oe+p:p))+_,y1:y*(S-le)+w,x2:g*(S-B-le)+_,y2:y*(S-B-le)+w},style:J,silent:!0});"auto"===J.stroke&&se.setStyle({stroke:i(ie/R)}),b.add(se)}if(L.get("show")){var le=L.get("distance")+oe,pe=iv(co(ie/R*(A-M)+M),L.get("formatter")),me=i(ie/R),ve=g*(S-B-le)+_,He=y*(S-B-le)+w,nt=L.get("rotate"),Me=0;"radial"===nt?(Me=-W+2*Math.PI)>Math.PI/2&&(Me+=Math.PI):"tangential"===nt?Me=-W-Math.PI/2:dt(nt)&&(Me=nt*Math.PI/180),b.add(new Kn(0===Me?{style:Or(L,{text:pe,x:ve,y:He,verticalAlign:y<-.8?"top":y>.8?"bottom":"middle",align:g<-.4?"left":g>.4?"right":"center"},{inheritColor:me}),silent:!0}:{style:Or(L,{text:pe,x:ve,y:He,verticalAlign:"middle",align:"center"},{inheritColor:me}),silent:!0,originX:ve,originY:He,rotation:Me}))}if(N.get("show")&&ie!==R){le=(le=N.get("distance"))?le+p:p;for(var je=0;je<=O;je++){g=Math.cos(W),y=Math.sin(W);var tt=new Yo({shape:{x1:g*(S-le)+_,y1:y*(S-le)+w,x2:g*(S-G-le)+_,y2:y*(S-G-le)+w},silent:!0,style:ne});"auto"===ne.stroke&&tt.setStyle({stroke:i((ie+je/O)/R)}),b.add(tt),W+=X}W-=X}else W+=Y}},t.prototype._renderPointer=function(e,r,o,i,a,l,c,h,p){var g=this.group,y=this._data,b=this._progressEls,_=[],w=e.get(["pointer","show"]),S=e.getModel("progress"),M=S.get("show"),A=e.getData(),I=A.mapDimension("value"),N=+e.get("min"),L=+e.get("max"),R=[N,L],O=[l,c];function B(W,Y){var X,J=A.getItemModel(W).getModel("pointer"),ne=Ct(J.get("width"),a.r),oe=Ct(J.get("length"),a.r),ie=e.get(["pointer","icon"]),se=J.get("offsetCenter"),le=Ct(se[0],a.r),pe=Ct(se[1],a.r),me=J.get("keepAspect");return(X=ie?vo(ie,le-ne/2,pe-oe,ne,oe,null,me):new ov({shape:{angle:-Math.PI/2,width:ne,r:oe,x:le,y:pe}})).rotation=-(Y+Math.PI/2),X.x=a.cx,X.y=a.cy,X}function G(W,Y){var X=S.get("roundCap")?yb:Ti,J=S.get("overlap"),ne=J?S.get("width"):p/A.count(),se=new X({shape:{startAngle:l,endAngle:Y,cx:a.cx,cy:a.cy,clockwise:h,r0:J?a.r-ne:a.r-(W+1)*ne,r:J?a.r:a.r-W*ne}});return J&&(se.z2=L-A.get(I,W)%L),se}(M||w)&&(A.diff(y).add(function(W){var Y=A.get(I,W);if(w){var X=B(W,l);to(X,{rotation:-((isNaN(+Y)?O[0]:lr(Y,R,O,!0))+Math.PI/2)},e),g.add(X),A.setItemGraphicEl(W,X)}if(M){var J=G(W,l),ne=S.get("clip");to(J,{shape:{endAngle:lr(Y,R,O,ne)}},e),g.add(J),lm(e.seriesIndex,A.dataType,W,J),_[W]=J}}).update(function(W,Y){var X=A.get(I,W);if(w){var J=y.getItemGraphicEl(Y),ne=J?J.rotation:l,oe=B(W,ne);oe.rotation=ne,hr(oe,{rotation:-((isNaN(+X)?O[0]:lr(X,R,O,!0))+Math.PI/2)},e),g.add(oe),A.setItemGraphicEl(W,oe)}if(M){var ie=b[Y],se=G(W,ie?ie.shape.endAngle:l),le=S.get("clip");hr(se,{shape:{endAngle:lr(X,R,O,le)}},e),g.add(se),lm(e.seriesIndex,A.dataType,W,se),_[W]=se}}).execute(),A.each(function(W){var Y=A.getItemModel(W),X=Y.getModel("emphasis"),J=X.get("focus"),ne=X.get("blurScope"),oe=X.get("disabled");if(w){var ie=A.getItemGraphicEl(W),se=A.getItemVisual(W,"style"),le=se.fill;if(ie instanceof jo){var pe=ie.style;ie.useStyle(De({image:pe.image,x:pe.x,y:pe.y,width:pe.width,height:pe.height},se))}else ie.useStyle(se),"pointer"!==ie.type&&ie.setColor(le);ie.setStyle(Y.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===ie.style.fill&&ie.setStyle("fill",i(lr(A.get(I,W),R,[0,1],!0))),ie.z2EmphasisLift=0,Mi(ie,Y),mo(ie,J,ne,oe)}if(M){var me=_[W];me.useStyle(A.getItemVisual(W,"style")),me.setStyle(Y.getModel(["progress","itemStyle"]).getItemStyle()),me.z2EmphasisLift=0,Mi(me,Y),mo(me,J,ne,oe)}}),this._progressEls=_)},t.prototype._renderAnchor=function(e,r){var o=e.getModel("anchor");if(o.get("show")){var i=o.get("size"),a=o.get("icon"),l=o.get("offsetCenter"),c=o.get("keepAspect"),h=vo(a,r.cx-i/2+Ct(l[0],r.r),r.cy-i/2+Ct(l[1],r.r),i,i,null,c);h.z2=o.get("showAbove")?1:0,h.setStyle(o.getModel("itemStyle").getItemStyle()),this.group.add(h)}},t.prototype._renderTitleAndDetail=function(e,r,o,i,a){var l=this,c=e.getData(),h=c.mapDimension("value"),p=+e.get("min"),g=+e.get("max"),y=new on,b=[],_=[],w=e.isAnimationEnabled(),S=e.get(["pointer","showAbove"]);c.diff(this._data).add(function(M){b[M]=new Kn({silent:!0}),_[M]=new Kn({silent:!0})}).update(function(M,A){b[M]=l._titleEls[A],_[M]=l._detailEls[A]}).execute(),c.each(function(M){var A=c.getItemModel(M),I=c.get(h,M),N=new on,L=i(lr(I,[p,g],[0,1],!0)),R=A.getModel("title");if(R.get("show")){var O=R.get("offsetCenter"),B=a.cx+Ct(O[0],a.r),G=a.cy+Ct(O[1],a.r);(se=b[M]).attr({z2:S?0:2,style:Or(R,{x:B,y:G,text:c.getName(M),align:"center",verticalAlign:"middle"},{inheritColor:L})}),N.add(se)}var W=A.getModel("detail");if(W.get("show")){var Y=W.get("offsetCenter"),X=a.cx+Ct(Y[0],a.r),J=a.cy+Ct(Y[1],a.r),ne=Ct(W.get("width"),a.r),oe=Ct(W.get("height"),a.r),ie=e.get(["progress","show"])?c.getItemVisual(M,"style").fill:L,se=_[M],le=W.get("formatter");se.attr({z2:S?0:2,style:Or(W,{x:X,y:J,text:iv(I,le),width:isNaN(ne)?null:ne,height:isNaN(oe)?null:oe,align:"center",verticalAlign:"middle"},{inheritColor:ie})}),xf(se,{normal:W},I,function(pe){return iv(pe,le)}),w&&_f(se,M,c,e,{getFormattedLabel:function(pe,me,ve,He,nt,Me){return iv(Me?Me.interpolatedValue:I,le)}}),N.add(se)}y.add(N)}),this.group.add(y),this._titleEls=b,this._detailEls=_},t.type="gauge",t}(vr),GL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="itemStyle",e}return Ce(t,n),t.prototype.getInitialData=function(e,r){return Sd(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(Pr),Q2=["itemStyle","opacity"],yT=function(n){function t(e,r){var o=n.call(this)||this,i=o,a=new $i,l=new Kn;return i.setTextContent(l),o.setTextGuideLine(a),o.updateData(e,r,!0),o}return Ce(t,n),t.prototype.updateData=function(e,r,o){var i=this,a=e.hostModel,l=e.getItemModel(r),c=e.getItemLayout(r),h=l.getModel("emphasis"),p=l.get(Q2);p=p??1,o||js(i),i.useStyle(e.getItemVisual(r,"style")),i.style.lineJoin="round",o?(i.setShape({points:c.points}),i.style.opacity=0,to(i,{style:{opacity:p}},a,r)):hr(i,{style:{opacity:p},shape:{points:c.points}},a,r),Mi(i,l),this._updateLabel(e,r),mo(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},t.prototype._updateLabel=function(e,r){var o=this,i=this.getTextGuideLine(),a=o.getTextContent(),l=e.hostModel,c=e.getItemModel(r),h=e.getItemLayout(r).label,p=e.getItemVisual(r,"style"),g=p.fill;Ao(a,fo(c),{labelFetcher:e.hostModel,labelDataIndex:r,defaultOpacity:p.opacity,defaultText:e.getName(r)},{normal:{align:h.textAlign,verticalAlign:h.verticalAlign}}),o.setTextConfig({local:!0,inside:!!h.inside,insideStroke:g,outsideFill:g});var y=h.linePoints;i.setShape({points:y}),o.textGuideLineConfig={anchor:y?new pn(y[0][0],y[0][1]):null},hr(a,{style:{x:h.x,y:h.y}},l,r),a.attr({rotation:h.rotation,originX:h.x,originY:h.y,z2:10}),ng(o,rg(c),{stroke:g})},t}(Zi),eN=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.ignoreLabelLineUpdate=!0,e}return Ce(t,n),t.prototype.render=function(e,r,o){var i=e.getData(),a=this._data,l=this.group;i.diff(a).add(function(c){var h=new yT(i,c);i.setItemGraphicEl(c,h),l.add(h)}).update(function(c,h){var p=a.getItemGraphicEl(h);p.updateData(i,c),l.add(p),i.setItemGraphicEl(c,p)}).remove(function(c){vm(a.getItemGraphicEl(c),e,c)}).execute(),this._data=i},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(vr),tN=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new wc(Fe(this.getData,this),Fe(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.getInitialData=function(e,r){return Sd(this,{coordDimensions:["value"],encodeDefaulter:_t(V0,this)})},t.prototype._defaultLabelLine=function(e){rh(e,"labelLine",["show"]);var r=e.labelLine,o=e.emphasis.labelLine;r.show=r.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},t.prototype.getDataParams=function(e){var r=this.getData(),o=n.prototype.getDataParams.call(this,e),i=r.mapDimension("value"),a=r.getSum(i);return o.percent=a?+(r.get(i,e)/a*100).toFixed(2):0,o.$vars.push("percent"),o},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Pr);function Dg(n,t){n.eachSeriesByType("funnel",function(e){var ne,r=e.getData(),o=r.mapDimension("value"),i=e.get("sort"),a=(ne=t,xo(e.getBoxLayoutParams(),{width:ne.getWidth(),height:ne.getHeight()})),l=e.get("orient"),c=a.width,h=a.height,p=function(J,ne){for(var oe=J.mapDimension("value"),ie=J.mapArray(oe,function(ve){return ve}),se=[],le="ascending"===ne,pe=0,me=J.count();pe<me;pe++)se[pe]=pe;return Se(ne)?se.sort(ne):"none"!==ne&&se.sort(function(ve,He){return le?ie[ve]-ie[He]:ie[He]-ie[ve]}),se}(r,i),g=a.x,y=a.y,b="horizontal"===l?[Ct(e.get("minSize"),h),Ct(e.get("maxSize"),h)]:[Ct(e.get("minSize"),c),Ct(e.get("maxSize"),c)],_=r.getDataExtent(o),w=e.get("min"),S=e.get("max");null==w&&(w=Math.min(_[0],0)),null==S&&(S=_[1]);var M=e.get("funnelAlign"),A=e.get("gap"),I=(("horizontal"===l?c:h)-A*(r.count()-1))/r.count(),N=function(J,ne){if("horizontal"===l){var oe=lr(r.get(o,J)||0,[w,S],b,!0),ie=void 0;switch(M){case"top":ie=y;break;case"center":ie=y+(h-oe)/2;break;case"bottom":ie=y+(h-oe)}return[[ne,ie],[ne,ie+oe]]}var se,le=lr(r.get(o,J)||0,[w,S],b,!0);switch(M){case"left":se=g;break;case"center":se=g+(c-le)/2;break;case"right":se=g+c-le}return[[se,ne],[se+le,ne]]};"ascending"===i&&(I=-I,A=-A,"horizontal"===l?g+=c:y+=h,p=p.reverse());for(var L=0;L<p.length;L++){var R=p[L],O=p[L+1],B=r.getItemModel(R);if("horizontal"===l){var G=B.get(["itemStyle","width"]);null==G?G=I:(G=Ct(G,c),"ascending"===i&&(G=-G));var W=N(R,g),Y=N(O,g+G);g+=G+A,r.setItemLayout(R,{points:W.concat(Y.slice().reverse())})}else{var X=B.get(["itemStyle","height"]);null==X?X=I:(X=Ct(X,h),"ascending"===i&&(X=-X)),W=N(R,y),Y=N(O,y+X),y+=X+A,r.setItemLayout(R,{points:W.concat(Y.slice().reverse())})}}!function(J){var ne=J.hostModel.get("orient");J.each(function(oe){var ie,se,le,pe,me=J.getItemModel(oe),ve=me.getModel("label").get("position"),He=me.getModel("labelLine"),nt=J.getItemLayout(oe),Me=nt.points,je="inner"===ve||"inside"===ve||"center"===ve||"insideLeft"===ve||"insideRight"===ve;if(je)"insideLeft"===ve?(se=(Me[0][0]+Me[3][0])/2+5,le=(Me[0][1]+Me[3][1])/2,ie="left"):"insideRight"===ve?(se=(Me[1][0]+Me[2][0])/2-5,le=(Me[1][1]+Me[2][1])/2,ie="right"):(se=(Me[0][0]+Me[1][0]+Me[2][0]+Me[3][0])/4,le=(Me[0][1]+Me[1][1]+Me[2][1]+Me[3][1])/4,ie="center"),pe=[[se,le],[se,le]];else{var tt=void 0,ut=void 0,pt=void 0,St=void 0,Ze=He.get("length");"left"===ve?(ut=(Me[3][1]+Me[0][1])/2,se=(pt=(tt=(Me[3][0]+Me[0][0])/2)-Ze)-5,ie="right"):"right"===ve?(ut=(Me[1][1]+Me[2][1])/2,se=(pt=(tt=(Me[1][0]+Me[2][0])/2)+Ze)+5,ie="left"):"top"===ve?(tt=(Me[3][0]+Me[0][0])/2,le=(St=(ut=(Me[3][1]+Me[0][1])/2)-Ze)-5,ie="center"):"bottom"===ve?(tt=(Me[1][0]+Me[2][0])/2,le=(St=(ut=(Me[1][1]+Me[2][1])/2)+Ze)+5,ie="center"):"rightTop"===ve?(tt="horizontal"===ne?Me[3][0]:Me[1][0],ut="horizontal"===ne?Me[3][1]:Me[1][1],"horizontal"===ne?(le=(St=ut-Ze)-5,ie="center"):(se=(pt=tt+Ze)+5,ie="top")):"rightBottom"===ve?(tt=Me[2][0],ut=Me[2][1],"horizontal"===ne?(le=(St=ut+Ze)+5,ie="center"):(se=(pt=tt+Ze)+5,ie="bottom")):"leftTop"===ve?(tt=Me[0][0],ut="horizontal"===ne?Me[0][1]:Me[1][1],"horizontal"===ne?(le=(St=ut-Ze)-5,ie="center"):(se=(pt=tt-Ze)-5,ie="right")):"leftBottom"===ve?(tt="horizontal"===ne?Me[1][0]:Me[3][0],ut="horizontal"===ne?Me[1][1]:Me[2][1],"horizontal"===ne?(le=(St=ut+Ze)+5,ie="center"):(se=(pt=tt-Ze)-5,ie="right")):(tt=(Me[1][0]+Me[2][0])/2,ut=(Me[1][1]+Me[2][1])/2,"horizontal"===ne?(le=(St=ut+Ze)+5,ie="center"):(se=(pt=tt+Ze)+5,ie="left")),"horizontal"===ne?se=pt=tt:le=St=ut,pe=[[tt,ut],[pt,St]]}nt.label={linePoints:pe,x:se,y:le,verticalAlign:"middle",textAlign:ie,inside:je}})}(r)})}var gx=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._dataGroup=new on,e._initialized=!1,e}return Ce(t,n),t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,r,o,i){this._progressiveEls=null;var b,_,S,M,A,I,a=this._dataGroup,l=e.getData(),c=this._data,h=e.coordinateSystem,p=h.dimensions,g=yx(e);if(l.diff(c).add(function(b){vx(mx(l,a,b,p,h),l,b,g)}).update(function(b,_){var w=c.getItemGraphicEl(_),S=av(l,b,p,h);l.setItemGraphicEl(b,w),hr(w,{shape:{points:S}},e,b),js(w),vx(w,l,b,g)}).remove(function(b){var _=c.getItemGraphicEl(b);a.remove(_)}).execute(),!this._initialized){this._initialized=!0;var y=(_=e,S=(b=h).model,M=b.getRect(),A=new $n({shape:{x:M.x,y:M.y,width:M.width,height:M.height}}),I="horizontal"===S.get("layout")?"width":"height",A.setShape(I,0),to(A,{shape:{width:M.width,height:M.height}},_,function(){setTimeout(function(){a.removeClipPath()})}),A);a.setClipPath(y)}this._data=l},t.prototype.incrementalPrepareRender=function(e,r,o){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,r,o){for(var i=r.getData(),a=r.coordinateSystem,l=a.dimensions,c=yx(r),h=this._progressiveEls=[],p=e.start;p<e.end;p++){var g=mx(i,this._dataGroup,p,l,a);g.incremental=!0,vx(g,i,p,c),h.push(g)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(vr);function av(n,t,e,r){for(var o,i=[],a=0;a<e.length;a++){var l=e[a],c=n.get(n.mapDimension(l),t);o=c,("category"===r.getAxis(l).type?null==o:null==o||isNaN(o))||i.push(r.dataToPoint(c,l))}return i}function mx(n,t,e,r,o){var i=av(n,e,r,o),a=new $i({shape:{points:i},z2:10});return t.add(a),n.setItemGraphicEl(e,a),a}function yx(n){var t=n.get("smooth",!0);return!0===t&&(t=.3),lt(t=ul(t))&&(t=0),{smooth:t}}function vx(n,t,e,r){n.useStyle(t.getItemVisual(e,"style")),n.style.fill=null,n.setShape("smooth",r.smooth);var o=t.getItemModel(e),i=o.getModel("emphasis");Mi(n,o,"lineStyle"),mo(n,i.get("focus"),i.get("blurScope"),i.get("disabled"))}var bx=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return Ce(t,n),t.prototype.getInitialData=function(e,r){return hu(null,this,{useEncodeDefaulter:Fe(nN,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var r=this.coordinateSystem,o=this.getData(),i=[];return r.eachActiveState(o,function(a,l){e===a&&i.push(o.getRawIndex(l))}),i},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(Pr);function nN(n){var t=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(t){var e={};return Z(t.dimensions,function(r){var o=+r.replace("dim","");e[r]=o}),e}}var rN=["lineStyle","opacity"],vT={seriesType:"parallel",reset:function(n,t){var e=n.coordinateSystem,r={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(o,i){e.eachActiveState(i,function(a,l){var c=r[a];if("normal"===a&&i.hasItemOption){var h=i.getItemModel(l).get(rN,!0);null!=h&&(c=h)}i.ensureUniqueItemVisual(l,"style").opacity=c},o.start,o.end)}}}};function oN(n){(function(t){if(!t.parallel){var e=!1;Z(t.series,function(r){r&&"parallel"===r.type&&(e=!0)}),e&&(t.parallel=[{}])}})(n),function(t){Z(Dr(t.parallelAxis),function(r){if(Ft(r)){var o=r.parallelIndex||0,i=Dr(t.parallel)[o];i&&i.parallelAxisDefault&&Ve(r,i.parallelAxisDefault,!1)}})}(n)}var HL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){this._model=e,this._api=o,this._handlers||(this._handlers={},Z(xx,function(i,a){o.getZr().on(a,this._handlers[a]=Fe(i,this))},this)),Fh(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,r){Hf(this,"_throttledDispatchExpand"),Z(this._handlers,function(o,i){r.getZr().off(i,o)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(De({type:"parallelAxisExpand"},e))},t.type="parallel",t}(Wr),xx={mousedown:function(n){_x(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var t=this._mouseDownPoint;if(_x(this,"click")&&t){var e=[n.offsetX,n.offsetY];if(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)>5)return;var r=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);"none"!==r.behavior&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!this._mouseDownPoint&&_x(this,"mousemove")){var t=this._model,e=t.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),r=e.behavior;"jump"===r&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===r?null:{axisExpandWindow:e.axisExpandWindow,animation:"jump"===r?null:{duration:0}})}}};function _x(n,t){var e=n._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===t}var iN=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){e&&Ve(this.option,e,!0),this._initDimensions()},t.prototype.contains=function(e,r){var o=e.get("parallelIndex");return null!=o&&r.getComponent("parallel",o)===this},t.prototype.setAxisExpand=function(e){Z(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){e.hasOwnProperty(r)&&(this.option[r]=e[r])},this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],r=this.parallelAxisIndex=[];Z(Xn(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(o){return(o.get("parallelIndex")||0)===this.componentIndex},this),function(o){e.push("dim"+o.get("dim")),r.push(o.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(wn),aN=function(n){function t(e,r,o,i,a){var l=n.call(this,e,r,o)||this;return l.type=i||"value",l.axisIndex=a,l}return Ce(t,n),t.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},t}(Bo);function Od(n,t,e,r,o,i){n=n||0;var a=e[1]-e[0];if(null!=o&&(o=gp(o,[0,a])),null!=i&&(i=Math.max(i,o??0)),"all"===r){var l=Math.abs(t[1]-t[0]);l=gp(l,[0,a]),o=i=gp(l,[o,i]),r=0}t[0]=gp(t[0],e),t[1]=gp(t[1],e);var c=Sx(t,r);t[r]+=n;var h,p=o||0,g=e.slice();return c.sign<0?g[0]+=p:g[1]-=p,t[r]=gp(t[r],g),h=Sx(t,r),null!=o&&(h.sign!==c.sign||h.span<o)&&(t[1-r]=t[r]+c.sign*o),h=Sx(t,r),null!=i&&h.span>i&&(t[1-r]=t[r]+h.sign*i),t}function Sx(n,t){var e=n[t]-n[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function gp(n,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,n))}var Cx=Z,sN=Math.min,lN=Math.max,uN=Math.floor,WL=Math.ceil,cN=co,UL=Math.PI,dN=function(){function n(t,e,r){this.type="parallel",this._axesMap=Et(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,r)}return n.prototype._init=function(t,e,r){var i=t.parallelAxisIndex;Cx(t.dimensions,function(a,l){var c=i[l],h=e.getComponent("parallelAxis",c),p=this._axesMap.set(a,new aN(a,yy(h),[0,0],h.get("type"),c));p.onBand="category"===p.type&&h.get("boundaryGap"),p.inverse=h.get("inverse"),h.axis=p,p.model=h,p.coordinateSystem=h.coordinateSystem=this},this)},n.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},n.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),r=e.axisBase,o=e.layoutBase,i=e.pixelDimIndex,a=t[1-i],l=t[i];return a>=r&&a<=r+e.axisLength&&l>=o&&l<=o+e.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(t,e){e.eachSeries(function(r){if(t.contains(r,e)){var o=r.getData();Cx(this.dimensions,function(i){var a=this._axesMap.get(i);a.scale.unionExtentFromData(o,o.mapDimension(i)),Zh(a.scale,a.model)},this)}},this)},n.prototype.resize=function(t,e){this._rect=xo(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var t,e=this._model,r=this._rect,o=["x","y"],i=["width","height"],a=e.get("layout"),l="horizontal"===a?0:1,c=r[i[l]],h=[0,c],p=this.dimensions.length,g=Mx(e.get("axisExpandWidth"),h),y=Mx(e.get("axisExpandCount")||0,[0,p]),b=e.get("axisExpandable")&&p>3&&p>y&&y>1&&g>0&&c>0,_=e.get("axisExpandWindow");_?(t=Mx(_[1]-_[0],h),_[1]=_[0]+t):(t=Mx(g*(y-1),h),(_=[g*(e.get("axisExpandCenter")||uN(p/2))-t/2])[1]=_[0]+t);var w=(c-t)/(p-y);w<3&&(w=0);var S=[uN(cN(_[0]/g,1))+1,WL(cN(_[1]/g,1))-1];return{layout:a,pixelDimIndex:l,layoutBase:r[o[l]],layoutLength:c,axisBase:r[o[1-l]],axisLength:r[i[1-l]],axisExpandable:b,axisExpandWidth:g,axisCollapseWidth:w,axisExpandWindow:_,axisCount:p,winInnerIndices:S,axisExpandWindow0Pos:w/g*_[0]}},n.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,r=this.dimensions,o=this._makeLayoutInfo(),i=o.layout;e.each(function(a){var l=[0,o.axisLength],c=a.inverse?1:0;a.setExtent(l[c],l[1-c])}),Cx(r,function(a,l){var c=(o.axisExpandable?bT:jL)(l,o),h={horizontal:{x:c.position,y:o.axisLength},vertical:{x:0,y:c.position}},g=[h[i].x+t.x,h[i].y+t.y],y={horizontal:UL/2,vertical:0}[i],b=[1,0,0,1,0,0];Eo(b,b,y),es(b,b,g),this._axesLayout[a]={position:g,rotation:y,transform:b,axisNameAvailableWidth:c.axisNameAvailableWidth,axisLabelShow:c.axisLabelShow,nameTruncateMaxWidth:c.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(t){return this._axesMap.get(t)},n.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},n.prototype.eachActiveState=function(t,e,r,o){null==r&&(r=0),null==o&&(o=t.count());var i=this._axesMap,a=this.dimensions,l=[],c=[];Z(a,function(w){l.push(t.mapDimension(w)),c.push(i.get(w).model)});for(var h=this.hasAxisBrushed(),p=r;p<o;p++){var g=void 0;if(h){g="active";for(var y=t.getValues(l,p),b=0,_=a.length;b<_;b++)if("inactive"===c[b].getActiveState(y[b])){g="inactive";break}}else g="normal";e(g,p)}},n.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,r=!1,o=0,i=t.length;o<i;o++)"normal"!==e.get(t[o]).model.getActiveState()&&(r=!0);return r},n.prototype.axisCoordToPoint=function(t,e){return gl([t,0],this._axesLayout[e].transform)},n.prototype.getAxisLayout=function(t){return jt(this._axesLayout[t])},n.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),r=e.pixelDimIndex,o=e.axisExpandWindow.slice(),i=o[1]-o[0],a=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:o};var l,c=t[r]-e.layoutBase-e.axisExpandWindow0Pos,h="slide",p=e.axisCollapseWidth,g=this._model.get("axisExpandSlideTriggerArea"),y=null!=g[0];if(p)y&&p&&c<i*g[0]?(h="jump",l=c-i*g[2]):y&&p&&c>i*(1-g[0])?(h="jump",l=c-i*(1-g[2])):(l=c-i*g[1])>=0&&(l=c-i*(1-g[1]))<=0&&(l=0),(l*=e.axisExpandWidth/p)?Od(l,o,a,"all"):h="none";else{var b=o[1]-o[0];(o=[lN(0,a[1]*c/b-b/2)])[1]=sN(a[1],o[0]+b),o[0]=o[1]-b}return{axisExpandWindow:o,behavior:h}},n}();function Mx(n,t){return sN(lN(n,t[0]),t[1])}function jL(n,t){var e=t.layoutLength/(t.axisCount-1);return{position:e*n,axisNameAvailableWidth:e,axisLabelShow:!0}}function bT(n,t){var e,r,i=t.axisExpandWidth,l=t.axisCollapseWidth,c=t.winInnerIndices,h=l,p=!1;return n<c[0]?(e=n*l,r=l):n<=c[1]?(e=t.axisExpandWindow0Pos+n*i-t.axisExpandWindow[0],h=i,p=!0):(e=t.layoutLength-(t.axisCount-1-n)*l,r=l),{position:e,axisNameAvailableWidth:h,axisLabelShow:p,nameTruncateMaxWidth:r}}var YL={create:function(n,t){var e=[];return n.eachComponent("parallel",function(r,o){var i=new dN(r,n,t);i.name="parallel_"+o,i.resize(r,t),r.coordinateSystem=i,i.model=r,e.push(i)}),n.eachSeries(function(r){if("parallel"===r.get("coordinateSystem")){var o=r.getReferringComponents("parallel",Mo).models[0];r.coordinateSystem=o.coordinateSystem}}),e}},sv=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.activeIntervals=[],e}return Ce(t,n),t.prototype.getAreaSelectStyle=function(){return Xu([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var r=this.activeIntervals=jt(e);if(r)for(var o=r.length-1;o>=0;o--)ds(r[o])},t.prototype.getActiveState=function(e){var r=this.activeIntervals;if(!r.length)return"normal";if(null==e||isNaN(+e))return"inactive";if(1===r.length){var o=r[0];if(o[0]<=e&&e<=o[1])return"active"}else for(var i=0,a=r.length;i<a;i++)if(r[i][0]<=e&&e<=r[i][1])return"active";return"inactive"},t}(wn);ur(sv,Kh);var Pd=!0,Ng=Math.min,Bd=Math.max,hN=Math.pow,Tx="globalPan",pN={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},XL={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Ax={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},fN=0,kx=function(n){function t(e){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=e,r.group=new on,r._uid="brushController_"+fN++,Z(ZL,function(o,i){this._handlers[i]=Fe(o,this)},r),r}return Ce(t,n),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var i,a,r=this._zr;this._enableGlobalPan||(i=Tx,a=this._uid,Ob(r)[i]=a),Z(this._handlers,function(o,i){r.on(i,o)}),this._brushType=e.brushType,this._brushOption=Ve(jt(Ax),e,!0)},t.prototype._doDisableBrush=function(){var o,i,a,e=this._zr;o=Tx,i=this._uid,(a=Ob(e))[o]===i&&(a[o]=null),Z(this._handlers,function(r,o){e.off(o,r)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var r=this._panels={};Z(e,function(o){r[o.panelId]=jt(o)})}else this._panels=null;return this},t.prototype.mount=function(e){this._enableGlobalPan=(e=e||{}).enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=r.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=j(e,function(h){return Ve(jt(Ax),h,!0)});var r=this._covers,o=this._covers=[],i=this,a=this._creatingCover;return new Js(r,e,function(h,p){return l(h.__brushOption,p)},l).add(c).update(c).remove(function(h){r[h]!==a&&i.group.remove(r[h])}).execute(),this;function l(h,p){return(null!=h.id?h.id:"\0-brush-index-"+p)+"-"+h.brushType}function c(h,p){var g=e[h];if(null!=p&&r[p]===a)o[h]=r[p];else{var y=o[h]=null!=p?(r[p].__brushOption=g,r[p]):gN(i,xT(i,g));Ix(i,y)}}},t.prototype.unmount=function(){return this.enableBrush(!1),CT(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(xn);function xT(n,t){var e=Lx[t.brushType].createCover(n,t);return e.__brushOption=t,_T(e,t),n.group.add(e),e}function gN(n,t){var e=wT(t);return e.endCreating&&(e.endCreating(n,t),_T(t,t.__brushOption)),t}function zd(n,t){var e=t.__brushOption;wT(t).updateCoverShape(n,t,e.range,e)}function _T(n,t){var e=t.z;null==e&&(e=1e4),n.traverse(function(r){r.z=e,r.z2=e})}function Ix(n,t){wT(t).updateCommon(n,t),zd(n,t)}function wT(n){return Lx[n.__brushOption.brushType]}function Dx(n,t,e){var r,o=n._panels;if(!o)return Pd;var i=n._transform;return Z(o,function(a){a.isTargetByCursor(t,e,i)&&(r=a)}),r}function ST(n,t){var e=n._panels;if(!e)return Pd;var r=t.__brushOption.panelId;return null!=r?e[r]:Pd}function CT(n){var t=n._covers,e=t.length;return Z(t,function(r){n.group.remove(r)},n),t.length=0,!!e}function Ml(n,t){var e=j(n._covers,function(r){var o=r.__brushOption,i=jt(o.range);return{brushType:o.brushType,panelId:o.panelId,range:i}});n.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function mN(n){var t=n.length-1;return t<0&&(t=0),[n[0],n[t]]}function Nx(n,t,e,r){var o=new on;return o.add(new $n({name:"main",style:TT(e),silent:!0,draggable:!0,cursor:"move",drift:_t(bN,n,t,o,["n","s","w","e"]),ondragend:_t(Ml,t,{isEnd:!0})})),Z(r,function(i){o.add(new $n({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:_t(bN,n,t,o,i),ondragend:_t(Ml,t,{isEnd:!0})}))}),o}function yN(n,t,e,r){var o=r.brushStyle.lineWidth||0,i=Bd(o,6),a=e[0][0],l=e[1][0],c=a-o/2,h=l-o/2,p=e[0][1],g=e[1][1],y=p-i+o/2,b=g-i+o/2,_=p-a,w=g-l,S=_+o,M=w+o;Ac(n,t,"main",a,l,_,w),r.transformable&&(Ac(n,t,"w",c,h,i,M),Ac(n,t,"e",y,h,i,M),Ac(n,t,"n",c,h,S,i),Ac(n,t,"s",c,b,S,i),Ac(n,t,"nw",c,h,i,i),Ac(n,t,"ne",y,h,i,i),Ac(n,t,"sw",c,b,i,i),Ac(n,t,"se",y,b,i,i))}function MT(n,t){var e=t.__brushOption,r=e.transformable,o=t.childAt(0);o.useStyle(TT(e)),o.attr({silent:!r,cursor:r?"move":"default"}),Z([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var c,h,p,a=t.childOfName(i.join("")),l=1===i.length?Eg(n,i[0]):(("e"===(p=[Eg(c=n,(h=i)[0]),Eg(c,h[1])])[0]||"w"===p[0])&&p.reverse(),p.join(""));a&&a.attr({silent:!r,invisible:!r,cursor:r?XL[l]+"-resize":null})})}function Ac(n,t,e,r,o,i,a){var c,h,p,l=t.childOfName(e);l&&l.setShape((c=kT(n,t,[[r,o],[r+i,o+a]]),{x:h=Ng(c[0][0],c[1][0]),y:p=Ng(c[0][1],c[1][1]),width:Bd(c[0][0],c[1][0])-h,height:Bd(c[0][1],c[1][1])-p}))}function TT(n){return Pe({strokeNoScale:!0},n.brushStyle)}function vN(n,t,e,r){var o=[Ng(n,e),Ng(t,r)],i=[Bd(n,e),Bd(t,r)];return[[o[0],i[0]],[o[1],i[1]]]}function Eg(n,t){return{left:"w",right:"e",top:"n",bottom:"s"}[w0({w:"left",e:"right",n:"top",s:"bottom"}[t],Va(n.group))]}function bN(n,t,e,r,o,i){var a=e.__brushOption,l=n.toRectRange(a.range),c=AT(t,o,i);Z(r,function(h){var p=pN[h];l[p[0]][p[1]]+=c[p[0]]}),a.range=n.fromRectRange(vN(l[0][0],l[1][0],l[0][1],l[1][1])),Ix(t,e),Ml(t,{isEnd:!1})}function qL(n,t,e,r){var o=t.__brushOption.range,i=AT(n,e,r);Z(o,function(a){a[0]+=i[0],a[1]+=i[1]}),Ix(n,t),Ml(n,{isEnd:!1})}function AT(n,t,e){var r=n.group,o=r.transformCoordToLocal(t,e),i=r.transformCoordToLocal(0,0);return[o[0]-i[0],o[1]-i[1]]}function kT(n,t,e){var r=ST(n,t);return r&&r!==Pd?r.clipPath(e,n._transform):jt(e)}function IT(n){var t=n.event;t.preventDefault&&t.preventDefault()}function DT(n,t,e){return n.childOfName("main").contain(t,e)}function Ex(n,t,e,r){var o,i=n._creatingCover,a=n._creatingPanel,l=n._brushOption;if(n._track.push(e.slice()),function(p){var g=p._track;if(!g.length)return!1;var y=g[g.length-1],b=g[0],_=y[0]-b[0],w=y[1]-b[1];return hN(_*_+w*w,.5)>6}(n)||i){if(a&&!i){"single"===l.brushMode&&CT(n);var c=jt(l);c.brushType=NT(c.brushType,a),c.panelId=a===Pd?null:a.panelId,i=n._creatingCover=xT(n,c),n._covers.push(i)}if(i){var h=Lx[NT(n._brushType,a)];i.__brushOption.range=h.getCreatingRange(kT(n,i,n._track)),r&&(gN(n,i),h.updateCommon(n,i)),zd(n,i),o={isEnd:r}}}else r&&"single"===l.brushMode&&l.removeOnClick&&Dx(n,t,e)&&CT(n)&&(o={isEnd:r,removeOnClick:!0});return o}function NT(n,t){return"auto"===n?t.defaultBrushType:n}var ZL={mousedown:function(n){if(this._dragging)ET(this,n);else if(!n.target||!n.target.draggable){IT(n);var t=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null,(this._creatingPanel=Dx(this,n,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(n){var r=this.group.transformCoordToLocal(n.offsetX,n.offsetY);if(function(i,a,l){if(i._brushType&&(w=a.offsetY,S=i._zr,!((_=a.offsetX)<0||_>S.getWidth()||w<0||w>S.getHeight()))){var c=i._zr,h=i._covers,p=Dx(i,a,l);if(!i._dragging)for(var g=0;g<h.length;g++){var y=h[g].__brushOption;if(p&&(p===Pd||y.panelId===p.panelId)&&Lx[y.brushType].contain(h[g],l[0],l[1]))return}p&&c.setCursorStyle("crosshair")}var _,w,S}(this,n,r),this._dragging){IT(n);var o=Ex(this,n,r,!1);o&&Ml(this,o)}},mouseup:function(n){ET(this,n)}};function ET(n,t){if(n._dragging){IT(t);var o=n.group.transformCoordToLocal(t.offsetX,t.offsetY),i=Ex(n,t,o,!0);n._dragging=!1,n._track=[],n._creatingCover=null,i&&Ml(n,i)}}var Lx={lineX:xN(0),lineY:xN(1),rect:{createCover:function(n,t){function e(r){return r}return Nx({toRectRange:e,fromRectRange:e},n,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var t=mN(n);return vN(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(n,t,e,r){yN(n,t,e,r)},updateCommon:MT,contain:DT},polygon:{createCover:function(n,t){var e=new on;return e.add(new $i({name:"main",style:TT(t),silent:!0})),e},getCreatingRange:function(n){return n},endCreating:function(n,t){t.remove(t.childAt(0)),t.add(new Zi({name:"main",draggable:!0,drift:_t(qL,n,t),ondragend:_t(Ml,n,{isEnd:!0})}))},updateCoverShape:function(n,t,e,r){t.childAt(0).setShape({points:kT(n,t,e)})},updateCommon:MT,contain:DT}};function xN(n){return{createCover:function(t,e){return Nx({toRectRange:function(r){var o=[r,[0,100]];return n&&o.reverse(),o},fromRectRange:function(r){return r[n]}},t,e,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(t){var e=mN(t);return[Ng(e[0][n],e[1][n]),Bd(e[0][n],e[1][n])]},updateCoverShape:function(t,e,r,o){var i,a=ST(t,e);if(a!==Pd&&a.getLinearBrushOtherExtent)i=a.getLinearBrushOtherExtent(n);else{var l=t._zr;i=[0,[l.getWidth(),l.getHeight()][1-n]]}var c=[r,i];n&&c.reverse(),yN(t,e,c,o)},updateCommon:MT,contain:DT}}function LT(n){return n=lv(n),function(t){return nw(t,n)}}function RT(n,t){return n=lv(n),function(e){var r=t??e,i=r?n.x:n.y;return[i,i+((r?n.width:n.height)||0)]}}function Vd(n,t,e){var r=lv(n);return function(o,i){return r.contain(i[0],i[1])&&!sp(o,t,e)}}function lv(n){return Kt.create(n)}var Rx=["axisLine","axisTickLabel","axisName"],mp=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(e,r){n.prototype.init.apply(this,arguments),(this._brushController=new kx(r.getZr())).on("brush",Fe(this._onBrush,this))},t.prototype.render=function(e,r,o,i){if(_=e,!(S=i)||"axisAreaSelect"!==S.type||r.findComponents({mainType:"parallelAxis",query:S})[0]!==_){this.axisModel=e,this.api=o,this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new on,this.group.add(this._axisGroup),e.get("show")){var l=function(_,w){return w.getComponent("parallel",_.get("parallelIndex"))}(e,r),c=l.coordinateSystem,h=e.getAreaSelectStyle(),p=h.width,y=De({strokeContainThreshold:p},c.getAxisLayout(e.axis.dim)),b=new ta(e,y);Z(Rx,b.add,b),this._axisGroup.add(b.getGroup()),this._refreshBrushController(y,h,e,l,p,o),vf(a,this._axisGroup,e)}}var _,S},t.prototype._refreshBrushController=function(e,r,o,i,a,l){var y,b,c=o.axis.getExtent(),h=c[1]-c[0],p=Math.min(30,.1*Math.abs(h)),g=Kt.create({x:c[0],y:-a/2,width:h,height:a});g.x-=p,g.width+=2*p,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:LT(g),isTargetByCursor:Vd(g,l,i),getLinearBrushOtherExtent:RT(g,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers((b=(y=o).axis,j(y.activeIntervals,function(_){return{brushType:"lineX",panelId:"pl",range:[b.dataToCoord(_[0],!0),b.dataToCoord(_[1],!0)]}})))},t.prototype._onBrush=function(e){var o=this.axisModel,i=o.axis,a=j(e.areas,function(l){return[i.coordToData(l.range[0],!0),i.coordToData(l.range[1],!0)]});(!o.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:o.id,intervals:a})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(Wr),_N={type:"axisAreaSelect",event:"axisAreaSelected"},$L={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function wN(n){n.registerComponentView(HL),n.registerComponentModel(iN),n.registerCoordinateSystem("parallel",YL),n.registerPreprocessor(oN),n.registerComponentModel(sv),n.registerComponentView(mp),gg(n,"parallel",sv,$L),function(t){t.registerAction(_N,function(e,r){r.eachComponent({mainType:"parallelAxis",query:e},function(o){o.axis.model.setActiveIntervals(e.intervals)})}),t.registerAction("parallelAxisExpand",function(e,r){r.eachComponent({mainType:"parallel",query:e},function(o){o.setAxisExpand(e)})})}(n)}var OT=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},uv=function(n){function t(e){return n.call(this,e)||this}return Ce(t,n),t.prototype.getDefaultShape=function(){return new OT},t.prototype.buildPath=function(e,r){var o=r.extent;e.moveTo(r.x1,r.y1),e.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),"vertical"===r.orient?(e.lineTo(r.x2+o,r.y2),e.bezierCurveTo(r.cpx2+o,r.cpy2,r.cpx1+o,r.cpy1,r.x1+o,r.y1)):(e.lineTo(r.x2,r.y2+o),e.bezierCurveTo(r.cpx2,r.cpy2+o,r.cpx1,r.cpy1+o,r.x1,r.y1+o)),e.closePath()},t.prototype.highlight=function(){Ku(this)},t.prototype.downplay=function(){Ql(this)},t}(Yn),PT=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._focusAdjacencyDisabled=!1,e}return Ce(t,n),t.prototype.render=function(e,r,o){var _,w,M,i=this,a=e.getGraph(),l=this.group,c=e.layoutInfo,h=c.width,p=c.height,g=e.getData(),y=e.getData("edge"),b=e.get("orient");this._model=e,l.removeAll(),l.x=c.x,l.y=c.y,a.eachEdge(function(_){var w=new uv,S=cn(w);S.dataIndex=_.dataIndex,S.seriesIndex=e.seriesIndex,S.dataType="edge";var M,A,I,N,L,R,O,B,G=_.getModel(),W=G.getModel("lineStyle"),Y=W.get("curveness"),X=_.node1.getLayout(),J=_.node1.getModel(),ne=J.get("localX"),oe=J.get("localY"),ie=_.node2.getLayout(),se=_.node2.getModel(),le=se.get("localX"),pe=se.get("localY"),me=_.getLayout();w.shape.extent=Math.max(1,me.dy),w.shape.orient=b,"vertical"===b?(L=M=(null!=ne?ne*h:X.x)+me.sy,R=(A=(null!=oe?oe*p:X.y)+X.dy)*(1-Y)+(N=null!=pe?pe*p:ie.y)*Y,O=I=(null!=le?le*h:ie.x)+me.ty,B=A*Y+N*(1-Y)):(L=(M=(null!=ne?ne*h:X.x)+X.dx)*(1-Y)+(I=null!=le?le*h:ie.x)*Y,R=A=(null!=oe?oe*p:X.y)+me.sy,O=M*Y+I*(1-Y),B=N=(null!=pe?pe*p:ie.y)+me.ty),w.setShape({x1:M,y1:A,x2:I,y2:N,cpx1:L,cpy1:R,cpx2:O,cpy2:B}),w.useStyle(W.getItemStyle()),cv(w.style,b,_);var ve=""+G.get("value"),He=fo(G,"edgeLabel");Ao(w,He,{labelFetcher:{getFormattedLabel:function(je,tt,ut,pt,St,Ze){return e.getFormattedLabel(je,tt,"edge",pt,An(St,He.normal&&He.normal.get("formatter"),ve),Ze)}},labelDataIndex:_.dataIndex,defaultText:ve}),w.setTextConfig({position:"inside"});var nt=G.getModel("emphasis");Mi(w,G,"lineStyle",function(je){var tt=je.getItemStyle();return cv(tt,b,_),tt}),l.add(w),y.setItemGraphicEl(_.dataIndex,w);var Me=nt.get("focus");mo(w,"adjacency"===Me?_.getAdjacentDataIndices():"trajectory"===Me?_.getTrajectoryDataIndices():Me,nt.get("blurScope"),nt.get("disabled"))}),a.eachNode(function(_){var w=_.getLayout(),S=_.getModel(),M=S.get("localX"),A=S.get("localY"),I=S.getModel("emphasis"),N=S.get(["itemStyle","borderRadius"])||0,L=new $n({shape:{x:null!=M?M*h:w.x,y:null!=A?A*p:w.y,width:w.dx,height:w.dy,r:N},style:S.getModel("itemStyle").getItemStyle(),z2:10});Ao(L,fo(S),{labelFetcher:{getFormattedLabel:function(O,B){return e.getFormattedLabel(O,B,"node")}},labelDataIndex:_.dataIndex,defaultText:_.id}),L.disableLabelAnimation=!0,L.setStyle("fill",_.getVisual("color")),L.setStyle("decal",_.getVisual("style").decal),Mi(L,S),l.add(L),g.setItemGraphicEl(_.dataIndex,L),cn(L).dataType="node";var R=I.get("focus");mo(L,"adjacency"===R?_.getAdjacentDataIndices():"trajectory"===R?_.getTrajectoryDataIndices():R,I.get("blurScope"),I.get("disabled"))}),g.eachItemGraphicEl(function(_,w){g.getItemModel(w).get("draggable")&&(_.drift=function(S,M){i._focusAdjacencyDisabled=!0,this.shape.x+=S,this.shape.y+=M,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:g.getRawIndex(w),localX:this.shape.x/h,localY:this.shape.y/p})},_.ondragend=function(){i._focusAdjacencyDisabled=!1},_.draggable=!0,_.cursor="move")}),!this._data&&e.isAnimationEnabled()&&l.setClipPath((_=l.getBoundingRect(),w=e,to(M=new $n({shape:{x:_.x-10,y:_.y-10,width:0,height:_.height+20}}),{shape:{width:_.width+20}},w,function(){l.removeClipPath()}),M)),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(vr);function cv(n,t,e){switch(n.fill){case"source":n.fill=e.node1.getVisual("color"),n.decal=e.node1.getVisual("style").decal;break;case"target":n.fill=e.node2.getVisual("color"),n.decal=e.node2.getVisual("style").decal;break;case"gradient":var r=e.node1.getVisual("color"),o=e.node2.getVisual("color");bt(r)&&bt(o)&&(n.fill=new gf(0,0,+("horizontal"===t),+("vertical"===t),[{color:r,offset:0},{color:o,offset:1}]))}}var yp=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.getInitialData=function(e,r){var o=e.edges||e.links,i=e.data||e.nodes,a=e.levels;this.levelModels=[];for(var l=this.levelModels,c=0;c<a.length;c++)null!=a[c].depth&&a[c].depth>=0&&(l[a[c].depth]=new gr(a[c],this,r));if(i&&o)return $2(i,o,this,!0,function(p,g){p.wrapMethod("getItemModel",function(y,b){var _=y.parentModel,w=_.getData().getItemLayout(b);if(w){var M=_.levelModels[w.depth];M&&(y.parentModel=M)}return y}),g.wrapMethod("getItemModel",function(y,b){var _=y.parentModel,w=_.getGraph().getEdgeByIndex(b).node1.getLayout();if(w){var M=_.levelModels[w.depth];M&&(y.parentModel=M)}return y})}).data},t.prototype.setNodePosition=function(e,r){var o=(this.option.data||this.option.nodes)[e];o.localX=r[0],o.localY=r[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,r,o){function i(g){return isNaN(g)||null==g}if("edge"===o){var a=this.getDataParams(e,o),l=a.data,c=a.value;return ti("nameValue",{name:l.source+" -- "+l.target,value:c,noValue:i(c)})}var h=this.getGraph().getNodeByIndex(e).getLayout().value,p=this.getDataParams(e,o).data.name;return ti("nameValue",{name:null!=p?p+"":null,value:h,noValue:i(h)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(e,r){var o=n.prototype.getDataParams.call(this,e,r);if(null==o.value&&"node"===r){var i=this.getGraph().getNodeByIndex(e).getLayout().value;o.value=i}return o},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(Pr);function Ox(n,t){n.eachSeriesByType("sankey",function(e){var y,r=e.get("nodeWidth"),o=e.get("nodeGap"),i=(y=t,xo(e.getBoxLayoutParams(),{width:y.getWidth(),height:y.getHeight()}));e.layoutInfo=i;var a=i.width,l=i.height,c=e.getGraph(),h=c.nodes,p=c.edges;Z(h,function(y){var b=wu(y.outEdges,dv),_=wu(y.inEdges,dv),w=y.getValue()||0,S=Math.max(b,_,w);y.setLayout({value:S},!0)}),function(g,y,b,_,w,S,M,A,I){var N,R;(function(N,L,R,O,B,G,W){for(var Y=[],X=[],J=[],ne=[],oe=0,ie=0;ie<L.length;ie++)Y[ie]=1;for(ie=0;ie<N.length;ie++)X[ie]=N[ie].inEdges.length,0===X[ie]&&J.push(N[ie]);for(var se=-1;J.length;){for(var le=0;le<J.length;le++){var pe=J[le],me=pe.hostGraph.data.getRawDataItem(pe.dataIndex),ve=null!=me.depth&&me.depth>=0;ve&&me.depth>se&&(se=me.depth),pe.setLayout({depth:ve?me.depth:oe},!0),pe.setLayout("vertical"===G?{dy:R}:{dx:R},!0);for(var He=0;He<pe.outEdges.length;He++){var nt=pe.outEdges[He];Y[L.indexOf(nt)]=0;var Me=nt.node2;0==--X[N.indexOf(Me)]&&ne.indexOf(Me)<0&&ne.push(Me)}}++oe,J=ne,ne=[]}for(ie=0;ie<Y.length;ie++)if(1===Y[ie])throw new Error("Sankey is a DAG, the original data has cycle!");var pt,St,je=se>oe-1?se:oe-1;W&&"left"!==W&&function(ut,pt,St,Ze){if("right"===pt){for(var yt=[],Vt=ut,mn=0;Vt.length;){for(var Dn=0;Dn<Vt.length;Dn++){var Tr=Vt[Dn];Tr.setLayout({skNodeHeight:mn},!0);for(var Vn=0;Vn<Tr.inEdges.length;Vn++){var nr=Tr.inEdges[Vn];yt.indexOf(nr.node1)<0&&yt.push(nr.node1)}}Vt=yt,yt=[],++mn}Z(ut,function(wr){BT(wr)||wr.setLayout({depth:Math.max(0,Ze-wr.getLayout().skNodeHeight)},!0)})}else"justify"===pt&&(oo=Ze,Z(ut,function(io){BT(io)||io.outEdges.length||io.setLayout({depth:oo},!0)}));var oo}(N,W,0,je),pt="vertical"===G?(B-R)/je:(O-R)/je,St=G,Z(N,function(Ze){var yt=Ze.getLayout().depth*pt;Ze.setLayout("vertical"===St?{y:yt}:{x:yt},!0)})})(g,y,b,w,S,A,I),function(N,L,R,O,B,G,W){var oe,ie,se,Y=(oe=[],ie="vertical"===W?"y":"x",(se=oh(N,function(le){return le.getLayout()[ie]})).keys.sort(function(le,pe){return le-pe}),Z(se.keys,function(le){oe.push(se.buckets.get(le))}),oe);(function(J,ne,oe,ie,se,le){var pe=1/0;Z(J,function(me){var ve=me.length,He=0;Z(me,function(Me){He+=Me.getLayout().value});var nt="vertical"===le?(ie-(ve-1)*se)/He:(oe-(ve-1)*se)/He;nt<pe&&(pe=nt)}),Z(J,function(me){Z(me,function(ve,He){var nt=ve.getLayout().value*pe;"vertical"===le?(ve.setLayout({x:He},!0),ve.setLayout({dx:nt},!0)):(ve.setLayout({y:He},!0),ve.setLayout({dy:nt},!0))})}),Z(ne,function(me){var ve=+me.getValue()*pe;me.setLayout({dy:ve},!0)})})(Y,L,R,O,B,W),Px(Y,B,R,O,W);for(var X=1;G>0;G--)SN(Y,X*=.99,W),Px(Y,B,R,O,W),VT(Y,X,W),Px(Y,B,R,O,W)}(g,y,S,w,_,M,A),R="vertical"===A?"x":"y",Z(N=g,function(O){O.outEdges.sort(function(B,G){return B.node2.getLayout()[R]-G.node2.getLayout()[R]}),O.inEdges.sort(function(B,G){return B.node1.getLayout()[R]-G.node1.getLayout()[R]})}),Z(N,function(O){var B=0,G=0;Z(O.outEdges,function(W){W.setLayout({sy:B},!0),B+=W.getLayout().dy}),Z(O.inEdges,function(W){W.setLayout({ty:G},!0),G+=W.getLayout().dy})})}(h,p,r,o,a,l,0!==Xn(h,function(g){return 0===g.getLayout().value}).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))})}function BT(n){var t=n.hostGraph.data.getRawDataItem(n.dataIndex);return null!=t.depth&&t.depth>=0}function Px(n,t,e,r,o){var i="vertical"===o?"x":"y";Z(n,function(a){var l,c,h;a.sort(function(_,w){return _.getLayout()[i]-w.getLayout()[i]});for(var p=0,g=a.length,y="vertical"===o?"dx":"dy",b=0;b<g;b++)(h=p-(c=a[b]).getLayout()[i])>0&&(l=c.getLayout()[i]+h,c.setLayout("vertical"===o?{x:l}:{y:l},!0)),p=c.getLayout()[i]+c.getLayout()[y]+t;if((h=p-t-("vertical"===o?r:e))>0)for(l=c.getLayout()[i]-h,c.setLayout("vertical"===o?{x:l}:{y:l},!0),p=l,b=g-2;b>=0;--b)(h=(c=a[b]).getLayout()[i]+c.getLayout()[y]+t-p)>0&&(l=c.getLayout()[i]-h,c.setLayout("vertical"===o?{x:l}:{y:l},!0)),p=c.getLayout()[i]})}function SN(n,t,e){Z(n.slice().reverse(),function(r){Z(r,function(o){if(o.outEdges.length){var i=wu(o.outEdges,KL,e)/wu(o.outEdges,dv);if(isNaN(i)){var a=o.outEdges.length;i=a?wu(o.outEdges,CN,e)/a:0}if("vertical"===e){var l=o.getLayout().x+(i-Fd(o,e))*t;o.setLayout({x:l},!0)}else{var c=o.getLayout().y+(i-Fd(o,e))*t;o.setLayout({y:c},!0)}}})})}function KL(n,t){return Fd(n.node2,t)*n.getValue()}function CN(n,t){return Fd(n.node2,t)}function MN(n,t){return Fd(n.node1,t)*n.getValue()}function zT(n,t){return Fd(n.node1,t)}function Fd(n,t){return"vertical"===t?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function dv(n){return n.getValue()}function wu(n,t,e){for(var r=0,o=n.length,i=-1;++i<o;){var a=+t(n[i],e);isNaN(a)||(r+=a)}return r}function VT(n,t,e){Z(n,function(r){Z(r,function(o){if(o.inEdges.length){var i=wu(o.inEdges,MN,e)/wu(o.inEdges,dv);if(isNaN(i)){var a=o.inEdges.length;i=a?wu(o.inEdges,zT,e)/a:0}if("vertical"===e){var l=o.getLayout().x+(i-Fd(o,e))*t;o.setLayout({x:l},!0)}else{var c=o.getLayout().y+(i-Fd(o,e))*t;o.setLayout({y:c},!0)}}})})}function JL(n){n.eachSeriesByType("sankey",function(t){var e=t.getGraph(),r=e.nodes,o=e.edges;if(r.length){var i=1/0,a=-1/0;Z(r,function(l){var c=l.getLayout().value;c<i&&(i=c),c>a&&(a=c)}),Z(r,function(l){var c=new ri({type:"color",mappingMethod:"linear",dataExtent:[i,a],visual:t.get("color")}).mapValueToVisual(l.getLayout().value),h=l.getModel().get(["itemStyle","color"]);null!=h?(l.setVisual("color",h),l.setVisual("style",{fill:h})):(l.setVisual("color",c),l.setVisual("style",{fill:c}))})}o.length&&Z(o,function(l){var c=l.getModel().get("lineStyle");l.setVisual("style",c)})})}var FT=function(){function n(){}return n.prototype.getInitialData=function(t,e){var r,o,i=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),l=i.get("type"),c=a.get("type");"category"===l?(t.layout="horizontal",r=i.getOrdinalMeta(),o=!0):"category"===c?(t.layout="vertical",r=a.getOrdinalMeta(),o=!0):t.layout=t.layout||"horizontal";var h=["x","y"],p="horizontal"===t.layout?0:1,g=this._baseAxisDim=h[p],y=h[1-p],b=[i,a],_=b[p].get("type"),w=b[1-p].get("type"),S=t.data;if(S&&o){var M=[];Z(S,function(N,L){var R;Ee(N)?(R=N.slice(),N.unshift(L)):Ee(N.value)?((R=De({},N)).value=R.value.slice(),N.value.unshift(L)):R=N,M.push(R)}),t.data=M}var A=this.defaultValueDimensions,I=[{name:g,type:iy(_),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:y,type:iy(w),dimsDef:A.slice()}];return Sd(this,{coordDimensions:I,dimensionsCount:A.length+1,encodeDefaulter:_t(Em,I,this)})},n.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},n}(),TN=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return Ce(t,n),t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(Pr);ur(TN,FT,!0);var AN=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){var i=e.getData(),a=this.group,l=this._data;this._data||a.removeAll();var c="horizontal"===e.get("layout")?1:0;i.diff(l).add(function(h){if(i.hasValue(h)){var p=GT(i.getItemLayout(h),i,h,c,!0);i.setItemGraphicEl(h,p),a.add(p)}}).update(function(h,p){var g=l.getItemGraphicEl(p);if(i.hasValue(h)){var y=i.getItemLayout(h);g?(js(g),kN(y,g,i,h)):g=GT(y,i,h,c),a.add(g),i.setItemGraphicEl(h,g)}else a.remove(g)}).remove(function(h){var p=l.getItemGraphicEl(h);p&&a.remove(p)}).execute(),this._data=i},t.prototype.remove=function(e){var r=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(i){i&&r.remove(i)})},t.type="boxplot",t}(vr),QL=function(){},vp=function(n){function t(e){var r=n.call(this,e)||this;return r.type="boxplotBoxPath",r}return Ce(t,n),t.prototype.getDefaultShape=function(){return new QL},t.prototype.buildPath=function(e,r){var o=r.points,i=0;for(e.moveTo(o[i][0],o[i][1]),i++;i<4;i++)e.lineTo(o[i][0],o[i][1]);for(e.closePath();i<o.length;i++)e.moveTo(o[i][0],o[i][1]),i++,e.lineTo(o[i][0],o[i][1])},t}(Yn);function GT(n,t,e,r,o){var i=n.ends,a=new vp({shape:{points:o?Bx(i,r,n):i}});return kN(n,a,t,e,o),a}function kN(n,t,e,r,o){(0,Qc[o?"initProps":"updateProps"])(t,{shape:{points:n.ends}},e.hostModel,r),t.useStyle(e.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.z2=100;var a=e.getItemModel(r),l=a.getModel("emphasis");Mi(t,a),mo(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function Bx(n,t,e){return j(n,function(r){return(r=r.slice())[t]=e.initBaseline,r})}var Su=Z;function zx(n){var r,o,t=(r=[],o=[],n.eachSeriesByType("boxplot",function(i){var a=i.getBaseAxis(),l=$t(o,a);l<0&&(o[l=o.length]=a,r[l]={axis:a,seriesModels:[]}),r[l].seriesModels.push(i)}),r);Su(t,function(e){var r=e.seriesModels;r.length&&(function(o){var i,a=o.axis,l=o.seriesModels,c=l.length,h=o.boxWidthList=[],p=o.boxOffsetList=[],g=[];if("category"===a.type)i=a.getBandWidth();else{var y=0;Su(l,function(A){y=Math.max(y,A.getData().count())});var b=a.getExtent();i=Math.abs(b[1]-b[0])/y}Su(l,function(A){var I=A.get("boxWidth");Ee(I)||(I=[I,I]),g.push([Ct(I[0],i)||0,Ct(I[1],i)||0])});var _=.8*i-2,w=_/c*.3,S=(_-w*(c-1))/c,M=S/2-_/2;Su(l,function(A,I){p.push(M),M+=w+S,h.push(Math.min(Math.max(S,g[I][0]),g[I][1]))})}(e),Su(r,function(o,i){!function(a,l,c){var h=a.coordinateSystem,p=a.getData(),g=c/2,y="horizontal"===a.get("layout")?0:1,b=1-y,_=["x","y"],w=p.mapDimension(_[y]),S=p.mapDimensionsAll(_[b]);if(!(null==w||S.length<5))for(var M=0;M<p.count();M++){var A=p.get(w,M),I=G(A,S[2],M),N=G(A,S[0],M),L=G(A,S[1],M),R=G(A,S[3],M),O=G(A,S[4],M),B=[];W(B,L,!1),W(B,R,!0),B.push(N,L,O,R),Y(B,N),Y(B,O),Y(B,I),p.setItemLayout(M,{initBaseline:I[b],ends:B})}function G(X,J,ne){var oe,ie=p.get(J,ne),se=[];return se[y]=X,se[b]=ie,isNaN(X)||isNaN(ie)?oe=[NaN,NaN]:(oe=h.dataToPoint(se))[y]+=l,oe}function W(X,J,ne){var oe=J.slice(),ie=J.slice();oe[y]+=g,ie[y]-=g,ne?X.push(oe,ie):X.push(ie,oe)}function Y(X,J){var ne=J.slice(),oe=J.slice();ne[y]-=g,oe[y]+=g,X.push(ne,oe)}}(o,e.boxOffsetList[i],e.boxWidthList[i])}))})}var Vx={type:"echarts:boxplot",transform:function(n){var t=n.upstream;t.sourceFormat!==Di&&En("");var r=function(o,i){for(var a=[],l=[],c=(i=i||{}).boundIQR,h="none"===c||0===c,p=0;p<o.length;p++){var g=ds(o[p].slice()),y=Ul(g,.25),b=Ul(g,.5),_=Ul(g,.75),w=g[0],S=g[g.length-1],M=(c??1.5)*(_-y),A=h?w:Math.max(w,y-M),I=h?S:Math.min(S,_+M),N=i.itemNameFormatter,L=Se(N)?N({value:p}):bt(N)?N.replace("{value}",p+""):p+"";a.push([L,A,y,b,_,I]);for(var R=0;R<g.length;R++){var O=g[R];(O<A||O>I)&&l.push([L,O])}}return{boxData:a,outliers:l}}(t.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:r.boxData},{data:r.outliers}]}},IN=["color","borderColor"],na=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,r,o){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,r,o,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,r):this._incrementalRenderNormal(e,r)},t.prototype.eachRendered=function(e){Qu(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var r=e.pipelineContext.large;null!=this._isLargeDraw&&r===this._isLargeDraw||(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(e){var r=e.getData(),o=this._data,i=this.group,a=r.getLayout("isSimpleBox"),l=e.get("clip",!0),c=e.coordinateSystem,h=c.getArea&&c.getArea();this._data||i.removeAll(),r.diff(o).add(function(p){if(r.hasValue(p)){var g=r.getItemLayout(p);if(l&&NN(h,g))return;var y=Gx(g,0,!0);to(y,{shape:{points:g.ends}},e,p),Cu(y,r,p,a),i.add(y),r.setItemGraphicEl(p,y)}}).update(function(p,g){var y=o.getItemGraphicEl(g);if(r.hasValue(p)){var b=r.getItemLayout(p);l&&NN(h,b)?i.remove(y):(y?(hr(y,{shape:{points:b.ends}},e,p),js(y)):y=Gx(b),Cu(y,r,p,a),i.add(y),r.setItemGraphicEl(p,y))}else i.remove(y)}).remove(function(p){var g=o.getItemGraphicEl(p);g&&i.remove(g)}).execute(),this._data=r},t.prototype._renderLarge=function(e){this._clear(),hv(e,this.group);var r=e.get("clip",!0)?Ya(e.coordinateSystem,!1,e):null;r?this.group.setClipPath(r):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,r){for(var o,i=r.getData(),a=i.getLayout("isSimpleBox");null!=(o=e.next());){var l=Gx(i.getItemLayout(o));Cu(l,i,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(e,r){hv(r,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(vr),Fx=function(){},DN=function(n){function t(e){var r=n.call(this,e)||this;return r.type="normalCandlestickBox",r}return Ce(t,n),t.prototype.getDefaultShape=function(){return new Fx},t.prototype.buildPath=function(e,r){var o=r.points;this.__simpleBox?(e.moveTo(o[4][0],o[4][1]),e.lineTo(o[6][0],o[6][1])):(e.moveTo(o[0][0],o[0][1]),e.lineTo(o[1][0],o[1][1]),e.lineTo(o[2][0],o[2][1]),e.lineTo(o[3][0],o[3][1]),e.closePath(),e.moveTo(o[4][0],o[4][1]),e.lineTo(o[5][0],o[5][1]),e.moveTo(o[6][0],o[6][1]),e.lineTo(o[7][0],o[7][1]))},t}(Yn);function Gx(n,t,e){var r=n.ends;return new DN({shape:{points:e?eR(r,n):r},z2:100})}function NN(n,t){for(var e=!0,r=0;r<t.ends.length;r++)if(n.contain(t.ends[r][0],t.ends[r][1])){e=!1;break}return e}function Cu(n,t,e,r){var o=t.getItemModel(e);n.useStyle(t.getItemVisual(e,"style")),n.style.strokeNoScale=!0,n.__simpleBox=r,Mi(n,o)}function eR(n,t){return j(n,function(e){return(e=e.slice())[1]=t.initBaseline,e})}var EN=function(){},Gd=function(n){function t(e){var r=n.call(this,e)||this;return r.type="largeCandlestickBox",r}return Ce(t,n),t.prototype.getDefaultShape=function(){return new EN},t.prototype.buildPath=function(e,r){for(var o=r.points,i=0;i<o.length;)if(this.__sign===o[i++]){var a=o[i++];e.moveTo(a,o[i++]),e.lineTo(a,o[i++])}else i+=3},t}(Yn);function hv(n,t,e,r){var o=n.getData().getLayout("largePoints"),i=new Gd({shape:{points:o},__sign:1,ignoreCoarsePointer:!0});t.add(i);var a=new Gd({shape:{points:o},__sign:-1,ignoreCoarsePointer:!0});t.add(a);var l=new Gd({shape:{points:o},__sign:0,ignoreCoarsePointer:!0});t.add(l),Hx(1,i,n),Hx(-1,a,n),Hx(0,l,n),r&&(i.incremental=!0,a.incremental=!0),e&&e.push(i,a)}function Hx(n,t,e,r){var o=e.get(["itemStyle",n>0?"borderColor":"borderColor0"])||e.get(["itemStyle",n>0?"color":"color0"]);0===n&&(o=e.get(["itemStyle","borderColorDoji"]));var i=e.getModel("itemStyle").getItemStyle(IN);t.useStyle(i),t.style.fill=null,t.style.stroke=o}var bp=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return Ce(t,n),t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,r,o){var i=r.getItemLayout(e);return i&&o.rect(i.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(Pr);function tR(n){n&&Ee(n.series)&&Z(n.series,function(t){Ft(t)&&"k"===t.type&&(t.type="candlestick")})}ur(bp,FT,!0);var nR=["itemStyle","borderColor"],pv=["itemStyle","borderColor0"],rR=["itemStyle","borderColorDoji"],LN=["itemStyle","color"],s=["itemStyle","color0"],u={seriesType:"candlestick",plan:Vh(),performRawSeries:!0,reset:function(n,t){function e(o,i){return i.get(o>0?LN:s)}function r(o,i){return i.get(0===o?rR:o>0?nR:pv)}if(!t.isSeriesFiltered(n))return!n.pipelineContext.large&&{progress:function(o,i){for(var a;null!=(a=o.next());){var l=i.getItemModel(a),c=i.getItemLayout(a).sign,h=l.getItemStyle();h.fill=e(c,l),h.stroke=r(c,l)||h.fill,De(i.ensureUniqueItemVisual(a,"style"),h)}}}}},d={seriesType:"candlestick",plan:Vh(),reset:function(n){var g,y,b,_,w,S,M,A,t=n.coordinateSystem,e=n.getData(),r=(y=e,w="category"===(_=(g=n).getBaseAxis()).type?_.getBandWidth():(b=_.getExtent(),Math.abs(b[1]-b[0])/y.count()),S=Ct(We(g.get("barMaxWidth"),w),w),M=Ct(We(g.get("barMinWidth"),1),w),null!=(A=g.get("barWidth"))?Ct(A,w):Math.max(Math.min(w/2,S),M)),o=["x","y"],i=e.getDimensionIndex(e.mapDimension(o[0])),a=j(e.mapDimensionsAll(o[1]),e.getDimensionIndex,e),l=a[0],c=a[1],h=a[2],p=a[3];if(e.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),!(i<0||a.length<4))return{progress:n.pipelineContext.large?function(g,y){for(var b,_,w=tl(4*g.count),S=0,M=[],A=[],I=y.getStore(),N=!!n.get(["itemStyle","borderColorDoji"]);null!=(_=g.next());){var L=I.get(i,_),R=I.get(l,_),O=I.get(c,_),B=I.get(h,_),G=I.get(p,_);isNaN(L)||isNaN(B)||isNaN(G)?(w[S++]=NaN,S+=3):(w[S++]=f(I,_,R,O,c,N),M[0]=L,M[1]=B,b=t.dataToPoint(M,null,A),w[S++]=b?b[0]:NaN,w[S++]=b?b[1]:NaN,M[1]=G,b=t.dataToPoint(M,null,A),w[S++]=b?b[1]:NaN)}y.setLayout("largePoints",w)}:function(g,y){for(var b,_=y.getStore();null!=(b=g.next());){var w=_.get(i,b),S=_.get(l,b),M=_.get(c,b),A=_.get(h,b),I=_.get(p,b),N=Math.min(S,M),L=Math.max(S,M),R=X(N,w),O=X(L,w),B=X(A,w),G=X(I,w),W=[];J(W,O,0),J(W,R,1),W.push(oe(G),oe(O),oe(B),oe(R));var Y=!!y.getItemModel(b).get(["itemStyle","borderColorDoji"]);y.setItemLayout(b,{sign:f(_,b,S,M,c,Y),initBaseline:S>M?O[1]:R[1],ends:W,brushRect:(ie=A,se=I,le=w,pe=void 0,me=void 0,pe=X(ie,le),me=X(se,le),pe[0]-=r/2,me[0]-=r/2,{x:pe[0],y:pe[1],width:r,height:me[1]-pe[1]})})}var ie,se,le,pe,me;function X(ie,se){var le=[];return le[0]=se,le[1]=ie,isNaN(se)||isNaN(ie)?[NaN,NaN]:t.dataToPoint(le)}function J(ie,se,le){var pe=se.slice(),me=se.slice();pe[0]=_0(pe[0]+r/2,1,!1),me[0]=_0(me[0]-r/2,1,!0),le?ie.push(pe,me):ie.push(me,pe)}function oe(ie){return ie[0]=_0(ie[0],1),ie}}}}};function f(n,t,e,r,o,i){return e>r?-1:e<r?1:i?0:t>0?n.get(o,t-1)<=r?1:-1:1}function m(n,t){var e=t.rippleEffectColor||t.color;n.eachChild(function(r){r.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?e:null,fill:"fill"===t.brushType?e:null}})})}var v=function(n){function t(e,r){var o=n.call(this)||this,i=new zo(e,r),a=new on;return o.add(i),o.add(a),o.updateData(e,r),o}return Ce(t,n),t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var r=e.symbolType,o=e.color,i=e.rippleNumber,a=this.childAt(1),l=0;l<i;l++){var c=vo(r,-1,-1,2,2,o);c.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var h=-l/i*e.period+e.effectOffset;c.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(h).start(),c.animateStyle(!0).when(e.period,{opacity:0}).delay(h).start(),a.add(c)}m(a,e)},t.prototype.updateEffectAnimation=function(e){for(var r=this._effectCfg,o=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],a=0;a<i.length;a++){var l=i[a];if(r[l]!==e[l])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}m(o,e)},t.prototype.highlight=function(){Ku(this)},t.prototype.downplay=function(){Ql(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,r){var o=this,i=e.hostModel;this.childAt(0).updateData(e,r);var a=this.childAt(1),l=e.getItemModel(r),c=e.getItemVisual(r,"symbol"),h=uu(e.getItemVisual(r,"symbolSize")),p=e.getItemVisual(r,"style"),g=p&&p.fill,y=l.getModel("emphasis");a.setScale(h),a.traverse(function(S){S.setStyle("fill",g)});var b=cu(e.getItemVisual(r,"symbolOffset"),h);b&&(a.x=b[0],a.y=b[1]);var _=e.getItemVisual(r,"symbolRotate");a.rotation=(_||0)*Math.PI/180||0;var w={};w.showEffectOn=i.get("showEffectOn"),w.rippleScale=l.get(["rippleEffect","scale"]),w.brushType=l.get(["rippleEffect","brushType"]),w.period=1e3*l.get(["rippleEffect","period"]),w.effectOffset=r/e.count(),w.z=i.getShallow("z")||0,w.zlevel=i.getShallow("zlevel")||0,w.symbolType=c,w.color=g,w.rippleEffectColor=l.get(["rippleEffect","color"]),w.rippleNumber=l.get(["rippleEffect","number"]),"render"===w.showEffectOn?(this._effectCfg?this.updateEffectAnimation(w):this.startEffectAnimation(w),this._effectCfg=w):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(S){"emphasis"===S?"render"!==w.showEffectOn&&o.startEffectAnimation(w):"normal"===S&&"render"!==w.showEffectOn&&o.stopEffectAnimation()}),this._effectCfg=w,mo(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(on),x=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(){this._symbolDraw=new Ey(v)},t.prototype.render=function(e,r,o){var i=e.getData(),a=this._symbolDraw;a.updateData(i,{clipShape:this._getClipShape(e)}),this.group.add(a.group)},t.prototype._getClipShape=function(e){var r=e.coordinateSystem,o=r&&r.getArea&&r.getArea();return e.get("clip",!0)?o:null},t.prototype.updateTransform=function(e,r,o){var i=e.getData();this.group.dirty();var a=hg("").reset(e,r,o);a.progress&&a.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var r=e.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=Aa(r.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,r){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(vr),C=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return Ce(t,n),t.prototype.getInitialData=function(e,r){return hu(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,r,o){return o.point(r.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(Pr),T=function(n){function t(e,r,o){var i=n.call(this)||this;return i.add(i.createLine(e,r,o)),i._updateEffectSymbol(e,r),i}return Ce(t,n),t.prototype.createLine=function(e,r,o){return new Ld(e,r,o)},t.prototype._updateEffectSymbol=function(e,r){var o=e.getItemModel(r).getModel("effect"),i=o.get("symbolSize"),a=o.get("symbol");Ee(i)||(i=[i,i]);var l=e.getItemVisual(r,"style"),c=o.get("color")||l&&l.stroke,h=this.childAt(1);this._symbolType!==a&&(this.remove(h),(h=vo(a,-.5,-.5,1,1,c)).z2=100,h.culling=!0,this.add(h)),h&&(h.setStyle("shadowColor",c),h.setStyle(o.getItemStyle(["color"])),h.scaleX=i[0],h.scaleY=i[1],h.setColor(c),this._symbolType=a,this._symbolScale=i,this._updateEffectAnimation(e,o,r))},t.prototype._updateEffectAnimation=function(e,r,o){var i=this.childAt(1);if(i){var a=e.getItemLayout(o),l=1e3*r.get("period"),c=r.get("loop"),h=r.get("roundTrip"),p=r.get("constantSpeed"),g=ht(r.get("delay"),function(b){return b/e.count()*l/3});if(i.ignore=!0,this._updateAnimationPoints(i,a),p>0&&(l=this._getLineLength(i)/p*1e3),l!==this._period||c!==this._loop||h!==this._roundTrip){i.stopAnimation();var y=void 0;y=Se(g)?g(o):g,i.__t>0&&(y=-l*i.__t),this._animateSymbol(i,l,y,c,h)}this._period=l,this._loop=c,this._roundTrip=h}},t.prototype._animateSymbol=function(e,r,o,i,a){if(r>0){e.__t=0;var l=this,c=e.animate("",i).when(a?2*r:r,{__t:a?2:1}).delay(o).during(function(){l._updateSymbolPosition(e)});i||c.done(function(){l.remove(e)}),c.start()}},t.prototype._getLineLength=function(e){return Ae(e.__p1,e.__cp1)+Ae(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,r){e.__p1=r[0],e.__p2=r[1],e.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},t.prototype.updateData=function(e,r,o){this.childAt(0).updateData(e,r,o),this._updateEffectSymbol(e,r)},t.prototype._updateSymbolPosition=function(e){var r=e.__p1,o=e.__p2,i=e.__cp1,a=e.__t<1?e.__t:2-e.__t,l=[e.x,e.y],c=l.slice(),h=_n,p=Go;l[0]=h(r[0],i[0],o[0],a),l[1]=h(r[1],i[1],o[1],a);var g=e.__t<1?p(r[0],i[0],o[0],a):p(o[0],i[0],r[0],1-a),y=e.__t<1?p(r[1],i[1],o[1],a):p(o[1],i[1],r[1],1-a);e.rotation=-Math.atan2(y,g)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==e.__lastT&&e.__lastT<e.__t?(e.scaleY=1.05*Ae(c,l),1===a&&(l[0]=c[0]+(l[0]-c[0])/2,l[1]=c[1]+(l[1]-c[1])/2)):e.scaleY=1===e.__lastT?2*Ae(r,l):this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=l[0],e.y=l[1]},t.prototype.updateLayout=function(e,r){this.childAt(0).updateLayout(e,r);var o=e.getItemModel(r).getModel("effect");this._updateEffectAnimation(e,o,r)},t}(on),k=function(n){function t(e,r,o){var i=n.call(this)||this;return i._createPolyline(e,r,o),i}return Ce(t,n),t.prototype._createPolyline=function(e,r,o){var i=e.getItemLayout(r),a=new $i({shape:{points:i}});this.add(a),this._updateCommonStl(e,r,o)},t.prototype.updateData=function(e,r,o){var i=e.hostModel;hr(this.childAt(0),{shape:{points:e.getItemLayout(r)}},i,r),this._updateCommonStl(e,r,o)},t.prototype._updateCommonStl=function(e,r,o){var i=this.childAt(0),a=e.getItemModel(r),l=o&&o.emphasisLineStyle,c=o&&o.focus,h=o&&o.blurScope,p=o&&o.emphasisDisabled;if(!o||e.hasItemOption){var g=a.getModel("emphasis");l=g.getModel("lineStyle").getLineStyle(),p=g.get("disabled"),c=g.get("focus"),h=g.get("blurScope")}i.useStyle(e.getItemVisual(r,"style")),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=l,mo(this,c,h,p)},t.prototype.updateLayout=function(e,r){this.childAt(0).setShape("points",e.getItemLayout(r))},t}(on),D=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return Ce(t,n),t.prototype.createLine=function(e,r,o){return new k(e,r,o)},t.prototype._updateAnimationPoints=function(e,r){this._points=r;for(var o=[0],i=0,a=1;a<r.length;a++)i+=Ae(r[a-1],r[a]),o.push(i);if(0!==i){for(a=0;a<o.length;a++)o[a]/=i;this._offsets=o,this._length=i}else this._length=0},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var r=e.__t<1?e.__t:2-e.__t,o=this._points,i=this._offsets,a=o.length;if(i){var l,c=this._lastFrame;if(r<this._lastFramePercent){for(l=Math.min(c+1,a-1);l>=0&&!(i[l]<=r);l--);l=Math.min(l,a-2)}else{for(l=c;l<a&&!(i[l]>r);l++);l=Math.min(l-1,a-2)}var h=(r-i[l])/(i[l+1]-i[l]),p=o[l],g=o[l+1];e.x=p[0]*(1-h)+h*g[0],e.y=p[1]*(1-h)+h*g[1],e.rotation=-Math.atan2(e.__t<1?g[1]-p[1]:p[1]-g[1],e.__t<1?g[0]-p[0]:p[0]-g[0])-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,e.ignore=!1}},t}(T),E=function(){this.polyline=!1,this.curveness=0,this.segs=[]},P=function(n){function t(e){var r=n.call(this,e)||this;return r._off=0,r.hoverDataIdx=-1,r}return Ce(t,n),t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new E},t.prototype.buildPath=function(e,r){var o,i=r.segs,a=r.curveness;if(r.polyline)for(o=this._off;o<i.length;){var l=i[o++];if(l>0){e.moveTo(i[o++],i[o++]);for(var c=1;c<l;c++)e.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var h=i[o++],p=i[o++],g=i[o++],y=i[o++];e.moveTo(h,p),a>0?e.quadraticCurveTo((h+g)/2-(p-y)*a,(p+y)/2-(g-h)*a,g,y):e.lineTo(g,y)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(e,r){var o=this.shape,i=o.segs,a=o.curveness,l=this.style.lineWidth;if(o.polyline)for(var c=0,h=0;h<i.length;){var p=i[h++];if(p>0)for(var g=i[h++],y=i[h++],b=1;b<p;b++)if($l(g,y,_=i[h++],w=i[h++],l,e,r))return c;c++}else for(c=0,h=0;h<i.length;){g=i[h++],y=i[h++];var _=i[h++],w=i[h++];if(a>0){if(ph(g,y,(g+_)/2-(y-w)*a,(y+w)/2-(_-g)*a,_,w,l,e,r))return c}else if($l(g,y,_,w,l,e,r))return c;c++}return-1},t.prototype.contain=function(e,r){var o=this.transformCoordToLocal(e,r);return this.getBoundingRect().contain(e=o[0],r=o[1])?(this.hoverDataIdx=this.findDataIndex(e,r))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var r=this.shape.segs,o=1/0,i=1/0,a=-1/0,l=-1/0,c=0;c<r.length;){var h=r[c++],p=r[c++];o=Math.min(h,o),a=Math.max(h,a),i=Math.min(p,i),l=Math.max(p,l)}e=this._rect=new Kt(o,i,a,l)}return e},t}(Yn),F=function(){function n(){this.group=new on}return n.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},n.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(t,e){var r=this._newAdded[0],o=e.getLayout("linesPoints"),i=r&&r.shape.segs;if(i&&i.length<2e4){var a=i.length,l=new Float32Array(a+o.length);l.set(i),l.set(o,a),r.setShape({segs:l})}else{this._newAdded=[];var c=this._create();c.incremental=!0,c.setShape({segs:o}),this._setCommon(c,e),c.__startIndex=t.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},n.prototype._create=function(){var t=new P({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},n.prototype._setCommon=function(t,e,r){var o=e.hostModel;t.setShape({polyline:o.get("polyline"),curveness:o.get(["lineStyle","curveness"])}),t.useStyle(o.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var i=e.getVisual("style");i&&i.stroke&&t.setStyle("stroke",i.stroke),t.setStyle("fill",null);var a=cn(t);a.seriesIndex=o.seriesIndex,t.on("mousemove",function(l){a.dataIndex=null;var c=t.hoverDataIdx;c>0&&(a.dataIndex=c+t.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),z={seriesType:"lines",plan:Vh(),reset:function(n){var t=n.coordinateSystem;if(t){var e=n.get("polyline"),r=n.pipelineContext.large;return{progress:function(o,i){var a=[];if(r){var l=void 0,c=o.end-o.start;if(e){for(var h=0,p=o.start;p<o.end;p++)h+=n.getLineCoordsCount(p);l=new Float32Array(c+2*h)}else l=new Float32Array(4*c);var g=0,y=[];for(p=o.start;p<o.end;p++){var b=n.getLineCoords(p,a);e&&(l[g++]=b);for(var _=0;_<b;_++)y=t.dataToPoint(a[_],!1,y),l[g++]=y[0],l[g++]=y[1]}i.setLayout("linesPoints",l)}else for(p=o.start;p<o.end;p++){var w=i.getItemModel(p),S=(b=n.getLineCoords(p,a),[]);if(e)for(var M=0;M<b;M++)S.push(t.dataToPoint(a[M]));else{S[0]=t.dataToPoint(a[0]),S[1]=t.dataToPoint(a[1]);var A=w.get(["lineStyle","curveness"]);+A&&(S[2]=[(S[0][0]+S[1][0])/2-(S[0][1]-S[1][1])*A,(S[0][1]+S[1][1])/2-(S[1][0]-S[0][0])*A])}i.setItemLayout(p,S)}}}}}},H=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){var i=e.getData(),a=this._updateLineDraw(i,e),l=e.get("zlevel"),c=e.get(["effect","trailLength"]),h=o.getZr(),p="svg"===h.painter.getType();p||h.painter.getLayer(l).clear(!0),null==this._lastZlevel||p||h.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&c>0&&(p||h.configLayer(l,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(c/10+.9,1),0)})),a.updateData(i);var g=e.get("clip",!0)&&Ya(e.coordinateSystem,!1,e);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=l,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,r,o){var i=e.getData();this._updateLineDraw(i,e).incrementalPrepareUpdate(i),this._clearLayer(o),this._finished=!1},t.prototype.incrementalRender=function(e,r,o){this._lineDraw.incrementalUpdate(e,r.getData()),this._finished=e.end===r.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,r,o){var i=e.getData(),a=e.pipelineContext;if(!this._finished||a.large||a.progressiveRender)return{update:!0};var l=z.reset(e,r,o);l.progress&&l.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(o)},t.prototype._updateLineDraw=function(e,r){var o=this._lineDraw,i=this._showEffect(r),a=!!r.get("polyline"),l=r.pipelineContext.large;return o&&i===this._hasEffet&&a===this._isPolyline&&l===this._isLargeDraw||(o&&o.remove(),o=this._lineDraw=l?new F:new dT(a?i?D:k:i?T:Ld),this._hasEffet=i,this._isPolyline=a,this._isLargeDraw=l),this.group.add(o.group),o},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var r=e.getZr();"svg"===r.painter.getType()||null==this._lastZlevel||r.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},t.prototype.dispose=function(e,r){this.remove(e,r)},t.type="lines",t}(vr),V=typeof Uint32Array>"u"?Array:Uint32Array,U=typeof Float64Array>"u"?Array:Float64Array;function $(n){var t=n.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(n.data=j(t,function(e){var r={coords:[e[0].coord,e[1].coord]};return e[0].name&&(r.fromName=e[0].name),e[1].name&&(r.toName=e[1].name),Ir([r,e[0],e[1]])}))}var K=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return Ce(t,n),t.prototype.init=function(e){e.data=e.data||[],$(e);var r=this._processFlatCoordsArray(e.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(e.data=new Float32Array(r.count)),n.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(e){if($(e),e.data){var r=this._processFlatCoordsArray(e.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(e.data=new Float32Array(r.count))}n.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var r=this._processFlatCoordsArray(e.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=Vo(this._flatCoords,r.flatCoords),this._flatCoordsOffset=Vo(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),e.data=new Float32Array(r.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var r=this.getData().getItemModel(e);return r.option instanceof Array?r.option:r.getShallow("coords")},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,r){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[2*e],i=this._flatCoordsOffset[2*e+1],a=0;a<i;a++)r[a]=r[a]||[],r[a][0]=this._flatCoords[o+2*a],r[a][1]=this._flatCoords[o+2*a+1];return i}var l=this._getCoordsFromItemModel(e);for(a=0;a<l.length;a++)r[a]=r[a]||[],r[a][0]=l[a][0],r[a][1]=l[a][1];return l.length},t.prototype._processFlatCoordsArray=function(e){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),dt(e[0])){for(var o=e.length,i=new V(o),a=new U(o),l=0,c=0,h=0,p=0;p<o;){h++;var g=e[p++];i[c++]=l+r,i[c++]=g;for(var y=0;y<g;y++){var b=e[p++],_=e[p++];a[l++]=b,a[l++]=_}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,c),flatCoords:a,count:h}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,r){var o=new Ri(["value"],this);return o.hasItemOption=!1,o.initData(e.data,[],function(i,a,l,c){if(i instanceof Array)return NaN;o.hasItemOption=!0;var h=i.value;return null!=h?h instanceof Array?h[c]:h:void 0}),o},t.prototype.formatTooltip=function(e,r,o){var i=this.getData().getItemModel(e),a=i.get("name");if(a)return a;var l=i.get("fromName"),c=i.get("toName"),h=[];return null!=l&&h.push(l),null!=c&&h.push(c),ti("nameValue",{name:h.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),r=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&r>0?r+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(Pr);function te(n){return n instanceof Array||(n=[n,n]),n}var re={seriesType:"lines",reset:function(n){var t=te(n.get("symbol")),e=te(n.get("symbolSize")),r=n.getData();return r.setVisual("fromSymbol",t&&t[0]),r.setVisual("toSymbol",t&&t[1]),r.setVisual("fromSymbolSize",e&&e[0]),r.setVisual("toSymbolSize",e&&e[1]),{dataEach:r.hasItemOption?function(o,i){var a=o.getItemModel(i),l=te(a.getShallow("symbol",!0)),c=te(a.getShallow("symbolSize",!0));l[0]&&o.setItemVisual(i,"fromSymbol",l[0]),l[1]&&o.setItemVisual(i,"toSymbol",l[1]),c[0]&&o.setItemVisual(i,"fromSymbolSize",c[0]),c[1]&&o.setItemVisual(i,"toSymbolSize",c[1])}:null}}},ue=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Tn.createCanvas();this.canvas=t}return n.prototype.update=function(t,e,r,o,i,a){var l=this._getBrush(),c=this._getGradient(i,"inRange"),h=this._getGradient(i,"outOfRange"),p=this.pointSize+this.blurSize,g=this.canvas,y=g.getContext("2d"),b=t.length;g.width=e,g.height=r;for(var _=0;_<b;++_){var w=t[_],S=w[0],M=w[1],A=o(w[2]);y.globalAlpha=A,y.drawImage(l,S-p,M-p)}if(!g.width||!g.height)return g;for(var I=y.getImageData(0,0,g.width,g.height),N=I.data,L=0,R=N.length,O=this.minOpacity,B=this.maxOpacity-O;L<R;){A=N[L+3]/256;var G=4*Math.floor(255*A);if(A>0){var W=a(A)?c:h;A>0&&(A=A*B+O),N[L++]=W[G],N[L++]=W[G+1],N[L++]=W[G+2],N[L++]=W[G+3]*A*256}else L+=4}return y.putImageData(I,0,0),g},n.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Tn.createCanvas()),e=this.pointSize+this.blurSize,r=2*e;t.width=r,t.height=r;var o=t.getContext("2d");return o.clearRect(0,0,r,r),o.shadowOffsetX=r,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-e,e,this.pointSize,0,2*Math.PI,!0),o.closePath(),o.fill(),t},n.prototype._getGradient=function(t,e){for(var r=this._gradientPixels,o=r[e]||(r[e]=new Uint8ClampedArray(1024)),i=[0,0,0,0],a=0,l=0;l<256;l++)t[e](l/255,!0,i),o[a++]=i[0],o[a++]=i[1],o[a++]=i[2],o[a++]=i[3];return o},n}();function he(n){var t=n.dimensions;return"lng"===t[0]&&"lat"===t[1]}var de=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){var i;r.eachComponent("visualMap",function(l){l.eachTargetSeries(function(c){c===e&&(i=l)})}),this._progressiveEls=null,this.group.removeAll();var a=e.coordinateSystem;"cartesian2d"===a.type||"calendar"===a.type?this._renderOnCartesianAndCalendar(e,o,0,e.getData().count()):he(a)&&this._renderOnGeo(a,e,i,o)},t.prototype.incrementalPrepareRender=function(e,r,o){this.group.removeAll()},t.prototype.incrementalRender=function(e,r,o,i){var a=r.coordinateSystem;a&&(he(a)?this.render(r,o,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,i,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){Qu(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,r,o,i,a){var l,c,h,p,g=e.coordinateSystem,y=vu(g,"cartesian2d");if(y){var b=g.getAxis("x"),_=g.getAxis("y");l=b.getBandWidth()+.5,c=_.getBandWidth()+.5,h=b.scale.getExtent(),p=_.scale.getExtent()}for(var w=this.group,S=e.getData(),M=e.getModel(["emphasis","itemStyle"]).getItemStyle(),A=e.getModel(["blur","itemStyle"]).getItemStyle(),I=e.getModel(["select","itemStyle"]).getItemStyle(),N=e.get(["itemStyle","borderRadius"]),L=fo(e),R=e.getModel("emphasis"),O=R.get("focus"),B=R.get("blurScope"),G=R.get("disabled"),W=y?[S.mapDimension("x"),S.mapDimension("y"),S.mapDimension("value")]:[S.mapDimension("time"),S.mapDimension("value")],Y=o;Y<i;Y++){var X=void 0,J=S.getItemVisual(Y,"style");if(y){var ne=S.get(W[0],Y),oe=S.get(W[1],Y);if(isNaN(S.get(W[2],Y))||isNaN(ne)||isNaN(oe)||ne<h[0]||ne>h[1]||oe<p[0]||oe>p[1])continue;var ie=g.dataToPoint([ne,oe]);X=new $n({shape:{x:ie[0]-l/2,y:ie[1]-c/2,width:l,height:c},style:J})}else{if(isNaN(S.get(W[1],Y)))continue;X=new $n({z2:1,shape:g.dataToRect([S.get(W[0],Y)]).contentShape,style:J})}if(S.hasItemOption){var se=S.getItemModel(Y),le=se.getModel("emphasis");M=le.getModel("itemStyle").getItemStyle(),A=se.getModel(["blur","itemStyle"]).getItemStyle(),I=se.getModel(["select","itemStyle"]).getItemStyle(),N=se.get(["itemStyle","borderRadius"]),O=le.get("focus"),B=le.get("blurScope"),G=le.get("disabled"),L=fo(se)}X.shape.r=N;var pe=e.getRawValue(Y),me="-";pe&&null!=pe[2]&&(me=pe[2]+""),Ao(X,L,{labelFetcher:e,labelDataIndex:Y,defaultOpacity:J.opacity,defaultText:me}),X.ensureState("emphasis").style=M,X.ensureState("blur").style=A,X.ensureState("select").style=I,mo(X,O,B,G),X.incremental=a,a&&(X.states.emphasis.hoverLayer=!0),w.add(X),S.setItemGraphicEl(Y,X),this._progressiveEls&&this._progressiveEls.push(X)}},t.prototype._renderOnGeo=function(e,r,o,i){var a=o.targetVisuals.inRange,l=o.targetVisuals.outOfRange,c=r.getData(),h=this._hmLayer||this._hmLayer||new ue;h.blurSize=r.get("blurSize"),h.pointSize=r.get("pointSize"),h.minOpacity=r.get("minOpacity"),h.maxOpacity=r.get("maxOpacity");var p=e.getViewRect().clone(),g=e.getRoamTransform();p.applyTransform(g);var O,B,G,y=Math.max(p.x,0),b=Math.max(p.y,0),_=Math.min(p.width+p.x,i.getWidth()),w=Math.min(p.height+p.y,i.getHeight()),S=_-y,M=w-b,A=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],I=c.mapArray(A,function(O,B,G){var W=e.dataToPoint([O,B]);return W[0]-=y,W[1]-=b,W.push(G),W}),N=o.getExtent(),L="visualMap.continuous"===o.type?(B=[((B=o.option.range)[0]-(O=N)[0])/(G=O[1]-O[0]),(B[1]-O[0])/G],function(W){return W>=B[0]&&W<=B[1]}):function(O,B,G){var W=O[1]-O[0],Y=(B=j(B,function(J){return{interval:[(J.interval[0]-O[0])/W,(J.interval[1]-O[0])/W]}})).length,X=0;return function(J){var ne;for(ne=X;ne<Y;ne++)if((oe=B[ne].interval)[0]<=J&&J<=oe[1]){X=ne;break}if(ne===Y)for(ne=X-1;ne>=0;ne--){var oe;if((oe=B[ne].interval)[0]<=J&&J<=oe[1]){X=ne;break}}return ne>=0&&ne<Y&&G[ne]}}(N,o.getPieceList(),o.option.selected);h.update(I,S,M,a.color.getNormalizer(),{inRange:a.color.getColorMapper(),outOfRange:l.color.getColorMapper()},L);var R=new jo({style:{width:S,height:M,x:y,y:b,image:h.canvas},silent:!0});this.group.add(R)},t.type="heatmap",t}(vr),_e=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.getInitialData=function(e,r){return hu(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=id.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(Pr),Ne=["itemStyle","borderWidth"],ce=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],fe=new da,we=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){var i=this.group,a=e.getData(),l=this._data,c=e.coordinateSystem,h=c.getBaseAxis().isHorizontal(),p=c.master.getRect(),g={ecSize:{width:o.getWidth(),height:o.getHeight()},seriesModel:e,coordSys:c,coordSysExtent:[[p.x,p.x+p.width],[p.y,p.y+p.height]],isHorizontal:h,valueDim:ce[+h],categoryDim:ce[1-+h]};a.diff(l).add(function(b){if(a.hasValue(b)){var _=gt(a,b),w=ze(a,b,_,g),S=xe(a,g,w);a.setItemGraphicEl(b,S),i.add(S),Yt(S,g,w)}}).update(function(b,_){var I,N,L,w=l.getItemGraphicEl(_);if(a.hasValue(b)){var S=gt(a,b),M=ze(a,b,S,g),A=Ge(a,M);w&&A!==w.__pictorialShapeStr&&(i.remove(w),a.setItemGraphicEl(b,null),w=null),w?(N=g,hr((I=w).__pictorialBundle,{x:(L=M).bundlePosition[0],y:L.bundlePosition[1]},L.animationModel,L.dataIndex),L.symbolRepeat?Dt(I,N,L,!0):zt(I,0,L,!0),Ut(I,L,!0),kt(I,N,L,!0)):w=xe(a,g,M,!0),a.setItemGraphicEl(b,w),w.__pictorialSymbolMeta=M,i.add(w),Yt(w,g,M)}else i.remove(w)}).remove(function(b){var _=l.getItemGraphicEl(b);_&&Le(l,b,_.__pictorialSymbolMeta.animationModel,_)}).execute();var y=e.get("clip",!0)?Ya(e.coordinateSystem,!1,e):null;return y?i.setClipPath(y):i.removeClipPath(),this._data=a,this.group},t.prototype.remove=function(e,r){var o=this.group,i=this._data;e.get("animation")?i&&i.eachItemGraphicEl(function(a){Le(i,cn(a).dataIndex,e,a)}):o.removeAll()},t.type="pictorialBar",t}(vr);function ze(n,t,e,r){var _,w,M,I,N,L,R,O,B,G,W,Y,X,o=n.getItemLayout(t),i=e.get("symbolRepeat"),a=e.get("symbolClip"),l=e.get("symbolPosition")||"start",c=(e.get("symbolRotate")||0)*Math.PI/180||0,h=e.get("symbolPatternSize")||2,p=e.isAnimationEnabled(),g={dataIndex:t,layout:o,itemModel:e,symbolType:n.getItemVisual(t,"symbol")||"circle",style:n.getItemVisual(t,"style"),symbolClip:a,symbolRepeat:i,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:h,rotation:c,animationModel:p?e:null,hoverScale:p&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};(function(_,w,S,M,A){var I,N=M.valueDim,L=_.get("symbolBoundingData"),R=M.coordSys.getOtherAxis(M.coordSys.getBaseAxis()),O=R.toGlobalCoord(R.dataToCoord(0)),B=1-+(S[N.wh]<=0);if(Ee(L)){var G=[Qe(R,L[0])-O,Qe(R,L[1])-O];G[1]<G[0]&&G.reverse(),I=G[B]}else I=null!=L?Qe(R,L)-O:w?M.coordSysExtent[N.index][B]-O:S[N.wh];A.boundingLength=I,w&&(A.repeatCutLength=S[N.wh]),A.pxSign=I>0?1:-1})(e,i,o,r,g),_=n,w=t,M=i,I=g.boundingLength,N=g.pxSign,L=h,O=g,G=(R=r).valueDim,W=R.categoryDim,Y=Math.abs(o[W.wh]),(B=Ee(X=_.getItemVisual(w,"symbolSize"))?X.slice():null==X?["100%","100%"]:[X,X])[W.index]=Ct(B[W.index],Y),B[G.index]=Ct(B[G.index],M?Y:Math.abs(I)),O.symbolSize=B,(O.symbolScale=[B[0]/L,B[1]/L])[G.index]*=(R.isHorizontal?-1:1)*N,function(_,w,S,M,A){var I=_.get(Ne)||0;I&&(fe.attr({scaleX:w[0],scaleY:w[1],rotation:S}),fe.updateTransform(),I/=fe.getLineScale(),I*=w[M.valueDim.index]),A.valueLineWidth=I||0}(e,g.symbolScale,c,r,g);var y=g.symbolSize,b=cu(e.get("symbolOffset"),y);return function(_,w,S,M,A,I,N,L,R,O,B,G){var W=B.categoryDim,Y=B.valueDim,X=G.pxSign,J=Math.max(w[Y.index]+L,0),ne=J;if(M){var oe=Math.abs(R),ie=ht(_.get("symbolMargin"),"15%")+"",se=!1;ie.lastIndexOf("!")===ie.length-1&&(se=!0,ie=ie.slice(0,ie.length-1));var le=Ct(ie,w[Y.index]),pe=Math.max(J+2*le,0),me=se?0:2*le,ve=qg(M),He=ve?M:Jt((oe+me)/pe);pe=J+2*(le=(oe-He*J)/2/(se?He:Math.max(He-1,1))),me=se?0:2*le,ve||"fixed"===M||(He=O?Jt((Math.abs(O)+me)/pe):0),ne=He*pe-me,G.repeatTimes=He,G.symbolMargin=le}var nt=X*(ne/2),Me=G.pathPosition=[];Me[W.index]=S[W.wh]/2,Me[Y.index]="start"===N?nt:"end"===N?R-nt:R/2,I&&(Me[0]+=I[0],Me[1]+=I[1]);var je=G.bundlePosition=[];je[W.index]=S[W.xy],je[Y.index]=S[Y.xy];var tt=G.barRectShape=De({},S);tt[Y.wh]=X*Math.max(Math.abs(S[Y.wh]),Math.abs(Me[Y.index]+nt)),tt[W.wh]=S[W.wh];var ut=G.clipShape={};ut[W.xy]=-S[W.xy],ut[W.wh]=B.ecSize[W.wh],ut[Y.xy]=0,ut[Y.wh]=S[Y.wh]}(e,y,o,i,0,b,l,g.valueLineWidth,g.boundingLength,g.repeatCutLength,r,g),g}function Qe(n,t){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(t)))}function Xe(n){var t=n.symbolPatternSize,e=vo(n.symbolType,-t/2,-t/2,t,t);return e.attr({culling:!0}),"image"!==e.type&&e.setStyle({strokeNoScale:!0}),e}function Dt(n,t,e,r){var o=n.__pictorialBundle,l=e.pathPosition,c=t.valueDim,h=e.repeatTimes||0,p=0,g=e.symbolSize[t.valueDim.index]+e.valueLineWidth+2*e.symbolMargin;for(mt(n,function(w){w.__pictorialAnimationIndex=p,w.__pictorialRepeatTimes=h,p<h?at(w,null,_(p),e,r):at(w,null,{scaleX:0,scaleY:0},e,r,function(){o.remove(w)}),p++});p<h;p++){var y=Xe(e);y.__pictorialAnimationIndex=p,y.__pictorialRepeatTimes=h,o.add(y);var b=_(p);at(y,{x:b.x,y:b.y,scaleX:0,scaleY:0},{scaleX:b.scaleX,scaleY:b.scaleY,rotation:b.rotation},e,r)}function _(w){var S=l.slice(),M=e.pxSign,A=w;return("start"===e.symbolRepeatDirection?M>0:M<0)&&(A=h-1-w),S[c.index]=g*(A-h/2+.5)+l[c.index],{x:S[0],y:S[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function zt(n,t,e,r){var o=n.__pictorialBundle,i=n.__pictorialMainPath;i?at(i,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,r):(i=n.__pictorialMainPath=Xe(e),o.add(i),at(i,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,r))}function Ut(n,t,e){var r=De({},t.barRectShape),o=n.__pictorialBarRect;o?at(o,null,{shape:r},t,e):((o=n.__pictorialBarRect=new $n({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,n.add(o))}function kt(n,t,e,r){if(e.symbolClip){var o=n.__pictorialClipPath,i=De({},e.clipShape),a=t.valueDim,l=e.animationModel,c=e.dataIndex;if(o)hr(o,{shape:i},l,c);else{i[a.wh]=0,o=new $n({shape:i}),n.__pictorialBundle.setClipPath(o),n.__pictorialClipPath=o;var h={};h[a.wh]=e.clipShape[a.wh],Qc[r?"updateProps":"initProps"](o,{shape:h},l,c)}}}function gt(n,t){var e=n.getItemModel(t);return e.getAnimationDelayParams=Pt,e.isAnimationEnabled=ye,e}function Pt(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function ye(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function xe(n,t,e,r){var o=new on,i=new on;return o.add(i),o.__pictorialBundle=i,i.x=e.bundlePosition[0],i.y=e.bundlePosition[1],e.symbolRepeat?Dt(o,t,e):zt(o,0,e),Ut(o,e,r),kt(o,t,e,r),o.__pictorialShapeStr=Ge(n,e),o.__pictorialSymbolMeta=e,o}function Le(n,t,e,r){var o=r.__pictorialBarRect;o&&o.removeTextContent();var i=[];mt(r,function(a){i.push(a)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(e=null),Z(i,function(a){Jc(a,{scaleX:0,scaleY:0},e,t,function(){r.parent&&r.parent.remove(r)})}),n.setItemGraphicEl(t,null)}function Ge(n,t){return[n.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function mt(n,t,e){Z(n.__pictorialBundle.children(),function(r){r!==n.__pictorialBarRect&&t.call(e,r)})}function at(n,t,e,r,o,i){t&&n.attr(t),r.symbolClip&&!o?e&&n.attr(e):e&&Qc[o?"updateProps":"initProps"](n,e,r.animationModel,r.dataIndex,i)}function Yt(n,t,e){var r=e.dataIndex,o=e.itemModel,i=o.getModel("emphasis"),a=i.getModel("itemStyle").getItemStyle(),l=o.getModel(["blur","itemStyle"]).getItemStyle(),c=o.getModel(["select","itemStyle"]).getItemStyle(),h=o.getShallow("cursor"),p=i.get("focus"),g=i.get("blurScope"),y=i.get("scale");mt(n,function(w){if(w instanceof jo){var S=w.style;w.useStyle(De({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},e.style))}else w.useStyle(e.style);var M=w.ensureState("emphasis");M.style=a,y&&(M.scaleX=1.1*w.scaleX,M.scaleY=1.1*w.scaleY),w.ensureState("blur").style=l,w.ensureState("select").style=c,h&&(w.cursor=h),w.z2=e.z2});var b=t.valueDim.posDesc[+(e.boundingLength>0)],_=n.__pictorialBarRect;_.ignoreClip=!0,Ao(_,fo(o),{labelFetcher:t.seriesModel,labelDataIndex:r,defaultText:xd(t.seriesModel.getData(),r),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:b}),mo(n,p,g,i.get("disabled"))}function Jt(n){var t=Math.round(n);return Math.abs(n-t)<1e-4?t:Math.ceil(n)}var sn=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return Ce(t,n),t.prototype.getInitialData=function(e){return e.stack=null,n.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=tc(pg.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(pg),xr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._layers=[],e}return Ce(t,n),t.prototype.render=function(e,r,o){var i=e.getData(),a=this,l=this.group,c=e.getLayerSeries(),h=i.getLayout("layoutInfo"),p=h.rect,g=h.boundaryGap;function y(S){return S.name}l.x=0,l.y=p.y+g[0];var b=new Js(this._layersSeries||[],c,y,y),_=[];function w(S,M,A){var pe,me,He,I=a._layers;if("remove"!==S){for(var N,L,R=[],O=[],B=c[M].indices,G=0;G<B.length;G++){var W=i.getItemLayout(B[G]),Y=W.x,X=W.y0,J=W.y;R.push(Y,X),O.push(Y,X+J),N=i.getItemVisual(B[G],"style")}var ne=i.getItemLayout(B[0]),oe=e.getModel("label").get("margin"),ie=e.getModel("emphasis");if("add"===S){var se=_[M]=new on;L=new sD({shape:{points:R,stackedOnPoints:O,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),se.add(L),l.add(se),e.isAnimationEnabled()&&L.setClipPath((pe=L.getBoundingRect(),me=e,to(He=new $n({shape:{x:pe.x-10,y:pe.y-10,width:0,height:pe.height+20}}),{shape:{x:pe.x-50,width:pe.width+100,height:pe.height+20}},me,function(){L.removeClipPath()}),He))}else L=(se=I[A]).childAt(0),l.add(se),_[M]=se,hr(L,{shape:{points:R,stackedOnPoints:O}},e),js(L);Ao(L,fo(e),{labelDataIndex:B[G-1],defaultText:i.getName(B[G-1]),inheritColor:N.fill},{normal:{verticalAlign:"middle"}}),L.setTextConfig({position:null,local:!0});var le=L.getTextContent();le&&(le.x=ne.x-oe,le.y=ne.y0+ne.y/2),L.useStyle(N),i.setItemGraphicEl(M,L),Mi(L,e),mo(L,ie.get("focus"),ie.get("blurScope"),ie.get("disabled"))}else l.remove(I[M])}b.add(Fe(w,this,"add")).update(Fe(w,this,"update")).remove(Fe(w,this,"remove")).execute(),this._layersSeries=c,this._layers=_},t.type="themeRiver",t}(vr),Zr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new wc(Fe(this.getData,this),Fe(this.getRawData,this))},t.prototype.fixData=function(e){var r=e.length,o={},i=oh(e,function(y){return o.hasOwnProperty(y[0]+"")||(o[y[0]+""]=-1),y[2]}),a=[];i.buckets.each(function(y,b){a.push({name:b,dataList:y})});for(var l=a.length,c=0;c<l;++c){for(var h=a[c].name,p=0;p<a[c].dataList.length;++p)o[g=a[c].dataList[p][0]+""]=c;for(var g in o)o.hasOwnProperty(g)&&o[g]!==c&&(o[g]=c,e[r]=[g,0,h],r++)}return e},t.prototype.getInitialData=function(e,r){for(var o=this.getReferringComponents("singleAxis",Mo).models[0].get("type"),i=Xn(e.data,function(b){return void 0!==b[2]}),a=this.fixData(i||[]),l=[],c=this.nameMap=Et(),h=0,p=0;p<a.length;++p)l.push(a[p][2]),c.get(a[p][2])||(c.set(a[p][2],h),h++);var g=Qf(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:iy(o)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,y=new Ri(g,this);return y.initData(a),y},t.prototype.getLayerSeries=function(){for(var e=this.getData(),r=e.count(),o=[],i=0;i<r;++i)o[i]=i;var a=e.mapDimension("single"),l=oh(o,function(h){return e.get("name",h)}),c=[];return l.buckets.each(function(h,p){h.sort(function(g,y){return e.get(a,g)-e.get(a,y)}),c.push({name:p,indices:h})}),c},t.prototype.getAxisTooltipData=function(e,r,o){Ee(e)||(e=e?[e]:[]);for(var i,a=this.getData(),l=this.getLayerSeries(),c=[],h=l.length,p=0;p<h;++p){for(var g=Number.MAX_VALUE,y=-1,b=l[p].indices.length,_=0;_<b;++_){var w=a.get(e[0],l[p].indices[_]),S=Math.abs(w-r);S<=g&&(i=w,g=S,y=l[p].indices[_])}c.push(y)}return{dataIndices:c,nestestValue:i}},t.prototype.formatTooltip=function(e,r,o){var i=this.getData();return ti("nameValue",{name:i.getName(e),value:i.get(i.mapDimension("value"),e)})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(Pr);function Za(n,t){n.eachSeriesByType("themeRiver",function(e){var r=e.getData(),o=e.coordinateSystem,i={},a=o.getRect();i.rect=a;var l=e.get("boundaryGap"),c=o.getAxis();i.boundaryGap=l,"horizontal"===c.orient?(l[0]=Ct(l[0],a.height),l[1]=Ct(l[1],a.height),Tt(r,e,a.height-l[0]-l[1])):(l[0]=Ct(l[0],a.width),l[1]=Ct(l[1],a.width),Tt(r,e,a.width-l[0]-l[1])),r.setLayout("layoutInfo",i)})}function Tt(n,t,e){if(n.count())for(var r,o=t.coordinateSystem,i=t.getLayerSeries(),a=n.mapDimension("single"),l=n.mapDimension("value"),c=j(i,function(S){return j(S.indices,function(M){var A=o.dataToPoint(n.get(a,M));return A[1]=n.get(l,M),A})}),h=function(S){for(var M=S.length,A=S[0].length,I=[],N=[],L=0,R=0;R<A;++R){for(var O=0,B=0;B<M;++B)O+=S[B][R][1];O>L&&(L=O),I.push(O)}for(var G=0;G<A;++G)N[G]=(L-I[G])/2;L=0;for(var W=0;W<A;++W){var Y=I[W]+N[W];Y>L&&(L=Y)}return{y0:N,max:L}}(c),p=h.y0,g=e/h.max,y=i.length,b=i[0].indices.length,_=0;_<b;++_){n.setItemLayout(i[0].indices[_],{layerIndex:0,x:c[0][_][0],y0:r=p[_]*g,y:c[0][_][1]*g});for(var w=1;w<y;++w)n.setItemLayout(i[w].indices[_],{layerIndex:w,x:c[w][_][0],y0:r+=c[w-1][_][1]*g,y:c[w][_][1]*g})}}var dn=function(n){function t(e,r,o,i){var a=n.call(this)||this;a.z2=2,a.textConfig={inside:!0},cn(a).seriesIndex=r.seriesIndex;var l=new Kn({z2:4,silent:e.getModel().get(["label","silent"])});return a.setTextContent(l),a.updateData(!0,e,r,o,i),a}return Ce(t,n),t.prototype.updateData=function(e,r,o,i,a){this.node=r,r.piece=this,o=o||this._seriesModel,i=i||this._ecModel;var l=this;cn(l).dataIndex=r.dataIndex;var c=r.getModel(),h=c.getModel("emphasis"),p=r.getLayout(),g=De({},p);g.label=null;var y=r.getVisual("style");y.lineJoin="bevel";var b=r.getVisual("decal");b&&(y.decal=pd(b,a));var _=wd(c.getModel("itemStyle"),g,!0);De(g,_),Z(ui,function(M){var A=l.ensureState(M),I=c.getModel([M,"itemStyle"]);A.style=I.getItemStyle();var N=wd(I,g);N&&(A.shape=N)}),e?(l.setShape(g),l.shape.r=p.r0,to(l,{shape:{r:p.r}},o,r.dataIndex)):(hr(l,{shape:g},o),js(l)),l.useStyle(y),this._updateLabel(o);var w=c.getShallow("cursor");w&&l.attr("cursor",w),this._seriesModel=o||this._seriesModel,this._ecModel=i||this._ecModel;var S=h.get("focus");mo(this,"ancestor"===S?r.getAncestorsIndices():"descendant"===S?r.getDescendantIndices():S,h.get("blurScope"),h.get("disabled"))},t.prototype._updateLabel=function(e){var r=this,o=this.node.getModel(),i=o.getModel("label"),a=this.node.getLayout(),l=a.endAngle-a.startAngle,c=(a.startAngle+a.endAngle)/2,h=Math.cos(c),p=Math.sin(c),g=this,y=g.getTextContent(),b=this.node.dataIndex,_=i.get("minAngle")/180*Math.PI,w=i.get("show")&&!(null!=_&&Math.abs(l)<_);function S(M,A){return M.get(A)??i.get(A)}y.ignore=!w,Z(of,function(M){var A=o.getModel("normal"===M?"label":[M,"label"]),I="normal"===M,N=I?y:y.ensureState(M),L=e.getFormattedLabel(b,M);I&&(L=L||r.node.name),N.style=Or(A,{},null,"normal"!==M,!0),L&&(N.style.text=L);var R=A.get("show");null==R||I||(N.ignore=!R);var O,B=S(A,"position"),G=I?g:g.states[M],W=G.style.fill;G.textConfig={outsideFill:"inherit"===A.get("color")?W:null,inside:"outside"!==B};var Y=S(A,"distance")||0,X=S(A,"align"),J=S(A,"rotate"),ne=.5*Math.PI,oe=1.5*Math.PI,ie=Pa("tangential"===J?Math.PI/2-c:c),se=ie>ne&&!Yp(ie-ne)&&ie<oe;"outside"===B?(O=a.r+Y,X=se?"right":"left"):X&&"center"!==X?"left"===X?(O=a.r0+Y,X=se?"right":"left"):"right"===X&&(O=a.r-Y,X=se?"left":"right"):(O=l===2*Math.PI&&0===a.r0?0:(a.r+a.r0)/2,X="center"),N.style.align=X,N.style.verticalAlign=S(A,"verticalAlign")||"middle",N.x=O*h+a.cx,N.y=O*p+a.cy;var le=0;"radial"===J?le=Pa(-c)+(se?Math.PI:0):"tangential"===J?le=Pa(Math.PI/2-c)+(se?Math.PI:0):dt(J)&&(le=J*Math.PI/180),N.rotation=Pa(le)}),y.dirtyStyle()},t}(Ti),In="sunburstRootToNode",hn="sunburstHighlight",ir=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o,i){var a=this;this.seriesModel=e,this.api=o,this.ecModel=r;var _,w,l=e.getData(),c=l.tree.root,h=e.getViewRoot(),p=this.group,g=e.get("renderLabelForZeroData"),y=[];h.eachNode(function(_){y.push(_)}),function(_,w){function S(A){return A.getId()}function M(A,I){!function(N,L){if(g||!N||N.getValue()||(N=null),N!==c&&L!==c)if(L&&L.piece)N?(L.piece.updateData(!1,N,e,r,o),l.setItemGraphicEl(N.dataIndex,L.piece)):(O=L)&&O.piece&&(p.remove(O.piece),O.piece=null);else if(N){var R=new dn(N,e,r,o);p.add(R),l.setItemGraphicEl(N.dataIndex,R)}var O}(null==A?null:_[A],null==I?null:w[I])}0===_.length&&0===w.length||new Js(w,_,S,S).add(M).update(M).remove(_t(M,null)).execute()}(y,this._oldChildren||[]),_=c,(w=h).depth>0?(a.virtualPiece?a.virtualPiece.updateData(!1,_,e,r,o):(a.virtualPiece=new dn(_,e,r,o),p.add(a.virtualPiece)),w.piece.off("click"),a.virtualPiece.on("click",function(S){a._rootToNode(w.parentNode)})):a.virtualPiece&&(p.remove(a.virtualPiece),a.virtualPiece=null),this._initEvents(),this._oldChildren=y},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(r){var o=!1;e.seriesModel.getViewRoot().eachNode(function(i){if(!o&&i.piece&&i.piece===r.target){var a=i.getModel().get("nodeClick");if("rootToNode"===a)e._rootToNode(i);else if("link"===a){var l=i.getModel(),c=l.get("link");c&&Dm(c,l.get("target",!0)||"_blank")}o=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:In,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,r){var o=r.getData().getItemLayout(0);if(o){var i=e[0]-o.cx,a=e[1]-o.cy,l=Math.sqrt(i*i+a*a);return l<=o.r&&l>=o.r0}},t.type="sunburst",t}(vr),Nr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.ignoreStyleOnData=!0,e}return Ce(t,n),t.prototype.getInitialData=function(e,r){var o={name:e.name,children:e.data};vt(o);var i=this._levelModels=j(e.levels||[],function(l){return new gr(l,this,r)},this),a=$b.createTree(o,this,function(l){l.wrapMethod("getItemModel",function(c,h){var p=a.getNodeByDataIndex(h),g=i[p.depth];return g&&(c.parentModel=g),c})});return a.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(e){var r=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return r.treePathInfo=Zy(o,this),r},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var r=this.getRawData().tree.root;e&&(e===r||r.contains(e))||(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){C2(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(Pr);function vt(n){var t=0;Z(n.children,function(r){vt(r);var o=r.value;Ee(o)&&(o=o[0]),t+=o});var e=n.value;Ee(e)&&(e=e[0]),(null==e||isNaN(e))&&(e=t),e<0&&(e=0),Ee(n.value)?n.value[0]=e:n.value=e}var Xt=Math.PI/180;function mr(n,t,e){t.eachSeriesByType(n,function(r){var o=r.get("center"),i=r.get("radius");Ee(i)||(i=[0,i]),Ee(o)||(o=[o,o]);var a=e.getWidth(),l=e.getHeight(),c=Math.min(a,l),h=Ct(o[0],a),p=Ct(o[1],l),g=Ct(i[0],c/2),y=Ct(i[1],c/2),b=-r.get("startAngle")*Xt,_=r.get("minAngle")*Xt,w=r.getData().tree.root,S=r.getViewRoot(),M=S.depth,A=r.get("sort");null!=A&&Er(S,A);var I=0;Z(S.children,function(ie){!isNaN(ie.getValue())&&I++});var N=S.getValue(),L=Math.PI/(N||I)*2,R=S.depth>0,B=(y-g)/(S.height-(R?-1:1)||1),G=r.get("clockwise"),W=r.get("stillShowZeroSum"),Y=G?1:-1,X=function(ie,se){if(ie){var le=se;if(ie!==w){var pe=ie.getValue(),me=0===N&&W?L:pe*L;me<_&&(me=_),le=se+Y*me;var ve=ie.depth-M-(R?-1:1),He=g+B*ve,nt=g+B*(ve+1),Me=r.getLevelModel(ie);if(Me){var je=Me.get("r0",!0),tt=Me.get("r",!0),ut=Me.get("radius",!0);null!=ut&&(je=ut[0],tt=ut[1]),null!=je&&(He=Ct(je,c/2)),null!=tt&&(nt=Ct(tt,c/2))}ie.setLayout({angle:me,startAngle:se,endAngle:le,clockwise:G,cx:h,cy:p,r0:He,r:nt})}if(ie.children&&ie.children.length){var pt=0;Z(ie.children,function(St){pt+=X(St,se+pt)})}return le-se}};if(R){var oe=2*Math.PI;w.setLayout({angle:oe,startAngle:b,endAngle:b+oe,clockwise:G,cx:h,cy:p,r0:g,r:g+B})}X(S,b)})}function Er(n,t){var e=n.children||[];n.children=function(r,o){if(Se(o)){var i=j(r,function(l,c){var h=l.getValue();return{params:{depth:l.depth,height:l.height,dataIndex:l.dataIndex,getValue:function(){return h}},index:c}});return i.sort(function(l,c){return o(l.params,c.params)}),j(i,function(l){return r[l.index]})}var a="asc"===o;return r.sort(function(l,c){var h=(l.getValue()-c.getValue())*(a?1:-1);return 0===h?(l.dataIndex-c.dataIndex)*(a?-1:1):h})}(e,t),e.length&&Z(n.children,function(r){Er(r,t)})}function wo(n){var t={};n.eachSeriesByType("sunburst",function(e){var r=e.getData(),o=r.tree;o.eachNode(function(i){var a=i.getModel().getModel("itemStyle").getItemStyle();a.fill||(a.fill=function(l,c,h){for(var p=l;p&&p.depth>1;)p=p.parentNode;var g=c.getColorFromPalette(p.name||p.dataIndex+"",t);return l.depth>1&&bt(g)&&(g=Bc(g,(l.depth-1)/(h-1)*.5)),g}(i,e,o.root.height)),De(r.ensureUniqueItemVisual(i.dataIndex,"style"),a)})})}var Pi={color:"fill",borderColor:"stroke"},nl={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},ho=Gn(),wa=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,r){return hu(null,this)},t.prototype.getDataParams=function(e,r,o){var i=n.prototype.getDataParams.call(this,e,r);return o&&(i.info=ho(o).info),i},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Pr);function So(n,t){return t=t||[0,0],j(["x","y"],function(e,r){var o=this.getAxis(e),i=t[r],a=n[r]/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(i-a)-o.dataToCoord(i+a))},this)}function $a(n,t){return t=t||[0,0],j([0,1],function(e){var r=t[e],o=n[e]/2,i=[],a=[];return i[e]=r-o,a[e]=r+o,i[1-e]=a[1-e]=t[1-e],Math.abs(this.dataToPoint(i)[e]-this.dataToPoint(a)[e])},this)}function Mu(n,t){var e=this.getAxis(),r=t instanceof Array?t[0]:t,o=(n instanceof Array?n[0]:n)/2;return"category"===e.type?e.getBandWidth():Math.abs(e.dataToCoord(r-o)-e.dataToCoord(r+o))}function kc(n,t){return t=t||[0,0],j(["Radius","Angle"],function(e,r){var o=this["get"+e+"Axis"](),i=t[r],a=n[r]/2,l="category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(i-a)-o.dataToCoord(i+a));return"Angle"===e&&(l=l*Math.PI/180),l},this)}function Hd(n,t,e,r){return n&&(n.legacy||!1!==n.legacy&&!e&&!r&&"tspan"!==t&&("text"===t||Lt(n,"text")))}function Wx(n,t,e){var r,o,i,a=n;if("text"===t)i=a;else{i={},Lt(a,"text")&&(i.text=a.text),Lt(a,"rich")&&(i.rich=a.rich),Lt(a,"textFill")&&(i.fill=a.textFill),Lt(a,"textStroke")&&(i.stroke=a.textStroke),Lt(a,"fontFamily")&&(i.fontFamily=a.fontFamily),Lt(a,"fontSize")&&(i.fontSize=a.fontSize),Lt(a,"fontStyle")&&(i.fontStyle=a.fontStyle),Lt(a,"fontWeight")&&(i.fontWeight=a.fontWeight),o={type:"text",style:i,silent:!0},r={};var l=Lt(a,"textPosition");e?r.position=l?a.textPosition:"inside":l&&(r.position=a.textPosition),Lt(a,"textPosition")&&(r.position=a.textPosition),Lt(a,"textOffset")&&(r.offset=a.textOffset),Lt(a,"textRotation")&&(r.rotation=a.textRotation),Lt(a,"textDistance")&&(r.distance=a.textDistance)}return Ss(i,n),Z(i.rich,function(c){Ss(c,c)}),{textConfig:r,textContent:o}}function Ss(n,t){t&&(t.font=t.textFont||t.font,Lt(t,"textStrokeWidth")&&(n.lineWidth=t.textStrokeWidth),Lt(t,"textAlign")&&(n.align=t.textAlign),Lt(t,"textVerticalAlign")&&(n.verticalAlign=t.textVerticalAlign),Lt(t,"textLineHeight")&&(n.lineHeight=t.textLineHeight),Lt(t,"textWidth")&&(n.width=t.textWidth),Lt(t,"textHeight")&&(n.height=t.textHeight),Lt(t,"textBackgroundColor")&&(n.backgroundColor=t.textBackgroundColor),Lt(t,"textPadding")&&(n.padding=t.textPadding),Lt(t,"textBorderColor")&&(n.borderColor=t.textBorderColor),Lt(t,"textBorderWidth")&&(n.borderWidth=t.textBorderWidth),Lt(t,"textBorderRadius")&&(n.borderRadius=t.textBorderRadius),Lt(t,"textBoxShadowColor")&&(n.shadowColor=t.textBoxShadowColor),Lt(t,"textBoxShadowBlur")&&(n.shadowBlur=t.textBoxShadowBlur),Lt(t,"textBoxShadowOffsetX")&&(n.shadowOffsetX=t.textBoxShadowOffsetX),Lt(t,"textBoxShadowOffsetY")&&(n.shadowOffsetY=t.textBoxShadowOffsetY))}function Ic(n,t,e){var r=n;r.textPosition=r.textPosition||e.position||"inside",null!=e.offset&&(r.textOffset=e.offset),null!=e.rotation&&(r.textRotation=e.rotation),null!=e.distance&&(r.textDistance=e.distance);var o=r.textPosition.indexOf("inside")>=0,i=n.fill||"#000";No(r,t);var a=null==r.textFill;return o?a&&(r.textFill=e.insideFill||"#fff",!r.textStroke&&e.insideStroke&&(r.textStroke=e.insideStroke),!r.textStroke&&(r.textStroke=i),null==r.textStrokeWidth&&(r.textStrokeWidth=2)):(a&&(r.textFill=n.fill||e.outsideFill||"#000"),!r.textStroke&&e.outsideStroke&&(r.textStroke=e.outsideStroke)),r.text=t.text,r.rich=t.rich,Z(t.rich,function(l){No(l,l)}),r}function No(n,t){t&&(Lt(t,"fill")&&(n.textFill=t.fill),Lt(t,"stroke")&&(n.textStroke=t.fill),Lt(t,"lineWidth")&&(n.textStrokeWidth=t.lineWidth),Lt(t,"font")&&(n.font=t.font),Lt(t,"fontStyle")&&(n.fontStyle=t.fontStyle),Lt(t,"fontWeight")&&(n.fontWeight=t.fontWeight),Lt(t,"fontSize")&&(n.fontSize=t.fontSize),Lt(t,"fontFamily")&&(n.fontFamily=t.fontFamily),Lt(t,"align")&&(n.textAlign=t.align),Lt(t,"verticalAlign")&&(n.textVerticalAlign=t.verticalAlign),Lt(t,"lineHeight")&&(n.textLineHeight=t.lineHeight),Lt(t,"width")&&(n.textWidth=t.width),Lt(t,"height")&&(n.textHeight=t.height),Lt(t,"backgroundColor")&&(n.textBackgroundColor=t.backgroundColor),Lt(t,"padding")&&(n.textPadding=t.padding),Lt(t,"borderColor")&&(n.textBorderColor=t.borderColor),Lt(t,"borderWidth")&&(n.textBorderWidth=t.borderWidth),Lt(t,"borderRadius")&&(n.textBorderRadius=t.borderRadius),Lt(t,"shadowColor")&&(n.textBoxShadowColor=t.shadowColor),Lt(t,"shadowBlur")&&(n.textBoxShadowBlur=t.shadowBlur),Lt(t,"shadowOffsetX")&&(n.textBoxShadowOffsetX=t.shadowOffsetX),Lt(t,"shadowOffsetY")&&(n.textBoxShadowOffsetY=t.shadowOffsetY),Lt(t,"textShadowColor")&&(n.textShadowColor=t.textShadowColor),Lt(t,"textShadowBlur")&&(n.textShadowBlur=t.textShadowBlur),Lt(t,"textShadowOffsetX")&&(n.textShadowOffsetX=t.textShadowOffsetX),Lt(t,"textShadowOffsetY")&&(n.textShadowOffsetY=t.textShadowOffsetY))}var mi={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},xp=vn(mi),Tl=(Jr(ls,function(n,t){return n[t]=1,n},{}),ls.join(", "),["","style","shape","extra"]),Al=Gn();function Ux(n,t,e,r,o){var i=n+"Animation",a=mf(n,r,o)||{},l=Al(t).userDuring;return a.duration>0&&(a.during=l?Fe(ON,{el:t,userDuring:l}):null,a.setToFinal=!0,a.scope=n),De(a,e[i]),a}function fv(n,t,e,r){var o=(r=r||{}).dataIndex,i=r.isInit,a=r.clearStyle,l=e.isAnimationEnabled(),c=Al(n),h=t.style;c.userDuring=t.during;var _,w,p={},g={};if(function(_,w,S){for(var M=0;M<xp.length;M++){var A=xp[M],I=mi[A],N=w[A];N&&(S[I[0]]=N[0],S[I[1]]=N[1])}for(M=0;M<ls.length;M++){var L=ls[M];null!=w[L]&&(S[L]=w[L])}}(0,t,g),mv("shape",t,g),mv("extra",t,g),!i&&l&&(function(_,w,S){for(var M=w.transition,A=Dc(M)?ls:Dr(M||[]),I=0;I<A.length;I++){var N=A[I];"style"!==N&&"shape"!==N&&"extra"!==N&&(S[N]=_[N])}}(n,t,p),HT("shape",n,t,p),HT("extra",n,t,p),function(_,w,S,M){if(S){var A,I=_.style;if(I){var N=S.transition,L=w.transition;if(N&&!Dc(N)){var R=Dr(N);!A&&(A=M.style={});for(var O=0;O<R.length;O++){var B=I[X=R[O]];A[X]=B}}else if(_.getAnimationStyleProps&&(Dc(L)||Dc(N)||$t(L,"style")>=0)){var G=_.getAnimationStyleProps(),W=G?G.style:null;if(W){!A&&(A=M.style={});var Y=vn(S);for(O=0;O<Y.length;O++){var X;W[X=Y[O]]&&(A[X]=B=I[X])}}}}}}(n,t,h,p)),g.style=h,function(_,w,S){var M=w.style;if(!_.isGroup&&M){if(S){_.useStyle({});for(var A=_.animators,I=0;I<A.length;I++){var N=A[I];"style"===N.targetName&&N.changeTarget(_.style)}}_.setStyle(M)}w&&(w.style=null,w&&_.attr(w),w.style=M)}(n,g,a),_=n,Lt(w=t,"silent")&&(_.silent=w.silent),Lt(w,"ignore")&&(_.ignore=w.ignore),_ instanceof hs&&Lt(w,"invisible")&&(_.invisible=w.invisible),_ instanceof Yn&&Lt(w,"autoBatch")&&(_.autoBatch=w.autoBatch),l)if(i){var y={};Z(Tl,function(_){var w=_?t[_]:t;w&&w.enterFrom&&(_&&(y[_]=y[_]||{}),De(_?y[_]:y,w.enterFrom))});var b=Ux("enter",n,t,e,o);b.duration>0&&n.animateFrom(y,b)}else!function(_,w,S,M,A){if(A){var I=Ux("update",_,w,M,S);I.duration>0&&_.animateFrom(A,I)}}(n,t,o||0,e,p);RN(n,t),h?n.dirty():n.markRedraw()}function RN(n,t){for(var e=Al(n).leaveToProps,r=0;r<Tl.length;r++){var o=Tl[r],i=o?t[o]:t;i&&i.leaveTo&&(e||(e=Al(n).leaveToProps={}),o&&(e[o]=e[o]||{}),De(o?e[o]:e,i.leaveTo))}}function _p(n,t,e,r){if(n){var o=n.parent,i=Al(n).leaveToProps;if(i){var a=Ux("update",n,t,e,0);a.done=function(){o.remove(n),r&&r()},n.animateTo(i,a)}else o.remove(n),r&&r()}}function Dc(n){return"all"===n}var ra={},gv={setTransform:function(n,t){return ra.el[n]=t,this},getTransform:function(n){return ra.el[n]},setShape:function(n,t){var e=ra.el;return(e.shape||(e.shape={}))[n]=t,e.dirtyShape&&e.dirtyShape(),this},getShape:function(n){var t=ra.el.shape;if(t)return t[n]},setStyle:function(n,t){var e=ra.el,r=e.style;return r&&(r[n]=t,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(n){var t=ra.el.style;if(t)return t[n]},setExtra:function(n,t){return(ra.el.extra||(ra.el.extra={}))[n]=t,this},getExtra:function(n){var t=ra.el.extra;if(t)return t[n]}};function ON(){var n=this,t=n.el;if(t){var e=Al(t).userDuring,r=n.userDuring;e===r?(ra.el=t,r(gv)):n.el=n.userDuring=null}}function HT(n,t,e,r){var o=e[n];if(o){var i,a=t[n];if(a){var l=e.transition,c=o.transition;if(c)if(!i&&(i=r[n]={}),Dc(c))De(i,a);else for(var h=Dr(c),p=0;p<h.length;p++){var g=a[b=h[p]];i[b]=g}else if(Dc(l)||$t(l,n)>=0){!i&&(i=r[n]={});var y=vn(a);for(p=0;p<y.length;p++){var b;g=a[b=y[p]],Nc(o[b],g)&&(i[b]=g)}}}}}function mv(n,t,e){var r=t[n];if(r)for(var o=e[n]={},i=vn(r),a=0;a<i.length;a++){var l=i[a];o[l]=fn(r[l])}}function Nc(n,t){return Mn(n)?n!==t:null!=n&&isFinite(n)}var WT=Gn(),PN=["percent","easing","shape","style","extra"];function UT(n){n.stopAnimation("keyframe"),n.attr(WT(n))}function yv(n,t,e){if(e.isAnimationEnabled()&&t)if(Ee(t))Z(t,function(l){yv(n,l,e)});else{var r=t.keyframes,o=t.duration;if(e&&null==o){var i=mf("enter",e,0);o=i&&i.duration}if(r&&o){var a=WT(n);Z(Tl,function(l){var c;l&&!n[l]||(r.sort(function(h,p){return h.percent-p.percent}),Z(r,function(h){var p=n.animators,g=l?h[l]:h;if(g){var y=vn(g);if(l||(y=Xn(y,function(w){return $t(PN,w)<0})),y.length){c||((c=n.animate(l,t.loop,!0)).scope="keyframe");for(var b=0;b<p.length;b++)p[b]!==c&&p[b].targetName===c.targetName&&p[b].stopTracks(y);l&&(a[l]=a[l]||{});var _=l?a[l]:a;Z(y,function(w){_[w]=((l?n[l]:n)||{})[w]}),c.whenWithKeys(o*h.percent,g,y,h.easing)}}}),c&&c.delay(t.delay||0).duration(o).start(t.easing))})}}}var Ec="emphasis",Ie="normal",Ht="blur",en="select",Qn=[Ie,Ec,Ht,en],Fr={normal:["itemStyle"],emphasis:[Ec,"itemStyle"],blur:[Ht,"itemStyle"],select:[en,"itemStyle"]},Ur={normal:["label"],emphasis:[Ec,"label"],blur:[Ht,"label"],select:[en,"label"]},$r=["x","y"],_r={normal:{},emphasis:{},blur:{},select:{}},Lg={cartesian2d:function(n){var t=n.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return n.dataToPoint(e)},size:Fe(So,n)}}},geo:function(n){var t=n.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:n.getZoom()},api:{coord:function(e){return n.dataToPoint(e)},size:Fe($a,n)}}},single:function(n){var t=n.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return n.dataToPoint(e)},size:Fe(Mu,n)}}},polar:function(n){var t=n.getRadiusAxis(),e=n.getAngleAxis(),r=t.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:r[1],r0:r[0]},api:{coord:function(o){var i=t.dataToRadius(o[0]),a=e.dataToAngle(o[1]),l=n.coordToPoint([i,a]);return l.push(i,a*Math.PI/180),l},size:Fe(kc,n)}}},calendar:function(n){var t=n.getRect(),e=n.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(r,o){return n.dataToPoint(r,o)}}}}};function jT(n){return n instanceof Yn}function jx(n){return n instanceof hs}var cO=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o,i){this._progressiveEls=null;var a=this._data,l=e.getData(),c=this.group,h=hO(e,l,r,o);a||c.removeAll(),l.diff(a).add(function(g){aR(o,null,g,h(g,i),e,c,l)}).remove(function(g){var y=a.getItemGraphicEl(g);y&&_p(y,ho(y).option,e)}).update(function(g,y){var b=a.getItemGraphicEl(y);aR(o,b,g,h(g,i),e,c,l)}).execute();var p=e.get("clip",!0)?Ya(e.coordinateSystem,!1,e):null;p?c.setClipPath(p):c.removeClipPath(),this._data=l},t.prototype.incrementalPrepareRender=function(e,r,o){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,r,o,i,a){var l=r.getData(),c=hO(r,l,o,i),h=this._progressiveEls=[];function p(b){b.isGroup||(b.incremental=!0,b.ensureState("emphasis").hoverLayer=!0)}for(var g=e.start;g<e.end;g++){var y=aR(null,null,g,c(g,a),r,this.group,l);y&&(y.traverse(p),h.push(y))}},t.prototype.eachRendered=function(e){Qu(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,r,o,i){var a=r.element;if(null==a||o.name===a)return!0;for(;(o=o.__hostTarget||o.parent)&&o!==this.group;)if(o.name===a)return!0;return!1},t.type="custom",t}(vr);function oR(n){var t,e=n.type;if("path"===e){var r=n.shape,o=null!=r.width&&null!=r.height?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,i=yO(r);t=bm(i,null,o,r.layout||"center"),ho(t).customPathData=i}else if("image"===e)t=new jo({}),ho(t).customImagePath=n.style.image;else if("text"===e)t=new Kn({});else if("group"===e)t=new on;else{if("compoundPath"===e)throw new Error('"compoundPath" is not supported yet.');var a=v0(e);a||En(""),t=new a}return ho(t).customGraphicType=e,t.name=n.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function iR(n,t,e,r,o,i,a){UT(t);var l=o&&o.normal.cfg;l&&t.setTextConfig(l),r&&null==r.transition&&(r.transition=$r);var c=r&&r.style;if(c){if("text"===t.type){var h=c;Lt(h,"textFill")&&(h.fill=h.textFill),Lt(h,"textStroke")&&(h.stroke=h.textStroke)}var p=void 0,g=jT(t)?c.decal:null;n&&g&&(g.dirty=!0,p=pd(g,n)),c.__decalPattern=p}jx(t)&&c&&(p=c.__decalPattern)&&(c.decal=p),fv(t,r,i,{dataIndex:e,isInit:a,clearStyle:!0}),yv(t,r.keyframeAnimation,i)}function dO(n,t,e,r,o){var i=t.isGroup?null:t,a=o&&o[n].cfg;if(i){var l=i.ensureState(n);if(!1===r){var c=i.getState(n);c&&(c.style=null)}else l.style=r||null;a&&(l.textConfig=a),$c(i)}}function $B(n,t,e){var r=e===Ie,o=r?t:BN(t,e),i=o?o.z2:null;null!=i&&((r?n:n.ensureState(e)).z2=i||0)}function hO(n,t,e,r){var o=n.get("renderItem"),i=n.coordinateSystem,a={};i&&(a=i.prepareCustoms?i.prepareCustoms(i):Lg[i.type](i));for(var l,c,h=Pe({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:function(R,O){return null==O&&(O=l),t.getStore().get(t.getDimensionIndex(R||0),O)},style:function(R,O){null==O&&(O=l);var B=t.getItemVisual(O,"style"),G=B&&B.fill,W=B&&B.opacity,Y=A(O,Ie).getItemStyle();null!=G&&(Y.fill=G),null!=W&&(Y.opacity=W);var X={inheritColor:bt(G)?G:"#000"},J=I(O,Ie),ne=Or(J,null,X,!1,!0);ne.text=J.getShallow("show")?We(n.getFormattedLabel(O,Ie),xd(t,O)):null;var oe=ed(J,X,!1);return L(R,Y),Y=Ic(Y,ne,oe),R&&N(Y,R),Y.legacy=!0,Y},ordinalRawValue:function(R,O){null==O&&(O=l);var B=t.getDimensionInfo(R=R||0);if(!B){var G=t.getDimensionIndex(R);return G>=0?t.getStore().get(G,O):void 0}var W=t.get(B.name,O),Y=B&&B.ordinalMeta;return Y?Y.categories[W]:W},styleEmphasis:function(R,O){null==O&&(O=l);var B=A(O,Ec).getItemStyle(),G=I(O,Ec),W=Or(G,null,null,!0,!0);W.text=G.getShallow("show")?An(n.getFormattedLabel(O,Ec),n.getFormattedLabel(O,Ie),xd(t,O)):null;var Y=ed(G,null,!0);return L(R,B),B=Ic(B,W,Y),R&&N(B,R),B.legacy=!0,B},visual:function(R,O){if(null==O&&(O=l),Lt(Pi,R)){var B=t.getItemVisual(O,"style");return B?B[Pi[R]]:null}if(Lt(nl,R))return t.getItemVisual(O,R)},barLayout:function(R){if("cartesian2d"===i.type)return function(O){var B=[],G=O.axis,W="axis0";if("category"===G.type){for(var Y=G.getBandWidth(),X=0;X<O.count;X++)B.push(Pe({bandWidth:Y,axisKey:W,stackId:ZS+X},O));var J=V1(B),ne=[];for(X=0;X<O.count;X++){var oe=J[W][ZS+X];oe.offsetCenter=oe.offset+oe.width/2,ne.push(oe)}return ne}}(Pe({axis:i.getBaseAxis()},R))},currentSeriesIndices:function(){return e.getCurrentSeriesIndices()},font:function(R){return sw(R,e)}},a.api||{}),p={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:KB(n.getData())},g={},y={},b={},_={},w=0;w<Qn.length;w++){var S=Qn[w];b[S]=n.getModel(Fr[S]),_[S]=n.getModel(Ur[S])}function M(R){return R===l?c||(c=t.getItemModel(R)):t.getItemModel(R)}function A(R,O){return t.hasItemOption?R===l?g[O]||(g[O]=M(R).getModel(Fr[O])):M(R).getModel(Fr[O]):b[O]}function I(R,O){return t.hasItemOption?R===l?y[O]||(y[O]=M(R).getModel(Ur[O])):M(R).getModel(Ur[O]):_[O]}return function(R,O){return l=R,c=null,g={},y={},o&&o(Pe({dataIndexInside:R,dataIndex:t.getRawIndex(R),actionType:O?O.type:null},p),h)};function N(R,O){for(var B in O)Lt(O,B)&&(R[B]=O[B])}function L(R,O){R&&(R.textFill&&(O.textFill=R.textFill),R.textPosition&&(O.textPosition=R.textPosition))}}function KB(n){var t={};return Z(n.dimensions,function(e){var r=n.getDimensionInfo(e);if(!r.isExtraCoord){var o=r.coordDim;(t[o]=t[o]||[])[r.coordDimIndex]=n.getDimensionIndex(e)}}),t}function aR(n,t,e,r,o,i,a){if(r){var l=sR(n,t,e,r,o,i);return l&&a.setItemGraphicEl(e,l),l&&mo(l,r.focus,r.blurScope,r.emphasisDisabled),l}i.remove(t)}function sR(n,t,e,r,o,i){var a=-1,l=t;t&&pO(t,r,o)&&(a=$t(i.childrenRef(),t),t=null);var c,h,p=!t,g=t;g?g.clearStates():(g=oR(r),l&&((h=g).copyTransform(c=l),jx(h)&&jx(c)&&(h.setStyle(c.style),h.z=c.z,h.z2=c.z2,h.zlevel=c.zlevel,h.invisible=c.invisible,h.ignore=c.ignore,jT(h)&&jT(c)&&h.setShape(c.shape)))),!1===r.morph?g.disableMorphing=!0:g.disableMorphing&&(g.disableMorphing=!1),_r.normal.cfg=_r.normal.conOpt=_r.emphasis.cfg=_r.emphasis.conOpt=_r.blur.cfg=_r.blur.conOpt=_r.select.cfg=_r.select.conOpt=null,_r.isLegacy=!1,function(w,S,M,A,I,N){if(!w.isGroup){fO(M,null,N),fO(M,Ec,N);var L=N.normal.conOpt;if(null!=L||null!=N.emphasis.conOpt||null!=N.select.conOpt||null!=N.blur.conOpt){var G=w.getTextContent();if(!1===L)G&&w.removeTextContent();else{L=N.normal.conOpt=L||{type:"text"},G?G.clearStates():(G=oR(L),w.setTextContent(G)),iR(null,G,S,L,null,A,I);for(var W=L&&L.style,Y=0;Y<Qn.length;Y++){var X=Qn[Y];X!==Ie&&dO(X,G,0,lR(L,N[X].conOpt,X),null)}W?G.dirty():G.markRedraw()}}}}(g,e,r,o,p,_r),function(w,S,M,A,I){var N=M.clipPath;if(!1===N)w&&w.getClipPath()&&w.removeClipPath();else if(N){var L=w.getClipPath();L&&pO(L,N,A)&&(L=null),L||(L=oR(N),w.setClipPath(L)),iR(null,L,S,N,null,A,I)}}(g,e,r,o,p),iR(n,g,e,r,_r,o,p),Lt(r,"info")&&(ho(g).info=r.info);for(var y=0;y<Qn.length;y++){var b=Qn[y];b!==Ie&&dO(b,g,0,lR(r,BN(r,b),b),_r)}return function(w,S,M){if(!w.isGroup){var A=w,N=M.currentZLevel;A.z=M.currentZ,A.zlevel=N;var L=S.z2;null!=L&&(A.z2=L||0);for(var R=0;R<Qn.length;R++)$B(A,S,Qn[R])}}(g,r,o),"group"===r.type&&function(w,S,M,A,I){var N=A.children,L=N?N.length:0,R=A.$mergeChildren,O="byName"===R||A.diffChildrenByName,B=!1===R;if(L||O||B){if(O)return G={api:w,oldChildren:S.children()||[],newChildren:N||[],dataIndex:M,seriesModel:I,group:S},void new Js(G.oldChildren,G.newChildren,gO,gO,G).add(mO).update(mO).remove(QB).execute();var G;B&&S.removeAll();for(var W=0;W<L;W++){var Y=N[W],X=S.childAt(W);Y?(null==Y.ignore&&(Y.ignore=!1),sR(w,X,M,Y,I,S)):X.ignore=!0}for(var J=S.childCount()-1;J>=W;J--){var ne=S.childAt(J);JB(S,ne,I)}}}(n,g,e,r,o),a>=0?i.replaceAt(g,a):i.add(g),g}function pO(n,t,e){var r,o=ho(n),i=t.type,a=t.shape,l=t.style;return e.isUniversalTransitionEnabled()||null!=i&&i!==o.customGraphicType||"path"===i&&(r=a)&&(Lt(r,"pathData")||Lt(r,"d"))&&yO(a)!==o.customPathData||"image"===i&&Lt(l,"image")&&l.image!==o.customImagePath}function fO(n,t,e){var r=t?BN(n,t):n,o=t?lR(n,r,Ec):n.style,i=n.type,a=r?r.textConfig:null,l=n.textContent,c=l?t?BN(l,t):l:null;if(o&&(e.isLegacy||Hd(o,i,!!a,!!c))){e.isLegacy=!0;var h=Wx(o,i,!t);!a&&h.textConfig&&(a=h.textConfig),!c&&h.textContent&&(c=h.textContent)}!t&&c&&!c.type&&(c.type="text");var g=t?e[t]:e.normal;g.cfg=a,g.conOpt=c}function BN(n,t){return t?n?n[t]:null:n}function lR(n,t,e){var r=t&&t.style;return null==r&&e===Ec&&n&&(r=n.styleEmphasis),r}function JB(n,t,e){t&&_p(t,ho(n).option,e)}function gO(n,t){return(n&&n.name)??"e\0\0"+t}function mO(n,t){var e=this.context;sR(e.api,null!=t?e.oldChildren[t]:null,e.dataIndex,null!=n?e.newChildren[n]:null,e.seriesModel,e.group)}function QB(n){var t=this.context,e=t.oldChildren[n];e&&_p(e,ho(e).option,t.seriesModel)}function yO(n){return n&&(n.pathData||n.d)}var vv=Gn(),vO=jt,uR=Fe,cR=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(t,e,r,o){var i=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=r,o||this._lastValue!==i||this._lastStatus!==a){this._lastValue=i,this._lastStatus=a;var l=this._group,c=this._handle;if(!a||"hide"===a)return l&&l.hide(),void(c&&c.hide());l&&l.show(),c&&c.show();var h={};this.makeElOption(h,i,t,e,r);var p=h.graphicKey;p!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=p;var g=this._moveAnimation=this.determineAnimation(t,e);if(l){var y=_t(bO,e,g);this.updatePointerEl(l,h,y),this.updateLabelEl(l,h,y,e)}else l=this._group=new on,this.createPointerEl(l,h,t,e),this.createLabelEl(l,h,t,e),r.getZr().add(l);wO(l,e,!0),this._renderHandle(i)}},n.prototype.remove=function(t){this.clear(t)},n.prototype.dispose=function(t){this.clear(t)},n.prototype.determineAnimation=function(t,e){var r=e.get("animation"),o=t.axis,i="category"===o.type,a=e.get("snap");if(!a&&!i)return!1;if("auto"===r||null==r){var l=this.animationThreshold;if(i&&o.getBandWidth()>l)return!0;if(a){var c=op(t).seriesDataCount,h=o.getExtent();return Math.abs(h[0]-h[1])/c>l}return!1}return!0===r},n.prototype.makeElOption=function(t,e,r,o,i){},n.prototype.createPointerEl=function(t,e,r,o){var i=e.pointer;if(i){var a=vv(t).pointerEl=new Qc[i.type](vO(e.pointer));t.add(a)}},n.prototype.createLabelEl=function(t,e,r,o){if(e.label){var i=vv(t).labelEl=new Kn(vO(e.label));t.add(i),_O(i,o)}},n.prototype.updatePointerEl=function(t,e,r){var o=vv(t).pointerEl;o&&e.pointer&&(o.setStyle(e.pointer.style),r(o,{shape:e.pointer.shape}))},n.prototype.updateLabelEl=function(t,e,r,o){var i=vv(t).labelEl;i&&(i.setStyle(e.label.style),r(i,{x:e.label.x,y:e.label.y}),_O(i,o))},n.prototype._renderHandle=function(t){if(!this._dragging&&this.updateHandleTransform){var e,r=this._axisPointerModel,o=this._api.getZr(),i=this._handle,a=r.getModel("handle"),l=r.get("status");if(!a.get("show")||!l||"hide"===l)return i&&o.remove(i),void(this._handle=null);this._handle||(e=!0,i=this._handle=tu(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(h){Qa(h.event)},onmousedown:uR(this._onHandleDragMove,this,0,0),drift:uR(this._onHandleDragMove,this),ondragend:uR(this._onHandleDragEnd,this)}),o.add(i)),wO(i,r,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var c=a.get("size");Ee(c)||(c=[c,c]),i.scaleX=c[0]/2,i.scaleY=c[1]/2,Fh(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},n.prototype._moveHandleToValue=function(t,e){bO(this._axisPointerModel,!e&&this._moveAnimation,this._handle,dR(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(t,e){var r=this._handle;if(r){this._dragging=!0;var o=this.updateHandleTransform(dR(r),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=o,r.stopAnimation(),r.attr(dR(o)),vv(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),r=this._group,o=this._handle;e&&r&&(this._lastGraphicKey=null,r&&e.remove(r),o&&e.remove(o),this._group=null,this._handle=null,this._payloadInfo=null),Hf(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(t,e,r){return{x:t[r=r||0],y:t[1-r],width:e[r],height:e[1-r]}},n}();function bO(n,t,e,r){xO(vv(e).lastProp,r)||(vv(e).lastProp=r,t?hr(e,r,n):(e.stopAnimation(),e.attr(r)))}function xO(n,t){if(Ft(n)&&Ft(t)){var e=!0;return Z(t,function(r,o){e=e&&xO(n[o],r)}),!!e}return n===t}function _O(n,t){n[t.get(["label","show"])?"show":"hide"]()}function dR(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function wO(n,t,e){var r=t.get("z"),o=t.get("zlevel");n&&n.traverse(function(i){"group"!==i.type&&(null!=r&&(i.z=r),null!=o&&(i.zlevel=o),i.silent=e)})}function hR(n){var t,e=n.get("type"),r=n.getModel(e+"Style");return"line"===e?(t=r.getLineStyle()).fill=null:"shadow"===e&&((t=r.getAreaStyle()).stroke=null),t}function SO(n,t,e,r,o){var i=CO(e.get("value"),t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),a=e.getModel("label"),l=ru(a.get("padding")||0),c=a.getFont(),h=Ug(i,c),p=o.position,g=h.width+l[1]+l[3],y=h.height+l[0]+l[2],b=o.align;"right"===b&&(p[0]-=g),"center"===b&&(p[0]-=g/2);var S,M,A,I,N,L,_=o.verticalAlign;"bottom"===_&&(p[1]-=y),"middle"===_&&(p[1]-=y/2),S=p,M=g,A=y,N=(I=r).getWidth(),L=I.getHeight(),S[0]=Math.min(S[0]+M,N)-M,S[1]=Math.min(S[1]+A,L)-A,S[0]=Math.max(S[0],0),S[1]=Math.max(S[1],0);var w=a.get("backgroundColor");w&&"auto"!==w||(w=t.get(["axisLine","lineStyle","color"])),n.label={x:p[0],y:p[1],style:Or(a,{text:i,font:c,fill:a.getTextColor(),padding:l,backgroundColor:w}),z2:10}}function CO(n,t,e,r,o){n=t.scale.parse(n);var i=t.scale.getLabel({value:n},{precision:o.precision}),a=o.formatter;if(a){var l={value:U1(t,{value:n}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};Z(r,function(c){var h=e.getSeriesByIndex(c.seriesIndex),g=h&&h.getDataParams(c.dataIndexInside);g&&l.seriesData.push(g)}),bt(a)?i=a.replace("{value}",i):Se(a)&&(i=a(l))}return i}function pR(n,t,e){var r=[1,0,0,1,0,0];return Eo(r,r,e.rotation),es(r,r,e.position),gl([n.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],r)}function MO(n,t,e,r,o,i){var a=ta.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=o.get(["label","margin"]),SO(t,r,o,i,{position:pR(r.axis,n,e),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function fR(n,t,e){return{x1:n[e=e||0],y1:n[1-e],x2:t[e],y2:t[1-e]}}function TO(n,t,e){return{x:n[e=e||0],y:n[1-e],width:t[e],height:t[1-e]}}function AO(n,t,e,r,o,i){return{cx:n,cy:t,r0:e,r,startAngle:o,endAngle:i,clockwise:!0}}var ez=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.makeElOption=function(e,r,o,i,a){var l=o.axis,c=l.grid,h=i.get("type"),p=kO(c,l).getOtherAxis(l).getGlobalExtent(),g=l.toGlobalCoord(l.dataToCoord(r,!0));if(h&&"none"!==h){var y=hR(i),b=tz[h](l,g,p);b.style=y,e.graphicKey=b.type,e.pointer=b}MO(r,e,tM(c.model,o),o,i,a)},t.prototype.getHandleTransform=function(e,r,o){var i=tM(r.axis.grid.model,r,{labelInside:!1});i.labelMargin=o.get(["handle","margin"]);var a=pR(r.axis,e,i);return{x:a[0],y:a[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,r,o,i){var a=o.axis,l=a.grid,c=a.getGlobalExtent(!0),h=kO(l,a).getOtherAxis(a).getGlobalExtent(),p="x"===a.dim?0:1,g=[e.x,e.y];g[p]+=r[p],g[p]=Math.min(c[1],g[p]),g[p]=Math.max(c[0],g[p]);var y=(h[1]+h[0])/2,b=[y,y];return b[p]=g[p],{x:g[0],y:g[1],rotation:e.rotation,cursorPoint:b,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][p]}},t}(cR);function kO(n,t){var e={};return e[t.dim+"AxisIndex"]=t.index,n.getCartesian(e)}var tz={line:function(n,t,e){return{type:"Line",subPixelOptimize:!0,shape:fR([t,e[0]],[t,e[1]],IO(n))}},shadow:function(n,t,e){var r=Math.max(1,n.getBandWidth());return{type:"Rect",shape:TO([t-r/2,e[0]],[r,e[1]-e[0]],IO(n))}}};function IO(n){return"x"===n.dim?0:1}var nz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(wn),wp=Gn(),rz=Z;function DO(n,t,e){if(!gn.node){var r=t.getZr();wp(r).records||(wp(r).records={}),function(o,i){function a(l,c){o.on(l,function(h){var g,y,b,p=(g=i,{dispatchAction:b=function(_){var w=y[_.type];w?w.push(_):(_.dispatchAction=b,g.dispatchAction(_))},pendings:y={showTip:[],hideTip:[]}});rz(wp(o).records,function(g){g&&c(g,h,p.dispatchAction)}),function(g,y){var b,_=g.showTip.length,w=g.hideTip.length;_?b=g.showTip[_-1]:w&&(b=g.hideTip[w-1]),b&&(b.dispatchAction=null,y.dispatchAction(b))}(p.pendings,i)})}wp(o).initialized||(wp(o).initialized=!0,a("click",_t(NO,"click")),a("mousemove",_t(NO,"mousemove")),a("globalout",oz))}(r,t),(wp(r).records[n]||(wp(r).records[n]={})).handler=e}}function oz(n,t,e){n.handler("leave",null,e)}function NO(n,t,e,r){t.handler(n,e,r)}function gR(n,t){if(!gn.node){var e=t.getZr();(wp(e).records||{})[n]&&(wp(e).records[n]=null)}}var iz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){var i=r.getComponent("tooltip"),a=e.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";DO("axisPointer",o,function(l,c,h){"none"!==a&&("leave"===l||a.indexOf(l)>=0)&&h({type:"updateAxisPointer",currTrigger:l,x:c&&c.offsetX,y:c&&c.offsetY})})},t.prototype.remove=function(e,r){gR("axisPointer",r)},t.prototype.dispose=function(e,r){gR("axisPointer",r)},t.type="axisPointer",t}(Wr);function EO(n,t){var e,r=[],o=n.seriesIndex;if(null==o||!(e=t.getSeriesByIndex(o)))return{point:[]};var i=e.getData(),a=Yu(i,n);if(null==a||a<0||Ee(a))return{point:[]};var l=i.getItemGraphicEl(a),c=e.coordinateSystem;if(e.getTooltipPosition)r=e.getTooltipPosition(a)||[];else if(c&&c.dataToPoint)if(n.isStacked){var h=c.getBaseAxis(),p=c.getOtherAxis(h).dim,y="x"===p||"radius"===p?1:0,b=i.mapDimension(h.dim),_=[];_[y]=i.get(b,a),_[1-y]=i.get(i.getCalculationInfo("stackResultDimension"),a),r=c.dataToPoint(_)||[]}else r=c.dataToPoint(i.getValues(j(c.dimensions,function(S){return i.mapDimension(S)}),a))||[];else if(l){var w=l.getBoundingRect().clone();w.applyTransform(l.transform),r=[w.x+w.width/2,w.y+w.height/2]}return{point:r,el:l}}var LO=Gn();function az(n,t,e){var M,A,N,r=n.currTrigger,o=[n.x,n.y],i=n,a=n.dispatchAction||Fe(e.dispatchAction,e),l=t.getComponent("axisPointer").coordSysAxesInfo;if(l){zN(o)&&(o=EO({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},t).point);var c=zN(o),h=i.axesInfo,p=l.axesInfo,g="leave"===r||zN(o),y={},b={},_={list:[],map:{}},w={showPointer:_t(sz,b),showTooltip:_t(lz,_)};Z(l.coordSysMap,function(M,A){var I=c||M.containPoint(o);Z(l.coordSysAxesInfo[A],function(N,L){var R=N.axis,O=function(G,W){for(var Y=0;Y<(G||[]).length;Y++){var X=G[Y];if(W.axis.dim===X.axisDim&&W.axis.model.componentIndex===X.axisIndex)return X}}(h,N);if(!g&&I&&(!h||O)){var B=O&&O.value;null!=B||c||(B=R.pointToData(o)),null!=B&&RO(N,B,w,!1,y)}})});var S={};return Z(p,function(M,A){var I=M.linkGroup;I&&!b[A]&&Z(I.axesInfo,function(N,L){var R=b[L];if(N!==M&&R){var O=R.value;I.mapper&&(O=M.axis.scale.parse(I.mapper(O,OO(N),OO(M)))),S[M.key]=O}})}),Z(S,function(M,A){RO(p[A],M,w,!0,y)}),M=b,A=p,N=y.axesInfo=[],Z(A,function(L,R){var O=L.axisPointerModel.option,B=M[R];B?(!L.useHandle&&(O.status="show"),O.value=B.value,O.seriesDataIndices=(B.payloadBatch||[]).slice()):!L.useHandle&&(O.status="hide"),"show"===O.status&&N.push({axisDim:L.axis.dim,axisIndex:L.axis.model.componentIndex,value:O.value})}),function(M,A,I,N){if(!zN(A)&&M.list.length){var L=((M.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};N({type:"showTip",escapeConnect:!0,x:A[0],y:A[1],tooltipOption:I.tooltipOption,position:I.position,dataIndexInside:L.dataIndexInside,dataIndex:L.dataIndex,seriesIndex:L.seriesIndex,dataByCoordSys:M.list})}else N({type:"hideTip"})}(_,o,n,a),function(M,A,I){var N=I.getZr(),L="axisPointerLastHighlights",R=LO(N)[L]||{},O=LO(N)[L]={};Z(M,function(W,Y){var X=W.axisPointerModel.option;"show"===X.status&&W.triggerEmphasis&&Z(X.seriesDataIndices,function(J){O[J.seriesIndex+" | "+J.dataIndex]=J})});var B=[],G=[];Z(R,function(W,Y){!O[Y]&&G.push(W)}),Z(O,function(W,Y){!R[Y]&&B.push(W)}),G.length&&I.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:G}),B.length&&I.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:B})}(p,0,e),y}}function RO(n,t,e,r,o){var h,p,g,y,b,_,w,S,i=n.axis;if(!i.scale.isBlank()&&i.containData(t))if(n.involveSeries){var a=(y=(g=(p=n).axis).dim,b=h=t,_=[],w=Number.MAX_VALUE,S=-1,Z(p.seriesModels,function(M,A){var I,N,L=M.getData().mapDimensionsAll(y);if(M.getAxisTooltipData){var R=M.getAxisTooltipData(L,h,g);N=R.dataIndices,I=R.nestestValue}else{if(!(N=M.getData().indicesOfNearest(L[0],h,"category"===g.type?.5:null)).length)return;I=M.getData().get(L[0],N[0])}if(null!=I&&isFinite(I)){var O=h-I,B=Math.abs(O);B<=w&&((B<w||O>=0&&S<0)&&(w=B,S=O,b=I,_.length=0),Z(N,function(G){_.push({seriesIndex:M.seriesIndex,dataIndexInside:G,dataIndex:M.getData().getRawIndex(G)})}))}}),{payloadBatch:_,snapToValue:b}),l=a.payloadBatch,c=a.snapToValue;l[0]&&null==o.seriesIndex&&De(o,l[0]),!r&&n.snap&&i.containData(c)&&null!=c&&(t=c),e.showPointer(n,t,l),e.showTooltip(n,a,c)}else e.showPointer(n,t)}function sz(n,t,e,r){n[t.key]={value:e,payloadBatch:r}}function lz(n,t,e,r){var o=e.payloadBatch,i=t.axis,a=i.model,l=t.axisPointerModel;if(t.triggerTooltip&&o.length){var c=t.coordSys.model,h=vg(c),p=n.map[h];p||(p=n.map[h]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},n.list.push(p)),p.dataByAxis.push({axisDim:i.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:r,valueLabelOpt:{precision:l.get(["label","precision"]),formatter:l.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function OO(n){var t=n.axis.model,e={},r=e.axisDim=n.axis.dim;return e.axisIndex=e[r+"AxisIndex"]=t.componentIndex,e.axisName=e[r+"AxisName"]=t.name,e.axisId=e[r+"AxisId"]=t.id,e}function zN(n){return!n||null==n[0]||isNaN(n[0])||null==n[1]||isNaN(n[1])}function YT(n){Cd.registerAxisPointerClass("CartesianAxisPointer",ez),n.registerComponentModel(nz),n.registerComponentView(iz),n.registerPreprocessor(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!Ee(e)&&(t.axisPointer.link=[e])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=function PD(n,t){var r,o,i,a,l,c,h,e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return r=e,i=t,a=(o=n).getComponent("tooltip"),l=o.getComponent("axisPointer"),c=l.get("link",!0)||[],h=[],Z(i.getCoordinateSystems(),function(p){if(p.axisPointerEnabled){var g=vg(p.model),y=r.coordSysAxesInfo[g]={};r.coordSysMap[g]=p;var b=p.model.getModel("tooltip",a);if(Z(p.getAxes(),_t(M,!1,null)),p.getTooltipAxes&&a&&b.get("show")){var _="axis"===b.get("trigger"),w="cross"===b.get(["axisPointer","type"]),S=p.getTooltipAxes(b.get(["axisPointer","axis"]));(_||w)&&Z(S.baseAxes,_t(M,!w||"cross",_)),w&&Z(S.otherAxes,_t(M,"cross",!1))}}function M(A,I,N){var L=N.model.getModel("axisPointer",l),R=L.get("show");if(R&&("auto"!==R||A||Db(L))){null==I&&(I=L.get("triggerTooltip"));var O=(L=A?function(ne,oe,ie,se,le,pe){var me=oe.getModel("axisPointer"),ve={};Z(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(je){ve[je]=jt(me.get(je))}),ve.snap="category"!==ne.type&&!!pe,"cross"===me.get("type")&&(ve.type="line");var He=ve.label||(ve.label={});if(null==He.show&&(He.show=!1),"cross"===le){var nt=me.get(["label","show"]);if(He.show=null==nt||nt,!pe){var Me=ve.lineStyle=me.get("crossStyle");Me&&Pe(He,Me.textStyle)}}return ne.model.getModel("axisPointer",new gr(ve,ie,se))}(N,b,l,o,A,I):L).get("snap"),B=L.get("triggerEmphasis"),G=vg(N.model),W=I||O||"category"===N.type,Y=r.axesInfo[G]={key:G,axis:N,coordSys:p,axisPointerModel:L,triggerTooltip:I,triggerEmphasis:B,involveSeries:W,snap:O,useHandle:Db(L),seriesModels:[],linkGroup:null};y[G]=Y,r.seriesInvolved=r.seriesInvolved||W;var X=function(ne,oe){for(var ie=oe.model,se=oe.dim,le=0;le<ne.length;le++){var pe=ne[le]||{};if(Ib(pe[se+"AxisId"],ie.id)||Ib(pe[se+"AxisIndex"],ie.componentIndex)||Ib(pe[se+"AxisName"],ie.name))return le}}(c,N);if(null!=X){var J=h[X]||(h[X]={axesInfo:{}});J.axesInfo[G]=Y,J.mapper=c[X].mapper,Y.linkGroup=J}}}}),e.seriesInvolved&&function(r,o){o.eachSeries(function(i){var a=i.coordinateSystem,l=i.get(["tooltip","trigger"],!0),c=i.get(["tooltip","show"],!0);a&&"none"!==l&&!1!==l&&"item"!==l&&!1!==c&&!1!==i.get(["axisPointer","show"],!0)&&Z(r.coordSysAxesInfo[vg(a.model)],function(h){var p=h.axis;a.getAxis(p.dim)===p&&(h.seriesModels.push(i),null==h.seriesDataCount&&(h.seriesDataCount=0),h.seriesDataCount+=i.getData().count())})})}(e,n),e}(t,e)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},az)}var uz=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.makeElOption=function(e,r,o,i,a){var l=o.axis;"angle"===l.dim&&(this.animationThreshold=Math.PI/18);var c=l.polar,h=c.getOtherAxis(l).getExtent(),p=l.dataToCoord(r),g=i.get("type");if(g&&"none"!==g){var y=hR(i),b=cz[g](l,c,p,h);b.style=y,e.graphicKey=b.type,e.pointer=b}var _=function(w,S,M,A,I){var N=S.axis,L=N.dataToCoord(w),R=A.getAngleAxis().getExtent()[0];R=R/180*Math.PI;var O,B,G,W=A.getRadiusAxis().getExtent();if("radius"===N.dim){var Y=[1,0,0,1,0,0];Eo(Y,Y,R),es(Y,Y,[A.cx,A.cy]),O=gl([L,-I],Y);var X=S.getModel("axisLabel").get("rotate")||0,J=ta.innerTextLayout(R,X*Math.PI/180,-1);B=J.textAlign,G=J.textVerticalAlign}else{var ne=W[1];O=A.coordToPoint([ne+I,L]);var oe=A.cx,ie=A.cy;B=Math.abs(O[0]-oe)/ne<.3?"center":O[0]>oe?"left":"right",G=Math.abs(O[1]-ie)/ne<.3?"middle":O[1]>ie?"top":"bottom"}return{position:O,align:B,verticalAlign:G}}(r,o,0,c,i.get(["label","margin"]));SO(e,o,i,a,_)},t}(cR),cz={line:function(n,t,e,r){return"angle"===n.dim?{type:"Line",shape:fR(t.coordToPoint([r[0],e]),t.coordToPoint([r[1],e]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:e}}},shadow:function(n,t,e,r){var o=Math.max(1,n.getBandWidth()),i=Math.PI/180;return"angle"===n.dim?{type:"Sector",shape:AO(t.cx,t.cy,r[0],r[1],(-e-o/2)*i,(o/2-e)*i)}:{type:"Sector",shape:AO(t.cx,t.cy,e-o/2,e+o/2,0,2*Math.PI)}}},dz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.findAxisModel=function(e){var r;return this.ecModel.eachComponent(e,function(o){o.getCoordSysModel()===this&&(r=o)},this),r},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(wn),mR=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Mo).models[0]},t.type="polarAxis",t}(wn);ur(mR,Kh);var hz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="angleAxis",t}(mR),pz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="radiusAxis",t}(mR),yR=function(n){function t(e,r){return n.call(this,"radius",e,r)||this}return Ce(t,n),t.prototype.pointToData=function(e,r){return this.polar.pointToData(e,r)["radius"===this.dim?0:1]},t}(Bo);yR.prototype.dataToRadius=Bo.prototype.dataToCoord,yR.prototype.radiusToData=Bo.prototype.coordToData;var fz=Gn(),vR=function(n){function t(e,r){return n.call(this,"angle",e,r||[0,360])||this}return Ce(t,n),t.prototype.pointToData=function(e,r){return this.polar.pointToData(e,r)["radius"===this.dim?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this,r=e.getLabelModel(),o=e.scale,i=o.getExtent(),a=o.count();if(i[1]-i[0]<1)return 0;var l=i[0],c=e.dataToCoord(l+1)-e.dataToCoord(l),h=Math.abs(c),p=Ug(null==l?"":l+"",r.getFont(),"center","top"),g=Math.max(p.height,7)/h;isNaN(g)&&(g=1/0);var y=Math.max(0,Math.floor(g)),b=fz(e.model),_=b.lastAutoInterval,w=b.lastTickCount;return null!=_&&null!=w&&Math.abs(_-y)<=1&&Math.abs(w-a)<=1&&_>y?y=_:(b.lastTickCount=a,b.lastAutoInterval=y),y},t}(Bo);vR.prototype.dataToAngle=Bo.prototype.dataToCoord,vR.prototype.angleToData=Bo.prototype.coordToData;var PO=["radius","angle"],gz=function(){function n(t){this.dimensions=PO,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new yR,this._angleAxis=new vR,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},n.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},n.prototype.getAxis=function(t){return this["_"+t+"Axis"]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(t){var e=[],r=this._angleAxis,o=this._radiusAxis;return r.scale.type===t&&e.push(r),o.scale.type===t&&e.push(o),e},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},n.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},n.prototype.pointToData=function(t,e){var r=this.pointToCoord(t);return[this._radiusAxis.radiusToData(r[0],e),this._angleAxis.angleToData(r[1],e)]},n.prototype.pointToCoord=function(t){var e=t[0]-this.cx,r=t[1]-this.cy,o=this.getAngleAxis(),i=o.getExtent(),a=Math.min(i[0],i[1]),l=Math.max(i[0],i[1]);o.inverse?a=l-360:l=a+360;var c=Math.sqrt(e*e+r*r);e/=c,r/=c;for(var h=Math.atan2(-r,e)/Math.PI*180,p=h<a?1:-1;h<a||h>l;)h+=360*p;return[c,h]},n.prototype.coordToPoint=function(t){var e=t[0],r=t[1]/180*Math.PI;return[Math.cos(r)*e+this.cx,-Math.sin(r)*e+this.cy]},n.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var r=t.getExtent(),o=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-r[0]*o,endAngle:-r[1]*o,clockwise:t.inverse,contain:function(i,a){var l=i-this.cx,c=a-this.cy,h=l*l+c*c-1e-4,p=this.r,g=this.r0;return h<=p*p&&h>=g*g}}},n.prototype.convertToPixel=function(t,e,r){return BO(e)===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(t,e,r){return BO(e)===this?this.pointToData(r):null},n}();function BO(n){var t=n.seriesModel,e=n.polarModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function mz(n,t){var e=this,r=e.getAngleAxis(),o=e.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),n.eachSeries(function(l){if(l.coordinateSystem===e){var c=l.getData();Z(vy(c,"radius"),function(h){o.scale.unionExtentFromData(c,h)}),Z(vy(c,"angle"),function(h){r.scale.unionExtentFromData(c,h)})}}),Zh(r.scale,r.model),Zh(o.scale,o.model),"category"===r.type&&!r.onBand){var i=r.getExtent(),a=360/r.scale.count();r.inverse?i[1]+=a:i[1]-=a,r.setExtent(i[0],i[1])}}function zO(n,t){var e;if(n.type=t.get("type"),n.scale=yy(t),n.onBand=t.get("boundaryGap")&&"category"===n.type,n.inverse=t.get("inverse"),"angleAxis"===t.mainType){n.inverse=n.inverse!==t.get("clockwise");var r=t.get("startAngle"),o=null!==(e=t.get("endAngle"))&&void 0!==e?e:r+(n.inverse?-360:360);n.setExtent(r,o)}t.axis=n,n.model=t}var yz={dimensions:PO,create:function(n,t){var e=[];return n.eachComponent("polar",function(r,o){var i=new gz(o+"");i.update=mz;var a=i.getRadiusAxis(),l=i.getAngleAxis(),c=r.findAxisModel("radiusAxis"),h=r.findAxisModel("angleAxis");zO(a,c),zO(l,h),function(p,g,y){var b=g.get("center"),_=y.getWidth(),w=y.getHeight();p.cx=Ct(b[0],_),p.cy=Ct(b[1],w);var S=p.getRadiusAxis(),M=Math.min(_,w)/2,A=g.get("radius");null==A?A=[0,"100%"]:Ee(A)||(A=[0,A]);var I=[Ct(A[0],M),Ct(A[1],M)];S.inverse?S.setExtent(I[1],I[0]):S.setExtent(I[0],I[1])}(i,r,t),e.push(i),r.coordinateSystem=i,i.model=r}),n.eachSeries(function(r){if("polar"===r.get("coordinateSystem")){var o=r.getReferringComponents("polar",Mo).models[0];r.coordinateSystem=o.coordinateSystem}}),e}},vz=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function VN(n,t,e){t[1]>t[0]&&(t=t.slice().reverse());var r=n.coordToPoint([t[0],e]),o=n.coordToPoint([t[1],e]);return{x1:r[0],y1:r[1],x2:o[0],y2:o[1]}}function FN(n){return n.getRadiusAxis().inverse?0:1}function VO(n){var t=n[0],e=n[n.length-1];t&&e&&Math.abs(Math.abs(t.coord-e.coord)-360)<1e-4&&n.pop()}var bz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return Ce(t,n),t.prototype.render=function(e,r){if(this.group.removeAll(),e.get("show")){var o=e.axis,i=o.polar,a=i.getRadiusAxis().getExtent(),l=o.getTicksCoords(),c=o.getMinorTicksCoords(),h=j(o.getViewLabels(),function(p){p=jt(p);var g=o.scale,y="ordinal"===g.type?g.getRawOrdinalNumber(p.tickValue):p.tickValue;return p.coord=o.dataToCoord(y),p});VO(h),VO(l),Z(vz,function(p){!e.get([p,"show"])||o.scale.isBlank()&&"axisLine"!==p||xz[p](this.group,e,i,l,c,a,h)},this)}},t.type="angleAxis",t}(Cd),xz={axisLine:function(n,t,e,r,o,i){var a,l=t.getModel(["axisLine","lineStyle"]),c=e.getAngleAxis(),h=Math.PI/180,p=c.getExtent(),g=FN(e),y=g?0:1,b=360===Math.abs(p[1]-p[0])?"Circle":"Arc";(a=0===i[y]?new Qc[b]({shape:{cx:e.cx,cy:e.cy,r:i[g],startAngle:-p[0]*h,endAngle:-p[1]*h,clockwise:c.inverse},style:l.getLineStyle(),z2:1,silent:!0}):new bh({shape:{cx:e.cx,cy:e.cy,r:i[g],r0:i[y]},style:l.getLineStyle(),z2:1,silent:!0})).style.fill=null,n.add(a)},axisTick:function(n,t,e,r,o,i){var a=t.getModel("axisTick"),l=(a.get("inside")?-1:1)*a.get("length"),c=i[FN(e)],h=j(r,function(p){return new Yo({shape:VN(e,[c,c+l],p.coord)})});n.add(za(h,{style:Pe(a.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,t,e,r,o,i){if(o.length){for(var a=t.getModel("axisTick"),l=t.getModel("minorTick"),c=(a.get("inside")?-1:1)*l.get("length"),h=i[FN(e)],p=[],g=0;g<o.length;g++)for(var y=0;y<o[g].length;y++)p.push(new Yo({shape:VN(e,[h,h+c],o[g][y].coord)}));n.add(za(p,{style:Pe(l.getModel("lineStyle").getLineStyle(),Pe(a.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,t,e,r,o,i,a){var l=t.getCategories(!0),c=t.getModel("axisLabel"),h=c.get("margin"),p=t.get("triggerEvent");Z(a,function(g,y){var b=c,_=g.tickValue,w=i[FN(e)],S=e.coordToPoint([w+h,g.coord]),M=e.cx,A=e.cy,I=Math.abs(S[0]-M)/w<.3?"center":S[0]>M?"left":"right",N=Math.abs(S[1]-A)/w<.3?"middle":S[1]>A?"top":"bottom";if(l&&l[_]){var L=l[_];Ft(L)&&L.textStyle&&(b=new gr(L.textStyle,c,c.ecModel))}var R=new Kn({silent:ta.isLabelSilent(t),style:Or(b,{x:S[0],y:S[1],fill:b.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:g.formattedLabel,align:I,verticalAlign:N})});if(n.add(R),p){var O=ta.makeAxisEventDataBase(t);O.targetType="axisLabel",O.value=g.rawLabel,cn(R).eventData=O}},this)},splitLine:function(n,t,e,r,o,i){var a=t.getModel("splitLine").getModel("lineStyle"),l=a.get("color"),c=0;l=l instanceof Array?l:[l];for(var h=[],p=0;p<r.length;p++){var g=c++%l.length;h[g]=h[g]||[],h[g].push(new Yo({shape:VN(e,i,r[p].coord)}))}for(p=0;p<h.length;p++)n.add(za(h[p],{style:Pe({stroke:l[p%l.length]},a.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(n,t,e,r,o,i){if(o.length){for(var a=t.getModel("minorSplitLine").getModel("lineStyle"),l=[],c=0;c<o.length;c++)for(var h=0;h<o[c].length;h++)l.push(new Yo({shape:VN(e,i,o[c][h].coord)}));n.add(za(l,{style:a.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(n,t,e,r,o,i){if(r.length){var a=t.getModel("splitArea").getModel("areaStyle"),l=a.get("color"),c=0;l=l instanceof Array?l:[l];for(var h=[],p=Math.PI/180,g=-r[0].coord*p,y=Math.min(i[0],i[1]),b=Math.max(i[0],i[1]),_=t.get("clockwise"),w=1,S=r.length;w<=S;w++){var M=w===S?r[0].coord:r[w].coord,A=c++%l.length;h[A]=h[A]||[],h[A].push(new Ti({shape:{cx:e.cx,cy:e.cy,r0:y,r:b,startAngle:g,endAngle:-M*p,clockwise:_},silent:!0})),g=-M*p}for(w=0;w<h.length;w++)n.add(za(h[w],{style:Pe({fill:l[w%l.length]},a.getAreaStyle()),silent:!0}))}}},_z=["axisLine","axisTickLabel","axisName"],wz=["splitLine","splitArea","minorSplitLine"],Sz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return Ce(t,n),t.prototype.render=function(e,r){if(this.group.removeAll(),e.get("show")){var o=this._axisGroup,i=this._axisGroup=new on;this.group.add(i);var a=e.axis,l=a.polar,c=l.getAngleAxis(),h=a.getTicksCoords(),p=a.getMinorTicksCoords(),g=c.getExtent()[0],y=a.getExtent(),b={position:[(w=l).cx,w.cy],rotation:g/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1},_=new ta(e,b);Z(_z,_.add,_),i.add(_.getGroup()),vf(o,i,e),Z(wz,function(w){e.get([w,"show"])&&!a.scale.isBlank()&&Cz[w](this.group,e,l,g,y,h,p)},this)}var w},t.type="radiusAxis",t}(Cd),Cz={splitLine:function(n,t,e,r,o,i){var a=t.getModel("splitLine").getModel("lineStyle"),l=a.get("color"),c=0,h=e.getAngleAxis(),p=Math.PI/180,g=h.getExtent(),y=360===Math.abs(g[1]-g[0])?"Circle":"Arc";l=l instanceof Array?l:[l];for(var b=[],_=0;_<i.length;_++){var w=c++%l.length;b[w]=b[w]||[],b[w].push(new Qc[y]({shape:{cx:e.cx,cy:e.cy,r:Math.max(i[_].coord,0),startAngle:-g[0]*p,endAngle:-g[1]*p,clockwise:h.inverse}}))}for(_=0;_<b.length;_++)n.add(za(b[_],{style:Pe({stroke:l[_%l.length],fill:null},a.getLineStyle()),silent:!0}))},minorSplitLine:function(n,t,e,r,o,i,a){if(a.length){for(var l=t.getModel("minorSplitLine").getModel("lineStyle"),c=[],h=0;h<a.length;h++)for(var p=0;p<a[h].length;p++)c.push(new da({shape:{cx:e.cx,cy:e.cy,r:a[h][p].coord}}));n.add(za(c,{style:Pe({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(n,t,e,r,o,i){if(i.length){var a=t.getModel("splitArea").getModel("areaStyle"),l=a.get("color"),c=0;l=l instanceof Array?l:[l];for(var h=[],p=i[0].coord,g=1;g<i.length;g++){var y=c++%l.length;h[y]=h[y]||[],h[y].push(new Ti({shape:{cx:e.cx,cy:e.cy,r0:p,r:i[g].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),p=i[g].coord}for(g=0;g<h.length;g++)n.add(za(h[g],{style:Pe({fill:l[g%l.length]},a.getAreaStyle()),silent:!0}))}}};function FO(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function GO(n,t){return t.dim+n.model.componentIndex}function Mz(n,t,e){var r={},o=function(i){var a={};Z(i,function(c,h){var p=c.getData(),g=c.coordinateSystem,y=g.getBaseAxis(),b=GO(g,y),_=y.getExtent(),w="category"===y.type?y.getBandWidth():Math.abs(_[1]-_[0])/p.count(),S=a[b]||{bandWidth:w,remainedWidth:w,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},M=S.stacks;a[b]=S;var A=FO(c);M[A]||S.autoWidthCount++,M[A]=M[A]||{width:0,maxWidth:0};var I=Ct(c.get("barWidth"),w),N=Ct(c.get("barMaxWidth"),w),L=c.get("barGap"),R=c.get("barCategoryGap");I&&!M[A].width&&(I=Math.min(S.remainedWidth,I),M[A].width=I,S.remainedWidth-=I),N&&(M[A].maxWidth=N),null!=L&&(S.gap=L),null!=R&&(S.categoryGap=R)});var l={};return Z(a,function(c,h){l[h]={};var p=c.stacks,y=Ct(c.categoryGap,c.bandWidth),b=Ct(c.gap,1),_=c.remainedWidth,w=c.autoWidthCount,S=(_-y)/(w+(w-1)*b);S=Math.max(S,0),Z(p,function(N,L){var R=N.maxWidth;R&&R<S&&(R=Math.min(R,_),N.width&&(R=Math.min(R,N.width)),_-=R,N.width=R,w--)}),S=(_-y)/(w+(w-1)*b),S=Math.max(S,0);var M,A=0;Z(p,function(N,L){N.width||(N.width=S),M=N,A+=N.width*(1+b)}),M&&(A-=M.width*b);var I=-A/2;Z(p,function(N,L){l[h][L]=l[h][L]||{offset:I,width:N.width},I+=N.width*(1+b)})}),l}(Xn(t.getSeriesByType(n),function(i){return!t.isSeriesFiltered(i)&&i.coordinateSystem&&"polar"===i.coordinateSystem.type}));t.eachSeriesByType(n,function(i){if("polar"===i.coordinateSystem.type){var a=i.getData(),l=i.coordinateSystem,c=l.getBaseAxis(),h=GO(l,c),p=FO(i),g=o[h][p],y=g.offset,b=g.width,_=l.getOtherAxis(c),w=i.coordinateSystem.cx,S=i.coordinateSystem.cy,M=i.get("barMinHeight")||0,A=i.get("barMinAngle")||0;r[p]=r[p]||[];for(var I=a.mapDimension(_.dim),N=a.mapDimension(c.dim),L=bl(a,I),R="radius"!==c.dim||!i.get("roundCap",!0),O=_.model.get("startValue"),B=_.dataToCoord(O||0),G=0,W=a.count();G<W;G++){var Y=a.get(I,G),X=a.get(N,G),J=Y>=0?"p":"n",ne=B;L&&(r[p][X]||(r[p][X]={p:B,n:B}),ne=r[p][X][J]);var oe=void 0,ie=void 0,se=void 0,le=void 0;if("radius"===_.dim){var pe=_.dataToCoord(Y)-B,me=c.dataToCoord(X);Math.abs(pe)<M&&(pe=(pe<0?-1:1)*M),oe=ne,ie=ne+pe,le=(se=me-y)-b,L&&(r[p][X][J]=ie)}else{var ve=_.dataToCoord(Y,R)-B,He=c.dataToCoord(X);Math.abs(ve)<A&&(ve=(ve<0?-1:1)*A),ie=(oe=He+y)+b,se=ne,le=ne+ve,L&&(r[p][X][J]=le)}a.setItemLayout(G,{cx:w,cy:S,r0:oe,r:ie,startAngle:-se*Math.PI/180,endAngle:-le*Math.PI/180,clockwise:se>=le})}}})}var Tz={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},Az={splitNumber:5},kz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="polar",t}(Wr);function bR(n,t){t=t||{};var r=n.axis,o={},i=r.position,a=r.orient,l=n.coordinateSystem.getRect(),c=[l.x,l.x+l.width,l.y,l.y+l.height],h={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}};o.position=["vertical"===a?h.vertical[i]:c[0],"horizontal"===a?h.horizontal[i]:c[3]],o.rotation=Math.PI/2*{horizontal:0,vertical:1}[a],o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,right:1,left:-1}[i],n.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),ht(t.labelInside,n.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var p=t.rotate;return null==p&&(p=n.get(["axisLabel","rotate"])),o.labelRotation="top"===i?-p:p,o.z2=1,o}var Iz=["axisLine","axisTickLabel","axisName"],Dz=["splitArea","splitLine"],Nz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="SingleAxisPointer",e}return Ce(t,n),t.prototype.render=function(e,r,o,i){var a=this.group;a.removeAll();var l=this._axisGroup;this._axisGroup=new on;var c=bR(e),h=new ta(e,c);Z(Iz,h.add,h),a.add(this._axisGroup),a.add(h.getGroup()),Z(Dz,function(p){e.get([p,"show"])&&Ez[p](this,this.group,this._axisGroup,e)},this),vf(l,this._axisGroup,e),n.prototype.render.call(this,e,r,o,i)},t.prototype.remove=function(){cM(this)},t.type="singleAxis",t}(Cd),Ez={splitLine:function(n,t,e,r){var o=r.axis;if(!o.scale.isBlank()){var i=r.getModel("splitLine"),a=i.getModel("lineStyle"),l=a.get("color");l=l instanceof Array?l:[l];for(var c=a.get("width"),h=r.coordinateSystem.getRect(),p=o.isHorizontal(),g=[],y=0,b=o.getTicksCoords({tickModel:i}),_=[],w=[],S=0;S<b.length;++S){var M=o.toGlobalCoord(b[S].coord);p?(_[0]=M,_[1]=h.y,w[0]=M,w[1]=h.y+h.height):(_[0]=h.x,_[1]=M,w[0]=h.x+h.width,w[1]=M);var A=new Yo({shape:{x1:_[0],y1:_[1],x2:w[0],y2:w[1]},silent:!0});Sh(A.shape,c);var I=y++%l.length;g[I]=g[I]||[],g[I].push(A)}var N=a.getLineStyle(["color"]);for(S=0;S<g.length;++S)t.add(za(g[S],{style:Pe({stroke:l[S%l.length]},N),silent:!0}))}},splitArea:function(n,t,e,r){zD(n,e,r,r)}},GN=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(wn);ur(GN,Kh.prototype);var Lz=function(n){function t(e,r,o,i,a){var l=n.call(this,e,r,o)||this;return l.type=i||"value",l.position=a||"bottom",l}return Ce(t,n),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.pointToData=function(e,r){return this.coordinateSystem.pointToData(e)[0]},t}(Bo),HO=["single"],Rz=function(){function n(t,e,r){this.type="single",this.dimension="single",this.dimensions=HO,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,r)}return n.prototype._init=function(t,e,r){var i=new Lz(this.dimension,yy(t),[0,0],t.get("type"),t.get("position"));i.onBand="category"===i.type&&t.get("boundaryGap"),i.inverse=t.get("inverse"),i.orient=t.get("orient"),t.axis=i,i.model=t,i.coordinateSystem=this,this._axis=i},n.prototype.update=function(t,e){t.eachSeries(function(r){if(r.coordinateSystem===this){var o=r.getData();Z(o.mapDimensionsAll(this.dimension),function(i){this._axis.scale.unionExtentFromData(o,i)},this),Zh(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(t,e){this._rect=xo({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,r=e.isHorizontal(),o=r?[0,t.width]:[0,t.height],i=e.inverse?1:0;e.setExtent(o[i],o[1-i]),this._updateAxisTransform(e,r?t.x:t.y)},n.prototype._updateAxisTransform=function(t,e){var r=t.getExtent(),o=r[0]+r[1],i=t.isHorizontal();t.toGlobalCoord=i?function(a){return a+e}:function(a){return o-a+e},t.toLocalCoord=i?function(a){return a-e}:function(a){return o-a+e}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(t){var e=this.getRect(),r=this.getAxis();return"horizontal"===r.orient?r.contain(r.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:r.contain(r.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},n.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},n.prototype.dataToPoint=function(t){var e=this.getAxis(),r=this.getRect(),o=[],i="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),o[i]=e.toGlobalCoord(e.dataToCoord(+t)),o[1-i]=0===i?r.y+r.height/2:r.x+r.width/2,o},n.prototype.convertToPixel=function(t,e,r){return WO(e)===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(t,e,r){return WO(e)===this?this.pointToData(r):null},n}();function WO(n){var t=n.seriesModel,e=n.singleAxisModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}var Oz={create:function(n,t){var e=[];return n.eachComponent("singleAxis",function(r,o){var i=new Rz(r,n,t);i.name="single_"+o,i.resize(r,t),r.coordinateSystem=i,e.push(i)}),n.eachSeries(function(r){if("singleAxis"===r.get("coordinateSystem")){var o=r.getReferringComponents("singleAxis",Mo).models[0];r.coordinateSystem=o&&o.coordinateSystem}}),e},dimensions:HO},UO=["x","y"],Pz=["width","height"],Bz=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.makeElOption=function(e,r,o,i,a){var l=o.axis,c=l.coordinateSystem,h=xR(c,1-HN(l)),p=c.dataToPoint(r)[0],g=i.get("type");if(g&&"none"!==g){var y=hR(i),b=zz[g](l,p,h);b.style=y,e.graphicKey=b.type,e.pointer=b}MO(r,e,bR(o),o,i,a)},t.prototype.getHandleTransform=function(e,r,o){var i=bR(r,{labelInside:!1});i.labelMargin=o.get(["handle","margin"]);var a=pR(r.axis,e,i);return{x:a[0],y:a[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,r,o,i){var a=o.axis,l=a.coordinateSystem,c=HN(a),h=xR(l,c),p=[e.x,e.y];p[c]+=r[c],p[c]=Math.min(h[1],p[c]),p[c]=Math.max(h[0],p[c]);var g=xR(l,1-c),y=(g[1]+g[0])/2,b=[y,y];return b[c]=p[c],{x:p[0],y:p[1],rotation:e.rotation,cursorPoint:b,tooltipOption:{verticalAlign:"middle"}}},t}(cR),zz={line:function(n,t,e){return{type:"Line",subPixelOptimize:!0,shape:fR([t,e[0]],[t,e[1]],HN(n))}},shadow:function(n,t,e){var r=n.getBandWidth();return{type:"Rect",shape:TO([t-r/2,e[0]],[r,e[1]-e[0]],HN(n))}}};function HN(n){return n.isHorizontal()?0:1}function xR(n,t){var e=n.getRect();return[e[UO[t]],e[UO[t]]+e[Pz[t]]]}var Vz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="single",t}(Wr),Fz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(e,r,o){var i=ic(e);n.prototype.init.apply(this,arguments),jO(e,i)},t.prototype.mergeOption=function(e){n.prototype.mergeOption.apply(this,arguments),jO(this.option,e)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(wn);function jO(n,t){var e,r=n.cellSize;1===(e=Ee(r)?r:n.cellSize=[r,r]).length&&(e[1]=e[0]);var o=j([0,1],function(i){return(null!=(a=t)[rc[l=i][0]]||null!=a[rc[l][1]]&&null!=a[rc[l][2]])&&(e[i]="auto"),null!=e[i]&&"auto"!==e[i];var a,l});oc(n,t,{type:"box",ignoreSize:o})}var Gz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){var i=this.group;i.removeAll();var a=e.coordinateSystem,l=a.getRangeInfo(),c=a.getOrient(),h=r.getLocaleModel();this._renderDayRect(e,l,i),this._renderLines(e,l,c,i),this._renderYearText(e,l,c,i),this._renderMonthText(e,h,c,i),this._renderWeekText(e,h,l,c,i)},t.prototype._renderDayRect=function(e,r,o){for(var i=e.coordinateSystem,a=e.getModel("itemStyle").getItemStyle(),l=i.getCellWidth(),c=i.getCellHeight(),h=r.start.time;h<=r.end.time;h=i.getNextNDay(h,1).time){var p=i.dataToRect([h],!1).tl,g=new $n({shape:{x:p[0],y:p[1],width:l,height:c},cursor:"default",style:a});o.add(g)}},t.prototype._renderLines=function(e,r,o,i){var a=this,l=e.coordinateSystem,c=e.getModel(["splitLine","lineStyle"]).getLineStyle(),h=e.get(["splitLine","show"]),p=c.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var g=r.start,y=0;g.time<=r.end.time;y++){_(g.formatedDate),0===y&&(g=l.getDateInfo(r.start.y+"-"+r.start.m));var b=g.date;b.setMonth(b.getMonth()+1),g=l.getDateInfo(b)}function _(w){a._firstDayOfMonth.push(l.getDateInfo(w)),a._firstDayPoints.push(l.dataToRect([w],!1).tl);var S=a._getLinePointsOfOneWeek(e,w,o);a._tlpoints.push(S[0]),a._blpoints.push(S[S.length-1]),h&&a._drawSplitline(S,c,i)}_(l.getNextNDay(r.end.time,1).formatedDate),h&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,p,o),c,i),h&&this._drawSplitline(a._getEdgesPoints(a._blpoints,p,o),c,i)},t.prototype._getEdgesPoints=function(e,r,o){var i=[e[0].slice(),e[e.length-1].slice()],a="horizontal"===o?0:1;return i[0][a]=i[0][a]-r/2,i[1][a]=i[1][a]+r/2,i},t.prototype._drawSplitline=function(e,r,o){var i=new $i({z2:20,shape:{points:e},style:r});o.add(i)},t.prototype._getLinePointsOfOneWeek=function(e,r,o){for(var i=e.coordinateSystem,a=i.getDateInfo(r),l=[],c=0;c<7;c++){var h=i.getNextNDay(a.time,c),p=i.dataToRect([h.time],!1);l[2*h.day]=p.tl,l[2*h.day+1]=p["horizontal"===o?"bl":"tr"]}return l},t.prototype._formatterLabel=function(e,r){return bt(e)&&e?(o=e,Z(r,function(a,l){o=o.replace("{"+l+"}",a)}),o):Se(e)?e(r):r.nameMap;var o},t.prototype._yearTextPositionControl=function(e,r,o,i,a){var l=r[0],c=r[1],h=["center","bottom"];"bottom"===i?(c+=a,h=["center","top"]):"left"===i?l-=a:"right"===i?(l+=a,h=["center","top"]):c-=a;var p=0;return"left"!==i&&"right"!==i||(p=Math.PI/2),{rotation:p,x:l,y:c,style:{align:h[0],verticalAlign:h[1]}}},t.prototype._renderYearText=function(e,r,o,i){var a=e.getModel("yearLabel");if(a.get("show")){var l=a.get("margin"),c=a.get("position");c||(c="horizontal"!==o?"top":"left");var h=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],p=(h[0][0]+h[1][0])/2,g=(h[0][1]+h[1][1])/2,y="horizontal"===o?0:1,b={top:[p,h[y][1]],bottom:[p,h[1-y][1]],left:[h[1-y][0],g],right:[h[y][0],g]},_=r.start.y;+r.end.y>+r.start.y&&(_=_+"-"+r.end.y);var w=a.get("formatter"),M=this._formatterLabel(w,{start:r.start.y,end:r.end.y,nameMap:_}),A=new Kn({z2:30,style:Or(a,{text:M})});A.attr(this._yearTextPositionControl(A,b[c],o,c,l)),i.add(A)}},t.prototype._monthTextPositionControl=function(e,r,o,i,a){var l="left",c="top",h=e[0],p=e[1];return"horizontal"===o?(p+=a,r&&(l="center"),"start"===i&&(c="bottom")):(h+=a,r&&(c="middle"),"start"===i&&(l="right")),{x:h,y:p,align:l,verticalAlign:c}},t.prototype._renderMonthText=function(e,r,o,i){var a=e.getModel("monthLabel");if(a.get("show")){var l=a.get("nameMap"),c=a.get("margin"),h=a.get("position"),p=a.get("align"),g=[this._tlpoints,this._blpoints];l&&!bt(l)||(l&&(r=I0(l)||r),l=r.get(["time","monthAbbr"])||[]);var y="start"===h?0:1,b="horizontal"===o?0:1;c="start"===h?-c:c;for(var _="center"===p,w=0;w<g[y].length-1;w++){var S=g[y][w].slice(),M=this._firstDayOfMonth[w];_&&(S[b]=(this._firstDayPoints[w][b]+g[0][w+1][b])/2);var I=a.get("formatter"),N=l[+M.m-1],L={yyyy:M.y,yy:(M.y+"").slice(2),MM:M.m,M:+M.m,nameMap:N},R=this._formatterLabel(I,L),O=new Kn({z2:30,style:De(Or(a,{text:R}),this._monthTextPositionControl(S,_,o,h,c))});i.add(O)}}},t.prototype._weekTextPositionControl=function(e,r,o,i,a){var l="center",c="middle",h=e[0],p=e[1],g="start"===o;return"horizontal"===r?(h=h+i+(g?1:-1)*a[0]/2,l=g?"right":"left"):(p=p+i+(g?1:-1)*a[1]/2,c=g?"bottom":"top"),{x:h,y:p,align:l,verticalAlign:c}},t.prototype._renderWeekText=function(e,r,o,i,a){var l=e.getModel("dayLabel");if(l.get("show")){var c=e.coordinateSystem,h=l.get("position"),p=l.get("nameMap"),g=l.get("margin"),y=c.getFirstDayOfWeek();(!p||bt(p))&&(p&&(r=I0(p)||r),p=r.get(["time","dayOfWeekShort"])||j(r.get(["time","dayOfWeekAbbr"]),function(N){return N[0]}));var b=c.getNextNDay(o.end.time,7-o.lweek).time,_=[c.getCellWidth(),c.getCellHeight()];g=Ct(g,Math.min(_[1],_[0])),"start"===h&&(b=c.getNextNDay(o.start.time,-(7+o.fweek)).time,g=-g);for(var w=0;w<7;w++){var S,M=c.getNextNDay(b,w),A=c.dataToRect([M.time],!1).center;S=Math.abs((w+y)%7);var I=new Kn({z2:30,style:De(Or(l,{text:p[S]}),this._weekTextPositionControl(A,i,h,g,_))});a.add(I)}}},t.type="calendar",t}(Wr),_R=864e5,Hz=function(){function n(t,e,r){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=t}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(t){var e=(t=ji(t)).getFullYear(),r=t.getMonth()+1,o=r<10?"0"+r:""+r,i=t.getDate(),a=i<10?"0"+i:""+i,l=t.getDay();return{y:e+"",m:o,d:a,day:l=Math.abs((l+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+o+"-"+a,date:t}},n.prototype.getNextNDay=function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},n.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,o=["width","height"],i=this._model.getCellSize().slice(),a=this._model.getBoxLayoutParams(),l="horizontal"===this._orient?[r,7]:[7,r];Z([0,1],function(g){p(i,g)&&(a[o[g]]=i[g]*l[g])});var c={width:e.getWidth(),height:e.getHeight()},h=this._rect=xo(a,c);function p(g,y){return null!=g[y]&&"auto"!==g[y]}Z([0,1],function(g){p(i,g)||(i[g]=h[o[g]]/l[g])}),this._sw=i[0],this._sh=i[1]},n.prototype.dataToPoint=function(t,e){Ee(t)&&(t=t[0]),null==e&&(e=!0);var r=this.getDateInfo(t),o=this._rangeInfo;if(e&&!(r.time>=o.start.time&&r.time<o.end.time+_R))return[NaN,NaN];var a=r.day,l=this._getRangeInfo([o.start.time,r.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+l*this._sh+this._sh/2]:[this._rect.x+l*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},n.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},n.prototype.dataToRect=function(t,e){var r=this.dataToPoint(t,e);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},n.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,r=Math.floor((t[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(r,e-1,o):this._getDateByWeeksAndDay(e,r-1,o)},n.prototype.convertToPixel=function(t,e,r){var o=YO(e);return o===this?o.dataToPoint(r):null},n.prototype.convertFromPixel=function(t,e,r){var o=YO(e);return o===this?o.pointToData(r):null},n.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var t,e=this._model.get("range");if(Ee(e)&&1===e.length&&(e=e[0]),Ee(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var o=this.getDateInfo(r),i=o.date;i.setMonth(i.getMonth()+1);var a=this.getNextNDay(i,-1);t=[o.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var l=this._getRangeInfo(t);return l.start.time>l.end.time&&t.reverse(),t},n.prototype._getRangeInfo=function(t){var e,r=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];r[0].time>r[1].time&&(e=!0,r.reverse());var o=Math.floor(r[1].time/_R)-Math.floor(r[0].time/_R)+1,i=new Date(r[0].time),a=i.getDate(),l=r[1].date.getDate();i.setDate(a+o-1);var c=i.getDate();if(c!==l)for(var h=i.getTime()-r[1].time>0?1:-1;(c=i.getDate())!==l&&(i.getTime()-r[1].time)*h>0;)o-=h,i.setDate(c-h);var p=Math.floor((o+r[0].day+6)/7),g=e?1-p:p-1;return e&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:o,weeks:p,nthWeek:g,fweek:r[0].day,lweek:r[1].day}},n.prototype._getDateByWeeksAndDay=function(t,e,r){var o=this._getRangeInfo(r);if(t>o.weeks||0===t&&e<o.fweek||t===o.weeks&&e>o.lweek)return null;var i=7*(t-1)-o.fweek+e,a=new Date(o.start.time);return a.setDate(+o.start.d+i),this.getDateInfo(a)},n.create=function(t,e){var r=[];return t.eachComponent("calendar",function(o){var i=new n(o,t,e);r.push(i),o.coordinateSystem=i}),t.eachSeries(function(o){"calendar"===o.get("coordinateSystem")&&(o.coordinateSystem=r[o.get("calendarIndex")||0])}),r},n.dimensions=["time","value"],n}();function YO(n){var t=n.calendarModel,e=n.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem:null}function XO(n,t){var e;return Z(t,function(r){null!=n[r]&&"auto"!==n[r]&&(e=!0)}),e}var qO=["transition","enterFrom","leaveTo"],Wz=qO.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function WN(n,t,e){if(e&&(!n[e]&&t[e]&&(n[e]={}),n=n[e],t=t[e]),n&&t)for(var r=e?qO:Wz,o=0;o<r.length;o++){var i=r[o];null==n[i]&&null!=t[i]&&(n[i]=t[i])}}var Uz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.preventAutoZ=!0,e}return Ce(t,n),t.prototype.mergeOption=function(e,r){var o=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,e,r),this.option.elements=o},t.prototype.optionUpdated=function(e,r){var o=this.option,i=(r?o:e).elements,a=o.elements=r?[]:o.elements,l=[];this._flatten(i,l,null);var c=qp(a,l,"normalMerge"),h=this._elOptionsToUpdate=[];Z(c,function(p,g){var b,_,w,S,M,A,y=p.newOption;y&&(h.push(y),function(b,_){var w=b.existing;if(_.id=b.keyInfo.id,!_.type&&w&&(_.type=w.type),null==_.parentId){var S=_.parentOption;S?_.parentId=S.id:w&&(_.parentId=w.parentId)}_.parentOption=null}(p,y),b=a,_=g,S=De({},w=y),M=b[_],"merge"===(A=w.$action||"merge")?M?(Ve(M,S,!0),oc(M,S,{ignoreSize:!0}),B0(w,M),WN(w,M),WN(w,M,"shape"),WN(w,M,"style"),WN(w,M,"extra"),w.clipPath=M.clipPath):b[_]=S:"replace"===A?b[_]=S:"remove"===A&&M&&(b[_]=null),function(b,_){if(b&&(b.hv=_.hv=[XO(_,["left","right"]),XO(_,["top","bottom"])],"group"===b.type)){var w=b,S=_;null==w.width&&(w.width=S.width=0),null==w.height&&(w.height=S.height=0)}}(a[g],y))},this),o.elements=Xn(a,function(p){return p&&delete p.$action,null!=p})},t.prototype._flatten=function(e,r,o){Z(e,function(i){if(i){o&&(i.parentOption=o),r.push(i);var a=i.children;a&&a.length&&this._flatten(a,r,i),delete i.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t}(wn),ZO={path:null,compoundPath:null,group:on,image:jo,text:Kn},Tu=Gn(),jz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(){this._elMap=Et()},t.prototype.render=function(e,r,o){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,o)},t.prototype._updateElements=function(e){var r=e.useElOptionsToUpdate();if(r){var o=this._elMap,i=this.group,a=e.get("z"),l=e.get("zlevel");Z(r,function(c){var h=Po(c.id,null),p=null!=h?o.get(h):null,g=Po(c.parentId,null),y=null!=g?o.get(g):i,b=c.type,_=c.style;"text"===b&&_&&c.hv&&c.hv[1]&&(_.textVerticalAlign=_.textBaseline=_.verticalAlign=_.align=null);var w=c.textContent,S=c.textConfig;if(_&&Hd(_,b,!!S,!!w)){var M=Wx(_,b,!0);!S&&M.textConfig&&(S=c.textConfig=M.textConfig),!w&&M.textContent&&(w=M.textContent)}var ie,A=(ie=De({},ie=c),Z(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Lh),function(se){delete ie[se]}),ie),I=c.$action||"merge",N="merge"===I,L="replace"===I;if(N){var R=p;(J=!p)?R=$O(h,y,c.type,o):(R&&(Tu(R).isNew=!1),UT(R)),R&&(fv(R,A,e,{isInit:J}),KO(R,c,a,l))}else if(L){UN(p,c,o,e);var O=$O(h,y,c.type,o);O&&(fv(O,A,e,{isInit:!0}),KO(O,c,a,l))}else"remove"===I&&(RN(p,c),UN(p,c,o,e));var B=o.get(h);if(B&&w)if(N){var G=B.getTextContent();G?G.attr(w):B.setTextContent(new Kn(w))}else L&&B.setTextContent(new Kn(w));if(B){var W=c.clipPath;if(W){var Y=W.type,X=void 0,J=!1;if(N){var ne=B.getClipPath();X=(J=!ne||Tu(ne).type!==Y)?wR(Y):ne}else L&&(J=!0,X=wR(Y));B.setClipPath(X),fv(X,W,e,{isInit:J}),yv(X,W.keyframeAnimation,e)}var oe=Tu(B);B.setTextConfig(S),oe.option=c,function(ie,se,le){var pe=cn(ie).eventData;ie.silent||ie.ignore||pe||(pe=cn(ie).eventData={componentType:"graphic",componentIndex:se.componentIndex,name:ie.name}),pe&&(pe.info=le.info)}(B,e,c),bf({el:B,componentModel:e,itemName:B.name,itemTooltipOption:c.tooltip}),yv(B,c.keyframeAnimation,e)}})}},t.prototype._relocate=function(e,r){for(var o=e.option.elements,i=this.group,a=this._elMap,l=r.getWidth(),c=r.getHeight(),h=["x","y"],p=0;p<o.length;p++)if((S=null!=(w=Po((_=o[p]).id,null))?a.get(w):null)&&S.isGroup){var g=(M=S.parent)===i,y=Tu(S),b=Tu(M);y.width=Ct(y.option.width,g?l:b.width)||0,y.height=Ct(y.option.height,g?c:b.height)||0}for(p=o.length-1;p>=0;p--){var _,w,S;if(S=null!=(w=Po((_=o[p]).id,null))?a.get(w):null){var M=S.parent,A=(b=Tu(M),{}),I=Df(S,_,M===i?{width:l,height:c}:{width:b.width,height:b.height},null,{hv:_.hv,boundingMode:_.bounding},A);if(!Tu(S).isNew&&I){for(var N=_.transition,L={},R=0;R<h.length;R++){var O=h[R],B=A[O];N&&(Dc(N)||$t(N,O)>=0)?L[O]=B:S[O]=B}hr(S,L,e,0)}else S.attr(A)}}},t.prototype._clear=function(){var e=this,r=this._elMap;r.each(function(o){UN(o,Tu(o).option,r,e._lastGraphicModel)}),this._elMap=Et()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(Wr);function wR(n){var e=new(Lt(ZO,n)?ZO[n]:v0(n))({});return Tu(e).type=n,e}function $O(n,t,e,r){var o=wR(e);return t.add(o),r.set(n,o),Tu(o).id=n,Tu(o).isNew=!0,o}function UN(n,t,e,r){n&&n.parent&&("group"===n.type&&n.traverse(function(o){UN(o,t,e,r)}),_p(n,t,r),e.removeKey(Tu(n).id))}function KO(n,t,e,r){n.isGroup||Z([["cursor",hs.prototype.cursor],["zlevel",r||0],["z",e||0],["z2",0]],function(o){var i=o[0];Lt(t,i)?n[i]=We(t[i],o[1]):null==n[i]&&(n[i]=o[1])}),Z(vn(t),function(o){if(0===o.indexOf("on")){var i=t[o];n[o]=Se(i)?i:null}}),Lt(t,"draggable")&&(n.draggable=t.draggable),null!=t.name&&(n.name=t.name),null!=t.id&&(n.id=t.id)}var JO=["x","y","radius","angle","single"],Yz=["cartesian2d","polar","singleAxis"];function Rg(n){return n+"Axis"}function QO(n){var t=n.ecModel,e={infoList:[],infoMap:Et()};return n.eachTargetAxis(function(r,o){var i=t.getComponent(Rg(r),o);if(i){var a=i.getCoordSysModel();if(a){var l=a.uid,c=e.infoMap.get(l);c||(e.infoList.push(c={model:a,axisModels:[]}),e.infoMap.set(l,c)),c.axisModels.push(i)}}}),e}var SR=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},n}(),XT=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return Ce(t,n),t.prototype.init=function(e,r,o){var i=eP(e);this.settledOption=i,this.mergeDefaultAndTheme(e,o),this._doInit(i)},t.prototype.mergeOption=function(e){var r=eP(e);Ve(this.option,e,!0),Ve(this.settledOption,r,!0),this._doInit(r)},t.prototype._doInit=function(e){var r=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var o=this.settledOption;Z([["start","startValue"],["end","endValue"]],function(i,a){"value"===this._rangePropMode[a]&&(r[i[0]]=o[i[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),r=this._targetAxisInfoMap=Et();this._fillSpecifiedTargetAxis(r)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(o){o.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var r=!1;return Z(JO,function(o){var i=this.getReferringComponents(Rg(o),hA);if(i.specified){r=!0;var a=new SR;Z(i.models,function(l){a.add(l.componentIndex)}),e.set(o,a)}},this),r},t.prototype._fillAutoTargetAxisByOrient=function(e,r){var o=this.ecModel,i=!0;if(i){var a="vertical"===r?"y":"x";l(o.findComponents({mainType:a+"Axis"}),a)}function l(c,h){var p=c[0];if(p){var g=new SR;if(g.add(p.componentIndex),e.set(h,g),i=!1,"x"===h||"y"===h){var y=p.getReferringComponents("grid",Mo).models[0];y&&Z(c,function(b){p.componentIndex!==b.componentIndex&&y===b.getReferringComponents("grid",Mo).models[0]&&g.add(b.componentIndex)})}}}i&&l(o.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}}),"single"),i&&Z(JO,function(c){if(i){var h=o.findComponents({mainType:Rg(c),filter:function(g){return"category"===g.get("type",!0)}});if(h[0]){var p=new SR;p.add(h[0].componentIndex),e.set(c,p),i=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(r){!e&&(e=r)},this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var r=this._rangePropMode,o=this.get("rangeMode");Z([["start","startValue"],["end","endValue"]],function(i,a){var l=null!=e[i[0]],c=null!=e[i[1]];l&&!c?r[a]="percent":!l&&c?r[a]="value":o?r[a]=o[a]:l&&(r[a]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(r,o){null==e&&(e=this.ecModel.getComponent(Rg(r),o))},this),e},t.prototype.eachTargetAxis=function(e,r){this._targetAxisInfoMap.each(function(o,i){Z(o.indexList,function(a){e.call(r,i,a)})})},t.prototype.getAxisProxy=function(e,r){var o=this.getAxisModel(e,r);if(o)return o.__dzAxisProxy},t.prototype.getAxisModel=function(e,r){var o=this._targetAxisInfoMap.get(e);if(o&&o.indexMap[r])return this.ecModel.getComponent(Rg(e),r)},t.prototype.setRawRange=function(e){var r=this.option,o=this.settledOption;Z([["start","startValue"],["end","endValue"]],function(i){null==e[i[0]]&&null==e[i[1]]||(r[i[0]]=o[i[0]]=e[i[0]],r[i[1]]=o[i[1]]=e[i[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var r=this.option;Z(["start","startValue","end","endValue"],function(o){r[o]=e[o]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,r){if(null!=e||null!=r)return this.getAxisProxy(e,r).getDataValueWindow();var o=this.findRepresentativeAxisProxy();return o?o.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var r,o=this._targetAxisInfoMap.keys(),i=0;i<o.length;i++)for(var a=o[i],l=this._targetAxisInfoMap.get(a),c=0;c<l.indexList.length;c++){var h=this.getAxisProxy(a,l.indexList[c]);if(h.hostedBy(this))return h;r||(r=h)}return r},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(wn);function eP(n){var t={};return Z(["start","end","startValue","endValue","throttle"],function(e){n.hasOwnProperty(e)&&(t[e]=n[e])}),t}var qz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="dataZoom.select",t}(XT),CR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o,i){this.dataZoomModel=e,this.ecModel=r,this.api=o},t.type="dataZoom",t}(Wr),Zz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="dataZoom.select",t}(CR),Yx=Z,tP=ds,$z=function(){function n(t,e,r,o){this._dimName=t,this._axisIndex=e,this.ecModel=o,this._dataZoomModel=r}return n.prototype.hostedBy=function(t){return this._dataZoomModel===t},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(a=e.get("coordinateSystem"),$t(Yz,a)>=0){var r=Rg(this._dimName),o=e.getReferringComponents(r,Mo).models[0];o&&this._axisIndex===o.componentIndex&&t.push(e)}var a},this),t},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return jt(this._minMaxSpan)},n.prototype.calculateDataWindow=function(t){var e,r=this._dataExtent,o=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),a=[0,100],l=[],c=[];Yx(["start","end"],function(g,y){var b=t[g],_=t[g+"Value"];"percent"===i[y]?(null==b&&(b=a[y]),_=o.parse(lr(b,a,r))):(e=!0,b=lr(_=null==_?r[y]:o.parse(_),r,a)),c[y]=null==_||isNaN(_)?r[y]:_,l[y]=null==b||isNaN(b)?a[y]:b}),tP(c),tP(l);var h=this._minMaxSpan;function p(g,y,b,_,w){var S=w?"Span":"ValueSpan";Od(0,g,b,"all",h["min"+S],h["max"+S]);for(var M=0;M<2;M++)y[M]=lr(g[M],b,_,!0),w&&(y[M]=o.parse(y[M]))}return e?p(c,l,r,a,!1):p(l,c,a,r,!0),{valueWindow:c,percentWindow:l}},n.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(o,i,a){var l=[1/0,-1/0];Yx(a,function(p){var g,y;g=l,(y=p.getData())&&Z(vy(y,i),function(_){var w=y.getApproximateExtent(_);w[0]<g[0]&&(g[0]=w[0]),w[1]>g[1]&&(g[1]=w[1])})});var c=o.getAxisModel(),h=nC(c.axis.scale,c,l).calculate();return[h.min,h.max]}(this,this._dimName,e),this._updateMinMaxSpan();var r=this.calculateDataWindow(t.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var r=this._dimName,o=this.getTargetSeriesModels(),i=t.get("filterMode"),a=this._valueWindow;"none"!==i&&Yx(o,function(l){var c=l.getData(),h=c.mapDimensionsAll(r);if(h.length){if("weakFilter"===i){var p=c.getStore(),g=j(h,function(y){return c.getDimensionIndex(y)},c);c.filterSelf(function(y){for(var b,_,w,S=0;S<h.length;S++){var M=p.get(g[S],y),A=!isNaN(M),I=M<a[0],N=M>a[1];if(A&&!I&&!N)return!0;A&&(w=!0),I&&(b=!0),N&&(_=!0)}return w&&b&&_})}else Yx(h,function(y){if("empty"===i)l.setData(c=c.map(y,function(_){return(w=_)>=a[0]&&w<=a[1]?_:NaN;var w}));else{var b={};b[y]=a,c.selectRange(b)}});Yx(h,function(y){c.setApproximateExtent(a,y)})}})}},n.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,r=this._dataExtent;Yx(["min","max"],function(o){var i=e.get(o+"Span"),a=e.get(o+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?i=lr(r[0]+a,r,[0,100],!0):null!=i&&(a=lr(i,[0,100],r,!0)-r[0]),t[o+"Span"]=i,t[o+"ValueSpan"]=a},this)},n.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,r=this._valueWindow;if(e){var o=Pv(r,[0,500]);o=Math.min(o,20);var i=t.axis.scale.rawExtentInfo;0!==e[0]&&i.setDeterminedMinMax("min",+r[0].toFixed(o)),100!==e[1]&&i.setDeterminedMinMax("max",+r[1].toFixed(o)),i.freeze()}},n}(),Kz={getTargetSeries:function(n){function t(o){n.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(a,l){var c=n.getComponent(Rg(a),l);o(a,l,c,i)})})}t(function(o,i,a,l){a.__dzAxisProxy=null});var e=[];t(function(o,i,a,l){a.__dzAxisProxy||(a.__dzAxisProxy=new $z(o,i,l,n),e.push(a.__dzAxisProxy))});var r=Et();return Z(e,function(o){Z(o.getTargetSeriesModels(),function(i){r.set(i.uid,i)})}),r},overallReset:function(n,t){n.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(r,o){e.getAxisProxy(r,o).reset(e)}),e.eachTargetAxis(function(r,o){e.getAxisProxy(r,o).filterData(e,t)})}),n.eachComponent("dataZoom",function(e){var r=e.findRepresentativeAxisProxy();if(r){var o=r.getDataPercentWindow(),i=r.getDataValueWindow();e.setCalculatedRange({start:o[0],end:o[1],startValue:i[0],endValue:i[1]})}})}},nP=!1;function MR(n){nP||(nP=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,Kz),function(t){t.registerAction("dataZoom",function(e,r){Z(function Xz(n,t){var e,r=Et(),o=[],i=Et();n.eachComponent({mainType:"dataZoom",query:t},function(c){i.get(c.uid)||l(c)});do{e=!1,n.eachComponent("dataZoom",a)}while(e);function a(c){var p;!i.get(c.uid)&&(p=!1,c.eachTargetAxis(function(g,y){var b=r.get(g);b&&b[y]&&(p=!0)}),p)&&(l(c),e=!0)}function l(c){i.set(c.uid,!0),o.push(c),c.eachTargetAxis(function(h,p){(r.get(h)||r.set(h,[]))[p]=!0})}return o}(r,e),function(o){o.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Jz(n){n.registerComponentModel(qz),n.registerComponentView(Zz),MR(n)}var Au=function(){},rP={};function Xx(n,t){rP[n]=t}function oP(n){return rP[n]}var Qz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;Z(this.option.feature,function(r,o){var i=oP(o);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),Ve(r,i.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(wn);function iP(n,t){var e=ru(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),new $n({shape:{x:n.x-e[3],y:n.y-e[0],width:n.width+e[1]+e[3],height:n.height+e[0]+e[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1})}var e5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.render=function(e,r,o,i){var b,_,w,S,M,A,I,a=this.group;if(a.removeAll(),e.get("show")){var l=+e.get("itemSize"),c="vertical"===e.get("orient"),h=e.get("feature")||{},p=this._features||(this._features={}),g=[];Z(h,function(b,_){g.push(_)}),new Js(this._featureNames||[],g).add(y).update(y).remove(_t(y,null)).execute(),this._featureNames=g,b=a,w=o,S=(_=e).getBoxLayoutParams(),M=_.get("padding"),I=xo(S,A={width:w.getWidth(),height:w.getHeight()},M),Ga(_.get("orient"),b,_.get("itemGap"),I.width,I.height),Df(b,S,A,M),a.add(iP(a.getBoundingRect(),e)),c||a.eachChild(function(b){var _=b.__title,w=b.ensureState("emphasis"),S=w.textConfig||(w.textConfig={}),M=b.getTextContent(),A=M&&M.ensureState("emphasis");if(A&&!Se(A)&&_){var I=A.style||(A.style={}),N=Ug(_,Kn.makeFont(I)),L=b.x+a.x,R=!1;b.y+a.y+l+N.height>o.getHeight()&&(S.position="top",R=!0);var O=R?-5-N.height:l+10;L+N.width/2>o.getWidth()?(S.position=["100%",O],I.align="right"):L-N.width/2<0&&(S.position=[0,O],I.align="left")}})}function y(b,_){var w,S=g[b],M=g[_],A=h[S],I=new gr(A,e,e.ecModel);if(i&&null!=i.newTitle&&i.featureName===S&&(A.title=i.newTitle),S&&!M){if(0===S.indexOf("my"))w={onclick:I.option.onclick,featureName:S};else{var N=oP(S);if(!N)return;w=new N}p[S]=w}else if(!(w=p[M]))return;w.uid=Mh("toolbox-feature"),w.model=I,w.ecModel=r,w.api=o;var L=w instanceof Au;S||!M?!I.get("show")||L&&w.unusable?L&&w.remove&&w.remove(r,o):(function(R,O,B){var G,W,Y=R.getModel("iconStyle"),X=R.getModel(["emphasis","iconStyle"]),J=O instanceof Au&&O.getIcons?O.getIcons():R.get("icon"),ne=R.get("title")||{};bt(J)?(G={})[B]=J:G=J,bt(ne)?(W={})[B]=ne:W=ne;var oe=R.iconPaths={};Z(G,function(ie,se){var le=tu(ie,{},{x:-l/2,y:-l/2,width:l,height:l});le.setStyle(Y.getItemStyle()),le.ensureState("emphasis").style=X.getItemStyle();var pe=new Kn({style:{text:W[se],align:X.get("textAlign"),borderRadius:X.get("textBorderRadius"),padding:X.get("textPadding"),fill:null,font:sw({fontStyle:X.get("textFontStyle"),fontFamily:X.get("textFontFamily"),fontSize:X.get("textFontSize"),fontWeight:X.get("textFontWeight")},r)},ignore:!0});le.setTextContent(pe),bf({el:le,componentModel:e,itemName:se,formatterParamsExtra:{title:W[se]}}),le.__title=W[se],le.on("mouseover",function(){var me=X.getItemStyle(),ve=c?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";pe.setStyle({fill:X.get("textFill")||me.fill||me.stroke||"#000",backgroundColor:X.get("textBackgroundColor")}),le.setTextConfig({position:X.get("textPosition")||ve}),pe.ignore=!e.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==R.get(["iconStatus",se])&&o.leaveEmphasis(this),pe.hide()}),("emphasis"===R.get(["iconStatus",se])?Ku:Ql)(le),a.add(le),le.on("click",Fe(O.onclick,O,r,o,se)),oe[se]=le})}(I,w,S),I.setIconStatus=function(R,O){var B=this.option,G=this.iconPaths;B.iconStatus=B.iconStatus||{},B.iconStatus[R]=O,G[R]&&("emphasis"===O?Ku:Ql)(G[R])},w instanceof Au&&w.render&&w.render(I,r,o,i)):L&&w.dispose&&w.dispose(r,o)}},t.prototype.updateView=function(e,r,o,i){Z(this._features,function(a){a instanceof Au&&a.updateView&&a.updateView(a.model,r,o,i)})},t.prototype.remove=function(e,r){Z(this._features,function(o){o instanceof Au&&o.remove&&o.remove(e,r)}),this.group.removeAll()},t.prototype.dispose=function(e,r){Z(this._features,function(o){o instanceof Au&&o.dispose&&o.dispose(e,r)})},t.type="toolbox",t}(Wr),t5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.onclick=function(e,r){var o=this.model,i=o.get("name")||e.get("title.0.text")||"echarts",a="svg"===r.getZr().painter.getType(),l=a?"svg":o.get("type",!0)||"png",c=r.getConnectedDataURL({type:l,backgroundColor:o.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),h=gn.browser;if("function"!=typeof MouseEvent||!h.newEdge&&(h.ie||h.edge))if(window.navigator.msSaveOrOpenBlob||a){var p=c.split(","),g=p[0].indexOf("base64")>-1,y=a?decodeURIComponent(p[1]):p[1];g&&(y=window.atob(y));var b=i+"."+l;if(window.navigator.msSaveOrOpenBlob){for(var _=y.length,w=new Uint8Array(_);_--;)w[_]=y.charCodeAt(_);var S=new Blob([w]);window.navigator.msSaveOrOpenBlob(S,b)}else{var M=document.createElement("iframe");document.body.appendChild(M);var A=M.contentWindow,I=A.document;I.open("image/svg+xml","replace"),I.write(y),I.close(),A.focus(),I.execCommand("SaveAs",!0,b),document.body.removeChild(M)}}else{var N=o.get("lang"),L='<body style="margin:0;"><img src="'+c+'" style="max-width:100%;" title="'+(N&&N[0]||"")+'" /></body>',R=window.open();R.document.write(L),R.document.title=i}else{var O=document.createElement("a");O.download=i+"."+l,O.target="_blank",O.href=c;var B=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});O.dispatchEvent(B)}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},t}(Au),aP="__ec_magicType_stack__",n5=[["line","bar"],["stack"]],r5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.getIcons=function(){var e=this.model,r=e.get("icon"),o={};return Z(e.get("type"),function(i){r[i]&&(o[i]=r[i])}),o},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,r,o){var i=this.model,a=i.get(["seriesIndex",o]);if(sP[o]){var l,c={series:[]};Z(n5,function(p){$t(p,o)>=0&&Z(p,function(g){i.setIconStatus(g,"normal")})}),i.setIconStatus(o,"emphasis"),e.eachComponent({mainType:"series",query:null==a?null:{seriesIndex:a}},function(p){var b=sP[o](p.subType,p.id,p,i);b&&(Pe(b,p.option),c.series.push(b));var _=p.coordinateSystem;if(_&&"cartesian2d"===_.type&&("line"===o||"bar"===o)){var w=_.getAxesByScale("ordinal")[0];if(w){var S=w.dim+"Axis",M=p.getReferringComponents(S,Mo).models[0].componentIndex;c[S]=c[S]||[];for(var A=0;A<=M;A++)c[S][M]=c[S][M]||{};c[S][M].boundaryGap="bar"===o}}});var h=o;"stack"===o&&(l=Ve({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",o])&&(h="tiled")),r.dispatchAction({type:"changeMagicType",currentType:h,newOption:c,newTitle:l,featureName:"magicType"})}},t}(Au),sP={line:function(n,t,e,r){if("bar"===n)return Ve({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,t,e,r){if("line"===n)return Ve({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,t,e,r){var o=e.get("stack")===aP;if("line"===n||"bar"===n)return r.setIconStatus("stack",o?"normal":"emphasis"),Ve({id:t,stack:o?"":aP},r.get(["option","stack"])||{},!0)}};Ks({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,t){t.mergeOption(n.newOption)});var jN=new Array(60).join("-"),qT="\t";function YN(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var TR=new RegExp("[\t]+","g"),i5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.onclick=function(e,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var o=r.getDom(),i=this.model;this._dom&&o.removeChild(this._dom);var a=document.createElement("div");a.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",a.style.backgroundColor=i.get("backgroundColor")||"#fff";var l=document.createElement("h4"),c=i.get("lang")||[];l.innerHTML=c[0]||i.get("title"),l.style.cssText="margin:10px 20px",l.style.color=i.get("textColor");var h=document.createElement("div"),p=document.createElement("textarea");h.style.cssText="overflow:auto";var B,G,W,J,ne,oe,Y,g=i.get("optionToContent"),y=i.get("contentToOption"),b=(J={},ne=[],oe=[],e.eachRawSeries(function(ie){var se=ie.coordinateSystem;if(!se||"cartesian2d"!==se.type&&"polar"!==se.type)ne.push(ie);else{var le=se.getBaseAxis();if("category"===le.type){var pe=le.dim+"_"+le.index;J[pe]||(J[pe]={categoryAxis:le,valueAxis:se.getOtherAxis(le),series:[]},oe.push({axisDim:le.dim,axisIndex:le.index})),J[pe].series.push(ie)}else ne.push(ie)}}),{value:Xn([(G=(Y={seriesGroupByCategoryAxis:J,other:ne,meta:oe}).seriesGroupByCategoryAxis,W=[],Z(G,function(X,J){var ne=X.categoryAxis,oe=X.valueAxis.dim,ie=[" "].concat(j(X.series,function(He){return He.name})),se=[ne.model.getCategories()];Z(X.series,function(He){var nt=He.getRawData();se.push(He.getRawData().mapArray(nt.mapDimension(oe),function(Me){return Me}))});for(var le=[ie.join(qT)],pe=0;pe<se[0].length;pe++){for(var me=[],ve=0;ve<se.length;ve++)me.push(se[ve][pe]);le.push(me.join(qT))}W.push(le.join("\n"))}),W.join("\n\n"+jN+"\n\n")),(B=Y.other,j(B,function(X){var J=X.getRawData(),ne=[X.name],oe=[];return J.each(J.dimensions,function(){for(var ie=arguments.length,le=J.getName(arguments[ie-1]),pe=0;pe<ie-1;pe++)oe[pe]=arguments[pe];ne.push((le?le+qT:"")+oe.join(qT))}),ne.join("\n")}).join("\n\n"+jN+"\n\n"))],function(X){return!!X.replace(/[\n\t\s]/g,"")}).join("\n\n"+jN+"\n\n"),meta:Y.meta});if(Se(g)){var _=g(r.getOption());bt(_)?h.innerHTML=_:Sr(_)&&h.appendChild(_)}else{p.readOnly=i.get("readOnly");var w=p.style;w.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",w.color=i.get("textColor"),w.borderColor=i.get("textareaBorderColor"),w.backgroundColor=i.get("textareaColor"),p.value=b.value,h.appendChild(p)}var S=b.meta,M=document.createElement("div");M.style.cssText="position:absolute;bottom:5px;left:0;right:0";var A="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",I=document.createElement("div"),N=document.createElement("div");A+=";background-color:"+i.get("buttonColor"),A+=";color:"+i.get("buttonTextColor");var L=this;function R(){o.removeChild(a),L._dom=null}jd(I,"click",R),jd(N,"click",function(){if(null==y&&null!=g||null!=y&&null==g)R();else{var O;try{O=Se(y)?y(h,r.getOption()):function o5(n,t){var e=n.split(new RegExp("\n*"+jN+"\n*","g")),r={series:[]};return Z(e,function(o,i){if(function(h){if(h.slice(0,h.indexOf("\n")).indexOf(qT)>=0)return!0}(o)){var a=function(h){for(var p=h.split(/\n+/g),g=[],y=j(YN(p.shift()).split(TR),function(S){return{name:S,data:[]}}),b=0;b<p.length;b++){var _=YN(p[b]).split(TR);g.push(_.shift());for(var w=0;w<_.length;w++)y[w]&&(y[w].data[b]=_[w])}return{series:y,categories:g}}(o),l=t[i],c=l.axisDim+"Axis";l&&(r[c]=r[c]||[],r[c][l.axisIndex]={data:a.categories},r.series=r.series.concat(a.series))}else a=function(h){for(var p=h.split(/\n+/g),g=YN(p.shift()),y=[],b=0;b<p.length;b++){var _=YN(p[b]);if(_){var w=_.split(TR),S="",M=void 0,A=!1;isNaN(w[0])?(A=!0,S=w[0],w=w.slice(1),y[b]={name:S,value:[]},M=y[b].value):M=y[b]=[];for(var I=0;I<w.length;I++)M.push(+w[I]);1===M.length&&(A?y[b].value=M[0]:y[b]=M[0])}}return{name:g,data:y}}(o),r.series.push(a)}),r}(p.value,S)}catch(B){throw R(),new Error("Data view format error "+B)}O&&r.dispatchAction({type:"changeDataView",newOption:O}),R()}}),I.innerHTML=c[1],N.innerHTML=c[2],N.style.cssText=I.style.cssText=A,!i.get("readOnly")&&M.appendChild(N),M.appendChild(I),a.appendChild(l),a.appendChild(h),a.appendChild(M),h.style.height=o.clientHeight-80+"px",o.appendChild(a),this._dom=a},t.prototype.remove=function(e,r){this._dom&&r.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,r){this.remove(e,r)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(Au);function a5(n,t){return j(n,function(e,r){var o=t&&t[r];if(Ft(o)&&!Ee(o)){Ft(e)&&!Ee(e)||(e={value:e});var i=null!=o.name&&null==e.name;return e=Pe(e,o),i&&delete e.name,e}return e})}Ks({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,t){var e=[];Z(n.newOption.series,function(r){var o=t.getSeriesByName(r.name)[0];if(o){var i=o.get("data");e.push({name:r.name,data:a5(r.data,i)})}else e.push(De({type:"scatter"},r))}),t.mergeOption(Pe({series:e},n.newOption))});var lP=Z,uP=Gn();function AR(n){var t=uP(n);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var s5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.onclick=function(e,r){uP(e).snapshots=null,r.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},t}(Au);Ks({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,t){t.resetOption("recreate")});var l5=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],kR=function(){function n(t,e,r){var o=this;this._targetInfoList=[];var i=cP(e,t);Z(u5,function(a,l){(!r||!r.include||$t(r.include,l)>=0)&&a(i,o._targetInfoList)})}return n.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(r,o,i){if((r.coordRanges||(r.coordRanges=[])).push(o),!r.coordRange){r.coordRange=o;var a=DR[r.brushType](0,i,o);r.__rangeOffset={offset:fP[r.brushType](a.values,r.range,[1,1]),xyMinMax:a.xyMinMax}}}),t},n.prototype.matchOutputRanges=function(t,e,r){Z(t,function(o){var i=this.findTargetInfo(o,e);i&&!0!==i&&Z(i.coordSyses,function(a){var l=DR[o.brushType](1,a,o.range,!0);r(o,l.values,a,e)})},this)},n.prototype.setInputRanges=function(t,e){Z(t,function(r){var i,a,l,c,h=this.findTargetInfo(r,e);if(r.range=r.range||[],h&&!0!==h){r.panelId=h.panelId;var p=DR[r.brushType](0,h.coordSys,r.coordRange),g=r.__rangeOffset;r.range=g?fP[r.brushType](p.values,g.offset,(i=g.xyMinMax,a=mP(p.xyMinMax),l=mP(i),c=[a[0]/l[0],a[1]/l[1]],isNaN(c[0])&&(c[0]=1),isNaN(c[1])&&(c[1]=1),c)):p.values}},this)},n.prototype.makePanelOpts=function(t,e){return j(this._targetInfoList,function(r){var o=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:e?e(r):null,clipPath:LT(o),isTargetByCursor:Vd(o,t,r.coordSysModel),getLinearBrushOtherExtent:RT(o)}})},n.prototype.controlSeries=function(t,e,r){var o=this.findTargetInfo(t,r);return!0===o||o&&$t(o.coordSyses,e.coordinateSystem)>=0},n.prototype.findTargetInfo=function(t,e){for(var r=this._targetInfoList,o=cP(e,t),i=0;i<r.length;i++){var a=r[i],l=t.panelId;if(l){if(a.panelId===l)return a}else for(var c=0;c<dP.length;c++)if(dP[c](o,a))return a}return!0},n}();function IR(n){return n[0]>n[1]&&n.reverse(),n}function cP(n,t){return Zg(n,t,{includeMainTypes:l5})}var u5={grid:function(n,t){var e=n.xAxisModels,r=n.yAxisModels,o=n.gridModels,i=Et(),a={},l={};(e||r||o)&&(Z(e,function(c){var h=c.axis.grid.model;i.set(h.id,h),a[h.id]=!0}),Z(r,function(c){var h=c.axis.grid.model;i.set(h.id,h),l[h.id]=!0}),Z(o,function(c){i.set(c.id,c),a[c.id]=!0,l[c.id]=!0}),i.each(function(c){var p=[];Z(c.coordinateSystem.getCartesians(),function(g,y){($t(e,g.getAxis("x").model)>=0||$t(r,g.getAxis("y").model)>=0)&&p.push(g)}),t.push({panelId:"grid--"+c.id,gridModel:c,coordSysModel:c,coordSys:p[0],coordSyses:p,getPanelRect:hP.grid,xAxisDeclared:a[c.id],yAxisDeclared:l[c.id]})}))},geo:function(n,t){Z(n.geoModels,function(e){var r=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:r,coordSyses:[r],getPanelRect:hP.geo})})}},dP=[function(n,t){var e=n.xAxisModel,r=n.yAxisModel,o=n.gridModel;return!o&&e&&(o=e.axis.grid.model),!o&&r&&(o=r.axis.grid.model),o&&o===t.gridModel},function(n,t){var e=n.geoModel;return e&&e===t.geoModel}],hP={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,t=n.getBoundingRect().clone();return t.applyTransform(Va(n)),t}},DR={lineX:_t(pP,0),lineY:_t(pP,1),rect:function(n,t,e,r){var o=n?t.pointToData([e[0][0],e[1][0]],r):t.dataToPoint([e[0][0],e[1][0]],r),i=n?t.pointToData([e[0][1],e[1][1]],r):t.dataToPoint([e[0][1],e[1][1]],r),a=[IR([o[0],i[0]]),IR([o[1],i[1]])];return{values:a,xyMinMax:a}},polygon:function(n,t,e,r){var o=[[1/0,-1/0],[1/0,-1/0]];return{values:j(e,function(i){var a=n?t.pointToData(i,r):t.dataToPoint(i,r);return o[0][0]=Math.min(o[0][0],a[0]),o[1][0]=Math.min(o[1][0],a[1]),o[0][1]=Math.max(o[0][1],a[0]),o[1][1]=Math.max(o[1][1],a[1]),a}),xyMinMax:o}}};function pP(n,t,e,r){var o=e.getAxis(["x","y"][n]),i=IR(j([0,1],function(l){return t?o.coordToData(o.toLocalCoord(r[l]),!0):o.toGlobalCoord(o.dataToCoord(r[l]))})),a=[];return a[n]=i,a[1-n]=[NaN,NaN],{values:i,xyMinMax:a}}var fP={lineX:_t(gP,0),lineY:_t(gP,1),rect:function(n,t,e){return[[n[0][0]-e[0]*t[0][0],n[0][1]-e[0]*t[0][1]],[n[1][0]-e[1]*t[1][0],n[1][1]-e[1]*t[1][1]]]},polygon:function(n,t,e){return j(n,function(r,o){return[r[0]-e[0]*t[o][0],r[1]-e[1]*t[o][1]]})}};function gP(n,t,e,r){return[t[0]-r[n]*e[0],t[1]-r[n]*e[1]]}function mP(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var ER,LR=Z,c5=m_+"toolbox-dataZoom_",d5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.render=function(e,r,o,i){this._brushController||(this._brushController=new kx(o.getZr()),this._brushController.on("brush",Fe(this._onBrush,this)).mount()),function(a,l,c,h,p){var g=c._isZoomActive;h&&"takeGlobalCursor"===h.type&&(g="dataZoomSelect"===h.key&&h.dataZoomSelectActive),c._isZoomActive=g,a.setIconStatus("zoom",g?"emphasis":"normal");var b=new kR(RR(a),l,{include:["grid"]}).makePanelOpts(p,function(_){return _.xAxisDeclared&&!_.yAxisDeclared?"lineX":!_.xAxisDeclared&&_.yAxisDeclared?"lineY":"rect"});c._brushController.setPanels(b).enableBrush(!(!g||!b.length)&&{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()})}(e,r,this,i,o),e.setIconStatus("back",AR(r).length>1?"emphasis":"normal")},t.prototype.onclick=function(e,r,o){h5[o].call(this)},t.prototype.remove=function(e,r){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,r){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var l,c,h,r=e.areas;if(e.isEnd&&r.length){var o={},i=this.ecModel;this._brushController.updateCovers([]),new kR(RR(this.model),i,{include:["grid"]}).matchOutputRanges(r,i,function(l,c,h){if("cartesian2d"===h.type){var p=l.brushType;"rect"===p?(a("x",h,c[0]),a("y",h,c[1])):a({lineX:"x",lineY:"y"}[p],h,c)}}),c=o,h=AR(l=i),lP(c,function(p,g){for(var y=h.length-1;y>=0&&!h[y][g];y--);if(y<0){var b=l.queryComponents({mainType:"dataZoom",subType:"select",id:g})[0];if(b){var _=b.getPercentRange();h[0][g]={dataZoomId:g,start:_[0],end:_[1]}}}}),h.push(c),this._dispatchZoomAction(o)}function a(l,c,h){var _,w,M,p=c.getAxis(l),g=p.model,y=(_=l,w=g,i.eachComponent({mainType:"dataZoom",subType:"select"},function(A){A.getAxisModel(_,w.componentIndex)&&(M=A)}),M),b=y.findRepresentativeAxisProxy(g).getMinMaxSpan();null==b.minValueSpan&&null==b.maxValueSpan||(h=Od(0,h.slice(),p.scale.getExtent(),0,b.minValueSpan,b.maxValueSpan)),y&&(o[y.id]={dataZoomId:y.id,startValue:h[0],endValue:h[1]})}},t.prototype._dispatchZoomAction=function(e){var r=[];LR(e,function(o,i){r.push(jt(o))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(Au),h5={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(n){var t=AR(n),e=t[t.length-1];t.length>1&&t.pop();var r={};return lP(e,function(o,i){for(var a=t.length-1;a>=0;a--)if(o=t[a][i]){r[i]=o;break}}),r}(this.ecModel))}};function RR(n){var t={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}ER=function(n){var t=n.getComponent("toolbox",0),e=["feature","dataZoom"];if(t&&null!=t.get(e)){var r=t.getModel(e),o=[],i=Zg(n,RR(r));return LR(i.xAxisModels,function(l){return a(l,"xAxis","xAxisIndex")}),LR(i.yAxisModels,function(l){return a(l,"yAxis","yAxisIndex")}),o}function a(l,c,h){var p=l.componentIndex,g={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:c5+c+p};g[h]=p,o.push(g)}},bn(null==F0.get("dataZoom")&&ER),F0.set("dataZoom",ER);var p5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(wn);function yP(n){var t=n.get("confine");return null!=t?!!t:"richText"===n.get("renderMode")}function vP(n){if(gn.domSupported)for(var t=document.documentElement.style,e=0,r=n.length;e<r;e++)if(n[e]in t)return n[e]}var bP=vP(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function xP(n,t){if(!n)return t;t=Am(t,!0);var e=n.indexOf(t);return(n=-1===e?t:"-"+n.slice(0,e)+"-"+t).toLowerCase()}var f5=xP(vP(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),OR=xP(bP,"transform"),g5="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(gn.transform3dSupported?"will-change:transform;":"");function _P(n,t,e){var r=n.toFixed(0)+"px",o=t.toFixed(0)+"px";if(!gn.transformSupported)return e?"top:"+o+";left:"+r+";":[["top",o],["left",r]];var i=gn.transform3dSupported,a="translate"+(i?"3d":"")+"("+r+","+o+(i?",0":"")+")";return e?"top:0;left:0;"+OR+":"+a+";":[["top",0],["left",0],[bP,a]]}function wP(n,t,e,r,o){var c,p,i=t&&t.painter;if(e){var a=i&&i.getViewportRoot();a&&(c=n,p=e,Is(ii,a,r,o,!0)&&Is(c,p,ii[0],ii[1]))}else{n[0]=r,n[1]=o;var l=i&&i.getViewportRootOffset();l&&(n[0]+=l.offsetLeft,n[1]+=l.offsetTop)}n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var y5=function(){function n(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,gn.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var o=this._zr=t.getZr(),i=e.appendTo,a=i&&(bt(i)?document.querySelector(i):Sr(i)?i:Se(i)&&i(t.getDom()));wP(this._styleCoord,o,a,t.getWidth()/2,t.getHeight()/2),(a||t.getDom()).appendChild(r),this._api=t,this._container=a;var l=this;r.onmouseenter=function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0},r.onmousemove=function(c){if(c=c||window.event,!l._enterable){var h=o.handler;Xr(o.painter.getViewportRoot(),c,!0),h.dispatch("mousemove",c)}},r.onmouseleave=function(){l._inContent=!1,l._enterable&&l._show&&l.hideLater(l._hideDelay)}}return n.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),r=(a="position",(l=(i=e).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(i))?a?l[a]:l:null),o=e.style;"absolute"!==o.position&&"absolute"!==r&&(o.position="relative")}var i,a,l,c=t.get("alwaysShowContent");c&&this._moveIfResized(),this._alwaysShowContent=c,this.el.className=t.get("className")||""},n.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,o=r.style,i=this._styleCoord;r.innerHTML?o.cssText=g5+function m5(n,t,e){var b,S,M,r=[],o=n.get("transitionDuration"),i=n.get("backgroundColor"),a=n.get("shadowBlur"),l=n.get("shadowColor"),c=n.get("shadowOffsetX"),h=n.get("shadowOffsetY"),p=n.getModel("textStyle"),g=Tk(n,"html");return r.push("box-shadow:"+c+"px "+h+"px "+a+"px "+l),t&&o&&r.push((M="opacity"+(S=" "+(b=o)/2+"s "+"cubic-bezier(0.23,1,0.32,1)")+",visibility"+S,e||(S=" "+b+"s cubic-bezier(0.23,1,0.32,1)",M+=gn.transformSupported?","+OR+S:",left"+S+",top"+S),f5+":"+M)),i&&r.push("background-color:"+i),Z(["width","color","radius"],function(b){var _="border-"+b,w=Am(_),S=n.get(w);null!=S&&r.push(_+":"+S+("color"===b?"":"px"))}),r.push(function(b){var _=[],w=b.get("fontSize"),S=b.getTextColor();S&&_.push("color:"+S),_.push("font:"+b.getFont()),w&&_.push("line-height:"+Math.round(3*w/2)+"px");var M=b.get("textShadowColor"),A=b.get("textShadowBlur")||0,I=b.get("textShadowOffsetX")||0,N=b.get("textShadowOffsetY")||0;return M&&A&&_.push("text-shadow:"+I+"px "+N+"px "+A+"px "+M),Z(["decoration","align"],function(L){var R=b.get(L);R&&_.push("text-"+L+":"+R)}),_.join(";")}(p)),null!=g&&r.push("padding:"+ru(g).join("px ")+"px"),r.join(";")+";"}(t,!this._firstShow,this._longHide)+_P(i[0],i[1],!0)+"border-color:"+Eh(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):o.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(t,e,r,o,i){var a=this.el;if(null!=t){var l="";if(bt(i)&&"item"===r.get("trigger")&&!yP(r)&&(l=function(p,g,y){if(!bt(y)||"inside"===y)return"";var b=p.get("backgroundColor"),_=p.get("borderWidth");g=Eh(g);var w,S,M="left"===(w=y)?"right":"right"===w?"left":"top"===w?"bottom":"top",A=Math.max(1.5*Math.round(_),6),I="",N=OR+":";$t(["left","right"],M)>-1?(I+="top:50%",N+="translateY(-50%) rotate("+(S="left"===M?-225:-45)+"deg)"):(I+="left:50%",N+="translateX(-50%) rotate("+(S="top"===M?225:45)+"deg)");var L=S*Math.PI/180,R=A+_,O=R*Math.abs(Math.cos(L))+R*Math.abs(Math.sin(L)),B=g+" solid "+_+"px;";return'<div style="'+["position:absolute;width:"+A+"px;height:"+A+"px;z-index:-1;",(I+=";"+M+":-"+Math.round(100*((O-Math.SQRT2*_)/2+Math.SQRT2*_-(O-R)/2))/100+"px")+";"+N+";","border-bottom:"+B,"border-right:"+B,"background-color:"+b+";"].join("")+'"></div>'}(r,o,i)),bt(t))a.innerHTML=t+l;else if(t){a.innerHTML="",Ee(t)||(t=[t]);for(var c=0;c<t.length;c++)Sr(t[c])&&t[c].parentNode!==a&&a.appendChild(t[c]);if(l&&a.childNodes.length){var h=document.createElement("div");h.innerHTML=l,a.appendChild(h)}}}else a.innerHTML=""},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},n.prototype.moveTo=function(t,e){var r=this._styleCoord;if(wP(r,this._zr,this._container,t,e),null!=r[0]&&null!=r[1]){var o=this.el.style;Z(_P(r[0],r[1]),function(i){o[i[0]]=i[1]})}},n.prototype._moveIfResized=function(){var e=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",gn.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},n.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Fe(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},n}(),v5=function(){function n(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),CP(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return n.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(t,e,r,o,i){var a=this;Ft(t)&&En(""),this.el&&this._zr.remove(this.el);var l=r.getModel("textStyle");this.el=new Kn({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:l.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:Tk(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),Z(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(h){a.el.style[h]=r.get(h)}),Z(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(h){a.el.style[h]=l.get(h)||0}),this._zr.add(this.el);var c=this;this.el.on("mouseover",function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0}),this.el.on("mouseout",function(){c._enterable&&c._show&&c.hideLater(c._hideDelay),c._inContent=!1})},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),r=SP(t.style);return[e.width+r.left+r.right,e.height+r.top+r.bottom]},n.prototype.moveTo=function(t,e){var r=this.el;if(r){var o=this._styleCoord;CP(o,this._zr,t,e),t=o[0],e=o[1];var i=r.style,a=Og(i.borderWidth||0),l=SP(i);r.x=t+a+l.left,r.y=e+a+l.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Fe(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function Og(n){return Math.max(0,n)}function SP(n){var t=Og(n.shadowBlur||0),e=Og(n.shadowOffsetX||0),r=Og(n.shadowOffsetY||0);return{left:Og(t-e),right:Og(t+e),top:Og(t-r),bottom:Og(t+r)}}function CP(n,t,e,r){n[0]=e,n[1]=r,n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var b5=new $n({shape:{x:-1,y:-1,width:2,height:2}}),x5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(e,r){if(!gn.node&&r.getDom()){var o,i=e.getComponent("tooltip"),a=this._renderMode="auto"===(o=i.get("renderMode"))?gn.domSupported?"html":"richText":o||"html";this._tooltipContent="richText"===a?new v5(r):new y5(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},t.prototype.render=function(e,r,o){if(!gn.node&&o.getDom()){this.group.removeAll(),this._tooltipModel=e,this._ecModel=r,this._api=o;var i=this._tooltipContent;i.update(e),i.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&e.get("transitionDuration")?Fh(this,"_updatePosition",50,"fixRate"):Hf(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel.get("triggerOn");DO("itemTooltip",this._api,Fe(function(r,o,i){"none"!==e&&(e.indexOf(r)>=0?this._tryShow(o,i):"leave"===r&&this._hide(i))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,r=this._ecModel,o=this._api,i=e.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==i&&"click"!==i){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!o.isDisposed()&&a.manuallyShowTip(e,r,o,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,r,o,i){if(i.from!==this.uid&&!gn.node&&o.getDom()){var a=MP(i,o);this._ticket="";var l=i.dataByCoordSys,c=function(_,w,S){var M=Wv(_).queryOptionMap,A=M.keys()[0];if(A&&"series"!==A){var L,N=Kp(w,A,M.get(A),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(N&&(S.getViewOfComponentModel(N).group.traverse(function(O){var B=cn(O).tooltipConfig;if(B&&B.name===_.name)return L=O,!0}),L))return{componentMainType:A,componentIndex:N.componentIndex,el:L}}}(i,r,o);if(c){var h=c.el.getBoundingRect().clone();h.applyTransform(c.el.transform),this._tryShow({offsetX:h.x+h.width/2,offsetY:h.y+h.height/2,target:c.el,position:i.position,positionDefault:"bottom"},a)}else if(i.tooltip&&null!=i.x&&null!=i.y){var p=b5;p.x=i.x,p.y=i.y,p.update(),cn(p).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:p},a)}else if(l)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:l,tooltipOption:i.tooltipOption},a);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(e,r,o,i))return;var g=EO(i,r),y=g.point[0],b=g.point[1];null!=y&&null!=b&&this._tryShow({offsetX:y,offsetY:b,target:g.el,position:i.position,positionDefault:"bottom"},a)}else null!=i.x&&null!=i.y&&(o.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:o.getZr().findHover(i.x,i.y).target},a))}},t.prototype.manuallyHideTip=function(e,r,o,i){this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(MP(i,o))},t.prototype._manuallyAxisShowTip=function(e,r,o,i){var a=i.seriesIndex,l=i.dataIndex,c=r.getComponent("axisPointer").coordSysAxesInfo;if(null!=a&&null!=l&&null!=c){var h=r.getSeriesByIndex(a);if(h&&"axis"===ZT([h.getData().getItemModel(l),h,(h.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return o.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:l,position:i.position}),!0}},t.prototype._tryShow=function(e,r){var o=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var i=e.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,e);else if(o){var a,l;if("legend"===cn(o).ssrType)return;this._lastDataByCoordSys=null,dd(o,function(c){return null!=cn(c).dataIndex?(a=c,!0):null!=cn(c).tooltipConfig?(l=c,!0):void 0},!0),a?this._showSeriesItemTooltip(e,a,r):l?this._showComponentItemTooltip(e,l,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},t.prototype._showOrMove=function(e,r){var o=e.get("showDelay");r=Fe(r,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(r,o):r()},t.prototype._showAxisTooltip=function(e,r){var o=this._ecModel,i=this._tooltipModel,a=[r.offsetX,r.offsetY],l=ZT([r.tooltipOption],i),c=this._renderMode,h=[],p=ti("section",{blocks:[],noHeader:!0}),g=[],y=new J0;Z(e,function(A){Z(A.dataByAxis,function(I){var N=o.getComponent(I.axisDim+"Axis",I.axisIndex),L=I.value;if(N&&null!=L){var R=CO(L,N.axis,o,I.seriesDataIndices,I.valueLabelOpt),O=ti("section",{header:R,noHeader:!Br(R),sortBlocks:!0,blocks:[]});p.blocks.push(O),Z(I.seriesDataIndices,function(B){var G=o.getSeriesByIndex(B.seriesIndex),W=B.dataIndexInside,Y=G.getDataParams(W);if(!(Y.dataIndex<0)){Y.axisDim=I.axisDim,Y.axisIndex=I.axisIndex,Y.axisType=I.axisType,Y.axisId=I.axisId,Y.axisValue=U1(N.axis,{value:L}),Y.axisValueLabel=R,Y.marker=y.makeTooltipMarker("item",Eh(Y.color),c);var X=zw(G.formatTooltip(W,!0,null)),J=X.frag;if(J){var ne=ZT([G],i).get("valueFormatter");O.blocks.push(ne?De({valueFormatter:ne},J):J)}X.text&&g.push(X.text),h.push(Y)}})}})}),p.blocks.reverse(),g.reverse();var b=r.position,_=l.get("order"),w=Mk(p,y,c,_,o.get("useUTC"),l.get("textStyle"));w&&g.unshift(w);var M=g.join("richText"===c?"\n\n":"<br/>");this._showOrMove(l,function(){this._updateContentNotChangedOnAxis(e,h)?this._updatePosition(l,b,a[0],a[1],this._tooltipContent,h):this._showTooltipContent(l,M,h,Math.random()+"",a[0],a[1],b,null,y)})},t.prototype._showSeriesItemTooltip=function(e,r,o){var i=this._ecModel,a=cn(r),l=a.seriesIndex,c=i.getSeriesByIndex(l),h=a.dataModel||c,p=a.dataIndex,g=a.dataType,y=h.getData(g),b=this._renderMode,_=e.positionDefault,w=ZT([y.getItemModel(p),h,c&&(c.coordinateSystem||{}).model],this._tooltipModel,_?{position:_}:null),S=w.get("trigger");if(null==S||"item"===S){var M=h.getDataParams(p,g),A=new J0;M.marker=A.makeTooltipMarker("item",Eh(M.color),b);var I=zw(h.formatTooltip(p,!1,g)),N=w.get("order"),L=w.get("valueFormatter"),R=I.frag,O=R?Mk(L?De({valueFormatter:L},R):R,A,b,N,i.get("useUTC"),w.get("textStyle")):I.text,B="item_"+h.name+"_"+p;this._showOrMove(w,function(){this._showTooltipContent(w,O,M,B,e.offsetX,e.offsetY,e.position,e.target,A)}),o({type:"showTip",dataIndexInside:p,dataIndex:y.getRawIndex(p),seriesIndex:l,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,r,o){var i="html"===this._renderMode,a=cn(r),l=a.tooltipConfig.option||{},c=l.encodeHTMLContent;bt(l)&&(l={content:l,formatter:l},c=!0),c&&i&&l.content&&((l=jt(l)).content=Co(l.content));var h=[l],p=this._ecModel.getComponent(a.componentMainType,a.componentIndex);p&&h.push(p),h.push({formatter:l.content});var g=e.positionDefault,y=ZT(h,this._tooltipModel,g?{position:g}:null),b=y.get("content"),_=Math.random()+"",w=new J0;this._showOrMove(y,function(){var S=jt(y.get("formatterParams")||{});this._showTooltipContent(y,b,S,_,e.offsetX,e.offsetY,e.position,r,w)}),o({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,r,o,i,a,l,c,h,p){if(this._ticket="",e.get("showContent")&&e.get("show")){var g=this._tooltipContent;g.setEnterable(e.get("enterable"));var y=e.get("formatter");c=c||e.get("position");var b=r,_=this._getNearestPoint([a,l],o,e.get("trigger"),e.get("borderColor")).color;if(y)if(bt(y)){var w=e.ecModel.get("useUTC"),S=Ee(o)?o[0]:o;b=y,S&&S.axisType&&S.axisType.indexOf("time")>=0&&(b=Tf(S.axisValue,b,w)),b=Im(b,o,!0)}else if(Se(y)){var M=Fe(function(A,I){A===this._ticket&&(g.setContent(I,p,e,_,c),this._updatePosition(e,c,a,l,g,o,h))},this);this._ticket=i,b=y(o,i,M)}else b=y;g.setContent(b,p,e,_,c),g.show(e,_),this._updatePosition(e,c,a,l,g,o,h)}},t.prototype._getNearestPoint=function(e,r,o,i){return"axis"===o||Ee(r)?{color:i||("html"===this._renderMode?"#fff":"none")}:Ee(r)?void 0:{color:i||r.color||r.borderColor}},t.prototype._updatePosition=function(e,r,o,i,a,l,c){var h=this._api.getWidth(),p=this._api.getHeight();r=r||e.get("position");var A,I,L,R,O,B,G,W,Y,g=a.getSize(),y=e.get("align"),b=e.get("verticalAlign"),_=c&&c.getBoundingRect().clone();if(c&&_.applyTransform(c.transform),Se(r)&&(r=r([o,i],l,a.el,_,{viewSize:[h,p],contentSize:g.slice()})),Ee(r))o=Ct(r[0],h),i=Ct(r[1],p);else if(Ft(r)){var w=r;w.width=g[0],w.height=g[1];var S=xo(w,{width:h,height:p});o=S.x,i=S.y,y=null,b=null}else if(bt(r)&&c){var M=function(A,I,N,L){var R=N[0],O=N[1],B=Math.ceil(Math.SQRT2*L)+8,G=0,W=0,Y=I.width,X=I.height;switch(A){case"inside":G=I.x+Y/2-R/2,W=I.y+X/2-O/2;break;case"top":G=I.x+Y/2-R/2,W=I.y-O-B;break;case"bottom":G=I.x+Y/2-R/2,W=I.y+X+B;break;case"left":G=I.x-R-B,W=I.y+X/2-O/2;break;case"right":G=I.x+Y+B,W=I.y+X/2-O/2}return[G,W]}(r,_,g,e.get("borderWidth"));o=M[0],i=M[1]}else A=o,I=i,L=h,R=p,O=y?null:20,B=b?null:20,W=(G=a.getSize())[0],Y=G[1],null!=O&&(A+W+O+2>L?A-=W+O:A+=O),null!=B&&(I+Y+B>R?I-=Y+B:I+=B),o=(M=[A,I])[0],i=M[1];y&&(o-=TP(y)?g[0]/2:"right"===y?g[0]:0),b&&(i-=TP(b)?g[1]/2:"bottom"===b?g[1]:0),yP(e)&&(M=function(A,I,N,L,R){var O=N.getSize(),B=O[0],G=O[1];return A=Math.min(A+B,L)-B,I=Math.min(I+G,R)-G,[A=Math.max(A,0),I=Math.max(I,0)]}(o,i,a,h,p),o=M[0],i=M[1]),a.moveTo(o,i)},t.prototype._updateContentNotChangedOnAxis=function(e,r){var o=this._lastDataByCoordSys,i=this._cbParamsList,a=!!o&&o.length===e.length;return a&&Z(o,function(l,c){var h=l.dataByAxis||[],p=(e[c]||{}).dataByAxis||[];(a=a&&h.length===p.length)&&Z(h,function(g,y){var b=p[y]||{},_=g.seriesDataIndices||[],w=b.seriesDataIndices||[];(a=a&&g.value===b.value&&g.axisType===b.axisType&&g.axisId===b.axisId&&_.length===w.length)&&Z(_,function(S,M){var A=w[M];a=a&&S.seriesIndex===A.seriesIndex&&S.dataIndex===A.dataIndex}),i&&Z(g.seriesDataIndices,function(S){var M=S.seriesIndex,A=r[M],I=i[M];A&&I&&I.data!==A.data&&(a=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=r,!!a},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,r){!gn.node&&r.getDom()&&(Hf(this,"_updatePosition"),this._tooltipContent.dispose(),gR("itemTooltip",r))},t.type="tooltip",t}(Wr);function ZT(n,t,e){var r,o=t.ecModel;e?(r=new gr(e,o,o),r=new gr(t.option,r,o)):r=t;for(var i=n.length-1;i>=0;i--){var a=n[i];a&&(a instanceof gr&&(a=a.get("tooltip",!0)),bt(a)&&(a={formatter:a}),a&&(r=new gr(a,r,o)))}return r}function MP(n,t){return n.dispatchAction||Fe(t.dispatchAction,t)}function TP(n){return"center"===n||"middle"===n}var _5=["rect","polygon","keep","clear"];function w5(n,t){var c,h,e=Dr(n?n.brush:[]);if(e.length){var r=[];Z(e,function(c){var h=c.hasOwnProperty("toolbox")?c.toolbox:[];h instanceof Array&&(r=r.concat(h))});var o=n&&n.toolbox;Ee(o)&&(o=o[0]),o||(n.toolbox=[o={feature:{}}]);var i=o.feature||(o.feature={}),a=i.brush||(i.brush={}),l=a.type||(a.type=[]);l.push.apply(l,r),h={},Z(c=l,function(p){h[p]=1}),c.length=0,Z(h,function(p,g){c.push(g)}),t&&!l.length&&l.push.apply(l,_5)}}var AP=Z;function kP(n){if(n)for(var t in n)if(n.hasOwnProperty(t))return!0}function PR(n,t,e){var r={};return AP(t,function(o){var i,a=r[o]=((i=function(){}).prototype.__hidden=i.prototype,new i);AP(n[o],function(l,c){if(ri.isValidType(c)){var h={type:c,visual:l};e&&e(h,o),a[c]=new ri(h),"opacity"===c&&((h=jt(h)).type="colorAlpha",a.__hidden.__alphaForOpacity=new ri(h))}})}),r}function IP(n,t,e){var r;Z(e,function(o){t.hasOwnProperty(o)&&kP(t[o])&&(r=!0)}),r&&Z(e,function(o){t.hasOwnProperty(o)&&kP(t[o])?n[o]=jt(t[o]):delete n[o]})}var DP={lineX:NP(0),lineY:NP(1),rect:{point:function(n,t,e){return n&&e.boundingRect.contain(n[0],n[1])},rect:function(n,t,e){return n&&e.boundingRect.intersect(n)}},polygon:{point:function(n,t,e){return n&&e.boundingRect.contain(n[0],n[1])&&vc(e.range,n[0],n[1])},rect:function(n,t,e){var r=e.range;if(!n||r.length<=1)return!1;var o=n.x,i=n.y,a=n.width,l=n.height,c=r[0];return!!(vc(r,o,i)||vc(r,o+a,i)||vc(r,o,i+l)||vc(r,o+a,i+l)||Kt.create(n).contain(c[0],c[1])||Ju(o,i,o+a,i,r)||Ju(o,i,o,i+l,r)||Ju(o+a,i,o+a,i+l,r)||Ju(o,i+l,o+a,i+l,r))||void 0}}};function NP(n){var t=["x","y"],e=["width","height"];return{point:function(r,o,i){if(r)return $T(r[n],i.range)},rect:function(r,o,i){if(r){var a=i.range,l=[r[t[n]],r[t[n]]+r[e[n]]];return l[1]<l[0]&&l.reverse(),$T(l[0],a)||$T(l[1],a)||$T(a[0],l)||$T(a[1],l)}}}}function $T(n,t){return t[0]<=n&&n<=t[1]}var EP=["inBrush","outOfBrush"],BR="__ecBrushSelect",zR="__ecInBrushSelectEvent";function LP(n){n.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new kR(t.option,n)).setInputRanges(t.areas,n)})}function S5(n,t,e){var r,o,i=[];n.eachComponent({mainType:"brush"},function(a){e&&"takeGlobalCursor"===e.type&&a.setBrushOption("brush"===e.key?e.brushOption:{brushType:!1})}),LP(n),n.eachComponent({mainType:"brush"},function(a,l){var c={brushId:a.id,brushIndex:l,brushName:a.name,areas:jt(a.areas),selected:[]};i.push(c);var h=a.option,p=h.brushLink,g=[],y=[],b=[],_=!1;l||(r=h.throttleType,o=h.throttleDelay);var w=j(a.areas,function(I){var R,O,B,N=M5[I.brushType],L=Pe({boundingRect:N?N(I):void 0},I);return L.selectors=(O=(R=L).brushType,B={point:function(G){return DP[O].point(G,B,R)},rect:function(G){return DP[O].rect(G,B,R)}}),L}),S=PR(a.option,EP,function(I){I.mappingMethod="fixed"});function M(I){return"all"===p||!!g[I]}function A(I){return!!I.length}Ee(p)&&Z(p,function(I){g[I]=1}),n.eachSeries(function(I,N){var R,O,B,L=b[N]=[];"parallel"===I.subType?(O=N,B=(R=I).coordinateSystem,_=_||B.hasAxisBrushed(),M(O)&&B.eachActiveState(R.getData(),function(G,W){"active"===G&&(y[W]=1)})):function(R,O,B){if(R.brushSelector&&(Y=O,null==(X=a.option.seriesIndex)||"all"===X||!(Ee(X)?$t(X,Y)<0:Y!==X))&&(Z(w,function(W){a.brushTargetManager.controlSeries(W,R,n)&&B.push(W),_=_||A(B)}),M(O)&&A(B))){var G=R.getData();G.each(function(W){RP(R,B,G,W)&&(y[W]=1)})}var Y,X}(I,N,L)}),n.eachSeries(function(I,N){var L={seriesId:I.id,seriesIndex:N,seriesName:I.name,dataIndex:[]};c.selected.push(L);var R=b[N],O=I.getData(),B=M(N)?function(G){return y[G]?(L.dataIndex.push(O.getRawIndex(G)),"inBrush"):"outOfBrush"}:function(G){return RP(I,R,O,G)?(L.dataIndex.push(O.getRawIndex(G)),"inBrush"):"outOfBrush"};(M(N)?_:A(R))&&function(G,W,Y,X,J,ne){var oe,ie={};function se(me){return dc(Y,oe,me)}function le(me,ve){hc(Y,oe,me,ve)}function pe(me,ve){var He=Y.getRawDataItem(oe=null==ne?me:ve);if(!He||!1!==He.visualMap)for(var nt=X.call(J,me),Me=W[nt],je=ie[nt],tt=0,ut=je.length;tt<ut;tt++){var pt=je[tt];Me[pt]&&Me[pt].applyVisual(me,se,le)}}Z(G,function(me){var ve=ri.prepareVisualTypes(W[me]);ie[me]=ve}),null==ne?Y.each(pe):Y.each([ne],pe)}(EP,S,O,B)})}),function(a,l,c,h,p){if(p){var g=a.getZr();g[zR]||(g[BR]||(g[BR]=C5),Fh(g,BR,c,l)(a,h))}}(t,r,o,i,e)}function C5(n,t){if(!n.isDisposed()){var e=n.getZr();e[zR]=!0,n.dispatchAction({type:"brushSelect",batch:t}),e[zR]=!1}}function RP(n,t,e,r){for(var o=0,i=t.length;o<i;o++){var a=t[o];if(n.brushSelector(r,e,a.selectors,a))return!0}}var M5={rect:function(n){return OP(n.range)},polygon:function(n){for(var t,e=n.range,r=0,o=e.length;r<o;r++){var i=e[r];i[0]<(t=t||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(t[0][0]=i[0]),i[0]>t[0][1]&&(t[0][1]=i[0]),i[1]<t[1][0]&&(t[1][0]=i[1]),i[1]>t[1][1]&&(t[1][1]=i[1])}return t&&OP(t)}};function OP(n){return new Kt(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var T5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(e,r){this.ecModel=e,this.api=r,(this._brushController=new kx(r.getZr())).on("brush",Fe(this._onBrush,this)).mount()},t.prototype.render=function(e,r,o,i){this.model=e,this._updateController(e,r,o,i)},t.prototype.updateTransform=function(e,r,o,i){LP(r),this._updateController(e,r,o,i)},t.prototype.updateVisual=function(e,r,o,i){this.updateTransform(e,r,o,i)},t.prototype.updateView=function(e,r,o,i){this._updateController(e,r,o,i)},t.prototype._updateController=function(e,r,o,i){(!i||i.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(o)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var r=this.model.id,o=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:jt(o),$from:r}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:jt(o),$from:r})},t.type="brush",t}(Wr),A5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.areas=[],e.brushOption={},e}return Ce(t,n),t.prototype.optionUpdated=function(e,r){var o=this.option;!r&&IP(o,e,["inBrush","outOfBrush"]);var i=o.inBrush=o.inBrush||{};o.outOfBrush=o.outOfBrush||{color:"#ddd"},i.hasOwnProperty("liftZ")||(i.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=j(e,function(r){return PP(this.option,r)},this))},t.prototype.setBrushOption=function(e){this.brushOption=PP(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(wn);function PP(n,t){return Ve({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new gr(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},t,!0)}var k5=["rect","polygon","lineX","lineY","keep","clear"],I5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),t.prototype.render=function(e,r,o){var i,a,l;r.eachComponent({mainType:"brush"},function(c){i=c.brushType,a=c.brushOption.brushMode||"single",l=l||!!c.areas.length}),this._brushType=i,this._brushMode=a,Z(e.get("type",!0),function(c){e.setIconStatus(c,("keep"===c?"multiple"===a:"clear"===c?l:c===i)?"emphasis":"normal")})},t.prototype.updateView=function(e,r,o){this.render(e,r,o)},t.prototype.getIcons=function(){var e=this.model,r=e.get("icon",!0),o={};return Z(e.get("type",!0),function(i){r[i]&&(o[i]=r[i])}),o},t.prototype.onclick=function(e,r,o){var i=this._brushType,a=this._brushMode;"clear"===o?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===o?i:i!==o&&o,brushMode:"keep"===o?"multiple"===a?"single":"multiple":a}})},t.getDefaultOption=function(e){return{show:!0,type:k5.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])}},t}(Au),D5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return Ce(t,n),t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(wn),N5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.render=function(e,r,o){if(this.group.removeAll(),e.get("show")){var i=this.group,a=e.getModel("textStyle"),l=e.getModel("subtextStyle"),c=e.get("textAlign"),h=We(e.get("textBaseline"),e.get("textVerticalAlign")),p=new Kn({style:Or(a,{text:e.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),g=p.getBoundingRect(),y=e.get("subtext"),b=new Kn({style:Or(l,{text:y,fill:l.getTextColor(),y:g.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),_=e.get("link"),w=e.get("sublink"),S=e.get("triggerEvent",!0);p.silent=!_&&!S,b.silent=!w&&!S,_&&p.on("click",function(){Dm(_,"_"+e.get("target"))}),w&&b.on("click",function(){Dm(w,"_"+e.get("subtarget"))}),cn(p).eventData=cn(b).eventData=S?{componentType:"title",componentIndex:e.componentIndex}:null,i.add(p),y&&i.add(b);var M=i.getBoundingRect(),A=e.getBoxLayoutParams();A.width=M.width,A.height=M.height;var I=xo(A,{width:o.getWidth(),height:o.getHeight()},e.get("padding"));c||("middle"===(c=e.get("left")||e.get("right"))&&(c="center"),"right"===c?I.x+=I.width:"center"===c&&(I.x+=I.width/2)),h||("center"===(h=e.get("top")||e.get("bottom"))&&(h="middle"),"bottom"===h?I.y+=I.height:"middle"===h&&(I.y+=I.height/2),h=h||"top"),i.x=I.x,i.y=I.y,i.markRedraw();var N={align:c,verticalAlign:h};p.setStyle(N),b.setStyle(N),M=i.getBoundingRect();var L=I.margin,R=e.getItemStyle(["color","opacity"]);R.fill=e.get("backgroundColor");var O=new $n({shape:{x:M.x-L[3],y:M.y-L[0],width:M.width+L[1]+L[3],height:M.height+L[0]+L[2],r:e.get("borderRadius")},style:R,subPixelOptimize:!0,silent:!0});i.add(O)}},t.type="title",t}(Wr),BP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode="box",e}return Ce(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o),this._initData()},t.prototype.mergeOption=function(e){n.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){null==e&&(e=this.option.currentIndex);var r=this._data.count();this.option.loop?e=(e%r+r)%r:(e>=r&&(e=r-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e,r=this.option,o=r.data||[],i=r.axisType,a=this._names=[];"category"===i?(e=[],Z(o,function(c,h){var p,g=Po(Uc(c),"");Ft(c)?(p=jt(c)).value=h:p=h,e.push(p),a.push(g)})):e=o,(this._data=new Ri([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[i]||"number"}],this)).initData(e,a)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(wn),zP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="timeline.slider",t.defaultOption=tc(BP.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(BP);ur(zP,Bf.prototype);var E5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="timeline",t}(Wr),L5=function(n){function t(e,r,o,i){var a=n.call(this,e,r,o)||this;return a.type=i||"value",a}return Ce(t,n),t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},t}(Bo),VR=Math.PI,VP=Gn(),R5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(e,r){this.api=r},t.prototype.render=function(e,r,o){if(this.model=e,this.api=o,this.ecModel=r,this.group.removeAll(),e.get("show",!0)){var i=this._layout(e,o),a=this._createGroup("_mainGroup"),l=this._createGroup("_labelGroup"),c=this._axis=this._createAxis(i,e);e.formatTooltip=function(h){return ti("nameValue",{noName:!0,value:c.scale.getLabel({value:h})})},Z(["AxisLine","AxisTick","Control","CurrentPointer"],function(h){this["_render"+h](i,a,c,e)},this),this._renderAxisLabel(i,l,c,e),this._position(i,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,r){var o,i,a,l,X,J,c=e.get(["label","position"]),h=e.get("orient"),p=(J=r,xo((X=e).getBoxLayoutParams(),{width:J.getWidth(),height:J.getHeight()},X.get("padding"))),g={horizontal:"center",vertical:(o=null==c||"auto"===c?"horizontal"===h?p.y+p.height/2<r.getHeight()/2?"-":"+":p.x+p.width/2<r.getWidth()/2?"+":"-":bt(c)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[h][c]:c)>=0||"+"===o?"left":"right"},y={horizontal:o>=0||"+"===o?"top":"bottom",vertical:"middle"},b={horizontal:0,vertical:VR/2},_="vertical"===h?p.height:p.width,w=e.getModel("controlStyle"),S=w.get("show",!0),M=S?w.get("itemSize"):0,A=S?w.get("itemGap"):0,I=M+A,N=e.get(["label","rotate"])||0;N=N*VR/180;var L=w.get("position",!0),R=S&&w.get("showPlayBtn",!0),O=S&&w.get("showPrevBtn",!0),B=S&&w.get("showNextBtn",!0),G=0,W=_;"left"===L||"bottom"===L?(R&&(i=[0,0],G+=I),O&&(a=[G,0],G+=I),B&&(l=[W-M,0],W-=I)):(R&&(i=[W-M,0],W-=I),O&&(a=[0,0],G+=I),B&&(l=[W-M,0],W-=I));var Y=[G,W];return e.get("inverse")&&Y.reverse(),{viewRect:p,mainLength:_,orient:h,rotation:b[h],labelRotation:N,labelPosOpt:o,labelAlign:e.get(["label","align"])||g[h],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||y[h],playPosition:i,prevBtnPosition:a,nextBtnPosition:l,axisExtent:Y,controlSize:M,controlGap:A}},t.prototype._position=function(e,r){var o=this._mainGroup,i=this._labelGroup,a=e.viewRect;if("vertical"===e.orient){var l=[1,0,0,1,0,0],c=a.x,h=a.y+a.height;es(l,l,[-c,-h]),Eo(l,l,-VR/2),es(l,l,[c,h]),(a=a.clone()).applyTransform(l)}var p=A(a),g=A(o.getBoundingRect()),y=A(i.getBoundingRect()),b=[o.x,o.y],_=[i.x,i.y];_[0]=b[0]=p[0][0];var w,S=e.labelPosOpt;function M(N){N.originX=p[0][0]-N.x,N.originY=p[1][0]-N.y}function A(N){return[[N.x,N.x+N.width],[N.y,N.y+N.height]]}function I(N,L,R,O,B){N[O]+=R[O][B]-L[O][B]}null==S||bt(S)?(I(b,g,p,1,w="+"===S?0:1),I(_,y,p,1,1-w)):(I(b,g,p,1,w=S>=0?0:1),_[1]=b[1]+S),o.setPosition(b),i.setPosition(_),o.rotation=i.rotation=e.rotation,M(o),M(i)},t.prototype._createAxis=function(e,r){var o=r.getData(),i=r.get("axisType"),a=function(h,p){if(p=p||h.get("type"))switch(p){case"category":return new tr({ordinalMeta:h.getCategories(),extent:[1/0,-1/0]});case"time":return new eC({locale:h.ecModel.getLocaleModel(),useUTC:h.ecModel.get("useUTC")});default:return new el}}(r,i);a.getTicks=function(){return o.mapArray(["value"],function(h){return{value:h}})};var l=o.getDataExtent("value");a.setExtent(l[0],l[1]),a.calcNiceTicks();var c=new L5("value",a,e.axisExtent,i);return c.model=r,c},t.prototype._createGroup=function(e){var r=this[e]=new on;return this.group.add(r),r},t.prototype._renderAxisLine=function(e,r,o,i){var a=o.getExtent();if(i.get(["lineStyle","show"])){var l=new Yo({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:De({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(l);var c=this._progressLine=new Yo({shape:{x1:a[0],x2:this._currentPointer?this._currentPointer.x:a[0],y1:0,y2:0},style:Pe({lineCap:"round",lineWidth:l.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(c)}},t.prototype._renderAxisTick=function(e,r,o,i){var a=this,l=i.getData(),c=o.scale.getTicks();this._tickSymbols=[],Z(c,function(h){var p=o.dataToCoord(h.value),g=l.getItemModel(h.value),y=g.getModel("itemStyle"),b=g.getModel(["emphasis","itemStyle"]),_=g.getModel(["progress","itemStyle"]),w={x:p,y:0,onclick:Fe(a._changeTimeline,a,h.value)},S=FP(g,y,r,w);S.ensureState("emphasis").style=b.getItemStyle(),S.ensureState("progress").style=_.getItemStyle(),Us(S);var M=cn(S);g.get("tooltip")?(M.dataIndex=h.value,M.dataModel=i):M.dataIndex=M.dataModel=null,a._tickSymbols.push(S)})},t.prototype._renderAxisLabel=function(e,r,o,i){var a=this;if(o.getLabelModel().get("show")){var l=i.getData(),c=o.getViewLabels();this._tickLabels=[],Z(c,function(h){var p=h.tickValue,g=l.getItemModel(p),y=g.getModel("label"),b=g.getModel(["emphasis","label"]),_=g.getModel(["progress","label"]),w=o.dataToCoord(h.tickValue),S=new Kn({x:w,y:0,rotation:e.labelRotation-e.rotation,onclick:Fe(a._changeTimeline,a,p),silent:!1,style:Or(y,{text:h.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});S.ensureState("emphasis").style=Or(b),S.ensureState("progress").style=Or(_),r.add(S),Us(S),VP(S).dataIndex=p,a._tickLabels.push(S)})}},t.prototype._renderControl=function(e,r,o,i){var a=e.controlSize,l=e.rotation,c=i.getModel("controlStyle").getItemStyle(),h=i.getModel(["emphasis","controlStyle"]).getItemStyle(),p=i.getPlayState(),g=i.get("inverse",!0);function y(b,_,w,S){if(b){var M=cs(We(i.get(["controlStyle",_+"BtnSize"]),a),a),A=(L=[0,-M/2,M,M],O=(R={x:b[0],y:b[1],originX:a/2,originY:0,rotation:S?-l:0,rectHover:!0,style:c,onclick:w}).style,B=tu(i.get(["controlStyle",_+"Icon"]),R||{},new Kt(L[0],L[1],L[2],L[3])),O&&B.setStyle(O),B);A.ensureState("emphasis").style=h,r.add(A),Us(A)}var L,R,O,B}y(e.nextBtnPosition,"next",Fe(this._changeTimeline,this,g?"-":"+")),y(e.prevBtnPosition,"prev",Fe(this._changeTimeline,this,g?"+":"-")),y(e.playPosition,p?"stop":"play",Fe(this._handlePlayClick,this,!p),!0)},t.prototype._renderCurrentPointer=function(e,r,o,i){var a=i.getData(),l=i.getCurrentIndex(),c=a.getItemModel(l).getModel("checkpointStyle"),h=this;this._currentPointer=FP(c,c,this._mainGroup,{},this._currentPointer,{onCreate:function(g){g.draggable=!0,g.drift=Fe(h._handlePointerDrag,h),g.ondragend=Fe(h._handlePointerDragend,h),GP(g,h._progressLine,l,o,i,!0)},onUpdate:function(g){GP(g,h._progressLine,l,o,i)}})},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,r,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,r){var o=this._toAxisCoord(e)[0],i=ds(this._axis.getExtent().slice());o>i[1]&&(o=i[1]),o<i[0]&&(o=i[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var a=this._progressLine;a&&(a.shape.x2=o,a.dirty());var l=this._findNearestTick(o),c=this.model;(r||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=e.model;e._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){return gl(e,this._mainGroup.getLocalTransform(),!0)},t.prototype._findNearestTick=function(e){var r,o=this.model.getData(),i=1/0,a=this._axis;return o.each(["value"],function(l,c){var h=a.dataToCoord(l),p=Math.abs(h-e);p<i&&(i=p,r=c)}),r},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var r=this.model.getCurrentIndex();"+"===e?e=r+1:"-"===e&&(e=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),r=this._tickSymbols,o=this._tickLabels;if(r)for(var i=0;i<r.length;i++)r&&r[i]&&r[i].toggleState("progress",i<e);if(o)for(i=0;i<o.length;i++)o&&o[i]&&o[i].toggleState("progress",VP(o[i]).dataIndex<=e)},t.type="timeline.slider",t}(E5);function FP(n,t,e,r,o,i){var a=t.get("color");o?(o.setColor(a),e.add(o),i&&i.onUpdate(o)):((o=vo(n.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),e.add(o),i&&i.onCreate(o));var l=t.getItemStyle(["color"]);o.setStyle(l),r=Ve({rectHover:!0,z2:100},r,!0);var c=uu(n.get("symbolSize"));r.scaleX=c[0]/2,r.scaleY=c[1]/2;var h=cu(n.get("symbolOffset"),c);h&&(r.x=(r.x||0)+h[0],r.y=(r.y||0)+h[1]);var p=n.get("symbolRotate");return r.rotation=(p||0)*Math.PI/180||0,o.attr(r),o.updateTransform(),o}function GP(n,t,e,r,o,i){if(!n.dragging){var a=o.getModel("checkpointStyle"),l=r.dataToCoord(o.getData().get("value",e));if(i||!a.get("animation",!0))n.attr({x:l,y:0}),t&&t.attr({shape:{x2:l}});else{var c={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:l,y:0},c),t&&t.animateTo({shape:{x2:l}},c)}}}function O5(n){var t=n&&n.timeline;Ee(t)||(t=t?[t]:[]),Z(t,function(e){e&&function(r){var o=r.type,i={number:"value",time:"time"};if(i[o]&&(r.axisType=i[o],delete r.type),HP(r),bv(r,"controlPosition")){var a=r.controlStyle||(r.controlStyle={});bv(a,"position")||(a.position=r.controlPosition),"none"!==a.position||bv(a,"show")||(a.show=!1,delete a.position),delete r.controlPosition}Z(r.data||[],function(l){Ft(l)&&!Ee(l)&&(!bv(l,"value")&&bv(l,"name")&&(l.value=l.name),HP(l))})}(e)})}function HP(n){var t=n.itemStyle||(n.itemStyle={}),e=t.emphasis||(t.emphasis={}),r=n.label||n.label||{},o=r.normal||(r.normal={}),i={normal:1,emphasis:1};Z(r,function(a,l){i[l]||bv(o,l)||(o[l]=a)}),e.label&&!bv(r,"emphasis")&&(r.emphasis=e.label,delete e.label)}function bv(n,t){return n.hasOwnProperty(t)}function FR(n,t){if(!n)return!1;for(var e=Ee(n)?n:[n],r=0;r<e.length;r++)if(e[r]&&e[r][t])return!0;return!1}function XN(n){rh(n,"label",["show"])}var qN=Gn(),Sp=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e}return Ce(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o),this._mergeOption(e,o,!1,!0)},t.prototype.isAnimationEnabled=function(){if(gn.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,r){this._mergeOption(e,r,!1,!1)},t.prototype._mergeOption=function(e,r,o,i){var a=this.mainType;o||r.eachSeries(function(l){var c=l.get(this.mainType,!0),h=qN(l)[a];c&&c.data?(h?h._mergeOption(c,r,!0):(i&&XN(c),Z(c.data,function(p){p instanceof Array?(XN(p[0]),XN(p[1])):XN(p)}),De(h=this.createMarkerModelFromSeries(c,this,r),{mainType:this.mainType,seriesIndex:l.seriesIndex,name:l.name,createdBySelf:!0}),h.__hostSeries=l),qN(l)[a]=h):qN(l)[a]=null},this)},t.prototype.formatTooltip=function(e,r,o){var i=this.getData(),a=this.getRawValue(e),l=i.getName(e);return ti("section",{header:this.name,blocks:[ti("nameValue",{name:l,value:a,noName:!l,noValue:null==a})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.prototype.getDataParams=function(e,r){var o=Bf.prototype.getDataParams.call(this,e,r),i=this.__hostSeries;return i&&(o.seriesId=i.id,o.seriesName=i.name,o.seriesType=i.subType),o},t.getMarkerModelFromSeries=function(e,r){return qN(e)[r]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(wn);ur(Sp,Bf.prototype);var P5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.createMarkerModelFromSeries=function(e,r,o){return new t(e,r,o)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(Sp);function GR(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function ZN(n,t,e,r,o,i){var a=[],l=bl(t,r)?t.getCalculationInfo("stackResultDimension"):r,c=WR(t,l,n),h=t.indicesOfNearest(l,c)[0];a[o]=t.get(e,h),a[i]=t.get(l,h);var p=t.get(r,h),g=Bs(t.get(r,h));return(g=Math.min(g,20))>=0&&(a[i]=+a[i].toFixed(g)),[a,p]}var HR={min:_t(ZN,"min"),max:_t(ZN,"max"),average:_t(ZN,"average"),median:_t(ZN,"median")};function KT(n,t){if(t){var e=n.getData(),r=n.coordinateSystem,o=r&&r.dimensions;if(g=t,(isNaN(parseFloat(g.x))||isNaN(parseFloat(g.y)))&&!Ee(t.coord)&&Ee(o)){var i=WP(t,e,r,n);if((t=jt(t)).type&&HR[t.type]&&i.baseAxis&&i.valueAxis){var a=$t(o,i.baseAxis.dim),l=$t(o,i.valueAxis.dim),c=HR[t.type](e,i.baseDataDim,i.valueDataDim,a,l);t.coord=c[0],t.value=c[1]}else t.coord=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis]}if(null!=t.coord&&Ee(o))for(var h=t.coord,p=0;p<2;p++)HR[h[p]]&&(h[p]=WR(e,e.mapDimension(o[p]),h[p]));else t.coord=[];return t}var g}function WP(n,t,e,r){var a,l,o={};return null!=n.valueIndex||null!=n.valueDim?(o.valueDataDim=null!=n.valueIndex?t.getDimension(n.valueIndex):n.valueDim,o.valueAxis=e.getAxis((a=o.valueDataDim,(l=r.getData().getDimensionInfo(a))&&l.coordDim)),o.baseAxis=e.getOtherAxis(o.valueAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim)):(o.baseAxis=r.getBaseAxis(),o.valueAxis=e.getOtherAxis(o.baseAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim),o.valueDataDim=t.mapDimension(o.valueAxis.dim)),o}function JT(n,t){return!(n&&n.containData&&t.coord&&!GR(t))||n.containData(t.coord)}function UP(n,t){return n?function(e,r,o,i){return sd(i<2?e.coord&&e.coord[i]:e.value,t[i])}:function(e,r,o,i){return sd(e.value,t[i])}}function WR(n,t,e){if("average"===e){var r=0,o=0;return n.each(t,function(i,a){isNaN(i)||(r+=i,o++)}),r/o}return"median"===e?n.getMedian(t):n.getDataExtent(t)["max"===e?1:0]}var UR=Gn(),jR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.init=function(){this.markerGroupMap=Et()},t.prototype.render=function(e,r,o){var i=this,a=this.markerGroupMap;a.each(function(l){UR(l).keep=!1}),r.eachSeries(function(l){var c=Sp.getMarkerModelFromSeries(l,i.type);c&&i.renderSeries(l,c,r,o)}),a.each(function(l){!UR(l).keep&&i.group.remove(l.group)})},t.prototype.markKeep=function(e){UR(e).keep=!0},t.prototype.toggleBlurSeries=function(e,r){var o=this;Z(e,function(i){var a=Sp.getMarkerModelFromSeries(i,o.type);a&&a.getData().eachItemGraphicEl(function(l){l&&(r?At(l):uf(l))})})},t.type="marker",t}(Wr);function jP(n,t,e){var r=t.coordinateSystem;n.each(function(o){var i,a=n.getItemModel(o),l=Ct(a.get("x"),e.getWidth()),c=Ct(a.get("y"),e.getHeight());if(isNaN(l)||isNaN(c)){if(t.getMarkerPosition)i=t.getMarkerPosition(n.getValues(n.dimensions,o));else if(r){var h=n.get(r.dimensions[0],o),p=n.get(r.dimensions[1],o);i=r.dataToPoint([h,p])}}else i=[l,c];isNaN(l)||(i[0]=l),isNaN(c)||(i[1]=c),n.setItemLayout(o,i)})}var B5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.updateTransform=function(e,r,o){r.eachSeries(function(i){var a=Sp.getMarkerModelFromSeries(i,"markPoint");a&&(jP(a.getData(),i,o),this.markerGroupMap.get(i.id).updateLayout())},this)},t.prototype.renderSeries=function(e,r,o,i){var a=e.coordinateSystem,l=e.id,c=e.getData(),h=this.markerGroupMap,p=h.get(l)||h.set(l,new Ey),g=function(y,b,_){var w;w=y?j(y&&y.dimensions,function(I){return De(De({},b.getData().getDimensionInfo(b.getData().mapDimension(I))||{}),{name:I,ordinalMeta:null})}):[{name:"value",type:"float"}];var S=new Ri(w,_),M=j(_.get("data"),_t(KT,b));y&&(M=Xn(M,_t(JT,y)));var A=UP(!!y,w);return S.initData(M,null,A),S}(a,e,r);r.setData(g),jP(r.getData(),e,i),g.each(function(y){var b=g.getItemModel(y),_=b.getShallow("symbol"),w=b.getShallow("symbolSize"),S=b.getShallow("symbolRotate"),M=b.getShallow("symbolOffset"),A=b.getShallow("symbolKeepAspect");if(Se(_)||Se(w)||Se(S)||Se(M)){var I=r.getRawValue(y),N=r.getDataParams(y);Se(_)&&(_=_(I,N)),Se(w)&&(w=w(I,N)),Se(S)&&(S=S(I,N)),Se(M)&&(M=M(I,N))}var L=b.getModel("itemStyle").getItemStyle(),R=jf(c,"color");L.fill||(L.fill=R),g.setItemVisual(y,{symbol:_,symbolSize:w,symbolRotate:S,symbolOffset:M,symbolKeepAspect:A,style:L})}),p.updateData(g),this.group.add(p.group),g.eachItemGraphicEl(function(y){y.traverse(function(b){cn(b).dataModel=r})}),this.markKeep(p),p.group.silent=r.get("silent")||e.get("silent")},t.type="markPoint",t}(jR),z5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.createMarkerModelFromSeries=function(e,r,o){return new t(e,r,o)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Sp),$N=Gn(),V5=function(n,t,e,r){var o,i=n.getData();if(Ee(r))o=r;else{var a=r.type;if("min"===a||"max"===a||"average"===a||"median"===a||null!=r.xAxis||null!=r.yAxis){var l=void 0,c=void 0;if(null!=r.yAxis||null!=r.xAxis)l=t.getAxis(null!=r.yAxis?"y":"x"),c=ht(r.yAxis,r.xAxis);else{var h=WP(r,i,t,n);l=h.valueAxis,c=WR(i,dy(i,h.valueDataDim),a)}var p="x"===l.dim?0:1,g=1-p,y=jt(r),b={coord:[]};y.type=null,y.coord=[],y.coord[g]=-1/0,b.coord[g]=1/0;var _=e.get("precision");_>=0&&dt(c)&&(c=+c.toFixed(Math.min(_,20))),y.coord[p]=b.coord[p]=c,o=[y,b,{type:a,valueIndex:r.valueIndex,value:c}]}else o=[]}var w=[KT(n,o[0]),KT(n,o[1]),De({},o[2])];return w[2].type=w[2].type||null,Ve(w[2],w[0]),Ve(w[2],w[1]),w};function KN(n){return!isNaN(n)&&!isFinite(n)}function YP(n,t,e,r){var o=1-n,i=r.dimensions[n];return KN(t[o])&&KN(e[o])&&t[n]===e[n]&&r.getAxis(i).containData(t[n])}function F5(n,t){if("cartesian2d"===n.type){var e=t[0].coord,r=t[1].coord;if(e&&r&&(YP(1,e,r,n)||YP(0,e,r,n)))return!0}return JT(n,t[0])&&JT(n,t[1])}function YR(n,t,e,r,o){var i,a=r.coordinateSystem,l=n.getItemModel(t),c=Ct(l.get("x"),o.getWidth()),h=Ct(l.get("y"),o.getHeight());if(isNaN(c)||isNaN(h)){if(r.getMarkerPosition)i=r.getMarkerPosition(n.getValues(n.dimensions,t));else{var p=a.dimensions,g=n.get(p[0],t),y=n.get(p[1],t);i=a.dataToPoint([g,y])}if(vu(a,"cartesian2d")){var b=a.getAxis("x"),_=a.getAxis("y");KN(n.get((p=a.dimensions)[0],t))?i[0]=b.toGlobalCoord(b.getExtent()[e?0:1]):KN(n.get(p[1],t))&&(i[1]=_.toGlobalCoord(_.getExtent()[e?0:1]))}isNaN(c)||(i[0]=c),isNaN(h)||(i[1]=h)}else i=[c,h];n.setItemLayout(t,i)}var G5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.updateTransform=function(e,r,o){r.eachSeries(function(i){var a=Sp.getMarkerModelFromSeries(i,"markLine");if(a){var l=a.getData(),c=$N(a).from,h=$N(a).to;c.each(function(p){YR(c,p,!0,i,o),YR(h,p,!1,i,o)}),l.each(function(p){l.setItemLayout(p,[c.getItemLayout(p),h.getItemLayout(p)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,r,o,i){var a=e.coordinateSystem,l=e.id,c=e.getData(),h=this.markerGroupMap,p=h.get(l)||h.set(l,new dT);this.group.add(p.group);var g=function(N,L,R){var O;O=N?j(N&&N.dimensions,function(J){return De(De({},L.getData().getDimensionInfo(L.getData().mapDimension(J))||{}),{name:J,ordinalMeta:null})}):[{name:"value",type:"float"}];var B=new Ri(O,R),G=new Ri(O,R),W=new Ri([],R),Y=j(R.get("data"),_t(V5,L,N,R));N&&(Y=Xn(Y,_t(F5,N)));var X=UP(!!N,O);return B.initData(j(Y,function(J){return J[0]}),null,X),G.initData(j(Y,function(J){return J[1]}),null,X),W.initData(j(Y,function(J){return J[2]})),W.hasItemOption=!0,{from:B,to:G,line:W}}(a,e,r),y=g.from,b=g.to,_=g.line;$N(r).from=y,$N(r).to=b,r.setData(_);var w=r.get("symbol"),S=r.get("symbolSize"),M=r.get("symbolRotate"),A=r.get("symbolOffset");function I(N,L,R){var O=N.getItemModel(L);YR(N,L,R,e,i);var B=O.getModel("itemStyle").getItemStyle();null==B.fill&&(B.fill=jf(c,"color")),N.setItemVisual(L,{symbolKeepAspect:O.get("symbolKeepAspect"),symbolOffset:We(O.get("symbolOffset",!0),A[R?0:1]),symbolRotate:We(O.get("symbolRotate",!0),M[R?0:1]),symbolSize:We(O.get("symbolSize"),S[R?0:1]),symbol:We(O.get("symbol",!0),w[R?0:1]),style:B})}Ee(w)||(w=[w,w]),Ee(S)||(S=[S,S]),Ee(M)||(M=[M,M]),Ee(A)||(A=[A,A]),g.from.each(function(N){I(y,N,!0),I(b,N,!1)}),_.each(function(N){var L=_.getItemModel(N).getModel("lineStyle").getLineStyle();_.setItemLayout(N,[y.getItemLayout(N),b.getItemLayout(N)]),null==L.stroke&&(L.stroke=y.getItemVisual(N,"style").fill),_.setItemVisual(N,{fromSymbolKeepAspect:y.getItemVisual(N,"symbolKeepAspect"),fromSymbolOffset:y.getItemVisual(N,"symbolOffset"),fromSymbolRotate:y.getItemVisual(N,"symbolRotate"),fromSymbolSize:y.getItemVisual(N,"symbolSize"),fromSymbol:y.getItemVisual(N,"symbol"),toSymbolKeepAspect:b.getItemVisual(N,"symbolKeepAspect"),toSymbolOffset:b.getItemVisual(N,"symbolOffset"),toSymbolRotate:b.getItemVisual(N,"symbolRotate"),toSymbolSize:b.getItemVisual(N,"symbolSize"),toSymbol:b.getItemVisual(N,"symbol"),style:L})}),p.updateData(_),g.line.eachItemGraphicEl(function(N){cn(N).dataModel=r,N.traverse(function(L){cn(L).dataModel=r})}),this.markKeep(p),p.group.silent=r.get("silent")||e.get("silent")},t.type="markLine",t}(jR),H5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.createMarkerModelFromSeries=function(e,r,o){return new t(e,r,o)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Sp),JN=Gn(),W5=function(n,t,e,r){var o=r[0],i=r[1];if(o&&i){var a=KT(n,o),l=KT(n,i),c=a.coord,h=l.coord;c[0]=ht(c[0],-1/0),c[1]=ht(c[1],-1/0),h[0]=ht(h[0],1/0),h[1]=ht(h[1],1/0);var p=Ir([{},a,l]);return p.coord=[a.coord,l.coord],p.x0=a.x,p.y0=a.y,p.x1=l.x,p.y1=l.y,p}};function QN(n){return!isNaN(n)&&!isFinite(n)}function XP(n,t,e,r){var o=1-n;return QN(t[o])&&QN(e[o])}function U5(n,t){var a,l,c,e=t.coord[0],r=t.coord[1],o={coord:e,x:t.x0,y:t.y0},i={coord:r,x:t.x1,y:t.y1};return vu(n,"cartesian2d")?!(!e||!r||!XP(1,e,r)&&!XP(0,e,r))||(l=o,c=i,!((a=n)&&a.containZone&&l.coord&&c.coord&&!GR(l)&&!GR(c))||a.containZone(l.coord,c.coord)):JT(n,o)||JT(n,i)}function qP(n,t,e,r,o){var i,a=r.coordinateSystem,l=n.getItemModel(t),c=Ct(l.get(e[0]),o.getWidth()),h=Ct(l.get(e[1]),o.getHeight());if(isNaN(c)||isNaN(h)){if(r.getMarkerPosition){var p=n.getValues(["x0","y0"],t),g=n.getValues(["x1","y1"],t),y=a.clampData(p),b=a.clampData(g),_=[];_[0]="x0"===e[0]?y[0]>b[0]?g[0]:p[0]:y[0]>b[0]?p[0]:g[0],_[1]="y0"===e[1]?y[1]>b[1]?g[1]:p[1]:y[1]>b[1]?p[1]:g[1],i=r.getMarkerPosition(_,e,!0)}else{var w=[A=n.get(e[0],t),I=n.get(e[1],t)];a.clampData&&a.clampData(w,w),i=a.dataToPoint(w,!0)}if(vu(a,"cartesian2d")){var S=a.getAxis("x"),M=a.getAxis("y"),A=n.get(e[0],t),I=n.get(e[1],t);QN(A)?i[0]=S.toGlobalCoord(S.getExtent()["x0"===e[0]?0:1]):QN(I)&&(i[1]=M.toGlobalCoord(M.getExtent()["y0"===e[1]?0:1]))}isNaN(c)||(i[0]=c),isNaN(h)||(i[1]=h)}else i=[c,h];return i}var ZP=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],j5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.updateTransform=function(e,r,o){r.eachSeries(function(i){var a=Sp.getMarkerModelFromSeries(i,"markArea");if(a){var l=a.getData();l.each(function(c){var h=j(ZP,function(p){return qP(l,c,p,i,o)});l.setItemLayout(c,h),l.getItemGraphicEl(c).setShape("points",h)})}},this)},t.prototype.renderSeries=function(e,r,o,i){var a=e.coordinateSystem,l=e.id,c=e.getData(),h=this.markerGroupMap,p=h.get(l)||h.set(l,{group:new on});this.group.add(p.group),this.markKeep(p);var g=function(y,b,_){var w,S;if(y){var A=j(y&&y.dimensions,function(L){var R=b.getData();return De(De({},R.getDimensionInfo(R.mapDimension(L))||{}),{name:L,ordinalMeta:null})});S=j(["x0","y0","x1","y1"],function(L,R){return{name:L,type:A[R%2].type}}),w=new Ri(S,_)}else w=new Ri(S=[{name:"value",type:"float"}],_);var I=j(_.get("data"),_t(W5,b,y,_));return y&&(I=Xn(I,_t(U5,y))),w.initData(I,null,y?function(L,R,O,B){return sd(L.coord[Math.floor(B/2)][B%2],S[B])}:function(L,R,O,B){return sd(L.value,S[B])}),w.hasItemOption=!0,w}(a,e,r);r.setData(g),g.each(function(y){var b=j(ZP,function(O){return qP(g,y,O,e,i)}),_=a.getAxis("x").scale,w=a.getAxis("y").scale,S=_.getExtent(),M=w.getExtent(),A=[_.parse(g.get("x0",y)),_.parse(g.get("x1",y))],I=[w.parse(g.get("y0",y)),w.parse(g.get("y1",y))];ds(A),ds(I),g.setItemLayout(y,{points:b,allClipped:S[0]>A[1]||S[1]<A[0]||M[0]>I[1]||M[1]<I[0]});var L=g.getItemModel(y).getModel("itemStyle").getItemStyle(),R=jf(c,"color");L.fill||(L.fill=R,bt(L.fill)&&(L.fill=is(L.fill,.4))),L.stroke||(L.stroke=R),g.setItemVisual(y,"style",L)}),g.diff(JN(p).data).add(function(y){var b=g.getItemLayout(y);if(!b.allClipped){var _=new Zi({shape:{points:b.points}});g.setItemGraphicEl(y,_),p.group.add(_)}}).update(function(y,b){var _=JN(p).data.getItemGraphicEl(b),w=g.getItemLayout(y);w.allClipped?_&&p.group.remove(_):(_?hr(_,{shape:{points:w.points}},r,y):_=new Zi({shape:{points:w.points}}),g.setItemGraphicEl(y,_),p.group.add(_))}).remove(function(y){var b=JN(p).data.getItemGraphicEl(y);p.group.remove(b)}).execute(),g.eachItemGraphicEl(function(y,b){var _=g.getItemModel(b),w=g.getItemVisual(b,"style");y.useStyle(g.getItemVisual(b,"style")),Ao(y,fo(_),{labelFetcher:r,labelDataIndex:b,defaultText:g.getName(b)||"",inheritColor:bt(w.fill)?is(w.fill,1):"#000"}),Mi(y,_),mo(y,null,null,_.get(["emphasis","disabled"])),cn(y).dataModel=r}),JN(p).data=g,p.group.silent=r.get("silent")||e.get("silent")},t.type="markArea",t}(jR),XR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return Ce(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,r){n.prototype.mergeOption.call(this,e,r),this._updateSelector(e)},t.prototype._updateSelector=function(e){var r=e.selector,o=this.ecModel;!0===r&&(r=e.selector=["all","inverse"]),Ee(r)&&Z(r,function(i,a){var l,c;bt(i)&&(i={type:i}),r[a]=Ve(i,(l=o,"all"===(c=i.type)?{type:"all",title:l.getLocaleModel().get(["legend","selector","all"])}:"inverse"===c?{type:"inverse",title:l.getLocaleModel().get(["legend","selector","inverse"])}:void 0))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var r=!1,o=0;o<e.length;o++){var i=e[o].get("name");if(this.isSelected(i)){this.select(i),r=!0;break}}!r&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var r=[],o=[];e.eachRawSeries(function(c){var h;if(o.push(c.name),c.legendVisualProvider){var g=c.legendVisualProvider.getAllNames();e.isSeriesFiltered(c)||(o=o.concat(g)),g.length?r=r.concat(g):h=!0}else h=!0;h&&Hv(c)&&r.push(c.name)}),this._availableNames=o;var i=this.get("data")||r,a=Et(),l=j(i,function(c){return(bt(c)||dt(c))&&(c={name:c}),a.get(c.name)?null:(a.set(c.name,!0),new gr(c,this,this.ecModel))},this);this._data=Xn(l,function(c){return!!c})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var r=this.option.selected;"single"===this.get("selectedMode")&&Z(this._data,function(o){r[o.get("name")]=!1}),r[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var r=this.option.selected;r.hasOwnProperty(e)||(r[e]=!0),this[r[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var r=this.option.selected;Z(this._data,function(o){r[o.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this.option.selected;Z(this._data,function(o){var i=o.get("name",!0);r.hasOwnProperty(i)||(r[i]=!0),r[i]=!r[i]})},t.prototype.isSelected=function(e){var r=this.option.selected;return!(r.hasOwnProperty(e)&&!r[e])&&$t(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(wn),qx=_t,qR=Z,eE=on,$P=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return Ce(t,n),t.prototype.init=function(){this.group.add(this._contentGroup=new eE),this.group.add(this._selectorGroup=new eE),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,r,o){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var a=e.get("align"),l=e.get("orient");a&&"auto"!==a||(a="right"===e.get("left")&&"vertical"===l?"right":"left");var c=e.get("selector",!0),h=e.get("selectorPosition",!0);!c||h&&"auto"!==h||(h="horizontal"===l?"end":"start"),this.renderInner(a,e,r,o,c,l,h);var p=e.getBoxLayoutParams(),g={width:o.getWidth(),height:o.getHeight()},y=e.get("padding"),b=xo(p,g,y),_=this.layoutInner(e,a,b,i,c,h),w=xo(Pe({width:_.width,height:_.height},p),g,y);this.group.x=w.x-_.x,this.group.y=w.y-_.y,this.group.markRedraw(),this.group.add(this._backgroundEl=iP(_,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,r,o,i,a,l,c){var h=this.getContentGroup(),p=Et(),g=r.get("selectedMode"),y=[];o.eachRawSeries(function(b){!b.get("legendHoverLink")&&y.push(b.id)}),qR(r.getData(),function(b,_){var w=b.get("name");if(!this.newlineDisabled&&(""===w||"\n"===w)){var S=new eE;return S.newline=!0,void h.add(S)}var M=o.getSeriesByName(w)[0];if(!p.get(w))if(M){var A=M.getData(),I=A.getVisual("legendLineStyle")||{},N=A.getVisual("legendIcon"),L=A.getVisual("style"),R=this._createItem(M,w,_,b,r,e,I,L,N,g,i);R.on("click",qx(KP,w,null,i,y)).on("mouseover",qx(ZR,M.name,null,i,y)).on("mouseout",qx($R,M.name,null,i,y)),o.ssr&&R.eachChild(function(O){var B=cn(O);B.seriesIndex=M.seriesIndex,B.dataIndex=_,B.ssrType="legend"}),p.set(w,!0)}else o.eachRawSeries(function(O){if(!p.get(w)&&O.legendVisualProvider){var B=O.legendVisualProvider;if(!B.containName(w))return;var G=B.indexOfName(w),W=B.getItemVisual(G,"style"),Y=B.getItemVisual(G,"legendIcon"),X=wi(W.fill);X&&0===X[3]&&(X[3]=.2,W=De(De({},W),{fill:Jo(X,"rgba")}));var J=this._createItem(O,w,_,b,r,e,{},W,Y,g,i);J.on("click",qx(KP,null,w,i,y)).on("mouseover",qx(ZR,null,w,i,y)).on("mouseout",qx($R,null,w,i,y)),o.ssr&&J.eachChild(function(ne){var oe=cn(ne);oe.seriesIndex=O.seriesIndex,oe.dataIndex=_,oe.ssrType="legend"}),p.set(w,!0)}},this)},this),a&&this._createSelector(a,r,i,l,c)},t.prototype._createSelector=function(e,r,o,i,a){var l=this.getSelectorGroup();qR(e,function(c){var h=c.type,p=new Kn({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:"all"===h?"legendAllSelect":"legendInverseSelect"})}});l.add(p),Ao(p,{normal:r.getModel("selectorLabel"),emphasis:r.getModel(["emphasis","selectorLabel"])},{defaultText:c.title}),Us(p)})},t.prototype._createItem=function(e,r,o,i,a,l,c,h,p,g,y){var oe,ie,se,b=e.visualDrawType,_=a.get("itemWidth"),w=a.get("itemHeight"),S=a.isSelected(r),M=i.get("symbolRotate"),A=i.get("symbolKeepAspect"),I=i.get("icon"),N=function(oe,ie,se,le,pe,me,ve){function He(yt,Vt){"auto"===yt.lineWidth&&(yt.lineWidth=Vt.lineWidth>0?2:0),qR(yt,function(mn,Dn){"inherit"===yt[Dn]&&(yt[Dn]=Vt[Dn])})}var nt=ie.getModel("itemStyle"),Me=nt.getItemStyle(),je=0===oe.lastIndexOf("empty",0)?"fill":"stroke",tt=nt.getShallow("decal");Me.decal=tt&&"inherit"!==tt?pd(tt,ve):le.decal,"inherit"===Me.fill&&(Me.fill=le[pe]),"inherit"===Me.stroke&&(Me.stroke=le[je]),"inherit"===Me.opacity&&(Me.opacity=("fill"===pe?le:se).opacity),He(Me,le);var ut=ie.getModel("lineStyle"),pt=ut.getLineStyle();if(He(pt,se),"auto"===Me.fill&&(Me.fill=le.fill),"auto"===Me.stroke&&(Me.stroke=le.fill),"auto"===pt.stroke&&(pt.stroke=le.fill),!me){var St=ie.get("inactiveBorderWidth");Me.lineWidth="auto"===St?le.lineWidth>0&&Me[je]?2:0:Me.lineWidth,Me.fill=ie.get("inactiveColor"),Me.stroke=ie.get("inactiveBorderColor"),pt.stroke=ut.get("inactiveColor"),pt.lineWidth=ut.get("inactiveWidth")}return{itemStyle:Me,lineStyle:pt}}(p=I||p||"roundRect",i,c,h,b,S,y),L=new eE,R=i.getModel("textStyle");if(!Se(e.getLegendIcon)||I&&"inherit"!==I){var O="inherit"===I&&e.getData().getVisual("symbol")?"inherit"===M?e.getData().getVisual("symbolRotate"):M:0;L.add(((se=vo(ie=(oe={itemWidth:_,itemHeight:w,icon:p,iconRotate:O,itemStyle:N.itemStyle,lineStyle:N.lineStyle,symbolKeepAspect:A}).icon||"roundRect",0,0,oe.itemWidth,oe.itemHeight,oe.itemStyle.fill,oe.symbolKeepAspect)).setStyle(oe.itemStyle),se.rotation=(oe.iconRotate||0)*Math.PI/180,se.setOrigin([oe.itemWidth/2,oe.itemHeight/2]),ie.indexOf("empty")>-1&&(se.style.stroke=se.style.fill,se.style.fill="#fff",se.style.lineWidth=2),se))}else L.add(e.getLegendIcon({itemWidth:_,itemHeight:w,icon:p,iconRotate:M,itemStyle:N.itemStyle,lineStyle:N.lineStyle,symbolKeepAspect:A}));var B="left"===l?_+5:-5,G=l,W=a.get("formatter"),Y=r;bt(W)&&W?Y=W.replace("{name}",r??""):Se(W)&&(Y=W(r));var X=S?R.getTextColor():i.get("inactiveColor");L.add(new Kn({style:Or(R,{text:Y,x:B,y:w/2,fill:X,align:G,verticalAlign:"middle"},{inheritColor:X})}));var J=new $n({shape:L.getBoundingRect(),style:{fill:"transparent"}}),ne=i.getModel("tooltip");return ne.get("show")&&bf({el:J,componentModel:a,itemName:r,itemTooltipOption:ne.option}),L.add(J),L.eachChild(function(oe){oe.silent=!0}),J.silent=!g,this.getContentGroup().add(L),Us(L),L.__legendDataIndex=o,L},t.prototype.layoutInner=function(e,r,o,i,a,l){var c=this.getContentGroup(),h=this.getSelectorGroup();Ga(e.get("orient"),c,e.get("itemGap"),o.width,o.height);var p=c.getBoundingRect(),g=[-p.x,-p.y];if(h.markRedraw(),c.markRedraw(),a){Ga("horizontal",h,e.get("selectorItemGap",!0));var y=h.getBoundingRect(),b=[-y.x,-y.y],_=e.get("selectorButtonGap",!0),w=e.getOrient().index,S=0===w?"width":"height",M=0===w?"height":"width",A=0===w?"y":"x";"end"===l?b[w]+=p[S]+_:g[w]+=y[S]+_,b[1-w]+=p[M]/2-y[M]/2,h.x=b[0],h.y=b[1],c.x=g[0],c.y=g[1];var I={x:0,y:0};return I[S]=p[S]+_+y[S],I[M]=Math.max(p[M],y[M]),I[A]=Math.min(0,y[A]+b[1-w]),I}return c.x=g[0],c.y=g[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Wr);function KP(n,t,e,r){$R(n,t,e,r),e.dispatchAction({type:"legendToggleSelect",name:n??t}),ZR(n,t,e,r)}function JP(n){for(var t,e=n.getZr().storage.getDisplayList(),r=0,o=e.length;r<o&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function ZR(n,t,e,r){JP(e)||e.dispatchAction({type:"highlight",seriesName:n,name:t,excludeSeriesId:r})}function $R(n,t,e,r){JP(e)||e.dispatchAction({type:"downplay",seriesName:n,name:t,excludeSeriesId:r})}function Y5(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.filterSeries(function(e){for(var r=0;r<t.length;r++)if(!t[r].isSelected(e.name))return!1;return!0})}function QT(n,t,e){var r,o={},i="toggleSelected"===n;return e.eachComponent("legend",function(a){i&&null!=r?a[r?"select":"unSelect"](t.name):"allSelect"===n||"inverseSelect"===n?a[n]():(a[n](t.name),r=a.isSelected(t.name)),Z(a.getData(),function(l){var c=l.get("name");if("\n"!==c&&""!==c){var h=a.isSelected(c);o[c]=o.hasOwnProperty(c)?o[c]&&h:h}})}),"allSelect"===n||"inverseSelect"===n?{selected:o}:{name:t.name,selected:o}}function QP(n){n.registerComponentModel(XR),n.registerComponentView($P),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,Y5),n.registerSubTypeDefaulter("legend",function(){return"plain"}),function(t){t.registerAction("legendToggleSelect","legendselectchanged",_t(QT,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",_t(QT,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",_t(QT,"inverseSelect")),t.registerAction("legendSelect","legendselected",_t(QT,"select")),t.registerAction("legendUnSelect","legendunselected",_t(QT,"unSelect"))}(n)}var X5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,r,o){var i=ic(e);n.prototype.init.call(this,e,r,o),eB(this,e,i)},t.prototype.mergeOption=function(e,r){n.prototype.mergeOption.call(this,e,r),eB(this,this.option,e)},t.type="legend.scroll",t.defaultOption=tc(XR.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(XR);function eB(n,t,e){var r=[1,1];r[n.getOrient().index]=0,oc(t,e,{type:"box",ignoreSize:!!r})}var tB=on,KR=["width","height"],JR=["x","y"],q5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return Ce(t,n),t.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new tB),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new tB)},t.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,r,o,i,a,l,c){var h=this;n.prototype.renderInner.call(this,e,r,o,i,a,l,c);var p=this._controllerGroup,g=r.get("pageIconSize",!0),y=Ee(g)?g:[g,g];_("pagePrev",0);var b=r.getModel("pageTextStyle");function _(w,S){var M=w+"DataIndex",A=tu(r.get("pageIcons",!0)[r.getOrient().name][S],{onclick:Fe(h._pageGo,h,M,r,i)},{x:-y[0]/2,y:-y[1]/2,width:y[0],height:y[1]});A.name=w,p.add(A)}p.add(new Kn({name:"pageText",style:{text:"xx/xx",fill:b.getTextColor(),font:b.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),_("pageNext",1)},t.prototype.layoutInner=function(e,r,o,i,a,l){var c=this.getSelectorGroup(),h=e.getOrient().index,p=KR[h],g=JR[h],y=KR[1-h],b=JR[1-h];a&&Ga("horizontal",c,e.get("selectorItemGap",!0));var _=e.get("selectorButtonGap",!0),w=c.getBoundingRect(),S=[-w.x,-w.y],M=jt(o);a&&(M[p]=o[p]-w[p]-_);var A=this._layoutContentAndController(e,i,M,h,p,y,b,g);if(a){if("end"===l)S[h]+=A[p]+_;else{var I=w[p]+_;S[h]-=I,A[g]-=I}A[p]+=w[p]+_,S[1-h]+=A[b]+A[y]/2-w[y]/2,A[y]=Math.max(A[y],w[y]),A[b]=Math.min(A[b],w[b]+S[1-h]),c.x=S[0],c.y=S[1],c.markRedraw()}return A},t.prototype._layoutContentAndController=function(e,r,o,i,a,l,c,h){var p=this.getContentGroup(),g=this._containerGroup,y=this._controllerGroup;Ga(e.get("orient"),p,e.get("itemGap"),i?o.width:null,i?null:o.height),Ga("horizontal",y,e.get("pageButtonItemGap",!0));var b=p.getBoundingRect(),_=y.getBoundingRect(),w=this._showController=b[a]>o[a],S=[-b.x,-b.y];r||(S[i]=p[h]);var M=[0,0],A=[-_.x,-_.y],I=We(e.get("pageButtonGap",!0),e.get("itemGap",!0));w&&("end"===e.get("pageButtonPosition",!0)?A[i]+=o[a]-_[a]:M[i]+=_[a]+I),A[1-i]+=b[l]/2-_[l]/2,p.setPosition(S),g.setPosition(M),y.setPosition(A);var N={x:0,y:0};if(N[a]=w?o[a]:b[a],N[l]=Math.max(b[l],_[l]),N[c]=Math.min(0,_[c]+A[1-i]),g.__rectSize=o[a],w){var L={x:0,y:0};L[a]=Math.max(o[a]-_[a]-I,0),L[l]=N[l],g.setClipPath(new $n({shape:L})),g.__rectSize=L[a]}else y.eachChild(function(O){O.attr({invisible:!0,silent:!0})});var R=this._getPageInfo(e);return null!=R.pageIndex&&hr(p,{x:R.contentPosition[0],y:R.contentPosition[1]},w?e:null),this._updatePageInfoView(e,R),N},t.prototype._pageGo=function(e,r,o){var i=this._getPageInfo(r)[e];null!=i&&o.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:r.id})},t.prototype._updatePageInfoView=function(e,r){var o=this._controllerGroup;Z(["pagePrev","pageNext"],function(p){var g=null!=r[p+"DataIndex"],y=o.childOfName(p);y&&(y.setStyle("fill",e.get(g?"pageIconColor":"pageIconInactiveColor",!0)),y.cursor=g?"pointer":"default")});var i=o.childOfName("pageText"),a=e.get("pageFormatter"),l=r.pageIndex,c=null!=l?l+1:0,h=r.pageCount;i&&a&&i.setStyle("text",bt(a)?a.replace("{current}",null==c?"":c+"").replace("{total}",null==h?"":h+""):a({current:c,total:h}))},t.prototype._getPageInfo=function(e){var r=e.get("scrollDataIndex",!0),o=this.getContentGroup(),i=this._containerGroup.__rectSize,a=e.getOrient().index,l=KR[a],c=JR[a],h=this._findTargetItemIndex(r),p=o.children(),g=p[h],y=p.length,b=y?1:0,_={contentPosition:[o.x,o.y],pageCount:b,pageIndex:b-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!g)return _;var w=N(g);_.contentPosition[a]=-w.s;for(var S=h+1,M=w,A=w,I=null;S<=y;++S)(!(I=N(p[S]))&&A.e>M.s+i||I&&!L(I,M.s))&&(M=A.i>M.i?A:I)&&(null==_.pageNextDataIndex&&(_.pageNextDataIndex=M.i),++_.pageCount),A=I;for(S=h-1,M=w,A=w,I=null;S>=-1;--S)(I=N(p[S]))&&L(A,I.s)||!(M.i<A.i)||(A=M,null==_.pagePrevDataIndex&&(_.pagePrevDataIndex=M.i),++_.pageCount,++_.pageIndex),M=I;return _;function N(R){if(R){var O=R.getBoundingRect(),B=O[c]+R[c];return{s:B,e:B+O[l],i:R.__legendDataIndex}}}function L(R,O){return R.e>=O&&R.s<=O+i}},t.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild(function(i,a){var l=i.__legendDataIndex;null==o&&null!=l&&(o=a),l===e&&(r=a)}),r??o):0;var r,o},t.type="legend.scroll",t}($P);function Z5(n){Rn(QP),n.registerComponentModel(X5),n.registerComponentView(q5),function(t){t.registerAction("legendScroll","legendscroll",function(e,r){var o=e.scrollDataIndex;null!=o&&r.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(o)})})}(n)}var $5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="dataZoom.inside",t.defaultOption=tc(XT.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(XT),QR=Gn();function nB(n,t){if(t){n.removeKey(t.model.uid);var e=t.controller;e&&e.dispose()}}function J5(n,t){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function Q5(n,t,e,r){return n.coordinateSystem.containPoint([e,r])}var tV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return Ce(t,n),t.prototype.render=function(e,r,o){n.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),function K5(n,t,e){QR(n).coordSysRecordMap.each(function(r){var o=r.dataZoomInfoMap.get(t.uid);o&&(o.getRange=e)})}(o,e,{pan:Fe(eO.pan,this),zoom:Fe(eO.zoom,this),scrollMove:Fe(eO.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){(function(e,r){for(var o=QR(e).coordSysRecordMap,i=o.keys(),a=0;a<i.length;a++){var c=o.get(i[a]),h=c.dataZoomInfoMap;if(h){var p=r.uid;h.get(p)&&(h.removeKey(p),h.keys().length||nB(o,c))}}})(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(CR),eO={zoom:function(n,t,e,r){var o=this.range,i=o.slice(),a=n.axisModels[0];if(a){var l=tO[t](null,[r.originX,r.originY],a,e,n),c=(l.signal>0?l.pixelStart+l.pixelLength-l.pixel:l.pixel-l.pixelStart)/l.pixelLength*(i[1]-i[0])+i[0],h=Math.max(1/r.scale,0);i[0]=(i[0]-c)*h+c,i[1]=(i[1]-c)*h+c;var p=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Od(0,i,[0,100],0,p.minSpan,p.maxSpan),this.range=i,o[0]!==i[0]||o[1]!==i[1]?i:void 0}},pan:rB(function(n,t,e,r,o,i){var a=tO[r]([i.oldX,i.oldY],[i.newX,i.newY],t,o,e);return a.signal*(n[1]-n[0])*a.pixel/a.pixelLength}),scrollMove:rB(function(n,t,e,r,o,i){return tO[r]([0,0],[i.scrollDelta,i.scrollDelta],t,o,e).signal*(n[1]-n[0])*i.scrollDelta})};function rB(n){return function(t,e,r,o){var i=this.range,a=i.slice(),l=t.axisModels[0];if(l)return Od(n(a,l,t,e,r,o),a,[0,100],"all"),this.range=a,i[0]!==a[0]||i[1]!==a[1]?a:void 0}}var tO={grid:function(n,t,e,r,o){var i=e.axis,a={},l=o.model.coordinateSystem.getRect();return n=n||[0,0],"x"===i.dim?(a.pixel=t[0]-n[0],a.pixelLength=l.width,a.pixelStart=l.x,a.signal=i.inverse?1:-1):(a.pixel=t[1]-n[1],a.pixelLength=l.height,a.pixelStart=l.y,a.signal=i.inverse?-1:1),a},polar:function(n,t,e,r,o){var i=e.axis,a={},l=o.model.coordinateSystem,c=l.getRadiusAxis().getExtent(),h=l.getAngleAxis().getExtent();return n=n?l.pointToCoord(n):[0,0],t=l.pointToCoord(t),"radiusAxis"===e.mainType?(a.pixel=t[0]-n[0],a.pixelLength=c[1]-c[0],a.pixelStart=c[0],a.signal=i.inverse?1:-1):(a.pixel=t[1]-n[1],a.pixelLength=h[1]-h[0],a.pixelStart=h[0],a.signal=i.inverse?-1:1),a},singleAxis:function(n,t,e,r,o){var i=e.axis,a=o.model.coordinateSystem.getRect(),l={};return n=n||[0,0],"horizontal"===i.orient?(l.pixel=t[0]-n[0],l.pixelLength=a.width,l.pixelStart=a.x,l.signal=i.inverse?1:-1):(l.pixel=t[1]-n[1],l.pixelLength=a.height,l.pixelStart=a.y,l.signal=i.inverse?-1:1),l}};function oB(n){MR(n),n.registerComponentModel($5),n.registerComponentView(tV),function eV(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(t,e){var r=QR(e),o=r.coordSysRecordMap||(r.coordSysRecordMap=Et());o.each(function(i){i.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){Z(QO(i).infoList,function(a){var h,p,g,y,l=a.model.uid,c=o.get(l)||o.set(l,(h=e,g={model:p=a.model,containsPoint:_t(Q5,p),dispatchAction:_t(J5,h),dataZoomInfoMap:null,controller:null},y=g.controller=new bg(h.getZr()),Z(["pan","zoom","scrollMove"],function(b){y.on(b,function(_){var w=[];g.dataZoomInfoMap.each(function(S){if(_.isAvailableBehavior(S.model.option)){var M=(S.getRange||{})[b],A=M&&M(S.dzReferCoordSysInfo,g.model.mainType,g.controller,_);!S.model.get("disabled",!0)&&A&&w.push({dataZoomId:S.model.id,start:A[0],end:A[1]})}}),w.length&&g.dispatchAction(w)})}),g));(c.dataZoomInfoMap||(c.dataZoomInfoMap=Et())).set(i.uid,{dzReferCoordSysInfo:a,model:i,getRange:null})})}),o.each(function(i){var a,y,b,_,w,l=i.controller,c=i.dataZoomInfoMap;if(c){var h=c.keys()[0];null!=h&&(a=c.get(h))}if(a){var p=(b="type_",_={type_true:2,type_move:1,type_false:0,type_undefined:-1},w=!0,c.each(function(S){var M=S.model,A=!M.get("disabled",!0)&&(!M.get("zoomLock",!0)||"move");_[b+A]>_[b+y]&&(y=A),w=w&&M.get("preventDefaultMouseMove",!0)}),{controlType:y,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!w}});l.enable(p.controlType,p.opt),l.setPointerChecker(i.containsPoint),Fh(i,"dispatchAction",a.model.get("throttle",!0),"fixRate")}else nB(o,i)})})}(n)}var nV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=tc(XT.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(XT),eA=$n,tA="horizontal",iB="vertical",rV=["line","bar","candlestick","scatter"],oV={easing:"cubicOut",duration:100,delay:0},iV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._displayables={},e}return Ce(t,n),t.prototype.init=function(e,r){this.api=r,this._onBrush=Fe(this._onBrush,this),this._onBrushEnd=Fe(this._onBrushEnd,this)},t.prototype.render=function(e,r,o,i){if(n.prototype.render.apply(this,arguments),Fh(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Hf(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new on;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(r),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,r=this.api,o=e.get("brushSelect")?7:0,i=this._findCoordRect(),a={width:r.getWidth(),height:r.getHeight()},l=this._orient===tA?{right:a.width-i.x-i.width,top:a.height-30-7-o,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},c=ic(e.option);Z(["right","top","width","height"],function(p){"ph"===c[p]&&(c[p]=l[p])});var h=xo(c,a);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===iB&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,r=this._location,o=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),a=i&&i.get("inverse"),l=this._displayables.sliderGroup,c=(this._dataShadowInfo||{}).otherAxisInverse;l.attr(o!==tA||a?o===tA&&a?{scaleY:c?1:-1,scaleX:-1}:o!==iB||a?{scaleY:c?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:c?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:c?1:-1,scaleX:1});var h=e.getBoundingRect([l]);e.x=r.x-h.x,e.y=r.y-h.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,r=this._size,o=this._displayables.sliderGroup,i=e.get("brushSelect");o.add(new eA({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var a=new eA({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:Fe(this._onClickPanel,this)}),l=this.api.getZr();i?(a.on("mousedown",this._onBrushStart,this),a.cursor="crosshair",l.on("mousemove",this._onBrush),l.on("mouseup",this._onBrushEnd)):(l.off("mousemove",this._onBrush),l.off("mouseup",this._onBrushEnd)),o.add(a)},t.prototype._renderDataShadow=function(){var W,Y,X,J,e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var r=this._size,o=this._shadowSize||[],i=e.series,a=i.getRawData(),l=i.getShadowDim&&i.getShadowDim(),c=l&&a.getDimensionInfo(l)?i.getShadowDim():e.otherDim;if(null!=c){var h=this._shadowPolygonPts,p=this._shadowPolylinePts;if(a!==this._shadowData||c!==this._shadowDim||r[0]!==o[0]||r[1]!==o[1]){var g=a.getDataExtent(c),y=.3*(g[1]-g[0]);g=[g[0]-y,g[1]+y];var b,_=[0,r[1]],S=[[r[0],0],[0,0]],M=[],A=r[0]/(a.count()-1),I=0,N=Math.round(a.count()/r[0]);a.each([c],function(G,W){if(N>0&&W%N)I+=A;else{var Y=null==G||isNaN(G)||""===G,X=Y?0:lr(G,g,_,!0);Y&&!b&&W?(S.push([S[S.length-1][0],0]),M.push([M[M.length-1][0],0])):!Y&&b&&(S.push([I,0]),M.push([I,0])),S.push([I,X]),M.push([I,X]),I+=A,b=Y}}),h=this._shadowPolygonPts=S,p=this._shadowPolylinePts=M}this._shadowData=a,this._shadowDim=c,this._shadowSize=[r[0],r[1]];for(var L=this.dataZoomModel,R=0;R<3;R++){var O=(W=void 0,Y=void 0,void 0,void 0,W=L.getModel(1===R?"selectedDataBackground":"dataBackground"),Y=new on,X=new Zi({shape:{points:h},segmentIgnoreThreshold:1,style:W.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),J=new $i({shape:{points:p},segmentIgnoreThreshold:1,style:W.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),Y.add(X),Y.add(J),Y);this._displayables.sliderGroup.add(O),this._displayables.dataShadowSegs.push(O)}}}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,r=e.get("showDataShadow");if(!1!==r){var o,i=this.ecModel;return e.eachTargetAxis(function(a,l){Z(e.getAxisProxy(a,l).getTargetSeriesModels(),function(c){if(!(o||!0!==r&&$t(rV,c.get("type"))<0)){var h,p=i.getComponent(Rg(a),l).axis,g={x:"y",y:"x",radius:"angle",angle:"radius"}[a],y=c.coordinateSystem;null!=g&&y.getOtherAxis&&(h=y.getOtherAxis(p).inverse),g=c.getData().mapDimension(g),o={thisAxis:p,series:c,thisDim:a,otherDim:g,otherAxisInverse:h}}},this)},this),o}},t.prototype._renderHandle=function(){var e=this.group,r=this._displayables,o=r.handles=[null,null],i=r.handleLabels=[null,null],a=this._displayables.sliderGroup,l=this._size,c=this.dataZoomModel,h=this.api,p=c.get("borderRadius")||0,g=c.get("brushSelect"),y=r.filler=new eA({silent:g,style:{fill:c.get("fillerColor")},textConfig:{position:"inside"}});a.add(y),a.add(new eA({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:l[0],height:l[1],r:p},style:{stroke:c.get("dataBackgroundColor")||c.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),Z([0,1],function(I){var N=c.get("handleIcon");!Ym[N]&&N.indexOf("path://")<0&&N.indexOf("image://")<0&&(N="path://"+N);var L=vo(N,-1,0,2,2,null,!0);L.attr({cursor:aB(this._orient),draggable:!0,drift:Fe(this._onDragMove,this,I),ondragend:Fe(this._onDragEnd,this),onmouseover:Fe(this._showDataInfo,this,!0),onmouseout:Fe(this._showDataInfo,this,!1),z2:5});var R=L.getBoundingRect(),O=c.get("handleSize");this._handleHeight=Ct(O,this._size[1]),this._handleWidth=R.width/R.height*this._handleHeight,L.setStyle(c.getModel("handleStyle").getItemStyle()),L.style.strokeNoScale=!0,L.rectHover=!0,L.ensureState("emphasis").style=c.getModel(["emphasis","handleStyle"]).getItemStyle(),Us(L);var B=c.get("handleColor");null!=B&&(L.style.fill=B),a.add(o[I]=L);var G=c.getModel("textStyle");e.add(i[I]=new Kn({silent:!0,invisible:!0,style:Or(G,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:G.getTextColor(),font:G.getFont()}),z2:10}))},this);var b=y;if(g){var _=Ct(c.get("moveHandleSize"),l[1]),w=r.moveHandle=new $n({style:c.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:l[1]-.5,height:_}}),S=.8*_,M=r.moveHandleIcon=vo(c.get("moveHandleIcon"),-S/2,-S/2,S,S,"#fff",!0);M.silent=!0,M.y=l[1]+_/2-.5,w.ensureState("emphasis").style=c.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var A=Math.min(l[1]/2,Math.max(_,10));(b=r.moveZone=new $n({invisible:!0,shape:{y:l[1]-A,height:_+A}})).on("mouseover",function(){h.enterEmphasis(w)}).on("mouseout",function(){h.leaveEmphasis(w)}),a.add(w),a.add(M),a.add(b)}b.attr({draggable:!0,cursor:aB(this._orient),drift:Fe(this._onDragMove,this,"all"),ondragstart:Fe(this._showDataInfo,this,!0),ondragend:Fe(this._onDragEnd,this),onmouseover:Fe(this._showDataInfo,this,!0),onmouseout:Fe(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[lr(e[0],[0,100],r,!0),lr(e[1],[0,100],r,!0)]},t.prototype._updateInterval=function(e,r){var o=this.dataZoomModel,i=this._handleEnds,a=this._getViewExtent(),l=o.findRepresentativeAxisProxy().getMinMaxSpan(),c=[0,100];Od(r,i,a,o.get("zoomLock")?"all":e,null!=l.minSpan?lr(l.minSpan,c,a,!0):null,null!=l.maxSpan?lr(l.maxSpan,c,a,!0):null);var h=this._range,p=this._range=ds([lr(i[0],a,c,!0),lr(i[1],a,c,!0)]);return!h||h[0]!==p[0]||h[1]!==p[1]},t.prototype._updateView=function(e){var r=this._displayables,o=this._handleEnds,i=ds(o.slice()),a=this._size;Z([0,1],function(b){var w=this._handleHeight;r.handles[b].attr({scaleX:w/2,scaleY:w/2,x:o[b]+(b?-1:1),y:a[1]/2-w/2})},this),r.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:a[1]});var l={x:i[0],width:i[1]-i[0]};r.moveHandle&&(r.moveHandle.setShape(l),r.moveZone.setShape(l),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",l.x+l.width/2));for(var c=r.dataShadowSegs,h=[0,i[0],i[1],a[0]],p=0;p<c.length;p++){var g=c[p],y=g.getClipPath();y||(y=new $n,g.setClipPath(y)),y.setShape({x:h[p],y:0,width:h[p+1]-h[p],height:a[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var r=this.dataZoomModel,o=this._displayables,i=o.handleLabels,a=this._orient,l=["",""];if(r.get("showDetail")){var c=r.findRepresentativeAxisProxy();if(c){var h=c.getAxisModel().axis,p=this._range,g=e?c.calculateDataWindow({start:p[0],end:p[1]}).valueWindow:c.getDataValueWindow();l=[this._formatLabel(g[0],h),this._formatLabel(g[1],h)]}}var y=ds(this._handleEnds.slice());function b(_){var w=Va(o.handles[_].parent,this.group),S=w0(0===_?"right":"left",w),M=this._handleWidth/2+5,A=gl([y[_]+(0===_?-M:M),this._size[1]/2],w);i[_].setStyle({x:A[0],y:A[1],verticalAlign:a===tA?"middle":S,align:a===tA?S:"center",text:l[_]})}b.call(this,0),b.call(this,1)},t.prototype._formatLabel=function(e,r){var o=this.dataZoomModel,i=o.get("labelFormatter"),a=o.get("labelPrecision");null!=a&&"auto"!==a||(a=r.getPixelPrecision());var l=null==e||isNaN(e)?"":"category"===r.type||"time"===r.type?r.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(a,20));return Se(i)?i(e,l):bt(i)?i.replace("{value}",l):l},t.prototype._showDataInfo=function(e){var r=this._displayables,o=r.handleLabels;o[0].attr("invisible",!(e=this._dragging||e)),o[1].attr("invisible",!e),r.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](r.moveHandle,1)},t.prototype._onDragMove=function(e,r,o,i){this._dragging=!0,Qa(i.event);var a=gl([r,o],this._displayables.sliderGroup.getLocalTransform(),!0),l=this._updateInterval(e,a[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var r=this._size,o=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(o[0]<0||o[0]>r[0]||o[1]<0||o[1]>r[1])){var i=this._handleEnds,l=this._updateInterval("all",o[0]-(i[0]+i[1])/2);this._updateView(),l&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){this._brushStart=new pn(e.offsetX,e.offsetY),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,r){r.attr("ignore",!0);var o=r.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(o.width)<5)){var i=this._getViewExtent(),a=[0,100];this._range=ds([lr(o.x,i,a,!0),lr(o.x+o.width,i,a,!0)]),this._handleEnds=[o.x,o.x+o.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(Qa(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,r){var o=this._displayables,a=o.brushRect;a||(a=o.brushRect=new eA({silent:!0,style:this.dataZoomModel.getModel("brushStyle").getItemStyle()}),o.sliderGroup.add(a)),a.attr("ignore",!1);var l=this._brushStart,c=this._displayables.sliderGroup,h=c.transformCoordToLocal(e,r),p=c.transformCoordToLocal(l.x,l.y),g=this._size;h[0]=Math.max(Math.min(g[0],h[0]),0),a.setShape({x:p[0],y:0,width:h[0]-p[0],height:g[1]})},t.prototype._dispatchZoomAction=function(e){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?oV:null,start:r[0],end:r[1]})},t.prototype._findCoordRect=function(){var e,r=QO(this.dataZoomModel).infoList;if(!e&&r.length){var o=r[0].model.coordinateSystem;e=o.getRect&&o.getRect()}if(!e){var i=this.api.getWidth(),a=this.api.getHeight();e={x:.2*i,y:.2*a,width:.6*i,height:.6*a}}return e},t.type="dataZoom.slider",t}(CR);function aB(n){return"vertical"===n?"ns-resize":"ew-resize"}function sB(n){n.registerComponentModel(nV),n.registerComponentView(iV),MR(n)}var lB=function(n,t,e){var r=jt((aV[n]||{})[t]);return e&&Ee(r)?r[r.length-1]:r},aV={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},uB=ri.mapVisual,sV=ri.eachVisual,lV=Ee,cB=Z,uV=ds,cV=lr,tE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return Ce(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o)},t.prototype.optionUpdated=function(e,r){!r&&IP(this.option,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var r=this.stateList;e=Fe(e,this),this.controllerVisuals=PR(this.option.controller,r,e),this.targetVisuals=PR(this.option.target,r,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,r=[];return null==e||"all"===e?this.ecModel.eachSeries(function(o,i){r.push(i)}):r=Dr(e),r},t.prototype.eachTargetSeries=function(e,r){Z(this.getTargetSeriesIndices(),function(o){var i=this.ecModel.getSeriesByIndex(o);i&&e.call(r,i)},this)},t.prototype.isTargetSeries=function(e){var r=!1;return this.eachTargetSeries(function(o){o===e&&(r=!0)}),r},t.prototype.formatValueText=function(e,r,o){var i,a=this.option,l=a.precision,c=this.dataBound,h=a.formatter;o=o||["<",">"],Ee(e)&&(e=e.slice(),i=!0);var p=r?e:i?[g(e[0]),g(e[1])]:g(e);return bt(h)?h.replace("{value}",i?p[0]:p).replace("{value2}",i?p[1]:p):Se(h)?i?h(e[0],e[1]):h(e):i?e[0]===c[0]?o[0]+" "+p[1]:e[1]===c[1]?o[1]+" "+p[0]:p[0]+" - "+p[1]:p;function g(y){return y===c[0]?"min":y===c[1]?"max":(+y).toFixed(Math.min(l,20))}},t.prototype.resetExtent=function(){var e=this.option,r=uV([e.min,e.max]);this._dataExtent=r},t.prototype.getDataDimensionIndex=function(e){var r=this.option.dimension;if(null!=r)return e.getDimensionIndex(r);for(var o=e.dimensions,i=o.length-1;i>=0;i--){var l=e.getDimensionInfo(o[i]);if(!l.isCalculationCoord)return l.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,r=this.option,o={inRange:r.inRange,outOfRange:r.outOfRange},i=r.target||(r.target={}),a=r.controller||(r.controller={});Ve(i,o),Ve(a,o);var l=this.isCategory();function c(h){lV(r.color)&&!h.inRange&&(h.inRange={color:r.color.slice().reverse()}),h.inRange=h.inRange||{color:e.get("gradientColor")}}c.call(this,i),c.call(this,a),function(h,p,g){var y=h[p],b=h[g];y&&!b&&(b=h[g]={},cB(y,function(_,w){if(ri.isValidType(w)){var S=lB(w,"inactive",l);null!=S&&(b[w]=S,"color"!==w||b.hasOwnProperty("opacity")||b.hasOwnProperty("colorAlpha")||(b.opacity=[0,0]))}}))}.call(this,i,"inRange","outOfRange"),function(h){var p=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,g=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,y=this.get("inactiveColor"),b=this.getItemSymbol()||"roundRect";cB(this.stateList,function(_){var w=this.itemSize,S=h[_];S||(S=h[_]={color:l?y:[y]}),null==S.symbol&&(S.symbol=p&&jt(p)||(l?b:[b])),null==S.symbolSize&&(S.symbolSize=g&&jt(g)||(l?w[0]:[w[0],w[0]])),S.symbol=uB(S.symbol,function(I){return"none"===I?b:I});var M=S.symbolSize;if(null!=M){var A=-1/0;sV(M,function(I){I>A&&(A=I)}),S.symbolSize=uB(M,function(I){return cV(I,[0,A],[0,w[0]],!0)})}},this)}.call(this,a)},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(wn),dB=[20,140],dV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.optionUpdated=function(e,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=dB[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=dB[1])},t.prototype._resetRange=function(){var e=this.getExtent(),r=this.option.range;!r||r.auto?(e.auto=1,this.option.range=e):Ee(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],e[0]),r[1]=Math.min(r[1],e[1]))},t.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),Z(this.stateList,function(e){var r=this.option.controller[e].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),r=ds((this.get("range")||[]).slice());return r[0]>e[1]&&(r[0]=e[1]),r[1]>e[1]&&(r[1]=e[1]),r[0]<e[0]&&(r[0]=e[0]),r[1]<e[0]&&(r[1]=e[0]),r},t.prototype.getValueState=function(e){var r=this.option.range,o=this.getExtent();return(r[0]<=o[0]||r[0]<=e)&&(r[1]>=o[1]||e<=r[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var r=[];return this.eachTargetSeries(function(o){var i=[],a=o.getData();a.each(this.getDataDimensionIndex(a),function(l,c){e[0]<=l&&l<=e[1]&&i.push(c)},this),r.push({seriesId:o.id,dataIndex:i})},this),r},t.prototype.getVisualMeta=function(e){var r=hB(0,0,this.getExtent()),o=hB(0,0,this.option.range.slice()),i=[];function a(b,_){i.push({value:b,color:e(b,_)})}for(var l=0,c=0,h=o.length,p=r.length;c<p&&(!o.length||r[c]<=o[0]);c++)r[c]<o[l]&&a(r[c],"outOfRange");for(var g=1;l<h;l++,g=0)g&&i.length&&a(o[l],"outOfRange"),a(o[l],"inRange");for(g=1;c<p;c++)(!o.length||o[o.length-1]<r[c])&&(g&&(i.length&&a(i[i.length-1].value,"outOfRange"),g=0),a(r[c],"outOfRange"));var y=i.length;return{stops:i,outerColors:[y?i[0].color:"transparent",y?i[y-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=tc(tE.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(tE);function hB(n,t,e){if(e[0]===e[1])return e.slice();for(var r=(e[1]-e[0])/200,o=e[0],i=[],a=0;a<=200&&o<e[1];a++)i.push(o),o+=r;return i.push(e[1]),i}var pB=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return Ce(t,n),t.prototype.init=function(e,r){this.ecModel=e,this.api=r},t.prototype.render=function(e,r,o,i){this.visualMapModel=e,!1!==e.get("show")?this.doRender(e,r,o,i):this.group.removeAll()},t.prototype.renderBackground=function(e){var r=this.visualMapModel,o=ru(r.get("padding")||0),i=e.getBoundingRect();e.add(new $n({z2:-1,silent:!0,shape:{x:i.x-o[3],y:i.y-o[0],width:i.width+o[3]+o[1],height:i.height+o[0]+o[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,r,o){var i=(o=o||{}).forceState,a=this.visualMapModel,l={};if("color"===r){var c=a.get("contentColor");l.color=c}function h(y){return l[y]}function p(y,b){l[y]=b}var g=a.controllerVisuals[i||a.getValueState(e)];return Z(ri.prepareVisualTypes(g),function(y){var b=g[y];o.convertOpacityToAlpha&&"opacity"===y&&(y="colorAlpha",b=g.__alphaForOpacity),ri.dependsOn(y,r)&&b&&b.applyVisual(e,h,p)}),l[r]},t.prototype.positionGroup=function(e){var o=this.api;Df(e,this.visualMapModel.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})},t.prototype.doRender=function(e,r,o,i){},t.type="visualMap",t}(Wr),fB=[["left","right","width"],["top","bottom","height"]];function gB(n,t,e){var r=n.option,o=r.align;if(null!=o&&"auto"!==o)return o;for(var i={width:t.getWidth(),height:t.getHeight()},a="horizontal"===r.orient?1:0,l=fB[a],c=[0,null,10],h={},p=0;p<3;p++)h[fB[1-a][p]]=c[p],h[l[p]]=2===p?e[0]:r[l[p]];var g=[["x","width",3],["y","height",0]][a],y=xo(h,i,r.padding);return l[(y.margin[g[2]]||0)+y[g[0]]+.5*y[g[1]]<.5*i[g[1]]?0:1]}function nE(n,t){return Z(n||[],function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),n}var Wd=lr,hV=Z,mB=Math.min,nO=Math.max,pV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return Ce(t,n),t.prototype.init=function(e,r){n.prototype.init.call(this,e,r),this._hoverLinkFromSeriesMouseOver=Fe(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Fe(this._hideIndicator,this)},t.prototype.doRender=function(e,r,o,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,r=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(r);var o=e.get("text");this._renderEndsText(r,o,0),this._renderEndsText(r,o,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},t.prototype._renderEndsText=function(e,r,o){if(r){var i=r[1-o];i=null!=i?i+"":"";var a=this.visualMapModel,l=a.get("textGap"),c=a.itemSize,h=this._shapes.mainGroup,p=this._applyTransform([c[0]/2,0===o?-l:c[1]+l],h),g=this._applyTransform(0===o?"bottom":"top",h),y=this._orient;this.group.add(new Kn({style:Or(this.visualMapModel.textStyleModel,{x:p[0],y:p[1],verticalAlign:"horizontal"===y?"middle":g,align:"horizontal"===y?g:"center",text:i})}))}},t.prototype._renderBar=function(e){var r=this.visualMapModel,o=this._shapes,i=r.itemSize,a=this._orient,l=this._useHandle,c=gB(r,this.api,i),h=o.mainGroup=this._createBarGroup(c),p=new on;h.add(p),p.add(o.outOfRange=yB()),p.add(o.inRange=yB(null,l?bB(this._orient):null,Fe(this._dragHandle,this,"all",!1),Fe(this._dragHandle,this,"all",!0))),p.setClipPath(new $n({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var g=r.textStyleModel.getTextRect("\u56fd"),y=nO(g.width,g.height);l&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(r,h,0,i,y,a),this._createHandle(r,h,1,i,y,a)),this._createIndicator(r,h,i,y,a),e.add(h)},t.prototype._createHandle=function(e,r,o,i,a,l){var c=Fe(this._dragHandle,this,o,!1),h=Fe(this._dragHandle,this,o,!0),p=cs(e.get("handleSize"),i[0]),g=vo(e.get("handleIcon"),-p/2,-p/2,p,p,null,!0),y=bB(this._orient);g.attr({cursor:y,draggable:!0,drift:c,ondragend:h,onmousemove:function(M){Qa(M.event)}}),g.x=i[0]/2,g.useStyle(e.getModel("handleStyle").getItemStyle()),g.setStyle({strokeNoScale:!0,strokeFirst:!0}),g.style.lineWidth*=2,g.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Kc(g,!0),r.add(g);var _=new Kn({cursor:y,draggable:!0,drift:c,onmousemove:function(M){Qa(M.event)},ondragend:h,style:Or(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});_.ensureState("blur").style={opacity:.1},_.stateTransition={duration:200},this.group.add(_);var w=[p,0],S=this._shapes;S.handleThumbs[o]=g,S.handleLabelPoints[o]=w,S.handleLabels[o]=_},t.prototype._createIndicator=function(e,r,o,i,a){var l=cs(e.get("indicatorSize"),o[0]),c=vo(e.get("indicatorIcon"),-l/2,-l/2,l,l,null,!0);c.attr({cursor:"move",invisible:!0,silent:!0,x:o[0]/2});var h=e.getModel("indicatorStyle").getItemStyle();if(c instanceof jo){var p=c.style;c.useStyle(De({image:p.image,x:p.x,y:p.y,width:p.width,height:p.height},h))}else c.useStyle(h);r.add(c);var y=new Kn({silent:!0,invisible:!0,style:Or(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(y);var b=[("horizontal"===a?i/2:6)+o[0]/2,0],_=this._shapes;_.indicator=c,_.indicatorLabel=y,_.indicatorLabelPoint=b,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,r,o,i){if(this._useHandle){if(this._dragging=!r,!r){var a=this._applyTransform([o,i],this._shapes.mainGroup,!0);this._updateInterval(e,a[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():vB(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,r=this._dataInterval=e.getSelected(),o=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[Wd(r[0],o,i,!0),Wd(r[1],o,i,!0)]},t.prototype._updateInterval=function(e,r){var o=this.visualMapModel,i=this._handleEnds,a=[0,o.itemSize[1]];Od(r=r||0,i,a,e,0);var l=o.getExtent();this._dataInterval=[Wd(i[0],a,l,!0),Wd(i[1],a,l,!0)]},t.prototype._updateView=function(e){var r=this.visualMapModel,o=r.getExtent(),i=this._shapes,a=[0,r.itemSize[1]],l=e?a:this._handleEnds,c=this._createBarVisual(this._dataInterval,o,l,"inRange"),h=this._createBarVisual(o,o,a,"outOfRange");i.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),i.outOfRange.setStyle({fill:h.barColor}).setShape("points",h.barPoints),this._updateHandle(l,c)},t.prototype._createBarVisual=function(e,r,o,i){var a={forceState:i,convertOpacityToAlpha:!0},l=this._makeColorGradient(e,a),c=[this.getControllerVisual(e[0],"symbolSize",a),this.getControllerVisual(e[1],"symbolSize",a)],h=this._createBarPoints(o,c);return{barColor:new gf(0,0,0,1,l),barPoints:h,handlesColor:[l[0].color,l[l.length-1].color]}},t.prototype._makeColorGradient=function(e,r){var o=[],i=(e[1]-e[0])/100;o.push({color:this.getControllerVisual(e[0],"color",r),offset:0});for(var a=1;a<100;a++){var l=e[0]+i*a;if(l>e[1])break;o.push({color:this.getControllerVisual(l,"color",r),offset:a/100})}return o.push({color:this.getControllerVisual(e[1],"color",r),offset:1}),o},t.prototype._createBarPoints=function(e,r){var o=this.visualMapModel.itemSize;return[[o[0]-r[0],e[0]],[o[0],e[0]],[o[0],e[1]],[o[0]-r[1],e[1]]]},t.prototype._createBarGroup=function(e){var r=this._orient,o=this.visualMapModel.get("inverse");return new on("horizontal"!==r||o?"horizontal"===r&&o?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==r||o?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},t.prototype._updateHandle=function(e,r){if(this._useHandle){var o=this._shapes,i=this.visualMapModel,a=o.handleThumbs,l=o.handleLabels,c=i.itemSize,h=i.getExtent();hV([0,1],function(p){var g=a[p];g.setStyle("fill",r.handlesColor[p]),g.y=e[p];var y=Wd(e[p],[0,c[1]],h,!0),b=this.getControllerVisual(y,"symbolSize");g.scaleX=g.scaleY=b/c[0],g.x=c[0]-b/2;var _=gl(o.handleLabelPoints[p],Va(g,this.group));l[p].setStyle({x:_[0],y:_[1],text:i.formatValueText(this._dataInterval[p]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",o.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,r,o,i){var a=this.visualMapModel,l=a.getExtent(),c=a.itemSize,h=[0,c[1]],p=this._shapes,g=p.indicator;if(g){g.attr("invisible",!1);var y=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),b=this.getControllerVisual(e,"symbolSize"),_=Wd(e,l,h,!0),w=c[0]-b/2,S={x:g.x,y:g.y};g.y=_,g.x=w;var M=gl(p.indicatorLabelPoint,Va(g,this.group)),A=p.indicatorLabel;A.attr("invisible",!1);var I=this._applyTransform("left",p.mainGroup),N="horizontal"===this._orient;A.setStyle({text:(o||"")+a.formatValueText(r),verticalAlign:N?I:"middle",align:N?"center":I});var L={x:w,y:_,style:{fill:y}},R={style:{x:M[0],y:M[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var O={duration:100,easing:"cubicInOut",additive:!0};g.x=S.x,g.y=S.y,g.animateTo(L,O),A.animateTo(R,O)}else g.attr(L),A.attr(R);this._firstShowIndicator=!1;var B=this._shapes.handleLabels;if(B)for(var G=0;G<B.length;G++)this.api.enterBlur(B[G])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(r){if(e._hovering=!0,!e._dragging){var o=e.visualMapModel.itemSize,i=e._applyTransform([r.offsetX,r.offsetY],e._shapes.mainGroup,!0,!0);i[1]=mB(nO(0,i[1]),o[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=o[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,r){var S,M,A,I,o=this.visualMapModel;if(o.option.hoverLink){var a=[0,o.itemSize[1]],l=o.getExtent();e=mB(nO(a[0],e),a[1]);var c=(S=l,M=a,A=6,(I=o.get("hoverLinkDataSize"))&&(A=Wd(I,S,M,!0)/2),A),h=[e-c,e+c],p=Wd(e,a,l,!0),g=[Wd(h[0],a,l,!0),Wd(h[1],a,l,!0)];h[0]<a[0]&&(g[0]=-1/0),h[1]>a[1]&&(g[1]=1/0),r&&(g[0]===-1/0?this._showIndicator(p,g[1],"< ",c):g[1]===1/0?this._showIndicator(p,g[0],"> ",c):this._showIndicator(p,p,"\u2248 ",c));var y=this._hoverLinkDataIndices,b=[];(r||vB(o))&&(b=this._hoverLinkDataIndices=o.findTargetDataIndices(g));var _=function(w,S){var M={},A={};return I(w||[],M),I(S||[],A,M),[N(M),N(A)];function I(L,R,O){for(var B=0,G=L.length;B<G;B++){var W=Po(L[B].seriesId,null);if(null==W)return;for(var Y=Dr(L[B].dataIndex),X=O&&O[W],J=0,ne=Y.length;J<ne;J++){var oe=Y[J];X&&X[oe]?X[oe]=null:(R[W]||(R[W]={}))[oe]=1}}}function N(L,R){var O=[];for(var B in L)if(L.hasOwnProperty(B)&&null!=L[B])if(R)O.push(+B);else{var G=N(L[B],!0);G.length&&O.push({seriesId:B,dataIndex:G})}return O}}(y,b);this._dispatchHighDown("downplay",nE(_[0],o)),this._dispatchHighDown("highlight",nE(_[1],o))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var r;if(dd(e.target,function(c){var h=cn(c);if(null!=h.dataIndex)return r=h,!0},!0),r){var o=this.ecModel.getSeriesByIndex(r.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(o)){var a=o.getData(r.dataType),l=a.getStore().get(i.getDataDimensionIndex(a),r.dataIndex);isNaN(l)||this._showIndicator(l,l)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var o=0;o<r.length;o++)this.api.leaveBlur(r[o])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",nE(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,r,o,i){var a=Va(r,i?null:this.group);return Ee(e)?gl(e,a,o):w0(e,a,o)},t.prototype._dispatchHighDown=function(e,r){r&&r.length&&this.api.dispatchAction({type:e,batch:r})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(pB);function yB(n,t,e,r){return new Zi({shape:{points:n},draggable:!!e,cursor:t,drift:e,onmousemove:function(o){Qa(o.event)},ondragend:r})}function vB(n){return!!(n.get("hoverLinkOnHandle")??n.get("realtime"))}function bB(n){return"vertical"===n?"ns-resize":"ew-resize"}var fV={type:"selectDataRange",event:"dataRangeSelected",update:"update"},gV=function(n,t){t.eachComponent({mainType:"visualMap",query:n},function(e){e.setSelected(n.selected)})},mV=[{createOnAllSeries:!0,reset:function(n,t){var e=[];return t.eachComponent("visualMap",function(r){var o,i,a,l,c,h=n.pipelineContext;!r.isTargetSeries(n)||h&&h.large||e.push((o=r.stateList,i=r.targetVisuals,a=Fe(r.getValueState,r),l=r.getDataDimensionIndex(n.getData()),c={},Z(o,function(p){var g=ri.prepareVisualTypes(i[p]);c[p]=g}),{progress:function(p,g){var y,b;function _(G){return dc(g,b,G)}function w(G,W){hc(g,b,G,W)}null!=l&&(y=g.getDimensionIndex(l));for(var S=g.getStore();null!=(b=p.next());){var M=g.getRawDataItem(b);if(!M||!1!==M.visualMap)for(var A=null!=l?S.get(y,b):b,I=a(A),N=i[I],L=c[I],R=0,O=L.length;R<O;R++){var B=L[R];N[B]&&N[B].applyVisual(A,_,w)}}}}))}),e}},{createOnAllSeries:!0,reset:function(n,t){var e=n.getData(),r=[];t.eachComponent("visualMap",function(o){if(o.isTargetSeries(n)){var i=o.getVisualMeta(Fe(yV,null,n,o))||{stops:[],outerColors:[]},a=o.getDataDimensionIndex(e);a>=0&&(i.dimension=a,r.push(i))}}),n.getData().setVisual("visualMeta",r)}}];function yV(n,t,e,r){for(var o=t.targetVisuals[r],i=ri.prepareVisualTypes(o),a={color:jf(n.getData(),"color")},l=0,c=i.length;l<c;l++){var h=i[l],p=o["opacity"===h?"__alphaForOpacity":h];p&&p.applyVisual(e,g,y)}return a.color;function g(b){return a[b]}function y(b,_){a[b]=_}}var xB=Z;function vV(n){var t=n&&n.visualMap;Ee(t)||(t=t?[t]:[]),xB(t,function(e){if(e){Zx(e,"splitList")&&!Zx(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var r=e.pieces;r&&Ee(r)&&xB(r,function(o){Ft(o)&&(Zx(o,"start")&&!Zx(o,"min")&&(o.min=o.start),Zx(o,"end")&&!Zx(o,"max")&&(o.max=o.end))})}})}function Zx(n,t){return n&&n.hasOwnProperty&&n.hasOwnProperty(t)}var _B=!1;function wB(n){_B||(_B=!0,n.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"}),n.registerAction(fV,gV),Z(mV,function(t){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,t)}),n.registerPreprocessor(vV))}function SB(n){n.registerComponentModel(dV),n.registerComponentView(pV),wB(n)}var bV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._pieceList=[],e}return Ce(t,n),t.prototype.optionUpdated=function(e,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],xV[this._mode].call(this,this._pieceList),this._resetSelected(e,r);var i=this.option.categories;this.resetVisual(function(a,l){"categories"===o?(a.mappingMethod="category",a.categories=jt(i)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=j(this._pieceList,function(c){return c=jt(c),"inRange"!==l&&(c.visual=null),c}))})},t.prototype.completeVisualOption=function(){var e=this.option,r={},o=ri.listVisualTypes(),i=this.isCategory();function a(l,c,h){return l&&l[c]&&l[c].hasOwnProperty(h)}Z(e.pieces,function(l){Z(o,function(c){l.hasOwnProperty(c)&&(r[c]=1)})}),Z(r,function(l,c){var h=!1;Z(this.stateList,function(p){h=h||a(e,p,c)||a(e.target,p,c)},this),!h&&Z(this.stateList,function(p){(e[p]||(e[p]={}))[c]=lB(c,"inRange"===p?"active":"inactive",i)})},this),n.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,r){var o=this.option,i=this._pieceList,a=(r?o:e).selected||{};if(o.selected=a,Z(i,function(c,h){var p=this.getSelectedMapKey(c);a.hasOwnProperty(p)||(a[p]=!0)},this),"single"===o.selectedMode){var l=!1;Z(i,function(c,h){var p=this.getSelectedMapKey(c);a[p]&&(l?a[p]=!1:l=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=jt(e)},t.prototype.getValueState=function(e){var r=ri.findPieceIndex(e,this._pieceList);return null!=r&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var r=[],o=this._pieceList;return this.eachTargetSeries(function(i){var a=[],l=i.getData();l.each(this.getDataDimensionIndex(l),function(c,h){ri.findPieceIndex(c,o)===e&&a.push(h)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},t.prototype.getRepresentValue=function(e){var r;if(this.isCategory())r=e.value;else if(null!=e.value)r=e.value;else{var o=e.interval||[];r=o[0]===-1/0&&o[1]===1/0?0:(o[0]+o[1])/2}return r},t.prototype.getVisualMeta=function(e){if(!this.isCategory()){var r=[],o=["",""],i=this,a=this._pieceList.slice();if(a.length){var l=a[0].interval[0];l!==-1/0&&a.unshift({interval:[-1/0,l]}),(l=a[a.length-1].interval[1])!==1/0&&a.push({interval:[l,1/0]})}else a.push({interval:[-1/0,1/0]});var c=-1/0;return Z(a,function(p){var g=p.interval;g&&(g[0]>c&&h([c,g[0]],"outOfRange"),h(g.slice()),c=g[1])},this),{stops:r,outerColors:o}}function h(p,g){var y=i.getRepresentValue({interval:p});g||(g=i.getValueState(y));var b=e(y,g);p[0]===-1/0?o[0]=b:p[1]===1/0?o[1]=b:r.push({value:p[0],color:b},{value:p[1],color:b})}},t.type="visualMap.piecewise",t.defaultOption=tc(tE.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(tE),xV={splitNumber:function(n){var t=this.option,e=Math.min(t.precision,20),r=this.getExtent(),o=t.splitNumber;o=Math.max(parseInt(o,10),1),t.splitNumber=o;for(var i=(r[1]-r[0])/o;+i.toFixed(e)!==i&&e<5;)e++;t.precision=e,i=+i.toFixed(e),t.minOpen&&n.push({interval:[-1/0,r[0]],close:[0,0]});for(var a=0,l=r[0];a<o;l+=i,a++)n.push({interval:[l,a===o-1?r[1]:l+i],close:[1,1]});t.maxOpen&&n.push({interval:[r[1],1/0],close:[0,0]}),d_(n),Z(n,function(h,p){h.index=p,h.text=this.formatValueText(h.interval)},this)},categories:function(n){var t=this.option;Z(t.categories,function(e){n.push({text:this.formatValueText(e,!0),value:e})},this),CB(t,n)},pieces:function(n){var t=this.option;Z(t.pieces,function(e,r){Ft(e)||(e={value:e});var o={text:"",index:r};if(null!=e.label&&(o.text=e.label),e.hasOwnProperty("value")){var i=o.value=e.value;o.interval=[i,i],o.close=[1,1]}else{for(var a=o.interval=[],l=o.close=[0,0],c=[1,0,1],h=[-1/0,1/0],p=[],g=0;g<2;g++){for(var y=[["gte","gt","min"],["lte","lt","max"]][g],b=0;b<3&&null==a[g];b++)a[g]=e[y[b]],l[g]=c[b],p[g]=2===b;null==a[g]&&(a[g]=h[g])}p[0]&&a[1]===1/0&&(l[0]=0),p[1]&&a[0]===-1/0&&(l[1]=0),a[0]===a[1]&&l[0]&&l[1]&&(o.value=a[0])}o.visual=ri.retrieveVisuals(e),n.push(o)},this),CB(t,n),d_(n),Z(n,function(e){var r=e.close;e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,[["<","\u2264"][r[1]],[">","\u2265"][r[0]]])},this)}};function CB(n,t){var e=n.inverse;("vertical"===n.orient?!e:e)&&t.reverse()}var _V=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return Ce(t,n),t.prototype.doRender=function(){var e=this.group;e.removeAll();var r=this.visualMapModel,o=r.get("textGap"),i=r.textStyleModel,a=i.getFont(),l=i.getTextColor(),c=this._getItemAlign(),h=r.itemSize,p=this._getViewData(),g=p.endsText,y=ht(r.get("showLabel",!0),!g);g&&this._renderEndsText(e,g[0],h,y,c),Z(p.viewPieceList,function(b){var _=b.piece,w=new on;w.onclick=Fe(this._onItemClick,this,_),this._enableHoverLink(w,b.indexInModelPieceList);var S=r.getRepresentValue(_);if(this._createItemSymbol(w,S,[0,0,h[0],h[1]]),y){var M=this.visualMapModel.getValueState(S);w.add(new Kn({style:{x:"right"===c?-o:h[0]+o,y:h[1]/2,text:_.text,verticalAlign:"middle",align:c,font:a,fill:l,opacity:"outOfRange"===M?.5:1}}))}e.add(w)},this),g&&this._renderEndsText(e,g[1],h,y,c),Ga(r.get("orient"),e,r.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,r){var o=this;e.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(a){var l=o.visualMapModel;l.option.hoverLink&&o.api.dispatchAction({type:a,batch:nE(l.findTargetDataIndices(r),l)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,r=e.option;if("vertical"===r.orient)return gB(e,this.api,e.itemSize);var o=r.align;return o&&"auto"!==o||(o="left"),o},t.prototype._renderEndsText=function(e,r,o,i,a){if(r){var l=new on;l.add(new Kn({style:Or(this.visualMapModel.textStyleModel,{x:i?"right"===a?o[0]:0:o[0]/2,y:o[1]/2,verticalAlign:"middle",align:i?a:"center",text:r})})),e.add(l)}},t.prototype._getViewData=function(){var e=this.visualMapModel,r=j(e.getPieceList(),function(l,c){return{piece:l,indexInModelPieceList:c}}),o=e.get("text"),i=e.get("orient"),a=e.get("inverse");return("horizontal"===i?a:!a)?r.reverse():o&&(o=o.slice().reverse()),{viewPieceList:r,endsText:o}},t.prototype._createItemSymbol=function(e,r,o){e.add(vo(this.getControllerVisual(r,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(r,"color")))},t.prototype._onItemClick=function(e){var r=this.visualMapModel,o=r.option,i=o.selectedMode;if(i){var a=jt(o.selected),l=r.getSelectedMapKey(e);"single"===i||!0===i?(a[l]=!0,Z(a,function(c,h){a[h]=h===l})):a[l]=!a[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(pB);function MB(n){n.registerComponentModel(bV),n.registerComponentView(_V),wB(n)}var wV={label:{enabled:!0},decal:{show:!1}},TB=Gn(),SV={};function CV(n,t){var e=n.getModel("aria");if(e.get("enabled")){var r=jt(wV);Ve(r.label,n.getLocaleModel().get("aria"),!1),Ve(e.option,r,!1),function(){if(e.getModel("decal").get("show")){var i=Et();n.eachSeries(function(a){if(!a.isColorBySeries()){var l=i.get(a.type);l||i.set(a.type,l={}),TB(a).scope=l}}),n.eachRawSeries(function(a){if(!n.isSeriesFiltered(a))if(Se(a.enableAriaDecal))a.enableAriaDecal();else{var l=a.getData();if(a.isColorBySeries()){var c=H0(a.ecModel,a.name,SV,n.getSeriesCount()),h=l.getVisual("decal");l.setVisual("decal",_(h,c))}else{var p=a.getRawData(),g={},y=TB(a).scope;l.each(function(w){var S=l.getRawIndex(w);g[S]=w});var b=p.count();p.each(function(w){var S=g[w],M=p.getName(w)||w+"",A=H0(a.ecModel,M,y,b),I=l.getItemVisual(S,"decal");l.setItemVisual(S,"decal",_(I,A))})}}function _(w,S){var M=w?De(De({},S),w):S;return M.dirty=!0,M}})}}(),function(){var A,i=t.getZr().dom;if(i){var a=n.getLocaleModel().get("aria"),l=e.getModel("label");if(l.option=Pe(l.option,a),l.get("enabled")){if(l.get("description"))return void i.setAttribute("aria-label",l.get("description"));var c,h=n.getSeriesCount(),p=l.get(["data","maxCount"])||10,g=l.get(["series","maxCount"])||10,y=Math.min(h,g);if(!(h<1)){var b=((A=n.get("title"))&&A.length&&(A=A[0]),A&&A.text);c=b?o(l.get(["general","withTitle"]),{title:b}):l.get(["general","withoutTitle"]);var _=[];c+=o(l.get(h>1?["series","multiple","prefix"]:["series","single","prefix"]),{seriesCount:h}),n.eachSeries(function(A,I){if(I<y){var N=void 0,L=A.get("name")?"withName":"withoutName";N=o(N=l.get(h>1?["series","multiple",L]:["series","single",L]),{seriesId:A.seriesIndex,seriesName:A.get("name"),seriesType:(ne=A.subType,oe=n.getLocaleModel().get(["series","typeNames"]),oe[ne]||oe.chart)});var R=A.getData();R.count()>p?N+=o(l.get(["data","partialData"]),{displayCnt:p}):N+=l.get(["data","allData"]);for(var O=l.get(["data","separator","middle"]),B=l.get(["data","separator","end"]),G=[],W=0;W<R.count();W++)if(W<p){var Y=R.getName(W),X=R.getValues(W),J=l.get(["data",Y?"withName":"withoutName"]);G.push(o(J,{name:Y,value:X.join(O)}))}N+=G.join(O)+B,_.push(N)}var ne,oe});var w=l.getModel(["series","multiple","separator"]),S=w.get("middle"),M=w.get("end");c+=_.join(S)+M,i.setAttribute("aria-label",c)}}}}()}function o(i,a){if(!bt(i))return i;var l=i;return Z(a,function(c,h){l=l.replace(new RegExp("\\{\\s*"+h+"\\s*\\}","g"),c)}),l}}function MV(n){if(n&&n.aria){var t=n.aria;null!=t.show&&(t.enabled=t.show),t.label=t.label||{},Z(["description","general","series","data"],function(e){null!=t[e]&&(t.label[e]=t[e])})}}var AB={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},TV=function(){function n(t){null==(this._condVal=bt(t)?new RegExp(t):st(t)?t:null)&&En("")}return n.prototype.evaluate=function(t){var e=typeof t;return bt(e)?this._condVal.test(t):!!dt(e)&&this._condVal.test(t+"")},n}(),AV=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),kV=function(){function n(){}return n.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},n}(),IV=function(){function n(){}return n.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},n}(),DV=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),NV=function(){function n(){}return n.prototype.evaluate=function(){for(var t=!!this.valueParser,e=(0,this.getValue)(this.valueGetterParam),r=t?this.valueParser(e):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?r:e))return!1;return!0},n}();function rO(n,t){if(!0===n||!1===n){var e=new AV;return e.value=n,e}return IB(n)||En(""),n.and?kB("and",n,t):n.or?kB("or",n,t):n.not?function(o,i){var a=o.not;IB(a)||En("");var c=new DV;return c.child=rO(a,i),c.child||En(""),c}(n,t):function(o,i){for(var l=i.prepareGetValue(o),c=[],h=vn(o),p=o.parser,g=p?Vm(p):null,y=0;y<h.length;y++){var b=h[y];if("parser"!==b&&!i.valueGetterAttrMap.get(b)){var _=Lt(AB,b)?AB[b]:b,w=o[b],S=g?g(w):w,M=Fw(_,S)||"reg"===_&&new TV(S);M||En(""),c.push(M)}}c.length||En("");var A=new NV;return A.valueGetterParam=l,A.valueParser=g,A.getValue=i.getValue,A.subCondList=c,A}(n,t)}function kB(n,t,e){var r=t[n];Ee(r)||En(""),r.length||En("");var i="and"===n?new kV:new IV;return i.children=j(r,function(a){return rO(a,e)}),i.children.length||En(""),i}function IB(n){return Ft(n)&&!Mn(n)}var EV=function(){function n(t,e){this._cond=rO(t,e)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}(),LV={type:"echarts:filter",transform:function(n){for(var t,e,r,o=n.upstream,i=(e=n.config,r={valueGetterAttrMap:Et({dimension:!0}),prepareGetValue:function(h){var g=h.dimension;Lt(h,"dimension")||En("");var y=o.getDimensionInfo(g);return y||En(""),{dimIdx:y.index}},getValue:function(h){return o.retrieveValueFromItem(t,h.dimIdx)}},new EV(e,r)),a=[],l=0,c=o.count();l<c;l++)t=o.getRawDataItem(l),i.evaluate()&&a.push(t);return{data:a}}},RV={type:"echarts:sort",transform:function(n){var t=n.upstream,r="",o=Dr(n.config);o.length||En(r);var i=[];Z(o,function(p){var g=p.dimension,y=p.order,b=p.parser,_=p.incomparable;null==g&&En(r),"asc"!==y&&"desc"!==y&&En(r),_&&"min"!==_&&"max"!==_&&En(""),"asc"!==y&&"desc"!==y&&En("");var M=t.getDimensionInfo(g);M||En(r);var A=b?Vm(b):null;b&&!A&&En(r),i.push({dimIdx:M.index,parser:A,comparator:new Ha(y,_)})});var a=t.sourceFormat;a!==Di&&a!==vs&&En(r);for(var l=[],c=0,h=t.count();c<h;c++)l.push(t.getRawDataItem(c));return l.sort(function(p,g){for(var y=0;y<i.length;y++){var b=i[y],_=t.retrieveValueFromItem(p,b.dimIdx),w=t.retrieveValueFromItem(g,b.dimIdx);b.parser&&(_=b.parser(_),w=b.parser(w));var S=b.comparator.evaluate(_,w);if(0!==S)return S}return 0}),{data:l}}},OV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="dataset",e}return Ce(t,n),t.prototype.init=function(e,r,o){n.prototype.init.call(this,e,r,o),this._sourceManager=new vk(this),qw(this)},t.prototype.mergeOption=function(e,r){n.prototype.mergeOption.call(this,e,r),qw(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:au},t}(wn),PV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="dataset",e}return Ce(t,n),t.type="dataset",t}(Wr),Ud=gs.CMD;function $x(n,t){return Math.abs(n-t)<1e-5}function oO(n){var t,e,r,o,i,X,J,ne,oe,ie,se,le,pe,me,ve,He,nt,Me,ut,pt,St,Ze,a=n.data,l=n.len(),c=[],h=0,p=0,g=0,y=0;function b(X,J){t&&t.length>2&&c.push(t),t=[X,J]}function _(X,J,ne,oe){$x(X,ne)&&$x(J,oe)||t.push(X,J,ne,oe,ne,oe)}for(var S=0;S<l;){var M=a[S++],A=1===S;switch(A&&(g=h=a[S],y=p=a[S+1],M!==Ud.L&&M!==Ud.C&&M!==Ud.Q||(t=[g,y])),M){case Ud.M:h=g=a[S++],p=y=a[S++],b(g,y);break;case Ud.L:_(h,p,e=a[S++],r=a[S++]),h=e,p=r;break;case Ud.C:t.push(a[S++],a[S++],a[S++],a[S++],h=a[S++],p=a[S++]);break;case Ud.Q:e=a[S++],r=a[S++],o=a[S++],i=a[S++],t.push(h+2/3*(e-h),p+2/3*(r-p),o+2/3*(e-o),i+2/3*(r-i),o,i),h=o,p=i;break;case Ud.A:var I=a[S++],N=a[S++],L=a[S++],R=a[S++],O=a[S++],B=a[S++]+O;S+=1;var G=!a[S++];e=Math.cos(O)*L+I,r=Math.sin(O)*R+N,A?b(g=e,y=r):_(h,p,e,r),h=Math.cos(B)*L+I,p=Math.sin(B)*R+N;for(var W=(G?-1:1)*Math.PI/2,Y=O;G?Y>B:Y<B;Y+=W)X=Y,J=G?Math.max(Y+W,B):Math.min(Y+W,B),ne=I,oe=N,ie=L,se=R,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,le=Math.abs(J-X),pe=4*Math.tan(le/4)/3,me=J<X?-1:1,ve=Math.cos(X),He=Math.sin(X),nt=Math.cos(J),Me=Math.sin(J),t.push(ve*ie+ne-(St=ie*pe*me)*He,He*se+oe+(Ze=se*pe*me)*ve,(ut=nt*ie+ne)+St*Me,(pt=Me*se+oe)-Ze*nt,ut,pt);break;case Ud.R:g=h=a[S++],y=p=a[S++],e=g+a[S++],r=y+a[S++],b(e,y),_(e,y,e,r),_(e,r,g,r),_(g,r,g,y),_(g,y,e,y);break;case Ud.Z:t&&_(h,p,g,y),h=g,p=y}}return t&&t.length>2&&c.push(t),c}function iO(n,t,e,r,o,i,a,l,c,h){if($x(n,e)&&$x(t,r)&&$x(o,a)&&$x(i,l))c.push(a,l);else{var p=2/h,g=p*p,y=a-n,b=l-t,_=Math.sqrt(y*y+b*b);y/=_,b/=_;var w=e-n,S=r-t,M=o-a,A=i-l,I=w*w+S*S,N=M*M+A*A;if(I<g&&N<g)c.push(a,l);else{var L=y*w+b*S,R=-y*M-b*A;if(I-L*L<g&&L>=0&&N-R*R<g&&R>=0)c.push(a,l);else{var O=[],B=[];sa(n,e,o,a,.5,O),sa(t,r,i,l,.5,B),iO(O[0],B[0],O[1],B[1],O[2],B[2],O[3],B[3],c,h),iO(O[4],B[4],O[5],B[5],O[6],B[6],O[7],B[7],c,h)}}}}function DB(n,t,e){var i=Math.abs(n[t]/n[1-t]),a=Math.ceil(Math.sqrt(i*e)),l=Math.floor(e/a);0===l&&(l=1,a=e);for(var c=[],h=0;h<a;h++)c.push(l);var p=e-a*l;if(p>0)for(h=0;h<p;h++)c[h%a]+=1;return c}function NB(n,t,e){for(var r=n.r0,o=n.r,i=n.startAngle,l=Math.abs(n.endAngle-i),c=l*o,h=o-r,p=c>Math.abs(h),g=DB([c,h],p?0:1,t),y=(p?l:h)/g.length,b=0;b<g.length;b++)for(var _=(p?h:l)/g[b],w=0;w<g[b];w++){var S={};p?(S.startAngle=i+y*b,S.endAngle=i+y*(b+1),S.r0=r+_*w,S.r=r+_*(w+1)):(S.startAngle=i+_*w,S.endAngle=i+_*(w+1),S.r0=r+y*b,S.r=r+y*(b+1)),S.clockwise=n.clockwise,S.cx=n.cx,S.cy=n.cy,e.push(S)}}function EB(n,t,e,r){return n*r-e*t}function BV(n,t,e,r,o,i,a,l){var c=e-n,h=r-t,p=a-o,g=l-i,y=EB(p,g,c,h);if(Math.abs(y)<1e-6)return null;var b=EB(n-o,t-i,p,g)/y;return b<0||b>1?null:new pn(b*c+n,b*h+t)}function zV(n,t,e){var r=new pn;pn.sub(r,e,t),r.normalize();var o=new pn;return pn.sub(o,n,t),o.dot(r)}function Kx(n,t){var e=n[n.length-1];e&&e[0]===t[0]&&e[1]===t[1]||n.push(t)}function LB(n){var t=n.points,e=[],r=[];ql(t,e,r);var o=new Kt(e[0],e[1],r[0]-e[0],r[1]-e[1]),i=o.width,a=o.height,l=o.x,c=o.y,h=new pn,p=new pn;return i>a?(h.x=p.x=l+i/2,h.y=c,p.y=c+a):(h.y=p.y=c+a/2,h.x=l,p.x=l+i),function(g,y,b){for(var _=g.length,w=[],S=0;S<_;S++){var M=g[S],A=g[(S+1)%_],I=BV(M[0],M[1],A[0],A[1],y.x,y.y,b.x,b.y);I&&w.push({projPt:zV(I,y,b),pt:I,idx:S})}if(w.length<2)return[{points:g},{points:g}];w.sort(function(Y,X){return Y.projPt-X.projPt});var N=w[0],L=w[w.length-1];if(L.idx<N.idx){var R=N;N=L,L=R}var O=[N.pt.x,N.pt.y],B=[L.pt.x,L.pt.y],G=[O],W=[B];for(S=N.idx+1;S<=L.idx;S++)Kx(G,g[S].slice());for(Kx(G,B),Kx(G,O),S=L.idx+1;S<=N.idx+_;S++)Kx(W,g[S%_].slice());return Kx(W,O),Kx(W,B),[{points:G},{points:W}]}(t,h,p)}function rE(n,t,e,r){if(1===e)r.push(t);else{var o=Math.floor(e/2),i=n(t);rE(n,i[0],o,r),rE(n,i[1],e-o,r)}return r}function VV(n,t){t.setStyle(n.style),t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel}function GV(n,t){var e=n.length,r=t.length;if(e===r)return[n,t];for(var o=[],i=[],a=e<r?n:t,l=Math.min(e,r),c=Math.abs(r-e)/6,p=Math.ceil(c/((l-2)/6))+1,g=[a[0],a[1]],y=c,b=2;b<l;){var _=a[b-2],w=a[b-1],S=a[b++],M=a[b++],A=a[b++],I=a[b++],N=a[b++],L=a[b++];if(y<=0)g.push(S,M,A,I,N,L);else{for(var R=Math.min(y,p-1)+1,O=1;O<=R;O++){var B=O/R;sa(_,S,A,N,B,o),sa(w,M,I,L,B,i),g.push(o[1],i[1],o[2],i[2],_=o[3],w=i[3]),S=o[5],M=i[5],A=o[6],I=i[6]}y-=R-1}}return a===n?[g,t]:[n,g]}function RB(n,t){for(var e=n.length,r=n[e-2],o=n[e-1],i=[],a=0;a<t.length;)i[a++]=r,i[a++]=o;return i}function OB(n){for(var t=0,e=0,r=0,o=n.length,i=0,a=o-2;i<o;a=i,i+=2){var l=n[a],c=n[a+1],h=n[i],p=n[i+1],g=l*p-h*c;t+=g,e+=(l+h)*g,r+=(c+p)*g}return 0===t?[n[0]||0,n[1]||0]:[e/t/3,r/t/3,t]}function HV(n,t,e,r){for(var o=(n.length-2)/6,i=1/0,a=0,l=n.length,c=l-2,h=0;h<o;h++){for(var p=6*h,g=0,y=0;y<l;y+=2){var b=0===y?p:(p+y-2)%c+2,S=t[y]-r[0]-(n[b]-e[0]),M=t[y+1]-r[1]-(n[b+1]-e[1]);g+=S*S+M*M}g<i&&(i=g,a=h)}return a}function WV(n){for(var t=[],e=n.length,r=0;r<e;r+=2)t[r]=n[e-r-2],t[r+1]=n[e-r-1];return t}function oE(n){return n.__isCombineMorphing}var PB="__mOriginal_";function iE(n,t,e){var r=PB+t,o=n[r]||n[t];n[r]||(n[r]=n[t]);var i=e.replace,a=e.after,l=e.before;n[t]=function(){var c,h=arguments;return l&&l.apply(this,h),c=i?i.apply(this,h):o.apply(this,h),a&&a.apply(this,h),c}}function nA(n,t){var e=PB+t;n[e]&&(n[t]=n[e],n[e]=null)}function BB(n,t){for(var e=0;e<n.length;e++)for(var r=n[e],o=0;o<r.length;){var i=r[o],a=r[o+1];r[o++]=t[0]*i+t[2]*a+t[4],r[o++]=t[1]*i+t[3]*a+t[5]}}function zB(n,t){var e=n.getUpdatedPathProxy(),r=t.getUpdatedPathProxy(),o=function(g,y){for(var b,_,w,S=[],M=[],A=0;A<Math.max(g.length,y.length);A++){var I=g[A],N=y[A],L=void 0,R=void 0;I?N?(_=L=(b=GV(I,N))[0],w=R=b[1]):(R=RB(w||I,I),L=I):(L=RB(_||N,N),R=N),S.push(L),M.push(R)}return[S,M]}(oO(e),oO(r)),i=o[0],a=o[1],l=n.getComputedTransform(),c=t.getComputedTransform();l&&BB(i,l),c&&BB(a,c),iE(t,"updateTransform",{replace:function(){this.transform=null}}),t.transform=null;var h=function(g,y,b,_){for(var w,S=[],M=0;M<g.length;M++){var A=g[M],I=y[M],N=OB(A),L=OB(I);null==w&&(w=N[2]<0!=L[2]<0);var R=[],O=[],B=0,G=1/0,W=[],Y=A.length;w&&(A=WV(A));for(var X=6*HV(A,I,N,L),J=Y-2,ne=0;ne<J;ne+=2){var oe=(X+ne)%J+2;R[ne+2]=A[oe]-N[0],R[ne+3]=A[oe+1]-N[1]}R[0]=A[X]-N[0],R[1]=A[X+1]-N[1];for(var ie=_/10,se=-_/2;se<=_/2;se+=ie){var le=Math.sin(se),pe=Math.cos(se),me=0;for(ne=0;ne<A.length;ne+=2){var ve=R[ne],He=R[ne+1],nt=I[ne]-L[0],Me=I[ne+1]-L[1],je=nt*pe-Me*le,tt=nt*le+Me*pe;W[ne]=je,W[ne+1]=tt;var ut=je-ve,pt=tt-He;me+=ut*ut+pt*pt}if(me<G){G=me,B=se;for(var St=0;St<W.length;St++)O[St]=W[St]}}S.push({from:R,to:O,fromCp:N,toCp:L,rotation:-B})}return S}(i,a,0,Math.PI),p=[];iE(t,"buildPath",{replace:function(g){for(var y=t.__morphT,b=1-y,_=[],w=0;w<h.length;w++){var S=h[w],M=S.from,A=S.to,I=S.rotation*y,N=S.fromCp,L=S.toCp,R=Math.sin(I),O=Math.cos(I);ft(_,N,L,y);for(var B=0;B<M.length;B+=2){var Y=M[B]*b+(oe=A[B])*y,X=M[B+1]*b+(ie=A[B+1])*y;p[B]=Y*O-X*R+_[0],p[B+1]=Y*R+X*O+_[1]}var J=p[0],ne=p[1];for(g.moveTo(J,ne),B=2;B<M.length;){var oe=p[B++],ie=p[B++],se=p[B++],le=p[B++],pe=p[B++],me=p[B++];J===oe&&ne===ie&&se===pe&&le===me?g.lineTo(pe,me):g.bezierCurveTo(oe,ie,se,le,pe,me),J=pe,ne=me}}}})}function aO(n,t,e){if(!n||!t)return t;var r=e.done,o=e.during;return zB(n,t),t.__morphT=0,t.animateTo({__morphT:1},Pe({during:function(i){t.dirtyShape(),o&&o(i)},done:function(){nA(t,"buildPath"),nA(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape(),r&&r()}},e)),t}function UV(n,t,e,r,o,i){n=o===e?0:Math.round(32767*(n-e)/(o-e)),t=i===r?0:Math.round(32767*(t-r)/(i-r));for(var a,l=0,c=32768;c>0;c/=2){var h=0,p=0;(n&c)>0&&(h=1),(t&c)>0&&(p=1),l+=c*c*(3*h^p),0===p&&(1===h&&(n=c-1-n,t=c-1-t),a=n,n=t,t=a)}return l}function aE(n){var t=1/0,e=1/0,r=-1/0,o=-1/0,i=j(n,function(a){var l=a.getBoundingRect(),c=a.getComputedTransform(),h=l.x+l.width/2+(c?c[4]:0),p=l.y+l.height/2+(c?c[5]:0);return t=Math.min(h,t),e=Math.min(p,e),r=Math.max(h,r),o=Math.max(p,o),[h,p]});return j(i,function(a,l){return{cp:a,z:UV(a[0],a[1],t,e,r,o),path:n[l]}}).sort(function(a,l){return a.z-l.z}).map(function(a){return a.path})}function VB(n){return function FV(n,t){var e,r=[],o=n.shape;switch(n.type){case"rect":(function(M,A,I){for(var N=M.width,L=M.height,R=N>L,O=DB([N,L],R?0:1,A),B=R?"width":"height",G=R?"height":"width",W=R?"x":"y",Y=R?"y":"x",X=M[B]/O.length,J=0;J<O.length;J++)for(var ne=M[G]/O[J],oe=0;oe<O[J];oe++){var ie={};ie[W]=J*X,ie[Y]=oe*ne,ie[B]=X,ie[G]=ne,ie.x+=M.x,ie.y+=M.y,I.push(ie)}})(o,t,r),e=$n;break;case"sector":NB(o,t,r),e=Ti;break;case"circle":NB({r0:0,r:o.r,startAngle:0,endAngle:2*Math.PI,cx:o.cx,cy:o.cy},t,r),e=Ti;break;default:var i=n.getComputedTransform(),a=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,l=j(function(M,A){var I=oO(M),N=[];A=A||1;for(var L=0;L<I.length;L++){var R=I[L],O=[],B=R[0],G=R[1];O.push(B,G);for(var W=2;W<R.length;){var Y=R[W++],X=R[W++],J=R[W++],ne=R[W++],oe=R[W++],ie=R[W++];iO(B,G,Y,X,J,ne,oe,ie,O,A),B=oe,G=ie}N.push(O)}return N}(n.getUpdatedPathProxy(),a),function(M){return function(A){for(var I=[],N=0;N<A.length;)I.push([A[N++],A[N++]]);return I}(M)}),c=l.length;if(0===c)rE(LB,{points:l[0]},t,r);else if(c===t)for(var h=0;h<c;h++)r.push({points:l[h]});else{var p=0,g=j(l,function(M){var A=[],I=[];ql(M,A,I);var N=(I[1]-A[1])*(I[0]-A[0]);return p+=N,{poly:M,area:N}});g.sort(function(M,A){return A.area-M.area});var y=t;for(h=0;h<c;h++){var b=g[h];if(y<=0)break;var _=h===c-1?y:Math.ceil(b.area/p*t);_<0||(rE(LB,{points:b.poly},_,r),y-=_)}}e=Zi}if(!e)return function(M,A){for(var I=[],N=0;N<A;N++)I.push(c0(M));return I}(n,t);var w=[];for(h=0;h<r.length;h++){var S=new e;S.setShape(r[h]),VV(n,S),w.push(S)}return w}(n.path,n.count)}function FB(n){return Ee(n[0])}function GB(n,t){for(var e=[],r=n.length,o=0;o<r;o++)e.push({one:n[o],many:[]});for(o=0;o<t.length;o++){var i=t[o].length,a=void 0;for(a=0;a<i;a++)e[a%r].many.push(t[o][a])}var l=0;for(o=r-1;o>=0;o--)if(!e[o].many.length){var c=e[l].many;if(c.length<=1){if(!l)return e;l=0}i=c.length;var h=Math.ceil(i/2);e[o].many=c.slice(h,i),e[l].many=c.slice(0,h),l++}return e}var jV={clone:function(n){for(var t=[],e=1-Math.pow(1-n.path.style.opacity,1/n.count),r=0;r<n.count;r++){var o=c0(n.path);o.setStyle("opacity",e),t.push(o)}return t},split:null};function sO(n,t,e,r,o,i){if(n.length&&t.length){var a=mf("update",r,o);if(a&&a.duration>0){var l,c,h=r.getModel("universalTransition").get("delay"),p=Object.assign({setToFinal:!0},a);FB(n)&&(l=n,c=t),FB(t)&&(l=t,c=n);for(var g=l?l===n:n.length>t.length,y=l?GB(c,l):GB(g?t:n,[g?n:t]),b=0,_=0;_<y.length;_++)b+=y[_].many.length;var w=0;for(_=0;_<y.length;_++)S(y[_],g,w,b),w+=y[_].many.length}}function S(M,A,I,N,L){var R=M.many,O=M.one;if(1!==R.length||L)for(var B=Pe({dividePath:jV[e],individualDelay:h&&function(se,le,pe,me){return h(se+I,N)}},p),G=A?function(se,le,pe){var me=[];!function Vn(nr){for(var wr=0;wr<nr.length;wr++){var oo=nr[wr];oE(oo)?Vn(oo.childrenRef()):oo instanceof Yn&&me.push(oo)}}(se);var ve=me.length;if(!ve)return{fromIndividuals:[],toIndividuals:[],count:0};var He=(pe.dividePath||VB)({path:le,count:ve});if(He.length!==ve)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};me=aE(me),He=aE(He);for(var nt=pe.done,Me=pe.during,je=pe.individualDelay,tt=new dr,ut=0;ut<ve;ut++){var pt=me[ut],St=He[ut];St.parent=le,St.copyTransform(tt),je||zB(pt,St)}function Ze(Vn){for(var nr=0;nr<He.length;nr++)He[nr].addSelfToZr(Vn)}function yt(){le.__isCombineMorphing=!1,le.__morphT=-1,le.childrenRef=null,nA(le,"addSelfToZr"),nA(le,"removeSelfFromZr")}le.__isCombineMorphing=!0,le.childrenRef=function(){return He},iE(le,"addSelfToZr",{after:function(Vn){Ze(Vn)}}),iE(le,"removeSelfFromZr",{after:function(Vn){for(var nr=0;nr<He.length;nr++)He[nr].removeSelfFromZr(Vn)}});var Vt=He.length;if(je){var mn=Vt,Dn=function(){0==--mn&&(yt(),nt&&nt())};for(ut=0;ut<Vt;ut++){var Tr=je?Pe({delay:(pe.delay||0)+je(ut,Vt,me[ut],He[ut]),done:Dn},pe):pe;aO(me[ut],He[ut],Tr)}}else le.__morphT=0,le.animateTo({__morphT:1},Pe({during:function(Vn){for(var nr=0;nr<Vt;nr++){var wr=He[nr];wr.__morphT=le.__morphT,wr.dirtyShape()}Me&&Me(Vn)},done:function(){yt();for(var Vn=0;Vn<se.length;Vn++)nA(se[Vn],"updateTransform");nt&&nt()}},pe));return le.__zr&&Ze(le.__zr),{fromIndividuals:me,toIndividuals:He,count:Vt}}(R,O,B):function(se,le,pe){var me=le.length,ve=[],He=pe.dividePath||VB;if(oE(se)){!function St(Ze){for(var yt=0;yt<Ze.length;yt++){var Vt=Ze[yt];oE(Vt)?St(Vt.childrenRef()):Vt instanceof Yn&&ve.push(Vt)}}(se.childrenRef());var nt=ve.length;if(nt<me)for(var Me=0,je=nt;je<me;je++)ve.push(c0(ve[Me++%nt]));ve.length=me}else{ve=He({path:se,count:me});var tt=se.getComputedTransform();for(je=0;je<ve.length;je++)ve[je].setLocalTransform(tt);if(ve.length!==me)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}ve=aE(ve),le=aE(le);var ut=pe.individualDelay;for(je=0;je<me;je++){var pt=ut?Pe({delay:(pe.delay||0)+ut(je,me,ve[je],le[je])},pe):pe;aO(ve[je],le[je],pt)}return{fromIndividuals:ve,toIndividuals:le,count:le.length}}(O,R,B),W=G.fromIndividuals,Y=G.toIndividuals,X=W.length,J=0;J<X;J++)ne=h?Pe({delay:h(J,X)},p):p,i(W[J],Y[J],A?R[J]:M.one,A?M.one:R[J],ne);else{var ne,oe=A?R[0]:O,ie=A?O:R[0];oE(oe)?S({many:[oe],one:ie},!0,I,N,!0):(aO(oe,ie,ne=h?Pe({delay:h(I,N)},p):p),i(oe,ie,oe,ie,ne))}}}function xv(n){if(!n)return[];if(Ee(n)){for(var t=[],e=0;e<n.length;e++)t.push(xv(n[e]));return t}var r=[];return n.traverse(function(o){o instanceof Yn&&!o.disableMorphing&&!o.invisible&&!o.ignore&&r.push(o)}),r}var YV=Gn();function HB(n,t,e,r){var o=function(c,h){for(var p=c.dimensions,g=0;g<p.length;g++){var y=c.getDimensionInfo(p[g]);if(y&&0===y.otherDims[h])return p[g]}}(n,r?"itemChildGroupId":"itemGroupId");if(o)return function(c,h,p){var g=c.getDimensionInfo(p),y=g&&g.ordinalMeta;if(g){var b=c.get(g.name,h);return y&&y.categories[b]||b+""}}(n,t,o);var a=n.getRawDataItem(t),l=r?"childGroupId":"groupId";return a&&a[l]?a[l]+"":r?void 0:e||n.getId(t)}function WB(n){var t=[];return Z(n,function(e){var r=e.data,o=e.dataGroupId;if(!(r.count()>1e4))for(var i=r.getIndices(),a=0;a<i.length;a++)t.push({data:r,groupId:HB(r,a,o,!1),childGroupId:HB(r,a,o,!0),divide:e.divide,dataIndex:a})}),t}function lO(n,t,e){n.traverse(function(r){r instanceof Yn&&to(r,{style:{opacity:0}},t,{dataIndex:e,isFrom:!0})})}function uO(n){if(n.parent){var t=n.getComputedTransform();n.setLocalTransform(t),n.parent.remove(n)}}function Jx(n){n.stopAnimation(),n.isGroup&&n.traverse(function(t){t.stopAnimation()})}function UB(n,t,e){var r=WB(n),o=WB(t);function i(I,N,L,R,O){(L||I)&&N.animateFrom({style:L&&L!==I?De(De({},L.style),I.style):I.style},O)}var a=!1,l=0,c=Et(),h=Et();r.forEach(function(I){I.groupId&&c.set(I.groupId,!0),I.childGroupId&&h.set(I.childGroupId,!0)});for(var p=0;p<o.length;p++){if(h.get(o[p].groupId)){l=1;break}var y=o[p].childGroupId;if(y&&c.get(y)){l=2;break}}function b(I,N){return function(L){return N?L.data.getId(L.dataIndex):I?1===l?L.childGroupId:L.groupId:2===l?L.childGroupId:L.groupId}}var _=function(I,N){var L=I.length;if(L!==N.length)return!1;for(var R=0;R<L;R++){var O=I[R],B=N[R];if(O.data.getId(O.dataIndex)!==B.data.getId(B.dataIndex))return!1}return!0}(r,o),w={};if(!_)for(p=0;p<o.length;p++){var S=o[p],M=S.data.getItemGraphicEl(S.dataIndex);M&&(w[M.id]=!0)}function A(I,N){var L=r[N],R=o[I],O=R.data.hostModel,B=L.data.getItemGraphicEl(L.dataIndex),G=R.data.getItemGraphicEl(R.dataIndex);B!==G?B&&w[B.id]||G&&(Jx(G),B?(Jx(B),uO(B),a=!0,sO(xv(B),xv(G),R.divide,O,I,i)):lO(G,O,I)):G&&function XV(n,t,e){var r=mf("update",e,t);r&&n.traverse(function(o){if(o instanceof hs){var i=UA(o).oldStyle;i&&o.animateFrom({style:i},r)}})}(G,R.dataIndex,O)}new Js(r,o,b(!0,_),b(!1,_),null,"multiple").update(A).updateManyToOne(function(I,N){var L=o[I],R=L.data,O=R.hostModel,B=R.getItemGraphicEl(L.dataIndex),G=Xn(j(N,function(W){return r[W].data.getItemGraphicEl(r[W].dataIndex)}),function(W){return W&&W!==B&&!w[W.id]});B&&(Jx(B),G.length?(Z(G,function(W){Jx(W),uO(W)}),a=!0,sO(xv(G),xv(B),L.divide,O,I,i)):lO(B,O,L.dataIndex))}).updateOneToMany(function(I,N){var L=r[N],R=L.data.getItemGraphicEl(L.dataIndex);if(!R||!w[R.id]){var O=Xn(j(I,function(G){return o[G].data.getItemGraphicEl(o[G].dataIndex)}),function(G){return G&&G!==R}),B=o[I[0]].data.hostModel;O.length&&(Z(O,function(G){return Jx(G)}),R?(Jx(R),uO(R),a=!0,sO(xv(R),xv(O),L.divide,B,I[0],i)):Z(O,function(G){return lO(G,B,I[0])}))}}).updateManyToMany(function(I,N){new Js(N,I,function(L){return r[L].data.getId(r[L].dataIndex)},function(L){return o[L].data.getId(o[L].dataIndex)}).update(function(L,R){A(I[L],N[R])}).execute()}).execute(),a&&Z(t,function(I){var N=I.data.hostModel,L=N&&e.getViewOfSeriesModel(N),R=mf("update",N,0);L&&N.isAnimationEnabled()&&R&&R.duration>0&&L.group.traverse(function(O){O instanceof Yn&&!O.animators.length&&O.animateFrom({style:{opacity:0}},R)})})}function jB(n){return n.getModel("universalTransition").get("seriesKey")||n.id}function YB(n){return Ee(n)?n.sort().join(","):n}function Pg(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function XB(n,t){for(var e=0;e<n.length;e++)if(null!=t.seriesIndex&&t.seriesIndex===n[e].seriesIndex||null!=t.seriesId&&t.seriesId===n[e].id)return e}Rn([function(n){n.registerPainter("canvas",tD)}]),Rn([function(n){n.registerPainter("svg",cg)}]),Rn([function(n){n.registerChartView(dD),n.registerSeriesModel(nD),n.registerLayout(hg("line",!0)),n.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),r=t.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",r)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,hD("line"))},function(n){n.registerChartView(gD),n.registerSeriesModel(pD),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,_t(QS,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,gy("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,hD("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){e.eachComponent({mainType:t.componentType||"series",query:t},function(o){t.sortInfo&&o.axis.setCategorySortInfo(t.sortInfo)})})},function(n){n.registerChartView(dL),n.registerSeriesModel(JC),Wa("pie",n.registerAction),n.registerLayout(_t(wD,"pie")),n.registerProcessor(fg("pie")),n.registerProcessor({seriesType:"pie",reset:function(e,r){var o=e.getData();o.filterSelf(function(i){var a=o.mapDimension("value"),l=o.get(a,i);return!(dt(l)&&!isNaN(l)&&l<0)})}})},function(n){Rn(hM),n.registerSeriesModel(QC),n.registerChartView(kD),n.registerLayout(hg("scatter"))},function(n){Rn(YD),n.registerChartView(vL),n.registerSeriesModel(UD),n.registerLayout(HD),n.registerProcessor(fg("radar")),n.registerPreprocessor(WD)},function(n){Rn(RM),n.registerChartView(CL),n.registerSeriesModel(ML),n.registerLayout(AL),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,TL),Wa("map",n.registerAction)},function(n){n.registerChartView(PM),n.registerSeriesModel(EL),n.registerLayout(Jb),n.registerVisual(LL),function(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,r){r.eachComponent({mainType:"series",subType:"tree",query:e},function(o){var i=e.dataIndex,a=o.getData().tree.getNodeByDataIndex(i);a.isExpand=!a.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,r,o){r.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var a=Xb(i.coordinateSystem,e,void 0,o);i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom)})})}(n)},function(n){n.registerSeriesModel(RL),n.registerChartView(k2),n.registerVisual(D2),n.registerLayout(BL),function(t){for(var e=0;e<$y.length;e++)t.registerAction({type:$y[e],update:"updateView"},zr);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,o){o.eachComponent({mainType:"series",subType:"treemap",query:r},function(i,a){var l=gi(r,["treemapZoomToNode","treemapRootToNode"],i);if(l){var c=i.getViewRoot();c&&(r.direction=Kb(c,l.node)?"rollUp":"drillDown"),i.resetViewRoot(l.node)}})})}(n)},function(n){n.registerChartView(q2),n.registerSeriesModel(K2),n.registerProcessor(P2),n.registerVisual(B2),n.registerVisual(eT),n.registerLayout(Ed),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,G2),n.registerLayout(H2),n.registerCoordinateSystem("graphView",{dimensions:Hy.dimensions,create:zL}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},zr),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},zr),n.registerAction(J2,function(t,e,r){e.eachComponent({mainType:"series",query:t},function(o){var i=Xb(o.coordinateSystem,t,void 0,r);o.setCenter&&o.setCenter(i.center),o.setZoom&&o.setZoom(i.zoom)})})},function(n){n.registerChartView(FL),n.registerSeriesModel(GL)},function(n){n.registerChartView(eN),n.registerSeriesModel(tN),n.registerLayout(Dg),n.registerProcessor(fg("funnel"))},function(n){Rn(wN),n.registerChartView(gx),n.registerSeriesModel(bx),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,vT)},function(n){n.registerChartView(PT),n.registerSeriesModel(yp),n.registerLayout(Ox),n.registerVisual(JL),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(r){r.setNodePosition(t.dataIndex,[t.localX,t.localY])})})},function(n){n.registerSeriesModel(TN),n.registerChartView(AN),n.registerLayout(zx),n.registerTransform(Vx)},function(n){n.registerChartView(na),n.registerSeriesModel(bp),n.registerPreprocessor(tR),n.registerVisual(u),n.registerLayout(d)},function(n){n.registerChartView(x),n.registerSeriesModel(C),n.registerLayout(hg("effectScatter"))},function(n){n.registerChartView(H),n.registerSeriesModel(K),n.registerLayout(z),n.registerVisual(re)},function(n){n.registerChartView(de),n.registerSeriesModel(_e)},function(n){n.registerChartView(we),n.registerSeriesModel(sn),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,_t(QS,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,gy("pictorialBar"))},function(n){n.registerChartView(xr),n.registerSeriesModel(Zr),n.registerLayout(Za),n.registerProcessor(fg("themeRiver"))},function(n){n.registerChartView(ir),n.registerSeriesModel(Nr),n.registerLayout(_t(mr,"sunburst")),n.registerProcessor(_t(fg,"sunburst")),n.registerVisual(wo),function(t){t.registerAction({type:In,update:"updateView"},function(e,r){r.eachComponent({mainType:"series",subType:"sunburst",query:e},function(o,i){var a=gi(e,[In],o);if(a){var l=o.getViewRoot();l&&(e.direction=Kb(l,a.node)?"rollUp":"drillDown"),o.resetViewRoot(a.node)}})}),t.registerAction({type:hn,update:"none"},function(e,r,o){e=De({},e),r.eachComponent({mainType:"series",subType:"sunburst",query:e},function(i){var a=gi(e,[hn],i);a&&(e.dataIndex=a.node.dataIndex)}),o.dispatchAction(De(e,{type:"highlight"}))}),t.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(e,r,o){e=De({},e),o.dispatchAction(De(e,{type:"downplay"}))})}(n)},function(n){n.registerChartView(cO),n.registerSeriesModel(wa)}]),Rn(function(n){Rn(hM),Rn(YT)}),Rn(function(n){Rn(YT),Cd.registerAxisPointerClass("PolarAxisPointer",uz),n.registerCoordinateSystem("polar",yz),n.registerComponentModel(dz),n.registerComponentView(kz),gg(n,"angle",hz,Tz),gg(n,"radius",pz,Az),n.registerComponentView(bz),n.registerComponentView(Sz),n.registerLayout(_t(Mz,"bar"))}),Rn(RM),Rn(function(n){Rn(YT),Cd.registerAxisPointerClass("SingleAxisPointer",Bz),n.registerComponentView(Vz),n.registerComponentView(Nz),n.registerComponentModel(GN),gg(n,"single",GN,GN.defaultOption),n.registerCoordinateSystem("single",Oz)}),Rn(wN),Rn(function(n){n.registerComponentModel(Fz),n.registerComponentView(Gz),n.registerCoordinateSystem("calendar",Hz)}),Rn(function(n){n.registerComponentModel(Uz),n.registerComponentView(jz),n.registerPreprocessor(function(t){var e=t.graphic;Ee(e)?t.graphic=e[0]&&e[0].elements?[t.graphic[0]]:[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])})}),Rn(function(n){n.registerComponentModel(Qz),n.registerComponentView(e5),Xx("saveAsImage",t5),Xx("magicType",r5),Xx("dataView",i5),Xx("dataZoom",d5),Xx("restore",s5),Rn(Jz)}),Rn(function(n){Rn(YT),n.registerComponentModel(p5),n.registerComponentView(x5),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},zr),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},zr)}),Rn(YT),Rn(function(n){n.registerComponentView(T5),n.registerComponentModel(A5),n.registerPreprocessor(w5),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,S5),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(r){r.setAreas(t.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},zr),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},zr),Xx("brush",I5)}),Rn(function(n){n.registerComponentModel(D5),n.registerComponentView(N5)}),Rn(function(n){n.registerComponentModel(zP),n.registerComponentView(R5),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),function(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,r,o){var i=r.getComponent("timeline");return i&&null!=e.currentIndex&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),r.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),Pe({currentIndex:i.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,r){var o=r.getComponent("timeline");o&&null!=e.playState&&o.setPlayState(e.playState)})}(n),n.registerPreprocessor(O5)}),Rn(function(n){n.registerComponentModel(P5),n.registerComponentView(B5),n.registerPreprocessor(function(t){FR(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}),Rn(function(n){n.registerComponentModel(z5),n.registerComponentView(G5),n.registerPreprocessor(function(t){FR(t.series,"markLine")&&(t.markLine=t.markLine||{})})}),Rn(function(n){n.registerComponentModel(H5),n.registerComponentView(j5),n.registerPreprocessor(function(t){FR(t.series,"markArea")&&(t.markArea=t.markArea||{})})}),Rn(function(n){Rn(QP),Rn(Z5)}),Rn(function(n){Rn(oB),Rn(sB)}),Rn(oB),Rn(sB),Rn(function(n){Rn(SB),Rn(MB)}),Rn(SB),Rn(MB),Rn(function(n){n.registerPreprocessor(MV),n.registerVisual(n.PRIORITY.VISUAL.ARIA,CV)}),Rn(function(n){n.registerTransform(LV),n.registerTransform(RV)}),Rn(function(n){n.registerComponentModel(OV),n.registerComponentView(PV)}),Rn(function(n){n.registerUpdateLifecycle("series:beforeupdate",function(t,e,r){Z(Dr(r.seriesTransition),function(o){Z(Dr(o.to),function(i){for(var a=r.updatedSeries,l=0;l<a.length;l++)(null!=i.seriesIndex&&i.seriesIndex===a[l].seriesIndex||null!=i.seriesId&&i.seriesId===a[l].id)&&(a[l][Gm]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(t,e,r){var b,_,w,S,M,o=YV(e);if(o.oldSeries&&r.updatedSeries&&r.optionChanged){var i=r.seriesTransition;if(i)Z(Dr(i),function(b){var _,w,S,M,A,I;w=o,S=r,M=e,A=[],I=[],Z(Dr((_=b).from),function(N){var L=XB(w.oldSeries,N);L>=0&&A.push({dataGroupId:w.oldDataGroupIds[L],data:w.oldData[L],divide:Pg(w.oldData[L]),groupIdDim:N.dimension})}),Z(Dr(_.to),function(N){var L=XB(S.updatedSeries,N);if(L>=0){var R=S.updatedSeries[L].getData();I.push({dataGroupId:w.oldDataGroupIds[L],data:R,divide:Pg(R),groupIdDim:N.dimension})}}),A.length>0&&I.length>0&&UB(A,I,M)});else{var a=(b=o,_=r,w=Et(),S=Et(),M=Et(),Z(b.oldSeries,function(A,I){var N=b.oldDataGroupIds[I],L=b.oldData[I],R=jB(A),O=YB(R);S.set(O,{dataGroupId:N,data:L}),Ee(R)&&Z(R,function(B){M.set(B,{key:O,dataGroupId:N,data:L})})}),Z(_.updatedSeries,function(A){if(A.isUniversalTransitionEnabled()&&A.isAnimationEnabled()){var I=A.get("dataGroupId"),N=A.getData(),L=jB(A),R=YB(L),O=S.get(R);if(O)w.set(R,{oldSeries:[{dataGroupId:O.dataGroupId,divide:Pg(O.data),data:O.data}],newSeries:[{dataGroupId:I,divide:Pg(N),data:N}]});else if(Ee(L)){var B=[];Z(L,function(Y){var X=S.get(Y);X.data&&B.push({dataGroupId:X.dataGroupId,divide:Pg(X.data),data:X.data})}),B.length&&w.set(R,{oldSeries:B,newSeries:[{dataGroupId:I,data:N,divide:Pg(N)}]})}else{var G=M.get(L);if(G){var W=w.get(G.key);W||(W={oldSeries:[{dataGroupId:G.dataGroupId,data:G.data,divide:Pg(G.data)}],newSeries:[]},w.set(G.key,W)),W.newSeries.push({dataGroupId:I,data:N,divide:Pg(N)})}}}}),w);Z(a.keys(),function(b){var _=a.get(b);UB(_.oldSeries,_.newSeries,e)})}Z(r.updatedSeries,function(b){b[Gm]&&(b[Gm]=!1)})}for(var l=t.getSeries(),c=o.oldSeries=[],h=o.oldDataGroupIds=[],p=o.oldData=[],g=0;g<l.length;g++){var y=l[g].getData();y.count()<1e4&&(c.push(l[g]),h.push(l[g].get("dataGroupId")),p.push(y))}})}),Rn(function(n){n.registerUpdateLifecycle("series:beforeupdate",function(t,e,r){var o=ig(e).labelManager;o||(o=ig(e).labelManager=new PI),o.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(t,e,r){var o=ig(e).labelManager;r.updatedSeries.forEach(function(i){o.addLabelsOfSeries(e.getViewOfSeriesModel(i))}),o.updateLayoutConfig(e),o.layout(e),o.processLabelsOverall()})}),qt.Axis=Bo,qt.ChartView=vr,qt.ComponentModel=wn,qt.ComponentView=Wr,qt.List=Ri,qt.Model=gr,qt.PRIORITY=b1,qt.SeriesModel=Pr,qt.color=Tv,qt.connect=function(n){if(Ee(n)){var t=n;n=null,Z(t,function(e){null!=e.group&&(n=e.group)}),n=n||"g_"+IS++,Z(t,function(e){e.group=n})}return ry[n]=!0,n},qt.dataTool={},qt.dependencies={zrender:"5.6.0"},qt.disConnect=eI,qt.disconnect=DS,qt.dispose=function(n){bt(n)?n=fd[n]:n instanceof ey||(n=oy(n)),n instanceof ey&&!n.isDisposed()&&n.dispose()},qt.env=gn,qt.extendChartView=function(n){var t=vr.extend(n);return vr.registerClass(t),t},qt.extendComponentModel=function(n){var t=wn.extend(n);return wn.registerClass(t),t},qt.extendComponentView=function(n){var t=Wr.extend(n);return Wr.registerClass(t),t},qt.extendSeriesModel=function(n){var t=Pr.extend(n);return Pr.registerClass(t),t},qt.format=kI,qt.getCoordinateSystemDimensions=function(n){var t=id.get(n);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},qt.getInstanceByDom=oy,qt.getInstanceById=function(n){return fd[n]},qt.getMap=function(n){var t=_S("getMap");return t&&t(n)},qt.graphic=Z1,qt.helper=wI,qt.init=function(n,t,e){var r=!(e&&e.ssr);if(r){var o=oy(n);if(o)return o}var i=new ey(n,t,e);return i.id="ec_"+kS++,fd[i.id]=i,r&&pA(n,D1,i.id),CS(i),$s.trigger("afterinit",i),i},qt.innerDrawElementOnCanvas=yS,qt.matrix=ts,qt.number=JE,qt.parseGeoJSON=q1,qt.parseGeoJson=q1,qt.registerAction=Ks,qt.registerCoordinateSystem=NS,qt.registerLayout=ES,qt.registerLoading=O1,qt.registerLocale=td,qt.registerMap=RS,qt.registerPostInit=tI,qt.registerPostUpdate=L1,qt.registerPreprocessor=E1,qt.registerProcessor=mc,qt.registerTheme=N1,qt.registerTransform=OS,qt.registerUpdateLifecycle=Xh,qt.registerVisual=du,qt.setCanvasCreator=function(n){Fn({createCanvas:n})},qt.setPlatformAPI=Fn,qt.throttle=Wm,qt.time=QE,qt.use=Rn,qt.util=II,qt.vector=Ln,qt.version="5.5.1",qt.zrUtil=cr,qt.zrender=a_,Object.defineProperty(qt,"__esModule",{value:!0})}),function(qt,yr){"object"==typeof exports&&typeof module<"u"?yr(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],yr):yr((qt=qt||self).bmap={},qt.echarts)}(this,function(qt,yr){"use strict";function Ce(an,qn){this._bmap=an,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=qn,this._projection=new BMap.MercatorProjection}function oi(an,qn){return qn=qn||[0,0],yr.util.map([0,1],function(Cn){var Sn=qn[Cn],Tn=an[Cn]/2,Fn=[],wt=[];return Fn[Cn]=Sn-Tn,wt[Cn]=Sn+Tn,Fn[1-Cn]=wt[1-Cn]=qn[1-Cn],Math.abs(this.dataToPoint(Fn)[Cn]-this.dataToPoint(wt)[Cn])},this)}var gn;function Bi(an){for(var qn in an)if(an.hasOwnProperty(qn))return;return 1}Ce.prototype.dimensions=["lng","lat"],Ce.prototype.setZoom=function(an){this._zoom=an},Ce.prototype.setCenter=function(an){this._center=this._projection.lngLatToPoint(new BMap.Point(an[0],an[1]))},Ce.prototype.setMapOffset=function(an){this._mapOffset=an},Ce.prototype.getBMap=function(){return this._bmap},Ce.prototype.dataToPoint=function(qn){var Cn=new BMap.Point(qn[0],qn[1]);return[(qn=this._bmap.pointToOverlayPixel(Cn)).x-(Cn=this._mapOffset)[0],qn.y-Cn[1]]},Ce.prototype.pointToData=function(an){var qn=this._mapOffset;return[(an=this._bmap.overlayPixelToPoint({x:an[0]+qn[0],y:an[1]+qn[1]})).lng,an.lat]},Ce.prototype.getViewRect=function(){var an=this._api;return new yr.graphic.BoundingRect(0,0,an.getWidth(),an.getHeight())},Ce.prototype.getRoamTransform=function(){return yr.matrix.create()},Ce.prototype.prepareCustoms=function(){var an=this.getViewRect();return{coordSys:{type:"bmap",x:an.x,y:an.y,width:an.width,height:an.height},api:{coord:yr.util.bind(this.dataToPoint,this),size:yr.util.bind(oi,this)}}},Ce.dimensions=Ce.prototype.dimensions,Ce.create=function(an,qn){var Cn,Sn=qn.getDom();an.eachComponent("bmap",function(Tn){var Fn,wt=qn.getZr().painter,Hn=wt.getViewportRoot();if(typeof BMap>"u")throw new Error("BMap api is not loaded");function Ot(Ar){this._root=Ar}if(gn=gn||((Ot.prototype=new BMap.Overlay).initialize=function(Ar){return Ar.getPanes().labelPane.appendChild(this._root),this._root},Ot.prototype.draw=function(){},Ot),Cn)throw new Error("Only one bmap component can exist");Tn.__bmap||((Jn=Sn.querySelector(".ec-extension-bmap"))&&(Hn.style.left="0px",Hn.style.top="0px",Sn.removeChild(Jn)),(Jn=document.createElement("div")).className="ec-extension-bmap",Jn.style.cssText="position:absolute;width:100%;height:100%",Sn.appendChild(Jn),(yn=Tn.get("mapOptions"))&&delete(yn=yr.util.clone(yn)).mapType,Fn=Tn.__bmap=new BMap.Map(Jn,yn),Jn=new gn(Hn),Fn.addOverlay(Jn),wt.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}),Fn=Tn.__bmap;var Jn,yn=Tn.get("center");Hn=Tn.get("zoom"),yn&&Hn&&(Jn=Fn.getCenter(),wt=Fn.getZoom(),Tn.centerOrZoomChanged([Jn.lng,Jn.lat],wt)&&(wt=new BMap.Point(yn[0],yn[1]),Fn.centerAndZoom(wt,Hn))),(Cn=new Ce(Fn,qn)).setMapOffset(Tn.__mapOffset||[0,0]),Cn.setZoom(Hn),Cn.setCenter(yn),Tn.coordinateSystem=Cn}),an.eachSeries(function(Tn){"bmap"===Tn.get("coordinateSystem")&&(Tn.coordinateSystem=Cn)})},yr.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(an,qn){this.option.center=an,this.option.zoom=qn},centerOrZoomChanged:function(an,qn){var Cn,Sn=this.option;return Cn=an,an=Sn.center,!(Cn&&an&&Cn[0]===an[0]&&Cn[1]===an[1]&&qn===Sn.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}}),yr.extendComponentView({type:"bmap",render:function(an,qn,Cn){var Sn=!0,Tn=an.getBMap(),Fn=Cn.getZr().painter.getViewportRoot(),wt=an.coordinateSystem,yn=function(Ar,ct){var rr,et,tn,kr;Sn||(kr=Fn.parentNode.parentNode.parentNode,kr=(rr=[-parseInt(kr.style.left,10)||0,-parseInt(kr.style.top,10)||0])[1]+"px",(et=Fn.style).left!==(tn=rr[0]+"px")&&(et.left=tn),et.top!==kr&&(et.top=kr),wt.setMapOffset(rr),an.__mapOffset=rr,Cn.dispatchAction({type:"bmapRoam",animation:{duration:0}}))};function Ot(){Sn||Cn.dispatchAction({type:"bmapRoam",animation:{duration:0}})}Tn.removeEventListener("moving",this._oldMoveHandler),Tn.removeEventListener("moveend",this._oldMoveHandler),Tn.removeEventListener("zoomend",this._oldZoomEndHandler),Tn.addEventListener("moving",yn),Tn.addEventListener("moveend",yn),Tn.addEventListener("zoomend",Ot),this._oldMoveHandler=yn,this._oldZoomEndHandler=Ot,(Hn=an.get("roam"))&&"scale"!==Hn?Tn.enableDragging():Tn.disableDragging(),Hn&&"move"!==Hn?(Tn.enableScrollWheelZoom(),Tn.enableDoubleClickZoom(),Tn.enablePinchToZoom()):(Tn.disableScrollWheelZoom(),Tn.disableDoubleClickZoom(),Tn.disablePinchToZoom());var Jn=an.__mapStyle,Hn=(yn=an.get("mapStyle")||{},JSON.stringify(yn));JSON.stringify(Jn)!==Hn&&(Bi(yn)||Tn.setMapStyle(yr.util.clone(yn)),an.__mapStyle=JSON.parse(Hn)),Jn=an.__mapStyle2,yn=an.get("mapStyleV2")||{},Hn=JSON.stringify(yn),JSON.stringify(Jn)!==Hn&&(Bi(yn)||Tn.setMapStyleV2(yr.util.clone(yn)),an.__mapStyle2=JSON.parse(Hn)),Sn=!1}}),yr.registerCoordinateSystem("bmap",Ce),yr.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(an,qn){qn.eachComponent("bmap",function(Cn){var Sn=Cn.getBMap(),Tn=Sn.getCenter();Cn.setCenterAndZoom([Tn.lng,Tn.lat],Sn.getZoom())})}),qt.version="1.0.0",Object.defineProperty(qt,"__esModule",{value:!0})});