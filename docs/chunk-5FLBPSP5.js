import{$a as S,$d as Ue,Aa as i,Ac as _e,Ad as Ae,Ba as n,Ca as p,Da as X,Ea as Z,Ga as k,Ha as P,Hd as Be,Ia as d,La as me,Lc as ye,Mc as Ne,N as D,Nc as $,Nd as Oe,Oc as W,Od as ke,Pa as x,Pc as Se,Pd as Ve,Q as T,Qa as r,Qc as z,Qd as $e,R as F,Ra as g,Rc as w,Rd as We,Sa as v,Sc as q,Sd as ze,Tc as G,Td as qe,W as re,Wc as we,Wd as Ge,Xc as Ee,Xd as je,Yd as He,Zd as Le,_ as Q,_d as Ye,ab as h,ae as Je,bb as pe,ca as ae,ce as M,de as ee,e as it,ee as Ke,fa as a,h as J,he as j,ib as y,ic as ue,ja as le,jb as N,jc as b,kc as fe,ke as Qe,l as I,la as f,lc as Ce,mb as _,mc as be,me as rt,ne as Xe,oc as u,oe as Ze,pa as se,pe as et,qa as C,qc as ge,qe as tt,rd as Ie,s as ie,sd as De,ta as s,tc as ve,uc as he,vb as ce,vd as Te,wb as de,wd as Fe,xa as O,xd as Pe,y as K,yd as Me,zb as V,zc as xe,zd as Re}from"./chunk-BUOMBNC7.js";var H=class t{value;rowData;renderValue;ngOnInit(){this.renderValue=this.value}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["ng-component"]],inputs:{value:"value",rowData:"rowData"},decls:1,vars:1,template:function(e,l){e&1&&r(0),e&2&&g(l.renderValue)},encapsulation:2})};var B=class t{value;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["ng-component"]],inputs:{value:"value"},decls:2,vars:1,template:function(e,l){e&1&&(i(0,"strong"),r(1),n()),e&2&&(a(),g(l.value))},encapsulation:2})};var E=t=>({value:t});function at(t,o){if(t&1&&p(0,"nb-tag",6),t&2){let e=d(),l=x(18);s("size","tiny")("nbPopover",l)("nbPopoverContext",h(4,E,e.value))("text",e.value)}}function lt(t,o){if(t&1&&p(0,"nb-tag",6),t&2){let e=d(),l=x(8);s("size","tiny")("nbPopover",l)("nbPopoverContext",h(4,E,e.value))("text",e.value)}}function st(t,o){if(t&1&&p(0,"nb-tag",7),t&2){let e=d(),l=x(10);s("size","tiny")("nbPopover",l)("nbPopoverContext",h(4,E,e.value))("text",e.value)}}function mt(t,o){if(t&1&&p(0,"nb-tag",8),t&2){let e=d(),l=x(12);s("size","tiny")("nbPopover",l)("nbPopoverContext",h(4,E,e.value))("text",e.value)}}function pt(t,o){if(t&1&&p(0,"nb-tag",9),t&2){let e=d(),l=x(14);s("size","tiny")("nbPopover",l)("nbPopoverContext",h(4,E,e.value))("text",e.value)}}function ct(t,o){if(t&1&&p(0,"nb-tag",8),t&2){let e=d(),l=x(16);s("size","tiny")("nbPopover",l)("nbPopoverContext",h(4,E,e.value))("text",e.value)}}function dt(t,o){if(t&1&&(i(0,"nb-card",10)(1,"nb-card-header",11),r(2),n(),i(3,"nb-card-body"),r(4," Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. "),n()()),t&2){let e=o.$implicit;a(2),v(" Hello! ",e.value," ")}}function ut(t,o){if(t&1&&(i(0,"nb-card",12)(1,"nb-card-header",11),r(2),n(),i(3,"nb-card-body"),r(4," Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. "),n()()),t&2){let e=o.$implicit;a(2),v(" Hello! ",e.value," ")}}function ft(t,o){if(t&1&&(i(0,"nb-card",13)(1,"nb-card-header",11),r(2),n(),i(3,"nb-card-body"),r(4," Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. "),n()()),t&2){let e=o.$implicit;a(2),v(" Hello! ",e.value," ")}}function Ct(t,o){if(t&1&&(i(0,"nb-card",14)(1,"nb-card-header",11),r(2),n(),i(3,"nb-card-body"),r(4," Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. "),n()()),t&2){let e=o.$implicit;a(2),v(" Hello! ",e.value," ")}}function bt(t,o){if(t&1&&(i(0,"nb-card",10)(1,"nb-card-header",11),r(2),n(),i(3,"nb-card-body"),r(4," Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. "),n()()),t&2){let e=o.$implicit;a(2),v(" Hello! ",e.value," ")}}function gt(t,o){if(t&1&&(i(0,"nb-card",10)(1,"nb-card-header",11),r(2),n(),i(3,"nb-card-body"),r(4," Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. "),n()()),t&2){let e=o.$implicit;a(2),v(" Hello! ",e.value," ")}}var L=class t{value;customerStatusTpl=ee;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-customer-status-cell"]],inputs:{value:"value"},decls:19,vars:1,consts:[["ccRef",""],["clRef",""],["noRef",""],["pcRef",""],["defaultRef",""],["newRef",""],["status","danger","appearance","outline","nbPopoverTrigger","hint",1,"text-uppercase",3,"size","nbPopover","nbPopoverContext","text"],["status","success","appearance","outline","nbPopoverTrigger","hint",1,"text-uppercase",3,"size","nbPopover","nbPopoverContext","text"],["status","basic","appearance","outline","nbPopoverTrigger","hint",1,"text-uppercase",3,"size","nbPopover","nbPopoverContext","text"],["status","warning","appearance","outline","nbPopoverTrigger","hint",1,"text-uppercase",3,"size","nbPopover","nbPopoverContext","text"],["accent","basic",1,"popover-card"],["status","warning"],["accent","primary",1,"popover-card"],["accent","success",1,"popover-card"],["accent","warning",1,"popover-card"]],template:function(e,l){if(e&1&&(i(0,"nb-tag-list"),C(1,at,1,6,"nb-tag",6)(2,lt,1,6,"nb-tag",6)(3,st,1,6,"nb-tag",7)(4,mt,1,6,"nb-tag",8)(5,pt,1,6,"nb-tag",9)(6,ct,1,6,"nb-tag",8),n(),C(7,dt,5,1,"ng-template",null,0,_)(9,ut,5,1,"ng-template",null,1,_)(11,ft,5,1,"ng-template",null,2,_)(13,Ct,5,1,"ng-template",null,3,_)(15,bt,5,1,"ng-template",null,4,_)(17,gt,5,1,"ng-template",null,5,_)),e&2){let c;a(),O((c=l.value)===l.customerStatusTpl.new?1:c===l.customerStatusTpl.cc?2:c===l.customerStatusTpl.cl?3:c===l.customerStatusTpl.no?4:c===l.customerStatusTpl.pc?5:6)}},dependencies:[Je,Ye,Ue,De,Ie,w,z,W,$],styles:["nb-card[_ngcontent-%COMP%]{margin:0;max-width:20rem}"]})};var Y=class t{value;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["ng-component"]],inputs:{value:"value"},decls:2,vars:2,consts:[["nbButton","","ghost","",3,"href"]],template:function(e,l){e&1&&(i(0,"a",0),r(1),n()),e&2&&(me("href","tel:"+l.value,ae),a(),v(" ",l.value," "))},dependencies:[G,q],encapsulation:2})};var nt=it(rt());var ht=(t,o)=>({loading:t,selected:o}),ne=()=>({type:"pulse"}),oe=t=>({animation:t});function xt(t,o){t&1&&(X(0),p(1,"nb-icon",39),r(2," Edit "),Z()),t&2&&(a(),s("options",h(2,oe,S(1,ne))))}function _t(t,o){t&1&&(p(0,"nb-icon",40),r(1," Add new ")),t&2&&s("options",h(2,oe,S(1,ne)))}function yt(t,o){if(t&1&&(i(0,"nb-option",41),r(1),n()),t&2){let e=o.$implicit;s("value",e.id),a(),g(e.name)}}function Nt(t,o){if(t&1&&(i(0,"nb-option",41),r(1),n()),t&2){let e=o.$implicit;s("value",e.id),a(),g(e.name)}}function St(t,o){if(t&1&&(i(0,"nb-option",41),r(1),n()),t&2){let e=o.$implicit;s("value",e),a(),g(e)}}function wt(t,o){if(t&1&&(i(0,"nb-radio",41),r(1),n()),t&2){let e=o.$implicit;s("value",e),a(),g(e)}}function Et(t,o){if(t&1){let e=k();X(0),i(1,"form",3),P("ngSubmit",function(){T(e);let c=d();return F(c.submit())}),i(2,"nb-card")(3,"nb-card-header")(4,"div",4),C(5,xt,3,4,"ng-container",5)(6,_t,2,4,"ng-template",null,0,_),n()(),i(8,"nb-card-body")(9,"div",6)(10,"div",7)(11,"div",8)(12,"label",9),r(13,"First name"),n(),p(14,"input",10),n()(),i(15,"div",7)(16,"div",8)(17,"label",11),r(18,"Last name"),n(),p(19,"input",12),n()(),i(20,"div",7)(21,"div",8)(22,"label",13),r(23,"Email"),n(),p(24,"input",14),n()(),i(25,"div",7)(26,"div",8)(27,"label",15),r(28,"Date of birth"),n(),p(29,"input",16)(30,"nb-datepicker",null,1),n()(),i(32,"div",7)(33,"label",17),r(34,"Phone number"),n(),i(35,"nb-form-field"),p(36,"nb-icon",18)(37,"input",19),n()(),i(38,"div",7)(39,"div",8)(40,"label",20),r(41,"Doctor"),n(),i(42,"nb-select",21),C(43,yt,2,2,"nb-option",22),y(44,"async"),n()()(),i(45,"div",7)(46,"div",8)(47,"label",23),r(48,"Address"),n(),p(49,"input",24),n()(),i(50,"div",7)(51,"div",8)(52,"label",25),r(53,"Tax code"),n(),p(54,"input",26),n()(),i(55,"div",7)(56,"div",8)(57,"label",27),r(58,"Clinic"),n(),i(59,"nb-select",28),C(60,Nt,2,2,"nb-option",22),y(61,"async"),n()()(),i(62,"div",7)(63,"div",8)(64,"label",29),r(65,"Where you find it?"),n(),i(66,"nb-select",30),C(67,St,2,2,"nb-option",22),y(68,"async"),n()()(),i(69,"div",31)(70,"div",8)(71,"label",32),r(72,"Note"),n(),p(73,"textarea",33),n()(),i(74,"div",7)(75,"div",8)(76,"label",34),r(77,"Gender"),n(),i(78,"nb-radio-group",35),C(79,wt,2,2,"nb-radio",22),y(80,"async"),n()()()()(),i(81,"nb-card-footer")(82,"div",36)(83,"button",37),P("click",function(){T(e);let c=d();return F(c.close())}),r(84," Cancel "),n(),i(85,"button",38),r(86," Save "),n()()()()(),Z()}if(t&2){let e=o.ngIf,l=x(7),c=x(31),m=d();a(),s("formGroup",m.form),a(4),s("ngIf",e.selected)("ngIfElse",l),a(9),s("status",m.isValid(m.firstNameControl)?"danger":"basic"),a(5),s("status",m.isValid(m.lastNameControl)?"danger":"basic"),a(5),s("status",m.isValid(m.emailControl)?"danger":"basic"),a(5),s("nbDatepicker",c)("status",m.isValid(m.dateOfBirthControl)?"danger":"basic"),a(7),s("options",h(31,oe,S(30,ne))),a(),s("status",m.isValid(m.phoneNumberControl)?"danger":"basic"),a(5),s("status",m.isValid(m.doctorIdControl)?"danger":"basic"),a(),s("ngForOf",N(44,22,m.doctors$)),a(6),s("status",m.isValid(m.addressControl)?"danger":"basic"),a(5),s("status",m.isValid(m.taxCodeControl)?"danger":"basic"),a(5),s("status",m.isValid(m.clinicIdControl)?"danger":"basic"),a(),s("ngForOf",N(61,24,m.clinics$)),a(6),s("status",m.isValid(m.contactNoteControl)?"danger":"basic"),a(),s("ngForOf",N(68,26,m.customerContactNoteType$)),a(6),s("status",m.isValid(m.commentControl)?"danger":"basic"),a(5),s("status",m.isValid(m.genderControl)?"danger":"basic"),a(),s("ngForOf",N(80,28,m.gender$)),a(6),s("nbSpinner",e.loading)}}var U=class t extends Qe{constructor(e){super();this.ref=e}coreService=D(j);destroyRef=D(re);form=new be({id:new u(0,{nonNullable:!0}),firstName:new u("",{nonNullable:!0,validators:[b.required]}),lastName:new u("",{nonNullable:!0,validators:[b.required]}),address:new u("",{nonNullable:!0,validators:[b.required]}),dateOfBirth:new u(null,{nonNullable:!0,validators:[b.required]}),clinicId:new u("",{nonNullable:!0,validators:[b.required]}),contactNote:new u("Other",{nonNullable:!0,validators:[b.required]}),doctorId:new u("",{nonNullable:!0,validators:[b.required]}),email:new u("",{nonNullable:!0,validators:[b.required]}),gender:new u("Male",{nonNullable:!0,validators:[b.required]}),phoneNumber:new u("",{nonNullable:!0,validators:[b.required]}),comment:new u("",{nonNullable:!0}),taxCode:new u("",{nonNullable:!0,validators:[b.required]})});selected=null;loading$=new J(!1);entity;gender$=this.coreService.gender$;customerContactNoteType$=new J(Object.values(Ke));clinics$=this.coreService.getEntities$("Clinic").pipe(I(({entities:e})=>Object.values(e)));doctors$=this.coreService.getEntities$("Doctor").pipe(I(({entities:e})=>Object.values(e)));get firstNameControl(){return this.form.controls.firstName}get lastNameControl(){return this.form.controls.lastName}get emailControl(){return this.form.controls.email}get dateOfBirthControl(){return this.form.controls.dateOfBirth}get phoneNumberControl(){return this.form.controls.phoneNumber}get doctorIdControl(){return this.form.controls.doctorId}get addressControl(){return this.form.controls.address}get clinicIdControl(){return this.form.controls.clinicId}get contactNoteControl(){return this.form.controls.contactNote}get genderControl(){return this.form.controls.gender}get commentControl(){return this.form.controls.comment}get taxCodeControl(){return this.form.controls.taxCode}ngOnInit(){this.selected&&this.form.patchValue(this.selected),this.getDoctors(),this.getClinics()}close(e=!1){this.ref.close(e)}submit(){this.form.markAllAsTouched(),this.form.valid&&this.loading$.value===!1&&(this.selected?this.update():this.add())}update(){this.loading$.next(!0),this.coreService.put(this.form.getRawValue(),this.entity).pipe(M(this.destroyRef),K(()=>{this.loading$.next(!1),this.close(!0)})).subscribe()}add(){this.loading$.next(!0),this.coreService.post((0,nt.omit)(this.form.getRawValue(),["id"]),this.entity).pipe(M(this.destroyRef),K(()=>{this.loading$.next(!1),this.close(!0)})).subscribe()}getDoctors(){this.coreService.get("Doctor").pipe(M(this.destroyRef)).subscribe()}getClinics(){this.coreService.get("Clinic").pipe(M(this.destroyRef)).subscribe()}static \u0275fac=function(l){return new(l||t)(le(Be,8))};static \u0275cmp=f({type:t,selectors:[["app-customer-add-dialog"]],features:[se],decls:2,vars:6,consts:[["titleAddTpl",""],["dateOfBirthRef",""],[4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-center"],[4,"ngIf","ngIfElse"],[1,"row"],[1,"col-6"],[1,"form-group"],["for","firstName",1,"label"],["type","text","nbInput","","fullWidth","","id","firstName","placeholder","First name","formControlName","firstName",3,"status"],["for","lastName",1,"label"],["type","text","nbInput","","fullWidth","","id","lastName","placeholder","Last name","formControlName","lastName",3,"status"],["for","email",1,"label"],["type","email","nbInput","","fullWidth","","id","email","placeholder","Email","formControlName","email",3,"status"],["for","dateOfBirth",1,"label"],["id","dateOfBirth","fullWidth","","nbInput","","placeholder","Date of birth","formControlName","dateOfBirth",3,"nbDatepicker","status"],["for","phoneNumber",1,"label"],["nbPrefix","","icon","phone-outline",3,"options"],["type","tel","nbInput","","fullWidth","","id","phoneNumber","placeholder","Phone number","formControlName","phoneNumber",3,"status"],["for","doctorId",1,"label"],["id","doctorId","fullWidth","","placeholder","Doctor","formControlName","doctorId",3,"status"],[3,"value",4,"ngFor","ngForOf"],["for","address",1,"label"],["type","text","nbInput","","fullWidth","","id","address","placeholder","Address","formControlName","address",3,"status"],["for","taxCode",1,"label"],["type","text","nbInput","","fullWidth","","id","taxCode","placeholder","Tax code","formControlName","taxCode",3,"status"],["for","clinicId",1,"label"],["id","clinicId","fullWidth","","placeholder","Clinic","formControlName","clinicId",3,"status"],["for","contactNote",1,"label"],["id","contactNote","fullWidth","","placeholder","Where you find it?","formControlName","contactNote",3,"status"],[1,"col-12"],["for","comment",1,"label"],["nbInput","","fullWidth","","id","comment","placeholder","Note","formControlName","comment",3,"status"],["for","gender",1,"label"],["id","gender","fullWidth","","formControlName","gender",3,"status"],[1,"d-flex","justify-content-end"],["type","button","nbButton","","status","basic",1,"me-2",3,"click"],["type","submit","nbButton","","hero","","status","primary","nbSpinnerStatus","success","nbSpinnerMessage","",3,"nbSpinner"],["icon","edit-2-outline","pack","eva","status","primary",1,"skip","me-2",3,"options"],["icon","plus-circle-outline","pack","eva","status","primary",1,"skip","me-2",3,"options"],[3,"value"]],template:function(l,c){l&1&&(C(0,Et,87,33,"ng-container",2),y(1,"async")),l&2&&s("ngIf",pe(3,ht,N(1,1,c.loading$),c.selected))},dependencies:[xe,ge,ue,fe,Ce,_e,ve,he,w,z,W,Se,$,Ne,ye,Me,Pe,Ae,Re,V,de,ce,G,q,Ve,Oe,$e,ke,Le,je,He,qe,ze,We,Ge,we,Ee],styles:[`[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:auto;max-width:90vh;max-height:90vh}





`]})};var It=()=>({showProcess:!0,showOrder:!1}),Dt=()=>["status","contactNote","gender"];function Tt(t,o){if(t&1){let e=k();i(0,"nb-alert",2),P("close",function(){T(e);let c=d();return F(c.showWarningMessage.set(!1))}),i(1,"span"),r(2," All "),i(3,"strong",3),r(4),y(5,"async"),n(),r(6," customers are in the "),i(7,"strong",3),r(8,"new"),n(),r(9),n()()}if(t&2){let e=d();s("closable",!0),a(4),g(N(5,3,e.countWithNewStatus$)),a(5),v(" status! ",e.warningMessage()," ")}}var ot=class t{coreService=D(j);entity="Customer";settings={selectMode:"multi",actions:!1,columns:{id:{title:"ID",type:"number",width:"1%"},status:{title:"Status",type:"custom",renderComponent:L},firstName:{title:"First Name",type:"custom",renderComponent:B},lastName:{title:"Last Name",type:"custom",renderComponent:B},gender:{title:"Gender",type:"custom",renderComponent:et},dateOfBirth:{title:"Age",type:"custom",renderComponent:H},phoneNumber:{title:"Telephone",type:"custom",renderComponent:Y},email:{title:"E-mail",type:"custom",renderComponent:Ze},address:{title:"Address",type:"string"},doctorId:{title:"Doctor",type:"string"},clinicId:{title:"Clinic",type:"string"},contactNote:{title:"Contact Note",type:"string"},taxCode:{title:"Tax code",type:"string"},comment:{title:"Comment",type:"custom",renderComponent:tt}}};dialogTemplateRef=U;warningMessage=Q("");showWarningMessage=Q(!0);countWithNewStatus$=this.coreService.getEntities$("Customer").pipe(ie(o=>!!this.entity&&!!o?.entities),I(({entities:o})=>Object.values(o).filter(e=>e.status==="new").length));ngOnInit(){this.warningMessage.set(this.#e())}#e(){let o=["You\u2019ve got a fresh list of customers! It\u2019s the perfect time to give them a call. \u{1F4DE}","All customers are waiting for first contact. Let\u2019s get started! \u{1F680}","No actions taken yet \u2014 but it\u2019s never too late to reach out.","Everything\u2019s ready. You just need to start calling. \u{1F609}","Customers are marked as 'new'. A great opportunity to connect!"],e=Math.floor(Math.random()*o.length);return o[e]}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-customers"]],decls:2,vars:10,consts:[[3,"settings","entity","title","dialogTemplateRef","showAction","showCharts","filterBy"],["message","","outline","danger",3,"closable"],["message","","outline","danger",3,"close","closable"],[1,"text-danger"]],template:function(e,l){e&1&&(i(0,"app-table",0),C(1,Tt,10,5,"nb-alert",1),n()),e&2&&(s("settings",l.settings)("entity",l.entity)("title","customers")("dialogTemplateRef",l.dialogTemplateRef)("showAction",S(8,It))("showCharts",!0)("filterBy",S(9,Dt)),a(),O(l.showWarningMessage()?1:-1))},dependencies:[Xe,V,w,Fe,Te],encapsulation:2})};export{ot as CustomersComponent};
